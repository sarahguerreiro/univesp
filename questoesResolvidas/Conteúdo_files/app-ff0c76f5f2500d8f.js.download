!function(){var e,t,n,i,r,s,o,a,l={292050:function(e,t,n){"use strict";n.d(t,{Md:function(){return P},yW:function(){return d},aJ:function(){return x},$2:function(){return C},hE:function(){return g},Ne:function(){return I},rc:function(){return f},PV:function(){return i}});var i=(e,t)=>{if(e&&t)return(e.split(/\s+/)||[]).map(e=>{let n=t.get(e);return n||console.warn(`Invalid class name: ${e}`),n}).filter(e=>!!e).join(" ")||void 0},r=n(202784),s=n(198022),o=n(571447);let a=new Map,l=new Map,c=new Map,d={addComponentType:(e,t,n)=>{if(a.get(e)){console.warn(`${e} already exists in the componentManager, nothing was modified.`);return}let i={existingPortals:new Set,ultraWhiteList:n||new Map,maxNumberRendered:t};a.set(e,i)},addGlobalComponent:(e,t)=>{c.set(e,t)},getComponent:(e,t)=>{if(a.has(e))return a.get(e).ultraWhiteList.get(t)||c.get(t)},getGlobalComponent:e=>c.get(e),getWhitelist:e=>{let t=a.get(e);return t?t.ultraWhiteList:new Map},hasComponent:(e,t)=>!!a.has(e)&&(a.get(e).ultraWhiteList.has(t)||c.has(t)),hasComponentType:e=>a.has(e)||l.has(e),isValidComponent:e=>{let{componentContext:t,componentName:n,contents:i,integrationId:r}=e,s=t?a.get(t):void 0;if(!s&&t)return console.warn(`${t} has not been registered.`),!1;let o=(null==s?void 0:s.ultraWhiteList.get(n))||c.get(n);return o?i.tag&&i.tag===n?!i.props&&o.props?(console.warn(`Props are needed for '${n}', but no value for 'props' was given.`),!1):o.isValid(i,r):(console.warn(`Incorrect tag: should be ${n} but received ${i.tag}.`),!1):(console.warn(`The component '${n}' has not been added the '${t}' white list.`),!1)},overMaxComponents:e=>{let t=a.get(e),n=t?t.existingPortals.size:0,i=t&&t.maxNumberRendered;return!i||n>=i},removeComponentType:e=>{a.get(e)&&a.delete(e)},removeComponentFromPortal:(e,t)=>{let n=a.get(e);n&&n.existingPortals.delete(t)},removeGlobalComponent:e=>c.delete(e),updateComponentPortalList:(e,t)=>{let n=a.get(e);if(!n){console.warn(`${e} is not a registered component.`);return}n.existingPortals.add(t)},setCustomWhiteList:(e,t,n)=>{let i=l.get(e);i||(i=new Map),i.set(t,n),l.set(e,i)},getCustomWhiteList:(e,t)=>{let n=l.get(e);return null==n?void 0:n.get(t)},removeCustomWhiteList:e=>{l.delete(e)},hasCustomWhiteList:(e,t)=>{let n=l.get(e);return!!(null==n?void 0:n.has(t))}},u=new Set,p={},m=e=>{u.forEach(t=>{try{t(o.DI.FailedValidationPortal,e)}catch(e){console.error("Failed to call validation listener",e)}})};function h(e){let{portalType:t,contents:n,child:i,skipCustomValidation:r,integrationId:s}=e;if("string"==typeof n)return{passed:!0};let o=d.getGlobalComponent(n.tag);if(o&&!d.isValidComponent({componentName:n.tag,contents:n,integrationId:s})&&!r)return{passed:!1,message:`Component validation failed for ${n.tag}`};if(!o&&!t)return{passed:!0};let a=t&&d.getComponent(t,n.tag),l=t&&d.hasCustomWhiteList(t,n.tag);if(!i&&!a&&!o&&!r&&!l)return{passed:!1,message:`Initial tag is incorrect for a ${t} portal.`};if(a&&!d.isValidComponent({componentContext:t,componentName:n.tag,contents:n,integrationId:s})&&!r)return{passed:!1,message:`Component validation failed for ${n.tag} on ${t}`};if(!n.children||"string"==typeof n.children)return{passed:!0};for(let e of n.children){let n=h({portalType:t,skipCustomValidation:r,contents:e,integrationId:s,child:!0});if(!n.passed)return n}return{passed:!0}}let g={addPortal:e=>{p[e.portalId]=e,e.portalType&&d.updateComponentPortalList(e.portalType,e.portalId),u.forEach(t=>{try{t(o.DI.NewPortal,e)}catch(e){console.error("Failed to call new portal listener",e)}})},updatePortal:(e,t)=>{let n=t&&t(e.portalId,e.contents);if(n)return m(n),!1;let i=p[e.portalId],r=h({portalType:null==i?void 0:i.portalType,skipCustomValidation:null==i?void 0:i.skipCustomValidation,contents:e.contents,integrationId:e.requestingIntegrationId});return r.passed?(i&&i.setPortalContents(e.contents),!!i):(m({portalId:e.portalId,error:o.yr.InvalidContents,errorMessage:r.message||"Invalid contents provided on update request",requestingIntegrationId:e.requestingIntegrationId}),!1)},addPortalListener:e=>{u.add(e),Object.values(p).forEach(t=>{e(o.DI.NewPortal,t)})},removePortal:e=>{if(e.portalId){if(p[e.portalId]){let t=p[e.portalId]&&p[e.portalId].portalType;t&&d.removeComponentFromPortal(t,e.portalId),delete p[e.portalId]}u.forEach(t=>{try{t(o.DI.RemovedPortal,e)}catch(e){console.error("Failed to call remove portal listener",e)}})}},getPortalData:e=>p[e],sendPortalCallback:e=>{u.forEach(t=>{try{t(o.DI.CallbackPortal,e)}catch(e){console.error("Failed to call callback listener",e)}})},setPortalOwnership:(e,t)=>{let n=p[e];n&&n.setOwningIntegrationId(t)},sendValidationFailure:m,getUnownedPortals:()=>Object.keys(p).filter(e=>!p[e].getOwningIntegrationId()).map(e=>p[e]),validateContents:h},f=(e,t,n,i)=>()=>{let r={type:o.l4.PortalCallback,portalId:n,callbackId:e,event:t,owningIntegrationId:i};g.sendPortalCallback(r)},b=(e,t,n,i)=>{var r;return f(null===(r=t.props)||void 0===r?void 0:r[e].callbackId,e,n,i)},v=(e,t,n,i,r)=>e.reduce((e,s)=>{var a,l,c;if(s in o.dX){if(!(null===(l=null===(a=t.props)||void 0===a?void 0:a[s])||void 0===l?void 0:l.callbackId))return console.warn(`custom onXX handlers for integration components must provide a callback id
           Expect form similar to "onXX: {callbackId: '1'}": ${s}`),e;e[s]=b(s,t,n,i)}else{let o=null===(c=null==t?void 0:t.props)||void 0===c?void 0:c[s];if(r){let e=r.transformers&&r.transformers.get(s.toLowerCase());e&&(o=e(o,n,i))}e[s]=o}return e},{}),y=(e,t,n)=>{if(!e.props)return{};let i=o.R9.get(e.tag);return(null==i?void 0:i.attributes)?v(Object.keys(e.props).filter(e=>i.attributes.includes(e)),e,t,n,i):{}},S=e=>{let{contentItem:t,portalType:n,portalId:i,owningIntegration:r}=e;if(!t.props)return{};let s=n?d.getComponent(n,t.tag):d.getGlobalComponent(t.tag);return s?v(Object.keys(t.props).filter(e=>s.props&&e in s.props),t,i,r,{attributes:Object.keys(s.props||{}),transformers:s.transformers}):{}},C=e=>{let{selector:t,selectorData:n,portalId:i,initialOwningIntegrationId:o,initialContents:a,portalType:l,skipCustomValidation:c,onContentsChanged:u,onRegistered:p}=e;if(l&&!d.hasComponentType(l))return console.error(`Portal Type: ${l} is not listed in the componentManager,
      either add it to the ComponentManager along with a whitelist or remove the attribute`),null;let[m,h]=(0,r.useState)(a),[f,b]=(0,r.useState)(o),[v]=(0,r.useState)(i||(0,s.v4)());return(0,r.useEffect)(()=>(g.addPortal({portalId:v,selector:t,selectorData:n,setPortalContents:e=>{h(e),setTimeout(()=>u&&u(e))},setOwningIntegrationId:e=>{b(e)},getOwningIntegrationId:()=>f,portalType:l,skipCustomValidation:!!c}),p&&p(),()=>{g.removePortal({portalId:v,selector:t,selectorData:n})}),[v,t,n,l,f,c,u]),r.createElement(r.Fragment,null,E(m&&[m],f,v,l))},E=(e,t,n,s)=>e?"string"==typeof e?[e]:e.map((e,a)=>{let l;if(!e)return null;if(s){let i=d.getComponent(s,e.tag);if(i){let r=S({contentItem:e,portalType:s,portalId:n,owningIntegration:t});return i.render(n,{key:a,...r},E(e.children,t,n,s))}}let c=d.getGlobalComponent(e.tag);if(c){let i=S({contentItem:e,portalId:n,owningIntegration:t});return c.render(n,{key:a,...i},E(e.children,t,n))}if(s&&(l=d.getCustomWhiteList(s,e.tag)),l||(l=o.R9.get(e.tag)),l){let o=y(e,n,t);return""===o.src||""===o.href?null:(o.href&&(o.target="_blank"),o.key=a,o.className=i(o.className,l.classNameMappings)||l.classNameDefault,r.createElement(e.tag,o,E(e.children,t,n,s)))}return null}):null,I=e=>{let{portals:t,selector:n,portalType:i}=e;return r.createElement(r.Fragment,null,t.map((e,t)=>{let s={...e.selectorData,registrationId:e.registrationRecord.registrationId,registrationName:e.registrationRecord.registrationName};return r.createElement(C,{key:t,selector:n,selectorData:s,initialOwningIntegrationId:e.registrationRecord.integrationId,portalType:i})}))},w=new Map;w.set(o.Oz,o.o4),w.set(o.dq.PanelNew,o.o4),w.set(o.dq.PanelClose,o.o4),w.set(o.Kj.Click,o.cp),w.set(o.Kj.Hover,o.cp),w.set(o.Kj.PortalNew,o.o4),w.set(o.Kj.PortalRemove,o.o4),w.set(o.Kj.Route,o.Tv),w.set(o.Kj.RouteChanging,o.Tv),w.set(o.SC,o.Yy),w.set(o.BG.ModalNew,o.$I),w.set(o.BG.ModalClose,o.$I),w.set(o.Eo.NotificationNew,o.DK),w.set(o.Eo.NotificationClose,o.DK);let A=(e,t)=>{if(!k(t))return!1;let n=w.get(e.type);return!!(t.authScopes.has(o.Rt)||n&&t.authScopes.has(n))||(console.warn(`Invalid auth scope for ${e.type}, ${n} is required.`),!1)};function k(e){return!!e.authScopes&&!(e.authScopes.size<=0)||(console.warn(`Received event without integration (${e&&e.id}) being authenticated.`),!1)}let T=new Map;T.set(o.Oz,A),T.set(o.e0,(e,t)=>!!k(t)&&(!!t.authScopes.has(o.bN)||(console.warn(`The integration ${t.id} does not have the JavaScript injection scope`),!1))),T.set(o.c9,(e,t)=>{if(!k(t))return!1;if(t.authScopes.has(o.Rt))return!0;let n=new Map;e.subscriptions.forEach(e=>{let t=w.get(e);t&&n.set(t,e)});let i=[];return e.subscriptions.forEach(e=>{let r=w.get(e);r&&t.authScopes.has(r)?n.delete(r):i.push(e)}),i.length===n.size||(n.forEach(t=>{let i=n.get(t);if(!i){console.warn(`Unrecognized auth scope ${t}.`);return}console.warn(`Invalid auth scope for ${e.type}, ${t} is required for the ${i} event.`)}),!1)}),T.set(o.dq.PanelNew,A),T.set(o.dq.PanelClose,A),T.set(o.SC,A),T.set(o.BG.ModalNew,A),T.set(o.BG.ModalClose,A),T.set(o.Eo.NotificationNew,A),T.set(o.Eo.NotificationClose,A);let P={authScopes:T},D=new Map,x={addHelpProvider:e=>{D.set(e.providerId,e)},removeHelpProvider:e=>{D.delete(e)},getHelpProvider:e=>D.get(e),getProviderByType:e=>Array.from(D.values()).filter(t=>t.providerType===e),getProviders:()=>Array.from(D.values())}},571447:function(e,t,n){"use strict";var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k,T,P,D,x,R,L,N,$,O,G,_,M,B,F,U,V,H,q,j,z,W,K,Z,Q,J,Y,X,ee,et,en,ei,er,es,eo,ea,el,ec,ed,eu;n.d(t,{Rt:function(){return eC},cp:function(){return eg},$3:function(){return eY},RC:function(){return em},ul:function(){return eQ},eB:function(){return eJ},l4:function(){return A},IK:function(){return L},OZ:function(){return R},Fm:function(){return eZ},JZ:function(){return eX},qV:function(){return x},f4:function(){return O},F7:function(){return $},Yy:function(){return ef},SC:function(){return ew},A0:function(){return eA},_n:function(){return r},j6:function(){return ep},RU:function(){return N},xR:function(){return i},EA:function(){return D},sH:function(){return o},fZ:function(){return a},Jg:function(){return P},D_:function(){return h},ZN:function(){return c},iA:function(){return u},RK:function(){return f},CD:function(){return d},wV:function(){return eT},m1:function(){return ex},gQ:function(){return eR},o4:function(){return eb},$I:function(){return ey},DK:function(){return eS},pM:function(){return eF},Oz:function(){return eB},bN:function(){return eI},hq:function(){return eE},PO:function(){return ej},Ul:function(){return ez},yr:function(){return w},dX:function(){return C},BG:function(){return l},X$:function(){return s},B$:function(){return ek},Eo:function(){return g},$n:function(){return p},L4:function(){return eP},LB:function(){return m},AQ:function(){return eD},Hh:function(){return y},dq:function(){return v},Nc:function(){return b},l1:function(){return S},yf:function(){return eM},oi:function(){return k},Tv:function(){return ev},cQ:function(){return e1},e0:function(){return e0},c9:function(){return eW},Mi:function(){return eh},Vd:function(){return eK},DI:function(){return E},Kj:function(){return T},R9:function(){return eq},hj:function(){return eU}});let ep="integration:hello",em="authorization:authorize",eh="authorization:unauthorize";(G=i||(i={})).Failure="failure",G.Success="success";let eg="ultra:analytics-event",ef="ultra:help",eb="ultra:portal",ev="ultra:route-event",ey="ultra:modal",eS="ultra:notification",eC="*",eE="bb.premium.uef",eI="bb.premium.uef.injectjs",ew="help:register",eA="help:request";(_=r||(r={})).Auxiliary="auxiliary",_.Primary="primary",(M=s||(s={})).Small="small",M.Medium="medium",M.Large="large";let ek=new Set(Object.values(s));(B=o||(o={})).Modal="Modal",B.ModalHeader="ModalHeader",B.ModalBody="ModalBody",B.ModalFooter="ModalFooter",(F=a||(a={}))[F.ModalAlreadyOpenError=1]="ModalAlreadyOpenError",F[F.FailedComponentValidationError=2]="FailedComponentValidationError",F[F.InvalidRequestTypeError=3]="InvalidRequestTypeError",F[F.InvalidIdError=4]="InvalidIdError",F[F.MissingContentsError=5]="MissingContentsError",F[F.WrongOwnerError=6]="WrongOwnerError",F[F.ModalNotFoundError=7]="ModalNotFoundError",(U=l||(l={})).ModalNew="portal:modal",U.ModalResponse="portal:modal:response",U.ModalClose="portal:modal:close",U.ModalCloseResponse="portal:modal:close:response",(V=c||(c={}))[V.InvalidSelectorError=1]="InvalidSelectorError",V[V.InvalidTargetError=2]="InvalidTargetError",V[V.NotificationNotFoundError=3]="NotificationNotFoundError",V[V.NoOwnershipError=4]="NoOwnershipError",V[V.FailedComponentValidationError=5]="FailedComponentValidationError",(H=d||(d={})).Dark="dark",H.Light="light";let eT=new Set(Object.values(d));(q=u||(u={}))[q.Small=12]="Small",q[q.Medium=20]="Medium",q[q.Large=30]="Large",(j=p||(p={})).BottomLeft="bottom:left",j.BottomRight="bottom:right",j.TopLeft="top:left",j.TopRight="top:right";let eP=new Set(Object.values(p));(z=m||(m={})).AnalyticsId="notification:analytics:selector",z.Region="notification:region:selector";let eD=new Set(Object.values(m));(h||(h={})).Notification="Notification",(W=g||(g={})).NotificationNew="portal:notification",W.NotificationResponse="portal:notification:response",W.NotificationStatus="portal:notification:status",W.NotificationClose="portal:notification:close",W.NotificationCloseResponse="portal:notification:close:response",(K=f||(f={})).Queued="queued",K.Visible="visible",K.Failed="failed",K.Removed="removed";let ex="submission-tool:register",eR="submission-tool:settings-saved";(Z=b||(b={})).Full="full",Z.Small="small",(Q=v||(v={})).PanelNew="portal:panel",Q.PanelResponse="portal:panel:response",Q.PanelClose="portal:panel:close",Q.PanelCallback="portal:callback",(J=y||(y={})).onClose="onClose",J.onBlur="onBlur",J.onScroll="onScroll",J.onClick="onClick";let eL=globalThis.location.origin,eN="^[\\u0000-\\u001F ]*",e$=`${eN}j[\\r\\n\\t]*a[\\r\\n\\t]*v[\\r\\n\\t]*a[\\r\\n\\t]*s[\\r\\n\\t]*c[\\r\\n\\t]*r[\\r\\n\\t]*i[\\r\\n\\t]*p[\\r\\n\\t]*t[\\r\\n\\t]*:`,eO=`${eN}d[\\r\\n\\t]*a[\\r\\n\\t]*t[\\r\\n\\t]*a[\\r\\n\\t]*:`,eG=RegExp(`(${e$})|(^${eL})/|(${eO})`,"i"),e_=e=>!e||eG.test(e)?"":e;(Y=S||(S={})).Small="small",Y.Medium="medium",Y.Large="large";let eM=new Set(Object.values(S));(X=C||(C={})).onFocus="onFocus",X.onBlur="onBlur",X.onClick="onClick";let eB="portal:render",eF="portal:render:response";(ee=E||(E={})).NewPortal="new",ee.RemovedPortal="removed",ee.CallbackPortal="callback",ee.FailedValidationPortal="failedValidation";let eU=["className","style","dir",...Object.keys(C),"role","tabindex","id","aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-dropeffect","aria-errormessage","aria-expanded","aria-flowto","aria-grabbed","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],eV=new Map([["src",e_],["href",e_]]),eH=new Map;["div","span","h1","h2","h3","h4","p","ul","ol","li"].forEach(e=>eH.set(e,{attributes:eU})),eH.set("button",{attributes:[...eU,"disabled","title"],classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary"})),classNameDefault:"uef--button--classless"}),eH.set("iframe",{attributes:[...eU,"src"],transformers:eV}),eH.set("img",{attributes:[...eU,"src","alt","height","width"],transformers:eV}),eH.set("bdi",{attributes:eU}),eH.set("bdo",{attributes:eU}),eH.set("a",{attributes:[...eU,"href"],transformers:eV});let eq=eH;(I||(I={})).PortalClose="portal:close",(et=w||(w={}))[et.Authorization=1]="Authorization",et[et.InvalidContents=2]="InvalidContents",(A||(A={})).PortalCallback="portal:callback";let ej="proctoring-service:register",ez="proctoring-service:settings-saved";(en=k||(k={}))[en.ExistingRegistration=0]="ExistingRegistration",en[en.MissingPlacementHandle=1]="MissingPlacementHandle",(ei=T||(T={})).Click="click",ei.Hover="hover",ei.PortalNew="portal:new",ei.PortalRemove="portal:remove",ei.Route="route",ei.RouteChanging="route:changing",ei.LtiLaunch="lti:launch";let eW="event:subscribe",eK="event:unsubscribe",eZ="event:event",eQ="basenav:register";(er=P||(P={}))[er.InvalidRouteName=1]="InvalidRouteName",er[er.ExistingRouteName=2]="ExistingRouteName",(es=D||(D={})).Link="Link",es.ButtonLink="ButtonLink",(eo=x||(x={})).LtiLaunch="LtiLaunch",eo.SvgIcon="SvgIcon",eo.ActionMenu="ActionMenu";let eJ="course:detail:register";(ea=R||(R={})).Failure="failure",ea.Success="success",(el=L||(L={}))[el.ExistingRegistration=0]="ExistingRegistration";let eY="analytics:visible";(ec=N||(N={}))[ec.RateLimit=20]="RateLimit",ec[ec.MultipleIntegrationRateLimit=15]="MultipleIntegrationRateLimit";let eX="group-collaboration-tool:register";(ed=$||($={})).Failure="failure",ed.Success="success",(eu=O||(O={}))[eu.ExistingRegistration=0]="ExistingRegistration";let e0="injectjs:inject",e1="injectjs:inject:response"},564470:function(e,t,n){"use strict";n.d(t,{H1:function(){return i},J9:function(){return l.Z},Wq:function(){return a.Z},XJ:function(){return c},l9:function(){return a.l}});var i,r=n(213980),s=n(202784),o=n(928316),a=n(469996),l=n(955546);(i||(i={})).InstructorFeedback="instructorfeedback";let c=r.shape({getXythosIdFromContentFileUrl:r.func,update:r.func,isAvailable:r.func,getIndexMapFromBbML:r.func,onUpdate:r.func,destroyListeners:r.func});t.ZP={renderContentId:(e,t)=>{o.render(s.createElement(l.Z,{...t}),e)},renderWidget:(e,t)=>{o.render(s.createElement(a.Z,{...t}),e)},destroyComponent:e=>{o.unmountComponentAtNode(e)}}},941386:function(e,t,n){"use strict";n.d(t,{$2:function(){return e0},AU:function(){return es},AV:function(){return eL},AW:function(){return eS},Ag:function(){return e7},B2:function(){return ex},BU:function(){return eF},Cg:function(){return ey},DQ:function(){return em},EL:function(){return ec},Fo:function(){return eR},GS:function(){return e4},GY:function(){return ez},IH:function(){return ed},JZ:function(){return eM},K3:function(){return ef},L3:function(){return eC},MO:function(){return er},MP:function(){return eI},Ni:function(){return ea},OR:function(){return e8},Ol:function(){return e_},QA:function(){return eA},QI:function(){return e6},Qi:function(){return eZ},Re:function(){return e2},SN:function(){return e5},Tx:function(){return eY},Un:function(){return el},VV:function(){return ti},WP:function(){return eq},XM:function(){return ej},Zp:function(){return te},_T:function(){return eQ},aj:function(){return ew},ar:function(){return e1},c0:function(){return eW},cM:function(){return e3},d8:function(){return eJ},dK:function(){return eG},dr:function(){return eg},gO:function(){return en},gu:function(){return eO},jU:function(){return eN},jy:function(){return eU},km:function(){return e9},l2:function(){return eh},nk:function(){return ei},nl:function(){return eP},pn:function(){return ep},rA:function(){return eT},rG:function(){return eV},sc:function(){return eH},sg:function(){return ev},t0:function(){return eK},tM:function(){return eu},v2:function(){return eo},v6:function(){return eX},wR:function(){return tt},wj:function(){return tn},wk:function(){return eb},xj:function(){return eD},yH:function(){return ek},yj:function(){return tr},yx:function(){return eB},yz:function(){return eE},zH:function(){return e$}});var i=n(271154),r=n(150465),s=n(204445),o=n(898008),a=n(330217),l=n(577099),c=n(449806),d=n(470276),u=n(814816),p=n(942548),m=n(611997),h=n(383568),g=n(932576),f=n(13417),b=n(743983),v=n(645938),y=n(335886),S=n(242091),C=n(152999),E=n(543596),I=n(416675),w=n(533702),A=n(865913),k=n(881355),T=n(603554),P=n(501016),D=n(622109),x=n(632879),R=n(710048),L=n(765456),N=n(370559),$=n(891418),O=n(555066),G=n(943890),_=n(934693),M=n(545780),B=n(134253),F=n(158239),U=n(637817),V=n(477309),H=n(311438),q=n(935055),j=n(660837),z=n(628040),W=n(238314),K=n(597993),Z=n(932578),Q=n(300400),J=n(961406),Y=n(539976),X=n(902813),ee=n(462966);let et={format:{header:!1,list:!1}},en={toolbarId:"tableFormattingToolbar"},ei={toolbarId:"textStylingToolbar"},er={toolbarId:"textOptionsToolbar"},es={toolbarId:"listFormattingToolbar"},eo={cssClass:"alignment",iconName:"alignment",iconComponent:U.z,id:"alignment",key:"alignment"},ea={cssClass:"alignLeft",iconName:"alignLeft",iconComponent:U.z,id:"align-left",key:"alignLeft",onClick:({applyChange:e})=>e(g.xM.createChange(g.jm)),isActive:e=>e.align===g.jm||!e.align},el={cssClass:"alignCenter",iconName:"alignCenter",iconComponent:V.V,id:"align-center",key:"alignCenter",onClick:({applyChange:e})=>e(g.xM.createChange(g.w3)),isActive:e=>e.align===g.w3},ec={cssClass:"alignRight",iconName:"alignRight",iconComponent:H.Q,id:"align-right",key:"alignRight",onClick:({applyChange:e})=>e(g.xM.createChange(g.gg)),isActive:e=>e.align===g.gg},ed={cssClass:"alignJustify",iconName:"alignJustify",iconComponent:q.l,id:"align-justify",key:"alignJustify",onClick:({applyChange:e})=>e(g.xM.createChange(g.x2)),isActive:e=>e.align===g.x2},eu={cssClass:"text-styling",iconName:"Type",iconComponent:M.D,id:"textStyling",key:"textStyling"},ep={cssClass:"text-style",iconName:"type-size",iconComponent:S.V,id:"textStyle",key:"textStyle"},em={cssClass:"text-font",iconName:"text",iconComponent:_.x,id:"textFont",key:"textFont"},eh={cssClass:"arial text-font",id:"font-arial",key:"fontArial",onClick:({applyChange:e})=>e(p.Zx.createChange(p.MW)),isActive:e=>e.font===p.MW},eg={cssClass:"comic-sans text-font",id:"font-comic-sans",key:"fontComicSans",onClick:({applyChange:e})=>e(p.Zx.createChange(p.eL)),isActive:e=>e.font===p.eL},ef={cssClass:"courier-new text-font",id:"font-courier-new",key:"fontCourierNew",onClick:({applyChange:e})=>e(p.Zx.createChange(p.Ol)),isActive:e=>e.font===p.Ol},eb={cssClass:"noto text-font",id:"font-noto",key:"fontNoto",onClick:({applyChange:e})=>e(p.Zx.createChange(p.z2)),isActive:e=>e.font===p.z2},ev={cssClass:"open-sans text-font",id:"font-open-sans",key:"fontOpenSans",onClick:({applyChange:e})=>e(p.Zx.createChange(p.KZ)),isActive:e=>e.font===p.KZ||!e.font},ey={cssClass:"times-new-roman text-font",id:"font-TNR",key:"fontTNR",onClick:({applyChange:e})=>e(p.Zx.createChange(p.gt)),isActive:e=>e.font===p.gt},eS={cssClass:"verdana text-font",id:"font-verdana",key:"fontVerdana",onClick:({applyChange:e})=>e(p.Zx.createChange(p.VT)),isActive:e=>e.font===p.VT},eC={cssClass:"lineHeight",iconName:"lineHeight",iconComponent:j.L,id:"lineHeight",key:"lineHeight"},eE={cssClass:"lineHeight1",id:"lineHeight-1",key:"lineHeight1",onClick:({applyChange:e})=>e(h.kG.createChange(h.g)),isActive:e=>e.lineheight===h.g},eI={cssClass:"lineHeight115",id:"lineHeight-115",key:"lineHeight115",onClick:({applyChange:e})=>e(h.kG.createChange(h.ee)),isActive:e=>e.lineheight===h.ee},ew={cssClass:"lineHeight150",id:"lineHeight-150",key:"lineHeight150",onClick:({applyChange:e})=>e(h.kG.createChange(h.j4)),isActive:e=>e.lineheight===h.j4||!e.lineheight},eA={cssClass:"lineHeight2",id:"lineHeight-2",key:"lineHeight2",onClick:({applyChange:e})=>e(h.kG.createChange(h.uD)),isActive:e=>e.lineheight===h.uD},ek={cssClass:"text-size",iconName:"type-size",iconComponent:B.H,id:"textSize",key:"textSize"},eT={cssClass:"text-size-num",id:"size-10px",key:"size10px",onClick:({applyChange:e})=>e(m.$u.createChange(m.X4)),isActive:e=>e.size===m.X4},eP={cssClass:"text-size-num",id:"size-12px",key:"size12px",onClick:({applyChange:e})=>e(m.$u.createChange(m.r_)),isActive:e=>e.size===m.r_},eD={cssClass:"text-size-num",id:"size-14px",key:"size14px",onClick:({applyChange:e})=>e(m.$u.createChange(m.SC))},ex={cssClass:"text-size-num",id:"size-18px",key:"size18px",onClick:({applyChange:e})=>e(m.$u.createChange(m.gJ))},eR={cssClass:"text-size-num",id:"size-24px",key:"size24px",onClick:({applyChange:e})=>e(m.$u.createChange(m.Yf)),isActive:e=>e.size===m.Yf},eL={cssClass:"text-size-num",id:"size-36px",key:"size36px",onClick:({applyChange:e})=>e(m.$u.createChange(m.SG)),isActive:e=>e.size===m.SG},eN={cssClass:"text-size-num",id:"size-48px",key:"size48px",onClick:({applyChange:e})=>e(m.$u.createChange(m.B3)),isActive:e=>e.size===m.B3},e$={cssClass:"color-picker",iconName:"paint-bucket",iconComponent:I.m,id:"color-picker",key:"colorPicker"},eO={cssClass:"color-black",iconName:"color-black",id:"color-picker-black",key:"color-black",isColorPicker:!0,color:ee.O9.Black,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Black))},eG={cssClass:"color-grey",iconName:"color-grey",id:"color-picker-grey",key:"color-grey",isColorPicker:!0,color:ee.O9.Grey,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Grey))},e_={cssClass:"color-purple",iconName:"color-purple",id:"color-picker-purple",key:"color-purple",isColorPicker:!0,color:ee.O9.Purple,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Purple))},eM={cssClass:"color-blue",iconName:"color-blue",id:"color-picker-blue",key:"color-blue",isColorPicker:!0,color:ee.O9.Blue,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Blue))},eB={cssClass:"color-green",iconName:"color-green",id:"color-picker-green",key:"color-green",isColorPicker:!0,color:ee.O9.Green,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Green))},eF={cssClass:"color-red",iconName:"color-red",id:"color-picker-red",key:"color-red",isColorPicker:!0,color:ee.O9.Red,onClick:({applyChange:e})=>e(X.Z.createChange(ee.O9.Red))},eU={cssClass:"direction-LTR",id:"direction-LTR",key:"direction-LTR",iconName:"left-to-right",iconComponent:Z.A,onClick:({applyChange:e})=>e(f.Nm.createChange(f.TM))},eV={cssClass:"direction-RTL",id:"direction-RTL",key:"direction-RTL",iconName:"right-to-left",iconComponent:Q.u,onClick:({applyChange:e})=>e(f.Nm.createChange(f.hn))},eH={cssClass:"list-style",iconName:"bulleted-list",iconComponent:w.n,id:"listStyleMenu",key:"listStyleMenu"},eq={cssClass:"undo-action",iconName:"undo",iconComponent:z.W,id:"undo",key:"undo",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.history",action:"undo"})},ej={cssClass:"clear-format",iconName:"erase",iconComponent:W.e,id:"clearFormat",key:"clearFormat",toggleButton:!1,onClick:({quillModuleAction:e})=>e({action:"clearFormat"})},ez={cssClass:"syntax-action",iconName:"syntax",iconComponent:K.J,id:"syntax",key:"syntax",toggleButton:!0,onClick:({isActive:e,applyChange:t})=>t(u.Z.createChange(!e)),isActive:e=>e["code-block"]},eW={cssClass:"format-style",iconName:"format-text",iconComponent:Y.Menu,id:"formatStyleMenu",key:"formatStyleMenu"},eK={cssClass:"insert-content",iconName:"add",iconComponent:b.m,id:"insertContent",key:"insertContent"},eZ=[{cssClass:"header-four",id:"title",key:"title",tag:"h4",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(4)),isActive:e=>4===e.header},{cssClass:"header-five",id:"header",key:"header",tag:"h5",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(5)),isActive:e=>5===e.header},{cssClass:"header-six",id:"subheader",key:"subheader",tag:"h6",onClick:({isActive:e,applyChange:t})=>t(e?et:o.Z.createChange(6)),isActive:e=>6===e.header},{cssClass:"unstyled",id:"paragraph",key:"paragraph",tag:"p",onClick:({applyChange:e})=>e(et),isActive:e=>!e.header&&!e.list}],eQ=eZ.map(({cssClass:e,id:t,tag:n,key:i})=>({cssClass:e,id:t,tag:n,key:i})),eJ={cssClass:"bold",iconName:"bold",iconComponent:v.q,id:"bold",key:"bold",onClick:({isActive:e,applyChange:t})=>t(i.Z.createChange(!e)),isActive:e=>e.bold},eY={cssClass:"italic",iconName:"italicize",iconComponent:C.a,id:"italic",key:"italic",onClick:({isActive:e,applyChange:t})=>t(r.Z.createChange(!e)),isActive:e=>e.italic},eX={cssClass:"underline",iconName:"underline",iconComponent:F.$,id:"underline",key:"underline",onClick:({isActive:e,applyChange:t})=>t(s.Z.createChange(!e)),isActive:e=>e.underline},e0={cssClass:"superscript",iconName:"superscript",iconComponent:T.i,id:"superscript",key:"superscript",onClick:({isActive:e,applyChange:t})=>t(l.Z.createChange(!e)),isActive:e=>e.superscript},e1={cssClass:"subscript",iconName:"subscript",iconComponent:k.s,id:"subscript",key:"subscript",onClick:({isActive:e,applyChange:t})=>t(c.Z.createChange(!e)),isActive:e=>e.subscript},e2={cssClass:"strike",iconName:"strikethrough",iconComponent:A.n,id:"strike",key:"strike",onClick:({isActive:e,applyChange:t})=>t(d.Z.createChange(!e)),isActive:e=>e.strike},e4={cssClass:"ordered-list-item",iconName:"numbered-list",iconComponent:E.w,id:"orderedList",key:"orderedList",onClick:({isActive:e,applyChange:t})=>t(e?et:a.ZP.createChange(!1)),isActive:e=>"ordered"===e.list},e6={cssClass:"unordered-list-item",iconName:"bulleted-list",iconComponent:y.K,id:"unorderedList",key:"unorderedList",onClick:({isActive:e,applyChange:t})=>t(e?et:a.ZP.createChange(!0)),isActive:e=>"bullet"===e.list},e5={cssClass:"table-creator-style",iconName:"table-creator",iconComponent:P.i,id:"tableCreator",key:"tableCreator"},e3={cssClass:"insert-table-style",iconName:"insert-table",iconComponent:D.F,id:"insertTable",key:"insertTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:r})=>{e(J.Z,{translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:r})}},e8={cssClass:"edit-table-style",iconName:"edit-table",iconComponent:P.i,id:"editTable",key:"editTable",isDialog:!0,onClick:({showModal:e,translate:t,quillModuleAction:n,closeAllMenus:i,bbEditorId:r})=>{let s=n({module:"quill.table",action:"get-table-info"}),o={columns:s.columnCount,rows:s.rowCount,headerRow:s.headerRow,headerColumn:s.headerColumn};e(J.Z,{translate:t,quillModuleAction:n,isEditingTable:!0,editProps:o,closeAllMenus:i,bbEditorId:r})}},e9={cssClass:"insert-row-above-style",iconName:"insert-row-above",iconComponent:L.j,id:"insertRowAbove",key:"insertRowAbove",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-above"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},e7={cssClass:"insert-row-below-style",iconName:"insert-row-below",iconComponent:N.E,id:"insertRowBelow",key:"insertRowBelow",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-row-below"}),t.headerColumn&&1===t.rowCount&&(e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}),e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}))}},te={cssClass:"insert-column-left-style",iconName:"insert-column-left",iconComponent:x.R,id:"insertColumnLeft",key:"insertColumnLeft",toggleButton:!1,onClick:({quillModuleAction:e})=>{let t=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-left"}),t.headerRow&&1===t.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:t.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:t.headerColumn}))}},tt={cssClass:"insert-column-right-style",iconName:"insert-column-right",iconComponent:R.Z,id:"insertColumnRight",key:"insertColumnRight",toggleButton:!1,onClick:({quillModuleAction:e,setHeader:t})=>{let n=e({module:"quill.table",action:"get-table-info"});e({module:"quill.table",action:"insert-col-right"}),n.headerRow&&1===n.columnCount&&(e({module:"quill.table",action:"set-header-row",setHeader:n.headerRow}),e({module:"quill.table",action:"set-header-col",setHeader:n.headerColumn}))}},tn={cssClass:"delete-table-style",iconName:"delete-table",iconComponent:G.P,id:"deleteTable",key:"deleteTable",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-table"})},ti={cssClass:"delete-column-style",iconName:"delete-column",iconComponent:$.V,id:"deleteColumn",key:"deleteColumn",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-column"})},tr={cssClass:"delete-row-style",iconName:"delete-row",iconComponent:O.y,id:"deleteRow",key:"deleteRow",toggleButton:!1,onClick:({quillModuleAction:e})=>e({module:"quill.table",action:"delete-row"})}},150885:function(e,t,n){"use strict";n.r(t),n.d(t,{BbEditor:function(){return p.Z},BbEditorFactory:function(){return eJ},BbEditorSettingsProvider:function(){return eK},FileRenderType:function(){return r},ModalInsertLocalFile:function(){return m.Ke},ModalMaxFileSizeError:function(){return m.Dy},TextBlockStyles:function(){return em._T},addPrefixToBbML:function(){return y.Qo},aiGeneration:function(){return A},bbmlFileToIFile:function(){return g.e},contentCollection:function(){return ej.i},contentMarket:function(){return eh.ZP},customClass:function(){return L},demoMashup:function(){return ep.Z},encodeURIComponentExt:function(){return f.Z},fixDoubleQuotesInJSONValues:function(){return y.Ac},generateLtiLink:function(){return eh.p6},generateToBbML:function(){return y.AU},getFileNameWithTypeExtension:function(){return h.O},image:function(){return G.ZP},insertCloudStorageIntegrationFile:function(){return H},insertLocalFile:function(){return _.ZP},insertYoutubeVideo:function(){return eu},isMessageTooLong:function(){return v},latex:function(){return O.ZP},link:function(){return N.Z},math:function(){return $.ZP},optionalPluginConfigPropTypes:function(){return eY},showEditFileAttachmentModal:function(){return _.At},uploadWorkflow:function(){return m.ZP},useBbEditorSettings:function(){return eZ},validateLtiLink:function(){return eh.az},video:function(){return Q.Z},videoEverywhere:function(){return eq},withBbEditorSettings:function(){return eQ}});var i,r,s=n(928316),o=n.n(s),a=n(202784),l=n.n(a),c=n(213980),d=n.n(c),u=n(174897),p=n(227621),m=n(482994),h=n(242454),g=n(242141),f=n(409780),b=n(348834).Buffer;let v=e=>b.byteLength(e)>196e3;var y=n(464357);(i=r||(r={})).Inline="inline",i.InlineOnly="inlineOnly",i.Attachment="attachment";var S=n(59879),C=n(395720);let E=({pluginConfig:e,applyChange:t,destroy:n})=>{let i=(0,a.useCallback)(n=>{e.onAiContentUsed(),t((0,C.f)(n))},[t,e]);return l().createElement(e.GenerateTextComponent,{analyticsPrefix:"bbmlEditor.editor.dialogs.aiGeneration",contentId:e.contentId,courseId:e.courseId,courseName:e.courseName,onContentInserted:i,onPanelClosed:n})},I="aiGeneration",w=e=>({id:I,cssClass:I,iconName:"auto-generate",iconComponent:S.h,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,applyChange:n})=>{t(E,{applyChange:n,pluginConfig:e})}}),A=e=>({pluginId:I,buttonConfig:w(e)});var k=n(73793),T=n(359895);let P="customClass",D=[`a[data-bbtype="${P}"][data-bbfile]`],x={type:"inline",blotName:P,tagName:"span",attributes:{"data-bbfile":null,"data-bbtype":null},renderDomNode:(e,t,n)=>{let i=(0,k.Z)(e,t,n),r=JSON.parse(n.bbfile);return i.className=r.className,i}};function R(e,t){return`<a href="#" data-bbtype="${P}" data-bbfile="${(0,T.ZP)(t.bbfile)}">${e}</a>`}var L=()=>({pluginId:P,matchers:D,formatter:x,toBbML:R}),N=n(128300),$=n(233384),O=n(415802),G=n(256579),_=n(748252),M=n(725390),B=n(994976),F=n(323760);let U="insertCloudStorageIntegrationFile",V=d().shape({apiBasePath:d().string.isRequired,xsrfToken:d().string.isRequired,courseId:d().string,fileLocation:d().string,webLocation:d().string,openCloudStorageIntegrationModal:d().func.isRequired,hideFileDisplayOptions:d().bool});var H=e=>[(0,B.ZP)(e),{pluginId:U,buttonConfig:{id:U,cssClass:U,iconName:"upload-cloud",iconComponent:F.W,isDialog:!0,isActive:()=>!1,onClick:({showModal:t,preventBlur:n,...i})=>{n(),(0,m.ZP)({applyChange:i.applyChange,multiple:!0,...e,...i,showModal:t},e.openCloudStorageIntegrationModal,"cloudStorageIntegration").then(n=>{let r=[];n.forEach(({href:s,bbfile:o})=>{var a;n.length>1?(r=r.concat((0,M.Z)(s,o,!0)),null===(a=e.onNewAttachmentSavePressed)||void 0===a||a.call(e)):(0,_.At)(o,t,e,i,s)}),r.length>0&&i.applyChange(r)})}},onUnload:()=>{window.postMessage({status:"cancel"},window.origin)}}];let q="audio",j=[`[data-bbtype="${q}"][data-bbfile]`],z={type:"embed",tagName:"div",attributes:{"data-bbtype":q,"data-bbfile":null},renderDomNode:(e,t,n,i)=>{let r=JSON.parse(n.bbfile),s=e=>!(!e.isReadOnly||e.isDisabled),o=document.createElement("div");o.classList.add("bb-audio-embed");let a=document.createElement("audio");a.autoplay=!1,a.classList.add("no-select"),a.controls=!0,a.src=r.src;let l=document.createElement("div");l.classList.add("audio-placeholder"),l.classList.add("no-select"),l.innerHTML=`<span class="audio-placeholder-icon"></span><span class="audio-title">${r.alt}</span>`,s(i)||a.classList.add("hidden"),o.appendChild(l),o.appendChild(a);let c=(0,k.Z)(e,t,n);return c.contentEditable=!1,c.classList.add("wants-props-update"),c.formatComponent=e=>{s(e)?a.classList.remove("hidden"):a.classList.add("hidden")},c.appendChild(o),c}};function W(e,t){let n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="${q}" data-bbfile="${(0,T.ZP)(t.bbfile)}">${n.alt}</a>`}var K=()=>({pluginId:q,matchers:j,formatter:z,toBbML:W}),Z=n(632037),Q=n(193910),J=n(50635),Y=n(158550),X=n(142895),ee=n(992442),et=n(797529),en=n(924980),ei=n(844156);class er extends l().Component{constructor(e){super(e),this.state={isOpen:!1,sources:[],selectedSource:null},this.handleSources=this.handleSources.bind(this),this.onCancel=this.onCancel.bind(this),this.onSourceSelect=this.onSourceSelect.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){let{courseId:e,xsrfToken:t,apiBasePath:n}=this.props;(0,ee.Z)({courseId:e,xsrfToken:t,apiBasePath:n},()=>(0,et.Z)(this.props.buttonNode)).then(e=>{this.handleSources(e.data.results)}).catch(()=>{this.setState({isOpen:!0})})}handleSources(e){e&&1===e.length?(this.props.selectSource(e[0].srcURL),this.props.destroy()):this.setState({isOpen:!0,sources:e})}onCancel(){this.setState({isOpen:!1})}onSourceSelect(e,t){e.preventDefault(),e.stopPropagation(),this.setState({isOpen:!1,selectedSource:t})}onAnimationComplete(){this.state.selectedSource&&this.props.selectSource(this.state.selectedSource.srcURL),this.props.destroy()}render(){let{analyticsEventAugmentor:e,t}=this.props,n=t("bbmlEditor.buttons.cancel");return l().createElement(X.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:t("bbmlEditor.dialogs.insertYoutubeVideo.titleContentSource"),showCloseButton:!1,type:X.DialogType.fullHeaderFooterLarge},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete,containerClassName:"modal-insert-youtube-video"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource"},l().createElement("div",{className:"content-sources"},this.state.sources.map(t=>l().createElement("button",{"aria-label":t.label,id:t.id,key:t.id,className:"source-container",onClick:e(Y.AnalyticsEventTypes.CLICK_EVENT,e=>this.onSourceSelect(e,t),"editor.modal.insert.youtube.video.contentSources.button"),"data-analytics-id":"editor.modal.insert.youtube.video.contentSources.button"},l().createElement("div",{className:"source-icon"},l().createElement("img",{src:t.iconURL,alt:t.label})),l().createElement("div",{className:"source-title"},t.label)))),this.state.sources.length<1&&l().createElement("div",{className:"no-results"},t("bbmlEditor.dialogs.insertYoutubeVideo.noResults")),l().createElement("br",null),l().createElement(X.DialogFooter,null,l().createElement(ei.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.insertYoutubeVideo.titleContentSource.cancel"},n)))}}er.propTypes={apiBasePath:d().string.isRequired,courseId:d().string,selectSource:d().func.isRequired,destroy:d().func.isRequired,xsrfToken:d().string.isRequired,buttonNode:d().shape(),...en.Z},er.defaultProps={courseId:null,buttonNode:null};let es=(0,J.H)((0,Y.withAnalytics)(er));var eo=n(623572),ea=n(549487);let el="insertYoutubeVideo",ec=e=>({showModal:t,...n})=>new Promise(i=>{t(es,{selectSource:i,...e,...n})}).then(i=>{t(eo.Z,{srcURL:i,...e,...n})}),ed=d().shape({apiBasePath:d().string,xsrfToken:d().string,courseId:d().string,enableDemoMashup:d().bool});var eu=e=>[K(),(0,Z.Z)(e),(0,Q.Z)(e),{pluginId:el,buttonConfig:{id:el,cssClass:el,iconName:"app",iconComponent:ea.g,isDialog:!0,isActive:()=>!1,onClick:ec(e)}}],ep=n(236034),em=n(941386),eh=n(169442),eg=n(406733),ef=n(474610),eb=n(816390),ev=n(326483);class ey extends l().Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.getRecordLinkPromise=(0,eb.Z)(this.props.service.getRecordLink()).then(e=>{var t,n;window.addEventListener("message",this.receiveMessage,!1),this.iFrameURLOrigin=e.data.recordUrl,this.setState({isOpen:!0,src:e.data.recordUrl},ef.dI),null===(n=(t=this.props).videoRecordingDialogOpen)||void 0===n||n.call(t)})}componentWillUnmount(){var e,t;this.getRecordLinkPromise.cancel(),window.removeEventListener("message",this.receiveMessage),null===(t=(e=this.props).videoRecordingDialogClosed)||void 0===t||t.call(e)}onDismiss(){this.setState({isOpen:!1})}receiveMessage(e){let{applyChange:t,t:n,service:i}=this.props,r=e.data.messageType,s=e.origin,o=e.source;if(this.iFrameURLOrigin&&this.iFrameURLOrigin.startsWith(s))switch(r){case"capture_loaded":o.postMessage({messageType:"capture_loaded_ack"},s);break;case"capture_maximize":o.postMessage({messageType:"capture_maximize_ack"},s);break;case"capture_complete":{let r=n("bbmlEditor.dialogs.collab_video.newRecordingLabel",{date:new Date});i.saveVideo(e.data.uid,r,r).then(i=>{let s=/src="([^"]*)"/.exec(i.data.videoEmbeddedLink)[1];t((0,ev.Z)({src:s,title:r,alt:r,uuid:e.data.uid,availabilityMessage:n("bbmlEditor.dialogs.collab_video.availabilityInfo")})),this.onDismiss()}).catch(()=>{this.onDismiss()});break}case"capture_close":o.postMessage({messageType:"capture_close_ack"},s)}}render(){let{destroy:e,t,showCloseButton:n}=this.props;return l().createElement(ef.ZP,{allowMedia:!0,destroy:e,isOpen:this.state.isOpen,showCloseButton:n,src:this.state.src,title:t("bbmlEditor.dialogs.collab_video.recordingTitle")})}}ey.propTypes={applyChange:d().func.isRequired,destroy:d().func.isRequired,service:d().shape({getRecordLink:d().func.isRequired,saveVideo:d().func.isRequired}).isRequired,showCloseButton:d().bool,videoRecordingDialogOpen:d().func,videoRecordingDialogClosed:d().func},ey.defaultProps={showCloseButton:!0};var eS=(0,J.H)(ey),eC=n(367281),eE=n.n(eC),eI=n(292346),ew=n(854666);function eA(e){return""===e.trim()?"bbmlEditor.dialogs.collab_video.errorMessage":null}class ek extends l().Component{constructor(e){super(e);let{title:t,alt:n,src:i,bbfile:r}=e.editorFormat[ew.Z];this.state={isOpen:!1,src:i,bbfile:r,title:t,alt:n},this.isValid=this.isValid.bind(this),this.onTitleChange=this.onTitleChange.bind(this),this.onAltChange=this.onAltChange.bind(this),this.onCancel=this.onCancel.bind(this),this.onSave=this.onSave.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onClick=this.onClick.bind(this),this.getErrorMessage=this.getErrorMessage.bind(this),this.getTitleLabel=this.getTitleLabel.bind(this),this.getAltLabel=this.getAltLabel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this)}UNSAFE_componentWillMount(){setTimeout(()=>this.setState({isOpen:!0}))}onCancel(){this.setState({isOpen:!1})}onSave(){this.isValid()&&!this.saveInitiated&&(this.saveInitiated=!0,this.setState({isOpen:!1}))}onKeyDown(e){e.keyCode===eE().ENTER&&(e.preventDefault(),e.stopPropagation(),this.onSave())}onClick(e){e.preventDefault(),e.stopPropagation(),this.onSave()}onTitleChange(e){this.setState({title:e,alt:e})}onAltChange(e){this.setState({alt:e})}getErrorMessage(e){let t=eA(e);return t?this.props.t(t):""}getTitleLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.displayNameLabel")}getAltLabel(){let{t:e}=this.props;return e("bbmlEditor.dialogs.collab_video.altLabel")}isValid(){return!eA(this.state.title)&&!eA(this.state.alt)}onAnimationComplete(){this.saveInitiated&&this.props.applyChange((0,ev.Z)({src:this.state.src,title:this.state.title,alt:this.state.alt,bbfile:this.state.bbfile})),this.props.destroy()}render(){let{t:e}=this.props,t=e("bbmlEditor.buttons.cancel"),n=e("bbmlEditor.buttons.save");return l().createElement(X.Dialog,{hidden:!this.state.isOpen,dialogContentProps:{title:e("bbmlEditor.dialogs.collab_video.editTitle"),type:X.DialogType.fullHeaderFooter,showCloseButton:!1},modalProps:{onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},firstFocusableSelector:"ms-Dialog-title",analyticsId:"editor.dialogs.collabVideo.editTitle"},l().createElement(eI.TextField,{className:"required",label:this.getTitleLabel(),value:this.state.title,onChanged:this.onTitleChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.displayNameLabel.textField",required:!0}),l().createElement(eI.TextField,{className:"required",label:this.getAltLabel(),value:this.state.alt,onChanged:this.onAltChange,onKeyDown:this.onKeyDown,onGetErrorMessage:this.getErrorMessage,validateOnLoad:!1,validateOnFocusOut:!0,analyticsId:"editor.dialogs.collabVideo.altLabel.textField",required:!0}),l().createElement("br",null),l().createElement(X.DialogFooter,null,l().createElement(ei.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.dialogs.collabVideo.editTitle.cancel"},t),l().createElement(ei.AnalyticsPrimaryButton,{onClick:this.onClick,disabled:!this.isValid(),analyticsId:"editor.dialogs.collabVideo.editTitle.save.button"},n)))}}ek.propTypes={destroy:d().func.isRequired,applyChange:d().func.isRequired,editorFormat:d().shape()},ek.defaultProps={editorFormat:{}};var eT=(0,J.H)(ek),eP=n(789644),eD=n.n(eP),ex=n(4264);let eR=null;class eL{constructor({apiBasePath:e,courseId:t,xsrfToken:n}){this.apiBasePath=e,this.courseId=t,this.xsrfToken=n}getAvailability(){return eR||(eR=eD()({method:"get",url:(0,ex.uI)(`${this.apiBasePath}/v1/video-integration/availability`),headers:{"X-Blackboard-XSRF":this.xsrfToken}}).then(e=>e.data.result)),eR}getRecordLink(){return eD()({method:"get",url:(0,ex.uI)(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/recordLink`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}getPlaybackLink(e){return eD()({method:"get",url:(0,ex.uI)(`${this.apiBasePath}/v1/courses/${this.courseId}/video-integration/playLink/${e}`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}saveVideo(e,t,n){return eD()({method:"post",data:{videoUuid:e,videoTitle:t,videoAltText:n},url:(0,ex.uI)(`${this.apiBasePath}/v1/video-integration`),headers:{"X-Blackboard-XSRF":this.xsrfToken}})}}var eN=n(12434),e$=n(260706),eO=n(507660),eG=n.n(eO);let e_=n(744998),eM=[`img[data-bbtype="${ew.Z}"]`];function eB(e,t,n){n.isReadOnly||n.isDisabled?(e.classList.add("clickable"),e.addEventListener("click",t),e.addEventListener("keydown",e=>{("Enter"===e.key||13===e.keyCode)&&t()})):(e.classList.remove("clickable"),e.removeEventListener("click",t))}function eF(e,t,n){let i=n.plugins.find(e=>e.pluginId===ew.Z);i&&(e.formatComponent=eB.bind(null,e,()=>{(0,eN.Z)(eg.Z,{videoId:t.video_uuid,service:i.service},n.localize.getLocalePropsForClone())}),e.formatComponent(n))}let eU={type:"embed",tagName:"div",attributes:{"data-bbtype":ew.Z,"data-bbfile":null,tabindex:"0",src:"",title:"",alt:"",info:null},renderDomNode(e,t,n){let i=JSON.parse(n.bbfile),r=(0,k.Z)(e,t,n);r.classList.add("bb-video-everywhere-playback"),r.contentEditable=!1;let s=n.info?`<br><span class="ve-info">${n.info}</span>`:"",o=`<div class="ve-inline-block"><img class="icon-video-record" src="${n.src}" alt="${eG().HTML(n.alt)}"></div>`,a=`<div class="ve-inline-block">${eG().HTML(n.title)}${s}<div>`;return r.innerHTML=`${o}&nbsp;${a}`,r.classList.add("wants-props-update"),r.querySelector("img").onerror=e=>{let t=window.btoa(e_);e.target.src=`data:image/svg+xml;base64,${t}`,e.target.onerror=null},r.formatComponent=eF.bind(null,r,i),r}};function eV(e,t){let n=`src="${t.src}"`,i=`title="${t.title}"`,r=`alt="${t.alt}"`,s=`data-bbtype="${ew.Z}"`,o=`data-bbfile="${(0,T.ZP)(t.bbfile)}"`;return`<img ${n} ${i} ${r} ${s} ${o} />`}let eH=d().shape({apiBasePath:d().string,xsrfToken:d().string,courseId:d().string});var eq=e=>{let t=new eL(e);return t.getAvailability(),{service:t,pluginId:ew.Z,buttonConfig:{id:ew.Z,cssClass:ew.Z,iconName:"collab",iconComponent:e$.X,isDialog:!0,isActive(e){return!!e[ew.Z]},onClick({showModal:n,editorFormat:i,...r}){i[ew.Z]?n(eT,{...e,...r,editorFormat:i}):n(eS,{...e,...r,service:t})},checkAvailabilityAsPromise:()=>t.getAvailability(),isHidden:!0},matchers:eM,formatter:eU,toBbML:eV}},ej=n(291683),ez=n(847969);let eW=l().createContext({}),eK=({pluginsConfig:e,hidePluginButtons:t,children:n})=>{let i=l().useMemo(()=>({pluginsConfig:e,hidePluginButtons:t}),[e,t]);return l().createElement(eW.Provider,{value:i},n)},eZ=()=>(0,a.useContext)(eW),eQ=e=>l().forwardRef((t,n)=>l().createElement(eW.Consumer,null,i=>l().createElement(e,{...t,ref:n,bbEditorSettings:i})));function eJ(e,t={}){let n=t;!function(e){if(!e)throw Error("bb-editor: DOM element does not exist.")}(e);let i=()=>{let{isRtl:t,locale:i,babelfishInstance:r,babelfishFormatInstance:s,mockLocalize:a,...c}=n;o().render(l().createElement(u.g,{isRtl:t,locale:i,babelfishInstance:r,babelfishFormatInstance:s,mockLocalize:a},l().createElement(ez.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:t},l().createElement(p.Z,{...c}))),e)};return i(),{update(e={}){delete n.bbml,n={...n,...e},i()},destroy(){o().unmountComponentAtNode(e)}}}let eY=d().shape({insertCloudStorageIntegrationFile:V,insertLocalFile:_.bq,math:$.bq,latex:O.bq,contentMarket:eh.bq,contentCollection:ej.i,insertYoutubeVideo:ed,videoEverywhere:eH})},395720:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});let i=e=>({insert:e,format:{dangerouslyPasteHTML:!0,selected:!0}})},169442:function(e,t,n){"use strict";n.d(t,{ZP:function(){return D},p6:function(){return v},bq:function(){return C},aw:function(){return y},az:function(){return b}});var i=n(202784),r=n.n(i),s=n(213980),o=n.n(s),a=n(632037),l=n(359895),c=n(500707),d=n(137519),u=n(862596),p=n(221742),m=n(424380),h=n(192900),g=n(464357),f=n(986709);function b(e){return Object.values(e).every(e=>!!e)}function v(e){let t=JSON.stringify({linkType:f.DXv.LtiLink,linkRefId:e.placementId,url:e.url,launchInNewWindow:!1,linkRefUuid:e.uuid,customParameters:e.customParameters}).replace(/"/g,"&quot;");return`<a href="#" data-bbtype="lti" data-bbfile="${t}">${e.title}</a>`}let y="ltiCard",S=[`[data-bbtype=${y}][data-bbfile]`],C=o().shape({getEmbedSrc:o().func,openContentMarket:o().func,noInsert:o().bool}),E=({showModal:e,applyChange:t,ltiCard:n,bbEditorId:i})=>{let r=JSON.parse(n.bbfile),s=r&&r.title;e(u.Z,{contentMarketObject:{data:r,title:s},applyChange:t,editMode:!0,bbEditorId:i})},I=({showModal:e,applyChange:t,pluginConfig:n,bbEditorId:i})=>{n.openContentMarket(n=>{n&&n.length>0&&(1===n.length?e(u.Z,{contentMarketObject:n[0],applyChange:t,bbEditorId:i}):t((0,c.Z)(n)))})},w=e=>!e.isReadOnly||e.isDisabled?"-1":"0",A=e=>{let{editorProps:t,values:n,pluginConfig:i}=e,s=r().useMemo(()=>JSON.parse((0,g.Ac)(n.bbfile)),[n.bbfile]),o=s.iconUrl||"";s.linkType===p.EK.bltiPlacement&&s.url&&!s.iconUrl&&(o=s.url);let a={displayName:s.title,iconUrl:o,bbType:y,bbFile:n.bbfile,hasHoverState:t.isReadOnly,tabIndex:w(t),launchLtiLink:i.launchLtiLink};return r().createElement(d.Z,{...a})},k=e=>t=>r().createElement(A,{...t,pluginConfig:e}),T=e=>({type:"embed",blotName:y,tagName:"div",attributes:{"data-bbtype":y,"data-bbfile":null,href:null},renderDomNode:(0,h.H)({processValues:e=>({...e,bbfile:(0,l.qo)(e.bbfile)}),component:k(e)})});function P(e,t){let n=JSON.parse((0,g.Ac)(t.bbfile));return`<a href="${t.href}" data-bbtype="${y}" data-bbfile="${(0,l.ZP)(t.bbfile)}">${n.title}</a>`}var D=e=>{if(e&&e.openContentMarket&&"function"!=typeof e.openContentMarket)throw Error("`openContentMarket` must be a function");return[(0,a.Z)(e),{pluginId:y,buttonConfig:{id:y,cssClass:"insert_from_content_market",iconName:"content-market",iconComponent:m.r,isDialog:!0,isHideable:e&&e.noInsert,isActive:e=>!!e[y],onClick:({applyChange:t,editorFormat:n,showModal:i,bbEditorId:r})=>{let s=n[y];if(s&&s.bbfile)E({showModal:i,applyChange:t,ltiCard:s,bbEditorId:r});else if(e&&e.openContentMarket)I({showModal:i,applyChange:t,pluginConfig:e,bbEditorId:r});else throw Error("`openContentMarket` function is required to insert a new LTI item")}},matchers:S,formatter:T(e),toBbML:P}]}},236034:function(e,t,n){"use strict";n.d(t,{Z:function(){return f},M:function(){return b}});var i=n(202784),r=n.n(i),s=n(213980),o=n.n(s),a=n(345479),l=n(142895),c=n(962682),d=n(656890),u=n(844156);class p extends r().Component{constructor(){super(),this.postBackMashupInitConfig=e=>{let t={messageType:d.Z.outgoing.initContent,config:{}};e.source.postMessage(t,window.origin)},this.state={isOpen:!1},this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.receiveMessage=this.receiveMessage.bind(this)}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout(()=>this.setState({isOpen:!0}))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}receiveMessage(e){if(window.origin===e.origin)switch(e.data.messageType){case d.Z.incoming.pageLoaded:this.postBackMashupInitConfig(e);break;case d.Z.incoming.canceled:this.onCancel();break;case d.Z.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange((0,c.Z)(this.state.content)),this.props.destroy()}render(){return r().createElement(a.Modal,{containerClassName:"modal-youtube-video-provider",isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},r().createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},r().createElement("iframe",{id:"demo-iframe",title:"Demo Mashup",src:b(),frameBorder:0})),r().createElement(l.DialogFooter,null,r().createElement(u.AnalyticsDefaultButton,{onClick:this.onCancel,analyticsId:"editor.modal.demo.mashup.close"},"Close")))}}p.propTypes={applyChange:o().func.isRequired,destroy:o().func.isRequired};var m=n(245111),h=n(549487);let g="demoMashup";var f=()=>[{pluginId:g,buttonConfig:{id:g,cssClass:g,iconName:"app",iconComponent:h.g,isDialog:!0,isActive:()=>!1,onClick:({showModal:e,...t})=>{e(p,{...t})}}}];let b=()=>{let e=new Blob([(0,m.Z)(window.origin)],{type:"text/html"});return window.URL.createObjectURL(e)}},482994:function(e,t,n){"use strict";n.d(t,{Dy:function(){return o.Z},Ke:function(){return s.Z},ZP:function(){return f},vE:function(){return g}});var i=n(259197),r=n(88818),s=n(587987),o=n(954752),a=n(322846),l=n(12434),c=n(409780),d=n(148330),u=n(221742);class p extends Error{constructor(e){super("InvalidFileError"),Object.setPrototypeOf(this,new.target.prototype),this.invalidFile=e}}function m(e,t,n,i){return new Promise(r=>{e(s.Z,{createChange:e=>r(e),files:n,fileSource:i,...t},t.localeProps)})}function h(e,t,n){return e.map((e,s)=>{let o=decodeURIComponent(e.fileName),a=(0,c.Z)(e.fileName),l=`${e.webLocation}${a}`,d={alternativeText:o,linkName:o,mimeType:e.mimeType,render:i.I_d.Attachment,fileSize:t[s].size};return((0,r.QaU)(d,n)||(0,r.t1y)(d,n))&&(d.render=i.I_d.Inline),{href:l,bbfile:d,originalFile:e}})}function g(e,t,n="local"){var i,r,s;let a=e.showModal||l.Z,c=e.fileUploadSettings?e.fileUploadSettings.maxUploadSizeInBytes:u.aW.maxFileSize,g=null!==(r=null===(i=e.fileUploadSettings)||void 0===i?void 0:i.customFileUploadSettings)&&void 0!==r?r:[],f=e.supportsInlineDocumentRender;try{let i=new d.p(c,g),r=[];for(let n of t){if(e.allowedFileTypes&&!function(e,t){return e.allowedFileTypes.some(e=>t.name.toLowerCase().endsWith(e))}(e,n))throw new p(n.name);r.push(n)}return i.validate(Array.from(t)),m(a,e,r,n).then(e=>h(e,r,f))}catch(t){if(t instanceof d.C)return(s=t.getErrorFiles(),new Promise(t=>{a(o.Z,{executeCallback:()=>t(),...e,files:s,maxFileSize:c},e.localeProps)})).then(()=>{if(t.getAllowedFiles().length>0)return m(a,e,t.getAllowedFiles(),n).then(e=>h(e,[...t.getAllowedFiles()],f))});e.applyChange?e.applyChange(t):t instanceof p&&e.onWrongFileType(t)}}async function f(e,t=null,n="local"){let i=t||(()=>(0,a.Z)(e.multiple,e.allowedFileTypes));return g(e,await i(),n)}},464357:function(e,t,n){"use strict";function i(e){try{JSON.parse(e)}catch(t){return function(e){let t=['{"','["',':"',',"'],n=['"}','"]','":','",'];for(let i=0;i<e.length;i++){let r=e[i];'"'===r&&"\\"!==e[i-1]&&0>t.indexOf(e[i-1]+r)&&0>n.indexOf(r+e[i+1])&&(e=e.substr(0,i)+'\\"'+e.substr(i+1),i+=1)}return e}(e)}return e}function r(e){return function(t){let n="function"==typeof e?e():e;return t?Promise.resolve(n):n}}function s(e,t){let n="p";return t.startsWith("<p>")&&(n="span"),`<${n}>${e}</${n}><span>${t}</span>`}n.d(t,{AU:function(){return r},Ac:function(){return i},Qo:function(){return s}})},428046:function(e,t,n){"use strict";n.d(t,{_c:function(){return f},Tg:function(){return k},dH:function(){return C},l7:function(){return i.l7},Wf:function(){return m},PW:function(){return E},og:function(){return r.og},xS:function(){return I}});var i=n(875365),r=n(780127),s=n(337527),o=n(725386),a=n(391623),l=n(868682),c=n(731925),d=n(891774),u=n(202784),p=n.n(u);function m(){let e=(0,s.j5)(),t=(0,i.Lr)(),n=(0,c.v)();return(0,u.useMemo)(()=>({...e,...t,...n}),[e,t,n])}let h=({children:e,...t})=>{let{gridRefCb:n}=(0,i.CY)(),{props:r}=m();return p().createElement("div",{ref:n,...r,...t},e)},g=({children:e,...t})=>p().createElement(s.OP,{...t},p().createElement(i.Ls,{...t},e)),f=({children:e,htmlProps:t,...n})=>p().createElement(g,{...n},p().createElement(h,{...t},e));var b=n(269191);function v({onSelect:e}={}){let t=(0,a._K)();(0,r.og)({onSelect:e});let n=(0,d.y)();return(0,u.useMemo)(()=>({...t,...n}),[t,n])}let y=({children:e,...t})=>{let{props:n}=v(),{rowRefCb:i}=(0,r.Am)();return p().createElement("div",{ref:i,...n,...t},e)},S=({children:e,...t})=>p().createElement(a.l2,{...t},p().createElement(r.o8,{...t},e)),C=({children:e,htmlProps:t,...n})=>p().createElement(S,{...n},p().createElement(y,{...t},e));function E(){let e=(0,o.Nz)(),t=(0,b.gp)(),n=(0,l.B)();return(0,u.useMemo)(()=>({...e,...t,...n}),[e,t,n])}function I(e){return t=>{let n=m(),i=v(),r=E(),s={...t,ariaGrid:n,ariaGridRow:i,ariaGridCell:r};return p().createElement(e,{...s})}}let w=({children:e,className:t,...n})=>{let{props:i}=E(),{cellRefCb:r}=(0,b.$w)();return p().createElement("div",{ref:r,...i,...n},e)},A=({children:e,...t})=>p().createElement(o.rz,{...t},p().createElement(b.cO,{...t},e)),k=({children:e,htmlProps:t,...n})=>p().createElement(A,{...n},p().createElement(w,{...t},e));n(640411)},491407:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({fileViewerContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& img":{maxHeight:"100%",maxWidth:"100%"},"& video":{maxHeight:"100%",maxWidth:"100%",display:"inline-block",marginBottom:"-5px"},"& audio":{width:"100%",display:"inline-block",marginBottom:"-6px"},"& iframe":{width:"100%",height:"100%",minHeight:"500px",[e.breakpoints.up("sm")]:{minHeight:"700px"},[e.breakpoints.up("md")]:{minHeight:"880px"},borderWidth:1,borderStyle:"solid",borderColor:e.palette.border.main}},fileViewerContainerImage:{alignItems:"stretch","& div":{backgroundColor:"unset",display:"flex"}},fileViewerContainerIframe:{alignItems:"stretch"}}))},124860:function(e,t,n){"use strict";n.d(t,{x:function(){return d}});var i=n(327355),r=n(465139),s=n(906277),o=n(202784),a=n.n(o),l=n(516082);let c=(0,i.makeStyles)(()=>(0,i.createStyles)({root:({clamp:e,lines:t})=>({...e?{boxOrient:"vertical",display:"-webkit-box",lineClamp:t,overflow:"hidden",textOverflow:"ellipsis"}:void 0,cursor:"text",margin:0,overflowWrap:"anywhere"})})),d=({clamp:e=!0,onClampChange:t,lines:n,text:i,ContainerProps:d})=>{let u=c({clamp:e,lines:n}),p=(0,o.useRef)(null),[m,h]=(0,o.useState)(),g=(0,r.f0)(t),f=(0,r.zX)(()=>{if(!p.current||"number"!=typeof n){h(!1);return}let{lineHeight:e,scrollHeight:t}=(0,l.U)(p.current);return h(t>Math.ceil(e*n))});return(0,o.useEffect)(()=>{if(!g)return;let e=new ResizeObserver(f);return p.current&&e.observe(p.current),()=>e.disconnect()},[f,g]),(0,o.useEffect)(()=>{f()},[f,i]),(0,o.useEffect)(()=>{void 0!==m&&(null==g||g(m))},[m,g]),a().createElement("p",{ref:p,...d,className:(0,s.Z)(u.root,null==d?void 0:d.className)},i)}},516082:function(e,t,n){"use strict";function i(e){return{lineHeight:parseFloat(window.getComputedStyle(e).getPropertyValue("line-height")),scrollHeight:e.scrollHeight}}n.d(t,{U:function(){return i}})},259506:function(e,t,n){"use strict";n.d(t,{G4:function(){return d},W1:function(){return v},ky:function(){return g},lv:function(){return b}});var i=n(202784),r=n(755755),s=n(137444),o=n(337486),a=n(553239),l=n(906277),c=n(346304);let d=16,u=/\D/g,p=e=>e.replace(u,"").length>d,m=(e,t,n,i,r,s,a,l,d)=>{let u;if(!(null==n?void 0:n.number))return null;if(p(t))return t;let m=(0,c.nM)(t),h=m?1:0,g=n.number.getDecimalStringSync(i);t.charAt(h)===g&&(t=m?`-0${t.substring(1)}`:`0${t}`),u=(0,o.Di)(t)?t.substring(h).replace(s,""):r?t.substring(h):e(t.substring(h));let f=m?`-${u}`:u;if(f===t)return f;let b=f.length-t.length,v=f.substring(0,a)!==t.substring(0,a)?a+b:a;return l(v>=0?v:0),d(!0),f},h=(e,t,n,i,r,s,a,l,c,u,m,h,g)=>{let f=h||e,b=(0,o.UZ)(n,u,i,r),v=(0,o.UZ)(n,c,i,r),y=(0,o.UZ)(n,d,i,r),S=(0,o.UZ)(n,Number.MAX_SAFE_INTEGER-1,i,r),C=(0,o.UZ)(n,Number.MIN_VALUE,i,r),E=(0,o.UZ)(n,Number.MAX_VALUE,i,r),I=Number.isFinite(e)?e:null;return(null==l?void 0:l(I))===!1?(s(""),I):0===e&&m.match(/[1-9]/g)?(s(t("cr.components.localizedNumberInput.validationError.minExponentialNotation",{minExponentialNotationLocalized:C})),null):e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY?(s(t("cr.components.localizedNumberInput.validationError.maxExponentialNotation",{maxExponentialNotationLocalized:E})),null):p(m)?(s(t("cr.components.localizedNumberInput.validationError.maxDigits",{maxDigits:y})),null):Number.isInteger(f)&&!Number.isSafeInteger(f)?(s(t("cr.components.localizedNumberInput.validationError.maxSafeInteger",{maxSafeInteger:S})),null):!Number.isFinite(e)&&(a||m.length>0)?(s(t((null==g?void 0:g.maximumFractionDigits)===0?"cr.components.localizedNumberInput.validationError.notIntegerNumber":"cr.components.localizedNumberInput.validationError.notNumber")),null):void 0!==u&&void 0!==c&&Number.isFinite(u)&&Number.isFinite(c)&&(e<u||e>c)&&m.length>0?(s(t("cr.components.localizedNumberInput.validationError.outsideRange",{min:b,max:v})),null):void 0!==u&&Number.isFinite(u)&&e<u&&m.length>0?(s(t("cr.components.localizedNumberInput.validationError.outsideMinRange",{min:b})),null):void 0!==c&&Number.isFinite(c)&&e>c&&m.length>0?(s(t("cr.components.localizedNumberInput.validationError.outsideMaxRange",{max:v})),null):(s(""),Number.isFinite(e)?e:null)},g=(e,t,n,i)=>{let{integer:r,exponentialNotation:s}=(0,o.Il)(e),a="-"===s.charAt(1)||"+"===s.charAt(1)?2:1,l=i(r.substring(t,r.length-n)),c=Number(s.length>a?l+s:l);return 1===t&&(c*=-1),{value:c,integerString:r,parsedInteger:l}},f=(e,t,n,i,r,s,a,l,d,u,p=!1,m)=>{if(!(null==i?void 0:i.number)||null===n)return null;let f=i.number.getDecimalStringSync(r),b=(0,c.AO)(n),v=(0,c.nM)(b)?1:0,y=(0,c.U_)(b,f)?1:0,S=null;if((0,o.Di)(b)){let n=g(b,v,y,t);S=h(n.value,e,r,p,i,s,a,l,d,u,n.integerString,n.parsedInteger,m)}else{let n=(0,c.Lk)(b,v,y,t,r,p);S=h(n.value,e,r,p,i,s,a,l,d,u,n.integerString,void 0,m)}return S},b=e=>{var t,n;let{ariaDescribedBy:d,ariaLabel:u,className:p,maintainInputValueOnBlur:h,max:g,min:b,numberFormatOptions:v,onBlur:y,onBlurNative:S,onChange:C,onChangeValidState:E,inputRef:I=null,required:w,validate:A,value:k,displayWesternNumbers:T=!1,hideErrorMessage:P=!1,inlineLabel:D,inputProps:x,...R}=e,{locale:L,babelfishFormat:N,regroupNumber:$,translate:O,parseNumber:G}=(0,r.h)(),_=(0,a.y)({displayWesternNumbers:T,locale:L,inlineLabel:D}),{displayValue:M,numericValue:B,setDisplayValue:F,setNumericValue:U}=(0,o.GM)(e),[V,H]=i.useState(""),[q,j]=i.useState(null),z=i.useRef(null),[W,K]=i.useState(null),[Z,Q]=i.useState(null),J=""===V&&(null===(t=null==A?void 0:A(k))||void 0===t||t),Y=!P&&""!==V;return i.useEffect(()=>{if(null==N?void 0:N.number){let e=N.number.getGroupingStringSync((0,o.Z3)(L,T));j(RegExp(`\\${e}`,"g"))}},[N,L,T]),i.useEffect(()=>{z.current&&Z&&(z.current.setSelectionRange(W,W),Q(!1))},[M,W,Z]),i.useEffect(()=>{null==E||E(J,V)},[J,V,E]),i.createElement(s.L,{className:(0,l.Z)(_.localizedNumberInput,p),inputRef:e=>{z.current=e,"function"==typeof I?I(e):null!==I&&(I.current=e)},css:null,error:Y||!(null===(n=null==A?void 0:A(k))||void 0===n||n),inputProps:{"aria-label":u,"aria-describedby":d,...x},onBlur:e=>{let t=Number.isFinite(B)?(0,o.UZ)(L,B,T,N,v):M;h&&(t=m($,e.target.value,N,(0,o.Z3)(L,T),(0,c.sh)(L,T),q,e.target.selectionStart,K,Q)),F(t);let n=f(O,G,t,N,L,H,w,A,g,b,T,v);n!==B&&(U(n),C&&C(n)),null==y||y(n),null==S||S(e,n)},onChange:e=>{let t=m($,e.target.value,N,(0,o.Z3)(L,T),(0,c.sh)(L,T),q,e.target.selectionStart,K,Q),n=f(O,G,t,N,L,H,w,A,g,b,T,v);F(null===n?e.target.value:t),U(n),C&&C(n)},type:"text",value:M,dir:(0,o.hN)(L,T),required:w,...R,helperText:Y?V:e.helperText})},v=i.forwardRef(({onBlur:e,onBlurNative:t,...n},r)=>i.createElement(b,{...n,onBlurNative:(n,i)=>{null==e||e(n),null==t||t(n,i)},inputRef:r}))},686366:function(e,t,n){"use strict";n.d(t,{KJ:function(){return c},Sg:function(){return u},ew:function(){return d},p4:function(){return a},y1:function(){return o},yi:function(){return l}});let i=/\D/g,r=/[+\s]/,s=(e,t)=>e.replace(i,"").length>t,o=(e,t)=>e.length>0&&s(e,t),a=e=>{let t=Number(e);return!!(e.length>0&&!e.startsWith("-")||e.startsWith("-")&&e.length>1)&&(isNaN(t)||!Number.isFinite(t)||r.test(e))},l=e=>e&&!isNaN(Number(e))&&Number(e)===Number.POSITIVE_INFINITY||Number(e)===Number.NEGATIVE_INFINITY,c=(e,t,n)=>void 0!==t&&void 0!==n&&Number.isFinite(t)&&Number.isFinite(n)&&(e<t||e>n),d=(e,t,n)=>void 0!==t&&void 0===n&&Number.isFinite(t)&&e<t,u=(e,t,n)=>void 0===t&&void 0!==n&&Number.isFinite(n)&&e>n},162059:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});let i=()=>document.getElementsByClassName("bb-offcanvas-panel").length},270361:function(e,t,n){"use strict";n.d(t,{YT:function(){return o},aJ:function(){return s},ei:function(){return i},hU:function(){return r}});let i="newTopPanelOpen",r="topPanelClose",s=()=>{let e=new Event(i);document.dispatchEvent(e)},o=()=>{let e=new Event(r);document.dispatchEvent(e)}},248994:function(e,t,n){"use strict";n.d(t,{m:function(){return i}});class i{constructor(){this.timedDisplayList=[]}static getInstance(){return i.INSTANCE||(i.INSTANCE=new i),i.INSTANCE}addTimedDisplay(e,t){if(this.timedDisplayList.find(t=>t.id===e))throw Error("Instance with unique id already exists. Instances must each have a unique id");return this.timedDisplayList.push({id:e,listener:t,isStarted:!1}),!!this.timedDisplayList.find(e=>e.isStarted)}removeTimedDisplay(e){let t=this.timedDisplayList.find(t=>t.id===e);t&&(t.isStarted&&this.stopTimedDisplay(e),this.timedDisplayList=this.timedDisplayList.filter(e=>e!==t))}startTimedDisplay(e){if(this.timedDisplayList.find(t=>t.isStarted&&t.id!==e))return!1;for(let t of this.timedDisplayList)t.id===e&&(t.isStarted=!0),t.listener(e,!0);return!0}stopTimedDisplay(e){for(let t of this.timedDisplayList)t.id===e&&(t.isStarted=!1),t.listener(e,!1)}getInstanceCount(){return this.timedDisplayList.length}resetInstances(){this.timedDisplayList=[]}}},791235:function(e,t,n){"use strict";n.d(t,{$8:function(){return r.$8},Ak:function(){return r.Ak},CO:function(){return r.CO},NU:function(){return r.NU},Q:function(){return r.Q},RE:function(){return r.RE},TN:function(){return r.TN},V4:function(){return r.V4},Y1:function(){return r.Y1},ZO:function(){return r.ZO},bm:function(){return r.bm},c1:function(){return i.c},f5:function(){return r.f5},iT:function(){return r.iT},jN:function(){return r.jN},t1:function(){return r.t1},tq:function(){return r.tq}});var i=n(576349),r=n(999371)},545169:function(e,t,n){"use strict";n.d(t,{M:function(){return s},R:function(){return o}});var i=n(202784),r=n.n(i);function s(e,t){let n=(0,i.useRef)(null);return(0,i.useLayoutEffect)(()=>{if(null===n.current)return()=>{};let t=new IntersectionObserver(t=>{if(1!==t.length)return;let{isIntersecting:n}=t[0];n&&e()},{threshold:1});return t.observe(n.current),()=>t.disconnect()},[e]),r().createElement(r().Fragment,null,t&&r().createElement("span",{style:{display:"block"},ref:n}))}let o=({hasMore:e,loader:t})=>s(t,e)},651755:function(e,t,n){"use strict";n.d(t,{Jv:function(){return r},Kx:function(){return s},zL:function(){return o}});var i=n(410628);function r(e){let t=(0,i.q)();return{announceOptionSelected:e=>t("cr.components.combobox.announceOptionSelected",{label:e.label}),announceOptionDeselected:e=>t("cr.components.combobox.announceOptionDeselected",{label:e.label}),announceValueCleared:t("cr.components.combobox.announceValueCleared"),announceSearchResults:(e,n)=>t("cr.components.combobox.announceSearchResults",{count:e,searchString:n}),noResults:e=>t("cr.components.combobox.noResults",{searchString:e}),clearButtonLabel:t("cr.components.combobox.clearButtonLabel"),searchLabel:t("cr.components.combobox.searchLabel"),...e}}function s(e){let t=r(),n={loadingResults:(0,i.q)()("cr.components.combobox.loadingResults")};return{...t,...n,...e}}function o(e){let t=r(),n=(0,i.q)();return{...t,createOptionLabel:e=>n("cr.components.combobox.createOptionLabel",{searchString:e}),...e}}},64130:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var i=n(202784),r=n(847969);let s=e=>i.createElement(r.AnalyticsSvgIcon,{analyticsId:"components-react.icons.filledAdd",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 16 16"},i.createElement("svg",{id:"icon-color-small-add-circle-press",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("path",{fill:"#A234B5",stroke:"#979797",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8"}),i.createElement("path",{stroke:"#A234B5",d:"M15.5 8c0 4.143-3.357 7.5-7.5 7.5A7.5 7.5 0 1 1 15.5 8z"}),i.createElement("path",{stroke:"#FFF",strokeLinecap:"round",strokeWidth:"2",d:"M8 4.5v7M11.5 8h-7"}))))},88818:function(e,t,n){"use strict";n.d(t,{gid:function(){return e4},P2r:function(){return i6.P},_c5:function(){return ii._c},Tgj:function(){return ii.Tg},dHq:function(){return ii.dH},kqq:function(){return nH},EZk:function(){return tz.E},KD5:function(){return E},Hth:function(){return C},lr9:function(){return K},Q$M:function(){return Z.Q},W5x:function(){return n5.W},y2h:function(){return eH},U6L:function(){return i$},YFB:function(){return ni},J9Y:function(){return tY.J},rMz:function(){return nx.r},Mtg:function(){return n6},uR:function(){return nV},fuW:function(){return ty},H4:function(){return nd.H},KHx:function(){return t9.K},sBL:function(){return tJ.s},lZX:function(){return t7},p0f:function(){return nw},ht5:function(){return ne.h},$pJ:function(){return t6},W1I:function(){return k.W1},WGK:function(){return nh.W},i0X:function(){return iR},Clg:function(){return iP},avz:function(){return iy},z$p:function(){return te},kqK:function(){return tt},P7p:function(){return tn},xsH:function(){return tq.x},uLe:function(){return tj.u},oxm:function(){return nl.o},CUg:function(){return nc.C},R22:function(){return nD.R},RKK:function(){return h},Mch:function(){return ie},x$h:function(){return it.x},cmB:function(){return nS.c},uRd:function(){return ts},zi:function(){return eS},G0o:function(){return ew},lvo:function(){return k.lv},yZw:function(){return eO},Y03:function(){return e_},Vdz:function(){return e$},rc7:function(){return H},yoW:function(){return eB},erF:function(){return e8},_Wk:function(){return eA._},AMh:function(){return t5.A},q8v:function(){return nG},W_F:function(){return i0},I_M:function(){return nn},$v_:function(){return ix},hU$:function(){return tx.hU},kIl:function(){return tU},ei$:function(){return tx.ei},QE9:function(){return ih},PKh:function(){return ek.P},s_4:function(){return tV},jHD:function(){return tI},rUo:function(){return ta},gXi:function(){return tA},huC:function(){return tT},cWq:function(){return J},YIP:function(){return tC},XOy:function(){return A},TEX:function(){return i4},Rj2:function(){return e7},GXM:function(){return eK},VWo:function(){return S},f0:function(){return nA},wTr:function(){return nT},jII:function(){return e2},mAg:function(){return iJ},_Zg:function(){return nb},Hbn:function(){return no},Rcb:function(){return na.R},Jd8:function(){return ic},eZf:function(){return id},rLu:function(){return nm},ASH:function(){return ip.A},QaU:function(){return tZ.Q},Dis:function(){return iL.Di},t1y:function(){return tZ.t1},ZOk:function(){return tZ.ZO},xmV:function(){return tk},hrz:function(){return Y.hr},hDI:function(){return Y.hD},cAp:function(){return tH.c},X0x:function(){return t4},fwx:function(){return Y.fw},V4D:function(){return tZ.V4},kpV:function(){return tR.k},PFo:function(){return ig},PZw:function(){return Y.PZ},f5y:function(){return tZ.f5},COu:function(){return tZ.CO},tqK:function(){return tZ.tq},nMy:function(){return B.nM},iTO:function(){return tZ.iT},NUD:function(){return tZ.NU},c16:function(){return tZ.c1},kyl:function(){return k.ky},shq:function(){return B.sh},JtC:function(){return im.J},IFE:function(){return iu},Wf6:function(){return ii.Wf},ogI:function(){return ii.og},rvo:function(){return nf},KeX:function(){return iS},pHO:function(){return iC},MQn:function(){return na.M},Kx9:function(){return ng.Kx},Jvq:function(){return ng.Jv},zLQ:function(){return ng.zL},ddY:function(){return nC.d},Ds_:function(){return nP},lZB:function(){return im.y},M9W:function(){return ib},U_B:function(){return B.U_},xSz:function(){return ii.xS},u3x:function(){return nv},LUx:function(){return ny}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k=n(259506),T=n(202784),P=n.n(T),D=n(847969),x=n(675689),R=n(327355);let L="30px",N=(0,R.makeStyles)(e=>{let t="auto",n="38px";return(0,R.createStyles)({root:{display:"flex",position:"relative",width:t,height:n,'& input[type="text"], & input[type="text"]:focus':{width:t,height:n,fontSize:e.typography.fontSizeDefault,paddingRight:L}},input:{width:t,"& > div":{backgroundColor:e.palette.background.default,height:n}},tooltipContainer:{color:e.palette.error.main,display:"flex"},tooltipMessageContainer:{display:"flex",padding:"0px",margin:"0px"},inputContainer:{display:"flex",width:t},inputAdormentContainer:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:L,color:e.palette.text.secondary},inputAlertContainer:{color:e.palette.error.main,display:"flex",padding:"0 4px"},inputAdormentIcon:{fontSize:e.typography.fontSizeDefault}})}),$=(0,R.makeStyles)(e=>{let t="90px",n="40px";return(0,R.createStyles)({root:{display:"flex",position:"relative",width:t,height:n,'& input[type="text"], & input[type="text"]:focus':{width:t,height:n,fontSize:e.typography.fontSizeDefault,paddingRight:L}},input:{width:t,"& > div":{borderColor:e.palette.border.main,backgroundColor:e.palette.background.default,height:n}},tooltipContainer:{color:e.palette.error.main,display:"flex"},tooltipMessageContainer:{display:"flex",padding:"0px",margin:"0px"},inputContainer:{display:"flex",width:t},inputAdormentContainer:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:L,color:e.palette.text.secondary},inputAlertContainer:{color:e.palette.error.main,display:"flex",padding:"0 4px"},inputAdormentIcon:{fontSize:e.typography.fontSizeDefault}})}),O=(0,R.makeStyles)(e=>{let t="100%",n="40px";return(0,R.createStyles)({root:{display:"flex",position:"relative",width:t,height:n,'& input[type="text"], & input[type="text"]:focus':{width:t,height:n,fontSize:e.typography.fontSizeDefault,paddingRight:L}},input:{width:t,"& > div":{borderColor:e.palette.border.main,backgroundColor:e.palette.background.default,height:n,width:t}},tooltipContainer:{color:e.palette.error.main,display:"flex"},tooltipMessageContainer:{display:"flex",padding:"0px",margin:"0px"},inputContainer:{display:"flex",width:t},inputAdormentContainer:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:L,color:e.palette.text.secondary},inputAlertContainer:{color:e.palette.error.main,display:"flex",padding:"0 4px"},inputAdormentIcon:{fontSize:e.typography.fontSizeDefault}})});var G=n(755755),_=n(686366),M=n(198022),B=n(346304);(i=h||(h={})).PartialCredit="partialCredit",i.FullWidth="fullWidth",i.Default="default",(r=g||(g={})).MinExceeded="cr.components.localizedPercentageInput.errors.minExceeded",r.MaxExceeded="cr.components.localizedPercentageInput.errors.maxExceeded",r.OutOfRange="cr.components.localizedPercentageInput.errors.outOfRange",r.MaxCharactersAllowed="cr.components.localizedPercentageInput.errors.maxCharactersAllowed",r.InvalidNumericFormat="cr.components.localizedPercentageInput.errors.invalidNumericFormat";let F=(e,t,n,i,r,s)=>e&&(0,_.p4)(e.toString())||!e&&t&&!n&&(0,_.p4)(t.toString())||!e&&n&&t&&(0,_.p4)(n.toString())?{status:!1,errorType:g.InvalidNumericFormat,errorParameters:null}:e&&(0,_.KJ)(e,r,s)||!e&&t&&(0,_.KJ)(Number(t),r,s)||t&&n&&(0,_.KJ)(Number(n),r,s)?{status:!1,errorType:g.OutOfRange,errorParameters:void 0!==r&&void 0!==s?{min:r,max:s}:null}:e&&(0,_.ew)(e,r,s)||!e&&t&&(0,_.ew)(Number(n),r,s)||t&&n&&(0,_.ew)(Number(n),r,s)?{status:!1,errorType:g.MinExceeded,errorParameters:void 0!==r?{min:r}:null}:e&&(0,_.Sg)(e,r,s)||!e&&n&&(0,_.Sg)(Number(n),r,s)?{status:!1,errorType:g.MaxExceeded,errorParameters:void 0!==s?{max:s}:null}:!e&&t&&(0,_.Sg)(Number(t),r,s)?{status:!1,errorType:g.MinExceeded,errorParameters:void 0!==r?{min:r}:null}:e&&(0,_.yi)(e.toString())||!e&&n&&(0,_.yi)(n)?{status:!1,errorType:g.MaxExceeded,errorParameters:void 0!==s?{max:s}:null}:!e&&t&&n&&(0,_.yi)(t)?{status:!1,errorType:g.MinExceeded,errorParameters:void 0!==r?{min:r}:null}:e&&(0,_.y1)(e.toString(),i)?{status:!1,errorType:g.InvalidNumericFormat,errorParameters:null}:!e&&n&&(0,_.y1)(n.toString(),i)?{status:!1,errorType:g.MaxExceeded,errorParameters:void 0!==s?{max:s}:null}:{status:!0,errorType:null,errorParameters:null},U=(e,t,n,i,r)=>{let s=(0,B.AO)(e),o=r.number.getDecimalStringSync(t),a=(0,B.nM)(s)?1:0,l=(0,B.U_)(s,o)?1:0;return(0,B.Lk)(s,a,l,n,t,i)},V=e=>e===h.PartialCredit?$:e===h.FullWidth?O:N,H=({initialValue:e,onChange:t,ariaLabel:n,ariaDescribedBy:i,analyticsIdPrefix:r,disabled:s=!1,placeholder:o,displayWesternNumbers:a=!0,min:l,max:c,customInputProps:d,showInputAsInvalid:u=!1,outOfRangeErrorMessage:p})=>{let{locale:m,babelfishFormat:h,translate:f,parseNumber:b}=(0,G.h)(),[v,y]=(0,T.useState)(!0),[S,C]=(0,T.useState)(!1),[E,I]=(0,T.useState)(""),[w]=(0,T.useState)(()=>(0,M.v4)()),A=(0,T.useRef)(null),R=V(null==d?void 0:d.customTheme)(),L=`${r}.input`,N=`${r}.tooltip`,$=!u&&!v&&S,O=!0===u?u:!v,_=null!=i?i:$?w:void 0,B=e=>{var t,n;let i=null!==(n=null===(t=null==A?void 0:A.current)||void 0===t?void 0:t.value)&&void 0!==n?n:"",r=U(i,m,b,a,h);return null!==e&&e!==r.value&&(r.value=e),F(e,i,r&&(null==r?void 0:r.value)!==void 0&&!isNaN(null==r?void 0:r.value)?null==r?void 0:r.value.toString():null,16,l,c)};return P().createElement("div",{className:R.root},P().createElement(D.AnalyticsTooltip,{id:w,analyticsId:N,placement:"bottom",title:P().createElement("div",{role:"tooltip",className:R.tooltipContainer,id:w},P().createElement("p",{className:R.tooltipMessageContainer},E)),open:$,PopperProps:{"aria-live":"polite"}},P().createElement("div",{className:R.inputContainer},P().createElement(k.lv,{className:R.input,ariaLabel:n,analyticsId:L,disabled:s,inputRef:A,placeholder:o,value:void 0===e?null:e,error:O,displayWesternNumbers:a,validate:e=>{let{status:t,errorType:n,errorParameters:i}=B(e);if(y(t),t)return I(""),t;if(n&&!i&&I(f(n)),n&&i){if(n===g.OutOfRange&&p)return I(p(i)),t;I(f(n,i))}return t},onChange:e=>{let{status:n}=B(e);null==t||t(e,n)},title:$?void 0:E,ariaDescribedBy:_,hideErrorMessage:!0,onFocus:()=>{C(!0)},onBlur:()=>{C(!1)}}))),P().createElement("div",{className:R.inputAdormentContainer},O&&P().createElement("div",{className:R.inputAlertContainer},P().createElement(x.Attention,{"aria-hidden":!0,className:R.inputAdormentIcon})),!O&&P().createElement("div",{"aria-hidden":!0,className:R.inputAdormentIcon},"%")))},q={width:"100%",flex:"1",flexGrow:"1",padding:"8px 24px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},j=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{display:"flex",height:"100%",marginBottom:"10px",boxShadow:`inset 0 -1px 0 0 ${e.palette.border.main}`,"& .backNavButton":{...q,justifyContent:"flex-start"},"& .forwardNavButton":{...q,justifyContent:"flex-end"},"& $currentSlideHeader":{fontSize:e.typography.fontSizeXLarge,margin:0,[e.breakpoints.up("sm")]:{fontWeight:e.typography.fontWeightLight,fontSize:e.typography.fontSizeXXLarge}},"& .adjacentSlideLabel":{fontWeight:e.typography.fontWeightLight,display:"none",[e.breakpoints.up("sm")]:{display:"inline-block"}}},disabledNavButton:{visibility:"hidden"},backIcon:{marginRight:"24px"},forwardIcon:{marginLeft:"24px"},currentSlideHeader:{[e.breakpoints.up("sm")]:{flex:"1"},textAlign:"center",padding:"16px",flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},hiddenLiveRegion:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",border:"0",selectors:{clip:"rect(0,0,0,0)"}},indicator:{height:"8px",width:"8px",borderRadius:"50%",backgroundColor:e.palette.indicatorPrimary.main,display:"inline-block",position:"absolute",top:"calc(50% - 20px)",border:`1px solid ${e.palette.indicatorPrimary.contrastText}`},indicatorForward:{right:"20px"},indicatorBackward:{left:"20px"}}));var z=n(927335),W=n(906277);let K=e=>{var t,n,i;let{slides:r,onSlideChangeMessage:s,analyticsId:o,slideIndex:a=0,onSlideChange:l}=e,c=T.useRef(null);T.useEffect(()=>{var e;null===(e=c.current)||void 0===e||e.focus()},[a]);let d=T.useCallback(()=>{l(-1)},[l]),u=T.useCallback(()=>{l(1)},[l]),p=j(e),m=r[a],h=r[a-1],g=r[a+1],f=!h||!h.name,b=!g||!g.name;return T.createElement("div",{"data-analytics-id":o},T.createElement("div",{className:(0,W.Z)("carousel",p.root)},T.createElement(D.AnalyticsIconButton,{onClick:d,disabled:f,analyticsId:`${o}.backButton`,className:(0,W.Z)("backNavigationButton","backNavButton",{[p.disabledNavButton]:f}),"aria-label":(null==h?void 0:h.name)||"disabled-back-button"},(null==h?void 0:h.indicator)&&T.createElement("span",{className:(0,W.Z)("indicatorBackward",p.indicator,p.indicatorBackward)}),T.createElement(z.BackArrow,{className:p.backIcon}),T.createElement("span",{className:"adjacentSlideLabel"},null!==(t=null==h?void 0:h.name)&&void 0!==t?t:"")),T.createElement("h2",{className:(0,W.Z)("currentSlideHeader",p.currentSlideHeader),ref:c},null!==(n=null==m?void 0:m.name)&&void 0!==n?n:""),T.createElement(D.AnalyticsIconButton,{onClick:u,disabled:b,analyticsId:`${o}.nextButton`,className:(0,W.Z)("forwardNavigationButton","forwardNavButton",{[p.disabledNavButton]:b}),"aria-label":(null==g?void 0:g.name)||"disabled-forward-button"},T.createElement("span",{className:"adjacentSlideLabel"},null!==(i=null==g?void 0:g.name)&&void 0!==i?i:""),T.createElement(z.ForwardArrow,{className:p.forwardIcon}),(null==g?void 0:g.indicator)&&T.createElement("span",{className:(0,W.Z)("indicatorForward",p.indicator,p.indicatorForward)}))),null==m?void 0:m.getContent(),T.createElement(D.AnalyticsOffScreenAnnouncement,{changeTrigger:a,message:s(a),className:`${p.hiddenLiveRegion}`,analyticsId:`${o}.hiddenLiveRegion`}))};var Z=n(415448);n(625891);let Q=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{display:"flex",backgroundColor:e.palette.background.b2,flexDirection:"column",padding:"0 20px 24px",[e.breakpoints.up("sm")]:{padding:"22px 30px 24px 90px",flexDirection:"row",alignItems:"flex-start"}},stats:{display:"flex"},summaryStat:{flex:"1",margin:"20px 24px",display:"inline-flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flex:"auto",margin:"0 25px"}},number:{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeXLarge}},label:{textTransform:"uppercase",fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightSemiBold},postButton:{alignSelf:"center",width:"90%",[e.breakpoints.up("sm")]:{marginInlineStart:"auto",width:"fit-content"}}})),J=e=>{let{participation:t,participationToGrade:n,gradesToPost:i,postButton:r}=e.summary,s=Q(e),{formatNumber:o}=(0,G.h)();return T.createElement("div",{className:s.root},T.createElement("div",{className:s.stats},T.createElement("div",{className:(0,W.Z)("summary-statistic",s.summaryStat)},T.createElement("div",null,T.createElement("span",{className:s.number},t.studentsParticipating)),T.createElement("span",{className:s.label},t.key)),n&&T.createElement("div",{className:(0,W.Z)("summary-statistic",s.summaryStat)},T.createElement("span",{className:s.number},o(n.count)),T.createElement("span",{className:s.label},n.key)),i&&T.createElement("div",{className:(0,W.Z)("summary-statistic",s.summaryStat)},T.createElement("span",{className:s.number},o(i.count)),T.createElement("span",{className:s.label},i.key))),i&&i.count>0&&T.createElement(D.AnalyticsDefaultButton,{analyticsId:r.analyticsId,className:(0,W.Z)("post-all-grades",s.postButton),onClick:r.onClick},r.label))};var Y=n(270850);let X="38px",ee=(0,R.makeStyles)(e=>(0,R.createStyles)({backdrop:{backgroundColor:e.palette.brand.main},source:{position:"relative",mixBlendMode:"screen"},contents:{position:"absolute",top:"0",left:"0",width:"100%",height:X,display:"flex",alignItems:"center",justifyContent:"center",mixBlendMode:"difference","& *":{color:e.palette.common.white}},root:{height:X,borderRadius:"0px",backgroundColor:e.palette.common.white},bar:{border:"none",borderRadius:"0px",backgroundColor:e.palette.common.black}})),et=e=>{let t=ee(),{bar:n,root:i}=t,{children:r,variant:s,...o}=e;return T.createElement("div",{className:t.backdrop},T.createElement("div",{className:t.source},T.createElement(D.AnalyticsLinearProgress,{classes:{bar:n,root:i},variant:"determinate",...o}),T.createElement("div",{className:t.contents},r)))};(s=f||(f={})).Probably="probably",s.Maybe="maybe",s.Empty="";let en=(e="",t=document.createElement("audio"))=>null!=t&&!!t.canPlayType&&t.canPlayType(e)===f.Probably,ei=e=>{let[t,n]=T.useState(!1);return T.useEffect(()=>{n(en(e))},[e]),t},er=e=>{let{analyticsId:t,children:n,mimeType:i,placement:r,title:s}=e;return ei(i)?n:T.createElement(D.AnalyticsTooltip,{analyticsId:`${t}.mediaCompatibilityCheck.tooltip`,title:s,placement:r},T.createElement("div",null,n))},es=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{display:"inherit"}})),eo=e=>{var t;let n=es(),{components:i,onEnd:r}=e,[s,o]=T.useState(0),a=T.useRef(),l=()=>{var e;a.current=setTimeout(()=>{s<i.length-1?o(s+1):r&&r()},null===(e=i[s])||void 0===e?void 0:e.duration)};return T.useEffect(()=>{var e,t,n,r;return(null==i?void 0:i.length)>0&&(null===(t=null===(e=null==i?void 0:i[s-1])||void 0===e?void 0:e.onHide)||void 0===t||t.call(e),null===(r=null===(n=i[s])||void 0===n?void 0:n.onShow)||void 0===r||r.call(n),l()),()=>{a.current&&clearTimeout(a.current)}},[s]),T.createElement("div",{className:n.root,"aria-live":"polite"},null===(t=null==i?void 0:i[s])||void 0===t?void 0:t.component)},ea=(e,t,n=0)=>{let i=[];if(t-n<0)return i;for(let r=t;r>=n;r-=1e3)i.push({component:e(r/1e3),duration:1e3});return i},el=e=>t=>T.createElement(D.AnalyticsTypography,{component:"span"},e(t)),ec=e=>{let{Progress:t=D.AnalyticsLinearProgress,initialDuration:n,initialTimestep:i=100,children:r,ariaLabel:s}=e,[o,a]=T.useState(0);return T.useEffect(()=>{let e=0,t=setInterval(()=>{(e+=i)>=n&&clearInterval(t),a(Math.min(100,Math.floor(e/n*100)))},i);return()=>{clearInterval(t)}},[]),T.createElement(t,{analyticsId:"components-react.timed-progress",ariaLabel:s,value:o},r)};var ed=n(248994);(o=b||(b={}))[o.ReadyToRecordDisabled=0]="ReadyToRecordDisabled",o[o.ReadyToRecord=1]="ReadyToRecord",o[o.PreRecording=2]="PreRecording",o[o.Recording=3]="Recording",o[o.ReadyToPlay=4]="ReadyToPlay";let eu=(e=b.ReadyToRecord)=>{let[t,n]=T.useState(e),[i]=T.useState(()=>M.v4());T.useEffect(()=>{if(!(i.length<=0))return ed.m.getInstance().addTimedDisplay(i,(e,t)=>{i!==e&&n(t?b.ReadyToRecordDisabled:b.ReadyToRecord)}),()=>ed.m.getInstance().removeTimedDisplay(i)},[i]);let r=T.useCallback(()=>{[b.ReadyToRecord,b.Recording].includes(t)||(ed.m.getInstance().stopTimedDisplay(i),n(b.ReadyToRecord))},[t,i]),s=T.useCallback(()=>{t===b.ReadyToRecord&&ed.m.getInstance().startTimedDisplay(i)&&n(b.PreRecording)},[t,i]),o=T.useCallback(()=>{t===b.PreRecording&&n(b.Recording)},[t]),a=T.useCallback(()=>{t===b.Recording&&(ed.m.getInstance().stopTimedDisplay(i),n(b.ReadyToPlay))},[t,i]),l=t===b.Recording;return{state:t,onReadyToRecordShow:r,onPreRecordingShow:s,onRecordingShow:o,onReadyToPlayShow:a,isRecording:l}};var ep=n(410628);let em=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{padding:"10px"},label:{paddingTop:"1px"}})),eh=e=>{let{analyticsId:t,onClick:n,title:i,disabled:r}=e,s=(0,ep.q)(),o=em();return T.createElement(D.AnalyticsIconButton,{className:o.root,analyticsId:`${t}.record.button`,onClick:n,disabled:r},T.createElement(x.AudioOn,null),T.createElement(D.AnalyticsTypography,{className:o.label,component:"span",variant:"inherit"},null!=i?i:s("cr.components.audioRecording.recordButtonLabel")))},eg=(0,R.makeStyles)(e=>(0,R.createStyles)({prerecordingMessage:{backgroundColor:e.palette.brand.main,"& *":{color:e.palette.common.white}},wrapperOuter:{width:"100%",display:"flex",justifyContent:"space-between"},wrapperInner:{display:"flex",alignItems:"center","& > svg":{margin:"0 4px 0 10px"}}}));var ef=n(553493);let eb=(0,R.makeStyles)(e=>(0,R.createStyles)({container:{display:"flex",justifyContent:"space-between",pointerEvents:"auto"},button:{padding:"10px"},icon:{color:e.palette.brand.main}}));(a=v||(v={}))[a.Loading=0]="Loading",a[a.ReadyToPlay=1]="ReadyToPlay",a[a.Playing=2]="Playing";let ev=[v.Loading],ey=(e=v.Loading)=>{let[t,n]=T.useState(e),i=T.useCallback(()=>{t!==v.Loading&&n(v.Loading)},[t]),r=T.useCallback(()=>{t!==v.ReadyToPlay&&n(v.ReadyToPlay)},[t]),s=T.useCallback(()=>{t!==v.Playing&&n(v.Playing)},[t]);return{state:t,onLoadingShow:i,onReadyToPlayShow:r,onPlayingShow:s}},eS=e=>{let{analyticsId:t,ariaLabel:n,children:i,className:r,label:s,src:o,mimeType:a=ef.e$}=e,l=eb(e),c=(0,ep.q)(),{state:d,onReadyToPlayShow:u,onPlayingShow:p}=ey(),m=ev.includes(d),h=T.useRef(null),g=ei(a),[f,b]=T.useState(!1),v=T.useCallback(e=>{var t;e.preventDefault(),e.stopPropagation(),p(),null===(t=h.current)||void 0===t||t.play()},[p,h]),y=T.useCallback(e=>{console.error(e.type,": Loading audio."),g||b(!0)},[g]);return T.createElement("div",{className:(0,W.Z)(l.container,"bb-audio-player",r)},T.createElement("audio",{ref:h,src:o,onLoadedMetadata:u,onEnded:u,onError:y,preload:"metadata",tabIndex:-1}),T.createElement(er,{analyticsId:t,title:c("cr.components.audioRecording.playbackUnsupported"),placement:"top",mimeType:a},T.createElement(D.AnalyticsIconButton,{analyticsId:`${t}.audio.play.button`,"aria-label":s?void 0:null!=n?n:c("cr.components.audioPlayer.playLabel"),className:l.button,disabled:m||f,onClick:v},T.createElement(x.Volume,{className:l.icon}),!!s&&T.createElement(D.AnalyticsTypography,{component:"span",variant:"inherit"},s))),i)},eC=(0,R.makeStyles)(e=>(0,R.createStyles)({icon:{color:e.palette.brand.main}})),eE=e=>{let t=eC(),{analyticsId:n,...i}=e;return T.createElement(D.AnalyticsIconButton,{analyticsId:`${n}.clearAudio.button`,...i},T.createElement(x.Clear,{className:t.icon}))};var eI=n(579633);let ew=e=>{var t,n,i;let r=eg(),{translate:s,formatComposedDuration:o}=(0,G.h)(),{onAudioDeleted:a,playLabel:l,progressLabel:c,recordLabel:d,recordingSession:u,src:p}=e,m=null===(t=u.recorderOptions)||void 0===t?void 0:t.mimeType,h=ei(m),[g,f]=T.useState(!1),[v,y]=T.useState(!1),S=`${e.analyticsId}.audio.recorder`,C=null!==(i=null===(n=u.recordingOptions)||void 0===n?void 0:n.maxDuration)&&void 0!==i?i:6e5,{state:E,isRecording:I,onReadyToRecordShow:w,onPreRecordingShow:A,onRecordingShow:k,onReadyToPlayShow:P}=eu(p?b.ReadyToPlay:b.ReadyToRecord),R=T.useCallback(()=>{f(!1)},[]),L=T.useCallback(async()=>{y(!1);try{await u.onEnableRecording(),A()}catch(e){f(!0)}},[u,f,A]),N=T.useCallback(async()=>{if(I){await u.onRecordStop(),P();return}w()},[u,I,P]),$=T.useCallback(async()=>{w(),a(),y(!0)},[a,w]),O=()=>T.createElement(D.AnalyticsIconButton,{className:"stop-audio-recording","aria-label":s("cr.components.audioRecording.stopInProgressRecording"),analyticsId:`${S}.stop.button`,onClick:N},T.createElement(x.Stop,null)),_=e=>T.createElement("div",{className:r.wrapperInner},T.createElement(x.AudioOn,null),T.createElement(D.AnalyticsTypography,{component:"span"},e));switch(E){case b.PreRecording:return T.createElement("div",{className:r.prerecordingMessage},T.createElement("div",{className:r.wrapperOuter},T.createElement(eo,{components:[(()=>{let e=s("cr.components.audioRecording.introMessage",{seconds:C/1e3});return{component:_(e),duration:(0,Y.Lt)(e)}})(),...ea(e=>_(s("cr.components.audioRecording.countdown",{seconds:e})),3e3,1e3)],onEnd:()=>{k(),u.onRecordStart()}}),O()));case b.Recording:return T.createElement(ec,{ariaLabel:null!=c?c:s("cr.components.audioRecording.progressBarAriaLabel"),Progress:et,initialDuration:C},T.createElement("div",{className:r.wrapperOuter},T.createElement("div",{className:r.wrapperInner},T.createElement(x.AudioOn,null),T.createElement(D.AnalyticsTypography,{component:"span","aria-live":"polite"},s("cr.components.audioRecording.recording"))),T.createElement("div",{className:r.wrapperInner},T.createElement(eo,{components:ea(el(e=>s("cr.components.audioRecording.recordingTimer",{timer:o(e,eI.ILocaleComposedDurationFormat.MinutesSeconds)})),C),onEnd:P}),O())));case b.ReadyToPlay:return T.createElement(eS,{analyticsId:S,label:null!=l?l:s("cr.components.audioPlayer.playLabel"),src:p},T.createElement(eE,{analyticsId:S,"aria-label":s("cr.components.audioRecording.clearAudioAriaLabel"),onClick:$}));case b.ReadyToRecord:case b.ReadyToRecordDisabled:default:return T.createElement(T.Fragment,null,T.createElement(er,{analyticsId:S,title:s("cr.components.audioRecording.recordingUnsupported"),placement:"left",mimeType:m},T.createElement(D.AnalyticsClickAwayListener,{analyticsId:`${S}.record.button.clickAwayListener`,onClickAway:R},T.createElement("div",null,T.createElement(D.AnalyticsTooltip,{analyticsId:`${S}.record.button.blocked.tooltip`,title:s("cr.components.audioRecording.recordingBlocked"),placement:"left",onClose:R,open:g,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0},T.createElement("div",null,T.createElement(eh,{title:d,analyticsId:S,onClick:L,disabled:E===b.ReadyToRecordDisabled||!h})))))),v&&T.createElement(D.AnalyticsOffScreenAnnouncement,{analyticsId:S,type:"polite",message:s("cr.components.audioRecording.recordingDeleted")}))}};var eA=n(730323),ek=n(197086),eT=n(851493),eP=n(589375);let eD=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{margin:"0",padding:"0",'& div[x-placement="top"]':{borderTop:`1px solid ${e.palette.background.b5}`,borderBottom:"none"},'& div[x-placement="bottom"]':{borderTop:"none",borderBottom:`1px solid ${e.palette.background.b5}`}},pageDropdownButton:{background:e.palette.common.white,borderRadius:"2px",boxShadow:"none",border:`1px solid ${e.palette.border.main}`,margin:"0 8px",padding:"7px 3px",fontWeight:e.typography.fontWeightRegular,minWidth:"10px","&::after":{content:'""',borderTopColor:e.palette.background.b9,width:"0",display:"inline-block",verticalAlign:"middle",height:"12px",borderWidth:"6px 4px 0 4px",border:"7px solid transparent",margin:"0 10px",position:"relative",top:"2px"},"&:hover":{background:"none",border:`1px solid ${e.palette.border.dark}`},"& span":{padding:"0 0 0 10px","&::after":{content:'""',borderRight:`1px solid ${e.palette.background.b5}`,width:"10px",height:"25px"}}},pageDropdownPopper:{zIndex:10,borderLeft:`1px solid ${e.palette.background.b5}`,borderRight:`1px solid ${e.palette.background.b5}`},pageDropdownMenuList:{maxHeight:"216px",width:"62px",overflow:"scroll"}})),ex={flip:{enabled:!0},preventOverflow:{enabled:!0,boundariesElement:"#page-selector-menu"},hide:{enabled:!0}},eR=e=>{let[t,n]=P().useState(!1),i=P().useRef(null),r=P().useRef(null),{items:s,value:o,onChange:a,getOnChangeAnnouncement:l,buttonAriaLabel:c,elementSelectorToFocus:d,analyticsId:u,className:p,disabled:m}=e,h=(0,ep.q)(),g=eD(e),f=d?document.querySelector(d):null,b=(0,W.Z)(g.pageDropdownButton,p&&`${p}-button`),v=(0,W.Z)(g.pageDropdownMenuList,p&&`${p}-dropdown-menu-list`),y=(0,T.useCallback)(()=>{n(!1)},[]),S=(0,T.useCallback)(()=>{n(!t)},[t]);function C(e){var t;a(e),y(),f?(0,Y.bx)(f):null===(t=i.current)||void 0===t||t.focus({preventScroll:!1})}let E=(e,t)=>{var n;"Escape"===e.key&&(e.stopPropagation(),y(),null===(n=i.current)||void 0===n||n.focus({preventScroll:!0})),("Enter"===e.key||" "===e.key)&&(e.stopPropagation(),C(t))};return P().useEffect(()=>{let e;return t&&(e=setTimeout(()=>{var e;null===(e=r.current)||void 0===e||e.focus({preventScroll:!0})},125)),function(){clearTimeout(e)}},[t]),P().createElement("div",{className:g.root},P().createElement(D.AnalyticsDefaultButton,{ref:i,className:b,"aria-controls":t?"page-selector-menu":void 0,"aria-haspopup":"menu","aria-expanded":t,onClick:S,disabled:m,"aria-label":c||h("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:o.label,lastPage:s.length}),analyticsId:`${u}.button`},o.label),P().createElement(D.AnalyticsPopper,{anchorEl:i.current,open:t,transition:!0,disablePortal:!0,placement:"bottom",className:g.pageDropdownPopper,id:"page-selector-menu",role:t?void 0:"menu",modifiers:ex,analyticsId:`${u}.popper`},P().createElement(D.AnalyticsPaper,{analyticsId:`${u}.paper`},P().createElement(D.AnalyticsClickAwayListener,{onClickAway:y,analyticsId:`${u}.clickAwayListener`},P().createElement(D.AnalyticsMenuList,{className:v,disableListWrap:!0,analyticsId:`${u}.menuList`},s.map((e,t)=>P().createElement(D.AnalyticsMenuItem,{button:!0,key:e.value,selected:e.value===o.value,"aria-selected":e.value===o.value,onClick:()=>C(e),value:e.value,"data-label":e.label,ref:e=>r.current=0===t?e:r.current,onKeyDown:t=>E(t,e),analyticsId:`${u}.menuItem`},e.label)))))),P().createElement(D.AnalyticsOffScreenAnnouncement,{analyticsId:`${u}.offScreenAnnouncement`,type:"polite",message:l(o.label,s.length),changeTrigger:o.label}))},eL=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{display:"flex",alignItems:"center",justifyContent:"center"},paginationLabel:{margin:"0 8px",display:"flex",alignItems:"center",fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault}})),eN=e=>{let t=[];for(let n=0;n<e;n+=1)t.push(n);return t},e$=e=>{let{numberOfPages:t,onPageChange:n,page:i,analyticsId:r,elementSelectorToFocus:s,className:o,compact:a,disabled:l}=e,{translate:c,formatNumber:d}=(0,G.h)(),u=eN(t),p=(0,Y.fw)(u,d,1),m=eL(e),h=T.createElement(eR,{onChange:e=>n(Number(e.value)),getOnChangeAnnouncement:(e,t)=>c("cr.components.pagination.pagination.dropdownButtonAriaLabel",{currentPage:e,lastPage:t}),disabled:l,items:p,value:{value:String(i),label:d(i+1)},analyticsId:`${r}.components.common.pagination.pageSelectDropdown`,className:o,elementSelectorToFocus:s}),g=T.createElement(D.AnalyticsIconButton,{disabled:0===i||l,onClick:()=>n(i-1),className:"js-pagination-page-down-button",analyticsId:`${r}.components.common.pagination.pageDownButton`,"aria-label":c("cr.components.pagination.pagination.prevPageButton")},T.createElement(eT.s,null));return T.createElement("div",{className:(0,W.Z)(m.root,"js-pagination-container",o)},a&&g,T.createElement("div",{className:m.paginationLabel,id:"components-common-pagination-page"},c("cr.components.pagination.pagination.pageCount",{paginationDropdownComponent:h,pageCount:u.length})),!a&&g,T.createElement(D.AnalyticsIconButton,{disabled:i===u.length-1||l,onClick:()=>n(i+1),className:"js-pagination-page-up-button",analyticsId:`${r}.components.common.pagination.pageUpButton`,"aria-label":c("cr.components.pagination.pagination.nextPageButton")},T.createElement(eP._,null)))},eO=e=>{let{totalItems:t,rangeStart:n,rangeEnd:i,className:r}=e,s=(0,ep.q)();return T.createElement("div",{className:(0,W.Z)(r)},s("cr.components.pagination.pageInformation.information",{totalItems:t,rangeStart:n,rangeEnd:i}))},eG=(0,R.makeStyles)(e=>(0,R.createStyles)({pageSizeContainer:{display:"flex",alignItems:"center"},inputLabel:{display:"inline-block",margin:"0",fontWeight:e.typography.fontWeightRegular}})),e_=e=>{let{pageSizeOptions:t,initialPageSize:n,analyticsId:i,className:r,onPageSizeChange:s,disabled:o}=e,{translate:a,formatNumber:l}=(0,G.h)(),c=(0,Y.fw)(t,l),[d,u]=T.useState(()=>{let e=c.map(e=>e.value).indexOf(n);return c[Math.max(0,e)]}),p=eG();return T.createElement("div",{className:"page-size-component"},T.createElement("div",{className:(0,W.Z)(p.pageSizeContainer,r)},T.createElement(eR,{analyticsId:`${i}.components.pagination.pageSizeDropdown`,onChange:e=>{u(e),s(Number(e.value))},getOnChangeAnnouncement:(e,t)=>a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:e}),disabled:o,value:d,items:c,className:r,buttonAriaLabel:a("cr.components.pagination.pageSize.itemsPerPageAriaLabel.plural",{currentStudents:d.value})}),T.createElement(D.AnalyticsInputLabel,{className:p.inputLabel,analyticsId:`${i}.components.pagination.pageSizeDropdown.label`},a("cr.components.pagination.pageSize.itemsPerPage"))))},eM=(0,R.makeStyles)(e=>(0,R.createStyles)({scrollUpContainer:{margin:"auto",marginRight:0,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,"& a":{color:"initial",textDecoration:"none",scrollBehavior:"smooth"}},[e.breakpoints.down("sm")]:{scrollUpContainer:{marginRight:"auto",lineHeight:"60px"}}})),eB=e=>{let{elementIdToBeScrolled:t,analyticsId:n}=e,i=(0,ep.q)(),r=eM(e),s=T.useCallback(e=>(function(e,t){t.preventDefault();let n=document.querySelector(`#${e}`);(0,Y.bx)(n)})(t,e),[t]);return T.createElement("div",{className:r.scrollUpContainer},T.createElement(D.AnalyticsLink,{href:"#",onClick:s,"aria-label":i("cr.components.scrollToElementButton.scrollAriaLabel"),analyticsId:`${n}.button`},T.createElement(x.UpArrow,{"aria-hidden":"true",role:"presentation"})," ",i("cr.components.scrollToElementButton.scrollTopList")))};var eF=n(142895);let eU=(0,R.makeStyles)(()=>(0,R.createStyles)({confirmationCalloutDialog:{"& .ms-Dialog-title":{padding:"0"},"& .ms-Dialog-footer":{paddingTop:"20px"}}}));var eV=n(844156);let eH=({analyticsId:e,calloutProps:t,target:n,onDismiss:i,onSuccess:r,textContent:s,isVisible:o})=>{let a=eU(),l=`${e}.confirmationCalloutDialog`,c=!1;return T.useEffect(()=>{o&&setTimeout(()=>{c=!0},1e3)},[o]),T.createElement(T.Fragment,null,o&&T.createElement(eF.Dialog,{onDismiss:e=>{((null==e?void 0:e.type)!=="scroll"||c)&&(null==i||i())},showAsCallout:!0,target:n,calloutProps:{ariaLabel:(null==t?void 0:t.ariaLabelledBy)?void 0:s.title,setInitialFocus:!0,preventDismissOnResize:!0,...t},dialogContentProps:{type:eF.DialogType.actionConfirmation,title:s.title,subText:s.body,showCloseButton:!1,className:a.confirmationCalloutDialog},analyticsId:l},T.createElement(eF.DialogFooter,null,T.createElement(eV.AnalyticsDefaultButton,{onClick:i,analyticsId:`${l}.secondaryButton`},s.secondaryButtonText),T.createElement(eV.AnalyticsPrimaryButton,{onClick:r,analyticsId:`${l}.primaryButton`}," ",s.primaryButtonText," "))))};var eq=n(797580);let ej=(0,R.makeStyles)(e=>(0,R.createStyles)({skipLink:{...eq.FR,fontSize:e.typography.fontSizeSmall,"&:active, &:focus, &:hover":{left:"0px",top:"0px",height:"auto",margin:"0px",clip:"auto",textAlign:"center",backgroundColor:e.palette.brand.main,color:e.palette.brand.contrastText,display:"block",width:"100%",zIndex:"9999",outline:"medium none"}}}));var ez=n(998426);let eW=(e,t,n=!1)=>{let[i,r]=T.useState(!1),s=T.useCallback(e=>{let s=!n||!i,o="Tab"===e.code&&!e.shiftKey;if(s&&o&&t){let n=document.querySelector(t);n&&(n.focus(),e.preventDefault(),r(!0))}},[t,i,n]);T.useEffect(()=>{var t;return null===(t=e.current)||void 0===t||t.addEventListener("keydown",s),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("keydown",s)}},[e.current,s])},eK=e=>{let{customClassNames:t,focusNextSelector:n,targetSelector:i,text:r}=e,s=(0,ep.q)(),o=ej((0,ez.Fg)()),a=(0,W.Z)(...t||[],o.skipLink),l=T.useRef(null),c=T.useCallback(()=>{var e,t;let n=l.current,r=null!==(t=null!==(e=null==n?void 0:n.closest(".bb-offcanvas-panel"))&&void 0!==e?e:null==n?void 0:n.closest("#site-wrap"))&&void 0!==t?t:document.body,s=null==r?void 0:r.querySelector(i);null==s||s.focus(),s&&!s.contains(document.activeElement)&&null==s.getAttribute("tabindex")&&(s.setAttribute("tabindex","-1"),s.focus())},[i]);return eW(l,n),T.createElement(D.AnalyticsLink,{ref:l,href:"#",onClick:c,className:a,analyticsId:"components.accessibility.skip-link"},r||s("cr.components.accessibility.skipLink.message"))};var eZ=n(609582),eQ=n(692475),eJ=n(158550),eY=n(664071),eX=n(165856),e0=n(958299);class e1 extends T.PureComponent{constructor(e){super(e),this.timePickerRef=null,this.timeInputRef=null,this.hourInputRef=null,this.getFormattedHour=e=>{let{is24HourMode:t}=this.state;return t?e:e%12==0?12:e%12},this.onToggleSpinner=()=>{this.setState(e=>({isDisplaySpinner:!e.isDisplaySpinner}))},this.getValueWithCurrentTime=()=>{let{value:e}=this.props;if(null==e)return new Date;let t=new Date;return e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e},this.onFocusTime=()=>{if(""!==this.state.timeStr)return;let{localize:e,onChangeValue:t}=this.props,n=this.getValueWithCurrentTime(),i=e.formatTime(n,eI.ILocaleTimeFormat.Short);this.updateTimePickerState(n,i),t(n)},this.onChangeTimeInput=e=>{let t=e.target.value;if(this.setState({timeStr:t}),""===t)return;e.persist();let{onValidateCallback:n,localize:i}=this.props;this.timeoutPromiseWrapper(i.parseTime,[t,eI.ILocaleTimeFormat.Short],i).then(e=>{if(e){n(!0);let t=new Date(e);this.updateTimePickerState(t)}else n(!1)})},this.onHandlerBlur=()=>{var e,t;let{is24HourMode:n}=this.state,{hour:i,minute:r,amPm:s}=this.state,{localize:o,onChangeValue:a,onValidateCallback:l}=this.props,{value:c}=this.props;if(!c)return;if(""===this.state.timeStr){let e=(c=this.getValueWithCurrentTime()).getHours();if(!n&&this.meridianValues){let t=e<=11?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:t}),s=t}i=e.toString(),r=c.getMinutes().toString()}let d=new Date(c),u=Number(i),p=!1;if(!u&&0!==u){let e=o.parseNumber(i);p=!e&&0!==e,u=this.getFormattedHour(e||c.getHours())}let m=Number(r),h=!1;if(!m&&0!==m){let e=o.parseNumber(r);h=!e&&0!==e,m=e||c.getMinutes()}let g=0,f=u;if(!n&&this.meridianValues&&(f=u%12,-1===(g=o.getMeridianOffset(s)))){let e=11>=c.getHours()?this.meridianValues.am:this.meridianValues.pm;this.setState({amPm:e}),g=o.getMeridianOffset(e)}f<12&&12===g&&(f+=g),d.setHours(f),d.setMinutes(m);let b=this.timeoutPromiseWrapper(o.formatTime,[d,eI.ILocaleTimeFormat.Short],o).then(e=>{this.setState(t=>({timeStr:""!==t.timeStr?e:"",hour:p?o.formatNumber(u):t.hour,minute:h?o.formatNumber(m,{minimumIntegerDigits:2}):t.minute})),l(!0),a(d)});null===(t=(e=this.props).onDateTimeChanging)||void 0===t||t.call(e,b),setTimeout(()=>{var e;(null===(e=this.timePickerRef)||void 0===e?void 0:e.contains(document.activeElement))||this.closeSpinner()})},this.onTimeInputKeyPress=e=>{e.which===eY.m.Enter&&this.closeSpinner()},this.timeoutPromiseWrapper=(e,t,n)=>new Promise(i=>{e.apply(this,t),setTimeout(()=>{i(e.apply(n,t))})}),this.errorMessage=()=>{let{isValueValid:e,errorEmptyMessage:t,errorFormatMessage:n}=this.props;if(e||!n&&!t)return null;let i=n;if(!this.state.timeStr){if(!t)return null;i=t}return T.createElement("span",{className:"error-message"},T.createElement(x.Attention,null),i)},this.updateTimeInput=e=>{let{hour:t,minute:n,amPm:i}=this.state;this.setState({hour:(null==e?void 0:e.hour)||t,minute:(null==e?void 0:e.minute)||n,amPm:(null==e?void 0:e.amPm)||i})},this.closeSpinner=()=>{this.setState({isDisplaySpinner:!1})},this.state={timeStr:"",hour:"",minute:"",amPm:"",is24HourMode:!1,isDisplaySpinner:!1,tzShort:""}}componentDidMount(){let{localize:e,value:t,onValidateCallback:n}=this.props,i=new Date;Promise.all([this.timeoutPromiseWrapper(e.formatTimezone,[i,eI.ILocaleTimezoneFormat.Short],e),this.timeoutPromiseWrapper(e.getMeridianValues,[],e)]).then(i=>{let r=i[1];this.meridianValues=r,this.setState({is24HourMode:r.use24Time,tzShort:i[0]}),t&&!this.state.timeStr&&this.timeoutPromiseWrapper(e.formatTime,[t,eI.ILocaleTimeFormat.Short],e).then(e=>{this.updateTimePickerState(t,e),n(!0)})})}componentDidUpdate(e,t){var n;let{localize:i,value:r,onValidateCallback:s}=this.props,o=(null==r?void 0:r.getTime())!==(null===(n=e.value)||void 0===n?void 0:n.getTime());if(r&&o){let e;let t=this.timeoutPromiseWrapper(i.formatTime,[r,eI.ILocaleTimeFormat.Short],i);this.meridianValues||(e=this.timeoutPromiseWrapper(i.getMeridianValues,[],i)),Promise.all([t,e]).then(e=>{let t=e[1];t&&(this.meridianValues=t,this.setState({is24HourMode:t.use24Time})),this.updateTimePickerState(r,e[0]),s(!0)})}r||r===e.value||(this.setState({timeStr:"",hour:"",minute:"",amPm:""}),s(!0));let{isDisplaySpinner:a}=this.state;t.isDisplaySpinner!==a&&a&&this.hourInputRef&&this.hourInputRef.focus()}updateTimePickerState(e,t){let{is24HourMode:n}=this.state,{localize:i}=this.props,r=Number(e.getMinutes()),s=Number(e.getHours()),o="";!n&&this.meridianValues&&(o=s<=11?this.meridianValues.am:this.meridianValues.pm,s=this.getFormattedHour(s)),this.setState(e=>({hour:i.formatNumber(s),minute:i.formatNumber(r,{minimumIntegerDigits:2}),amPm:null==o?void 0:o.toLocaleUpperCase(),timeStr:t||e.timeStr}))}render(){let{timeStr:e,hour:t,minute:n,isDisplaySpinner:i,tzShort:r,amPm:s,is24HourMode:o}=this.state,{disabled:a,localize:l,analyticsId:c,analyticsEventAugmentor:d,placeholder:u,ariaLabel:p,value:m,readonly:h,inputStyles:g}=this.props,f=`spinner-control ${s?"":"no-am-pm"}`,b=d(eJ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".input.text"),v=d(eJ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".hour.input.text"),y=d(eJ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".minute.input.text"),S=d(eJ.AnalyticsEventTypes.CLICK_EVENT,()=>{},c+".amPm.input.text");return T.createElement("div",{className:"time-picker",ref:e=>this.timePickerRef=e,onBlur:this.onHandlerBlur,"data-analytics-id":c},T.createElement("div",{className:"calendar-input-container"},T.createElement("input",{type:"text",className:"time-input",value:e,onChange:this.onChangeTimeInput,ref:e=>this.timeInputRef=e,disabled:a,readOnly:h,style:g,onFocus:this.onFocusTime,onKeyPress:this.onTimeInputKeyPress,onClick:b,"data-analytics-id":`${c}.input.text`,placeholder:u||void 0,"aria-label":p||l.translate("cr.components.timePicker.time")}),T.createElement(e0.AnalyticsIconButton,{"aria-label":l.translate("cr.components.timePicker.toggleTimePicker"),className:"btn-date open-datepicker toggle-btn",disabled:a||h,onClick:this.onToggleSpinner,onFocus:this.onFocusTime,"aria-expanded":this.state.isDisplaySpinner,title:l.translate("cr.components.timePicker.toggleTimePicker"),analyticsId:c+".open.button"},T.createElement(x.Away,null)),this.errorMessage()),i&&T.createElement(eZ.Callout,{className:"js-time-picker-callout",target:this.timeInputRef,doNotLayer:!0,directionalHint:5},T.createElement("div",{className:f,"aria-hidden":!i,role:"region","aria-label":l.translate("cr.components.timePicker.timePicker"),tabIndex:-1},T.createElement("div",{className:"spinners-hour-and-minute"},T.createElement(eX.v,{className:"spinner-hour",type:eY.d.Hour,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:t,onInputClick:v,inputRef:e=>this.hourInputRef=e,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseHour"),input:l.translate("cr.components.timePicker.hour"),downButton:l.translate("cr.components.timePicker.decreaseHour")},analyticsId:{upButton:`${c}.increaseHour.button`,input:`${c}.hour.input.text`,downButton:`${c}.decreaseHour.button`},date:m}),T.createElement("div",{className:"hour-min-separator"},l.translate("cr.components.timePicker.hourMinSeparator")),T.createElement(eX.v,{className:"spinner-min",type:eY.d.Minute,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:n,onInputClick:y,ariaLabel:{upButton:l.translate("cr.components.timePicker.increaseMinute"),input:l.translate("cr.components.timePicker.minute"),downButton:l.translate("cr.components.timePicker.decreaseMinute")},analyticsId:{upButton:`${c}.increaseMinute.button`,input:`${c}.minute.input.text`,downButton:`${c}.decreaseMinute.button`},date:m})),T.createElement(eX.v,{className:"spinner-ampm",type:eY.d.AmPm,is24hr:o,onChangeValue:this.props.onChangeValue,closeSpinner:this.closeSpinner,updateTimeInput:this.updateTimeInput,value:s,onInputClick:S,ariaLabel:{upButton:l.translate("cr.components.timePicker.changeToAmPm"),input:l.translate("cr.components.timePicker.amPm"),downButton:l.translate("cr.components.timePicker.changeToAmPm")},analyticsId:{upButton:`${c}.changeAmPm.button`,input:`${c}.amPm.input.text`,downButton:`${c}.changeAmPm.button`},date:m})),T.createElement("hr",null),T.createElement("div",{className:"tz-offset"},T.createElement("span",null,r))))}}let e2=(0,eQ.h)((0,eJ.withAnalytics)(e1)),e4=e=>T.createElement(D.AnalyticsSvgIcon,{analyticsId:"components-react.icons.accommodationColor",...e,fontSize:"small",x:"0px",y:"0px",viewBox:"0 0 10 10",enableBackground:"new 0 0 10 10"},T.createElement("polygon",{fill:"#C36FD3",stroke:"#822798",strokeLinejoin:"round",strokeMiterlimit:"10",points:"8.5,9.5 5,6.5 1.5,9.5 1.5,0.5  8.5,0.5 "}));n(64130);var e6=n(936961),e5=n(454976);let e3=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{width:"100%"},keywordPickerComponent:{margin:0,width:"100%","& .ms-KeywordPicker-list":{margin:"10px 0 0 0",border:"none",display:"flex",flexDirection:"row","& li":{width:"auto",display:"block",minWidth:"50px","& .ms-TagItem":{backgroundColor:e.palette.background.b5,"& span":{display:"flex",fontSize:"14px",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:e.typography.fontWeightRegular,fontFamily:e.typography.fontFamily},"& button":{padding:0,width:"auto",color:e.palette.common.black,paddingRight:"6px"}}}},"& .ms-KeywordPicker-label":{padding:0,color:e.palette.text.hint,fontWeight:e.typography.fontWeightRegular,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily,"&":{flip:!1,marginRight:"14px"}},'& label[class*="floatAbove"]':{color:"initial",fontWeight:e.typography.fontWeightSemiBold,padding:"0 3px"},"& .ms-KeywordPicker-input":{borderRadius:"2px",border:`1px solid ${e.palette.border.dark}`,fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily}},keywordPickerClearFiltersWrapper:{width:"100%",display:"flex",justifyContent:"flex-end"},keywordPickerClearFilters:{padding:0,border:"none",cursor:"pointer",color:e.palette.link.selected,backgroundColor:"transparent","&:hover":{textDecoration:"underline",backgroundColor:"transparent"}}})),e8=e=>{let t=T.useRef(null),{onFilterChanged:n,className:i,analyticsId:r}=e,s=(0,ep.q)(),[o,a]=T.useState([]),l=T.useCallback(e=>{let t=null!=e?e:[];a(t),n(t)},[n]),c=T.useCallback(()=>{a([]),n([])},[n]),d=T.useCallback(e=>{var n;"Enter"===e.key&&(e.stopPropagation(),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0}),c())},[c]),u=e3(e),p=o.length>0?s("cr.components.searchBar.cleanFiltersButton"):"",m=(0,W.Z)(u.root,i&&`${i}-keyword-picker-wrapper`),h=(0,W.Z)(u.keywordPickerComponent,i&&`${i}-keyword-picker-component`),g=(0,W.Z)(u.keywordPickerClearFiltersWrapper,i&&`${i}-keyword-picker-clear-filters-wrapper`),f=(0,W.Z)(u.keywordPickerClearFilters,i&&`${i}-keyword-picker-clear-filters`);return T.createElement("div",{className:m},T.createElement(e6.KeywordPicker,{ref:t,selectedItems:o,className:h,removeButtonAriaLabel:e=>s("cr.components.searchBar.removeButtonAriaLabel",{name:null==e?void 0:e.name}),inputLabel:s("cr.components.searchBar.label"),onRenderItem:e=>T.createElement(e5.TagItem,{...e},e.item.name),onChange:e=>l(e),getItemAddedStatusMessage:e=>s("cr.components.searchBar.addedToList",{text:e}),analyticsId:r}),o.length>0&&T.createElement("div",{className:g},T.createElement(D.AnalyticsDefaultButton,{className:f,onClick:c,onKeyDown:d,"aria-label":p,analyticsId:`${r}.clearFilters.button`},p)))},e9=(0,R.makeStyles)(e=>(0,R.createStyles)({noResultsFound:{display:"flex",alignItems:"center",height:"32px"},searchBox:{'& input[type="text"],input[type="text"]:focus':{backgroundColor:"transparent",border:"none",boxShadow:"none",margin:"0"}},searchboxWrapper:{"& div[role=presentation]":{zIndex:1000100}}})),e7=e=>{let{className:t,listboxProps:n,onOptionSelected:i,options:r,renderOption:s}=e,o=e9(),a=(0,ep.q)(),l=(0,T.useRef)(null);return P().createElement("div",{className:o.searchboxWrapper,ref:l},P().createElement(D.AnalyticsISearchBox,{...e,variant:"predictive-search",className:(0,W.Z)(o.searchBox,t),floatingLabel:!1,hideIconOnFocus:!1,listboxProps:{...n,strings:{loadingAriaLabel:a("global.loading")},closeOnSelect:!0,keepSelectedOption:!1,onOptionSelected:e=>{null==i||i(e)},openOnFocus:!0,options:r,renderEmptyState:()=>P().createElement(D.AnalyticsTypography,{className:o.noResultsFound,component:"div",variant:"h4"},a("typeahead.noResultsFound")),renderOption:e=>s(e)}}))},te=e=>T.createElement(D.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutLeft",...e,width:"56",height:"28",viewBox:"0 0 56 28"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{stroke:"currentcolor"},T.createElement("path",{d:"M26.498 27.5H1.502A1.002 1.002 0 0 1 .5 26.498V1.502C.5.949.948.5 1.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),T.createElement("path",{d:"M20.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M.5 24.5l8-8 8 8 6-5 5 4M34.5 4.5h21M34.5 9.5h21M34.5 14.5h21M34.5 19.5h21M34.5 24.5h21"})))),tt=e=>T.createElement(D.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helfulLinkLayoutRight",...e,width:"56",height:"28",viewBox:"0 0 56 28"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{stroke:"currentcolor"},T.createElement("path",{d:"M54.498 27.5H29.502a1.002 1.002 0 0 1-1.002-1.002V1.502C28.5.949 28.948.5 29.502.5h24.996c.554 0 1.002.449 1.002 1.002v24.996c0 .553-.448 1.002-1.002 1.002z"}),T.createElement("path",{d:"M48.5 14.5a2 2 0 1 1-4.001-.001 2 2 0 0 1 4.001.001z"}),T.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M28.5 24.5l8-8 8 8 6-5 5 4M21.5 4.5H.5M21.5 9.5H.5M21.5 14.5H.5M21.5 19.5H.5M21.5 24.5H.5"})))),tn=e=>T.createElement(D.AnalyticsSvgIcon,{analyticsId:"components-react.icons.helpfulLinksLayoutText",...e,width:"56",height:"28",viewBox:"0 0 56 28"},T.createElement("g",{fill:"none",fillRule:"evenodd"},T.createElement("g",{stroke:"currentcolor",strokeLinecap:"round",strokeLinejoin:"round"},T.createElement("path",{d:"M24.5 4.5h-21M24.5 9.5h-21M24.5 14.5h-21M24.5 19.5h-21M24.5 24.5h-21M52.5 4.5h-21M52.5 9.5h-21M52.5 14.5h-21M52.5 19.5h-21M52.5 24.5h-21"}))));var ti=n(381306);let tr={email:!1,phone:!1,sanitizeHtml:!0,truncate:150},ts=({plainText:e,analyticsIdTagPrefix:t})=>{let n=e=>{let n=e.buildTag();return n.setAttr("analytics-id",`${t}.linkified-text.link`),n},i=T.useMemo(()=>ti.Df.link(e,{...tr,replaceFn:n}),[e]);return T.createElement("span",{dangerouslySetInnerHTML:{__html:i}})};var to=n(539976);let ta=e=>{let{menuOptions:t,optionClicked:n,analyticsIdPrefix:i,ariaLabel:r,isRtl:s,id:o,className:a}=e,[l,c]=T.useState(!1),d=T.useRef(null),u=e=>{n(e),c(!1)};return T.createElement(T.Fragment,null,t.length>0&&T.createElement("div",{id:o,className:a},T.createElement(D.AnalyticsIconButton,{analyticsId:`${i}.button`,key:`${i}.button`,"aria-label":r,ref:d,onClick:()=>c(e=>!e)},T.createElement(to.Menu,null)),T.createElement(D.AnalyticsJssThemeProvider,{theme:"light",cssReset:"none",isRtl:s},T.createElement(D.AnalyticsMenu,{analyticsId:`${i}.menu`,anchorEl:d.current,open:l,onClose:()=>c(!1)},t.map(e=>T.createElement(D.AnalyticsMenuItem,{analyticsId:e.analyticsId,key:e.analyticsId,"aria-label":e.label,onClick:()=>u(e)},e.label))))))};var tl=n(303109);let tc=(0,R.makeStyles)(e=>(0,R.createStyles)({settingsButton:{[e.breakpoints.up("md")]:{minHeight:"unset",color:e.palette.text.primary},textDecoration:"none",margin:"auto"},settingsLink:{marginLeft:"10px"},iconLink:{verticalAlign:"sub"}})),td=e=>{let{labelKey:t,analyticsId:n,mediumBreakpointFocus:i,smallBreakpointFocus:r,action:s}=e,o=tc(),a=(0,ez.Fg)(),l=(0,ep.q)(),c=(0,ez.ac)(a.breakpoints.up("md")),d=T.useRef(null);return eW(d,c?i:r),T.createElement(T.Fragment,null,c&&T.createElement(D.AnalyticsLink,{className:(0,W.Z)("js-setting-button",o.settingsButton),ref:d,color:"secondary",href:"javascript:void(0)","aria-label":l(t),onClick:s,analyticsId:n},T.createElement(x.Settings,{className:o.iconLink}),T.createElement(D.AnalyticsTypography,{component:"span",variant:"h4",className:o.settingsLink},l(t))),!c&&T.createElement(D.AnalyticsIconButton,{ref:d,className:o.settingsButton,"aria-label":l(t),onClick:s,analyticsId:n},T.createElement(x.Settings,null)))};var tu=n(120079);let tp=(0,R.makeStyles)(e=>(0,R.createStyles)({panelHeaderContainerRoot:t=>({borderBottom:`1px solid ${e.palette.border.main}`,height:"48px",backgroundColor:e.palette.background.b9,[e.breakpoints.up("sm")]:{height:"56px"},[e.breakpoints.up("md")]:{backgroundColor:e.palette.background.default,height:"107px"}}),containerWrapper:{display:"flex",height:"100%",justifyContent:"center",alignItems:"center",margin:"0 5px",[e.breakpoints.up("md")]:{justifyContent:"center",alignItems:"flex-start",flexDirection:"column",margin:"0 30px"}},menuToggle:t=>({color:e.palette.secondary.main,marginRight:`${t.closeButtonWidth}px`,"&:hover":{color:e.palette.primary.contrastText}}),menuToggleWrapper:t=>({minWidth:t.menuToggleMinWidth?`${t.menuToggleMinWidth}px`:"inherit",display:"flex",justifyContent:"flex-start",flex:1,[e.breakpoints.up("md")]:{display:"none"}}),subHeader:{display:"none",[e.breakpoints.up("md")]:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"}},rightContentContainer:{marginLeft:"auto"},headingWrapperContainer:{width:"100%",display:"flex",overflow:"hidden",whiteSpace:"nowrap","& h1":{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},[e.breakpoints.up("md")]:{justifyContent:"space-between",width:"100%","& h1":{width:"fit-content"}}}})),tm=(e,t=!1)=>{T.useEffect(()=>{t&&e.current&&e.current.focus()},[e,t])},th=e=>{let{subHeaderText:t,children:n,analyticsIdPrefix:i,showMenuToggleButton:r,menuToggleRef:s,readyToFocus:o,skipLinkClassName:a,skipLinkFocusNext:l,skipLinkTarget:c,settingsButtonProps:d}=e,u=(0,ep.q)(),p=T.useRef(null);tm(p,o);let m=(0,ez.Fg)(),h=(0,ez.ac)(m.breakpoints.up("md")),g=tp({...e,closeButtonWidth:40});return T.createElement("div",{className:g.panelHeaderContainerRoot},c&&h&&T.createElement(eK,{targetSelector:c,focusNextSelector:l,customClassNames:["js-panel-header-skip-link",a],text:u("cr.components.accessibility.skipLink.message")}),T.createElement("div",{className:g.containerWrapper},T.createElement("div",{className:g.subHeader},T.createElement("div",null,t),T.createElement("div",{className:g.rightContentContainer},d&&h&&T.createElement(td,{...d}))),T.createElement("div",{className:g.menuToggleWrapper},r&&T.createElement(D.AnalyticsIconButton,{ref:s,className:(0,W.Z)(g.menuToggle,"left-off-canvas-toggle","menu-toggle"),analyticsId:`${i}.menu-toggle-button`},T.createElement(tu.l,null),T.createElement("span",{className:"sr-only"},u("cr.components.panelHeader.menuToggleButtonAriaLabel")))),T.createElement("div",{tabIndex:-1,ref:p,className:g.headingWrapperContainer},n)))};var tg=n(883608);let tf=T.forwardRef((e,t)=>{let{children:n}=e,{isRtl:i}=(0,G.h)(),r=(0,tg.y)(e),s=(0,ez.Fg)(),o=(0,ez.ac)(s.breakpoints.up("md"));return T.createElement(D.AnalyticsJssThemeProvider,{theme:o?"light":"dark",isRtl:i(),cssReset:"none"},T.createElement("div",{className:r.panelHeaderControlsRoot},T.createElement("div",{ref:t,className:r.panelHeaderControlsWrapper},n)))}),tb=(0,R.makeStyles)(e=>(0,R.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,backgroundColor:e.palette.background.b9,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,backgroundColor:e.palette.background.default,textAlign:"unset",width:"auto"}},headerTextEditButtonWrapper:{display:"flex",justifyContent:"initial",alignItems:"center",cursor:"pointer",width:"auto",maxWidth:"100%","&:hover":{textDecoration:"underline","& $editButton":{opacity:1}}},editButton:{[e.breakpoints.up("md")]:{opacity:0,color:e.palette.text.secondary,marginBottom:"-4px","&:hover":{color:e.palette.text.primary},"&:focus":{opacity:1,color:e.palette.text.secondary}}},headerTextFieldRoot:{display:"block",border:"none",borderRadius:0,backgroundColor:"transparent",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{color:e.palette.text.primary},"& input":{backgroundColor:"transparent",color:e.palette.primary.contrastText,border:"none",padding:0,margin:0,fontFamily:e.typography.h3.fontFamily,fontSize:e.typography.h3.fontSize,fontWeight:e.typography.h3.fontWeight,lineHeight:e.typography.h3.lineHeight,textAlign:"center",[e.breakpoints.up("md")]:{textAlign:"unset",fontFamily:e.typography.display1.fontFamily,fontSize:e.typography.display1.fontSize,fontWeight:e.typography.display1.fontWeight,lineHeight:e.typography.display1.lineHeight,color:e.palette.text.primary}},"& input:focus":{boxShadow:"none",backgroundColor:"transparent"}},headerTextFieldFocused:{"&&":{boxShadow:"none"},[e.breakpoints.up("md")]:{"&&":{boxShadow:`0 2px 0 0 ${e.palette.focus.main}`}}}})),tv=e=>{let{shouldWrap:t,wrapper:n,children:i}=e;return t?n(i):i},ty=e=>{let{editButtonAriaLabel:t,onHeaderTextChange:n,initialIsEditMode:i,placeholder:r,onEnterEditMode:s,onExitEditMode:o,inputRef:a,children:l,...c}=e,d=(0,ep.q)(),{headerText:u,analyticsIdPrefix:p,settingsButtonProps:m,skipLinkClassName:h,skipLinkFocusNext:g,skipLinkTarget:f}=c,b=(0,ez.Fg)(),v=(0,ez.ac)(b.breakpoints.up("md")),y=tb(e),[S,C]=(0,T.useState)(0),[E,I]=(0,T.useState)(0),w=T.Children.toArray(e.children).length,A=(0,T.useCallback)(e=>C((null==e?void 0:e.clientWidth)||0),[w,v]),k=(0,T.useCallback)(e=>I((null==e?void 0:e.clientWidth)||0),[w,v]),[P,x]=(0,T.useState)(!!i),[R,L]=(0,T.useState)(u),N=T.useRef(R),$=(0,T.useCallback)(()=>{x(!1),null==o||o();let e=R.trim();if(!e||e===u){L(N.current);return}L(e),null==n||n(e)},[R]),O=(0,T.useMemo)(()=>P?Math.max(S+40,E):0,[S,E,P]);return T.createElement(th,{...c,menuToggleMinWidth:O,menuToggleRef:A},f&&T.createElement(eK,{targetSelector:f,focusNextSelector:g,customClassNames:["js-panel-header-skip-link",h],text:d("cr.components.accessibility.skipLink.message")}),T.createElement(T.Fragment,null,!P&&T.createElement(T.Fragment,null,T.createElement(tv,{shouldWrap:v,wrapper:e=>T.createElement("div",{className:y.headerTextEditButtonWrapper},e)},T.createElement(T.Fragment,null,T.createElement(D.AnalyticsTypography,{onClick:()=>x(!0),className:(0,W.Z)(y.headerText,"js-header-text","js-editable-header-text"),"data-analytics-id":`${p}.enter-edit-mode-header`,component:"h1",variant:v?"display1":"h3"},R),T.createElement(tf,null,T.createElement(D.AnalyticsIconButton,{className:(0,W.Z)(y.editButton,"js-enter-edit-mode-button"),"aria-label":t,analyticsId:`${p}.enter-edit-mode-button`,onClick:()=>{N.current=R,x(!0),null==s||s()}},T.createElement(tl.I,null))))),T.createElement(tf,{ref:k},l,m&&!v&&T.createElement(td,{...m}))),P&&T.createElement(T.Fragment,null,T.createElement(D.AnalyticsTextField,{className:"js-header-text-input",value:R===r?"":R,autoFocus:!0,fullWidth:!0,InputProps:{classes:{root:y.headerTextFieldRoot,focused:y.headerTextFieldFocused}},ref:a,placeholder:r,onChange:e=>L(e.target.value),onKeyDown:e=>"Enter"===e.nativeEvent.code&&$(),onBlur:$,analyticsId:`${p}.header-text-input`}),T.createElement(tf,{minWidth:O,ref:k},l,m&&!v&&T.createElement(td,{...m})))))},tS=(0,R.makeStyles)(e=>(0,R.createStyles)({headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{margin:0,color:e.palette.text.primary,textAlign:"unset",width:"auto",display:"block",maxWidth:"100%"}}})),tC=e=>{let t=tS(e),n=(0,ez.Fg)(),i=(0,ez.ac)(n.breakpoints.up("md")),{headerText:r,settingsButtonProps:s,skipLinkClassName:o,skipLinkFocusNext:a,skipLinkTarget:l,children:c}=e,d=(0,ep.q)();return T.createElement(th,{...e},T.createElement(T.Fragment,null,l&&T.createElement(eK,{targetSelector:l,focusNextSelector:a,customClassNames:["js-panel-header-skip-link",o],text:d("cr.components.accessibility.skipLink.message")}),"string"==typeof r?T.createElement(D.AnalyticsTypography,{className:(0,W.Z)(t.headerText,"js-header-text","js-readonly-header-text"),component:"h1",variant:i?"display1":"h3"},r):r,T.createElement(tf,null,c,s&&!i&&T.createElement(td,{...s}))))},tE=(0,R.makeStyles)(e=>(0,R.createStyles)({footerRoot:{display:"flex",justifyContent:"flex-end",backgroundColor:e.palette.background.b2,borderTop:`1px solid ${e.palette.border.main}`,padding:"15px",gap:"10px","& > button":{flex:"1 1 0",[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:"170px",flexBasis:"auto"}}},peek:{justifyContent:"center"}})),tI=e=>{let{children:t,peek:n}=e,i=tE();return P().createElement("footer",{className:(0,W.Z)(i.footerRoot,n&&i.peek,e.className),role:"contentinfo"},t)},tw=(0,R.makeStyles)({body:{display:"flex",flexDirection:"column",padding:"0 30px"}}),tA=(0,T.forwardRef)(function(e,t){let{children:n,className:i,...r}=e,s=tw();return P().createElement("div",{className:(0,W.Z)(s.body,i),ref:t,...r},n)}),tk=(0,R.makeStyles)(e=>(0,R.createStyles)({panelRoot:{position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",flexDirection:"column",justifyContent:"stretch"},baseBody:{flex:"1 1",display:"flex",flexDirection:"column",overflowY:"hidden"},bodyWithStandardHeader:{[e.breakpoints.up("sm")]:{overflowY:"initial"}},headerRoot:{},contentRoot:{flex:"1 1 auto",overflow:"auto",[e.breakpoints.up("sm")]:{overflowY:"initial"}}})),tT=e=>{let{children:t,header:n,footer:i,fixedHeader:r=!1}=e,s=tk();return P().createElement("div",{className:s.panelRoot},P().createElement("div",{className:(0,W.Z)(s.baseBody,!r&&s.bodyWithStandardHeader)},P().createElement("div",{className:s.headerRoot},n),P().createElement("div",{className:s.contentRoot},t)),i)};var tP=n(515212);let tD=e=>{if(!e)return;let t=Array.from(e.querySelectorAll("h1")).find(e=>(0,tP.EB)(e)||e.parentElement&&(0,tP.EB)(e.parentElement));if(t&&(0,tP.EB)(t)){t.focus();return}if(null==t?void 0:t.parentElement){null==t||t.parentElement.focus();return}let n=(0,tP.ht)(e).find(e=>!e.classList.contains(tF));if(n){n.focus();return}e.focus()};var tx=n(270361),tR=n(162059),tL=n(817426);let tN="300ms",t$="cubic-bezier(0.55, 0, 0.1, 1)",tO=(0,R.makeStyles)(e=>{let t=e=>1010+100*(e.panelLayer-1);return{panel:{top:0,position:"fixed",height:"100%",width:"100%",zIndex:e=>t(e),backgroundColor:e.palette.background.default,[e.breakpoints.up("md")]:{right:0,maxWidth:e=>{let t=36*e.panelLayer;return`calc(100% - ${t}px)`}},animation:`$slideIn ${tN} ${t$}`},"@keyframes slideIn":{from:{transform:"translateX(100%)"},to:{transform:"translateX(0%)"}},slideOut:{transition:`transform ${tN} ${t$}`,transform:"translateX(102%)"},backgroundShadow:{display:"none",[e.breakpoints.up("md")]:{top:0,right:0,position:"fixed",height:"100%",width:"100%",opacity:"50%",display:"block",zIndex:e=>t(e)-1,backgroundColor:e.palette.common.black,animation:`$fadeIn ${tN} ${t$}`}},"@keyframes fadeIn":{from:{opacity:"0%"},to:{opacity:"50%"}},fadeOut:{transition:`opacity ${tN} cubic-bezier(0.1, 0.9, 0.2, 1)`,opacity:"0%"}}}),{darken:tG}=R.colorManipulator,t_=(0,R.makeStyles)(e=>{let t=e.palette.brandAlt.main;return{button:{top:"5px",left:"43px",zIndex:1011,backgroundColor:"transparent",color:e.palette.background.b5,"&:hover":{color:e.palette.brand.contrastText},[e.breakpoints.up("sm")]:{top:"9px"},[e.breakpoints.up("md")]:{top:"30px",left:"-24px",height:"40px",width:"40px",color:e.palette.brand.contrastText,backgroundColor:t,"&:hover":{color:e.palette.brand.contrastText,backgroundColor:()=>{var e;return tG(null!==(e=(0,tL.j)(t))&&void 0!==e?e:t,.1)}}},"&::after":{display:"none",[e.breakpoints.up("md")]:{content:'""',top:"100%",left:0,position:"absolute",display:"block",borderStyle:"solid",borderWidth:"0 24px 17px 0",borderColor:()=>{var e,n;let i=null!==(e=(0,tL.j)(t))&&void 0!==e?e:t,r=null!==(n=(0,tL.oG)(tG(i,.3),-.36))&&void 0!==n?n:t;return`transparent ${r} transparent transparent`}}}}}}),tM=e=>{let{analyticsId:t,className:n,onClose:i}=e,r=t_(),s=(0,ep.q)();return P().createElement(D.AnalyticsIconButton,{analyticsId:`${t}.close`,"aria-label":s("global.close"),className:(0,W.Z)(r.button,n),onClick:i},P().createElement(x.Close,null))},tB=e=>{let{analyticsId:t,closeButtonClassName:n,isClosing:i,onCloseStart:r,onCloseComplete:s}=e,o=tO({panelLayer:(0,tR.k)()+1}),a=(0,T.useRef)(null);return P().createElement(P().Fragment,null,P().createElement("div",{ref:a,className:(0,W.Z)(o.panel,i&&o.slideOut),onTransitionEnd:e=>{"transform"===e.propertyName&&e.target===a.current&&s()},"data-testid":"panel"},P().createElement(tM,{analyticsId:t,className:n,onClose:r}),e.children),P().createElement("div",{onClick:r,className:(0,W.Z)(o.backgroundShadow,i&&o.fadeOut),"data-testid":"panel-background-shadow"}))},tF="panel-close-button",tU="panel-focus-trap";(l=y||(y={})).open="open",l.closeRequested="closeRequested",l.closeStarted="closeStarted",l.closeComplete="closedComplete";let tV=e=>{let{analyticsId:t,isOpen:n,onCloseStart:i,onCloseComplete:r,disableFocusTrap:s=!1}=e,o=(0,T.useRef)(null),[a,l]=(0,T.useState)(n?y.open:y.closeComplete);(0,T.useEffect)(()=>{(0,tx.aJ)();let e=document.querySelector(".js-page-help");return e&&(e.style.display="none"),requestAnimationFrame(()=>{tD(o.current)}),()=>{e&&(e.style.display="block")}},[]);let c=(0,T.useCallback)(()=>!s,[s]),d=()=>{!1!==(null==i?void 0:i())&&(l(y.closeStarted),(0,tx.YT)())};return(n||a!==y.open||(l(y.closeRequested),d()),a===y.closeComplete)?null:P().createElement(D.AnalyticsPortal,{analyticsId:t,container:document.body},P().createElement(D.AnalyticsTrapFocus,{analyticsId:t,open:!0,disableAutoFocus:!0,isEnabled:c,getDoc:()=>document},P().createElement("div",{ref:o,className:tU,tabIndex:-1},P().createElement(tB,{analyticsId:t,isClosing:a===y.closeStarted,closeButtonClassName:tF,onCloseStart:d,onCloseComplete:()=>{null==r||r(),l(y.closeComplete)}},e.children))))};var tH=n(844449),tq=n(333975),tj=n(16095),tz=n(946100);n(593370);let tW="10px",tK=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{color:e.palette.text.primary,display:"flex",flexFlow:"wrap",position:"relative",transform:"translateZ(0)","&:hover $rootControlsInline button":{backgroundColor:e.palette.background.b9,color:e.palette.secondary.light},"&:hover $rootControlsInline button:hover":{color:e.palette.primary.contrastText}},rootControls:{display:"flex",flex:"1 0 100%",order:1,alignItems:"stretch",minHeight:"58px",minWidth:0},rootControlsWidgets:{display:"flex","& button":{color:e.palette.text.secondary,height:"100%",minHeight:"48px",width:"48px",borderRadius:"0"},"& button:hover, & button:focus":{backgroundColor:e.palette.background.b4,color:e.palette.primary.main}},rootControlsInline:{flex:"0 1 auto",position:"absolute",right:0,zIndex:100,minHeight:"auto","& $rootControlsWidgets":{flexDirection:"column-reverse"}},rootBackground:{backgroundColor:e.palette.background.paper},contextMenu:{display:"flex",marginLeft:"auto"},inlineRenderToggle:{display:"flex"},inlineRenderToggleSeparator:{alignSelf:"center",borderLeft:`1px solid ${e.palette.background.b5}`,height:"50%",width:"1px"},mediaRoot:{margin:"0 auto",order:2,textAlign:"center",width:"100%"},documentPreviewHidden:{height:0,display:"none","div& iframe":{height:0,minHeight:0,visibility:"hidden"}},mediaRootInline:{order:0},attachmentMeta:{display:"flex",alignItems:"center",flex:1,height:"100%",minWidth:0,paddingLeft:tW,paddingRight:tW,wordBreak:"break-all"},attachmentMetaClickable:{"&:hover,&:focus":{backgroundColor:e.palette.background.b4,cursor:"pointer",textDecoration:"underline"}},icon:{marginRight:"10px"},fileText:{flexShrink:1,lineHeight:"unset",textAlign:"unset",fontWeight:e.typography.fontWeightBold},contextMenuHovered:{"& svg":{color:e.palette.primary.main},"& button.is-expanded svg":{color:e.palette.brand.main}}}));var tZ=n(791235),tQ=n(259197),tJ=n(247802),tY=n(679915),tX=n(776517);function t0(e){return(0,tZ.Q)(e)&&!e.viewerUrl&&("video"===(0,tZ.V4)(e)||"image"===(0,tZ.V4)(e)&&(0,tZ.f5)(e))}function t1(e,t){return void 0!==t&&!e}function t2(e,t){return e&&t.items.length>0}function t4(e,t,n,i,r,s,o,a){let l={directionalHint:7,directionalHintFixed:!1,items:[]};return void 0!==i&&t1(t,i)&&l.items.push({name:n("cr.components.fileViewer.deleteFile"),key:"deleteFile",icon:T.createElement(x.Trash,null),onClick:()=>i()}),function(e,t){let n=(0,tZ.Q)(e,t);return!n||n&&e.render!==tQ.I_d.InlineOnly}(e,s)&&l.items.push({name:n(o?"cr.components.fileViewer.downloadFile":"cr.components.fileViewer.download"),key:"downloadFile",icon:T.createElement(x.Download,null),additionalAttributes:{"data-key":"downloadFile"},onClick:()=>{(0,tX.sA)(tX.Cs.DownloadLinkClicked),(0,tL.Sv)(e.resourceUrl,e.fileName),null==a||a()}}),void 0!==r&&r.length>0&&l.items.push(...r),l}let t6=e=>{var t;let{file:n,disableMediaModal:i=!1,readOnly:r=!0,onDelete:s,showContextMenu:o=!0,analyticsId:a="fileViewer",additionalContextualMenuItems:l,isAllyEnabled:c=!1,inlineMediaAdditionalAttributes:d,widgets:u,expandInlineFilesOnLoad:p=!1,supportsInlineDocumentRender:m=!1}=e,[h,g]=T.useState(p),f=tK(),b=(0,ep.q)(),[v,y]=T.useState(!1),S=(0,tZ.f5)(n)&&(0,tZ.iT)(n)&&(r&&m||p),C=T.useCallback(e=>{null==e||e.stopPropagation(),g(e=>(e||v||y(!0),!e))},[v]),E=(0,tZ.iT)(n)&&(!r&&!p||!h),I=t4(n,r,b,s,l,m,c,e.onDownloadTriggered),w={};I.items&&I.items.length>0&&I.items.every(e=>{var t,n;return(null===(t=e.additionalAttributes)||void 0===t?void 0:t["data-ally-show"])!==void 0&&(null===(n=e.additionalAttributes)||void 0===n?void 0:n["data-ally-content-ref"])!==void 0})&&(w["data-ally-show"]="instructorfeedback",w["data-ally-content-ref"]=null===(t=I.items[0].additionalAttributes)||void 0===t?void 0:t["data-ally-content-ref"]);let A=r&&v,k=("audio"===(0,tZ.V4)(n)||"video"===(0,tZ.V4)(n))&&(0,tZ.Q)(n,m)||"image"===(0,tZ.V4)(n)&&(0,tZ.Q)(n,m)&&(0,tZ.f5)(n)&&(0,tZ.Q)(n,m)&&"audio"!==(0,tZ.V4)(n)&&"video"!==(0,tZ.V4)(n)||r&&h&&(0,tZ.Q)(n,m)||p&&(0,tZ.iT)(n)||A,P=`cr.components.fileViewer.aria.${k?"hideFile":"viewFile"}`,R=`cr.components.fileViewer.${k?"hideFile":"viewFile"}`;return T.createElement("div",{className:(0,W.Z)(f.root,!t0(n)&&f.rootBackground)},T.createElement("div",{className:(0,W.Z)(t0(n)?void 0:f.rootControls,t0(n)?void 0:"js-file-viewer-root-controls",t0(n)?f.rootControlsInline:void 0,t0(n)?"js-file-viewer-controls-inline":void 0)},!t0(n)&&T.createElement("div",{className:(0,W.Z)(f.attachmentMeta,"js-file-viewer-attachment-meta",S?f.attachmentMetaClickable:void 0),onClick:S?C:void 0,"aria-label":S?b(P,{displayName:n.displayName}):void 0,"aria-expanded":S?k&&!E:void 0,"aria-controls":S?`file-preview-${n.resourceUrl}`:void 0,role:S?"button":void 0,tabIndex:S?0:void 0,title:S?b(R):void 0},T.createElement(tY.J,{name:(0,tQ.kfU)(n.mimeType),iconClass:f.icon}),T.createElement("span",{className:f.fileText},n.displayName)),T.createElement("div",{className:(0,W.Z)(f.rootControlsWidgets,"js-file-viewer-attachment-widgets")},u,!t0(n)&&t1(r,s)&&void 0!==s&&T.createElement(D.AnalyticsIconButton,{analyticsId:`${a}.deleteFile`,title:b("cr.components.fileViewer.deleteFile"),"aria-label":b("cr.components.fileViewer.aria.deleteFile",{displayName:n.displayName}),onClick:s},T.createElement(x.Trash,null)),t2(o,I)?T.createElement("div",{className:(0,W.Z)(f.contextMenu,"js-file-viewer-context-menu"),...w},T.createElement(eZ.ActionMenu,{title:b("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),ariaLabel:b("cr.components.fileViewer.menuTitle",{displayName:n.displayName}),menuProps:I,analyticsId:`${a}.action.menu`})):void 0,S?T.createElement("div",{className:f.inlineRenderToggle},t2(o,I)||u?T.createElement("div",{className:f.inlineRenderToggleSeparator}):void 0,T.createElement(D.AnalyticsIconButton,{analyticsId:`${a}.inlineRender.toggle`,"aria-expanded":k&&!E,"aria-controls":`file-preview-${n.resourceUrl}`,"aria-label":b(P,{displayName:n.displayName}),title:b(R),onClick:C,className:(0,W.Z)(f.fileText,"js-file-viewer-inline-render-toggle")},k&&!E?T.createElement(x.ChevronUp,null):T.createElement(x.ChevronDown,null))):void 0)),k&&T.createElement("div",{className:(0,W.Z)(f.mediaRoot,"js-file-viewer-inline-preview",E?f.documentPreviewHidden:void 0),id:`file-preview-${n.resourceUrl}`},T.createElement(tJ.s,{file:n,disableMediaModal:i,analyticsId:a,inlineMediaAdditionalAttributes:d})))};var t5=n(565663);let t3=(0,R.makeStyles)(e=>({root:{'& input[type="text"], & input[type="text"]:focus':{margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"},"& fieldset label":{marginLeft:"0"}},divider:{marginBottom:e.spacing(2),marginTop:e.spacing(3),"& ~ &":{marginTop:e.spacing(2)}},tooLargeContainer:{display:"flex",flexDirection:"row"},tooLargeInfoIcon:{marginTop:"3px"},tooLargeTextContainer:{margin:"0 9px;","& p:first-of-type":{marginBottom:"9px"}}}));var t8=n(311822),t9=n(971260);let t7=e=>{var t,n,i;let{analyticsId:r,onCancel:s,onSave:o,supportsInlineDocumentRender:a=!1,canProvideDescription:l=!0,hideDisplayOptions:c=!1,maxAltTextLength:d=t5.A}=e,[u,p]=T.useState(e.file),m=(0,ep.q)(),h=t3(),g=(0,tZ.V4)(u),f=(0,tZ.TN)(g),b=(0,tZ.CO)(g),v=(0,tZ.bm)(g),y=(0,tZ.NU)(g),{alternativeText:S,displayName:C}=u,E=(!f&&!y||S.length>0)&&C.length>0,I=Math.round(tZ.$8/1048576),w=Math.round((null!==(t=(0,tZ.RE)(u))&&void 0!==t?t:tZ.$8)/1048576),A=(0,tZ.Q)(u),k=(0,tZ.t1)(u,a),P=l&&v&&A,L=(A||k)&&!f&&!y&&!c;return T.createElement(t8.Dy,{hidden:e.hidden,onDismiss:()=>{p(u),s()},dialogContentProps:{title:m("cr.components.filePropertyDialog.title")},modalProps:{className:h.root},analyticsId:r,"aria-labelledby":"file-properties-dialog-title"},T.createElement(D.AnalyticsTextField,{analyticsId:`${r}.displayName.textfield`,id:"file-property-dialog-displayName",label:`${m("cr.components.filePropertyDialog.displayName")}`,fullWidth:!0,onChange:e=>{let t=e.target.value,n=u.alternativeText;u.alternativeText===u.displayName&&(n=t),p({...u,displayName:t,alternativeText:n})},inputProps:{maxLength:200},required:!0,value:u.displayName}),P&&T.createElement(T.Fragment,null,T.createElement(R.Divider,{orientation:"horizontal",variant:"fullWidth",className:h.divider}),T.createElement(t9.K,{canEdit:!0,altText:S,maxAltTextLength:d,onAltTextChanged:e=>p({...u,alternativeText:e,isDecorative:!1}),canMarkAsDecorative:b,isDecorative:!0===u.isDecorative,onIsDecorativeChanged:e=>p({...u,isDecorative:e}),analyticsId:"file-property-dialog.accessibility"})),L&&T.createElement(T.Fragment,null,T.createElement(R.Divider,{orientation:"horizontal",variant:"fullWidth",className:h.divider}),T.createElement(D.AnalyticsRadioGroup,{analyticsId:`${r}.displayOptions.radioGroup`,name:"display-options",legendText:m("cr.components.filePropertyDialog.displayAs.label"),legendVariant:"subtitle2",value:u.render,onChange:e=>{let t=e.target.value;p({...u,render:t})}},T.createElement(D.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.inline`,htmlFor:"displayAsInline",value:tQ.I_d.Inline,control:T.createElement(D.AnalyticsRadio,{id:"displayAsInline",analyticsId:`${r}.displayOptions.radio.inline`}),label:m("cr.components.filePropertyDialog.displayAs.inline")}),T.createElement(D.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.inlineOnly`,htmlFor:"displayAsInlineOnly",value:tQ.I_d.InlineOnly,control:T.createElement(D.AnalyticsRadio,{id:"displayAsInlineOnly",analyticsId:`${r}.displayOptions.radio.inlineOnly`}),label:m("cr.components.filePropertyDialog.displayAs.inlineOnly")}),T.createElement(D.AnalyticsFormControlLabel,{analyticsId:`${r}.displayOptions.radioGroup.attachment`,htmlFor:"displayAsAttachment",value:tQ.I_d.Attachment,control:T.createElement(D.AnalyticsRadio,{id:"displayAsAttachment",analyticsId:`${r}.displayOptions.radio.attachment`}),label:m("cr.components.filePropertyDialog.displayAs.attached")}))),a&&(0,tZ.ZO)(u.mimeType)&&!(0,tZ.Y1)(u)&&T.createElement("div",{className:h.tooLargeContainer},T.createElement(x.Information,{className:h.tooLargeInfoIcon}),T.createElement("div",{className:h.tooLargeTextContainer},T.createElement("p",null,m("cr.components.filePropertyDialog.displayAs.tooLarge")),T.createElement("p",null,(0,tZ.jN)(u)?m("cr.components.filePropertyDialog.displayAs.tip",{maxFilesizeInMB:I}):m("cr.components.filePropertyDialog.displayAs.extensionSpecificTip",{extension:`.${null===(i=null===(n=u.fileName)||void 0===n?void 0:n.split(".").pop())||void 0===i?void 0:i.toLowerCase()}`,maxFilesizeInMB:w})))),T.createElement(eZ.DialogFooter,null,T.createElement(D.AnalyticsDefaultButton,{analyticsId:r,onClick:s},m("cr.components.global.close")),T.createElement(D.AnalyticsPrimaryButton,{analyticsId:`${r}.dialogFooter.save.button`,disabled:!E,onClick:()=>o(u)},m("cr.components.filePropertyDialog.save"))))};var ne=n(151239),nt=n(462486);let nn=e=>{let{customBadgeClass:t}=e,n=(0,ep.q)();return T.createElement(nt.t,{position:"inline",color:"indicatorPrimary",badgeContent:n("cr.components.newFeatureBadge.content"),offScreenLabel:n("cr.components.newFeatureBadge.ariaLabel"),classes:{badge:t}})},ni=e=>{let{onDismiss:t,analyticsId:n,isVisible:i}=e,r=(0,ep.q)();return P().createElement(t8.Dy,{analyticsId:`${n}.connectionLostDialog`,hidden:!i,"aria-labelledby":"connection-lost-dialog",onDismiss:t,dialogContentProps:{type:eF.DialogType.normal,showCloseButton:!0,title:r("components.services.assessment.modal.connection-lost.title"),titleId:`${n}.connectionLostDialog.titleClose.button`,subText:r("components.services.assessment.modal.connection-lost.description"),subTextId:"connection-lost-dialog-description",closeButtonAriaLabel:r("global.close")},modalProps:{isAlert:!0}},P().createElement(eF.DialogFooter,null,P().createElement(D.AnalyticsPrimaryButton,{analyticsId:`${n}.connectionLostDialog.ok.button`,onClick:t},r("global.ok"))))};var nr=n(818286);let ns=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:e.palette.background.b2,minHeight:"58px",padding:"8px"},progressInfo:{display:"flex",flexDirection:"row",alignItems:"center"},progressLabel:{marginLeft:"8px"}})),no=e=>{let{analyticsId:t,fileName:n,onCancel:i,isDeterminate:r,progress:s,onComplete:o}=e,a=ns(),[l,c]=(0,T.useState)(0),[d,u]=(0,T.useState)(void 0),p=(0,ep.q)(),m=p("cr.components.uploadProgressBanner.label",{fileName:n}),h=p("cr.components.uploadProgressBanner.cancelButton.ariaLabel"),g=(0,T.useRef)();return g.current=o,(0,T.useEffect)(()=>(r&&void 0!==s&&l<Math.floor(s)&&(d&&clearTimeout(d),u(setTimeout(()=>{c(e=>e+1)},5))),g.current&&(r?100===l:100===s)&&g.current(),()=>{d&&clearTimeout(d)}),[r,s,l]),P().createElement("div",{className:a.root},P().createElement("div",{className:a.progressInfo},P().createElement(nr.W,{value:l,showPercent:r,variant:r?"determinate":"indeterminate",size:"medium",ariaLabel:""}),P().createElement("span",{className:a.progressLabel},m)),void 0!==s&&s<100&&P().createElement(e0.AnalyticsIconButton,{className:"js-upload-progres-banner-cancel-button",analyticsId:`${t}.cancelUpload.button`,"aria-label":h,onClick:i},P().createElement(x.Close,null)))};var na=n(545169),nl=n(748805),nc=n(256761),nd=n(495153),nu=n(847614),np=n(641268);let nm=({message:e,onClose:t})=>{let n=(0,ep.q)();return T.createElement(nu.m,{severity:"warning",icon:T.createElement(np.v,null),onClose:t,closeText:n("global.close")},e)};var nh=n(484482),ng=n(651755);let nf=(0,R.makeStyles)(()=>(0,R.createStyles)({comboboxContainerWidth:{"& > div":{width:"100%"}},comboboxWidth:{width:"100%"},comboboxReset:{"& input":{border:0,margin:"0px",height:"100%"},"& input:focus":{boxShadow:"none"}}})),nb=e=>{let{unreadCount:t,unreadIndicatorAriaLabel:n="cr.components.messages.unreadIndicatorAriaLabel.plural",className:i,color:r}=e,{formatNumber:s,translate:o}=(0,G.h)(),a=t>99,l=a?o("cr.components.messages.unreadIndicatorMax"):s(t),c=a?o(`${n}Max`):o(n,{unreadValue:l});return t>0?P().createElement("div",{className:null!=i?i:""},P().createElement(D.AnalyticsBadge,{badgeContent:l,size:"medium",color:null!=r?r:"default",position:"inline","aria-label":c})):null};function nv(e){return function(t){var n,i;let r=n=>{let i=(0,R.useTheme)(),r=(0,R.useMediaQuery)(e.query(i));return P().createElement(t,{...n,mediaQuery:r})},s=null!==(i=null!==(n=t.displayName)&&void 0!==n?n:t.name)&&void 0!==i?i:"Component";return r.displayName=`withMediaQuery(${s})`,r}}function ny(e=()=>({})){return(t,n)=>{let i=i=>{let[r,s]=(0,T.useState)(!1),o=(0,T.useRef)(),a=(0,T.useCallback)(()=>(s(!0),new Promise(e=>{o.current=t=>{s(!1),e(t)}})),[]),l=(0,T.useCallback)((e,t)=>{var n;s(!1),null===(n=o.current)||void 0===n||n.call(o,{confirmed:!!e,results:t})},[]);return P().createElement(P().Fragment,null,P().createElement(t,{...i,openModal:a}),r&&P().createElement(n,{...e(i),exitCallback:l}))};return i.displayName=`withModal(${t.displayName||t.name||"Component"})`,i}}n(83590);var nS=n(532875),nC=n(788180);let nE=(0,R.makeStyles)(e=>({uploadFromDeviceContainer:{margin:"12px 0"},fileSizeText:{display:"flex",flexDirection:"column",fontWeight:e.typography.fontWeightLight,margin:"12px 0"},fileUploadBtn:{width:"100%"},uploadIcon:{marginRight:"5px"},fileInput:{display:"none"},uploadProgressContainer:{display:"flex",flexDirection:"row"},progressBar:{marginRight:"5px"},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"300px"}})),nI=e=>{let{onFileUpload:t,analyticsId:n,validFormats:i,onFileUploadError:r}=e,s=nE(),o=(0,ep.q)(),[a]=(0,T.useState)(()=>"supported-format-id"+(0,M.v4)());return P().createElement("div",{className:s.uploadFromDeviceContainer},P().createElement(D.AnalyticsDashedButton,{id:"file-upload-button",className:s.fileUploadBtn,analyticsId:`${n}.upload-from-device.button`,onClick:()=>{(0,tL.s6)(i.join(","),!1).then(e=>{(0,tL.ox)(e,i)?t(e[0]):r(Error("File invalid"))})},"aria-describedby":a},P().createElement(x.Upload,{className:s.uploadIcon}),o("cr.components.fileUpload.uploadFile")),P().createElement("div",{className:s.fileSizeText},P().createElement("span",{id:a},o("cr.components.fileUpload.fileFormat"))))},nw=e=>{let{onFileUpload:t,analyticsId:n,validFormats:i,onFileUploadError:r}=e,s=(0,ep.q)(),o=nE(),[a,l]=(0,T.useState)(!1),[c,d]=(0,T.useState)();return P().createElement(P().Fragment,null,P().createElement(nI,{onFileUpload:e=>{let n={file:e,fileName:e.name,fileType:e.type};d(e.name),l(!0),(0,tQ.OmG)(n).then(e=>{l(!1),t(e)}).catch(e=>{l(!1),r(e)})},analyticsId:n,validFormats:i,onFileUploadError:r}),a&&P().createElement("div",{className:o.uploadProgressContainer},P().createElement(D.AnalyticsCircularProgress,{className:o.progressBar,ariaLabel:s("cr.components.fileUpload.uploadInProgress"),size:"small"}),P().createElement("span",{className:o.fileName},c)))};class nA{constructor(){this.providerAdded=!1,this.renderSnackbarCallback=()=>{},this.dismissSnackbarCallback=()=>{},this.snackbarQueue=[],this.currentSnackbar=null}static getInstance(){return nA.INSTANCE||(nA.INSTANCE=new nA),nA.INSTANCE}setProvider(e,t){if(this.providerAdded)throw Error("Only a single provider can be added.");this.renderSnackbarCallback=e,this.dismissSnackbarCallback=t,this.providerAdded=!0}dequeueSnackbar(e){var t;this.snackbarQueue=this.snackbarQueue.filter(t=>t.viewKey!==e),(null===(t=this.currentSnackbar)||void 0===t?void 0:t.viewKey)===e&&this.dismissSnackbarCallback()}renderNextSnackbar(){this.currentSnackbar=null;let e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}enqueueSnackbar(e,t,n,i){if(!this.providerAdded)throw Error("Cannot enqueue a snackbar because a provider is not yet registered.");let r={...t};if(i&&(r.icon=T.createElement(i,null)),this.snackbarQueue.push({viewKey:e,messageProps:r,actionProps:n}),null===this.currentSnackbar){let e=this.snackbarQueue.shift();e&&(this.currentSnackbar=e,this.renderSnackbarCallback(e.messageProps,e.actionProps))}}}nA.INSTANCE=null;let nk=()=>{let{enqueueSnackbar:e,closeSnackbar:t}=(0,D.useSnackbar)(),n=(0,ep.q)(),i=P().useRef(),r=P().useRef();return P().useEffect(()=>{i.current=(t,i)=>{let r=null!=i?i:{closeButtonAriaLabel:n("cr.components.global.close")},s={isPersistent:!0,...r,...t},{isPersistent:o}=s;e(P().createElement(R.SnackbarMessage,{...s}),{autoHideDuration:o?null:2e4,resumeHideDuration:o?void 0:2e4,persist:o,action:P().createElement(R.SnackbarAction,{...r})})}},[e,n]),P().useEffect(()=>{r.current=t},[t]),P().useEffect(()=>{nA.getInstance().setProvider((...e)=>{var t;return null===(t=i.current)||void 0===t?void 0:t.call(i,...e)},()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.call(r)})},[]),null},nT=()=>P().createElement(D.AnalyticsSnackbarProvider,{onExited:()=>{nA.getInstance().renderNextSnackbar()},variant:"default"},P().createElement(nk,null));function nP(e,t=!0){let n=P().useRef();return P().useEffect(()=>{n.current=nA.getInstance()},[]),P().useEffect(()=>()=>{var i;t&&(null===(i=n.current)||void 0===i||i.dequeueSnackbar(e))},[e,t]),{enqueueSnackbar:P().useCallback((t,i)=>{var r;null===(r=n.current)||void 0===r||r.enqueueSnackbar(e,t,i)},[e]),dequeueSnackbar:P().useCallback(()=>{var t;null===(t=n.current)||void 0===t||t.dequeueSnackbar(e)},[e])}}(c=S||(S={}))[c.AnonymousSendReminders=0]="AnonymousSendReminders",c[c.AnonymousBulkDownload=1]="AnonymousBulkDownload",c[c.AssessmentTimerToasts=2]="AssessmentTimerToasts",c[c.AssessmentConnectivity=3]="AssessmentConnectivity",c[c.AssessmentQuestionFetchFailure=4]="AssessmentQuestionFetchFailure",c[c.CourseContentOutlineDragAndDrop=5]="CourseContentOutlineDragAndDrop",c[c.CourseContentReleaseConditionLargeMemberSets=6]="CourseContentReleaseConditionLargeMemberSets",c[c.CourseTasksAndLogsDelete=7]="CourseTasksAndLogsDelete",c[c.GradesDownloadToasts=8]="GradesDownloadToasts",c[c.ContentGenerated=9]="ContentGenerated",c[c.RubricGenerated=10]="RubricGenerated",c[c.QuestionsGenerated=11]="QuestionsGenerated",c[c.SafeAssignDirectSubmit=12]="SafeAssignDirectSubmit";var nD=n(498024);n(276776);var nx=n(447051);n(562689);var nR=n(276635),nL=n(854230),nN=n(195540),n$=n(140172),nO=n(729094);let nG=T.memo(({analyticsId:e,items:t,checkboxGroupLegendText:n,headerDescription:i,selectAllItemsLabel:r,onChange:s,onChangeSelectAllItems:o})=>{let a=(0,nL.y)(),l=(0,T.useMemo)(()=>{let e=t.filter(e=>e.checked);return e.length?e.length===t.length?"true":"mixed":"false"},[t]),c=(0,T.useCallback)(e=>{let t=!0,{value:n,checked:i}=e.target;null==s||s(e=>e.map(e=>{let r=e.value===n?{...e,checked:i}:{...e};return r.checked||(t=!1),r})),null==o||o(t)},[s,o]);return T.createElement("div",{className:a.MultiselectCheckbox},T.createElement(nN.c,{legendText:n,legendVariant:"h3"},T.createElement("span",null,i),t.length>0&&T.createElement(D.AnalyticsFormControl,{analyticsId:`${e}.formControl`,fullWidth:!0,className:a.multiselectFormControl},T.createElement("div",{className:a.multiSelectContainer},T.createElement(D.AnalyticsList,{analyticsId:`${e}.list`,className:a.list},T.createElement(D.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:a.listItem,disableGutters:!0,key:"select-all"},T.createElement(D.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:r,htmlFor:"select-all",control:T.createElement(D.AnalyticsCheckbox,{analyticsId:`${e}.selectAllOption`,id:"select-all",checked:"false"!==l,indeterminate:"mixed"===l,value:"indeterminate-checkbox",onChange:e=>{let t="mixed"===l||e.target.checked;null==s||s(e=>e.map(e=>({...e,checked:t}))),null==o||o(t)},inputProps:{"aria-controls":t.map(e=>`ind-checkbox-${e.value}`).join(" "),"aria-checked":l}})})))),T.createElement(n$.i,{variant:"fullWidth",className:a.divider}),T.createElement("div",{className:`${a.multiSelectContainer} with-scroll`},T.createElement(D.AnalyticsList,{analyticsId:`${e}.list`,className:a.list},t.map(t=>T.createElement(nO.W,{key:t.value,analyticsId:e,item:t,onChange:c})))))))},nR.isEqual);(d=C||(C={})).Change="change",d.Saving="saving",d.Saved="saved",d.SaveFailure="saveFailure",d.ValidationFailure="validationFailure",(E||(E={})).Assessments="assessments";var n_=n(9218),nM=n(494712),nB=n(907207),nF=n(913935);let nU=(0,R.makeStyles)(e=>(0,R.createStyles)({dndUploadArea:{boxSizing:"border-box",border:`2px dashed ${e.palette.border.main}`,backgroundColor:e.palette.background.b2,display:"flex",alignItems:"space-around",flexDirection:"column",marginTop:"8px",padding:"24px"},dndUploadComponent:{display:"flex",flexDirection:"column"},uploadArea:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginBottom:"12px"},uploadTitle:{textAlign:"center"},uploadButton:{border:`2px solid ${e.palette.border.dark}`,padding:"10px",fontWeight:e.typography.fontWeightSemiBold,width:"fit-content",margin:"auto"},uploadInstructions:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},uploadIcon:{marginBottom:"8px"},errorMessage:{display:"flex",alignItems:"center",flexDirection:"row",color:e.palette.error.main,margin:"12px 0px"},errorText:{margin:"0px 8px"},errorMessageContainer:{width:"100%"}})),nV=e=>{let{analyticsIdPrefix:t,instructions:n,onUploadFiles:i,errorMessage:r}=e,s=(0,ep.q)(),o=nU(),a="upload-desc-text-id",l=e=>{e.preventDefault(),e.stopPropagation()};return P().createElement("div",{"data-analytics-id":`${t}.dragDropArea`,className:o.dndUploadComponent},P().createElement("div",{className:o.dndUploadArea},P().createElement("div",{onDragOver:e=>{l(e)},onDragLeave:e=>{l(e)},onDrop:e=>{l(e),i(()=>Promise.resolve(e.dataTransfer.files))},"data-testid":"dndUploadDropArea",className:o.uploadArea},P().createElement(nB.g,{className:o.uploadIcon}),P().createElement(nM.c,{variant:"h3",component:"div",className:o.uploadTitle},s("assessments.canvas.common.dndUpload.primaryInstructions")),P().createElement("div",{className:o.uploadInstructions,id:a},n)),P().createElement(n_.b,{onClick:()=>{i()},analyticsId:`${t}.dndUploadButton`,className:o.uploadButton,"aria-describedby":a},s("assessments.canvas.common.dndUpload.secondaryInstructions.uploadButtonText"))),P().createElement("div",{className:o.errorMessageContainer},r&&P().createElement("div",{className:o.errorMessage},P().createElement(nF.U,{color:"error"}),P().createElement("p",{className:o.errorText},r))))},nH=e=>{let{sort:t,sortable:n}=e;if(!n)return null;let i=x.SortArrows;return"ascending"===t?i=x.SortArrowAscending:"descending"===t&&(i=x.SortArrowDescending),T.createElement(i,null)},nq=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{position:"relative"},input:{},searchButton:{height:"40px",width:"40px"},internalInput:{marginBottom:"0 !important",border:"none !important"},inputAdorment:{paddingRight:"0 !important"},popperContainer:{boxSizing:"border-box",borderStyle:"solid",borderWidth:"1px",borderColor:e.palette.border.main,boxShadow:`${e.palette.action.focus} 0px 0px 0px 4px`,borderRadius:"2px",zIndex:1e4},errorMessage:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightMedium,margin:"0",paddingTop:e.spacing(.75),display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(.75)}}}));var nj=n(441365),nz=n(296755),nW=n(655642),nK=n(408687),nZ=n(31307),nQ=n(570528);let nJ={leftNavigation:"Up",rightNavigation:"Down"},nY=e=>{let t=P().useRef();return P().useEffect(()=>{t.current=e}),t.current},nX={formatMonthDayYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`,formatMonthYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getFullYear()}`,formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:(e,t)=>t?t(e.getDate()):e.getDate().toString(),formatYear:(e,t)=>t?t(e.getFullYear()):e.getFullYear().toString()},n0=P().forwardRef((e,t)=>{let n=(0,nQ.y)(),i=(0,ep.q)(),{showMonthPickerAsOverlay:r=!1,today:s=new Date,firstDayOfWeek:o=nj.eO.Sunday,dateRangeType:a=nj.NU.Day,autoNavigateOnSelection:l=!1,showGoToToday:c=!0,highlightCurrentMonth:d=!1,navigationIcons:u=nJ,dateTimeFormatter:p=nX,analyticsId:m,isMonthPickerVisible:h=!0,isDayPickerVisible:g=!0}=e,f=P().useRef(null),b=P().useRef(null),v=e.value&&!isNaN(e.value.getTime())?e.value:e.today||new Date,[y,S]=P().useState(v),[C,E]=P().useState(v),[I,w]=P().useState(!1),[A,k]=P().useState(!r&&h),[T,D]=P().useState(!!r||g),x=nY(e);P().useEffect(()=>{I&&(b.current?(b.current.tabIndex=0,b.current.focus()):f.current&&(f.current.tabIndex=0,f.current.focus()),w(!1))},[I,b,f]),P().useEffect(()=>{if(x!==e){let{autoNavigateOnSelection:t,value:n=new Date}=e;t&&(0,nK.aN)(n,(null==x?void 0:x.value)?x.value:n)&&E(n),S(n||s)}},[e,x,s]),P().useImperativeHandle(t,()=>({calendarFocus:()=>{b.current&&(b.current.tabIndex=0,b.current.focus())}}));let R=e.strings?e.strings:{months:[i("cr.components.calendar.strings.months.january"),i("cr.components.calendar.strings.months.february"),i("cr.components.calendar.strings.months.march"),i("cr.components.calendar.strings.months.april"),i("cr.components.calendar.strings.months.may"),i("cr.components.calendar.strings.months.june"),i("cr.components.calendar.strings.months.july"),i("cr.components.calendar.strings.months.august"),i("cr.components.calendar.strings.months.september"),i("cr.components.calendar.strings.months.october"),i("cr.components.calendar.strings.months.november"),i("cr.components.calendar.strings.months.december")],shortMonths:[i("cr.components.calendar.strings.shortMonths.january"),i("cr.components.calendar.strings.shortMonths.february"),i("cr.components.calendar.strings.shortMonths.march"),i("cr.components.calendar.strings.shortMonths.april"),i("cr.components.calendar.strings.shortMonths.may"),i("cr.components.calendar.strings.shortMonths.june"),i("cr.components.calendar.strings.shortMonths.july"),i("cr.components.calendar.strings.shortMonths.august"),i("cr.components.calendar.strings.shortMonths.september"),i("cr.components.calendar.strings.shortMonths.october"),i("cr.components.calendar.strings.shortMonths.november"),i("cr.components.calendar.strings.shortMonths.december")],days:[i("cr.components.calendar.strings.days.sunday"),i("cr.components.calendar.strings.days.monday"),i("cr.components.calendar.strings.days.tuesday"),i("cr.components.calendar.strings.days.wednesday"),i("cr.components.calendar.strings.days.thursday"),i("cr.components.calendar.strings.days.friday"),i("cr.components.calendar.strings.days.saturday")],shortDays:[i("cr.components.calendar.strings.shortDays.sunday"),i("cr.components.calendar.strings.shortDays.monday"),i("cr.components.calendar.strings.shortDays.tuesday"),i("cr.components.calendar.strings.shortDays.wednesday"),i("cr.components.calendar.strings.shortDays.thursday"),i("cr.components.calendar.strings.shortDays.friday"),i("cr.components.calendar.strings.shortDays.saturday")],goToToday:i("cr.components.calendar.strings.goToToday"),prevMonthAriaLabel:i("cr.components.calendar.strings.prevMonthAriaLabel"),nextMonthAriaLabel:i("cr.components.calendar.strings.nextMonthAriaLabel"),prevYearAriaLabel:i("cr.components.calendar.strings.prevYearAriaLabel"),nextYearAriaLabel:i("cr.components.calendar.strings.nextYearAriaLabel")};function L(e,t){g?(E(e),w(t)):N(e)}function N(t,n){let{onSelectDate:i}=e;S(t),i&&i(t,n)}let $=r?function(e){D(!T),k(!A),e&&w(!0)}:void 0;function O(){let{today:t=new Date}=e,n=(0,nK.e0)(t,nj.NU.Day,nj.eO.Sunday);N(t,n)}return P().createElement("div",{"data-analytics-id":m,className:(0,W.Z)("ms-DatePicker",n.root),role:"application","aria-label":i("cr.components.calendar.ariaLabelCalendar")},P().createElement("div",{className:(0,W.Z)(n.picker,n.pickerIsOpened,n.pickerIsFocused,A&&n.monthPickerVisible,A&&T&&n.calendarsInline)},P().createElement("div",{className:n.holder,onKeyDown:function(t){switch(t.key){case nZ.s.Enter:case nZ.s.Backspace:t.preventDefault();break;case nZ.s.Escape:e.onDismiss&&e.onDismiss()}}},P().createElement("div",{className:n.frame},P().createElement("div",{className:(0,W.Z)(n.wrap,c&&n.goTodaySpacing)},T&&P().createElement(nz.X,{selectedDate:y,navigatedDate:C,today:s,onSelectDate:N,onNavigateDate:L,onDismiss:e.onDismiss,firstDayOfWeek:o,dateRangeType:a,autoNavigateOnSelection:l,strings:R,onHeaderSelect:$,navigationIcons:u,dateTimeFormatter:p,navigatedDayRef:b,analyticsId:`${m}.dayPicker`}),A&&P().createElement(nW.C,{navigatedDate:C,strings:R,onNavigateDate:L,today:s,highlightCurrentMonth:d,onHeaderSelect:$,navigationIcons:u,dateTimeFormatter:p,navigatedMonthRef:f,analyticsId:`${m}.monthPicker`}),c&&P().createElement("span",{"data-analytics-id":`${m}.todayButton`,role:"button",className:n.goToday,onClick:O,onKeyDown:function(t){t.key===nZ.s.Enter||" "===t.key?(t.preventDefault(),O()):t.key===nZ.s.Tab&&!t.shiftKey&&e.onDismiss&&(t.stopPropagation(),t.preventDefault(),e.onDismiss({lostFocus:!0,focusNext:!0}))},tabIndex:0},R.goToToday))))))}),n1=(0,eJ.withAnalytics)(n0);var n2=n(465139);let n4=/^([\u0030-\u0039]|0?[1-9]|1[0-2])\/(0?[1-9]|[\u0660-\u0669]|[\u06F0-\u06F9]|[1-9]|[12][0-9]|3[01])\/(\d{2}|\u0660[\u0660-\u0669]|\u06F0[\u06F0-\u06F9])$/,n6=e=>{let{disabled:t,label:n,required:i,styles:r,analyticsId:s,initialDate:o,onDateValidityChanged:a,isValueValid:l,showAlertMessage:c,errorFormatMessage:d,errorEmptyMessage:u,ariaLabel:p}=e,m=(0,ep.q)(),{formatDate:h,parseDate:g,getFirstDayOfTheWeek:f}=(0,G.h)(),b=nq(),v=(0,n2.Me)(),y=P().useRef(null),[S,C]=P().useState(null),E=P().useRef(null),[I,w]=P().useState(!1),[A,k]=P().useState(!0),[T,L]=P().useState(""),N=P().useRef(null),$=(0,R.useTheme)(),O=(0,R.useMediaQuery)($.breakpoints.down("sm")),_=v+"-error-message",M=!c||A;void 0!==l&&l!==A&&k(l);let B=P().useCallback((e,t,n=!1)=>new Promise(i=>{setTimeout(()=>{n?i("string"!=typeof e?h(e,t):""):t===eI.ILocaleDateFormat.Short&&"string"==typeof e&&n4.test(e)||t===eI.ILocaleDateFormat.ISO?i(g(e.toString(),t,void 0)):i("")})}),[h,g]);P().useEffect(()=>{let e=O?eI.ILocaleDateFormat.ISO:eI.ILocaleDateFormat.Short;o&&B(o,e,!0).then(e=>{L("string"==typeof e?e:"")})},[o,O,B]),P().useEffect(()=>{null==a||a(A)},[A,a]),P().useEffect(()=>{let e=null;return I&&(e=window.setInterval(()=>{N.current&&N.current.calendarFocus()},300)),()=>{e&&clearInterval(e)}},[I]);let F=null!=u?u:m("cr.components.calendar.validate.empty",{labelName:n||p}),U=null!=d?d:m("cr.components.calendar.validate.invalid",{labelName:n||p});function V(){var e;w(!1),C(null),null===(e=E.current)||void 0===e||e.focus()}let H=""===T?F:U,q=A||c?"":H,j=n4.test(T)?g(T,eI.ILocaleDateFormat.Short):new Date,z=function(){let e;switch(f()){case"mon":e=nj.eO.Monday;break;case"tue":e=nj.eO.Tuesday;break;case"wed":e=nj.eO.Wednesday;break;case"thu":e=nj.eO.Thursday;break;case"fri":e=nj.eO.Friday;break;case"sat":e=nj.eO.Saturday;break;case"sun":e=nj.eO.Sunday;break;default:e=void 0}return e}(),K=M?{}:{"aria-describedby":_};return P().createElement("div",{"data-analytics-id":s,className:(0,W.Z)(b.root,null==r?void 0:r.root),ref:y},P().createElement(D.AnalyticsTextField,{className:(0,W.Z)(b.input,null==r?void 0:r.input),disabled:!!t,label:n,onChange:function(t){let{onChangeDate:n}=e,i=t.target.value;L(i),B(i,O?eI.ILocaleDateFormat.ISO:eI.ILocaleDateFormat.Short).then(e=>{e&&"object"==typeof e&&(e.setHours(0,0,0,0),n(e));let t=!!e;k(t),null==a||a(t)})},helperText:q,error:!A,required:!!i,type:O?"date":"text",value:T,InputProps:O?K:{endAdornment:P().createElement(D.AnalyticsInputAdornment,{id:"date-picker-action",position:"end",disableTypography:!0,analyticsId:`${s}.input.adornment`},P().createElement(D.AnalyticsIconButton,{"aria-label":m("course.announcements.datePicker.dueDate"),disabled:!!t,onClick:()=>{var e;C(y.current),null===(e=null==E?void 0:E.current)||void 0===e||e.focus(),w(!0)},ref:E,analyticsId:`${s}.open.button`},P().createElement(x.Calendar,null))),...K,classes:{root:b.inputAdorment}},inputProps:{className:b.internalInput,"aria-label":null!=p?p:n},analyticsId:`${s}.textfield`}),M?null:P().createElement("div",{className:b.errorMessage,id:_,role:"alert"},P().createElement(x.Attention,null),P().createElement("span",null,H)),(I||"number"==typeof z)&&!O&&P().createElement(D.AnalyticsPopper,{anchorEl:S,className:b.popperContainer,open:I,analyticsId:`${s}.popper`,disablePortal:!0,placement:"top"},P().createElement(D.AnalyticsClickAwayListener,{onClickAway:V,analyticsId:`${s}.clickaway`},P().createElement("div",null,P().createElement(n1,{autoNavigateOnSelection:!0,highlightCurrentMonth:!0,isMonthPickerVisible:!1,onDismiss:V,onSelectDate:function(t){let{onChangeDate:n}=e;B(t,eI.ILocaleDateFormat.Short,!0).then(e=>{n(t),L("string"==typeof e?e:""),k(!0),null==a||a(!0)}),V()},ref:N,showGoToToday:!0,showMonthPickerAsOverlay:!0,value:j,dateTimeFormatter:{formatMonthDayYear:(e,t)=>h(e,eI.ILocaleDateFormat.Full),formatMonthYear:(e,t)=>h(e,eI.ILocaleDateFormat.MonthAndYear),formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:e=>e.getDate().toString(),formatYear:e=>e.getFullYear().toString()},firstDayOfWeek:z,analyticsId:`${s}.calendar`})))))};var n5=n(818964),n3=n(49678),n8=n(688580);let n9=(e,t,n)=>{let[i,r,s]=e;return P().createElement(P().Fragment,null,i,t,r,n,s)},n7='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';(u=I||(I={}))[u.NextElementInList=0]="NextElementInList",u[u.More=1]="More";let ie=(0,T.memo)(({items:e,maxItems:t=e.length,analyticsId:n,canExpand:i=!1,collapseKey:r="global.close",moreKey:s="components.services.localize.items.more.plural"})=>{(t<=0||t>e.length)&&(t=e.length);let o=(0,n3.y)(),a=(0,ep.q)(),[l,c]=(0,T.useState)(!1),d=l?e.length:t,u=(0,n8.t)(),p=(0,T.useRef)(null),m=(0,T.useRef)(null),[h,g]=(0,T.useState)(void 0),f=(0,T.useRef)(-1);if((0,T.useLayoutEffect)(()=>{var e;if(null===p.current||l||(f.current=p.current.querySelectorAll(n7).length-1),p.current&&h===I.NextElementInList){let t=p.current.querySelectorAll(n7).item(f.current);null==t||t.focus(),t||null===(e=m.current)||void 0===e||e.focus()}},[e,l,h]),0===e.length)return null;if(1===e.length)return P().createElement(P().Fragment,null,e[0]);if(2===e.length&&2===t)return n9(u[2],e[0],e[1]);let b=`${n}.items`,v=a(s,{count:e.length-d}),y=i?P().createElement(D.AnalyticsButtonBase,{analyticsId:`${n}.more`,onClick:()=>{c(!0),g(I.NextElementInList)},autoFocus:h===I.More,className:o.button,"aria-expanded":l,"aria-controls":b},v):v;if(1===d)return n9(u[2],e[0],y);let S=n9(u.start,e[0],e[1]);if(e.length>d){for(let t=2;t<d;t++)S=n9(u.middle,S,e[t]);S=n9(u.end,S,y)}else for(let t=2;t<e.length;t++)S=n9(t===e.length-1?u.end:u.middle,S,e[t]);return P().createElement(P().Fragment,null,P().createElement("span",{id:b,ref:p},S),l?P().createElement(D.AnalyticsButtonBase,{analyticsId:`${n}.close`,"aria-expanded":l,"aria-controls":b,onClick:()=>{c(!1),g(I.More)},ref:m,className:(0,W.Z)(o.button,o.close)},a(r)):void 0)});var it=n(124860),ii=n(428046),ir=n(188510);let is=e=>({position:"relative",width:"100%",height:`${e}px`,overflowAnchor:"none"}),io=()=>({left:0,position:"absolute",top:0,width:"100%"}),ia=e=>{var t;return{transform:`translateY(${null!==(t=null==e?void 0:e.start)&&void 0!==t?t:0}px)`}},il=(0,R.makeStyles)(()=>(0,R.createStyles)({root:({totalSize:e})=>({...is(e)}),item:{...io()}})),ic=({children:e,virtualizerRef:t,...n})=>{let i=(0,ir.MG)(n);(0,T.useLayoutEffect)(()=>{if(t)return t.current=i,()=>{t.current=null}},[t,i]);let{startIndex:r,endIndex:s}=i.range,o=i.getTotalSize();return(0,T.useMemo)(()=>e({items:i.getVirtualItems(),virtualizer:i}),[r,s,o,e,i])},id=({children:e,rootProps:t,innerProps:n,virtualizer:i})=>{let r=il({totalSize:i.getTotalSize()});return P().createElement("div",{...t,className:(0,W.Z)(r.root,null==t?void 0:t.className)},P().createElement("div",{...n,className:(0,W.Z)(r.item,null==n?void 0:n.className),style:{...null==n?void 0:n.style,...ia(i.getVirtualItems()[0])}},e))};function iu(e){var t,n;let i="idPrefix"in e?null!==(t=e.buttonId)&&void 0!==t?t:`${e.idPrefix}-button`:e.buttonId,r="idPrefix"in e?null!==(n=e.regionId)&&void 0!==n?n:`${e.idPrefix}-region`:e.regionId;return{button:(0,T.useMemo)(()=>({id:i,"aria-expanded":e.isExpanded,...e.isExpanded?{"aria-controls":r}:{}}),[i,e.isExpanded,r]),region:(0,T.useMemo)(()=>({id:r,"aria-labelledby":i,role:"region"}),[i,r])}}var ip=n(215343),im=n(64191);let ih="@media (prefers-reduced-motion: reduce)",ig={clip:"rect(0 0 0 0)",width:"1px",border:0,height:"1px",margin:"-1px",padding:0,overflow:"hidden",position:"absolute"},ib=(0,R.makeStyles)(()=>(0,R.createStyles)({hideOffScreen:ig})),iv=(0,R.makeStyles)(()=>(0,R.createStyles)({root:{display:"flex",alignItems:"center"}})),iy=e=>{let{analyticsId:t,label:n,minLabel:i,maxLabel:r,value:s,onValueChange:o}=e,a=iv();return P().createElement("div",{className:e.className},P().createElement(D.AnalyticsTypography,{id:t,component:"label",variant:"h4"},n),P().createElement("div",{className:a.root},P().createElement(D.AnalyticsTypography,{component:"span",variant:"h4"},i),P().createElement(D.Slider,{analyticsId:t,value:s,step:e.step,min:e.min,max:e.max,disabled:e.disabled,defaultValue:e.defaultValue,valueLabelDisplay:e.valueLabelDisplay,"aria-labelledby":t,onChange:(e,t)=>{"number"==typeof t&&o(t)}}),P().createElement(D.AnalyticsTypography,{component:"span",variant:"h4"},r)))};(p=w||(w={})).InputPanel="inputPanel",p.ContentPanel="contentPanel",p.PanelFooter="panelFooter";let iS=(0,R.makeStyles)(e=>(0,R.createStyles)({generatedContentLayout:{display:"flex",flexDirection:"column",height:"100%",[e.breakpoints.up("sm")]:{display:"grid",gridTemplateColumns:"360px",gridTemplateRows:"1fr auto",gridTemplateAreas:`
        "${w.InputPanel} ${w.ContentPanel}"
        "${w.InputPanel} ${w.PanelFooter}"
      `}},inputPanelPosition:{borderBottom:`1px solid ${e.palette.border.main}`,[e.breakpoints.up("sm")]:{overflowY:"auto",borderBottom:0,borderRight:`1px solid ${e.palette.border.main}`,gridArea:w.InputPanel}},generatedContentPanelRoot:{display:"flex",flexDirection:"column"},generatedContentPanelFooter:{position:"sticky",bottom:0,[e.breakpoints.up("sm")]:{gridArea:w.PanelFooter}},generatedContentPreviewRoot:{display:"flex",flexDirection:"column",flex:"1 1 auto",[e.breakpoints.up("sm")]:{gridArea:w.ContentPanel}},generatedContentPreviewContent:{flex:"1 1 auto",display:"flex",flexDirection:"column",padding:"32px",[e.breakpoints.up("sm")]:{height:"0",overflowY:"auto"}},generatedContentItem:{marginTop:"15px"},generatingContentProgress:{margin:"auto"}})),iC=(0,R.makeStyles)(e=>(0,R.createStyles)({inputPanelRoot:{display:"flex",flexDirection:"column",padding:"28px",".side-panel-content & .input-panel-header":{fontFamily:e.typography.h2.fontFamily,fontSize:e.typography.h2.fontSize,margin:0}},submitGenerate:{marginRight:"auto"},generateInputRow:{marginTop:"15px"},generateDescriptionWithPicker:{display:"flex",flexDirection:"column",gap:e.spacing(1)}})),iE=(0,R.makeStyles)(e=>(0,R.createStyles)({generatedContentPreviewList:{"& > $generatedContentPreviewItem + $generatedContentPreviewItem":{borderTop:`1px solid ${e.palette.border.main}`,marginTop:"30px",paddingTop:"30px"}},generatedContentPreviewItem:{display:"flex"},generatedContentPreviewItemLabelRoot:{flexGrow:1,alignItems:"start"},generatedContentPreviewItemLabelContent:{flexGrow:1}}));var iI=n(650619);let iw=P().forwardRef(function(e,t){let{disableUntilThisPromiseIsDone:n,...i}=e,r=(0,im.y)(),s=(0,iI.y)(),[o,a]=(0,T.useState)(!!n);return(0,T.useEffect)(()=>{a(!!n),null==n||n.catch(()=>{}).finally(()=>{a(!1)})},[n]),P().createElement(D.AnalyticsCheckbox,{className:(0,W.Z)(r.checkboxMarginFix,s.itemSelection),disabled:n&&o,ref:t,...i})}),iA=P().forwardRef(function(e,t){let{disableUntilThisPromiseIsDone:n,...i}=e,r=(0,iI.y)(),[s,o]=(0,T.useState)(!!n);return(0,T.useEffect)(()=>{o(!!n),null==n||n.catch(()=>{}).finally(()=>{o(!1)})},[n]),P().createElement(D.AnalyticsRadio,{ref:t,...i,className:(0,W.Z)(r.itemSelection,null==i?void 0:i.className),disabled:n&&s||i.disabled})});function ik(e){return{checkedState:Array(e.length).fill(!1)}}let iT=({children:e})=>P().createElement(P().Fragment,null,e),iP=e=>{let{analyticsId:t,generatedItems:n,disableItem:i,renderItem:r,multiple:s,onSelectionChanged:o}=e,a=iE(),[l,c]=(0,T.useReducer)(function(e,t){let i=e.checkedState.map((e,n)=>s?t.index===n?!e:e:t.index===n);if(s){let e=[];i.forEach((t,i)=>{t&&e.push(n[i])}),o(e)}else{let e=n.find((e,t)=>i[t]);e&&o(e)}return{checkedState:i}},n,ik),d=s?iT:D.AnalyticsRadioGroup,u=s?iw:iA;return P().createElement(d,{analyticsId:`${t}.group`,hasCustomLegend:!0},P().createElement("div",{className:a.generatedContentPreviewList},n.map((e,n)=>{let{containerProps:s,selectionInputProps:o,result:d}=r(e,n);return P().createElement("article",{key:e.key,...s,className:(0,W.Z)(a.generatedContentPreviewItem,null==s?void 0:s.className)},P().createElement(D.AnalyticsFormControlLabel,{analyticsId:`${t}.${n}.label`,label:d,classes:{root:a.generatedContentPreviewItemLabelRoot,label:a.generatedContentPreviewItemLabelContent},control:P().createElement(u,{analyticsId:`${t}.${n}.checkbox`,inputProps:o,value:n,checked:!!l.checkedState[n],onChange:()=>c({index:n}),disableUntilThisPromiseIsDone:null==i?void 0:i(e)})}))})))},iD=(0,R.makeStyles)(e=>(0,R.createStyles)({button:{minWidth:"auto",".panel-header &":{padding:e.spacing(1,2)}},startIconCollapsed:{marginRight:0}})),ix=({children:e,title:t,...n})=>t?P().createElement(D.AnalyticsTooltip,{...n,title:t},e):e,iR=({analyticsId:e,className:t,collapse:n,disabledReason:i,onClick:r,text:s})=>{let o=(0,R.useTheme)(),a=iD(),l=(0,R.useMediaQuery)(o.breakpoints.up("lg"))&&!n;return P().createElement(ix,{analyticsId:`${e}.disabledTooltip`,tabIndex:0,title:i},P().createElement("div",{className:t},P().createElement(D.AnalyticsPrimaryButton,{analyticsId:`${e}.button`,className:a.button,classes:{startIcon:l?void 0:a.startIconCollapsed},disabled:!!i,onClick:r,startIcon:P().createElement(x.AutoGenerate,null),title:l?void 0:s,variant:n?"outlined":"contained"},l?s:void 0)))};var iL=n(337486);let iN=(0,R.makeStyles)(e=>({subheader:{fontWeight:e.typography.fontWeightBold}})),i$=({titleText:e,contentText:t,analyticsId:n,rootId:i,cancelButtonText:r,confirmationButtonText:s,subheaderText:o,showCancelButton:a,open:l,exitCallback:c})=>{let d=iN(),u=(0,ep.q)();return T.createElement(t8._X,{analyticsId:`${n}.dialog`,open:null==l||l,onClose:()=>c(),"aria-labelledby":`${i}.dialog.title`,isAlert:!0},T.createElement(D.AnalyticsDialogTitle,{analyticsId:`${n}.dialog.title`,onClose:()=>c(),id:`${i}.dialog.title`,closeLabel:u("global.close")},e),T.createElement(D.AnalyticsDialogContent,{analyticsId:`${n}.dialog.content`},o&&T.createElement(D.AnalyticsTypography,{id:`${i}.dialog.subheader`,variant:"body1",className:d.subheader,gutterBottom:!0},o),T.createElement(D.AnalyticsDialogContentText,{analyticsId:`${n}.dialog.description`,id:`${i}.dialog.description`},t)),T.createElement(D.AnalyticsDialogActions,{analyticsId:`${n}.dialog.events`},!1!==a&&T.createElement(D.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:()=>c()},r||u("global.cancel")),s&&T.createElement(D.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.confirm.button`,onClick:()=>c(!0)},s)))};var iO=n(736873);let iG='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function i_(e){let t=e.nextElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.nextElementSibling;return t instanceof HTMLElement?(e.setAttribute("tabindex","-1"),t):null}function iM(e){let t=e.previousElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.previousElementSibling;return t instanceof HTMLElement?(e.setAttribute("tabindex","-1"),t):null}function iB(e,t){return Array.from(t.querySelectorAll('[role="gridcell"]')).indexOf(e)}function iF(e,t){return e.querySelectorAll('[role="gridcell"]').item(t)}function iU(e,t){let n=e.parentElement;return n&&t?iF(t,iB(e,n)):null}function iV(e){let t=e.parentElement;return t?iU(e,iM(t)):null}function iH(e){return e?e.querySelector(iG)||e:null}function iq(e){e&&(e.setAttribute("tabindex","0"),e.focus())}let ij=({getLocalizedEmptyKey:e,emptyRowIllustration:t,colSpan:n,record:i,loadRows:r,treeViewTableColumns:s,getRowKey:o,canRowExpand:a,analyticsId:l})=>{let c=P().useRef(null),{onKeyDown:d}=function(e){let{isRtl:t}=(0,G.h)();return{onKeyDown:P().useCallback(n=>{var i,r,s,o;let a=e.current;if(!a)return;let l=t()?nZ.s.ArrowLeft:nZ.s.ArrowRight,c=t()?nZ.s.ArrowRight:nZ.s.ArrowLeft,d=document.activeElement,u=(null==d?void 0:d.getAttribute("role"))==="row",p=function(e){let t=e;for(;null!==t&&"gridcell"!==t.getAttribute("role");)t=t.parentElement;return t}(d),m=(null==p?void 0:p.getAttribute("role"))==="gridcell",h=null===(i=null==a?void 0:a.closest("table"))||void 0===i?void 0:i.querySelector("thead tr"),g=null!==(r=null==a?void 0:a.querySelectorAll('[role="row"]'))&&void 0!==r?r:[],f=g[0],b=g[g.length-1],v=function(e){let t=e;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.parentElement;return t}(d);switch(n.key){case nZ.s.ArrowDown:u?iq(i_(d)):m&&(iq(iH(function(e){let t=e.parentElement;return t?iU(e,i_(t)):null}(p))),n.stopPropagation());return;case nZ.s.ArrowUp:if(u){let e=iM(d);e?iq(e):h&&(null===(s=iH(h.firstElementChild))||void 0===s||s.focus(),n.stopPropagation())}else if(m){if(iH(iV(p)))iq(iH(iV(p)));else if(v&&h){let e=iB(p,v);null===(o=iH(h.querySelectorAll("th").item(e)))||void 0===o||o.focus()}n.stopPropagation()}return;case l:if(u)"false"===d.getAttribute("aria-expanded")?d.click():iq(iH(null==d?void 0:d.firstElementChild));else if(m&&v){let e=iB(p,v);null==d||d.setAttribute("tabindex","-1"),iq(iH(iF(v,e+1)))}n.stopPropagation();return;case c:if(u){if("true"===d.getAttribute("aria-expanded"))d.click();else{let e=d.getAttribute("aria-level"),t=null!==e?parseInt(e,10):NaN;if(!Number.isNaN(t)&&t>1){let t=d.previousElementSibling;for(;null!==t&&t.getAttribute("aria-level")===e;)t=t.previousElementSibling;iq(t instanceof HTMLElement?t:null)}}}else if(m&&v){let e=iB(p,v);0===e?(null==d||d.setAttribute("tabindex","-1"),iq(p.parentElement)):(null==d||d.setAttribute("tabindex","-1"),iq(iH(iF(v,e-1))))}n.stopPropagation();return;case nZ.s.Home:u?(iq(f),n.preventDefault()):m&&v&&(n.ctrlKey?iq(iF(f,iB(p,v))):iq(null==v?void 0:v.querySelector('[role="gridcell"]')),n.preventDefault());return;case nZ.s.End:if(u)iq(b),n.preventDefault();else if(m){let e=p.parentElement;if(e){if(n.ctrlKey)iq(iF(b,iB(p,e))),n.preventDefault();else{let t=e.querySelectorAll('[role="gridcell"]');iq(t[t.length-1]),n.preventDefault()}}}return;case nZ.s.Tab:v&&(v.setAttribute("tabindex","0"),v.querySelectorAll(iG).forEach(e=>e.setAttribute("tabindex","0")))}},[e,t])}}(c),u={getLocalizedEmptyKey:e,record:i,emptyRowIllustration:t,colSpan:n,loadRows:r,canRowExpand:a,getRowKey:o,level:0,lastItemOnLevel:!1,treeViewTableColumns:s,analyticsId:`${l}.tableBody.tableRowContainer`};return P().createElement(D.AnalyticsTableBody,{ref:c,onKeyDown:d,analyticsId:`${l}.tableBody`},P().createElement(iO.G,{...u}))};var iz=n(610710);let iW=(0,R.makeStyles)(e=>({cell:{backgroundColor:e.palette.background.default,borderTop:"none",padding:0},sticky:{position:"sticky",top:0,zIndex:2,boxShadow:`0px 1px 0px ${e.palette.background.paper},
                  0px 5px 0px ${e.palette.background.paper}`}})),iK=({analyticsId:e,columnId:t,sortable:n,ContentHeader:i,stickyHeaders:r,hideHeaderText:s,colIndex:o,additionalClasses:a})=>{let l=iW(),c=`${e}.tableCell.${t}`;return n?T.createElement(iz.Y,{id:`treeViewTable_header_${t}`,analyticsId:`${c}.sortable`,columnId:t,tableCellProps:{role:void 0,className:(0,W.Z)(l.cell,{[l.sticky]:r},a)}},T.createElement(i,{analyticsId:`${c}.sortable`})):T.createElement(D.AnalyticsTableCell,{analyticsId:c,className:(0,W.Z)(l.cell,{[l.sticky]:r},a),tabIndex:-1},!s&&T.createElement(i,{analyticsId:c,tabIndex:0===o?0:-1}))},iZ=({treeViewTableColumns:e,analyticsId:t,stickyHeaders:n})=>{let i=P().useRef(null),{onKeyDown:r}={onKeyDown:P().useCallback(e=>{var t;let n=i.current;if(!n)return;let r=document.activeElement,s=null===(t=null==n?void 0:n.closest("table"))||void 0===t?void 0:t.querySelector("tbody");if(e.key===nZ.s.ArrowDown){e.preventDefault();let t=null==s?void 0:s.firstElementChild;r&&t&&t.focus(),e.stopPropagation()}},[i])};return P().createElement(D.AnalyticsTableHead,{ref:i,onKeyDown:r,analyticsId:`${t}.tableHead`},P().createElement(D.AnalyticsTableRow,{analyticsId:`${t}.tableHead.tableRow`},e.getColumnsData(e.defaultHeaders).map(({key:e,renderHeader:i,hideHeaderText:r,sortable:s,additionalClasses:o},a)=>P().createElement(iK,{key:e,columnId:e,ContentHeader:i,hideHeaderText:r,stickyHeaders:n,sortable:s,analyticsId:`${t}.tableHead.tableRow.tableHeaderCell`,colIndex:a,additionalClasses:o}))))},iQ=(0,R.makeStyles)(()=>({stickyTableHeaders:{borderCollapse:"separate"}})),iJ=({id:e,ariaLabel:t,stickyHeaders:n,analyticsId:i,getLocalizedEmptyKey:r,emptyRowIllustration:s,colSpan:o,record:a,treeViewTableColumns:l,loadRows:c,getRowKey:d,canRowExpand:u,initialSortColumnId:p,initialSortDirection:m,getAriaSortMessage:h,onSortChanged:g})=>{let f=iQ();void 0===n&&(n=!0);let b={analyticsId:`${i}.sortableTable.tableBody`,getLocalizedEmptyKey:r,emptyRowIllustration:s,colSpan:o,record:a,loadRows:c,treeViewTableColumns:l,getRowKey:d,canRowExpand:u};return P().createElement(D.AnalyticsSortableTable,{id:e,analyticsId:`${i}.SortableTable`,tableProps:{role:"treegrid","aria-readonly":void 0,"aria-label":t,className:(0,W.Z)({[f.stickyTableHeaders]:n})},getAriaSortMessage:h,initialSortColumnId:p,initialSortDirection:m,onSortChanged:g},P().createElement(iZ,{analyticsId:`${i}.SortableTable.TableHeader`,treeViewTableColumns:l,stickyHeaders:n}),P().createElement(ij,{...b}))},iY=(0,R.makeStyles)(e=>(0,R.createStyles)({root:{borderBottom:`1px solid ${e.palette.border.main}`,[e.breakpoints.only("xs")]:{margin:"0 14px"}},navigationList:{paddingLeft:0,[e.breakpoints.up("md")]:{paddingLeft:"16px"}}})),iX=(e,t)=>e.indexOf(t)>=0,i0=e=>{let t=(0,ep.q)(),n=iY(),i=e.currentRouteName,r=`${e.analyticsId}.navigation.list`;return T.createElement(D.AnalyticsNavigationListScrollWrapper,{className:(0,W.Z)(n.root,"js-course-navigation"),scrollLeftButtonAriaLabel:t("cr.components.courseNavigation.scrollLeftButtonAriaLabel"),scrollRightButtonAriaLabel:t("cr.components.courseNavigation.scrollRightButtonAriaLabel"),analyticsId:`${r}.scroll.wrapper`},T.createElement(D.AnalyticsNavigationList,{className:n.navigationList,navTagAriaLabel:e.ariaLabel,orientation:"horizontal",analyticsId:r},e.navigationListItems.map(t=>{var n,r;return T.createElement(D.AnalyticsNavigationListItem,{href:null!==(n=t.href)&&void 0!==n?n:"javascript:void(0)",active:iX(i,t.state)&&(!t.view||t.view===e.view),analyticsId:t.analyticsId,key:`${t.state}.${null!==(r=t.view)&&void 0!==r?r:"none"}`,onClick:t.onClick},T.createElement(D.AnalyticsListItemText,{analyticsId:`${t.analyticsId}.text`},T.createElement(D.AnalyticsTypography,{component:"span",variant:"subtitle2"},t.title)))})))},i1=(0,R.makeStyles)(e=>(0,R.createStyles)({icon:{minHeight:"30px",minWidth:"30px",borderRadius:"50%"}}));(m=A||(A={})).Unavailable="Unavailable",m.Unread="Unread",m.Read="Read";let i2=e=>{switch(e){case A.Read:return{StateIcon:x.Complete,ariaChecked:"true"};case A.Unread:return{StateIcon:x.Circle,ariaChecked:"false"};default:return{StateIcon:x.LockCircle,ariaChecked:"mixed"}}},i4=e=>{let{status:t,ariaLabel:n,analyticsId:i,iconStyle:r,onClick:s,tooltipText:o}=e,{StateIcon:a,ariaChecked:l}=i2(t),c=i1(e);return T.createElement(D.AnalyticsTooltip,{analyticsId:`${i}.tooltip`,title:o,placement:"top",PopperProps:{style:{zIndex:1000100}}},T.createElement(D.AnalyticsIconButton,{"aria-disabled":t===A.Unavailable,"aria-label":n,className:c.icon,analyticsId:`${i}.checkbox`,onClick:s,role:"checkbox","aria-checked":l},T.createElement(a,{className:r})))};var i6=n(708537)},270850:function(e,t,n){"use strict";function i(e){var t,n;let i=e.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(null!==(t=window.innerHeight)&&void 0!==t?t:document.documentElement.clientHeight)&&i.right<=(null!==(n=window.innerWidth)&&void 0!==n?n:document.documentElement.clientWidth)}function r(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(e){let t=e.getAttribute("tabindex");e.setAttribute("tabindex","-1"),e.focus({preventScroll:!0}),t&&e.setAttribute("tabindex",t),i(e)||e.scrollIntoView({behavior:"smooth"})}n.d(t,{Lt:function(){return a},PZ:function(){return i},bx:function(){return s},fw:function(){return o},hD:function(){return l},hr:function(){return r}});let o=(e,t,n=0)=>e.map(e=>({value:`${e}`,label:t(e+n)})),a=e=>Math.max(4e3,Math.ceil(e.length/20*1e3));function l(e,t,n){return"function"==typeof e.closest?e.closest(`a, button, .${t}, .${n}`):null}},298433:function(e,t,n){"use strict";var i,r;n.d(t,{A:function(){return s},c:function(){return i}}),(r=i||(i={})).Aborted="Aborted",r.Unknown="Unknown",r.API="API";class s{constructor(e){this._type=e}get errorType(){return this._type}}},482532:function(e,t,n){"use strict";n.r(t),n.d(t,{HttpMethod:function(){return b.w},HttpStatus:function(){return f.o},ProgressObservableImpl:function(){return m},XhrRequestError:function(){return d.A},XhrRequestErrorType:function(){return d.c},fetchApiResult:function(){return a},fetchJsonApiResult:function(){return l},fetchTextApiResult:function(){return c},getCookie:function(){return s.ej},getXhrCookie:function(){return s.mC},mergeCookies:function(){return s.dn},processJsonResponse:function(){return o.F},processJsonString:function(){return o.b},requestJsonApiResultWithProgress:function(){return g},urlManager:function(){return i}});var i=new class{constructor(){this.baseUrl=""}setBaseUrl(e){this.baseUrl=e}getUrl(e){if(!this.baseUrl)throw Error("UrlManager cannot build a URL without first being initialized with a base URL!");return new URL(null!=e?e:"",this.baseUrl).toString()}},r=n(99035),s=n(416599),o=n(458874);async function a(e){var t,n;let i;await e.validate();let o=e.toRequest();try{i=await fetch(o),r.gQ.logResponse(i)}catch(e){throw r.gQ.logResponse((0,r.WS)(o,e)),e}let a=e.getSession();if((null==a?void 0:a.cookies)!=null){let e=null!==(t=(0,s.ej)(i))&&void 0!==t?t:"";a.cookies=a.cookies?(0,s.dn)(e,null!==(n=a.cookies)&&void 0!==n?n:""):e}return i.ok||await e.failed(i),i}async function l(e){var t;let n=await a(e),i=null!==(t=n.headers.get("Content-Type"))&&void 0!==t?t:"";return i.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${i}`,JSON.stringify(e)),(0,o.F)(n)}async function c(e){return(await a(e)).text()}var d=n(784019);class u extends d.A{constructor(){super(d.c.Aborted)}}class p{setXhrRequest(e){this.xhr=e}abort(){var e;null===(e=this.xhr)||void 0===e||e.abort()}}class m{constructor(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);t>=0&&this.subscribers.splice(t)}}clear(){this.subscribers=[]}push(e){this.subscribers.forEach(t=>{t(e)})}}async function h(e,t,n){await e.validate();let i=e.toXhr();return n.setXhrRequest(i),new Promise((n,r)=>{i.upload.addEventListener("progress",e=>{t.push({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})}),i.addEventListener("load",()=>{var o,a;let l=e.getSession();if((null==l?void 0:l.cookies)!=null){let e=null!==(o=(0,s.mC)(i))&&void 0!==o?o:"";l.cookies=l.cookies?(0,s.dn)(e,null!==(a=l.cookies)&&void 0!==a?a:""):e}t.clear(),(i.status<200||i.status>=300)&&r(e.xhrFailed(i.response)),n({response:i.response,request:i})}),i.addEventListener("abort",()=>{t.clear(),r(new u)}),i.upload.addEventListener("error",()=>{t.clear(),r(e.xhrFailed())}),i.send(e.xhrBody())})}function g(e){let t=new m,n=new p;return{result:h(e,t,n).then(({response:t,request:n})=>{var i;let r=null!==(i=n.getResponseHeader("Content-Type"))&&void 0!==i?i:"";return r.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${r}`,e.toString()),(0,o.b)(t)}),progress:t,abort:n}}var f=n(932373),b=n(281363)},462180:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});class i{static none(){return new i}constructor(e,t={}){this.selectedFilter=e,this.overrides=t}get hasFilterSelection(){return void 0!==this.selectedFilter}get filterSelection(){return this.selectedFilter}get hasUserOverrides(){return this.numberOfUserOverrides>0}get selectedUserOverrides(){return Object.keys(this.overrides).filter(e=>this.overrides[e])}get numberOfUserOverrides(){return Object.keys(this.overrides).length}isUserSelected(e){return this.hasFilterSelection&&!this.hasUserOverrides||this.hasFilterSelection&&!1!==this.overrides[e]||!this.hasFilterSelection&&!0===this.overrides[e]}withUserSelection(e,t){let n={...this.overrides};return this.hasFilterSelection?t?delete n[e]:n[e]=!1:t?n[e]=!0:delete n[e],new i(this.selectedFilter,n)}withFilterSelection(e){return new i(e,{})}hasAnySelectedUsers(e){return this.numberOfSelectedUsers(e)>0}numberOfSelectedUsers(e){return this.hasFilterSelection?e-this.numberOfUserOverrides:this.numberOfUserOverrides}}},64555:function(e,t,n){"use strict";n.d(t,{p:function(){return s},s:function(){return r}});var i=n(280433);function r(e){return{type:i.Z,content:e}}function s(e){return{type:i.z,content:e}}},280433:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},z:function(){return r}});let i="ui.course.content.opened",r="ui.course.content.closed"},866176:function(e,t,n){"use strict";n.d(t,{D4:function(){return X},GJ:function(){return c},Bk:function(){return et},xg:function(){return eO},Oc:function(){return er},Qh:function(){return d},p7:function(){return m.p},sh:function(){return m.s},w4:function(){return g.w},Me:function(){return f.M},vQ:function(){return h},WJ:function(){return eG}});var i,r,s,o,a,l,c,d,u,p,m=n(64555),h={autoContentReviewStateSaga:n(772941).Z},g=n(123900),f=n(355301),b=n(202784),v=n.n(b),y=n(847969),S=n(410628),C=n(906277),E=n(327355);let I=(0,E.makeStyles)(e=>(0,E.createStyles)({root:{backgroundColor:e.palette.background.paper,padding:"28px 32px",borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px"},chart:{height:"25px",display:"grid",margin:"0 -2px 3px"},chartLine:{border:"2px solid #FFF",height:"19px",borderRadius:"10px",gridColumn:1,gridRow:1},chartLineUnopened:{backgroundColor:e.palette.secondary.main,width:"100%"},chartLineStarted:{backgroundColor:e.palette.primary.main},chartLineCompleted:{backgroundColor:e.palette.brand.main},legend:{display:"flex",justifyContent:"space-between"},legendLabels:{display:"flex",listStyle:"none",flexDirection:"column",margin:0,[e.breakpoints.up("sm")]:{flexDirection:"row"}},legendLabel:{margin:"2px 0",display:"inline-flex",alignItems:"center",[e.breakpoints.up("sm")]:{margin:0,padding:"0 10px",borderRight:`1px solid ${e.palette.border.main}`,"&:first-child":{paddingLeft:0},"&:last-child":{borderRight:0}}},legendBubble:{width:"12px",height:"12px",display:"inline-block",borderRadius:"6px",marginRight:"6px"},legendBubbleUnopened:{backgroundColor:e.palette.secondary.main},legendBubbleStarted:{backgroundColor:e.palette.primary.main},legendBubbleCompleted:{backgroundColor:e.palette.brand.main}}));var w=n(259197),A=n(986709),k=n(592493);let T=e=>{let t=(0,k.pJ)(t=>w.Ys.contentReviewState.getContentReviewStateUsersReportStates(t,e.contentId)),n=(0,k.Lx)();return((0,b.useEffect)(()=>{null!=t&&t.isLoading||null!=t&&t.states||n(w.Nwg.contentReviewState.fetchContentReviewStateUsersReportStates(e))},[n,null==t?void 0:t.isLoading,null==t?void 0:t.states]),null==t?void 0:t.states)?null==t?void 0:t.states:{[A.aql.None]:0,[A.aql.Unlocked]:0,[A.aql.Started]:0,[A.aql.Completed]:0}},P=e=>{let{analyticsId:t,courseId:n,contentId:i,requiresManualMarking:r}=e,s=I(e),o=(0,S.q)(),a=T({courseId:n,contentId:i}),l=(0,k.gH)("courseContent","courseContent.organization"),{completedStyle:c,startedStyle:d,unopenedCount:u,startedCount:p,completedCount:m,totalCount:h}=v().useMemo(()=>{let e=a.Completed,t=a.Started,n=a.Unlocked+a.None,i=e+t+n,r=100*e/i;return{completedStyle:{width:`${r}%`},startedStyle:{width:`${r+100*t/i}%`},unopenedCount:n,startedCount:t,completedCount:e,totalCount:i}},[a]),g=r?"courseContent.contentProgress.breakdown.markedComplete":"courseContent.contentProgress.breakdown.completed";return v().createElement("div",{className:s.root},v().createElement("h2",null,o("courseContent.contentProgress.breakdown.progressSummary")),v().createElement("div",{className:s.chart,"aria-hidden":"true"},v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.unopened`,title:o("courseContent.contentProgress.breakdown.unopened",{count:u}),placement:"bottom-end"},v().createElement("div",{className:(0,C.Z)(s.chartLine,s.chartLineUnopened),"data-testid":"content-progress-breakdown-unopened"})),p>0?v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.started`,title:o("courseContent.contentProgress.breakdown.started",{count:p}),placement:"bottom-end"},v().createElement("div",{className:(0,C.Z)(s.chartLine,s.chartLineStarted),style:d,"data-testid":"content-progress-breakdown-started"})):void 0,m>0?v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.completed`,title:o(g,{count:m}),placement:"bottom-end"},v().createElement("div",{className:(0,C.Z)(s.chartLine,s.chartLineCompleted),style:c,"data-testid":"content-progress-breakdown-completed"})):void 0),v().createElement("div",{className:s.legend},v().createElement("ul",{className:s.legendLabels},v().createElement("li",{className:s.legendLabel},v().createElement("span",{className:(0,C.Z)([s.legendBubble,s.legendBubbleCompleted]),"aria-hidden":"true"}),o(g,{count:m})),v().createElement("li",{className:s.legendLabel},v().createElement("span",{className:(0,C.Z)([s.legendBubble,s.legendBubbleStarted]),"aria-hidden":"true"}),o("courseContent.contentProgress.breakdown.started",{count:p})),v().createElement("li",{className:s.legendLabel},v().createElement("span",{className:(0,C.Z)([s.legendBubble,s.legendBubbleUnopened]),"aria-hidden":"true"}),o("courseContent.contentProgress.breakdown.unopened",{count:u}))),v().createElement("span",null,o(l("courseContent.contentProgress.breakdown.total"),{count:h}))))},D=(0,E.makeStyles)(e=>(0,E.createStyles)({tableHead:{"& th":{backgroundColor:"unset",borderTop:"0"}},tableHeadAllStudents:{width:"48px"},tableHeadStudentName:{fontWeight:e.typography.fontWeightBold,margin:"0 10px"},tableEmptyRow:{borderBottom:"0"},username:{display:"flex",alignContent:"center","& div:nth-child(2)":{justifyContent:"center"}},usernameAvatar:{margin:"0 10px"}}));var x=n(755755),R=n(579633);let L=(0,E.makeStyles)(e=>(0,E.createStyles)({row:{"&:hover":{backgroundColor:e.palette.background.paper}},checkboxCell:{verticalAlign:"top",[e.breakpoints.up("sm")]:{verticalAlign:"middle"}},usernameCell:{display:"flex",flexDirection:"column","& > span > div:last-child":{[e.breakpoints.down("md")]:{maxWidth:"calc(100% - 50px)"}}},username:{display:"inline-flex",alignItems:"center"},usernameAvatar:{marginInlineEnd:"10px"},usernameTextContainer:{display:"flex",flexDirection:"column"},usernameText:e.typography.subtitle2,pronounsText:{fontWeight:e.typography.overline.fontWeight,color:e.palette.text.secondary},inlineStatus:{display:"flex",flexDirection:"column",marginInlineStart:"50px"}}));var N=n(35302);let $=e=>{let t=(0,k.pJ)(t=>w.Ys.contentReviewState.getContentReviewStateUsersPermissions(t,e));return null!=t?t:{viewDueDateException:!1,viewTimeLimitException:!1}};var O=n(563060),G=n(394229);let _=e=>{var t,n,i,r,s,o;let{analyticsId:a,onSelection:l,row:c,selectedItems:d,requiresManualMarking:u}=e,p=(0,S.q)(),{formatDatetime:m}=(0,x.h)(),h=(0,E.useTheme)(),g=(0,E.useMediaQuery)(h.breakpoints.down("xs")),f=L(),b=(0,k.Gd)(null===(t=c.status)||void 0===t?void 0:t.state,u),C=$(c.contentId),I=w.LPT.hasAccommodations(c.courseMembership,C),A=d.isUserSelected(c.courseMembership.userId),T=null!==(i=null===(n=c.status)||void 0===n?void 0:n.reviewedDate)&&void 0!==i?i:null===(r=c.status)||void 0===r?void 0:r.startedDate,P=(0,O.Vl)({userId:c.courseMembership.userId,membershipId:c.courseMembership.id,studentTabId:"progress"}),D=(0,O.Ls)(P);return v().createElement(y.AnalyticsTableRow,{analyticsId:`${a}.row`,key:`progress-student-${c.courseMembership.userId}`,className:f.row},v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,className:f.checkboxCell},v().createElement(y.AnalyticsCheckbox,{analyticsId:`${a}.row.checkbox`,checked:A,onClick:()=>l({type:"user",userId:c.courseMembership.userId},!A),inputProps:{"aria-labelledby":`row-${c.courseMembership.userId}`}})),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,className:f.usernameCell},v().createElement("span",{className:f.username,id:`row-${c.courseMembership.userId}`},v().createElement(G.G,{size:"small",imgProps:{alt:"",src:null===(o=null===(s=c.courseMembership.user)||void 0===s?void 0:s.avatar)||void 0===o?void 0:o.permanentUrl},className:f.usernameAvatar}),v().createElement(N.xu,{analyticsId:`${a}.userNameTextContainer`,user:c.courseMembership.user,format:R.ILocaleUsernameFormat.Short,link:D,ariaHidden:!1,showPronouns:!0,showPronunciation:!0,showAccommodation:I,userNameStyles:f.usernameText,pronounsStyles:f.pronounsText,onClick:()=>{O.Nd.goPeekState(P)}})),g&&v().createElement("span",{className:f.inlineStatus},v().createElement("span",{dangerouslySetInnerHTML:{__html:p("courseContent.contentProgress.progressStatusValue",{statusLabel:b})}}),T&&v().createElement("span",null,p("courseContent.contentProgress.onDatetime",{datetime:T})))),!g&&v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell.name`,tabIndex:-1},v().createElement(y.AnalyticsTypography,null,b),T?v().createElement(y.AnalyticsTypography,{variant:"body2"},m(T,R.ILocaleDatetimeFormat.Short)):void 0))};var M=n(88818),B=n(610710),F=n(369555),U=n.n(F);let V=e=>{let{analyticsId:t,onSelection:n,onSortChanged:i,selectedItems:r,data:s,requiresManualMarking:o}=e,a=D(),l=(0,S.q)(),c=(0,k.gH)("courseContent","courseContent.organization"),d=(0,E.useTheme)(),u=(0,E.useMediaQuery)(d.breakpoints.down("xs")),p=r.hasFilterSelection&&!r.hasUserOverrides;return v().createElement(y.AnalyticsSortableTable,{analyticsId:`${t}.table`,getAriaSortMessage:(e,t)=>{let n=l(`courseContent.contentProgress.table.columns.${e}`);return l(`courseContent.contentProgress.table.ariaSortMessage.${t}`,{columnName:n})},id:"content-progress-table",initialSortColumnId:"studentName",initialSortDirection:"asc",onSortChanged:i},v().createElement(y.AnalyticsTableHead,{analyticsId:`${t}.table.head`,className:a.tableHead},v().createElement(y.AnalyticsTableRow,{analyticsId:`${t}.table.row`},v().createElement(y.AnalyticsTableCell,{analyticsId:`${t}.table.cell.status`,id:"content-progress-table-header-checkbox",className:a.tableHeadAllStudents},v().createElement(y.AnalyticsTooltip,{analyticsId:`${t}.tooltip`,title:p?l("courseContent.contentProgress.deselectAll"):l("courseContent.contentProgress.selectAll")},v().createElement(y.AnalyticsCheckbox,{analyticsId:`${t}.header.checkbox`,disabled:!s||0===s.length,checked:p,indeterminate:r.hasUserOverrides,onClick:()=>n({type:"header"},!p),inputProps:{"aria-label":p?l("courseContent.contentProgress.deselectAll"):l("courseContent.contentProgress.selectAll")},"data-analytics-id":`${t}.header.checkbox`}))),v().createElement(B.Y,{analyticsId:`${t}.name.headerCell`,id:"content-progress-table-header-name",columnId:"studentName"},v().createElement("span",{className:a.tableHeadStudentName},l(c("courseContent.contentProgress.studentName")))),!u&&v().createElement(B.Y,{analyticsId:`${t}.progress.headerCell`,id:"content-progress-table-header-progress",columnId:"progress"},l("courseContent.contentProgress.progressStatus")))),v().createElement(y.AnalyticsTableBody,{analyticsId:`${t}.body`},null==s?void 0:s.map(e=>{var i;return v().createElement(_,{row:e,analyticsId:`${t}.row`,key:null===(i=e.courseMembership.user)||void 0===i?void 0:i.id,selectedItems:r,onSelection:n,requiresManualMarking:o})}),null!==s&&0===s.length?v().createElement(y.AnalyticsTableRow,{analyticsId:`${t}.emptyRow`},v().createElement(y.AnalyticsTableCell,{colSpan:3,analyticsId:`${t}.emptyCell`,className:a.tableEmptyRow},v().createElement(M.R22,{illustration:U(),prominentText:l("courseContent.contentProgress.table.noResults.noResultsFound"),subText:l("courseContent.contentProgress.table.noResults.tryAgain")}))):void 0))};var H=n(276635);let q=e=>(0,k.pJ)(t=>w.Ys.contentReviewState.getContentReviewStateUsersStatusByQuery(t,e)),j=e=>(0,k.pJ)(t=>w.Ys.contentReviewState.getContentReviewStateUsersByQuery(t,e)),z=e=>{let t=(0,k.Lx)(),n=q(e);(0,b.useEffect)(()=>{null!=n&&n.isValid||null!=n&&n.isLoading||t(w.Nwg.contentReviewState.fetchContentReviewUserStatesByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let i=j(e);return n&&n.isValid&&!n.isLoading&&n.paging?{results:i,paging:n.paging}:null},W=(0,E.makeStyles)(e=>(0,E.createStyles)({listView:{margin:"0 -30px"},viewFilter:{display:"flex",flexDirection:"column",padding:"15px 30px",[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"}},viewFilterOptions:{display:"flex",flexDirection:"column",alignItems:"stretch",[e.breakpoints.up("sm")]:{flexDirection:"row",alignItems:"center"}},sendMessageButton:{width:"100%",[e.breakpoints.up("sm")]:{width:"unset"}},searchTextControl:{[e.breakpoints.up("sm")]:{width:"275px"}},stateFilter:{margin:"10px 0",[e.breakpoints.up("sm")]:{margin:"0 10px"}},selectedStudents:{fontWeight:e.typography.fontWeightBold},selectedStudentsContainer:{backgroundColor:e.palette.background.paper,borderBottom:`1px solid ${e.palette.background.b5}`,borderTop:`1px solid ${e.palette.background.b5}`,padding:"8px 0",textAlign:"center"},listContainer:{padding:"0 30px",[e.breakpoints.down("md")]:{"& table":{tableLayout:"fixed"}}},pagingBottom:{display:"flex",justifyContent:"center",margin:"10px 0",[e.breakpoints.up("md")]:{justifyContent:"flex-end"}}}));(i=l||(l={})).All="All",i.Unopened="Unopened",i.Started="Started",i.Completed="Completed";let K=v().memo(e=>{let{analyticsId:t,className:n,onChange:i,selectedState:r,requiresManualMarking:s}=e,o=(0,S.q)(),a=(0,k.Gd)(A.aql.None,s),c=(0,k.Gd)(A.aql.Started,s),d=(0,k.Gd)(A.aql.Completed,s),u=[{value:l.All,label:o("courseContent.contentProgress.status.all")},{value:l.Unopened,label:a},{value:l.Started,label:c},{value:l.Completed,label:d}];return v().createElement(y.AnalyticsTextField,{floatingLabel:!0,style:{minWidth:"160px"},select:!0,className:n,id:"content-progress-view-status-filter",label:o("courseContent.contentProgress.progressStatus"),value:r,onChange:e=>i(e.target.value),analyticsId:`${t}.text`},u.map(e=>v().createElement(y.AnalyticsMenuItem,{button:!0,key:e.value,value:e.value,analyticsId:`${t}.option.${e.value}`,"data-analytics-id":`${t}.option.${e.value}`},e.label)))});var Z=n(462180);let Q=()=>{let e=(0,k.Lx)();return{messageContentProgress:(0,b.useCallback)((t,n,i,r)=>{if(!i.hasAnySelectedUsers(r))return Promise.resolve({recipientIds:[]});let s=i.filterSelection;if(!s)return Promise.resolve({recipientIds:i.selectedUserOverrides});let o=[];for(let i=0;i<r;i+=5e3)o.push(e(w.Nwg.contentReviewState.fetchContentReviewUserStatesByQuery({courseId:t,contentId:n,filter:s,paging:{offset:i,limit:5e3},fields:["courseMembership.userId"]})));return Promise.all(o).then(e=>{let t=[];return e.forEach(e=>{e.data.results.forEach(e=>{i.isUserSelected(e.courseMembership.userId)&&t.push(e.courseMembership.userId)})}),{recipientIds:t}})},[e])}},J=e=>{var t,n;let{analyticsId:i,courseId:r,contentId:s,requiresManualMarking:o=!0}=e,a=W(),c=(0,S.q)(),d=(0,k.gH)("courseContent","courseContent.organization"),{messageContentProgress:u}=Q(),[p,m]=v().useState(""),[h,g]=v().useState(l.All),[f,b]=v().useState(0),[C,E]=v().useState(Z.i.none()),[I,T]=v().useState([{field:w.ZNX.FamilyName,direction:A.SrV.Ascending}]),D={courseId:r,contentId:s,sort:I,paging:{offset:25*f,limit:25},filter:{searchString:p,state:function(e){switch(e){case l.All:return[];case l.Unopened:return[A.aql.None,A.aql.Unlocked];case l.Started:return[A.aql.Started];case l.Completed:return[A.aql.Completed]}}(h)}},x=z(D),R=(null==x?void 0:x.paging.count)!==void 0?Math.ceil(x.paging.count/25):void 0,L=null!==(t=null==x?void 0:x.paging.count)&&void 0!==t?t:0,N=v().useCallback((0,H.debounce)(e=>{b(0),m(e),E(Z.i.none())},250),[]),$=v().useCallback(e=>{b(0),g(e),E(Z.i.none())},[]),G=e=>{e?E(C.withFilterSelection(D.filter)):E(Z.i.none())},_=(e,t)=>{E(C.withUserSelection(e.userId,t))},B=v().useCallback((e,t)=>{"header"===e.type?G(t):_(e,t)},[C,G,_,E]),F=v().useCallback(e=>e.sortDirection?(T([{direction:"desc"===e.sortDirection?A.SrV.Descending:A.SrV.Ascending,field:"studentName"===e.sortColumnId?w.ZNX.FamilyName:w.ZNX.LastStateChange}]),!0):(T([{direction:A.SrV.Ascending,field:w.ZNX.FamilyName}]),{columnId:"studentName",sortDirection:A.SrV.Ascending}),[T]),U=v().useMemo(()=>({fullWidth:!1,className:a.searchTextControl}),[a]);return v().createElement("div",{className:"react-container"},v().createElement(P,{analyticsId:`${i}.breakdown`,courseId:r,contentId:s,requiresManualMarking:o}),v().createElement("div",{className:a.listView},v().createElement("div",{className:a.viewFilter},v().createElement("div",{className:a.viewFilterOptions},v().createElement(M._Wk,{inputId:"content-progress-view-name-filter",analyticsId:`${i}.filter.name`,label:c(d("courseContent.contentProgress.searchLabel")),TextFieldProps:U,onChange:N}),v().createElement(K,{onChange:$,selectedState:h,className:a.stateFilter,requiresManualMarking:o,analyticsId:`${i}.filter.state`})),v().createElement("div",null,v().createElement(y.AnalyticsOutlineButton,{analyticsId:`${i}.message`,"aria-label":c("courseContent.contentProgress.message"),className:a.sendMessageButton,onClick:()=>{var e;null===(e=u(r,s,C,L))||void 0===e||e.then(({recipientIds:e})=>{O.Nd.goPeekState((0,O.k9)({courseId:r,recipientIds:e.join(","),conversationPerRecipient:!0}))})}},c("courseContent.contentProgress.message")))),C.hasAnySelectedUsers(L)?v().createElement("div",{className:a.selectedStudentsContainer,dangerouslySetInnerHTML:{__html:c(d("courseContent.contentProgress.selected.count"),{count:C.numberOfSelectedUsers(L)})}}):void 0,v().createElement("div",{className:a.listContainer},v().createElement(V,{analyticsId:`${i}.table`,data:null!==(n=null==x?void 0:x.results)&&void 0!==n?n:null,selectedItems:C,onSelection:B,onSortChanged:F,requiresManualMarking:o}),v().createElement("div",{className:a.pagingBottom},R?v().createElement(M.Vdz,{page:f,compact:!0,numberOfPages:R,onPageChange:b,analyticsId:i}):void 0))))},Y=(0,E.makeStyles)(()=>(0,E.createStyles)({loading:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}})),X=e=>{let{courseId:t,contentId:n}=e,i=(0,S.q)(),r=Y(),s=(0,k.r0)(t,n),o=s&&w.AaE.requiresManualMarking(s),a=(0,k.nh)({courseId:t}),l=a.gradebookColumns.find(e=>e.contentId===n),c=(null==l?void 0:l.anonymousGrading)===!0;return!s||null===a.view||a.view.isLoading?v().createElement("div",{className:r.loading},v().createElement(y.AnalyticsCircularProgress,{ariaLabel:i("global.loading"),size:"large"})):c?v().createElement(M.R22,{illustration:U(),prominentText:i("courseContent.contentProgress.progressAvailableAfterPostingGrades")}):v().createElement(J,{requiresManualMarking:o,...e})},ee=(0,E.makeStyles)(e=>(0,E.createStyles)({toolbar:{borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px",padding:"0 30px"}}));(r=c||(c={})).Content="content",r.Progress="progress";let et=e=>{let{className:t,onChange:n,value:i,analyticsId:r,variant:s="toolbar"}=e,o=ee(),a=(0,S.q)(),l=(0,k.gH)("courseContent","courseContent.organization"),d=[{id:c.Content,ariaControls:`content-tab-panel-${c.Content}`,displayKey:"courseContent.contentTabs.content"},{id:c.Progress,ariaControls:`content-tab-panel-${c.Progress}`,displayKey:l("courseContent.contentTabs.progress")}];return v().createElement("div",{className:(0,C.Z)("toolbar"===s&&o.toolbar,t)},v().createElement(y.AnalyticsTabs,{onChange:(e,t)=>n(t),value:null!=i?i:d[0].id,analyticsId:`${r}.content.contentTabs`},d.map(e=>v().createElement(y.AnalyticsTab,{analyticsId:`${r}.content.contentTabs.${e.id}`,className:`js-content-tab-${e.id}`,key:e.id,value:e.id,id:`content-tab-${e.id}`,label:a(e.displayKey),"aria-controls":e.ariaControls}))))};var en=n(311822);let ei=(0,E.makeStyles)(()=>(0,E.createStyles)({dialogContentText:{marginBottom:20}}));(s=d||(d={})).ThisItemOnly="THIS_ITEM_ONLY",s.UpdateAllInstances="UPDATE_ALL_INSTANCES";let er=e=>{let{open:t,onCancel:n,onContinue:i}=e,r=(0,S.q)(),s=(0,k.tx)(),o=ei(),a=[{value:d.ThisItemOnly,text:r("courseContent.replaceContentFileModal.options.thisItemOnly")},{value:d.UpdateAllInstances,text:r("courseContent.replaceContentFileModal.options.updateAllInstances")}],[l,c]=b.useState(a[0].value);return b.createElement(en._X,{open:t,maxWidth:"md",analyticsId:"replace.file.dialog","aria-labelledby":"replace-file-dialog-title"},b.createElement(y.AnalyticsDialogTitle,{id:"replace-file-dialog-title",analyticsId:"replace.file.dialog.title",onClose:n},r("courseContent.replaceContentFileModal.title")),b.createElement("div",null,b.createElement(y.AnalyticsDialogContent,{analyticsId:"replace.file.dialog.content"},b.createElement("div",{className:o.dialogContentText},b.createElement(y.AnalyticsTypography,{component:"p"},s("courseContent.replaceContentFileModal.descriptionInfo")),b.createElement(y.AnalyticsTypography,{component:"p"},r("courseContent.replaceContentFileModal.descriptionQuestion"))),b.createElement(y.AnalyticsRadioGroup,{analyticsId:"replace.file.dialog.radio-group",legendVariant:"subtitle1",legendText:r("courseContent.replaceContentFileModal.options.title"),value:l,onChange:e=>{c(e.target.value)}},a.map(e=>b.createElement(y.AnalyticsFormControlLabel,{key:e.value,value:e.value,htmlFor:`radio-${e.value}-id`,control:b.createElement(y.AnalyticsRadio,{analyticsId:`replace.file.dialog.${e.value}.radio`,id:`radio-${e.value}-id`}),label:e.text,analyticsId:`replace.file.dialog.${e.value}.radio.form-control-label`}))))),b.createElement(y.AnalyticsDialogActions,{analyticsId:"replace.file.dialog.actions"},b.createElement(y.AnalyticsDefaultButton,{analyticsId:"replace.file.dialog.cancel.button",onClick:n},r("global.cancel")),b.createElement(y.AnalyticsPrimaryButton,{analyticsId:"replace.file.dialog.continue.button",onClick:()=>{i(l)}},r("global.continue"))))},es=(0,E.makeStyles)(e=>(0,E.createStyles)({courseNameContainer:{padding:"6px 20px",textAlign:"center",[e.breakpoints.up("sm")]:{padding:"16px 20px"},[e.breakpoints.up("md")]:{display:"none"}},footerContainer:{display:"flex",justifyContent:"center",alignItems:"center",[e.breakpoints.up("sm")]:{padding:"15px 40px"}},filesSelectedLabel:{flex:1,marginLeft:"auto"},loadingIcon:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},panelContent:{position:"relative",overflowY:"auto",height:"100%"},paginationComponent:{margin:"24px 0px"}}));var eo=n(675689);let ea=(0,E.makeStyles)(e=>(0,E.createStyles)({listTextContainer:{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start"},listItem:{padding:"8px 0px",alignItems:"flex-start",justifyContent:"space-between"},listItemText:{padding:"0px 0px 0px 20px"},errorIcon:{marginTop:"4px"},fileNameLabel:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"200px"},fileNameErrorLabelContainer:{display:"flex",color:e.palette.error.main,gap:"4px"}}));var el=n(817426),ec=n(776517);let ed=e=>e.downloadUrl?{isDownloadable:!0,onClick:()=>{let t=(0,el.uI)(e.downloadUrl);(0,ec.sA)(ec.Cs.DownloadLinkClicked);let n=new URL(t);n.searchParams.has("xythos-download")||n.searchParams.set("xythos-download","true"),window.location.assign(n)}}:{isDownloadable:!1},eu=(e,t,n)=>{let i=(0,el.QG)(t),r=e(`components.directives.fileUpload.${i.sizeMetric}`);return e(n?"courseContent.unusedFileManagement.footer.selectedFileSize":"courseContent.unusedFileManagement.table.row.sizeLabel",{size:i.size,label:r})},ep=e=>{let t="";return e===A.Pr_.FileName?t="name":e===A.Pr_.CreationDate?t="date":e===A.Pr_.FileSize&&(t="size"),t},em=e=>{let t=(0,S.q)(),n=ea(),{analyticsId:i,row:r,selected:s,onSelectItem:o}=e,{isDownloadable:a,onClick:l}=ed(r),c=!r.hasLinks;return v().createElement(y.AnalyticsListItem,{analyticsId:`${i}.item`,divider:!0,className:n.listItem},v().createElement("div",{className:n.listTextContainer},v().createElement(y.AnalyticsFormControlLabel,{analyticsId:`${i}.item.checkboxLabel`,label:v().createElement(v().Fragment,null,v().createElement(y.AnalyticsTypography,{className:n.fileNameLabel},r.fileName),r.status===A.D4J.Error&&v().createElement(y.AnalyticsTypography,{className:n.fileNameErrorLabelContainer},v().createElement(eo.Attention,{className:n.errorIcon}),v().createElement("span",null,t("courseContent.unusedFileManagement.table.row.errorMessage")))),htmlFor:`file-management-checkbox.${r.resourceId}`,control:v().createElement(y.AnalyticsCheckbox,{analyticsId:`${i}.item.checkbox`,onClick:()=>o(r.resourceId,r.fileSize),disabled:!c,checked:c&&s,inputProps:{"aria-label":r.fileName},id:`file-management-checkbox.${r.resourceId}`})}),v().createElement(y.AnalyticsListItemText,{analyticsId:`${i}.item.content`,className:n.listItemText},v().createElement(y.AnalyticsTypography,{dangerouslySetInnerHTML:{__html:t("courseContent.unusedFileManagement.list.fields.date",{date:r.resourceCreationDate})}}),v().createElement(y.AnalyticsTypography,{dangerouslySetInnerHTML:{__html:t("courseContent.unusedFileManagement.list.fields.size",{size:eu(t,r.fileSize)})}}))),a&&v().createElement(y.AnalyticsIconButton,{onClick:l,size:"small","aria-label":t("courseContent.unusedFileManagement.table.row.downloadFile",{fileName:r.fileName}),analyticsId:`${i}.item.download.button`},v().createElement(eo.Download,null)))},eh=(0,E.makeStyles)(()=>(0,E.createStyles)({listItem:{padding:"8px 0px"}})),eg=e=>{let t=(0,S.q)(),n=eh(),{analyticsId:i,data:r,selectedItems:s,onSelectItem:o,mainCheckbox:a,onSelectMainCheckbox:l,manualMainCheckbox:c}=e;return v().createElement(y.AnalyticsList,{analyticsId:i},v().createElement(y.AnalyticsListItem,{analyticsId:`${i}.item`,className:n.listItem,divider:!0},v().createElement(y.AnalyticsFormControlLabel,{analyticsId:`${i}.checkboxLabel`,onClick:l,checked:a,label:v().createElement(y.AnalyticsTypography,{variant:"h4"},t("courseContent.unusedFileManagement.table.header.name")),htmlFor:"file-management-main-checkbox",control:v().createElement(y.AnalyticsCheckbox,{analyticsId:`${i}.checkbox`,id:"file-management-main-checkbox",inputProps:{"aria-label":t(a?"courseContent.unusedFileManagement.table.header.deselectAll":"courseContent.unusedFileManagement.table.header.selectAll")}})})),r.map(e=>{let t=c?!s.some(t=>t.id===e.resourceId):s.some(t=>t.id===e.resourceId);return v().createElement(em,{analyticsId:i,selected:t,key:e.resourceId,row:e,onSelectItem:o})}))},ef=(0,E.makeStyles)(e=>(0,E.createStyles)({fileNameCell:{display:"flex",flexDirection:"column"},errorIcon:{marginTop:"4px"},fileNameLabel:{textOverflow:"ellipsis",overflow:"hidden",maxWidth:"150px",[e.breakpoints.up("md")]:{maxWidth:"500px"}},fileNameErrorLabelContainer:{display:"flex",color:e.palette.error.main,gap:"4px"},usedFileTooltip:{display:"inline-block"}})),eb=e=>{let{formatDate:t,translate:n}=(0,x.h)(),i=ef(),{row:r,selected:s,onSelectItem:o,analyticsId:a}=e,{isDownloadable:l,onClick:c}=ed(r),d=!r.hasLinks;return v().createElement(y.AnalyticsTableRow,{analyticsId:`${a}.row`},v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell`},d?v().createElement(y.AnalyticsCheckbox,{inputProps:{"aria-label":r.fileName},analyticsId:`${a}.row.checkbox`,checked:d&&s,disabled:!d,onClick:()=>o(r.resourceId,r.fileSize)}):v().createElement(y.AnalyticsTooltip,{analyticsId:`${a}.usedFile.tooltip`,title:n("courseContent.unusedFileManagement.table.tooltip.usedFile"),placement:"top-start"},v().createElement("div",{className:i.usedFileTooltip},v().createElement(y.AnalyticsCheckbox,{inputProps:{"aria-label":r.fileName},analyticsId:`${a}.row.checkbox`,checked:!1,disabled:!0,onClick:()=>o(r.resourceId,r.fileSize)})))),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell`,tabIndex:-1},v().createElement("div",{className:i.fileNameCell},v().createElement("div",{className:i.fileNameLabel},r.fileName),r.status===A.D4J.Error&&v().createElement("div",{className:i.fileNameErrorLabelContainer},v().createElement(eo.Attention,{className:i.errorIcon}),v().createElement("span",null,n("courseContent.unusedFileManagement.table.row.errorMessage"))))),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell`,tabIndex:-1},t(r.resourceCreationDate,R.ILocaleDateFormat.Short)),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell`,tabIndex:-1},eu(n,r.fileSize)),v().createElement(y.AnalyticsTableCell,{analyticsId:`${a}.cell`,tabIndex:-1},l&&v().createElement(y.AnalyticsIconButton,{onClick:c,"aria-label":n("courseContent.unusedFileManagement.table.row.downloadFile",{fileName:r.fileName}),analyticsId:`${a}.row.download.button`},v().createElement(eo.Download,null))))},ev=(0,E.makeStyles)(e=>(0,E.createStyles)({checkBoxHeaderCell:{minWidth:"0px"},fileNameHeaderCell:{[e.breakpoints.up("md")]:{width:"65%"}},columnHeaderCell:{[e.breakpoints.up("md")]:{width:"20%"}},downLoadHeaderCell:{minWidth:"0px"}})),ey=e=>{let t=ev(),n=(0,S.q)(),i=(0,k.tx)(),{analyticsId:r,data:s,selectedItems:o,onSelectItem:a,mainCheckbox:l,onSelectMainCheckbox:c,manualMainCheckbox:d,onSortChanged:u,selectedFilter:p}=e,m=v().useCallback((e,t)=>{let i=n(`courseContent.unusedFileManagement.table.header.${ep(e)}`);return n(`courseContent.unusedFileManagement.table.ariaSortMessage.${t}`,{columnName:i})},[n]),h=v().useCallback(e=>(null==u||u(e.sortColumnId,e.sortDirection),!0),[u]),g={role:void 0};return v().createElement(y.AnalyticsSortableTable,{id:"file-management-table",analyticsId:r,getAriaSortMessage:m,initialSortColumnId:A.Pr_.FileName,initialSortDirection:A.SrV.Ascending,onSortChanged:h,tableProps:{"aria-readonly":void 0,"aria-label":n(`courseContent.unusedFileManagement.filters.${p}`)}},v().createElement(y.AnalyticsTableHead,{analyticsId:`${r}.head`},v().createElement(y.AnalyticsTableRow,{analyticsId:`${r}.row`},v().createElement(y.AnalyticsTableCell,{analyticsId:`${r}.cell.selectAll`,className:t.checkBoxHeaderCell},v().createElement(y.AnalyticsTooltip,{id:"select-all-files-tooltip",analyticsId:`${r}.selectAll.tooltip`,title:i("courseContent.unusedFileManagement.table.tooltip.selectAll"),placement:"top-start","aria-hidden":"true"},v().createElement(y.AnalyticsCheckbox,{analyticsId:`${r}.selectAll.checkbox`,checked:l,onClick:c,inputProps:{"aria-label":l?n("courseContent.unusedFileManagement.table.header.deselectAll"):i("courseContent.unusedFileManagement.table.tooltip.selectAll")}}))),v().createElement(y.AnalyticsSortableTableHeaderCell,{analyticsId:`${r}.sortableHeaderCell`,id:"file-management-table-header-filename",columnId:A.Pr_.FileName,tableCellProps:{...g,className:t.fileNameHeaderCell}},n("courseContent.unusedFileManagement.table.header.name")),v().createElement(y.AnalyticsSortableTableHeaderCell,{analyticsId:`${r}.sortableHeaderCell`,id:"file-management-table-header-date",columnId:A.Pr_.CreationDate,tableCellProps:{...g,className:t.columnHeaderCell}},n("courseContent.unusedFileManagement.table.header.date")),v().createElement(y.AnalyticsSortableTableHeaderCell,{analyticsId:`${r}.sortableHeaderCell`,id:"file-management-table-header-size",columnId:A.Pr_.FileSize,tableCellProps:{...g,className:t.columnHeaderCell}},n("courseContent.unusedFileManagement.table.header.size")),v().createElement(y.AnalyticsTableCell,{analyticsId:`${r}.cell`}))),v().createElement(y.AnalyticsTableBody,{analyticsId:`${r}.body`,className:t.downLoadHeaderCell},s.map(e=>{let t=o.some(t=>t.id===e.resourceId);return v().createElement(eb,{analyticsId:r,selected:d?!t:t,key:e.resourceId,row:e,onSelectItem:a})})))},eS=e=>{let{isSmallScreen:t,resources:n,mainCheckboxValue:i,manualMainCheckboxValue:r,onSelectAll:s,selectedItems:o,onSelectItem:a,onSortChanged:l,analyticsId:c,selectedFilter:d}=e;return t?v().createElement(v().Fragment,null,v().createElement(E.Divider,{variant:"fullWidth"}),v().createElement(eg,{analyticsId:`${c}.list`,data:n,mainCheckbox:i,manualMainCheckbox:r,onSelectMainCheckbox:s,selectedItems:o,onSelectItem:a,onSortChanged:l,selectedFilter:d})):v().createElement(ey,{analyticsId:`${c}.table`,data:n,mainCheckbox:i,manualMainCheckbox:r,onSelectMainCheckbox:s,selectedItems:o,onSelectItem:a,onSortChanged:l,selectedFilter:d})};(o=u||(u={})).DeleteFileConfirmation="remove-unused-files",o.ChangeViewConfirmation="change-view";let eC=e=>{let{dialog:t,exitCallback:n}=e,i=(0,S.q)(),[r,s]=(0,b.useState)(!1),[o,a]=(0,b.useState)(!1),l=(e=!1)=>{a(e),s(!0)},c=t===u.DeleteFileConfirmation,d={analyticsId:c?"remove.unused.files.dialog":"file.management.change.view.dialog",title:i(`courseContent.unusedFileManagement.modal.${c?"title":"listViewUpdate.title"}`),description:i(`courseContent.unusedFileManagement.modal.${c?"description":"listViewUpdate.description"}`),primaryButtonLabel:i(c?"global.delete":"global.continue")},p=`${d.analyticsId}.${c?"delete.button":"continue.button"}`;return v().createElement(en._X,{open:!r,maxWidth:"md",analyticsId:d.analyticsId,"aria-labelledby":`${t}-dialog-title`,TransitionProps:{onExited:()=>{n(o),s(!1)}}},v().createElement(y.AnalyticsDialogTitle,{id:`${t}-dialog-title`,analyticsId:`${d.analyticsId}.title`,onClose:()=>l(!1)},d.title),v().createElement("div",null,v().createElement(y.AnalyticsDialogContent,{analyticsId:`${d.analyticsId}.content`},v().createElement(y.AnalyticsDialogContentText,{id:`${t}-dialog-description`,analyticsId:`${d.analyticsId}.description`},d.description))),v().createElement(y.AnalyticsDialogActions,{analyticsId:`${d.analyticsId}.actions`},v().createElement(y.AnalyticsDefaultButton,{analyticsId:`${d.analyticsId}.cancel.button`,onClick:()=>l(!1)},i("global.cancel")),v().createElement(y.AnalyticsPrimaryButton,{analyticsId:p,onClick:()=>l(!0)},d.primaryButtonLabel)))};var eE=n(390376);(a=p||(p={})).AllFiles="allFiles",a.UnusedFiles="unusedFiles";let eI=(0,b.memo)(e=>{let t=(0,eE.y)(),n=(0,S.q)(),{analyticsId:i,filterSelected:r,onFilterSelected:s}=e,o=(0,b.useMemo)(()=>[{key:p.AllFiles,filterBy:p.AllFiles,translation:n("courseContent.unusedFileManagement.filters.allFiles")},{key:p.UnusedFiles,filterBy:p.UnusedFiles,translation:n("courseContent.unusedFileManagement.filters.unusedFiles")}],[n]);return v().createElement("div",{className:t.filterWrapper},v().createElement(y.AnalyticsTextField,{select:!0,className:t.dropdownFilter,id:"list-view-filter-dropdown",analyticsId:`${i}.listView.filter.dropdown`,value:r,"aria-labelledby":"list-view-filter-dropdown",label:n("courseContent.unusedFileManagement.filters.label"),onChange:e=>s(e.target.value)},o.map(e=>v().createElement(y.AnalyticsMenuItem,{id:`list-view-filter-dropdown ${e.filterBy}`,button:!0,key:e.key,value:e.filterBy,analyticsId:`${i}.listView.filter.dropdown.${e.filterBy}.item`},e.translation))))});eI.displayName="FileManagementListViewFilter";let ew=(0,E.makeStyles)(e=>(0,E.createStyles)({emptyStateContainer:{textAlign:"center",marginTop:"20px",[e.breakpoints.up("sm")]:{marginTop:"100px"}},image:{maxWidth:"200px",margin:"0 auto"},emptyPanelLabel:{marginTop:"20px"}}));var eA=n(544939),ek=n.n(eA);let eT=e=>{let{selectedFilter:t}=e,n=ew(),i=(0,k.tx)();return v().createElement("div",{className:n.emptyStateContainer},v().createElement(M.R22,{illustration:ek(),prominentText:i(`courseContent.unusedFileManagement.emptyPanel.${t}`)}))},eP=(e,t)=>{switch(t.type){case"selectAll":return{...e,selectedItems:e.manualMainCheckboxValue?e.selectedItems:[],exceptionList:e.manualMainCheckboxValue?[]:e.exceptionList,manualMainCheckboxValue:!e.mainCheckboxValue,mainCheckboxValue:!e.mainCheckboxValue};case"selectItem":return{...e,...e$(e,t.itemId,t.size)};case"updateListViewFilter":return{...e,selectedItems:[],exceptionList:[],manualMainCheckboxValue:!1,mainCheckboxValue:!1,listViewFilterValue:t.newListViewFilterValue};case"deselectAll":return{...e,selectedItems:[],exceptionList:[],manualMainCheckboxValue:!1,mainCheckboxValue:!1}}},eD=0,ex=0,eR="course.content.unusedFileManagement",eL={manualMainCheckboxValue:null,mainCheckboxValue:!1,selectedItems:[],exceptionList:[],listViewFilterValue:p.UnusedFiles},eN=(e,t,n)=>-1===e.findIndex(e=>e.id===t)?[...e,{id:t,size:n}]:e.filter(e=>e.id!==t),e$=(e,t,n)=>{let i=e.manualMainCheckboxValue?e.selectedItems:eN(e.selectedItems,t,n),r=e.manualMainCheckboxValue?eN(e.exceptionList,t,n):e.exceptionList;return{mainCheckboxValue:e.manualMainCheckboxValue?0===r.length:i.length===eD,selectedItems:i,exceptionList:r}},eO=()=>{var e,t,n,i;let r=es(),s=(0,S.q)(),o=(0,E.useTheme)(),a=(0,E.useMediaQuery)(o.breakpoints.down("xs")),l=0,c=(0,b.useRef)(!0),[d,m]=(0,b.useReducer)(eP,eL),[h,g]=(0,b.useState)(0),[f,C]=v().useState(),[I,A]=v().useState(),T=(0,k.pJ)(e=>w.Ys.app.getRoute(e).params.courseId),P=(0,k.Tn)(T),D={courseId:T,paging:{offset:10*h,limit:10},queryParams:{refresh:c.current,unusedFiles:d.listViewFilterValue===p.UnusedFiles||void 0,sortBy:f,order:I}},{resources:x,view:R,unusedFilesTotal:L}=(0,k.xw)(D,c.current),N=null===(e=null==R?void 0:R.isLoading)||void 0===e||e,$=0;R&&R.paging&&(null===(t=R.paging)||void 0===t?void 0:t.count)&&($=Math.ceil(R.paging.count/R.paging.limit)),L&&(eD=L.count,ex=L.size);let{batchDeleteCourseResource:O}=(0,k.vL)(),G=v().useCallback(e=>{c.current=!1,m({type:"updateListViewFilter",newListViewFilterValue:e})},[]),_=v().useCallback((e,t)=>{c.current=!1,C(e),A(t)},[]),{displayModal:B,modal:F}=(0,M.ddY)(eC,{dialog:u.DeleteFileConfirmation}),{displayModal:U,modal:V}=(0,M.ddY)(eC,{dialog:u.ChangeViewConfirmation}),H=async()=>{let{confirmed:e}=await B();e&&(c.current=!1,m({type:"deselectAll"}),g(0),await O({deleteAll:!!d.manualMainCheckboxValue,fileIdsToDelete:d.selectedItems.map(e=>e.id),fileIdsToExclude:d.exceptionList.map(e=>e.id)},T))},q=d.exceptionList.reduce((e,t)=>e+=t.size,0),j=d.manualMainCheckboxValue?d.exceptionList:d.selectedItems,z=d.manualMainCheckboxValue?eD-d.exceptionList.length:d.selectedItems.length;l=d.manualMainCheckboxValue?ex-q:l=d.selectedItems.reduce((e,t)=>e+=t.size,0);let W=async e=>{let t=0===z?Promise.resolve({confirmed:!0}):U(),{confirmed:n}=await t;n&&(c.current=!1,g(0),G(e))},K=x&&0===x.length;return v().createElement(v().Fragment,null,F,V,v().createElement(M.huC,{fixedHeader:!0,header:v().createElement(M.YIP,{analyticsIdPrefix:`${eR}.header`,subHeaderText:null!==(n=null==P?void 0:P.displayName)&&void 0!==n?n:"",headerText:s("courseContent.unusedFileManagement.title"),readyToFocus:!1,showMenuToggleButton:!0}),footer:v().createElement(M.jHD,{className:r.footerContainer},v().createElement(y.AnalyticsTypography,{variant:"subtitle2",component:"span",role:"status",className:r.filesSelectedLabel},s("courseContent.unusedFileManagement.footer.filesSelected.plural",{numberSelected:z}),z>0&&eu(s,l,!0)),v().createElement(y.AnalyticsPrimaryButton,{startIcon:v().createElement(eo.Trash,null),onClick:()=>H(),disabled:0===z,analyticsId:`${eR}.footer.delete.button`},s("courseContent.unusedFileManagement.footer.deleteFiles")))},v().createElement("div",{className:r.panelContent},v().createElement(M.gXi,null,v().createElement(v().Fragment,null,v().createElement("div",{className:r.courseNameContainer},v().createElement(y.AnalyticsTypography,{variant:"h3"},null!==(i=null==P?void 0:P.displayName)&&void 0!==i?i:"")),v().createElement(E.Divider,{variant:"fullWidth"})),v().createElement(eI,{analyticsId:eR,filterSelected:d.listViewFilterValue,onFilterSelected:W}),!(f&&I)&&K&&N?v().createElement("div",{className:r.loadingIcon},v().createElement(y.AnalyticsCircularProgress,{ariaLabel:s("global.loading"),size:"large"})):v().createElement(v().Fragment,null,K&&!N?v().createElement(eT,{selectedFilter:d.listViewFilterValue}):v().createElement(eS,{analyticsId:eR,resources:x,mainCheckboxValue:d.mainCheckboxValue,manualMainCheckboxValue:d.manualMainCheckboxValue,onSelectAll:()=>{m({type:"selectAll"})},onSelectItem:(e,t)=>{m({type:"selectItem",itemId:e,size:t})},isSmallScreen:a,selectedItems:j,onSortChanged:_,selectedFilter:d.listViewFilterValue}))),!K&&v().createElement(M.Vdz,{analyticsId:`${eR}.pagination`,className:r.paginationComponent,page:h,numberOfPages:$,onPageChange:e=>{c.current=!1,g(e)}}))))};function eG(){let e=(0,k.Kx)("view");return[[c.Content,c.Progress].includes(e)?e:c.Content,(0,b.useCallback)(e=>O.Nd.search({view:e}),[])]}},932744:function(e,t,n){"use strict";n.d(t,{c:function(){return p}});var i=n(847969),r=n(675689),s=n(327355),o=n(797580),a=n(202784),l=n.n(a),c=n(410628),d=n(463648);let u=(0,s.makeStyles)({container:{display:"flex",flexDirection:"column",width:"100%",height:"100%"},banner:{display:"flex",padding:"8px",backgroundColor:o.W1.messagingBlueBackground,alignItems:"center",gap:"8px"},image:{width:"100%",height:"100%",opacity:.5,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),p=e=>{let{isOrganization:t,membershipColorIndex:n=0}=e,s=(0,c.q)(),o=u(),a=(0,d.Y)(n,t,!0);return l().createElement("div",{className:o.container},l().createElement("div",{className:o.banner},l().createElement(r.Information,null),l().createElement(i.AnalyticsTypography,{variant:"caption"},s("courseCore.imageSettingsPanel.image.placeholder"))),l().createElement("div",{"data-testid":"default-image",className:o.image,style:{backgroundImage:`url(${a})`}}))}},658040:function(e,t,n){"use strict";n.d(t,{o:function(){return d}});var i=n(847969),r=n(327355),s=n(88818),o=n(202784),a=n.n(o),l=n(410628);let c=(0,r.makeStyles)(e=>({chip:{...e.typography.h4,color:e.palette.text.hint,width:"fit-content",padding:"4px 10px",margin:"9px 0"},switch:s.JtC.switchMarginFix})),d=(0,o.memo)(function(e){let{analyticsId:t,checked:n,readOnly:r=!1,onChange:s,ariaLabelledby:o}=e,d=(0,l.q)(),u=c(),p=d(`courseCore.imageSettingsPanel.switch.${n?"on":"off"}`);return r?a().createElement(i.AnalyticsChip,{analyticsId:`${t}.chip`,className:u.chip,label:p}):a().createElement(i.AnalyticsFormControlLabel,{"aria-labelledby":o,analyticsId:`${t}.checkboxLabel`,className:u.switch,control:a().createElement(i.AnalyticsSwitch,{id:"course-banner-option",analyticsId:`${t}.checkbox`,checked:n,onChange:s}),label:p,htmlFor:"course-banner-option"})})},164597:function(e,t,n){"use strict";n.d(t,{KU:function(){return o},Q5:function(){return a},aB:function(){return s},xA:function(){return r}});var i=n(276635);let r={altText:"",image:void 0,isBannerVisible:!1,isDecorative:!0};function s(e,t){var n,i;switch(t.type){case"ChangeImage":return{image:t.image,isBannerVisible:!e.image||e.isBannerVisible,altText:"",isDecorative:!0};case"LoadedCourse":return{altText:null!==(n=t.course.bannerAltText)&&void 0!==n?n:"",image:t.course.banner,isBannerVisible:null!==(i=t.course.isBannerVisible)&&void 0!==i&&i,isDecorative:!t.course.bannerAltText};case"RemoveImage":return{image:void 0,isBannerVisible:!1,altText:"",isDecorative:!0};case"ToggleDecorative":return{...e,isDecorative:!e.isDecorative};case"ToggleVisibility":return{...e,isBannerVisible:!e.isBannerVisible};case"UpdateAltText":return{...e,altText:t.text,isDecorative:!1}}}function o(e,t){return!(0,i.isEqual)(e.image,null==t?void 0:t.banner)}function a(e,t){let n=(null==t?void 0:t.isBannerVisible)!==e.isBannerVisible,i=(null==t?void 0:t.bannerAltText)!==e.altText,r=(null==t?void 0:t.bannerAltText)&&e.isDecorative||!(null==t?void 0:t.bannerAltText)&&!e.isDecorative;return o(e,t)||n||i||r}},180169:function(e,t,n){"use strict";n.d(t,{p:function(){return I}});var i=n(847969),r=n(88818),s=n(986709),o=n(35302),a=n(259197),l=n(592493),c=n(563060),d=n(817426),u=n(465139),p=n(202784),m=n.n(p),h=n(755755),g=n(928316),f=n(932744),b=n(658040),v=n(164597),y=n(400001),S=n(368705),C=n(946752);let E={height:240,width:1200},I=e=>{var t,n,I;let{getColorIndex:w}=e,A=(0,y.y)(),k=(0,o.d4)(),T=(0,l.Lx)(),P=(0,C.O)(),D=(0,l.Tn)(P),x=D&&(0,a.Si$)(D),{translate:R,formatItems:L}=(0,h.h)(),N=(0,l.Uc)(null==D?void 0:D.isOrganization),$=null!==(t=(0,l.vD)(P,["course.banner.MODIFY"]))&&void 0!==t&&t,O=null!==(n=(0,l.J1)(P,["course.banner.visibility.MODIFY"]))&&void 0!==n&&n,G=(0,l.$M)(P),[_,M]=(0,p.useState)(!1),[B,F]=(0,p.useState)(!1),[U,V]=(0,p.useReducer)(v.aB,v.xA),H=!!D,q=(0,u.zX)(()=>{D&&V({type:"LoadedCourse",course:D})});(0,p.useEffect)(()=>{H&&q()},[H,q]);let j=!!U.image,z=(0,v.Q5)(U,D),{isCloseInterrupted:W,cancelClose:K,doClose:Z}=(0,c.YK)(z&&!_||B);async function Q(){var e,t,n;if(!D)return;M(!0);let i={...D,isBannerVisible:U.isBannerVisible,bannerAltText:U.isDecorative?"":U.altText};(0,v.KU)(U,D)&&(i.banner={fileLocation:null!==(t=null===(e=U.image)||void 0===e?void 0:e.fileLocation)&&void 0!==t?t:s.fKr,fileName:null===(n=U.image)||void 0===n?void 0:n.fileName});try{await T(a.Nwg.course.updateCourse(D,i)),c.Nd.leavePeekState()}catch(e){M(!1),J()}}let{displayModal:J,modal:Y}=(0,r.ddY)(r.U6L,{titleText:R("components.services.error-modal.error.title"),contentText:R("courseCore.imageSettingsPanel.saveError.message"),confirmationButtonText:R("components.services.error-modal.dismiss"),analyticsId:"course.banner.saveError.confirm",rootId:R("course.banner.saveError.confirm"),showCancelButton:!1,exitCallback:()=>{}}),X=(0,p.useCallback)(()=>V({type:"ToggleDecorative"}),[]),ee=(0,p.useCallback)(e=>V({type:"UpdateAltText",text:e}),[]),et=(0,p.useCallback)(()=>V({type:"ToggleVisibility"}),[]),en=(0,p.useMemo)(()=>({local:!0,web:{courseId:P,resizeOptions:{"max-w":2560},searchTerms:async()=>{if(!G.canGenerateKeywords)return"";let{keywords:e}=await (0,a.oek)(P);return L(e)}},ai:!1}),[G.canGenerateKeywords,P,L]);return m().createElement(m().Fragment,null,m().createElement(r.huC,{header:m().createElement(r.YIP,{headerText:R("courseCore.imageSettingsPanel.header"),analyticsIdPrefix:"course.banner.settings.header",readyToFocus:!1,showMenuToggleButton:!0,subHeaderText:null!==(I=null==D?void 0:D.displayName)&&void 0!==I?I:""}),footer:m().createElement(r.jHD,{peek:!0},m().createElement(i.AnalyticsDefaultButton,{analyticsId:"course.editBanner.bannerVisibility.cancel",onClick:()=>c.Nd.leavePeekState()},R("global.cancel")),m().createElement(i.AnalyticsPrimaryButton,{analyticsId:"course.editBanner.bannerVisibility.add.button",disabled:_||B||!z,onClick:Q},R("global.save")))},m().createElement(r.gXi,null,m().createElement("div",{className:k.section},m().createElement(o.TV,{title:m().createElement(i.AnalyticsTypography,{variant:"h2"},N("courseCore.imageSettingsPanel.image.title")),analyticsId:"course.editBanner.pickImage",sources:en,classes:{preview:A.imageFileInput},aspect:5,minimumDimensions:x?void 0:E,readOnly:!$,value:U.image,onDelete:()=>{(0,d.hm)(R("courseCore.imageSettingsPanel.image.cleared")),V({type:"RemoveImage"})},onChangeCapture:()=>F(!0),onChange:e=>{(0,g.unstable_batchedUpdates)(()=>{V({type:"ChangeImage",image:e}),F(!1)})},onChangeError:()=>F(!1),placeholder:m().createElement(f.c,{isOrganization:null==D?void 0:D.isOrganization,membershipColorIndex:w(P)}),confirmationDialogProps:{contentText:N("courseCore.imageSettingsPanel.delete.message"),subheaderText:R("courseCore.imageSettingsPanel.delete.header"),analyticsId:"course.banner.delete.confirm"}}),j&&m().createElement(m().Fragment,null,m().createElement(S.Z,{imageFile:U.image,minimumDimensions:E,className:A.bannerSizeWarning}),m().createElement(r.KHx,{analyticsId:"course.editBanner",canEdit:$,canMarkAsDecorative:!0,isDecorative:U.isDecorative,altText:U.altText,maxAltTextLength:s.kjH,onIsDecorativeChanged:X,onAltTextChanged:ee}))),m().createElement("div",{className:k.section},m().createElement(i.AnalyticsTypography,{id:"course-banner-header-id",variant:"h2"},N("courseCore.imageSettingsPanel.banner.title")),!j&&$&&m().createElement(i.AnalyticsTypography,{className:A.noImage,variant:"caption"},N("courseCore.imageSettingsPanel.banner.noImage")),m().createElement(i.AnalyticsTypography,{variant:"caption"},N(`courseCore.imageSettingsPanel.banner.${x?"originalDescription":"description"}`)),m().createElement(b.o,{analyticsId:"course.editBanner.bannerVisibility.input",checked:U.isBannerVisible&&j,readOnly:!j||!O||x,onChange:et,ariaLabelledby:"course-banner-header-id"})),m().createElement("div",{className:k.section},m().createElement(i.AnalyticsTypography,{id:"course-card-image-header-id",variant:"h2"},N("courseCore.imageSettingsPanel.thumbnail.title")),m().createElement(i.AnalyticsTypography,{variant:"caption"},N("courseCore.imageSettingsPanel.thumbnail.description")),m().createElement(b.o,{checked:!0,readOnly:!0,analyticsId:"course.editBanner.thumbnail",ariaLabelledby:"course-card-image-header-id"})))),Y,m().createElement(r.U6L,{titleText:R("courseCore.imageSettingsPanel.confirmation.title"),contentText:R("courseCore.imageSettingsPanel.confirmation.message"),confirmationButtonText:R("courseCore.imageSettingsPanel.confirmation.confirm"),analyticsId:R("course.banner.confirm"),rootId:R("course.banner.confirm"),open:W,exitCallback:e=>{e?Z():K()}}))}},400001:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({noImage:{fontWeight:e.typography.fontWeightBold},imageFileInput:{height:"124px",marginBottom:"8px"},bannerSizeWarning:{marginTop:"4px"}}))},368705:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(664626),r=n(675689),s=n(592493),o=n(202784),a=n.n(o),l=n(410628);let c=e=>{let{imageFile:t,minimumDimensions:n,className:c}=e,d=(0,l.q)(),[u,p]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{(async()=>{p(!!await (0,s.I_)(t,n))})()},[t,n]),u)?a().createElement(i.m,{severity:"warning",icon:a().createElement(r.Attention,{color:"primary"}),className:c},d("courseCore.imageSettingsPanel.sizeError.message")):null}},946752:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var i=n(259197),r=n(592493),s=n(453923);function o(){let e=(0,s.H)(),t=(0,r.pJ)(e=>i.Ys.app.getQueryParams(e).id),n=e||t;if(!n)throw Error("Course Banner Settings: No course ID available");return n}},32144:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(675689),r=n(847969),s=n(88818),o=n(202784),a=n.n(o),l=n(36642),c=n(410628),d=n(592493),u=n(699294),p=n(327355),m=n(906277);let h=e=>{let t=(0,c.q)(),n=(0,d.gH)("course.outline","organization.outline"),o=(0,u.y)(),h=(0,p.useTheme)(),g=(0,p.useMediaQuery)(h.breakpoints.up("sm")),[f,b]=a().useState(null),v=null!==f,y="course.outline.copyDetails.overflowMenu.showMenu.button",S=()=>{b(null)},C=(0,l.L)({...e,onClose:S}),E=t("components.directives.overflow-menu.menu-button.aria-label",{elementName:t(n("course.outline.courseContent"))});return a().createElement(a().Fragment,null,a().createElement(r.AnalyticsIconButton,{analyticsId:"course.outline.copyDetails.overflowMenu.showMenu.button",className:(0,m.Z)("overflow-menu-button",{open:v}),title:E,"aria-controls":f?y:void 0,"aria-expanded":v,"aria-haspopup":"true","aria-label":E,onClick:e=>{b(e.currentTarget)}},a().createElement(i.Menu,null)),a().createElement(s.rMz,{id:y,analyticsId:"course.outline.copyDetails.overflowMenu.menu",className:(0,m.Z)("react-container",o.menu),classes:{paper:o.paper},anchorEl:f,anchorOrigin:{vertical:"bottom",horizontal:g?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"},open:v,items:C,onClick:S,onClose:S}))}},699294:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({menu:{marginRight:e.spacing(4),[e.breakpoints.up("sm")]:{marginRight:0}},paper:{width:"95%",[e.breakpoints.up("sm")]:{width:"280px"}}}))},529611:function(e,t,n){"use strict";function i(e){return`course.outline.copyDetails.overflowMenu.menu.${e}.link`}n.d(t,{e:function(){return i}})},859608:function(e,t,n){"use strict";n.d(t,{W:function(){return l}});var i=n(675689),r=n(563060),s=n(202784),o=n.n(s),a=n(529611);function l({t:e,courseFlags:t,canAccessBatchEdit:n,onClose:s}){let{isComplete:l}=t;return{key:"bulkEditItemKey",analyticsId:(0,a.e)("course.outline.bulkEditLink"),icon:o().createElement(i.BulkEdit,{color:"action"}),text:e("course.outline.bulkEditLink"),hidden:!(!l&&n),onClick(){r.Nd.goPeekState(r.SS.BulkEditContent()),s()}}}},503449:function(e,t,n){"use strict";n.d(t,{A:function(){return l}});var i=n(675689),r=n(563060),s=n(202784),o=n.n(s),a=n(529611);function l({t:e,resolve:t,courseFlags:n,onClose:s}){let{canCopy:l}=n;return{key:"copyContentItemKey",analyticsId:(0,a.e)(t("course.outline.operation.granularCopy")),icon:o().createElement(i.Duplicate,{color:"action"}),text:e(t("course.outline.operation.granularCopy")),hidden:!l,onClick(){r.Nd.goPeekState(r.SS.CopyContent({positionAfter:"end",depth:1})),s()}}}},52424:function(e,t,n){"use strict";n.d(t,{V:function(){return a}});var i=n(675689),r=n(202784),s=n.n(r),o=n(529611);function a({t:e,courseFlags:t,hasCurrentCopyDetailsErrors:n,openCopyDetailsPanel:r,onClose:a}){let{canCopy:l}=t;return{key:"copyDetailsItemKey",analyticsId:(0,o.e)("course.outline.operation.copyDetails"),icon:s().createElement(i.Attention,{color:"error"}),text:e("course.outline.operation.copyDetails"),hidden:!(l&&n),onClick:()=>{r(),a()}}}},75592:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(259197);function r(e){return{isComplete:!!e&&(0,i.Ybd)(e),canExport:!!e&&(0,i.MAI)(e),canArchive:!!e&&(0,i.aBo)(e),canImport:!!e&&(0,i.l_$)(e),canCopy:!!e&&(0,i.I7o)(e),canConvert:!!e&&(0,i.N1L)(e)}}},794761:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var i=n(675689),r=n(202784),s=n.n(r),o=n(529611);function a({t:e,resolve:t,courseFlags:n,openExportModal:r,onClose:a}){let{canArchive:l,canExport:c}=n;return{key:"exportItemKey",analyticsId:(0,o.e)(t("course.outline.operation.export")),icon:s().createElement(i.Export,{color:"action"}),text:e(t("course.outline.operation.export")),hidden:!(l||c),onClick:()=>{r(),a()}}}},524941:function(e,t,n){"use strict";n.d(t,{F:function(){return l}});var i=n(675689),r=n(563060),s=n(202784),o=n.n(s),a=n(529611);function l({t:e,canAccessFileManagement:t,onClose:n}){return{key:"unusedFilesItemKey",analyticsId:(0,a.e)("course.outline.unusedFiles"),icon:o().createElement(i.Document2X,{color:"action"}),text:e("course.outline.unusedFiles"),hidden:!t,onClick(){r.Nd.goPeekState(r.SS.FileManagement()),n()}}}},678777:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var i=n(675689),r=n(563060),s=n(202784),o=n.n(s),a=n(529611);function l({t:e,root:t,courseFlags:n,onClose:s}){let{canImport:l}=n;return{key:"importItemKey",analyticsId:(0,a.e)("course.outline.operation.importContent"),icon:o().createElement(i.Import,{color:"action"}),text:e("course.outline.operation.importContent"),hidden:!l,onClick(){t&&t.id&&r.Nd.goPeekState(r.SS.ImportContent({parentId:t.id})),s()}}}},345572:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var i=n(675689),r=n(563060),s=n(202784),o=n.n(s),a=n(529611);function l({t:e,resolve:t,courseFlags:n,onClose:s}){let{canCopy:l,canConvert:c,canExport:d,canArchive:u,canImport:p}=n;return{key:"viewCourseTasksKey",analyticsId:(0,a.e)(t("course.outline.operation.viewCourseTasks")),icon:o().createElement(i.Attention,{color:"action"}),text:e(t("course.outline.operation.viewCourseTasks")),hidden:!(l||c||d||u||p),onClick(){r.Nd.goPeekState(r.Ty.Tasks()),s()}}}},36642:function(e,t,n){"use strict";n.d(t,{L:function(){return g}});var i=n(986709),r=n(592493),s=n(410628),o=n(453923),a=n(75592),l=n(859608),c=n(503449),d=n(52424),u=n(794761),p=n(678777),m=n(345572),h=n(524941);function g({canAccessBatchEdit:e,canAccessFileManagement:t,hasCurrentCopyDetailsErrors:n,openExportModal:g,openCopyDetailsPanel:f,onClose:b}){let v=(0,s.q)(),y=(0,r.gH)("course.outline","organization.outline"),S=(0,o.H)(),C=(0,r.Tn)(S),E=(0,r.ER)(S,i.x1x.Root),I=(0,a.A)(C),w=(0,l.W)({t:v,courseFlags:I,canAccessBatchEdit:e,onClose:b}),A=(0,h.F)({t:v,canAccessFileManagement:t,onClose:b}),k=(0,p.u)({t:v,root:E,courseFlags:I,onClose:b}),T=(0,c.A)({t:v,resolve:y,courseFlags:I,onClose:b});return[w,k,T,(0,u.W)({t:v,resolve:y,courseFlags:I,openExportModal:g,onClose:b}),(0,m.N)({t:v,resolve:y,courseFlags:I,onClose:b}),(0,d.V)({t:v,courseFlags:I,hasCurrentCopyDetailsErrors:n,openCopyDetailsPanel:f,onClose:b}),A]}},341433:function(e,t,n){"use strict";n.d(t,{D:function(){return v},t:function(){return y}});var i=n(202784),r=n.n(i),s=n(995696),o=n(345643),a=n(592493),l=n(453923),c=n(32144),d=n(327355),u=n(259197),p=n(906277),m=n(764299),h=n(147579),g=n(833481),f=n(847969),b=n(817426);let v="course-content-outline-header-text",y=e=>{let{searchCourseContent:t,courseOutlineIsEmpty:n,shouldShowOverflowMenu:y,canAccessBatchEdit:S,canAccessFileManagement:C,hasCurrentCopyDetailsErrors:E,openExportModal:I,openCopyDetailsPanel:w,isLoading:A}=e,{search:k}=(0,g.X)(),[T,P]=(0,i.useState)(""),D=(0,i.useRef)(null),x=(0,h.H)(),R=(0,l.H)(),L=(0,a.aq)(R),N=L&&u.Fce.isStudentMembership(L),$=(0,i.useRef)(null),[O,G]=(0,i.useState)(!1),_=O||!A&&(n||x||!!N),M=(0,o.y)(),B=(0,a.tx)(b.r9.Outdated_PrependSection,{courseKeySection:"course",orgKeySection:"organization"});return(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{G(!e[0].isIntersecting)},{rootMargin:"-48px 0px 0px 0px",threshold:[0]});return $.current&&e.observe($.current),()=>e.disconnect()},[]),(0,i.useEffect)(()=>{P(`"${k}"`)},[k]),r().createElement(r().Fragment,null,r().createElement("span",{ref:$}),r().createElement(d.Box,{component:"header",className:(0,p.Z)("outline-header react-container",M.header,{[M.headerDetached]:O,[M.headerBordered]:_})},r().createElement(d.Box,{className:(0,p.Z)(M.content,{[M.headerWithoutOverflow]:!y})},r().createElement(d.Box,{display:"flex",alignItems:"center"},r().createElement(d.Box,{flexGrow:1,display:"flex",alignItems:"center"},r().createElement(f.AnalyticsTypography,{id:v,variant:"h2",className:"js-course-skip-link-target"},B("outline.contentHeaderLabel"))),r().createElement(s.n,{searchCourseContent:t,setSearchMessage:P,inputRef:D}),y&&r().createElement(c.g,{canAccessFileManagement:C,canAccessBatchEdit:S,hasCurrentCopyDetailsErrors:E,openExportModal:I,openCopyDetailsPanel:w})),x&&r().createElement(d.Box,{mt:1,mb:.5},r().createElement(m.A,{inputRef:D,isShownInPanel:!1,message:T})))))}},345643:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({header:{paddingTop:"6px",marginBottom:"2px",position:"sticky",top:0,zIndex:e.zIndex.appBar,transition:e.transitions.create("box-shadow",{duration:e.transitions.duration.standard,easing:e.transitions.easing.easeInOut}),[e.breakpoints.up("md")]:{top:e.spacing(2)},"&::before":{content:'""',position:"absolute",inset:0,zIndex:-1}},headerBordered:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.border.main,backgroundColor:e.palette.background.default},headerDetached:{paddingTop:e.spacing(2),"&::after":{content:'""',position:"absolute",inset:0,boxShadow:"0px 5px 0px rgba(0, 0, 0, 0.04)",zIndex:-1}},headerWithoutOverflow:{paddingTop:"4px",paddingBottom:"5px"},content:{display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative"}}))},628800:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(202784),r=n.n(i),s=n(847969),o=n(311822),a=n(410628);let l=e=>{let{exitCallback:t}=e,[n,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),u=(0,a.q)(),p=(e=!1)=>{d(e),l(!0)};return r().createElement(o._X,{analyticsId:"components.directives.fileUpload.confirmLeave.dialog","aria-labelledby":"confirm-leave-page-dialog-heading-id",open:!n,TransitionProps:{onExited:()=>{t(c),l(!1)}}},r().createElement(s.AnalyticsDialogTitle,{analyticsId:"components.directives.fileUpload.closeDuringUploadTitle",onClose:()=>p(),id:"confirm-leave-page-dialog-heading-id","aria-describedby":"confirm-leave-page-dialog-message-id"},u("components.directives.fileUpload.closeDuringUploadTitle")),r().createElement(s.AnalyticsDialogContent,{analyticsId:"components.directives.fileUpload.closeDuringUpload"},r().createElement(s.AnalyticsDialogContentText,{id:"confirm-leave-page-dialog-message-id",analyticsId:"components.directives.fileUpload.closeDuringUploadInstructions"},u("components.directives.fileUpload.closeDuringUploadInstructions"))),r().createElement(s.AnalyticsDialogActions,{analyticsId:"components.directives.fileUpload.closeDuringUploadActions"},r().createElement(s.AnalyticsDefaultButton,{analyticsId:"components.directives.fileUpload.closeDuringUploadGoBack",onClick:()=>p()},u("components.directives.fileUpload.closeDuringUploadGoBack")),r().createElement(s.AnalyticsPrimaryButton,{analyticsId:"components.directives.fileUpload.closeDuringUploadClose",onClick:()=>p(!0)},u("components.directives.fileUpload.closeDuringUploadClose"))))}},540593:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var i=n(259197);async function r(e){let{courseId:t,contentId:n,...r}=e,{images:s}=await (0,i.kyU)(t,{count:4,...r},n);return s.map(({url:e})=>e)}},233901:function(e,t,n){"use strict";n.d(t,{r:function(){return b}});var i=n(847969),r=n(327355),s=n(88818),o=n(986709),a=n(35302),l=n(259197),c=n(592493),d=n(465139),u=n(202784),p=n.n(u),m=n(755755),h=n(453923),g=n(540593);let f=(0,r.makeStyles)({imageInput:{height:"174px",marginBottom:"8px"}}),b=e=>{let{altTextValue:t,onAltTextChange:n,title:r,description:b,value:v,...y}=e,{translate:S,formatItems:C}=(0,m.h)(),E=f(),I=(0,a.d4)(),[w,A]=(0,u.useState)(!t),k=(0,h.H)(),T=(0,c.pJ)(e=>l.Ys.app.getRoute(e).params.id),P=(0,c.$M)(k),D=(0,d.zX)(e=>{A(e),n("")}),x=(0,u.useMemo)(()=>async()=>{if(!P.canGenerateKeywords)return"";let{keywords:e}=await (0,l.pzE)(k,T,{title:r,description:b});return C(e)},[P.canGenerateKeywords,T,k,b,C,r]);return p().createElement("div",{className:I.section},p().createElement(a.TV,{classes:{preview:E.imageInput},analyticsId:"course.content.learningModule.thumbnail.input",aspect:1,resizeWidth:300,sources:{local:!0,web:{courseId:k,searchTerms:x,resizeOptions:{"max-w":600}},ai:P.images.learningModules&&{generateImages:e=>(0,g.N)({courseId:k,contentId:T,prompt:e,name:r,description:b}),defaultPrompt:""}},title:p().createElement(i.AnalyticsTypography,{variant:"h2",className:"learning-module-option-header"},S("course.content.thumbnail.header")),previewStyle:"fit",value:v,...y}),v&&p().createElement(s.KHx,{analyticsId:"course.content.learningModule.thumbnail",canEdit:!0,canMarkAsDecorative:!0,altText:null!=t?t:"",maxAltTextLength:o.oUU,onAltTextChanged:n,isDecorative:w&&!t,onIsDecorativeChanged:D}))}},368721:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var i=n(592493),r=n(259197),s=n(417321);function o(e){var t,n,o;let a=(0,i.bW)(null!==(t=e.courseId)&&void 0!==t?t:"","system.admin.VIEW"),l=(0,s.N5)(),c=!!(e.contentHandler&&(null===(o=null===(n=e.contentDetail)||void 0===n?void 0:n[e.contentHandler.toString()])||void 0===o?void 0:o.gradingColumn)),d=(0,i.aq)(e.courseId);return{isEntitled:a,isGradable:c,isStudentInCourse:!!d&&r.Fce.isStudentMembership(d),markContentAsViewed:l}}},212513:function(e,t,n){"use strict";n.d(t,{l:function(){return c}});var i=n(259197),r=n(144958),s=n(563060),o=n(817426);let a=async(e,t,n,i,r)=>{let a=(0,o.uI)(e);return(a=(0,o.Ou)(a,"from_ultra","true"),t)?((0,o.Yo)(a),Promise.resolve()):r?s.Nd.goPeekState(s.MS.LaunchLtiPeek({toolHref:a,courseId:n,contentId:i})):s.Nd.goPeekState(s.MS.LaunchLtiFrame({toolHref:a}))},l=async(e,t,n)=>{var r;let s=e.contentHandler;if(!s)return Promise.reject(Error("Attempted to launch an LTI link without a valid contentHandler."));let{courseId:o,id:l,contentDetail:c}=e;return i.GQk.LtiPlacement.startsWith(s)||i.GQk.LtiLink.isEqualTo(s)?a(t,n,o,l,i.fq8.CloudDocument===(null===(r=null==c?void 0:c[s.toString()])||void 0===r?void 0:r.itemOrigin)):i.GQk.PartnerCloud.isEqualTo(s)?a(t,n,o,l,!1):Promise.reject(Error("Attempted to launch an LTI link without a valid contentHandler."))},c=async(e,t,n)=>{let i=(0,r.Qk)(e);if(!i)return Promise.reject(Error("Attempted to launch an LTI link without a valid launchLink."));let{isEntitled:o,isGradable:a,isStudentInCourse:c,markContentAsViewed:d}=t,{launchNewWindow:u}=n||{},p=void 0!==u?u:!!i.launchNewWindow;if(o)return l(e,i.link,p).then(t=>(d(e,c),t));if(a&&c){let{courseId:t,id:n}=e;return s.Nd.goPeekState(s.MS.LaunchLti({courseId:t,contentId:n})).then(t=>(d(e,c),t))}return l(e,i.link,p).then(t=>(d(e,c),t))}},595193:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var i=n(202784),r=n.n(i),s=n(410628),o=n(140492),a=n(233500),l=n(563060);let c=e=>{let{id:t,buttonAriaLabel:n,ButtonComponent:i,locationData:c,isEmptyOutline:d=!1,classes:u}=e,p=(0,s.q)(),m=(0,a.P)(c,{isEmptyOutline:d}).map(({route:e,click:t,...n})=>(e?n.onClick=()=>{l.Nd.goPeekState(e)}:t&&(n.onClick=()=>t()),n)),h=null!=n?n:p("components.directives.add-content-button.aria-label.content.add-button-label");return r().createElement(o.$,{id:t,buttonAriaLabel:d?void 0:h,buttonAnalyticsId:"components.directives.add-content-button.course-outline.addContentMenu.button",menuAnalyticsId:"components.directives.add-content-button.contextualMenu",classes:u,items:m,ButtonComponent:i})}},140492:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var i=n(202784),r=n.n(i),s=n(429473),o=n(88818);let a=e=>{let{id:t,buttonAriaLabel:n,buttonAnalyticsId:a,ButtonComponent:l=s.q,menuAnalyticsId:c,items:d,classes:u}=e,[p,m]=(0,i.useState)(void 0),[h,g]=(0,i.useState)(!1),f=!!p,b=`add-content-menu-${t}`,v=`add-content-menu-button-${t}`,y=(0,i.useCallback)(()=>{m(void 0),g(!0)},[]),S=(0,i.useCallback)(e=>{m(e.currentTarget)},[]),C=(0,i.useMemo)(()=>d.map(e=>({...e,onClick:t=>{var n;try{null===(n=e.onClick)||void 0===n||n.call(e,t)}finally{y()}}})),[d,y]);return r().createElement(r().Fragment,null,r().createElement(l,{analyticsId:a,id:v,"aria-controls":p?b:void 0,"aria-haspopup":"menu","aria-label":n,"aria-expanded":f||h,onClick:S,classes:u}),r().createElement(o.rMz,{anchorEl:p,open:f,onClose:y,MenuListProps:{"aria-labelledby":v,id:b},TransitionProps:{onExited:()=>g(!1)},items:C,analyticsId:c}))}},429473:function(e,t,n){"use strict";n.d(t,{q:function(){return c}});var i=n(202784),r=n.n(i),s=n(906277),o=n(9218),a=n(743983),l=n(179402);let c=r().forwardRef((e,t)=>{let{className:n,...i}=e,c=(0,l.y)(e);return r().createElement("div",{className:c.divider},r().createElement(o.b,{...i,ref:t,classes:{focusVisible:c.focusVisibleAddButton},className:(0,s.Z)(n,c.addButton)},r().createElement(a.m,{className:c.addButtonIcon})))})},772685:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var i=n(327355),r=n(202784),s=n.n(r),o=n(410628);let a=(0,i.makeStyles)(e=>({placeholderContainer:{backgroundColor:e.palette.background.b5,margin:"10px 0",padding:"20px"},placeholderText:{fontWeight:e.typography.fontWeightBold,textAlign:"center"}})),l=()=>{let e=(0,o.q)(),t=a(),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},[]),s().createElement("div",{className:t.placeholderContainer,ref:n,tabIndex:-1},s().createElement("div",{className:t.placeholderText},e("components.directives.content-item-base.copy-placeholder")),s().createElement("div",{className:"sr-only"},e("components.directives.content-item-base.please-wait")))}},217603:function(e,t,n){"use strict";n.d(t,{Nr:function(){return k},pj:function(){return A}});var i=n(202784),r=n.n(i),s=n(198022),o=n(906277),a=n(643553),l=n(729033),c=n(88818),d=n(935843),u=n(261324),p=n(268372),m=n(458706),h=n(573962),g=n(922971),f=n(100936),b=n(776998),v=n(587003),y=n(512777),S=n(756006),C=n(964418),E=n(685299),I=n(259197),w=n(147579);let A="start",k=r().memo(e=>{var t;let{parentFolder:n,loadMoreContent:k,showTopAddButton:T=!1,root:P=!1,centeredDivider:D=!1,showStudentAuthorship:x,collapsibleCourseLinkId:R}=e,{AddContentButton:L,textOnPage:N}=(0,i.useContext)(E.E),$=(0,u.r)(),O=(0,d.T)(e.contents,null==n?void 0:n.id),G=(0,f.j)(null==n?void 0:n.id,O),_=(0,l.yK)({nestingLevel:$,isButtonVisible:P||T}),M=(0,i.useRef)(null),B=(0,p.p)(O),F=(0,i.useRef)(),U=(0,w.H)(),V=(0,C.I)(n,!!R),{setNodeRef:H,listeners:q}=(0,S.d)({id:`${null==n?void 0:n.id}-contents-external-file-droppable`,data:{parentId:null==n?void 0:n.id,nestingLevel:$},disabled:!V});(0,i.useEffect)(()=>()=>{F.current=B});let j=!!O&&(0,a.b)(O),z=j&&!U&&!R;return r().createElement(y.Y,{id:n?(0,v.o)(n):void 0,items:G,isInCollapsibleCourseLinkId:!!R},r().createElement("div",{ref:H,...q},z&&r().createElement(L,{id:`start-${null!==(t=null==n?void 0:n.id)&&void 0!==t?t:(0,s.v4)()}`,parentId:null==n?void 0:n.id,positionBefore:A,item:null==O?void 0:O[0],classes:{divider:(0,o.Z)(_.divider,D?_.centeredDivider:_.topDivider)}}),r().createElement("div",{"data-togglable-bottom":n?(0,v.o)(n):"",className:D?_.togglableBottom:""}),r().createElement("div",{ref:M,className:_.contentList},null==G?void 0:G.map((e,t,i)=>{let s=(0,o.Z)({root:P,"addable-item":j},"content-list-item",_.contentListItem),{neighborBefore:a,neighborAfter:l}=(0,b.G)(i,t),c=!P&&I.Xgx.isInForcedSequenceLearningModule(e);return r().createElement(g.E,{key:(0,v.o)(e,{stable:!0}),item:e,parentId:null==n?void 0:n.id,loadMoreContent:k,showAddButton:z,neighborBeforeId:c?null==a?void 0:a.contentId:void 0,neighborAfterId:c?null==l?void 0:l.contentId:void 0,className:s,showStudentAuthorship:x,collapsibleCourseLinkId:R})}),r().createElement(c.oxm,{afterLoad:()=>{var e;let t=(0,h.g)(O,null!==(e=F.current)&&void 0!==e?e:B);t&&(0,m.M)(t,M)},loader:()=>n&&k?k(n,!0):Promise.resolve(),incomingLoadCount:B,axLoadMoreButtonLabelKey:null==N?void 0:N.axLoadMoreButtonLabelKey,showLoadButtonOnFocus:!0}))))})},927475:function(e,t,n){"use strict";n.d(t,{z:function(){return m}});var i=n(202784),r=n.n(i),s=n(553476),o=n(563060),a=n(217603),l=n(261324),c=n(451772),d=n(361828),u=n(721642),p=n(685299);let m=e=>{var t;let{contents:n,parentFolder:m,loadMoreContent:h,moveContent:g,showStudentAuthorship:f}=e,b=(0,u.y)(),{fileUploads:v}=(0,i.useContext)(p.E),y=r().createElement(a.Nr,{contents:n,loadMoreContent:h,parentFolder:m,root:!0,showStudentAuthorship:f});return v&&(y=r().createElement(d.I,null,y)),r().createElement(s.Wh,null,r().createElement(l.Y,{value:0},r().createElement(o.f8,null,r().createElement("div",{className:(null!==(t=null==n?void 0:n.length)&&void 0!==t?t:0)>0?void 0:b.root},r().createElement(c.h,{moveContent:g,showStudentAuthorship:f},y)))))}},721642:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(327355),r=n(969875);let s=(0,i.makeStyles)(e=>({root:{position:"relative","& > .native-drag-top::after, & > .native-drag-bottom::after":{...(0,r.J)(e),top:"-5px",bottom:"-5px",left:"-5px",right:"-5px",height:void 0}}}))},880949:function(e,t,n){"use strict";n.d(t,{s:function(){return f}});var i=n(259197),r=n(592493),s=n(202784),o=n.n(s),a=n(643553),l=n(581905),c=n(685299),d=n(772685),u=n(927475),p=n(490059),m=n(353245),h=n(822580);function g(e){return!e.children||!(0,a.b)(e.children)}let f=e=>{var t;let{showContentImportProgress:n,createFileContent:a,createEmptyFolder:f,deleteContentItem:b,canEdit:v,isCourseComplete:y,...S}=e,C=(0,r.ye)(i.x40.AiFeatures);(0,r.av)(null===(t=S.parentFolder)||void 0===t?void 0:t.courseId);let{modals:E,trackUpload:I}=(0,h.y)(S.parentFolder,b),w=(0,l.u$)(S.parentFolder),A=(0,s.useMemo)(()=>({AddContentButton:m.k,shouldShowEmptyListMessage:g,fileUploads:{createFileContent:a,deleteContent:b,createEmptyFolder:f,trackUpload:I},textOnPage:{axLoadMoreButtonLabelKey:"components.directives.content.content-outline.infiniteScroll.content.loadMoreButton.label.plural",deleteConfirmationKeyVariant:"course-outline"},analyticsIds:{folderTitle:"content.item.folder.toggleFolder.button",discussionTitle:"content.item.courses.outline.gradebook.item.forum.link",editableGroupCount:"content.item.course.outline.contentItemBase.editGroups.link"}}),[a,b,f,I]);return o().createElement(o().Fragment,null,E,n&&o().createElement(d.N,null),o().createElement(c.E.Provider,{value:A},C&&w===l.YT.Empty?o().createElement(p.Q,{canEdit:v,isCourseComplete:y,parentFolder:S.parentFolder}):o().createElement(u.z,{...S})))}},184030:function(e,t,n){"use strict";n.d(t,{F:function(){return a},N:function(){return l}});var i=n(202784),r=n(623094),s=n(817426),o=n(902682);let a={onDragStart:()=>void 0,onDragMove:()=>void 0,onDragOver:()=>void 0,onDragEnd:()=>void 0,onDragCancel:()=>void 0},l=()=>{let e=(0,o._)();return(0,r.IJ)((0,i.useMemo)(()=>({onDragStart({active:t}){let n=e.onDragStart({active:t});n&&(0,s.ul)(n)},onDragEnd({active:t,over:n}){let i=e.onDragEnd({active:t,over:n});i&&(0,s.ul)(i)},onDragCancel({active:t,over:n}){let i=e.onDragCancel({active:t,over:n});i&&(0,s.ul)(i)}}),[e])),null}},902682:function(e,t,n){"use strict";n.d(t,{_:function(){return a}});var i=n(866548),r=n(202784),s=n(410628),o=n(515512);let a=()=>{let e=(0,s.q)(),t=(0,r.useRef)(null);return(0,r.useMemo)(()=>({onDragStart({active:n}){if(!(0,i.zw)(n))return;let r=n.data.current.item,{index:s,containerId:a,items:l}=n.data.current.sortable;return t.current={containerId:a,index:s},e("courseCore.course.dragAndDrop.announcements.dragStart",{contentItemTitle:null==r?void 0:r.title,currentPosition:s+1,contentItemsCount:(0,o.x)(l.length)})},onDragCancel({active:n}){if(t.current=null,!(0,i.zw)(n))return;let r=n.data.current.item;return e("courseCore.course.dragAndDrop.announcements.dragCancel",{contentItemTitle:null==r?void 0:r.title})},onDragEnd({active:n,over:r}){if(!(0,i.zw)(n)||!(0,i.zw)(r))return;let s=n.data.current.item,{index:a,containerId:l,items:c}=r.data.current.sortable,d=null==t?void 0:t.current;if(t.current=null,l===(null==d?void 0:d.containerId)&&a===(null==d?void 0:d.index)){if(n.data.current.sortable.containerId===d.containerId)return e("courseCore.course.dragAndDrop.announcements.dragEndPositionRetained",{contentItemTitle:null==s?void 0:s.title});let{index:t,items:i}=n.data.current.sortable;return e("courseCore.course.dragAndDrop.announcements.dragEnd",{contentItemTitle:null==s?void 0:s.title,finalPosition:t+1,contentItemsCount:(0,o.x)(i.length)})}return e("courseCore.course.dragAndDrop.announcements.dragEnd",{contentItemTitle:null==s?void 0:s.title,finalPosition:a+1,contentItemsCount:(0,o.x)(c.length)})}}),[e])}},375501:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var i=n(202784),r=n.n(i),s=n(623094),o=n(928316),a=n(261324),l=n(865447),c=n(476700);let d=r().memo(l.S),u=e=>{let{item:t,nestingLevel:n=0,showStudentAuthorship:l}=e,u=(0,i.useMemo)(()=>({isDragOverlay:!0,isSorting:!0}),[]);return r().createElement(c.C.Provider,{value:u},r().createElement(a.Y,{value:n},(0,o.createPortal)(r().createElement(s.y9,{zIndex:1011},t&&r().createElement(d,{item:t,showStudentAuthorship:l})),document.body)))}},705015:function(e,t,n){"use strict";n.d(t,{bP:function(){return s},o6:function(){return i},pq:function(){return r}});let i=30,r=25,s=20},451772:function(e,t,n){"use strict";n.d(t,{h:function(){return x}});var i=n(202784),r=n.n(i),s=n(410628),o=n(928316),a=n(276635),l=n(623094),c=n(866548),d=n(825986),u=n(658601),p=n(375501),m=n(634765),h=n(992852),g=n(453895),f=n(955433),b=n(417890),v=n(163203),y=n(184030),S=n(519319),C=n(221080),E=n(580874),I=n(511231),w=n(197566),A=n(873786),k=n(259197),T=n(158550),P=n(920748);let D=(0,a.throttle)((e,t,n)=>{(0,m.f)(e,t,n)},100),x=e=>{let{children:t,moveContent:n,showStudentAuthorship:a=!1}=e,[m,x]=(0,i.useState)(),[R,L]=(0,i.useState)(0),N=(0,h.A)(),{startOpenTogglableTimer:$,cancelOpenTogglableTimer:O}=(0,E.d)(),G=(0,I.r)(),_=(0,g.v)(x),M=(0,s.q)(),B=(0,f.OA)(),F=(0,w.q)(),U=(0,i.useRef)();function V(){U.current=void 0,D.cancel(),O(),(0,S.Q)("disable"),(0,o.unstable_batchedUpdates)(()=>{x(void 0)}),D.cancel()}let H=async({active:e,over:t,activatorEvent:i})=>{var r;if(null==m?void 0:m.item){let n=i instanceof KeyboardEvent?"keyboard":"pointer",s=(0,P.s)(e,t,m,n);x({...m,folderId:"string"==typeof s?s:void 0,insertPosition:null!==(r=(0,P.i)(e,t,B,n))&&void 0!==r?r:m.insertPosition})}await (0,b.n)(e,t,m,n,B),V()},q=(0,T.useAnalyticsAugmentEventOnElement)(T.AnalyticsEventTypes.CHANGE_EVENT,e=>{var t,n;let i=null===(t=e.active.data.current)||void 0===t?void 0:t.item,r=null===(n=e.active.data.current)||void 0===n?void 0:n.nestingLevel;(0,d.ko)(d.fz.AngularMenuCloserService).closeAnyOpenAngularMenus(),(0,S.Q)("enable"),(null==i?void 0:i.id)&&i.courseId&&k.AaE.isFolderContentItem(i)&&(U.current=(0,k.bbE)(i.courseId,i.id)),i&&(0,c.zw)(e.active)&&(N(i),x({item:i,folderId:null==i?void 0:i.parentId,targetId:null==i?void 0:i.id,insertPosition:e.active.data.current.sortable.index})),"number"==typeof r&&L(r)},"content.outline.content.item.drag.start"),j=(0,T.useAnalyticsAugmentEventOnElement)(T.AnalyticsEventTypes.CHANGE_EVENT,H,"content.outline.content.item.drag.end");return r().createElement(u.O.Provider,{value:m},r().createElement(l.LB,{accessibility:{announcements:y.F,screenReaderInstructions:{draggable:M("courseCore.course.dragAndDrop.announcements.draggableScreenReaderInstructions")}},measuring:{droppable:{measure:C.O}},collisionDetection:A.z,sensors:_,onDragStart:q,onDragMove:({activatorEvent:e,active:t,over:n})=>{var i;G(e,t,n)?$(null===(i=null==n?void 0:n.data.current)||void 0===i?void 0:i.item):O()},onDragOver:({active:e,over:t,activatorEvent:n})=>{var i;let r=null===(i=null==t?void 0:t.data.current)||void 0===i?void 0:i.nestingLevel;"number"==typeof r&&L(r),n instanceof KeyboardEvent||D(e,t,x)},onDragEnd:j,onDragCancel:V,cancelDrop:({active:e,over:t,activatorEvent:n})=>F(e,t,m,U.current,n)},r().createElement(y.N,null),r().createElement(v.S,null),t,r().createElement(p.u,{item:null==m?void 0:m.item,nestingLevel:R,showStudentAuthorship:a})))}},519319:function(e,t,n){"use strict";function i(e){let t=document.querySelector('[data-base-state-name="base.courses.peek"]'),n=null==t?void 0:t.style;n&&(n.position="enable"===e?"fixed":"",n.top="enable"===e?"0":"")}n.d(t,{Q:function(){return i}})},873786:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var i=n(623094),r=n(444803);let s=e=>{var t,n,s,o,a;let{active:l}=e,c=(0,i.ey)(e),d=null===(o=null===(s=null===(n=null===(t=c[0])||void 0===t?void 0:t.data)||void 0===n?void 0:n.droppableContainer)||void 0===s?void 0:s.data)||void 0===o?void 0:o.current;return(null==d?void 0:d.type)===r.T.EndOfList&&(null==d?void 0:d.parentId)===(null===(a=l.data.current)||void 0===a?void 0:a.parentId)?c.slice(1):c}},163690:function(e,t,n){"use strict";n.d(t,{fz:function(){return m},oN:function(){return o}});var i=n(259197),r=n(409428),s=n(687786);let o=(e,t)=>{var n,i;return!!(e&&t&&(0,s.$)(t))&&(e===(null==t?void 0:t.id)||e===(null===(i=null===(n=null==t?void 0:t.children)||void 0===n?void 0:n[0])||void 0===i?void 0:i.id))},a=(e,t)=>!!t&&i.GQk.CourseLink.isEqualTo(e.contentHandler)&&(i.Xgx.isForcedSequenceModule(t)||i.Xgx.isInForcedSequenceLearningModule(t)),l=(e,t)=>!!t&&i.AaE.isFolderContentItem(e)&&(i.Xgx.isForcedSequenceModule(t)||i.Xgx.isInForcedSequenceLearningModule(t)),c=(e,t)=>!!t&&(0,r.oj)(e)&&i.AaE.isFolderContentItem(t)&&!i.AaE.isRootFolder(t),d=(e,t)=>!!t&&(0,r.oj)(e)&&i.Xgx.isLearningModule(t),u=(e,t)=>!!t&&(0,r.br)(e)&&i.Xgx.isLearningModule(t),p=(e,t)=>!!t&&(0,r.br)(e)&&i.AaE.isFolderContentItem(t)&&!i.AaE.isRootFolder(t),m=async(e,t,n)=>{if(i.GQk.CourseLink.isEqualTo(e.contentHandler)){if(a(e,t)&&!(0,r.ER)(e))return"courseCore.course.dragAndDrop.courseLinkMoveError";if(c(e,t))return"courseCore.course.dragAndDrop.folderCourseLinkMoveError.folderDestination";if(d(e,t))return"courseCore.course.dragAndDrop.folderCourseLinkMoveError.learningModuleDestination";if(p(e,t))return"courseCore.course.dragAndDrop.learningModuleCourseLinkMoveError.folderDestination";if(u(e,t))return"courseCore.course.dragAndDrop.learningModuleCourseLinkMoveError.learningModuleDestination"}return l(e,t)&&!await n?"courseCore.course.dragAndDrop.courseLinkMoveError":null}},720947:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(259197),r=n(817426);function s(e,t){if(void 0===e)return!0;let n=e&&i.AaE.isFolderContentItem(e),s=r.cY.getMaxCourseFolderDepth();return n?function e(t){var n;if(!i.AaE.isFolderContentItem(t))return 0;let r=0;for(let s of null!==(n=t.children)&&void 0!==n?n:[]){if(!i.AaE.isFolderContentItem(s))continue;let t=1+e(s);t>r&&(r=t)}return r}(e)+t<s:t<=s}},197566:function(e,t,n){"use strict";n.d(t,{q:function(){return m}});var i=n(202784),r=n.n(i),s=n(410628),o=n(88818),a=n(675689),l=n(259197),c=n(866548),d=n(163690),u=n(720947),p=n(592493);let m=()=>{let e=(0,s.q)(),t=(0,p.tx)(),{enqueueSnackbar:n,dequeueSnackbar:i}=(0,o.Ds_)(o.VWo.CourseContentOutlineDragAndDrop,!0),m=(0,p.WT)(),h=e=>{i(),n({snackbarMessage:e,isErrorOrWarning:!0,icon:r().createElement(a.AlertError,null)})};return async(n,i,r,s,o)=>{var a,p,g;if(!(0,c.zw)(n))return!0;let f=n.data.current.item,b=null===(a=null==i?void 0:i.data.current)||void 0===a?void 0:a.parentId;if(!f||(0,d.oN)(b,f))return!0;let v=function(e,t,n){var i,r,s,o;let a=null!==(r=null===(i=e.data.current)||void 0===i?void 0:i.nestingLevel)&&void 0!==r?r:0;return(0,c.zw)(t)&&(0,c.zw)(e)&&e.data.current.sortable.containerId!==t.data.current.sortable.containerId&&n instanceof KeyboardEvent?a:null!==(o=null===(s=null==t?void 0:t.data.current)||void 0===s?void 0:s.nestingLevel)&&void 0!==o?o:a}(n,i,o);if(!(0,u.y)(f,v))return h(e("course.outline.folderMaxDepthError.text")),!0;if(null==r?void 0:r.folderId){let e=l.Ys.content.getContentById(m.getState(),null!==(g=null===(p=null==i?void 0:i.data.current)||void 0===p?void 0:p.parentId)&&void 0!==g?g:r.folderId),n=await (0,d.fz)(f,e,s);if(null!==n)return h(t(n)),!0}return!1}}},481192:function(e,t,n){"use strict";n.d(t,{JU:function(){return c},MN:function(){return d}});var i=n(713994),r=n(687786),s=n(221080);let o="native-drag-top",a="native-drag-bottom";function l(e,t,n){e.classList.remove(t),e.classList.add(n)}function c(e){e.classList.remove(o,a)}function d(e,t,n){var c,d;let u;let p=null===(c=e.data)||void 0===c?void 0:c.item;if((0,r.$)(p)&&!n(null==p?void 0:p.id)){let n=(0,s.O)(e.element);u=t.y>n.top&&t.y<n.bottom?"top":"bottom"}else u=(0,i.$T)(t,e.rect);d=e.element,"bottom"===u?l(d,o,a):l(d,a,o)}},361828:function(e,t,n){"use strict";n.d(t,{I:function(){return v}});var i=n(202784),r=n.n(i),s=n(88818),o=n(675689),a=n(151350),l=n(713994),c=n(817426),d=n(955433),u=n(940509),p=n(580874),m=n(740393),h=n(481192),g=n(683397),f=n(410628),b=n(35302);let v=e=>{let{children:t}=e,{enqueueSnackbar:n,dequeueSnackbar:i}=(0,s.Ds_)(s.VWo.CourseContentOutlineDragAndDrop,!0),v=(0,a.p)(),{cancelOpenTogglableTimer:y,startOpenTogglableTimer:S}=(0,p.d)({highlight:!1}),C=(0,d.xI)(),E=(0,f.q)(),{displayModal:I,modal:w}=(0,s.ddY)(b.BH,{fileCount:0}),A={snackbarMessage:E("course.outline.externalFolderMaxDepthError.text"),isErrorOrWarning:!0,icon:r().createElement(o.AlertError,null)};return r().createElement(u.I,{onDragOver:(e,t,n)=>{var i;let r=null===(i=t.data)||void 0===i?void 0:i.item;(0,h.MN)(t,n,C),(0,m.J)(t,n,C)?S(r):y()},onDragEnter:(e,t,n)=>{(0,h.MN)(t,n,C)},onDragLeave:(e,t)=>{(0,h.JU)(t.element),y()},onDrop:async(e,t,r)=>{var s,o;(0,h.JU)(t.element),y();let a=await (0,c.L2)(e.nativeEvent),d=null!==(o=null===(s=t.data)||void 0===s?void 0:s.nestingLevel)&&void 0!==o?o:0,{filteredFiles:u,isMaxDepthExceeded:p}=(0,g.u)(a,d),m=(0,c.fQ)(u),f=(0,c.yZ)(m);if(f>c.Gg){let{confirmed:e}=await I({fileCount:f});if(!e)return}p&&(i(),n(A)),v({data:m,locationData:(0,l.ge)(t,r)})}},t,w)}},249130:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var i=n(202784),r=n.n(i),s=n(756006);let o=e=>{let{id:t,disabled:n,data:o,children:a,...l}=e,{setNodeRef:c,listeners:d}=(0,s.d)({id:t,data:o,disabled:n}),{onDragLeave:u,...p}=d,m=(0,i.useCallback)(e=>{let t=e.currentTarget;if(!(t instanceof Node))return;let n=e.relatedTarget;n instanceof Node&&t.contains(n)||null==u||u(e)},[u]);return r().createElement("div",{ref:c,...l,...p,onDragLeave:m},a)}},713994:function(e,t,n){"use strict";function i(e,t){let n=t.top+t.height/2;return e.y<=n?"top":"bottom"}function r(e,t){let n=t.height/3,i=t.top+n,r=t.top+2*n;return e.y<=i?"top":e.y<=r?"center":"bottom"}n.d(t,{$T:function(){return i},ge:function(){return s},lI:function(){return r}});let s=(e,t)=>{var n,r,s;let o={positionBefore:"start"};if(null===(n=e.data)||void 0===n?void 0:n.item){let n=e.data.item,r=i(t,e.rect);o=function(e,t,n){var i;let r={parentId:e};return"bottom"===n?(r.positionAfter=null!==(i=t.id)&&void 0!==i?i:t.positionAfter,r.positionBefore=r.positionAfter?void 0:t.positionBefore,t&&void 0!==t.position&&(r.position=t.position+1)):(r.positionAfter=t.positionAfter,r.positionBefore=r.positionAfter?void 0:t.id,t&&void 0!==t.position&&(r.position=t.position-1)),r}(null==n?void 0:n.parentId,n,r)}else(null===(r=e.data)||void 0===r?void 0:r.parentId)&&(o={parentId:null===(s=e.data)||void 0===s?void 0:s.parentId,positionBefore:"start"});return o}},683397:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var i=n(817426);let r=(e,t)=>{if(!t)return{filteredChildren:[],isMaxDepthExceeded:!0};let n=[],i=!1;return e.children.forEach(e=>{if("file"===e.type&&t>=1)n.push(e);else if("directory"===e.type){if(t>1){let s=r(e,t-1);n.push({...e,children:s.filteredChildren}),i=i||s.isMaxDepthExceeded}else i=!0}}),{filteredChildren:n,isMaxDepthExceeded:i}},s=(e,t)=>{let n=i.cY.getMaxCourseFolderDepth()-t,s=[],o=!1;return e.forEach(e=>{if("directory"===e.type){if(n>0){let t=r(e,n);s.push({...e,children:t.filteredChildren}),o=o||t.isMaxDepthExceeded}else o=!0}else"file"===e.type&&s.push(e)}),{filteredFiles:s,isMaxDepthExceeded:o}}},740393:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var i=n(713994),r=n(687786);function s(e,t,n){var s;let o=null===(s=e.data)||void 0===s?void 0:s.item;return!!((0,r.$)(o)&&n(null==o?void 0:o.id))&&"center"===(0,i.lI)(t,e.rect)}},221080:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});var i=n(623094);function r(e){if(e.dataset.contentId){let t=e.querySelector(`[data-togglable-bottom="${e.dataset.contentId}"]`);if(t){let n=(0,i.VK)(e,{ignoreTransform:!0}),r=(0,i.VK)(t,{ignoreTransform:!0});return{...n,height:r.bottom-n.top,bottom:r.bottom}}}return(0,i.VK)(e,{ignoreTransform:!0})}},920748:function(e,t,n){"use strict";n.d(t,{i:function(){return a},s:function(){return l}});var i=n(866548),r=n(687786),s=n(572016),o=n(895986);let a=(e,t,n,a)=>{var l,c,d,u,p;if(!(0,i.zw)(e)||!(0,i.zw)(t))return null!==(d=null===(c=null===(l=null==t?void 0:t.data.current)||void 0===l?void 0:l.sortable)||void 0===c?void 0:c.index)&&void 0!==d?d:null===(p=null===(u=e.data.current)||void 0===u?void 0:u.sortable)||void 0===p?void 0:p.index;let m=e.data.current,h=t.data.current,g=e.data.current.sortable.index,f=t.data.current.sortable.index;if(-1===g&&-1===f)return;if(-1===f)return g;let b=null==t?void 0:t.rect,v=null==e?void 0:e.rect.current.translated;if(!v)return f;let y=(0,s.L)({active:v,over:b});return m.sortable.containerId!==h.sortable.containerId||-1===g?"keyboard"===a&&g>=0?g:"bottom"!==y||(0,r.$)(h.item)&&n(h.item.id)?f:f+1:(0,r.$)(h.item)&&(0,o.n)(v,b)&&m.item.id!==h.item.id?n(h.item.id)&&g<f?f-1:!n(h.item.id)&&(g<f&&"top"===y||g>f&&"bottom"===y)?f+("top"===y?-1:1):f:(0,r.$)(h.item)&&n(h.item.id)?g:f},l=(e,t,n,r)=>{var s,o,a,l,c,d;return(0,i.zw)(e)&&(null===(o=null===(s=null==e?void 0:e.data.current)||void 0===s?void 0:s.sortable)||void 0===o?void 0:o.containerId)!==(null===(l=null===(a=null==t?void 0:t.data.current)||void 0===a?void 0:a.sortable)||void 0===l?void 0:l.containerId)&&"keyboard"===r?null===(c=null==e?void 0:e.data.current)||void 0===c?void 0:c.sortable.containerId:(0,i.zw)(t)?null===(d=null==t?void 0:t.data.current)||void 0===d?void 0:d.sortable.containerId:n.folderId}},634765:function(e,t,n){"use strict";n.d(t,{O:function(){return d},f:function(){return c}});var i=n(623094),r=n(687786),s=n(444803),o=n(515512),a=n(259197),l=n(163690);function c(e,t,n){n(n=>{var i,o;let c=null===(i=e.data.current)||void 0===i?void 0:i.item,d=null==t?void 0:t.data.current,u=null==d?void 0:d.item;if(!c||(null==n?void 0:n.item)&&n.item===u||(0,l.oN)(null==d?void 0:d.parentId,c))return n;if((null==d?void 0:d.type)===s.T.Container)return{item:c,folderId:null==d?void 0:d.parentId,targetId:void 0,insertPosition:0};if((null==d?void 0:d.type)===s.T.EndOfList&&!d.disabled)return{item:c,folderId:null==d?void 0:d.parentId,targetId:d.lastContentIdInList,insertPosition:null===(o=null==d?void 0:d.sortable)||void 0===o?void 0:o.items.length};if(!u)return n;if(null==d?void 0:d.isParentCourseLink)return{item:c,folderId:null==n?void 0:n.folderId,targetId:d.parentId,insertPosition:null==n?void 0:n.insertPosition};if(a.GQk.CourseLink.isEqualTo(null==u?void 0:u.contentHandler))return{item:c,folderId:null==n?void 0:n.folderId,targetId:u.id,insertPosition:null==n?void 0:n.insertPosition};if(!n&&c.parentId!==u.parentId||n&&n.folderId!==u.parentId){let t=null==d?void 0:d.sortable.index,n=e.data.current;return(null==d?void 0:d.parentId)&&(null==n?void 0:n.parentId)&&(null==d?void 0:d.parentId)!==(null==n?void 0:n.parentId)&&d.sortable.index+1===d.sortable.items.length&&!(0,r.$)(u)&&(t+=1),{item:c,folderId:u.parentId,targetId:u.id,insertPosition:t}}return n})}let d=(e,t,n)=>{var r;let a=null===(r=null==t?void 0:t.data.current)||void 0===r?void 0:r.sortable;switch(e){case i.g4.Down:return a.index!==(0,o.x)(a.items.length)-1;case i.g4.Up:return n!==s.T.EndOfList&&n!==s.T.Container;default:return!0}}},417890:function(e,t,n){"use strict";n.d(t,{n:function(){return l}});var i=n(866548),r=n(259197),s=n(687786),o=n(444803),a=n(572016);async function l(e,t,n,l,c){var d,u,p,m,h;let g=null===(d=null==e?void 0:e.data.current)||void 0===d?void 0:d.item,f=null==t?void 0:t.data.current,b=null==f?void 0:f.item;if((null==f?void 0:f.isParentCourseLink)||r.GQk.CourseLink.isEqualTo(null==b?void 0:b.contentHandler)&&c(null==b?void 0:b.id)||!(0,i.zw)(e)||!(null==g?void 0:g.id)||((null===(u=null==t?void 0:t.data.current)||void 0===u?void 0:u.type)===o.T.Container&&(null==n?void 0:n.folderId)&&await l({dragContentId:g.id,parentFolderId:n.folderId,positionBeforeId:n.targetId}),!(0,i.zw)(t)||!(null==b?void 0:b.parentId)))return;if((null==n?void 0:n.folderId)&&t.id===e.id&&n.insertPosition===e.data.current.sortable.items.length-1){await l({dragContentId:g.id,parentFolderId:n.folderId,positionAfterId:n.targetId});return}(null==n?void 0:n.folderId)&&b.id===n.item.id&&await l({dragContentId:g.id,parentFolderId:n.folderId,positionBeforeId:null!==(p=n.targetId)&&void 0!==p?p:"start"});let v=null===(m=e.data)||void 0===m?void 0:m.current.sortable.index,y=null===(h=t.data)||void 0===h?void 0:h.current.sortable.index,S=v>y;if(v!==y){if((0,s.$)(b)){let n=null==e?void 0:e.rect.current.translated,i=null==t?void 0:t.rect,r="top"===(0,a.L)({active:n,over:i});S=c(b.id)||v<y&&r||v>y&&r}S?await l({dragContentId:g.id,parentFolderId:b.parentId,positionBeforeId:b.id}):await l({dragContentId:g.id,parentFolderId:b.parentId,positionAfterId:b.id})}}},515512:function(e,t,n){"use strict";n.d(t,{P:function(){return r},x:function(){return s}});var i=n(866548);let r=({active:e,itemParentId:t})=>!(0,i.zw)(e)||e.data.current.sortable.containerId!==t,s=e=>e-1},992852:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var i=n(553476),r=n(687786),s=n(560449);function o(){return(0,i._8)(({set:e})=>t=>{(0,r.$)(t)&&e((0,s.U7)(t.id),!1)},[])}},772159:function(e,t,n){"use strict";n.d(t,{z:function(){return c}});var i=n(202784),r=n(955433),s=n(705015),o=n(540553),a=n(163203),l=n(826541);function c(e){let t=(0,i.useRef)(),n=(0,r.OA)();(0,i.useEffect)(()=>()=>{clearTimeout(t.current)},[]);let c=(0,o.l)(n,(0,r.t9)(),e,(...n)=>{t.current=setTimeout(()=>{e(...n),t.current=void 0},s.o6)}),d=(0,l.BP)(c,n);return(0,a.M)(d)}},453895:function(e,t,n){"use strict";n.d(t,{v:function(){return o}});var i=n(623094),r=n(772159);let s={start:[i.g4.Space,i.g4.Enter],cancel:[i.g4.Esc,"Tab"],end:[i.g4.Space,i.g4.Enter]};function o(e){let t=(0,r.z)(e);return(0,i.Dy)((0,i.VT)(i.MA,{activationConstraint:{distance:15}}),(0,i.VT)(i.LO,{activationConstraint:{delay:400,tolerance:5}}),(0,i.VT)(i.Lg,{coordinateGetter:t,keyboardCodes:s}))}},580874:function(e,t,n){"use strict";n.d(t,{d:function(){return s}});var i=n(202784),r=n(955433);let s=(e={highlight:!0})=>{let t=(0,i.useRef)(null),n=(0,r.K8)(),s=(0,r.t9)();function o(){t.current&&(clearTimeout(t.current.timeoutId),n(void 0),t.current=null)}return{cancelOpenTogglableTimer:o,startOpenTogglableTimer(i){var r;(null==i?void 0:i.id)&&i.id!==(null===(r=null==t?void 0:t.current)||void 0===r?void 0:r.togglableId)&&(o(),e.highlight&&n(i.id),t.current={togglableId:i.id,timeoutId:setTimeout(()=>{s(i.id,!0),o()},750)})}}}},826541:function(e,t,n){"use strict";n.d(t,{BP:function(){return c}});var i=n(866548),r=n(259197),s=n(817426),o=n(410628),a=n(444803),l=n(515512);function c(e,t){let n=(0,o.q)();return(o,c)=>{var d,u,p,m,h,g,f,b,v,y;let S=e(o,c),{active:C,over:E}=c.context;if((0,i.zw)(C)&&(0,i.zw)(E)&&S&&"announcement"in S){let e=S.announcement,o=null===(d=C.data.current)||void 0===d?void 0:d.item,c=(null==e?void 0:e.nextOver)?null===(u=e.nextOver.data.current)||void 0===u?void 0:u.item:null===(p=E.data.current)||void 0===p?void 0:p.item,I=(null==e?void 0:e.nextOver)&&(0,i.zw)(null==e?void 0:e.nextOver)?e.nextOver.data.current:E.data.current;switch(null==e?void 0:e.type){case"move":(0,s.ul)(n("courseCore.course.dragAndDrop.announcements.dragMove",{contentItemTitle:o.title,currentPosition:(null!==(m=null==I?void 0:I.sortable.index)&&void 0!==m?m:0)+1,contentItemsCount:(0,l.x)(null==I?void 0:I.sortable.items.length)}));break;case"moveToDifferentContainer":{let t=(null===(g=null===(h=null==e?void 0:e.nextOver)||void 0===h?void 0:h.data.current)||void 0===g?void 0:g.type)===a.T.Container,i=(null!==(v=null===(b=null===(f=E.data.current)||void 0===f?void 0:f.item.children)||void 0===b?void 0:b.length)&&void 0!==v?v:0)+1;(0,s.ul)(n("courseCore.course.dragAndDrop.announcements.dragMove",{contentItemTitle:o.title,currentPosition:t?1:(null!==(y=null==I?void 0:I.sortable.index)&&void 0!==y?y:0)+1,contentItemsCount:t?i:(0,l.x)(null==I?void 0:I.sortable.items.length)+1}));break}case"moveOnTogglable":(0,s.ul)(n(`courseCore.course.dragAndDrop.announcements.dragMoveOn${t(null==c?void 0:c.id)?"Open":"Closed"}Togglable`,{contentItemTitle:null==o?void 0:o.title,togglableTitle:null==c?void 0:c.title,type:n(`courseCore.course.dragAndDrop.announcements.${c&&r.AaE.isFolderContentItem(c)?"folder":"learningModule"}`)}))}}if(S&&"x"in S&&"y"in S)return{x:S.x,y:S.y}}}},511231:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var i=n(866548),r=n(687786),s=n(955433),o=n(572016);function a(){let e=(0,s.xI)();return(t,n,s)=>{var a,l;let c=null===(a=n.data.current)||void 0===a?void 0:a.item,d=null===(l=null==s?void 0:s.data.current)||void 0===l?void 0:l.item;if(t instanceof KeyboardEvent||!(0,i.zw)(n)||!(0,i.zw)(s)||!c||!(null==d?void 0:d.id))return!1;let u=n.data.current.sortable.index<s.data.current.sortable.index,p=(0,o.L)({active:n.rect.current.translated,over:s.rect});return(0,r.$)(d)&&d.id!==(null==c?void 0:c.id)&&(u&&"top"===p||!u&&"bottom"===p)&&e(d.id)}}},895986:function(e,t,n){"use strict";function i(e,t){if(!e||!t)return!1;let n=e.top+e.height/2;return t.top<=n&&n<=t.bottom}n.d(t,{n:function(){return i}})},540553:function(e,t,n){"use strict";n.d(t,{_:function(){return v},l:function(){return y}});var i=n(623094),r=n(866548),s=n(259197),o=n(687786),a=n(572016),l=n(885714),c=n(213211),d=n(501610),u=n(482067),p=n(504246),m=n(634765),h=n(705015),g=n(444803),f=n(430649);let b=[i.g4.Down,i.g4.Right,i.g4.Up,i.g4.Left],v=30;function y(e,t,n,y){return(S,C)=>{var E,I,w,A,k,T,P,D,x,R,L,N,$,O,G,_,M,B,F,U,V,H,q,j,z,W,K,Z,Q,J,Y,X;if(X=S.code,!b.includes(X))return;S.preventDefault();let{active:ee,collisionRect:et,droppableRects:en,droppableContainers:ei,over:er}=C.context,es=null===(I=null===(E=null==ee?void 0:ee.data.current)||void 0===E?void 0:E.item)||void 0===I?void 0:I.id;if(!ee||!es||!et||!er)return;if([i.g4.Left,i.g4.Right].includes(S.code))return(0,p.y)({active:ee,activeId:es,code:S.code,collisionRect:et,over:er,isOpen:e,setTogglableOpenState:t,setDndActionState:y});let eo=null===(w=er.data.current)||void 0===w?void 0:w.item;if((0,o.$)(eo)&&!e(eo.id)&&es!==eo.id){let e=(0,a.L)({active:et,over:er.rect});if(S.code===i.g4.Down&&"top"===e)return(0,u.H)(ee,er)?{x:er.rect.left,y:Math.max(er.rect.bottom-et.height,(0,d.G)({collisionRect:et,over:er.rect,draggingFrom:"below",distance:1})),announcement:{type:"move"}}:{x:er.rect.left+v,y:(0,d.G)({collisionRect:et,over:er.rect,draggingFrom:"below"}),announcement:{type:"moveOnTogglable"}};if(S.code===i.g4.Up&&"bottom"===e)return(0,u.H)(ee,er)?{x:er.rect.left,y:Math.min(er.rect.top,(0,d.G)({collisionRect:et,over:er.rect,draggingFrom:"above",distance:1})),announcement:{type:"move"}}:{x:er.rect.left+v,y:(0,d.G)({collisionRect:et,over:er.rect,draggingFrom:"above"}),announcement:{type:"moveOnTogglable"}}}let ea=(0,c.L)({active:ee,over:er,code:S.code,collisionRect:et,droppableContainers:ei,droppableRects:en}),el=null===(k=null===(A=ea.container)||void 0===A?void 0:A.data.current)||void 0===k?void 0:k.item;if(!ea.rect||!ea.container||er.id===ea.container.id)return;if((null===(T=null==ee?void 0:ee.data.current)||void 0===T?void 0:T.parentId)!==(null===(D=null===(P=ea.container)||void 0===P?void 0:P.data.current)||void 0===D?void 0:D.parentId)){if((0,m.O)(S.code,ee,null===(x=ea.container.data.current)||void 0===x?void 0:x.type)?(0,m.f)(ee,{...ea.container,rect:ea.rect},y):(0,m.f)(ee,{...ea.container,rect:ea.rect},n),S.code===i.g4.Down){let e=ei.get(null===(L=null===(R=ee.data)||void 0===R?void 0:R.current)||void 0===L?void 0:L.parentId);if(e){let t=null===(N=e.data.current)||void 0===N?void 0:N.item,n=null!==(G=null===(O=null===($=ee.data.current)||void 0===$?void 0:$.sortable)||void 0===O?void 0:O.index)&&void 0!==G?G:0,i=null===(B=null===(M=null===(_=ee.data.current)||void 0===_?void 0:_.sortable)||void 0===M?void 0:M.items)||void 0===B?void 0:B.length;if(t&&s.AaE.isFolderContentItem(t)&&0===n&&2===i){let e=2*h.pq-h.bP;return{x:ea.rect.left,y:ea.rect.top-et.height+e,announcement:{type:"moveToDifferentContainer",nextOver:ea.container}}}}return{x:ea.rect.left,y:ea.rect.top-et.height,announcement:{type:"moveToDifferentContainer",nextOver:ea.container}}}let e=null!==(F=ee.rect.current.initial)&&void 0!==F?F:et;if((null==el?void 0:el.id)===(null===(U=ee.data.current)||void 0===U?void 0:U.parentId))return{x:ea.rect.left+v,y:(0,d.G)({collisionRect:et,over:(0,l.a)(ea.rect,{x:ea.rect.left,y:ea.rect.top+e.height}),draggingFrom:"above"}),announcement:{type:"moveOnTogglable",nextOver:ea.container}};if((null===(H=null===(V=ea.container)||void 0===V?void 0:V.data.current)||void 0===H?void 0:H.type)===g.T.Container)return{x:ea.rect.left+v,y:ea.rect.top+e.height,announcement:{type:"moveToDifferentContainer",nextOver:ea.container}};let t=ei.get(null===(z=null===(j=null===(q=ea.container)||void 0===q?void 0:q.data)||void 0===j?void 0:j.current)||void 0===z?void 0:z.parentId);if(t){let e=null===(K=null===(W=t.data)||void 0===W?void 0:W.current)||void 0===K?void 0:K.item,n=null!==(J=null===(Q=null===(Z=ea.container.data.current)||void 0===Z?void 0:Z.sortable)||void 0===Q?void 0:Q.index)&&void 0!==J?J:0;if(e&&s.AaE.isFolderContentItem(e)&&0===n){let e=h.pq;return{x:ea.rect.left,y:ea.rect.bottom-e,announcement:{type:"moveToDifferentContainer",nextOver:ea.container}}}}return{x:ea.rect.left,y:ea.rect.bottom,announcement:{type:"moveToDifferentContainer",nextOver:ea.container}}}if((0,r.zw)(ee)&&(0,r.zw)(ea.container)&&(0,o.$)(el)){let e=ee.data.current.sortable.index,t=ea.container.data.current.sortable.index;if(S.code===i.g4.Down&&e<t)return{x:ea.rect.left+v,y:(0,d.G)({collisionRect:et,over:ea.rect,draggingFrom:"above"}),announcement:{type:"moveOnTogglable",nextOver:ea.container}};if(S.code===i.g4.Up&&e>t)return{x:ea.rect.left+v,y:(0,d.G)({collisionRect:et,over:ea.rect,draggingFrom:"below"}),announcement:{type:"moveOnTogglable",nextOver:ea.container}}}let ec=null===(Y=ee.rect.current.initial)||void 0===Y?void 0:Y.height;if(ec&&ec>180&&S.code===i.g4.Down&&ee.id!==er.id&&el&&!((0,o.$)(eo)&&(0,u.H)(ee,er)))return{x:ea.rect.left,y:ea.rect.bottom-ea.rect.height/2-et.height/2,announcement:{type:"move",nextOver:ea.container}};let ed=(0,f.A)(ee,ea.container)?et.height-ea.rect.height:1;return{x:ea.rect.left,y:ea.rect.top-ed,announcement:{type:"move",nextOver:ea.container}}}}},213211:function(e,t,n){"use strict";n.d(t,{L:function(){return a}});var i=n(623094),r=n(753458),s=n(873786),o=n(444803);function a(e){var t,n,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C;let{active:E,over:I,code:w,collisionRect:A,droppableContainers:k,droppableRects:T}=e,P=[];k.getEnabled().forEach(e=>{if(!e||e.disabled)return;let t=T.get(e.id);t&&(w===i.g4.Down&&A.top<t.top||w===i.g4.Up&&A.top>t.top)&&P.push(e)});let D=(0,s.z)({active:E,collisionRect:A,droppableRects:T,droppableContainers:P,pointerCoordinates:null}),x=null===(t=D.shift())||void 0===t?void 0:t.id;x===(null==I?void 0:I.id)&&(x=null!==(a=null===(n=D.shift())||void 0===n?void 0:n.id)&&void 0!==a?a:x);{let e=k.get(x);(null===(l=null==e?void 0:e.data.current)||void 0===l?void 0:l.type)===o.T.Container&&e.data.current.parentId===(null===(c=E.data.current)||void 0===c?void 0:c.parentId)&&(x=null!==(u=null===(d=D.shift())||void 0===d?void 0:d.id)&&void 0!==u?u:x)}return(null===(p=I.data.current)||void 0===p?void 0:p.type)===o.T.Container&&I.data.current.parentId===(null===(h=null===(m=k.get(x))||void 0===m?void 0:m.data.current)||void 0===h?void 0:h.parentId)&&(x=null!==(f=null===(g=D.shift())||void 0===g?void 0:g.id)&&void 0!==f?f:x),x===(0,r.Q)(null===(b=I.data.current)||void 0===b?void 0:b.parentId)&&(null===(v=E.data.current)||void 0===v?void 0:v.parentId)===(null===(y=I.data.current)||void 0===y?void 0:y.parentId)&&(x=null!==(C=null===(S=D.shift())||void 0===S?void 0:S.id)&&void 0!==C?C:x),{rect:x?T.get(x):void 0,container:x?k.get(x):void 0}}},501610:function(e,t,n){"use strict";function i(e){let{collisionRect:t,over:n,draggingFrom:i,distance:r=20}=e;return n.bottom-n.height/2-t.height/2+("above"===i?-1:1)*r}n.d(t,{G:function(){return i}})},885714:function(e,t,n){"use strict";function i(e,t){return{top:t.y,height:e.height,bottom:t.y+e.height,left:t.x,width:e.width,right:t.x+e.width}}n.d(t,{a:function(){return i}})},430649:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(866548);function r(e,t){return!!((0,i.zw)(e)&&(0,i.zw)(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId&&e.data.current.sortable.index<t.data.current.sortable.index}},482067:function(e,t,n){"use strict";n.d(t,{H:function(){return s}});var i=n(866548),r=n(572016);function s(e,t){if(!(0,i.zw)(e)||!(0,i.zw)(t))return!1;let n=e.data.current.sortable.index<t.data.current.sortable.index,s=(0,r.L)({active:e.rect.current.translated,over:t.rect});return n&&"top"===s||!n&&"bottom"===s}},163203:function(e,t,n){"use strict";n.d(t,{M:function(){return c},S:function(){return l}});var i=n(623094),r=n(202784),s=n(553476),o=n(705015);let a=(0,s.cn)({key:"contentOutline/dnd/refresher",default:()=>{}}),l=()=>{let{measureDroppableContainers:e}=(0,i.Cj)(),t=(0,s.Zl)(a),n=(0,r.useRef)();return(0,r.useEffect)(()=>()=>{clearTimeout(n.current)},[]),(0,r.useEffect)(()=>{t(()=>()=>{n.current=setTimeout(()=>{e([]),n.current=void 0},o.o6)})},[e,t]),null};function c(e){let t=(0,s.sJ)(a);return(n,i)=>{let r=e(n,i);return r&&t(),r}}},504246:function(e,t,n){"use strict";n.d(t,{y:function(){return d}});var i=n(623094),r=n(687786),s=n(572016),o=n(885714),a=n(540553),l=n(501610),c=n(482067);function d(e){var t,n,d,u;let{active:p,activeId:m,code:h,collisionRect:g,over:f,isOpen:b,setTogglableOpenState:v,setDndActionState:y}=e,S=null===(t=f.data.current)||void 0===t?void 0:t.item,C=null==S?void 0:S.id;if((0,r.$)(S)&&C&&m!==C){if(h===i.g4.Right&&!b(C)&&(0,c.H)(p,f)){let e="bottom"===(0,s.L)({active:g,over:f.rect});if(v(C,!0),e){let e=null!==(n=p.rect.current.initial)&&void 0!==n?n:g,t=(0,o.a)(f.rect,{x:f.rect.left,y:f.rect.top+e.height});return y({folderId:S.parentId,item:null===(d=p.data.current)||void 0===d?void 0:d.item,targetId:S.id,insertPosition:null===(u=f.data.current)||void 0===u?void 0:u.sortable.index}),{x:f.rect.left+a._,y:(0,l.G)({collisionRect:g,over:t,draggingFrom:"above"})}}}else if(h===i.g4.Left&&b(C))return v(C,!1),{x:f.rect.left+a._,y:(0,l.G)({collisionRect:g,over:f.rect,draggingFrom:"above"})}}}},940509:function(e,t,n){"use strict";n.d(t,{I:function(){return l},v:function(){return s}});var i=n(202784),r=n.n(i);let s=(0,i.createContext)({onDrop:void 0,onDragOver:void 0,onDragEnter:void 0,onDragLeave:void 0,registerNode:void 0});function o(e){return{x:e.clientX,y:e.clientY}}function a(e,t){var n;let{currentTarget:i}=e,{top:r,right:s,bottom:o,left:a,width:l,height:c}=i.getBoundingClientRect(),{id:d,data:u}=null!==(n=t.get(i))&&void 0!==n?n:{};return{id:d,element:i,rect:{top:r,right:s,bottom:o,left:a,width:l,height:c},data:u}}let l=e=>{let{onDrop:t,onDragOver:n,onDragEnter:l,onDragLeave:c,children:d}=e,u=(0,i.useRef)(new WeakMap),p=(0,i.useMemo)(()=>({registerNode(e,t){u.current.set(e,t)},onDragOver(e){e.preventDefault(),e.stopPropagation(),null==n||n(e,a(e,u.current),o(e))},onDragEnter(e){e.preventDefault(),e.stopPropagation(),null==l||l(e,a(e,u.current),o(e))},onDragLeave(e){e.preventDefault(),e.stopPropagation(),null==c||c(e,a(e,u.current),o(e))},onDrop(e){e.preventDefault(),e.stopPropagation(),t(e,a(e,u.current),o(e))}}),[t,n,l,c]);return r().createElement(s.Provider,{value:p},d)}},424113:function(e,t,n){"use strict";n.d(t,{a:function(){return C}});var i=n(202784),r=n.n(i),s=n(410628),o=n(88818),a=n(592493),l=n(453923),c=n(279673),d=n.n(c),u=n(595193),p=n(734876),m=n(618400),h=n(847969),g=n(675689),f=n(563060),b=n(202836),v=n(964418),y=n(249130),S=n(465139);let C=e=>{let{parentFolder:t}=e,n=(0,l.H)(),i=(0,a.$M)(n),c=(0,s.q)(),C=(0,a.tx)(),E=(0,p.y)(),I=(0,S.Me)(),w=(0,v.I)(t);return r().createElement(y.p,{className:E.container,id:`${null==t?void 0:t.id}-empty-outline-droppable`,disabled:!w,data:{parentId:null==t?void 0:t.id}},r().createElement(o.R22,{illustration:d(),prominentText:C("courseCore.course.emptyOutline.header"),subText:C("courseCore.course.emptyOutline.zeroStateDesc"),headerComponent:"h3"}),r().createElement("div",{className:E.buttonRow},r().createElement(u.B,{id:I,locationData:{positionBefore:"start",parentId:null==t?void 0:t.id},isEmptyOutline:!0,ButtonComponent:m.u}),i.canGenerateOutlines&&r().createElement(h.AnalyticsOutlineButton,{analyticsId:"course.emptyOutline.generateStructure.button",startIcon:r().createElement(g.AutoGenerate,null),onClick:()=>f.Nd.goPeekState(f.SS.GenerateStructure({positionAfter:"end"}))},c("courseCore.course.emptyOutline.generateButton"))),r().createElement(b.W,{classes:{root:E.dndOverlay}}))}},734876:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(()=>(0,i.createStyles)({container:{marginTop:"30px",position:"relative",display:"flex",flexDirection:"column","&.native-drag-top, &.native-drag-bottom":{"& $dndOverlay":{visibility:"revert"}}},dndOverlay:{visibility:"hidden"},buttonRow:{marginTop:"4px",display:"flex",justifyContent:"center",gap:"8px"}}))},618400:function(e,t,n){"use strict";n.d(t,{u:function(){return l}});var i=n(202784),r=n.n(i),s=n(410628),o=n(847969),a=n(675689);let l=e=>{let t=(0,s.q)();return r().createElement(o.AnalyticsOutlineButton,{startIcon:r().createElement(a.Add,null),...e},t("courseCore.course.emptyOutline.addButton"))}},202836:function(e,t,n){"use strict";n.d(t,{W:function(){return c}});var i=n(202784),r=n.n(i),s=n(927335),o=n(815797),a=n(410628),l=n(906277);let c=e=>{var t;let n=(0,a.q)(),i=(0,o.y)();return r().createElement("div",{className:(0,l.Z)(null===(t=e.classes)||void 0===t?void 0:t.root,i.container)},r().createElement(s.UploadFile,null),n("courseCore.course.emptyOutline.dropTargetLabel"))}},815797:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({container:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.background.paper,border:`2px dashed ${e.palette.background.b5}`}}))},490059:function(e,t,n){"use strict";n.d(t,{Q:function(){return d}});var i=n(202784),r=n.n(i),s=n(147688),o=n(424113),a=n(685299),l=n(361828),c=n(147579);let d=e=>{let{canEdit:t,isCourseComplete:n,parentFolder:d}=e,{fileUploads:u}=(0,i.useContext)(a.E);if((0,c.H)())return null;if(!t)return r().createElement(s.K,{isCourseComplete:n});let p=r().createElement(o.a,{parentFolder:d});return u?r().createElement(l.I,null,p):p}},147688:function(e,t,n){"use strict";n.d(t,{K:function(){return d}});var i=n(202784),r=n.n(i),s=n(410628),o=n(592493),a=n(88818),l=n(98774),c=n.n(l);let d=e=>{let{isCourseComplete:t}=e,n=(0,s.q)(),i=(0,o.tx)(),l=n("courseCore.course.emptyOutline.student.header"),d=i("courseCore.course.emptyOutline.student.message");return t&&(l=i("courseCore.course.emptyOutline.student.complete.header"),d=void 0),r().createElement(a.R22,{illustration:c(),prominentText:l,subText:d,headerComponent:"h3"})}},521574:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var i=n(202784),r=n.n(i),s=n(755755),o=n(410628),a=n(675689),l=n(705957),c=n(5233),d=n(685299),u=n(592493);function p(e){let{createFileContent:t,trackUpload:n}=(0,d.k)(),{locale:i}=(0,s.h)(),p=(0,u.Lx)(),m=(0,o.q)();return{hidden:!(0,l.M)(),key:"cloud-storage",analyticsId:"components.directives.add-content-button.course-outline.importContentFromCloudStorage.button",click:()=>{(0,c.w)(p,n,t,i,e)},text:m("components.directives.add-content-button.importContentFromCloudStorage.title"),icon:r().createElement(a.UploadCloud,null)}}},233500:function(e,t,n){"use strict";n.d(t,{P:function(){return m}});var i=n(202784),r=n.n(i),s=n(410628),o=n(675689),a=n(563060),l=n(467992),c=n(521574),d=n(685299),u=n(592493),p=n(453923);function m(e,t){let n=(0,s.q)(),{trackUpload:i,createFileContent:m}=(0,d.k)(),h=(0,c.H)(e),g=(0,u.Lx)(),f=(0,p.H)(),b=(0,u.$M)(f);return[{key:"create",analyticsId:"components.directives.add-content-button.contextualMenu.menuItem",text:n("components.directives.add-content-button.create"),icon:r().createElement(o.Add,null),route:a.SS.CreateContent(e)},{key:"generate-structure",analyticsId:"components.directives.generate-structure-button.contextualMenu.menuItem",text:n("courseCore.generate.beginGenerate"),icon:r().createElement(o.AutoGenerate,null),hidden:!b.canGenerateOutlines||t.isEmptyOutline||!!(e.depth&&e.depth>1),route:a.SS.GenerateStructure({positionBefore:e.positionBefore,positionAfter:e.positionAfter})},{key:"copy",analyticsId:"components.directives.add-content-button.course-outline.import.link",text:n("components.directives.add-content-button.copy"),icon:r().createElement(o.Duplicate,null),route:a.SS.CopyContent(e)},{key:"upload",analyticsId:"components.directives.add-content-button.course-outline.upload.button",text:n("components.directives.add-content-button.upload"),icon:r().createElement(o.UploadFile,null),click:()=>{(0,l.oK)(g,i,m,e)}},h,{key:"content-market",analyticsId:"components.directives.add-content-button.course-outline.openContentMarket.link",text:n("components.directives.add-content-button.contentMarket"),icon:r().createElement(o.ContentMarket,null),route:a.SS.ContentMarket(e)},{key:"content-collection",analyticsId:"components.directives.add-content-button.course-outline.contentCollection.link",text:n("components.directives.add-content-button.contentCollection"),icon:r().createElement(o.ContentCollection,null),route:a.zo.ContentCollection(e)}]}},705957:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var i=n(202784),r=n(825986);function s(){let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(0,r.ko)(r.fz.CloudDriveService).isCloudServiceAvailable().then(e=>t(!!e))},[]),e}},560449:function(e,t,n){"use strict";n.d(t,{U7:function(){return a},ig:function(){return r},oy:function(){return s}});var i=n(553476);let r=(0,i.cn)({key:"contentOutline/highlightedContentIdState",default:void 0}),s=(0,i.CG)({key:"contentOutline/isHighlightedState",get:e=>({get:t})=>!!e&&t(r)===e}),o=(0,i.cn)({key:"contentOutline/togglablesOpenState",default:{}}),a=(0,i.CG)({key:"contentOutline/isTogglableOpen",get:e=>({get:t})=>{var n;return!!e&&null!==(n=t(o)[e])&&void 0!==n&&n},set:e=>({get:t,set:n},r)=>{e&&n(o,{...t(o),[e]:!(r instanceof i.nY)&&r})}})},955433:function(e,t,n){"use strict";n.d(t,{K8:function(){return l},OA:function(){return a},t9:function(){return s},xI:function(){return o}});var i=n(553476),r=n(560449);function s(){return(0,i._8)(({set:e})=>(t,n)=>{e((0,r.U7)(t),n)},[])}function o(){return(0,i._8)(({snapshot:e})=>t=>!e.getLoadable((0,r.U7)(t)).getValue(),[])}function a(){return(0,i._8)(({snapshot:e})=>t=>e.getLoadable((0,r.U7)(t)).getValue(),[])}function l(){return(0,i.Zl)(r.ig)}},739563:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var i=n(98103);function r(e,t,n,r,s){let o=(0,i.b)(e,t);return o.depth=s,(0,i.W)(o,n,r)}},98103:function(e,t,n){"use strict";n.d(t,{W:function(){return s},b:function(){return r}});var i=n(217603);function r(e,t){var n;let i={parentId:e};return i.positionAfter=null!==(n=null==t?void 0:t.id)&&void 0!==n?n:null==t?void 0:t.positionAfter,i.positionBefore=i.positionAfter?void 0:null==t?void 0:t.positionBefore,t&&void 0!==t.position&&(i.position=t.position+1),i}function s(e,t,n){let r={...e};return t?(r.positionAfter=t,delete r.positionBefore):n&&(delete r.positionAfter,r.positionBefore=n,n===i.pj&&(r.position=0)),r}},353245:function(e,t,n){"use strict";n.d(t,{k:function(){return u}});var i=n(202784),r=n.n(i),s=n(595193),o=n(535503),a=n(819118),l=n(739563),c=n(261324),d=n(906277);let u=e=>{let t,n;let{classes:i,parentId:u,item:p,id:m}=e;"positionBefore"in e?t=e.positionBefore:"positionAfter"in e&&(n=e.positionAfter);let h=(0,c.r)(),g=(0,o.y)(),f=(0,l.N)(u,p,n,t,h+1),b=(0,a.b)(f,p);return r().createElement(s.B,{id:m,locationData:f,classes:{divider:(0,d.Z)(null==i?void 0:i.divider,g.divider),addButton:(0,d.Z)(null==i?void 0:i.addButton,g.addButton)},buttonAriaLabel:b})}},535503:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({divider:{"&::before":{right:"var(--divider-inline-end)",[e.breakpoints.up("sm")]:{left:"var(--divider-inline-start)"}}},addButton:{opacity:1,"&:hover, &:active":{opacity:1},"&::after":{left:"var(--divider-inline-start)",[e.breakpoints.up("sm")]:{right:"var(--divider-inline-end)"}},[e.breakpoints.up("sm")]:{opacity:"var(--add-button-opacity, 0)"}}}))},819118:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var i=n(410628);function r(e,t){let n=(0,i.q)();if(!t)return;let r=e.positionAfter?"after":"before";return n(`components.directives.add-content-button.aria-label.content.add-button-label-item-name-${r}`,{itemName:t.title})}},5233:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var i=n(198022),r=n(425608),s=n(825986);async function o(e,t,n){let r=(0,i.v4)(),s=await e(void 0,null,r,!1,t);if(s)return{content:s,correlationId:r,file:n}}async function a(e,t,n){let i=[];for(let r of e)i.push(o(t,n,r));return(await Promise.all(i)).filter(e=>void 0!==e)}async function l(e,t,n,o,l){let c=(0,s.ko)(s.fz.CloudDriveService),d=await c.cloudDriveStorage.openFilePicker(o,!0);if(!(null==d?void 0:d.length))return;let u=(0,i.v4)(),p=await a(d,n,l);p.length>0&&(t({type:"uploadStarted",payload:{groupId:u,uploadIds:p.map(({correlationId:e})=>e)}}),e((0,r.ql)(u,p)))}},729437:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});let i=(e,t,n)=>{if(t)for(let i of function* e(t){if(yield t,t.children)for(let n=0;n<t.children.length;n++)yield*e(t.children[n])}(t)){let{uploadCorrelationId:t}=i.ui;t&&e.includes(t)&&n(i)}}},467992:function(e,t,n){"use strict";n.d(t,{C1:function(){return p},oK:function(){return m}});var i=n(198022),r=n(817426),s=n(425608),o=n(259197);async function a(e){let{createFileContent:t,locationData:n,file:r,isInsideFolder:s}=e,o=(0,i.v4)(),a=await t(void 0,r,o,s,n);if(a)return{content:a,correlationId:o,file:r}}async function l(e){let{files:t,...n}=e;return(await Promise.all(t.map(e=>a({...n,file:e})))).filter(e=>void 0!==e)}async function c(e){let{dispatch:t,trackUpload:n,isInsideFolder:r,...o}=e,a=(0,i.v4)();n({type:"trackGroup",payload:{groupId:a}});let c=await l({...o,isInsideFolder:r});c.length>0?(n({type:"uploadStarted",payload:{groupId:a,uploadIds:c.map(({correlationId:e})=>e)}}),t((0,s.ll)(a,r,c))):n({type:"untrackGroup",payload:{groupId:a}})}async function d(e){let{directory:t,createEmptyFolder:n,createFileContent:i,locationData:r,groupId:s}=e,o=await n(t.name,r,s),l={parentId:null==o?void 0:o.id};return(await Promise.all(t.children.map(t=>"file"===t.type?a({createFileContent:i,file:t.file,isInsideFolder:!0,locationData:l}):d({...e,directory:t,locationData:l,groupId:""})))).reduce((e,t)=>(Array.isArray(t)?e.push(...t):t&&e.push(t),e),[])}async function u(e){let{dispatch:t,trackUpload:n,...r}=e,a=(0,i.v4)();t(o.Nwg.fileUpload.updateDirectoryUploadStatus(a,o.XXy.InProgress)),n({type:"trackGroup",payload:{groupId:a}});let l=await d({...r,groupId:a});l.length>0?(n({type:"uploadStarted",payload:{groupId:a,uploadIds:l.map(({correlationId:e})=>e)}}),t((0,s.ll)(a,!0,l))):(t(o.Nwg.fileUpload.updateDirectoryUploadStatus(a,o.XXy.Complete)),n({type:"untrackGroup",payload:{groupId:a}}))}async function p(e){let t=[],n=[];e.data.forEach(i=>{"file"===i.type?n.push(i.file):t.push(u({...e,directory:i}))}),n.length>0&&t.push(c({...e,files:n,isInsideFolder:!1})),await Promise.all(t)}async function m(e,t,n,i){try{let s=await (0,r.rB)({multiple:!0});c({files:s,dispatch:e,trackUpload:t,createFileContent:n,locationData:i,isInsideFolder:!1})}catch(e){}}},21808:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var i=n(202784),r=n(88818),s=n(35302),o=n(729437),a=n(30911);let l=(e,t,n)=>{let{oversizedUploadIds:l,untrackUploadIds:c}=(0,a.o)(e.current),{displayModal:d,modal:u}=(0,r.ddY)(s.w,{uploadIds:l});return(0,i.useEffect)(()=>{async function e(e){try{await d()}finally{c(e),(0,o.R)(e,t,n)}}0!==l.length&&e(l)},[l,d,c,t,n]),u}},822580:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var i=n(35302),r=n(202784),s=n.n(r),o=n(21808),a=n(67912);function l(e,t){let n=(0,r.useRef)(new Set),l=(0,i.st)(n),c=(0,a.G)(n),d=(0,o.v)(n,e,t),u=(0,r.useCallback)(e=>{switch(e.type){case"trackGroup":n.current.add(e.payload.groupId);break;case"uploadStarted":n.current.add(e.payload.groupId),l(e.payload.groupId,e.payload.uploadIds);break;case"untrackGroup":n.current.delete(e.payload.groupId)}},[l]);return{modals:s().createElement(s().Fragment,null,c,d),trackUpload:u}}},67912:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var i=n(88818),r=n(628800),s=n(563060),o=n(259197),a=n(825986),l=n(425608),c=n(592493);function d(e){let t=(0,c.Lx)(),{displayModal:n,modal:d}=(0,i.ddY)(r.Z,{});async function u(i,r,a){!(e.current.size<=0)&&(i.preventDefault(),(await n()).confirmed&&(e.current.forEach(e=>{t(o.Nwg.fileUpload.abortGroupUploads(e))}),t((0,l.V5)()),e.current.clear(),s.Nd.goRoute(r.name,a)))}return(0,a.wI)(a.i7.RouterStateChangeStart,async(e,t,n,i)=>{i.name!==t.name&&await u(e,t,n)}),d}},30911:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var i=n(202784),r=n(35302);function s(e){let t=[];return e.forEach(({oversizedFiles:e})=>{t=t.concat(e)}),t}let o=e=>{let t=(0,r.Xd)(e),[n,o]=(0,i.useState)(()=>s(t));return(0,i.useEffect)(()=>{let e=s(t);o(t=>{let n=e.filter(e=>!t.includes(e));return 0===n.length?t:[...t,...n]})},[t]),{oversizedUploadIds:n,untrackUploadIds:(0,i.useCallback)(e=>{o(t=>t.filter(t=>!e.includes(t)))},[])}}},151350:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var i=n(202784),r=n(685299),s=n(467992),o=n(592493);let a=()=>{let e=(0,o.Lx)(),{trackUpload:t,createFileContent:n,createEmptyFolder:a}=(0,r.k)();return(0,i.useCallback)(({data:i,locationData:r})=>(0,s.C1)({createEmptyFolder:a,createFileContent:n,data:i,dispatch:e,locationData:r,trackUpload:t}),[e,t,n,a])}},764299:function(e,t,n){"use strict";n.d(t,{A:function(){return d}});var i=n(202784),r=n.n(i),s=n(410628),o=n(452852),a=n(847969),l=n(327355),c=n(563060);let d=e=>{let{isShownInPanel:t,message:n,inputRef:d}=e,u=(0,s.q)(),p=(0,l.useTheme)(),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var e;null===(e=m.current)||void 0===e||e.focus()},[n]),r().createElement(l.Box,{display:"flex",flexDirection:t?"column":"row",alignItems:t?"flex-start":"normal",gridGap:p.spacing(1)},r().createElement(a.AnalyticsTypography,{ref:m,tabIndex:-1,component:"h3",variant:"h4"},u("courseCore.components.contentSearch.allItemsSearch.showingResultsFor"),"\xa0",r().createElement(o.a,{highlight:n},n)),r().createElement(a.AnalyticsLink,{component:"button",tabIndex:0,onClick:()=>{var e;c.Nd.search({search:void 0,searchedContentId:void 0}),null===(e=null==d?void 0:d.current)||void 0===e||e.focus()},analyticsId:"content.search.clear-search.button"},r().createElement(a.AnalyticsTypography,{variant:"body2"},u("courseCore.components.contentSearch.allItemsSearch.clearSearch"))))}},82769:function(e,t,n){"use strict";n.d(t,{o:function(){return c}});var i=n(202784),r=n.n(i),s=n(259197),o=n(986709),a=n(755169),l=n(249313);let c=({item:e,searchTerm:t,setDropdownVisibility:n,setSearchMessage:i,optionProps:c})=>{var d,u;let p=(0,l.w)(null===(d=e.contentHandler)||void 0===d?void 0:d.toString());if(p===o.DXv.CourseLink)return r().createElement(a.bT,{item:e,searchTerm:t,setDropdownVisibility:n,setSearchMessage:i,optionProps:c});if(e.visibility===o.hbA.Restricted&&!(null===(u=e.permissions)||void 0===u?void 0:u.edit))return r().createElement(a.dq,{item:e,searchTerm:t,setDropdownVisibility:n,setSearchMessage:i,optionProps:c});switch(p){case o.DXv.TestLink:case o.DXv.SurveyLink:return r().createElement(a.Np,{searchTerm:t,item:e,optionProps:c});case o.DXv.Discussion:return r().createElement(a.oO,{searchTerm:t,item:e,optionProps:c});case o.DXv.Document:case o.DXv.Page:return r().createElement(a.WZ,{searchTerm:t,item:e,optionProps:c});case o.DXv.Folder:if(s.AaE.isBbPage(e))return r().createElement(a.v1,{searchTerm:t,item:e,optionProps:c});return r().createElement(a.dQ,{item:e,searchTerm:t,setDropdownVisibility:n,setSearchMessage:i,optionProps:c});case o.DXv.Journal:return r().createElement(a.G_,{searchTerm:t,item:e,optionProps:c});case o.DXv.LearningModule:return r().createElement(a.rf,{item:e,searchTerm:t,setDropdownVisibility:n,setSearchMessage:i,optionProps:c});case o.DXv.RusticiScorm:return r().createElement(a.bh,{searchTerm:t,item:e,optionProps:c});case o.DXv.File:return r().createElement(a.XG,{searchTerm:t,item:e,optionProps:c});case o.DXv.ExternalLink:return r().createElement(a.Os,{searchTerm:t,item:e,optionProps:c});case o.DXv.PartnerCloud:return r().createElement(a.k2,{searchTerm:t,item:e,optionProps:c});case o.DXv.LtiPlacement:return r().createElement(a.Gz,{searchTerm:t,item:e,optionProps:c});case o.DXv.LtiLink:if(s.ddT.isCloudDocument(e))return r().createElement(a.kw,{searchTerm:t,item:e,optionProps:c});return r().createElement(a.SW,{searchTerm:t,item:e,optionProps:c});default:return r().createElement(a.$c,{searchTerm:t,item:e,optionProps:c})}}},626427:function(e,t,n){"use strict";n.d(t,{M:function(){return S}});var i=n(202784),r=n.n(i),s=n(410628),o=n(88818),a=n(592493),l=n(453923),c=n(721521),d=n(465139),u=n(82769),p=n(764299),m=n(833481),h=n(32238),g=n(847969),f=n(906277),b=n(346261),v=n(327355),y=n(563060);let S=e=>{let{setSearchBarVisibility:t,className:n,isShownInPanel:S,searchCourseContent:C,setHeaderMessage:E,inputRef:I}=e,{search:w}=(0,m.X)(),A=S&&""!==w,[k,T]=(0,i.useState)(""),[P,D]=(0,i.useState)(!1),[x,R]=(0,i.useState)(""),L=(0,l.H)(),{contents:N,count:$,isLoading:O,isError:G,search:_}=(0,a.zk)(L),M=(0,i.useRef)(null),B=(0,s.q)(),F=(0,c.y)(),U=(0,d.y1)(e=>{_(e,4),D(!0)},250),V=()=>{t&&(D(!1),""===k&&t(!1))},H=()=>{U.cancel(),""!==k&&(S?R(`"${k}"`):E&&E(`"${k}"`),D(!1),y.Nd.search({search:k}))};(0,h.G)(S,C),(0,i.useEffect)(()=>{T(w)},[w]);let q=(0,i.useCallback)(()=>r().createElement(g.AnalyticsTypography,{variant:"body1"},B("courseCore.components.contentSearch.error.noResultsFound")),[B]),j=(0,i.useCallback)(()=>r().createElement(v.Box,{display:"flex"},r().createElement(g.AnalyticsTypography,{variant:"body1"},B("courseCore.components.contentSearch.error.networkError")),r().createElement(g.AnalyticsTypography,{variant:"body1",className:(0,f.Z)(F.link,F.withLeftSpace)},B("courseCore.components.contentSearch.error.tryAgain"))),[F.link,F.withLeftSpace,B]),z=(0,i.useCallback)((e,t)=>r().createElement(u.o,{optionProps:e,key:t.id,item:t,searchTerm:k,setDropdownVisibility:D,setSearchMessage:null!=E?E:R}),[k,E]);return r().createElement(r().Fragment,null,r().createElement(o._Wk,{analyticsId:"course.outline.filter.searchBox",variant:"predictive-search",inputId:"course-content-filter-input",label:B("courseCore.components.contentSearch.searchBox.searchBoxPlaceholder"),clearButtonAriaLabel:B("courseCore.components.contentSearch.searchBox.searchBoxClearButton"),TextFieldProps:{fullWidth:!0},InputProps:{autoFocus:!0},onSearch:H,onChange:e=>{T(e),""!==e?U(e):(U.cancel(),D(!1))},onBlur:V,value:k,inputRef:null!=I?I:M,listboxProps:{variant:S?"inline":"floating",open:P,strings:{loadingAriaLabel:B("content.search.dropdown.loader"),subheaderText:B("courseCore.components.contentSearch.dropdown.title"),defaultActionText:B("courseCore.components.contentSearch.dropdown.showAllItemsLink",{number:$})},loading:O,error:G,renderEmptyState:q,renderErrorState:j,openOnFocus:!S&&""!==k,closeOnSelect:!G,keepSelectedOption:!1,options:N,renderCompleteOption:z,onDefaultOptionSelected:H,onErrorOptionSelected:()=>{_(k,4)},ContainerProps:{className:F.searchContainer},ClickAwayListenerProps:{onClickAway:V},SubheaderProps:{variant:"h6",component:"h3",className:b.mm},InputContainerProps:{className:null!=n?n:F.searchTextContainer},DefaultBoxProps:{className:b.Y0,pl:3}}}),A&&r().createElement(p.A,{inputRef:M,isShownInPanel:!0,message:x}))}},721521:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({searchContainer:{display:"flex",flexDirection:"column",position:"relative"},searchTextContainer:{width:"100%",margin:"0 0 10px"},popper:{width:"25vw"},link:{color:e.palette.link.active,cursor:"default","&:hover":{textDecoration:"underline"}},withLeftSpace:{marginLeft:e.spacing(1)}}))},583681:function(e,t,n){"use strict";n.d(t,{D:function(){return p}});var i=n(847969),r=n(327355),s=n(906277),o=n(202784),a=n.n(o),l=n(410628),c=n(126450),d=n(563060),u=n(147579);let p=({hasNetworkError:e,retryLastLoad:t,courseOutlineIsEmpty:n,contentLoadInProgress:o})=>{let p=(0,c.y)(),m=(0,l.q)(),h=(0,r.useTheme)(),g=(0,r.useMediaQuery)(h.breakpoints.down("sm")),f=(0,u.H)();return o?null:a().createElement(r.Box,{display:"flex",justifyContent:"center"},e&&a().createElement(r.Box,{className:(0,s.Z)(p.container,p.withTopSpace)},a().createElement(i.AnalyticsTypography,{variant:"h2"},m("courseCore.components.contentSearch.error.networkErrorOutline")),a().createElement(i.AnalyticsPrimaryButton,{analyticsId:"content.search.state.networkError.button",onClick:()=>{t(!0)}},m("courseCore.components.contentSearch.error.tryAgain"))),f&&n&&!e&&a().createElement(r.Box,{className:(0,s.Z)(p.container,p.withTopSpace)},a().createElement(i.AnalyticsTypography,{variant:"h2"},m("courseCore.components.contentSearch.error.noResultsFound")),a().createElement(i.AnalyticsPrimaryButton,{analyticsId:"course-outline.filter.search.button",onClick:()=>{g?d.Nd.leavePeekState():d.Nd.search({search:void 0})}},m("courseCore.components.contentSearch.error.goBackToCourseContent")),a().createElement("div",{className:"sr-only",role:"status","aria-live":"assertive"},m("courseCore.components.contentSearch.error.noResultsFound"))))}},126450:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(2)},withTopSpace:{marginTop:e.spacing(8),[e.breakpoints.up("sm")]:{marginTop:e.spacing(20)},[e.breakpoints.up("md")]:{marginTop:e.spacing(30)}}}))},995696:function(e,t,n){"use strict";n.d(t,{n:function(){return m}});var i=n(202784),r=n.n(i),s=n(410628),o=n(563060),a=n(626427),l=n(466471),c=n(926667),d=n(998426),u=n(847969),p=n(32238);let m=e=>{let{searchCourseContent:t,setSearchMessage:n,inputRef:m}=e,[h,g]=(0,i.useState)(!1),f=(0,s.q)(),b=(0,c.y)(),v=(0,d.Fg)(),y=(0,d.ac)(v.breakpoints.down("sm")),S=(0,o.Ls)(o.SS.ContentSearch());(0,p.G)(!0,t);let C=y?r().createElement(u.AnalyticsLink,{analyticsId:"course-outline.filter.search.button","aria-label":f("courseCore.components.contentSearch.searchBox.searchButtonAriaLabel"),href:S,className:b.searchAction},r().createElement(l.o,{"aria-hidden":"true",role:"presentation"})):r().createElement(u.AnalyticsIconButton,{analyticsId:"course-outline.filter.search.button","aria-label":f("courseCore.components.contentSearch.searchBox.searchButtonAriaLabel"),onClick:()=>{g(!0)},className:b.searchButton},r().createElement(l.o,{"aria-hidden":"true",role:"presentation"}));return r().createElement(r().Fragment,null,!h||y?C:r().createElement(a.M,{setSearchBarVisibility:g,className:b.searchTextContainerInline,isShownInPanel:!1,searchCourseContent:t,setHeaderMessage:n,inputRef:m}))}},926667:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({searchAction:{display:"inline-flex",alignItems:"center",justifyContent:"center",color:e.palette.primary.main,minWidth:40,minHeight:40,textAlign:"center","&:visited":{color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main},"&:active":{color:e.palette.primary.main}},searchButton:{height:"40px",width:"40px"},searchTextContainerInline:{width:"25vw",boxSizing:"border-box"}}))},337546:function(e,t,n){"use strict";n.d(t,{N:function(){return d}});var i=n(202784),r=n.n(i),s=n(741632),o=n(116954),a=n(986709),l=n(259197);let c=e=>{let t=e===a.IQK.Survey?"survey":"assessment";return`content.search.dropdown.item.${t}`},d=e=>{var t,n,i;let{item:d,linkedItem:u,searchTerm:p,optionProps:m}=e,h=null!==(n=null===(t=d.contentHandler)||void 0===t?void 0:t.toString())&&void 0!==n?n:l.GQk.TestLink.toString(),g=null!==(i=(0,a.r9o)(h))&&void 0!==i?i:a.IQK.Test,{linkProps:f}=(0,o.B)(null!=u?u:d,g,c);return r().createElement(s.h,{item:d,searchTerm:p,linkProps:f,optionProps:m})}},6539:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(202784),r=n.n(i),s=n(847969),o=n(247450);let a=r().forwardRef(function(e,t){let{analyticsId:n,children:i,...a}=e,l=(0,o.y)(),c="span";return e.href?c="a":e.onClick&&(c="button"),r().createElement(s.AnalyticsLink,{className:l.link,component:c,ref:t,tabIndex:0,analyticsId:`${n}.link`,...a},i)})},741632:function(e,t,n){"use strict";n.d(t,{h:function(){return h}});var i=n(202784),r=n.n(i),s=n(906277),o=n(847969),a=n(452852),l=n(346261),c=n(6539),d=n(448611),u=n(665147),p=n(410628),m=n(229723);let h=e=>{let{item:t,linkProps:n,searchTerm:h,optionProps:g}=e,f=(0,p.q)(),b=(0,d.y)(),v=(0,i.useRef)(null),y=(0,i.useRef)(null),{Icon:S,ariaLabelKey:C}=(0,u.h)(t),E=f(C);return r().createElement(o.AnalyticsListboxOption,{...g,analyticsId:n.analyticsId,className:(0,s.Z)(l.ew),ref:v,onClick:e=>{var t;(0,m.E)(e,v,y,l.ew),null===(t=null==g?void 0:g.onClick)||void 0===t||t.call(g,e)}},r().createElement(o.AnalyticsListItemIcon,{analyticsId:`${n.analyticsId}.icon`,className:b.itemIcon},r().createElement(S,{titleAccess:E})),r().createElement(c.t,{tabIndex:-1,...n,ref:y},r().createElement(o.AnalyticsListItemText,{analyticsId:`${n.analyticsId}.label`,className:b.text,primaryTypographyProps:{className:b.textContent}},r().createElement(a.a,{highlight:h},t.title))),r().createElement("span",{"aria-hidden":"true",className:b.contentType},E))}},448611:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({menuItem:{padding:e.spacing(1.5),"&:hover":{backgroundColor:e.palette.background.paper,cursor:"pointer"},"&:focus":{boxShadow:`0 0 0 1px ${e.palette.focus.main}`}},contentType:{color:e.palette.text.secondary,marginLeft:"auto",whiteSpace:"nowrap"},itemIcon:{alignItems:"center"},text:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},textContent:{display:"inline"}}))},543862:function(e,t,n){"use strict";n.d(t,{b:function(){return y}});var i=n(202784),r=n.n(i),s=n(986709),o=n(337546),a=n(482336),l=n(989335),c=n(76565),d=n(370818),u=n(475757),p=n(117600),m=n(778823),h=n(321017),g=n(453923),f=n(592493),b=n(792477),v=n(74105);let y=e=>{var t;let{item:n,setSearchMessage:i,searchTerm:y,setDropdownVisibility:S,optionProps:C}=e,E=function(e){var t,n;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[s.DXv.CourseLink])||void 0===n?void 0:n.linkSourceId,r=(0,g.H)();return(0,f.r0)(r,i)}(n),I=(0,b.y)(E);if(n.visibility===s.hbA.Restricted&&!(null===(t=n.permissions)||void 0===t?void 0:t.edit)){let e=I===s.DXv.Discussion;return r().createElement(v.d,{item:n,linkedItem:e?E:void 0,searchTerm:y,setDropdownVisibility:S,setSearchMessage:i,optionProps:C})}switch(I){case s.DXv.TestLink:case s.DXv.SurveyLink:return r().createElement(o.N,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.Discussion:return r().createElement(a.o,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.Document:return r().createElement(l.W,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.Journal:return r().createElement(c.G,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.RusticiScorm:return r().createElement(d.b,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.File:return r().createElement(u.X,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.LtiPlacement:return r().createElement(p.G,{item:n,linkedItem:E,searchTerm:y,optionProps:C});case s.DXv.LtiLink:return r().createElement(m.S,{item:n,linkedItem:E,searchTerm:y,optionProps:C});default:return r().createElement(h.$,{item:n,linkedItem:E,searchTerm:y,optionProps:C})}}},321017:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(202784),r=n.n(i),s=n(741632);let o=e=>{let{item:t,searchTerm:n,optionProps:i}=e;return r().createElement(s.h,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.default"},optionProps:i})}},482336:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(230562);let a=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:a}=e,l=null!=n?n:t,{linkProps:c}=(0,o.B)(l,"content.search.dropdown.item.discussion");return r().createElement(s.h,{item:l,searchTerm:i,linkProps:c,optionProps:a})}},989335:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(537443);let a=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:a}=e,{linkProps:l}=(0,o.S)(null!=n?n:t,"content.search.dropdown.item.document");return r().createElement(s.h,{item:t,searchTerm:i,linkProps:l,optionProps:a})}},346261:function(e,t,n){"use strict";n.d(t,{Y0:function(){return s},ew:function(){return r},mm:function(){return i}});let i="search-dropdown-list-subheader",r="search-dropdown-list-item",s="show-all-results-option"},475757:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(804153);let a=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:a}=e,{linkProps:l}=(0,o.M)(null!=n?n:t,"content.search.dropdown.item.file");return r().createElement(s.h,{item:t,searchTerm:i,linkProps:l,optionProps:a})}},26846:function(e,t,n){"use strict";n.d(t,{Y:function(){return d},d:function(){return u}});var i=n(202784),r=n.n(i),s=n(741632),o=n(731714),a=n(35302),l=n(410628),c=n(563060);let d=(e,t)=>{let{item:n,setSearchMessage:i,setDropdownVisibility:r}=e;if(r&&r(!1),i){let e=(0,o.k)(n),r=(0,a.O1)(e);i(`${t(r)}: "${n.title}"`)}c.Nd.search({search:n.title,searchedContentId:n.id})},u=e=>{let{item:t,searchTerm:n,optionProps:i}=e,o=(0,l.q)();return r().createElement(s.h,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.folder",href:"#",onClick:()=>d(e,o)},optionProps:i})}},755169:function(e,t,n){"use strict";n.d(t,{$c:function(){return r.$},G_:function(){return c.G},Gz:function(){return p.G},Np:function(){return v.N},Os:function(){return y.O},SW:function(){return u.S},WZ:function(){return o.W},XG:function(){return l.X},bT:function(){return i.b},bh:function(){return b.b},dQ:function(){return a.d},dq:function(){return g.d},k2:function(){return f.k},kw:function(){return m.k},oO:function(){return s.o},rf:function(){return d.r},v1:function(){return h.v}});var i=n(543862),r=n(321017),s=n(482336),o=n(989335),a=n(26846),l=n(475757),c=n(76565),d=n(791232),u=n(778823),p=n(117600),m=n(270908),h=n(214866),g=n(74105),f=n(157579),b=n(370818),v=n(337546),y=n(842265)},76565:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(720454);let a=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:a}=e,{linkProps:l}=(0,o.y)(null!=n?n:t,"content.search.dropdown.item.journal");return r().createElement(s.h,{item:t,searchTerm:i,linkProps:l,optionProps:a})}},791232:function(e,t,n){"use strict";n.d(t,{r:function(){return l}});var i=n(202784),r=n.n(i),s=n(741632),o=n(410628),a=n(26846);let l=e=>{let{item:t,searchTerm:n,optionProps:i}=e,l=(0,o.q)();return r().createElement(s.h,{item:t,searchTerm:n,linkProps:{analyticsId:"content.search.dropdown.item.learning-module",href:"#",onClick:()=>(0,a.Y)(e,l)},optionProps:i})}},778823:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(202784),r=n.n(i),s=n(401394);let o=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:o}=e;return r().createElement(s.a,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.lti-link",optionProps:o})}},117600:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(202784),r=n.n(i),s=n(401394);let o=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:o}=e;return r().createElement(s.a,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.lti-placement",optionProps:o})}},401394:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var i=n(202784),r=n.n(i),s=n(741632),o=n(212513),a=n(368721),l=n(144958),c=n(825986),d=n(88818);let u=({item:e,linkedItem:t,analyticsId:n,launchNewWindow:i,searchTerm:u,optionProps:p})=>{var m,h,g,f,b;let v=null!=t?t:e,y=(0,a.M)(v),S=v.contentHandler&&(null===(g=null===(h=null===(m=v.contentDetail)||void 0===m?void 0:m[v.contentHandler.toString()])||void 0===h?void 0:h.domainConfig)||void 0===g?void 0:g.statusType),C=v.contentHandler&&(null===(b=null===(f=v.contentDetail)||void 0===f?void 0:f[v.contentHandler.toString()])||void 0===b?void 0:b.supportEmail),E=!!(0,l.Qk)(v),{displayModal:I,modal:w}=(0,d.ddY)(l.PH,{email:C});return r().createElement(r().Fragment,null,r().createElement(s.h,{item:e,searchTerm:u,linkProps:{analyticsId:n,onClick:()=>{E?(0,o.l)(v,y,{launchNewWindow:i}).catch(console.error):S&&c.Z.NeedsApproval===S&&I()}},optionProps:p}),w)}},270908:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});var i=n(202784),r=n.n(i),s=n(401394);let o=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:o}=e;return r().createElement(s.a,{item:t,searchTerm:i,linkedItem:n,analyticsId:"content.search.dropdown.item.onedrive-lti",optionProps:o})}},157579:function(e,t,n){"use strict";n.d(t,{k:function(){return l}});var i=n(202784),r=n.n(i),s=n(259197),o=n(592493),a=n(401394);let l=e=>{var t,n;let{item:i,linkedItem:l,searchTerm:c,optionProps:d}=e,u=null===(n=null===(t=(null!=l?l:i).contentDetail)||void 0===t?void 0:t[s.GQk.PartnerCloud.toString()])||void 0===n?void 0:n.providerId,p=(0,o.Cf)(u),m=!(null==p?void 0:p.responsive);return r().createElement(a.a,{item:i,searchTerm:c,linkedItem:l,analyticsId:"content.search.dropdown.item.partner-cloud-lti",launchNewWindow:m,optionProps:d})}},214866:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(713676);let a=e=>{let{item:t,searchTerm:n,optionProps:i}=e,{linkProps:a}=(0,o.U)(t,"content.search.dropdown.item.document-text");return r().createElement(s.h,{item:t,searchTerm:n,linkProps:a,optionProps:i})}},74105:function(e,t,n){"use strict";n.d(t,{d:function(){return d}});var i=n(202784),r=n.n(i),s=n(741632),o=n(731714),a=n(35302),l=n(410628),c=n(563060);let d=e=>{let{item:t,linkedItem:n,searchTerm:i,setDropdownVisibility:d,setSearchMessage:u,optionProps:p}=e,m=null!=n?n:t,h=(0,o.k)(t),g=(0,l.q)();return r().createElement(s.h,{item:m,searchTerm:i,linkProps:{analyticsId:`content.search.dropdown.item.${h}`,href:"#",onClick:()=>{let e=t.id;if(d&&d(!1),t.inSequence&&(e=t.parentId),u){let e=(0,a.O1)(h);u(`${g(e)}: "${t.title}"`)}c.Nd.search({search:m.title,searchedContentId:e})}},optionProps:p})}},370818:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(472720);let a=e=>{let{item:t,linkedItem:n,searchTerm:i,optionProps:a}=e,{linkProps:l}=(0,o.X)(null!=n?n:t,"content.search.dropdown.item.scormlaunch");return r().createElement(s.h,{item:t,searchTerm:i,linkProps:l,optionProps:a})}},842265:function(e,t,n){"use strict";n.d(t,{O:function(){return a}});var i=n(202784),r=n.n(i),s=n(741632),o=n(748383);let a=e=>{let{item:t,searchTerm:n,optionProps:i}=e,{linkProps:a}=(0,o.i)(t,"content.search.dropdown.item.url");return r().createElement(s.h,{item:t,searchTerm:n,linkProps:a,optionProps:i})}},731714:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i=n(986709),r=n(259197);function s(e){var t,n,s;if(e.contentHandler){let o=e.contentHandler.toString();if(o===i.DXv.File){let i=null===(s=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t["resource/x-bb-file"])||void 0===n?void 0:n.file)||void 0===s?void 0:s.mimeType;if(i)return(0,r.RMg)(i)}if(o===i.DXv.Folder&&r.AaE.isBbPage(e))return r.GQk.Document.iconClass;if(o===i.DXv.CourseLink){let t=r.AaE.getContentHandlerByIconUrl(e);return t===i.DXv.Discussion?r.GQk.parse(t).iconClass:r.GQk.ExternalLink.iconClass}if(o===i.DXv.TestLink){let t=e.gradingColumn;return t&&t.gradebookCategory&&t.gradebookCategory.title===i.bu3.Assignment?r.GQk.UltraAssignment.iconClass:r.GQk.TestLink.iconClass}return o===i.DXv.SurveyLink?r.GQk.SurveyLink.iconClass:r.AaE.getContentHandler(e).iconClass}return""}},32238:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(986709),r=n(202784),s=n(592493);function o(e,t){let n=(0,s.Kx)("search"),o=(0,s.Kx)("searchedContentId");(0,r.useEffect)(()=>{e&&(n?t(n,i.Ius.courseContent,i.$qS.MODIFIED_DATE_DESC,!0,o):t())},[n,t,o,e])}},229723:function(e,t,n){"use strict";n.d(t,{E:function(){return s}});var i=n(88818);let r="click-to-forward-ref";function s(e,t,n,s){var o,a,l;null===(o=n.current)||void 0===o||o.classList.add(r),(0,i.hDI)(e.target,s,r)===t.current&&(null===(a=n.current)||void 0===a||a.click()),null===(l=n.current)||void 0===l||l.classList.remove(s)}},665147:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var i=n(35302),r=n(731714),s=n(986709),o=n(23938),a=n(675689);let l=(e,t)=>{var n,l;let c=(0,r.k)(e);return e.visibility!==s.hbA.Restricted||(null===(n=e.permissions)||void 0===n?void 0:n.edit)?c?(null===(l=e.contentHandler)||void 0===l?void 0:l.toString())!==s.DXv.Folder||(0,o.rD)(e)?{Icon:(0,i.iw)(c),ariaLabelKey:(0,i.O1)(c)}:{Icon:(0,i.iw)("folder-open"),ariaLabelKey:(0,i.O1)(c)}:t||{Icon:(0,i.iw)("document-blank"),ariaLabelKey:(0,i.O1)("document-blank")}:{Icon:a.LockCircle,ariaLabelKey:(0,i.O1)(c)}}},113573:function(e,t,n){"use strict";n.d(t,{Z:function(){return p},s:function(){return r}});var i,r,s=n(202784),o=n.n(s),a=n(410628),l=n(847969),c=n(269960),d=n(592493);(i=r||(r={})).WebLink="webLink",i.CourseLink="courseLink";let u=[{id:r.WebLink,displayKey:"courseCore.course.courseLinks.webLinkTabLabel"},{id:r.CourseLink,displayKey:"courseCore.course.courseLinks.courseLinkTabLabel"}],p=e=>{let{onChange:t,value:n}=e,i=(0,c.y)(),r=(0,a.q)(),s=(0,d.gH)("courseCore.course","courseCore.organization");return o().createElement("div",{className:i.contentLinkTabs},o().createElement(l.AnalyticsTabs,{onChange:(e,n)=>t(n),value:n,analyticsId:"contentlink.tabs"},u.map(e=>o().createElement(l.AnalyticsTab,{analyticsId:`contentlink.tab.${e.id}`,key:e.id,value:e.id,label:r(s(e.displayKey)),id:`tab-${e.id}`,"aria-controls":`tabpanel-${e.id}`}))))}},269960:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({contentLinkTabs:{borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:e.palette.border.main}}))},589517:function(e,t,n){"use strict";n.d(t,{S:function(){return l}});var i=n(202784),r=n.n(i),s=n(505114),o=n(827032),a=n(233122);let l=({criteriaConfig:e,createInRoot:t,children:n})=>{let[l,c]=(0,s.U)(),[d,u]=(0,i.useState)(!1),p=(0,o.y)(),m=()=>{c(e=>!e),d||u(!0)};return r().createElement("div",{className:p.container},r().createElement(a.E,{criteriaConfig:e,createInRoot:t,isOpen:l,onPanelClose:m,setFocusOnCloseButton:d}),n(m,l))}},827032:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({container:{padding:e.spacing(0),display:"flex",height:"calc(100dvh - 226px)",[e.breakpoints.up("sm")]:{height:"calc(100dvh - 232px)"}}}))},767135:function(e,t,n){"use strict";n.d(t,{o:function(){return d}});var i=n(202784),r=n.n(i),s=n(410628),o=n(327355),a=n(847969),l=n(904486),c=n(592493);let d=({isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,loadedResults:d,initialState:u})=>{let p=(0,s.q)(),m=(0,c.gH)("courseLink.contentPanel.header.helper.course","courseLink.contentPanel.header.helper.organization"),h=(0,l.y)(),g=(0,i.useRef)(null);return(0,i.useEffect)(()=>{var t;e||null===(t=g.current)||void 0===t||t.focus()},[e]),r().createElement(o.Box,{className:h.header},!e&&r().createElement(o.Box,{className:h.headerButton,role:"search"},r().createElement(a.AnalyticsPrimaryButton,{onClick:t,analyticsId:"courseLink.containerPanel.openSearchPanelButton","aria-expanded":"false",ref:g},p("courseLink.contentPanel.header.searchButton"))),!!n&&!u&&r().createElement(o.Box,null,r().createElement(a.AnalyticsTypography,{variant:"h2",className:h.results},p("courseLink.contentPanel.header.searchResults",{loadedResults:d,totalResults:n})),r().createElement(a.AnalyticsTypography,{variant:"body1"},p(m("courseLink.contentPanel.header.helper.course")))),!e&&r().createElement(o.Box,{className:h.emptyDiv}))}},904486:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"min-content",padding:e.spacing(1.25,0),[e.breakpoints.up("sm")]:{minHeight:"76px",padding:e.spacing(.5,0)}},headerButton:{marginRight:e.spacing(1.875),[e.breakpoints.up("sm")]:{marginRight:e.spacing(1)}},results:{"&&":{marginBottom:"0px"},[e.breakpoints.up("sm")]:{whiteSpace:"nowrap"}},emptyDiv:{display:"none",[e.breakpoints.up("sm")]:{display:"flex",width:"50px"}}}))},379167:function(e,t,n){"use strict";n.d(t,{C:function(){return u}});var i=n(202784),r=n.n(i),s=n(906277),o=n(767135),a=n(410628),l=n(847969),c=n(103328),d=n(460290);let u=({isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,children:i,initialState:u,isLoading:p,loadedResults:m})=>{let h=(0,d.y)(),g=(0,a.q)();return r().createElement("div",{className:(0,s.Z)(h.container,{[h.containerOff]:e})},!p&&r().createElement(o.o,{isSearchPanelOpen:e,openSearchPanel:t,totalResults:n,loadedResults:m,initialState:u}),p?r().createElement("div",{className:h.loadingContainer},r().createElement(l.AnalyticsCircularProgress,{id:"courseLink.contentPanel.loader",ariaLabel:g("courseLink.contentPanel.loader")})):u||!n?r().createElement(c.u,{headerKey:u?"courseLink.emptyState.initialHeader.course":"courseLink.emptyState.zeroResultsHeader",messageKey:u?"courseLink.emptyState.initialMessage.course":"courseLink.emptyState.zeroResultsMessage"}):i)}},460290:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(327355),r=n(850765);let s=(0,i.makeStyles)(e=>({container:{display:"flex",flexDirection:"column",flexGrow:1,width:"100%",overflow:"auto"},loadingContainer:{...(0,r.nu)(e)},containerOff:{paddingLeft:e.spacing(4),width:"67vw",[e.breakpoints.down("xs")]:{display:"none"}}}))},103328:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var i=n(202784),r=n.n(i),s=n(410628),o=n(535346),a=n.n(o),l=n(836448),c=n(847969),d=n(592493);let u=e=>{let{headerKey:t,messageKey:n}=e,i=(0,s.q)(),o=(0,d.gH)("courseLink.emptyState.initialHeader.course","courseLink.emptyState.initialHeader.organization"),u=(0,d.gH)("courseLink.emptyState.initialMessage.course","courseLink.emptyState.initialMessage.organization"),p=(0,l.y)();return r().createElement("div",{className:p.container},r().createElement("div",{className:p.image,dangerouslySetInnerHTML:{__html:a()}}),r().createElement(c.AnalyticsTypography,{variant:"h2",className:p.title},i(o(t))),r().createElement("div",{className:p.message},i(u(n),{keyword:r().createElement("strong",null,i("courseLink.searchPanel.keywordSearch.header")),linkableItems:r().createElement("strong",null,i("courseLink.searchPanel.linkableItems.label"))})))}},836448:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(()=>({container:{display:"flex",flexDirection:"column",alignItems:"center",margin:"30px auto 0 auto"},image:{display:"inline-block",lineHeight:1,strokeWidth:1.1,stroke:"transparent",fill:"none",verticalAlign:"inherit",width:"200px",height:"200px",marginBottom:"10px"},title:{fontSize:"20px !important",marginBottom:"10px !important",marginTop:0,textAlign:"center"},message:{textAlign:"center",marginBottom:"28px",whiteSpace:"pre-wrap"}}))},233122:function(e,t,n){"use strict";n.d(t,{E:function(){return m}});var i=n(202784),r=n.n(i),s=n(906277),o=n(410628),a=n(675689),l=n(327355),c=n(847969),d=n(495710),u=n(448638),p=n(9218);let m=({criteriaConfig:e,createInRoot:t,onPanelClose:n,isOpen:m,setFocusOnCloseButton:h})=>{let g=(0,d.sl)(t),{onSearchClick:f,currentFilterState:b}=e,[v,y]=(0,i.useState)((0,d.dw)()),S=(0,o.q)(),C=(0,u.y)(),E=(0,l.useMediaQuery)(e=>e.breakpoints.down("xs")),[I,w]=(0,i.useState)(b),A=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;m&&h&&(null===(e=A.current)||void 0===e||e.focus())},[m,h]),(0,i.useEffect)(()=>{w(b)},[b]);let k=e=>{y({...v,[e]:{expanded:!v[e].expanded}})},T=(e,t)=>{let n=I.filters.map(n=>n.id===e?{...n,selected:t}:n);w(e=>({...e,filters:n}))},P=e=>{w(t=>({...t,[d.AB]:e}))};if(!m)return null;let D=S("courseLink.searchPanel.keywordSearch.header"),x=S("courseLink.searchPanel.linkableItems.label"),R=v[d.AB].expanded,L=v[d.tK].expanded,N=(0,d.RF)(I);return r().createElement("div",{role:"search",className:C.container},r().createElement("div",{className:C.header},r().createElement("div",null,r().createElement(c.AnalyticsTypography,{variant:"h2",className:C.headerText},S("courseLink.searchPanel.header")),r().createElement(p.b,{analyticsId:S("courseLink.searchPanel.clearAll"),className:C.clearAll,onClick:()=>{w(g)},disabled:N,"aria-label":S("courseLink.searchPanel.clearAll")},S("courseLink.searchPanel.clearAll"))),r().createElement(c.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",onClick:n,"aria-label":S("courseLink.searchPanel.closeLabel"),"aria-expanded":"true",ref:A},r().createElement(a.Close,null))),r().createElement("div",{className:C.searchItemsContainer},r().createElement("div",{className:C.block},r().createElement("div",{className:C.blockHeader},r().createElement(c.AnalyticsTypography,{variant:"h4",component:"h3",className:C.blockHeaderTitle},D),r().createElement(c.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",id:"button-keyword-search-input-field",className:(0,s.Z)(C.icon,{[C.iconClose]:!R}),onClick:()=>k(d.AB),"aria-label":S("courseLink.searchPanel.keywordSearch.ariaLabel"),"aria-expanded":v[d.AB].expanded,"aria-controls":"keyword-region"},r().createElement(a.ChevronUp,null))),R&&r().createElement(c.AnalyticsFormControl,{analyticsId:"courseLink.searchPanel.formControl",fullWidth:!0,className:C.keywordSearch,id:"keyword-region",role:"region","aria-labelledby":"button-keyword-search-input-field"},r().createElement(c.AnalyticsTextField,{analyticsId:"courseLink.searchPanel.textField",id:"keyword-input-field",type:"text",className:C.keywordInputField,label:S("courseLink.searchPanel.keywordSearch.placeholder"),floatingLabel:!0,value:I[d.AB],onChange:e=>P(e.target.value),inputProps:{"aria-label":S("courseLink.searchPanel.keywordSearch.placeholder")}}))),r().createElement("div",{className:C.block},r().createElement("div",{className:C.blockHeader},r().createElement(c.AnalyticsTypography,{variant:"h4",component:"h3",className:C.blockHeaderTitle},x),r().createElement(c.AnalyticsIconButton,{analyticsId:"courseLink.searchPanel.iconButton",id:"button-category-search-checkboxes",className:(0,s.Z)(C.icon,{[C.iconClose]:!L}),onClick:()=>k(d.tK),"aria-expanded":L,"aria-label":S("courseLink.searchPanel.linkableItems.ariaLabel"),"aria-controls":"categories-region"},r().createElement(a.ChevronUp,null))),r().createElement("div",{id:"categories-region",role:"region","aria-labelledby":"button-category-search-checkboxes"},L&&I.filters.map(e=>r().createElement("div",{key:e.id,className:C.itemContainer},r().createElement(c.AnalyticsFormControlLabel,{analyticsId:"courseLink.searchPanel.formControlLabel",label:S(`courseLink.searchPanel.linkableItems.types.${e.name}`,{totalResults:e.length}),htmlFor:e.id,control:r().createElement(c.AnalyticsCheckbox,{analyticsId:"courseLink.searchPanel.checkbox",id:e.id,checked:e.selected,onChange:t=>T(e.id,t.target.checked)})})))))),r().createElement("div",{className:C.footer},r().createElement(c.AnalyticsPrimaryButton,{analyticsId:"courseLink.searchPanel.primaryButton",onClick:()=>{let{filters:e,keyword:t}=I;f({filters:e.map(e=>({...e,length:0})),keyword:t.trim()}),E&&n()},disabled:N,id:"button-courselink-panel-search"},S("courseLink.searchPanel.buttonText"))))}},448638:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(327355);let{fade:r}=i.colorManipulator,s=(0,i.makeStyles)(e=>({container:{width:"100%",minWidth:"170px",display:"flex",flexDirection:"column",overflow:"auto",[e.breakpoints.up("sm")]:{width:"360px",minWidth:"225px",boxShadow:`5px 0 0 0 ${r(e.palette.border.main,.1)}`}},clearAll:{color:e.palette.link.disabled,"&:enabled":{color:e.palette.link.active,textDecoration:"underline"}},searchItemsContainer:{display:"flex",flexDirection:"column",flexGrow:1,[e.breakpoints.up("sm")]:{padding:e.spacing(0,3,0,0)}},header:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${e.palette.border.main}`,whiteSpace:"nowrap",minHeight:"76px",overflow:"auto",[e.breakpoints.up("sm")]:{marginRight:e.spacing(3)}},headerText:{"&&":{marginBottom:"0px"}},icon:{transition:"transform 200ms"},iconClose:{transform:"rotate(-180deg)"},blocksContainer:{overflow:"auto"},keywordSearch:{paddingTop:e.spacing(1.25)},keywordInputField:{marginBottom:e.spacing(2),"& fieldset":{border:0},"& input":{margin:0},"& label":{color:e.palette.text.hint}},blockHeader:{display:"flex",justifyContent:"space-between",alignItems:"center"},blockHeaderTitle:{fontWeight:e.typography.fontWeightBold},block:{borderBottom:`1px solid ${e.palette.border.main}`,padding:e.spacing(1,0,1,0),display:"inline-block",width:"100%","&:last-child":{borderBottom:"none"}},itemContainer:{paddingLeft:e.spacing(1.5),paddingTop:e.spacing(.625),whiteSpace:"nowrap",overflowX:"hidden"},footer:{borderTop:`1px solid ${e.palette.border.main}`,padding:e.spacing(1,1.5),display:"flex",justifyContent:"end",[e.breakpoints.up("sm")]:{marginRight:e.spacing(3)},[e.breakpoints.down("xs")]:{bottom:0,backgroundColor:e.palette.background.default}}}))},495710:function(e,t,n){"use strict";n.d(t,{AB:function(){return s},RF:function(){return d},dw:function(){return c},sl:function(){return l},tK:function(){return o}});var i=n(986709),r=n(259197);let s="keyword",o="category",a=[{id:"DOCUMENT",name:"document-text",isCategoryMatch:e=>(r.GQk.Document.isEqualTo(e.contentHandler)||r.GQk.Folder.isEqualTo(e.contentHandler))&&i.zcD.Document===e.type},{id:"ASSESSMENTS",name:"assessments",isCategoryMatch:e=>r.GQk.TestLink.isEqualTo(e.contentHandler)},{id:"SCORM",name:"scormengine",isCategoryMatch:e=>r.GQk.RusticiScorm.isEqualTo(e.contentHandler)},{id:"FILE",name:"file",isCategoryMatch:e=>r.GQk.File.isEqualTo(e.contentHandler)},{id:"LTI",name:"lti",isCategoryMatch:e=>r.GQk.LtiLink.isEqualTo(e.contentHandler)},{id:"JOURNAL",name:"journal",isCategoryMatch:e=>r.GQk.Journal.isEqualTo(e.contentHandler)},{id:"FOLDER",name:"folder",isCategoryMatch:e=>r.AaE.isFolderContentItem(e)},{id:"LEARNING_MODULE",name:"learning-module",isCategoryMatch:e=>r.Xgx.isLearningModule(e)}],l=e=>({filters:(e?a:a.slice(0,a.length-2)).map(({id:e,name:t,isCategoryMatch:n})=>({id:e,name:t,selected:!1,length:0,isCategoryMatch:n})),[s]:""}),c=()=>({[s]:{expanded:!0},[o]:{expanded:!0}}),d=e=>{let{keyword:t,filters:n}=e;return!(n.some(e=>e.selected)||t.trim())}},505114:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var i=n(202784),r=n(327355);let s=()=>{let e=(0,r.useTheme)(),t=(0,r.useMediaQuery)(e.breakpoints.down("sm")),[n,s]=(0,i.useState)(!t);return[n,s]}},375746:function(e,t,n){"use strict";n.d(t,{N:function(){return h}});var i=n(202784),r=n.n(i),s=n(495710),o=n(589517),a=n(379167),l=n(482791),c=n(286830),d=n(810846),u=n(261324),p=n(847969),m=n(261253);let h=({getCourseContentChildren:e,setSelectedCourseItem:t,selectedCourseItem:n,createInRoot:h})=>{var g;let f=(0,s.sl)(h),[b,v]=(0,i.useState)(f),{isLoading:y,data:S,loadContents:C,loadMoreContents:E}=(0,d.y)(e,!0),I=()=>{E(b).then(e=>e&&v(e))},{items:w,paging:A}=S,k=(0,i.useMemo)(()=>(0,c.p$)(A),[A]),T=(0,m.w)(!A,null!==(g=null==A?void 0:A.count)&&void 0!==g?g:0,w.length);return r().createElement(r().Fragment,null,r().createElement(o.S,{criteriaConfig:{currentFilterState:b,onSearchClick:e=>{C(e).then(e=>e&&v(e))}},createInRoot:h},(i,s)=>{var o;return r().createElement(a.C,{isSearchPanelOpen:s,openSearchPanel:i,totalResults:null!==(o=null==A?void 0:A.count)&&void 0!==o?o:0,loadedResults:w.length,initialState:!A,isLoading:y},r().createElement(u.Y,{value:0},r().createElement(l.G,{loadCourseContents:e,records:w,setSelectedItem:t,selectedItem:n,loadMoreData:I,hasMore:k,isSearchPanelOpen:s,isRoot:!0})))}),r().createElement(p.AnalyticsOffScreenAnnouncement,{type:"polite",analyticsId:"courseLink.contentPanel.header.offScreenAnnouncement",message:T,changeTrigger:1}))}},409428:function(e,t,n){"use strict";n.d(t,{ER:function(){return r},br:function(){return o},oj:function(){return s}});var i=n(259197);let r=e=>{let t=e.getLinkContentSource();return!!t&&i.GQk.Discussion.isEqualTo(t.contentHandler)},s=e=>{let t=e.getLinkContentSource();return!!t&&i.AaE.isFolderContentItem(t)},o=e=>{let t=e.getLinkContentSource();return!!t&&i.Xgx.isLearningModule(t)}},261253:function(e,t,n){"use strict";n.d(t,{w:function(){return r}});var i=n(410628);let r=(e,t,n)=>{let r=(0,i.q)(),s="";return e||(s=t?r("courseLink.contentPanel.header.searchResults",{loadedResults:n,totalResults:t}):`${r("courseLink.emptyState.zeroResultsHeader")}. ${r("courseLink.emptyState.zeroResultsMessage")}`),s}},72410:function(e,t,n){"use strict";n.d(t,{v:function(){return l}});var i=n(202784),r=n.n(i),s=n(26736),o=n(592493),a=n(259197);let l=e=>{var t,n;let i=(0,o.ye)(a.x40.UnreadAnnouncementsIndicator),l=null!==(n=null===(t=(0,o.Sx)(e.courseId))||void 0===t?void 0:t.unreadCount)&&void 0!==n?n:0;return r().createElement(s.b,{...e,unreadCount:i?l:0,color:"outlined",ariaLabel:"cr.components.announcements.unreadIndicatorAriaLabel.plural"})}},527551:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var i=n(202784),r=n.n(i),s=n(592493),o=n(26736);let a=e=>{let{unreadCount:t}=(0,s.gy)(e.courseId);return r().createElement(o.b,{...e,unreadCount:t,color:"outlined",ariaLabel:"cr.components.messages.unreadIndicatorAriaLabel.plural"})}},26736:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var i=n(202784),r=n.n(i),s=n(847969),o=n(88818),a=n(105490);let l=e=>{let{title:t,unreadCount:n,color:i,ariaLabel:l}=e,c=(0,a.y)(e);return r().createElement("div",{className:c.navigationIndicatorWrapper},r().createElement(s.AnalyticsTypography,{component:"span",variant:"subtitle2",className:c.navigationOptionTitle},t),r().createElement(o._Zg,{unreadCount:n,color:i,unreadIndicatorAriaLabel:l}))}},685486:function(e,t,n){"use strict";n.d(t,{Ko:function(){return f}});var i=n(202784),r=n(906277),s=n(563060),o=n(927335),a=n(847969),l=n(998426),c=n(410628),d=n(259197),u=n(592493),p=n(105490);let m=()=>(0,u.pJ)(e=>d.Ys.app.getRoute(e).name),h=e=>e.indexOf(s.BQ.COURSE_ANALYTICS)>=0?"course.getAnalytics.link":`${e}.link`,g=e=>(0,u.gH)("cr.components.courseNavigation","cr.components.courseNavigation.organization")(e),f=e=>{let{navigationListItems:t,showStudentPreviewButton:n,studentPreviewOnclick:s}=e,d=(0,c.q)(),u=(0,p.y)(e),f=m(),b=e=>(null==f?void 0:f.indexOf(e))>=0,v=(0,l.Fg)(),y=(0,l.ac)(v.breakpoints.up("md")),S=d(g("cr.components.courseNavigation.studentPreview"));return i.createElement(a.AnalyticsNavigationListScrollWrapper,{className:(0,r.Z)(u.root,"js-course-navigation"),scrollLeftButtonAriaLabel:d("cr.components.courseNavigation.scrollLeftButtonAriaLabel"),scrollRightButtonAriaLabel:d("cr.components.courseNavigation.scrollRightButtonAriaLabel"),analyticsId:"course.navigation.list.scroll.wrapper"},i.createElement(a.AnalyticsNavigationList,{className:u.navigationList,navTagAriaLabel:d("cr.components.courseNavigation.navTagAriaLabel"),orientation:"horizontal",analyticsId:"course.navigation.list"},t.map(({title:t,className:n,route:r,activeTabRoute:s,component:o,href:l})=>{let c=h(r);return i.createElement(a.AnalyticsNavigationListItem,{href:l,active:void 0===s?b(r):b(s),analyticsId:c,key:r,className:n},i.createElement(a.AnalyticsListItemText,{analyticsId:`${c}.text`},o?i.createElement(o,{title:t,...e}):i.createElement(a.AnalyticsTypography,{component:"span",variant:"subtitle2"},t)))})),n&&i.createElement(a.AnalyticsIconButton,{analyticsId:"course.outline.studentPreview.link",className:(0,r.Z)(u.studentPreview,"js-student-preview"),"aria-label":S,classes:{label:u.studentPreviewLabel},onClick:s},i.createElement(o.StudentPreview,null),y&&i.createElement(a.AnalyticsTypography,{className:"js-student-preview-label",component:"span",variant:"inherit"},S)))}},105490:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({root:{borderBottom:`1px solid ${e.palette.border.main}`},navigationList:{paddingLeft:0,"& li":{"& a.messages-option":{zIndex:1,"&:hover, &:focus, &:active":{textDecoration:"none","& span.primary-text":{textDecoration:"none"},"& $navigationOptionTitle":{textDecoration:"underline"}}}},[e.breakpoints.up("md")]:{paddingLeft:"16px"}},navigationOptionTitle:{textDecoration:"none"},navigationIndicatorWrapper:{display:"flex",gap:"6px"},studentPreview:{marginLeft:"auto",padding:"0 16px"},studentPreviewLabel:{"& span":{marginLeft:"8px"}},messagesOption:{backgroundColor:"green"}}))},43696:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var i=n(202784),r=n(858152),s=n(906277);let o=e=>{let{children:t}=e,n=(0,r.y)();return i.createElement("div",{className:(0,s.Z)("js-course-overview-info-header-controls",n.courseOverviewInfoHeaderControls)},t)}},858152:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({courseOverviewInfoHeaderControls:{display:"flex"}}))},625269:function(e,t,n){"use strict";n.d(t,{J:function(){return c}});var i=n(202784),r=n.n(i),s=n(847969),o=n(470265),a=n(592493),l=n(88818);let c=e=>{let{id:t,analyticsId:n,panelControlId:c,isExpanded:d,preferenceKey:u,title:p,setIsExpanded:m}=e,h=(0,o.y)(),g=(0,a.Iw)(u),f=(0,a.SS)(),[b,v]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{g&&!b&&m("true"===g.value)},[g,b,m]),r().createElement(s.AnalyticsIconButton,{id:t,analyticsId:n,onClick:()=>{v(!0),m(!d),f({key:u,value:d?"false":"true"})},className:h.headerInfoToggle,"aria-label":p,"aria-expanded":d,"aria-controls":d?c:void 0},r().createElement(l.W5x,{open:d,hideOnDesktop:!0}))}},470265:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({headerInfoToggle:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}}}))},904590:function(e,t,n){"use strict";n.d(t,{P:function(){return p}});var i=n(202784),r=n.n(i),s=n(847969),o=n(653309),a=n(43696),l=n(906277),c=n(625269),d=n(345974),u=n(327355);let p=e=>{let{analyticsId:t,courseId:n,children:p,className:m,headerControls:h,title:g,expansionButtonId:f,isStudentPreview:b,preferenceKey:v,panelControlId:y}=e,S=(0,o.y)(),[C,E]=(0,i.useState)(!0),I=(0,d.F)(b?v+".student.preview":v,n),w=(0,u.useMediaQuery)(e=>e.breakpoints.up("md"));return r().createElement(r().Fragment,null,r().createElement("div",{className:(0,l.Z)("js-course-overview-info-header",m,S.mainContainer)},r().createElement("div",{className:S.headerWrapper},r().createElement(s.AnalyticsTypography,{component:"h2",variant:"h2"},g)),r().createElement(a.B,null,h,r().createElement(c.J,{id:f,analyticsId:t,isExpanded:C,preferenceKey:I,setIsExpanded:E,title:g,panelControlId:y}))),(C||w)&&p)}},653309:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({mainContainer:{display:"flex",height:"36px",alignItems:"center",borderBottom:`1px solid ${e.palette.secondary.main}`,marginBottom:"12px",paddingBottom:"16px",[e.breakpoints.up("sm")]:{marginBottom:"15px"}},headerWrapper:{flex:"1",maxWidth:"none",display:"flex",alignItems:"center"}}))},20098:function(e,t,n){"use strict";n.d(t,{C:function(){return m}});var i=n(958299),r=n(675689),s=n(35302),o=n(592493),a=n(817426),l=n(202784),c=n.n(l),d=n(410628),u=n(453923),p=n(523733);let m=e=>{var t;let{onEditBanner:n}=e,l=(0,d.q)(),m=(0,u.H)(),h=(0,o.Tn)(m),g=null===(t=null==h?void 0:h.banner)||void 0===t?void 0:t.permanentUrl,f=null==h?void 0:h.bannerAltText,b=(0,p.y)({bannerUrl:g});return c().createElement(c().Fragment,null,!!(null==h?void 0:h.isBannerVisible)&&!!g&&c().createElement("div",{className:b.courseBannerWrapper},c().createElement("div",{role:f?"img":void 0,"aria-label":f||void 0,className:b.courseBanner}),(0,a._m)(g)&&c().createElement(s.sN,{url:g}),!!n&&c().createElement(i.AnalyticsIconButton,{analyticsId:"course.course-overview.course-banner.edit.banner.button",className:b.editBannerButton,"aria-label":l("course.course-overview.banner.edit-banner-button"),onClick:n},c().createElement(r.Edit,null))))}},523733:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({courseBannerWrapper:{position:"relative",width:"100%",maxHeight:"240px",height:"calc((100vw - 16px) / 4)",[e.breakpoints.up("md")]:{height:"calc((100vw - 34px) / 5)"},display:"flex",justifyContent:"flex-end",alignContent:"center"},courseBanner:e=>({position:"absolute",top:0,left:0,bottom:0,right:0,backgroundImage:`url("${e.bannerUrl}")`,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%"}),editBannerButton:{backgroundColor:e.palette.background.default,color:e.palette.text.secondary,height:"max-content",borderRadius:36,"&:active, &:focus, &:hover":{color:e.palette.text.primary},margin:"10px",[e.breakpoints.up("sm")]:{margin:"20px"}}}))},589181:function(e,t,n){"use strict";n.d(t,{W:function(){return m}});var i=n(202784),r=n.n(i),s=n(847969),o=n(410628),a=n(602715),l=n(345974),c=n(43696),d=n(625269),u=n(906277);let p="course.outline.details.and.action.expanded",m=e=>{let{isStudentPreview:t,courseId:n,isExpanded:i,setIsExpanded:m}=e,h=(0,l.F)(t?p+".student.preview":p,n),g=(0,o.q)(),f=(0,a.y)();return r().createElement("div",{className:(0,u.Z)("js-details-header",f.mainContainer)},r().createElement("div",{className:f.headerWrapper},r().createElement(s.AnalyticsTypography,{component:"h2",variant:"h2",id:"detailsActionsHeader"},g("course.outline.detailsActionsLabel"))),r().createElement(c.B,null,r().createElement(d.J,{id:"details-actions-expansion-button",analyticsId:'"courseOverview.detailsAndActions.expandOrCollapse"',isExpanded:i,preferenceKey:h,setIsExpanded:m,title:g("course.outline.detailsActionsLabel"),panelControlId:"details-and-actions-panel"})))}},602715:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({mainContainer:{display:"flex",height:"36px",alignItems:"center"},headerWrapper:{flex:"1",maxWidth:"none",display:"flex",alignItems:"center"}}))},669666:function(e,t,n){"use strict";n.d(t,{r:function(){return g}});var i=n(202784),r=n.n(i),s=n(592493),o=n(410628),a=n(904590),l=n(446489),c=n(986709),d=n(259197);let u="course-instructors-panel",p="course-instructors-expansion-button",m=e=>({courseId:e,sort:[{field:c.PJt.Role,direction:c.SrV.Ascending},{field:c.PJt.DisplayOrder,direction:c.SrV.Ascending},{field:c.PJt.FamilyName,direction:c.SrV.Ascending},{field:c.PJt.GivenName,direction:c.SrV.Ascending}],filter:{roleBucket:[c.O8v.Teaching],membershipAvailable:!0}}),h=(e,t,n)=>{if(t){if(t.identifier.toString() in d.M4H){let i=d.M4H[t.identifier.toString()];return n&&(i=i.replace("global.course","global.organization")),e(i)}return n?t.orgName.rawValue:t.courseName.rawValue}},g=e=>{let{courseId:t,isOrganization:n,isStudentPreview:c}=e,d=(0,o.q)(),{memberships:g,users:f}=(0,s.d$)(m(t)),b=(0,s.gH)("courseCore.components.courseInstructors","courseCore.components.courseInstructors.organization"),v=(0,i.useMemo)(()=>g&&f?g.map(e=>({...e,user:f[e.userId],roleBadgeText:h(d,e.courseRole,n)})):[],[g,f,n,d]);return r().createElement(a.P,{analyticsId:"courseOverview.courseInstructors.expandOrCollapse",courseId:t,title:d(b("courseCore.components.courseInstructors.headerText")),isStudentPreview:c,expansionButtonId:p,panelControlId:u,preferenceKey:"course.outline.faculty.expanded"},r().createElement(l.u,{id:u,ariaLabelledBy:p,instructorListMemberships:v,...e}))}},446489:function(e,t,n){"use strict";n.d(t,{u:function(){return m}});var i=n(202784),r=n(410628),s=n(906277),o=n(563060),a=n(346522),l=n(35302),c=n(579633),d=n(592493),u=n(171640),p=n(847969);let m=e=>{let{id:t,currentUserId:n,courseId:m,instructorListMemberships:h,canCurrentUserSendMessage:g,ariaLabelledBy:f}=e,b=(0,r.q)(),[v,y]=(0,i.useState)(!1),S=(0,u.y)(),[C,E]=(0,i.useMemo)(()=>{let e=[],t=[];return h.forEach(n=>{1===n.displayOrder?e.push(n):t.push(n)}),[e,t]},[h]),I=C.length&&C.length<2?C.length:2,w=C.length?C:E,A=(0,d.gH)("courseCore.components.courseInstructors","courseCore.components.courseInstructors.organization"),k=A(v?"courseCore.components.courseInstructors.showLessAriaLabel":"courseCore.components.courseInstructors.showMoreAriaLabel"),T=(0,i.useCallback)((e,t)=>{var n;e.stopPropagation(),m&&(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.id)&&o.Nd.goPeekState((0,o.k9)({courseId:m,recipientIds:t.user.id}))},[m]);return h?i.createElement("div",{id:t,role:"region","aria-labelledby":f,className:(0,s.Z)(S.courseInstructorsRoot,"js-course-instructors-root")},0===h.length&&i.createElement("div",{className:(0,s.Z)(S.emptyState,"js-empty-state")},b(A("courseCore.components.courseInstructors.emptyStateText"))),h.length>0&&i.createElement(p.AnalyticsList,{analyticsId:"courseCore.components.courseInstructors.list",classes:{root:S.listRoot}},(v?[...C,...E]:w.slice(0,I)).map(e=>{var t,r,o;let d=g&&(null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.id)!==n;return i.createElement(p.AnalyticsListItem,{analyticsId:"courseCore.components.courseInstructors.listItem",key:e.id,classes:{root:(0,s.Z)(S.listItemRoot,d?S.listItemWithMessageLinkRoot:"","js-instructor-list-item")},onClick:d?t=>T(t,e):void 0},i.createElement(p.AnalyticsListItemAvatar,{className:S.listItemAvatar,analyticsId:"courseCore.components.courseInstructors.listItemAvatar"},i.createElement(p.AnalyticsAvatar,{className:(0,s.Z)(S.instructorAvatar,"js-instructor-avatar"),size:"medium",src:null===(o=null===(r=e.user)||void 0===r?void 0:r.avatar)||void 0===o?void 0:o.permanentUrl,alt:b("courseCore.components.courseInstructors.avatarAltText",{user:e.user})})),i.createElement(p.AnalyticsListItemText,{analyticsId:"courseCore.components.courseInstructors.listItemText",primary:i.createElement("div",{className:(0,s.Z)(S.username,"js-instructor-username")},i.createElement(l.K6,{ariaHidden:!0,format:c.ILocaleUsernameFormat.Short,user:e.user})),secondary:e.roleBadgeText&&i.createElement(p.AnalyticsBadge,{classes:{badge:(0,s.Z)(S.roleBadge,"js-role-badge")},position:"inline",badgeContent:e.roleBadgeText})}),d&&i.createElement(p.AnalyticsLink,{analyticsId:"courseCore.components.courseInstructors.link",href:"#",onClick:d?t=>T(t,e):void 0,classes:{root:(0,s.Z)(S.messageLinkRoot,"js-send-message-link")},"aria-label":b("courseCore.components.courseInstructors.sendMessageAriaLabel",{instructor:e.user})},i.createElement(a.V,null)))})),h&&h.length>I&&i.createElement("button",{"data-analytics-id":"courseOverviewInstructorListComponent.toggleFullListButton",className:(0,s.Z)(S.viewAllButton,"js-toggle-full-list-button"),id:"view-all-button",onClick:()=>y(!v),"aria-expanded":v,"aria-label":b(k)},b(v?"courseCore.components.courseInstructors.showLess":"courseCore.components.courseInstructors.showMore"))):null}},171640:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({courseInstructorsRoot:{marginBottom:"36px"},fullListContainer:{zIndex:10,width:"300px"},fullListContent:{padding:"8px 16px 0 16px"},viewAllButton:{color:e.palette.link.active,backgroundColor:"transparent",textDecoration:"underline",marginTop:"4px",display:"block",lineHeight:"21px"},closeButton:{position:"absolute",top:"9px",right:"9px"},fullListWrapper:{paddingTop:"12px"},listRoot:{paddingTop:0},emptyState:{backgroundColor:e.palette.background.b3,color:e.palette.text.primary,display:"flex",justifyContent:"center",alignItems:"center",height:"50px",fontStyle:"italic"},listItemAvatar:{minWidth:"unset"},listItemRoot:{padding:"4px 0px","&:first-child":{paddingTop:"1px"}},listItemWithMessageLinkRoot:{cursor:"pointer"},instructorAvatar:{display:"flex",marginLeft:"-4px"},username:{whiteSpace:"nowrap",marginRight:"9px",textOverflow:"ellipsis",overflow:"hidden",color:e.palette.text.primary,backgroundColor:e.palette.background.default},messageLinkRoot:{display:"flex","&, &:focus, &:hover, &:active, &:active:hover":{color:e.palette.primary.main}},roleBadge:{textTransform:"uppercase",fontSize:e.typography.fontSizeXSmall,fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,backgroundColor:e.palette.background.b3,padding:"0px 10px"}}))},842606:function(e,t,n){"use strict";n.d(t,{p:function(){return b}});var i=n(202784),r=n.n(i),s=n(592493),o=n(410628),a=n(904590),l=n(847969),c=n(906277),d=n(675689),u=n(515290),p=n(647073),m=n(563060),h=n(215714);let g="course-schedule-panel",f="course-schedule-expansion-button",b=e=>{let{courseId:t,courseSchedule:n,isStudentPreview:i}=e,b=(0,o.q)(),v=(0,u.y)(),y=(0,s.vD)(t,["course.calendar-entry.course-schedule.CREATE"]),S=(0,m.Ls)(m.nb.CourseSchedule({courseId:t})),C=(0,s.gH)("courseCore.components.courseSchedule","courseCore.components.courseSchedule.organization");return n?r().createElement("div",{className:v.root},n.length?r().createElement(a.P,{analyticsId:"courseOverview.courseSchedule.expandOrCollapse",courseId:t,title:b(C("courseCore.components.courseSchedule.headerText")),isStudentPreview:i,expansionButtonId:f,panelControlId:g,preferenceKey:"course.outline.schedule.expanded",headerControls:r().createElement(r().Fragment,null,y&&r().createElement(l.AnalyticsLink,{className:(0,c.Z)(v.editButton,"js-edit-course-schedule-button"),analyticsId:"courseOverview.courseSchedule.edit.link","aria-label":b(C("courseCore.components.courseSchedule.editCourseScheduleButton")),href:S,color:"secondary"},r().createElement(d.Edit,null)))},r().createElement(p.oG,{id:g,ariaLabelledBy:f,courseSchedulePanelHref:S,...e})):r().createElement(h.P,{courseId:t,courseSchedulePanelHref:S,canCreateCourseSchedule:!!y})):null}},515290:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({root:{marginBottom:"36px"},addCourseScheduleButtonWrapper:{display:"flex",flexDirection:"column"},addCourseScheduleButton:{width:"100%","&, &:focus, &:hover, &:active, &:active:hover":{color:e.palette.primary.main,textDecoration:"none"}},skipLink:{marginTop:"8px"},editButton:{marginLeft:"auto",height:"38px",width:"38px",display:"flex",alignItems:"center",justifyContent:"center"}}))},215714:function(e,t,n){"use strict";n.d(t,{P:function(){return u}});var i=n(202784),r=n.n(i),s=n(906277),o=n(847969),a=n(592493),l=n(345974),c=n(410628),d=n(515290);let u=e=>{let{courseId:t,courseSchedulePanelHref:n,canCreateCourseSchedule:i}=e,u=(0,c.q)(),p=(0,d.y)(),m=(0,l.F)("hide.add.courseSchedule.button.course",t),h=(0,a.Iw)(m),g=(null==h?void 0:h.value)==="true",f=(0,a.SS)(),b=(0,a.gH)("courseCore.components.courseSchedule","courseCore.components.courseSchedule.organization");return g||!i?null:r().createElement("div",{className:(0,s.Z)(p.addCourseScheduleButtonWrapper,"button-wrap")},r().createElement(o.AnalyticsDashedButton,{className:(0,s.Z)(p.addCourseScheduleButton,"js-add-course-schedule-button"),analyticsId:"courseCore.components.courseSchedule.add.link",href:n},u(b("courseCore.components.courseSchedule.addCourseScheduleButton"))),r().createElement(o.AnalyticsLink,{className:(0,s.Z)(p.skipLink,"js-skip-link"),analyticsId:"courseCore.components.courseSchedule.skip.link",component:"button",onClick:()=>{f({key:m,value:"true"})}},u("courseCore.components.courseSchedule.skipLink")))}},647073:function(e,t,n){"use strict";n.d(t,{oG:function(){return A}});var i=n(202784),r=n(619034),s=n.n(r),o=n(906277),a=n(579633),l=n(755755),c=n(986709),d=n(884391),u=n(29041),p=n(102802),m=n(90798),h=n(55828),g=n(494712),f=n(349267),b=n(276184),v=n(871318),y=n(88818);let S=(e,t,n)=>{var i,r;return null===(r=null===(i=e.recurRules)||void 0===i?void 0:i.byWeekDay)||void 0===r?void 0:r.map(e=>s()(e,"dd").format()).sort((e,t)=>e>t?1:-1).map(e=>n(new Date(e),a.ILocaleDateFormat.LongWeekday)).join(t("courseCore.components.courseSchedule.weekdayDelimiter",{},{noWrap:!0}))},C=(e,t)=>{let n=s()(e);return 1439===s()(t).diff(n,"minutes")},E=(e,t,n)=>C(e,t)?n("courseCore.components.courseSchedule.allDayEvent"):n("courseCore.components.courseSchedule.eventTime",{startTime:e,endTime:t}),I=(e,t,n,i)=>{let{recurRules:r}=e,s=new Date;if(r)switch(r.freq){case"DAILY":return t(r,s);case"MONTHLY":return n(r,s);default:return i(r,s)}return e.startDate},w=(e,t,n,i)=>{let r=e=>I(e,t,n,i);return e.length>1&&e.sort((e,t)=>r(e)>r(t)?1:-1),e},A=e=>{let{id:t,courseSchedule:n,courseSchedulePanelHref:r,ariaLabelledBy:s,getNextEventForMonthlyRepeat:a,getNextEventForDailyRepeat:C,getNextEventForWeeklyRepeat:I}=e,{translate:A,formatDate:k}=(0,l.h)(),T=(0,v.y)(),P=e=>{let{recurRules:t}=e;if(!(null==t?void 0:t.freq))return null;if(t.freq===c.hTM.Weekly)return S(e,A,k);let n=new Date;return t.freq===c.hTM.Monthly?A("courseCore.components.courseSchedule.nextMonthlyEvent",{nextMonthlyEventDate:a(t,n)}):t.freq===c.hTM.Daily?A("courseCore.components.courseSchedule.nextDailyEvent",{nextDailyEventDate:C(t,n)}):void 0};return i.createElement("div",{className:T.scheduleList,id:t,role:"region","aria-labelledby":s},i.createElement(u.U,{analyticsId:"courseOverview.courseSchedule.list"},(()=>{let e=w(n,C,a,I);return e.length>2?e.slice(0,2):e})().map(e=>{var t;return i.createElement(p.o,{className:T.scheduleItem,alignItems:"flex-start",analyticsId:"courseOverview.courseSchedule.listItem",key:null===(t=e.recurRules)||void 0===t?void 0:t.repeatRuleId},i.createElement("div",{className:T.scheduleItemSection},i.createElement(m.m,{analyticsId:"courseOverview.courseSchedule.listItem.time.icon",classes:{alignItemsFlexStart:T.alignItemsFlexStart}},i.createElement(f.g,{"aria-label":A("courseCore.components.courseSchedule.time")})),i.createElement(h.X,{primary:P(e),secondary:i.createElement(g.c,{component:"span",color:"textPrimary"},E(e.startDate,e.endDate,A)),analyticsId:"courseOverview.courseSchedule.listItem.time.text"})),e.location?i.createElement("div",{className:T.scheduleItemSection},i.createElement(m.m,{analyticsId:"courseOverview.courseSchedule.listItem.location.icon",classes:{alignItemsFlexStart:T.alignItemsFlexStart}},i.createElement(b.Y,{role:"presentation"})),i.createElement(h.X,{primary:A("courseCore.components.courseSchedule.location"),secondary:i.createElement(y.uRd,{plainText:e.location,analyticsIdTagPrefix:"courseCore.components.courseSchedule.location.text"}),analyticsId:"courseOverview.courseSchedule.listItem.location.text"})):null)})),n.length<=2?null:i.createElement(d.m,{className:(0,o.Z)(T.otherMeetingTimesLink,"js-other-meeting-times-link"),analyticsId:"courseCode.components.courseSchedule.view.link",href:r},A("courseCore.components.courseSchedule.otherMeetingTimesLink",{number:n.length-2})))}},871318:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({scheduleList:{color:e.palette.text.primary},scheduleItem:{flexWrap:"wrap",paddingTop:"0",paddingBottom:"16px",marginBottom:"16px",borderBottom:`1px solid ${e.palette.border.main}`,"&:last-of-type":{paddingBottom:"0",marginBottom:"0",borderBottom:"none"}},scheduleItemSection:{width:"100%",display:"flex"},alignItemsFlexStart:{marginTop:"4px"},otherMeetingTimesLink:{display:"block",marginTop:"16px"}}))},742388:function(e,t,n){"use strict";n.d(t,{H:function(){return l}});var i=n(202784),r=n(410628),s=n(311822),o=n(609582),a=n(844156);let l=({onStay:e,onProceed:t,show:n})=>{let l=(0,r.q)();return i.createElement(s.Dy,{hidden:!n,onDismiss:e,dialogContentProps:{type:o.DialogType.small,title:l("courseCore.course.progress.courseProgressConfiguration.confirmationModal.title"),showCloseButton:!0,isAlert:!0},analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog"},i.createElement("p",null,l("courseCore.course.progress.courseProgressConfiguration.confirmationModal.studentsWontSeeProgressMarks")),i.createElement(o.DialogFooter,null,i.createElement(a.AnalyticsDefaultButton,{onClick:e,analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog.cancel"},l("courseCore.course.progress.courseProgressConfiguration.confirmationModal.cancel")),i.createElement(a.AnalyticsPrimaryButton,{onClick:t,analyticsId:"courseProgress.courseProgressConfiguration.saveConfirmation.dialog.close"},l("courseCore.course.progress.courseProgressConfiguration.confirmationModal.confirm"))))}},423164:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(327355),r=n(998426);let s=(0,i.makeStyles)(e=>(0,i.createStyles)({instructions:{marginBottom:"16px"},instructionBullets:{marginLeft:"8px"},beforeYouSaveHeader:{marginBottom:"16px"},beforeYouSave:{marginTop:"16px",display:"flex",flexDirection:"row"},informationIcon:{verticalAlign:"middle",marginRight:"8px",marginTop:"3px"},delayedChanges:{marginLeft:"42px",color:(0,r.Lq)("text.secondary",e)}}))},707383:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var i=n(202784),r=n(906277),s=n(410628),o=n(847969),a=n(675689),l=n(423164),c=n(592493);let d=({disabled:e,courseProgressConfiguration:t,onCourseProgressConfigurationChanged:n})=>{let d=(0,c.gH)("courseCore.course","courseCore.organization"),u=(0,s.q)(),p=(0,l.W)(),m=t.progressTrackingEnabled?"courseCore.course.progress.courseProgressConfiguration.toggleLabelOn":"courseCore.course.progress.courseProgressConfiguration.toggleLabelOff",[h,g]=(0,i.useState)(!1),[f]=(0,i.useState)(t.progressTrackingEnabled),b=i.useCallback(()=>{let e=!t.progressTrackingEnabled;n({...t,progressTrackingEnabled:e}),g(f&&!e)},[t.progressTrackingEnabled,f,n,g]);return i.createElement("div",null,i.createElement("div",{className:(0,r.Z)(p.instructions,"course-progress-configuration-instructions")},u("courseCore.course.progress.courseProgressConfiguration.instructionsHeader")),i.createElement("ul",null,i.createElement("li",{className:p.instructionBullets},u(d("courseCore.course.progress.courseProgressConfiguration.instructionsBulletPoint1"))),i.createElement("li",{className:p.instructionBullets},u(d("courseCore.course.progress.courseProgressConfiguration.instructionsBulletPoint2")))),i.createElement(o.AnalyticsFormControlLabel,{analyticsId:"features.course.oultine.course-progress-configuration.enable.switch.label",checked:t.progressTrackingEnabled,className:"js-enable-progress-tracking",control:i.createElement(o.AnalyticsSwitch,{analyticsId:"features.course.outline.course-progress-configuration.enable.switch",id:"progressTrackingEnable"}),disabled:e,htmlFor:"progressTrackingEnable","aria-label":u("courseCore.course.progress.courseProgressConfiguration.toggleAriaLabel"),label:u(m),onChange:b}),i.createElement("div",{className:p.delayedChanges},u("courseCore.course.progress.courseProgressConfiguration.delayedChanges")),h&&i.createElement("div",{className:p.beforeYouSave},i.createElement("div",{className:(0,r.Z)(p.beforeYouSaveHeader,"course-progress-configuration-before-you-save-header")},i.createElement(a.Information,{className:p.informationIcon})),i.createElement("div",null,u(d("courseCore.course.progress.courseProgressConfiguration.beforeYouSave")))))}},89722:function(e,t,n){"use strict";n.d(t,{c:function(){return u},s:function(){return r}});var i,r,s=n(847969),o=n(592493),a=n(202784),l=n.n(a),c=n(410628),d=n(922872);(i=r||(r={})).StudentVisible="StudentVisible",i.All="All";let u=(0,a.memo)(function({analyticsId:e,visibility:t,onVisibilityChange:n}){let i=(0,d.y)(),a=(0,c.q)(),u=(0,o.gH)("courseCore.course","courseCore.organization"),p=[{value:r.StudentVisible,label:a(u("courseCore.course.progress.student.availability.visible"))},{value:r.All,label:a("courseCore.course.progress.student.availability.all")}];return l().createElement(s.AnalyticsTextField,{analyticsId:e,select:!0,id:"course-student-progress-filter-availability",label:a("courseCore.course.progress.student.availability.content"),floatingLabel:!0,className:i.filter,value:t,onChange:e=>n(e.target.value)},p.map(t=>l().createElement(s.AnalyticsMenuItem,{button:!0,key:t.value,value:t.value,analyticsId:`${e}.menu.${t.value}`},t.label)))})},199854:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var i=n(202784),r=n.n(i),s=n(89722);let o=(0,i.memo)(function({analyticsId:e,visibility:t,onVisibilityChange:n}){return r().createElement(s.c,{visibility:t,onVisibilityChange:n,analyticsId:`${e}.filters.visibility`})})},167323:function(e,t,n){"use strict";n.d(t,{r:function(){return m}});var i=n(202784),r=n.n(i),s=n(847969),o=n(327355),a=n(259197),l=n(906277),c=n(410628),d=n(255051),u=n(633941),p=n(739595);let m=({analyticsId:e,courseId:t,userId:n,visibility:i})=>{let m=(0,c.q)(),h=(0,u.y)(),g=(0,o.useTheme)(),f=(0,o.useMediaQuery)(g.breakpoints.down("xs")),b=r().useRef(null),{onKeyDown:v}=(0,p.b)(b);return r().createElement("div",{ref:b,onKeyDown:v},r().createElement(s.AnalyticsTable,{analyticsId:`${e}.table`,className:h.table,role:"treegrid","aria-label":m("courseCore.course.progress.student.tableAriaLabel")},r().createElement(s.AnalyticsTableHead,{analyticsId:`${e}.table.head`},r().createElement(s.AnalyticsTableRow,{analyticsId:`${e}.table.head.row`},r().createElement(s.AnalyticsTableCell,{analyticsId:`${e}.table.head.row.name`,className:h.tableHeaderCell},m("courseCore.course.progress.student.itemName")),!f&&r().createElement(s.AnalyticsTableCell,{analyticsId:`${e}.table.head.row.status`,className:(0,l.Z)(h.tableHeaderCell,h.tableHeaderStatus)},m("courseCore.course.progress.student.status")))),r().createElement(s.AnalyticsTableBody,{analyticsId:`${e}.table.body`},r().createElement(d.t,{courseId:t,userId:n,visibility:i,level:0,lastItemOnLevel:!1,parentContentId:"ROOT",parentContentHandler:a.GQk.Folder,analyticsId:`${e}.table.body`}))))}},633941:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({table:{tableLayout:"fixed",height:"1px"},tableHeaderCell:{width:"100%"},tableHeaderStatus:{width:"300px",[e.breakpoints.up("lg")]:{width:"500px"}},tableHeaderExpand:{width:"64px"}}))},894817:function(e,t,n){"use strict";n.d(t,{Rq:function(){return c},rI:function(){return d},wJ:function(){return l}});var i=n(986709),r=n(259197),s=n(592493),o=n(276635),a=n(202784);let l=[i.hbA.Visible,i.hbA.Restricted],c=[i.hbA.Visible,i.hbA.Restricted,i.hbA.Hidden],d=({courseId:e,userId:t,visibility:n,contentId:l,total:c})=>{let d=(0,s.Lx)(),u=(0,s.ER)(e,i.x1x.Root),p=null==u?void 0:u.id,m="ROOT"===l&&null!=p?p:l,h=(0,s.pJ)(e=>r.Ys.contentReviewState.getContentReviewStateFirstUserContent(e,{userId:t,contentId:m,visibility:n}),o.isEqual),g=(0,a.useMemo)(()=>({courseId:e,userId:t,contentId:m,limit:20}),[e,t,m]),{isLoading:f,canLoadMore:b,nextOffset:v,count:y}=(0,s.pJ)(e=>r.Ys.contentReviewState.hasMoreContentReviewStateUserContent(e,g),o.isEqual);(0,a.useEffect)(()=>{p&&!f&&b&&!(h.length>=c)&&d(r.Nwg.contentReviewState.fetchMoreContentReviewStateUserContent({courseId:e,userId:t,contentId:m,paging:{offset:v,limit:20}}))},[d,p,f,b,h.length,c,e,t,m,v]);let S=f||b&&h.length<c;return(0,a.useMemo)(()=>({canLoadMore:b,count:y,isLoading:S,items:h}),[h,b,S,y])}},739595:function(e,t,n){"use strict";n.d(t,{b:function(){return g}});var i=n(202784),r=n.n(i),s=n(31307);let o='a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';function a(e){let t=e.nextElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.nextElementSibling;return t instanceof HTMLElement?t:null}function l(e){let t=e.previousElementSibling;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.previousElementSibling;return t instanceof HTMLElement?t:null}function c(e,t){return Array.from(t.querySelectorAll('[role="gridcell"]')).indexOf(e)}function d(e,t){return e.querySelectorAll('[role="gridcell"]').item(t)}function u(e,t){let n=e.parentElement;return n&&t?d(t,c(e,n)):null}function p(e){let t=e;for(;null!==t&&"row"!==t.getAttribute("role");)t=t.parentElement;return t}function m(e){let t=e.querySelectorAll(`[role="row"], [role="gridcell"], ${o}`);null==t||t.forEach(e=>e.setAttribute("tabindex","-1"))}function h(e,t){if(t){m(e),t.setAttribute("tabindex","0"),t.focus();let n=p(t);n&&(n.setAttribute("tabindex","0"),n.querySelectorAll(o).forEach(e=>e.setAttribute("tabindex","0")))}}function g(e){return{onKeyDown:r().useCallback(t=>{var n;let i=e.current;if(!i)return;let r=document.activeElement,g=(null==r?void 0:r.getAttribute("role"))==="row",f=(null==r?void 0:r.getAttribute("role"))==="gridcell",b=null!==(n=null==i?void 0:i.querySelectorAll('[role="row"]'))&&void 0!==n?n:[],v=b[0],y=b[b.length-1],S=p(r);switch(t.key){case s.s.ArrowDown:g?h(i,a(r)):f&&h(i,function(e){let t=e.parentElement;return t?u(e,a(t)):null}(r));return;case s.s.ArrowUp:g?h(i,l(r)):f&&h(i,function(e){let t=e.parentElement;return t?u(e,l(t)):null}(r));return;case s.s.ArrowRight:if(g)"false"===r.getAttribute("aria-expanded")?r.click():h(i,null==r?void 0:r.querySelector('[role="gridcell"]'));else if(f&&S){let e=c(r,S);h(i,d(S,e+1))}return;case s.s.ArrowLeft:if(g){if("true"===r.getAttribute("aria-expanded"))r.click();else{let e=r.getAttribute("aria-level"),t=null!==e?parseInt(e,10):NaN;if(!Number.isNaN(t)&&t>1){let t=r.previousElementSibling;for(;null!==t&&t.getAttribute("aria-level")===e;)t=t.previousElementSibling;h(i,t instanceof HTMLElement?t:null)}}}else if(f&&S){let e=c(r,S);0===e?h(i,r.parentElement):h(i,d(S,e-1))}return;case s.s.Home:g?(h(i,v),t.preventDefault()):f&&S&&(t.ctrlKey?h(i,d(v,c(r,S))):h(i,null==S?void 0:S.querySelector('[role="gridcell"]')),t.preventDefault());return;case s.s.End:if(g)h(i,y),t.preventDefault();else if(f){let e=r.parentElement;if(e){if(t.ctrlKey)h(i,d(y,c(r,e))),t.preventDefault();else{let n=e.querySelectorAll('[role="gridcell"]');h(i,n[n.length-1]),t.preventDefault()}}}return;case s.s.Tab:m(i),S&&(S.setAttribute("tabindex","0"),S.querySelectorAll(o).forEach(e=>e.setAttribute("tabindex","0")))}},[e])}}},758003:function(e,t,n){"use strict";n.d(t,{L:function(){return p}});var i=n(202784),r=n.n(i),s=n(167323),o=n(151101),a=n(199854),l=n(89722),c=n(894817),d=n(410628),u=n(817426);let p=({courseId:e,userId:t,analyticsId:n})=>{let p=(0,o.y)(),m=(0,d.q)(),[h,g]=(0,i.useState)(l.s.StudentVisible),f=h===l.s.StudentVisible?c.wJ:c.Rq;return r().createElement("div",{className:p.studentProgress},r().createElement("div",{className:p.filters},r().createElement(a.M,{analyticsId:n,visibility:h,onVisibilityChange:e=>{switch(g(e),e){case l.s.StudentVisible:(0,u.hm)(m("courseCore.course.progress.student.availability.ariaLiveVisibleToStudents"));break;case l.s.All:(0,u.hm)(m("courseCore.course.progress.student.availability.ariaLiveAll"))}}})),r().createElement(s.r,{analyticsId:n,courseId:e,userId:t,visibility:f}))}},151101:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(()=>(0,i.createStyles)({studentProgress:{paddingTop:"18px"},filters:{marginBottom:"20px"}}))},317176:function(e,t,n){"use strict";n.d(t,{H$:function(){return r.H},Lu:function(){return s.L},lM:function(){return i.l}}),n(335824),n(573932);var i=n(707383),r=n(742388),s=n(758003)},39166:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var i=n(202784),r=n(514461),s=n(592493),o=n(986709);let a=e=>{var t,n,a;let{courseId:l}=e,c=(0,s.nW)(l,o.XF0.CourseRoster),d=null!==(t=null==c?void 0:c.toolEnabledSetting.isAvailable)&&void 0!==t&&t,u=null!==(n=null==c?void 0:c.toolEnabledSetting.isLocked)&&void 0!==n&&n,p=(0,s.oz)(l,o.XF0.CourseRoster),m=null!==(a=(0,s.J1)(l,["course.configure-tools.EXECUTE"]))&&void 0!==a&&a;return(0,s.J1)(l,["course.user.VIEW"])&&c?i.createElement(r.Fq,{groupSetVisibility:d,onVisibilityChanged:p,disabled:!(!u&&m),analyticsId:"course.roster.visibility.button",borderless:!0}):null}},325561:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var i=n(986709),r=n(259197);let s=e=>{let{courseId:t,parentId:n,module:s,positionBefore:o,positionAfter:a}=e;return{contentDetail:{[r.GQk.LearningModule.toString()]:{isLesson:!0,isSequential:!1}},contentHandler:r.GQk.LearningModule,courseId:t,parentId:n,title:s.title,description:s.description,isAvailable:!1,aiState:i.RbW.Originally,positionBefore:o,positionAfter:a}}},845095:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var i=n(259197),r=n(325561);async function s(e){var t;let{createLearningModule:n,selectedModules:s,courseId:o,parentId:a,positionBefore:l,positionAfter:c}=e,d=c,u="start"===l,p=[];for(let{thumbnail:e,...i}of s){let s=(0,r.c)({courseId:o,parentId:a,module:i,positionBefore:u?l:void 0,positionAfter:u?void 0:d});u=!1;try{let n=await e;s.thumbnailImage=null==n?void 0:n.url;let i=null===(t=null==n?void 0:n.onSave)||void 0===t?void 0:t.call(n);i&&p.push(i)}catch(e){}d=Object.keys((await n(s)).contents)[0]}p.length>0&&(0,i.f6z)(p)}},171223:function(e,t,n){"use strict";n.d(t,{u:function(){return f}});var i=n(202784),r=n.n(i),s=n(906277),o=n(847969),a=n(755755),l=n(88818),c=n(675689),d=n(465139),u=n(986709),p=n(357235),m=n(592493),h=n(453923);let g=["none",...Object.values(u.Vie)],f=({analyticsId:e,className:t,onGenerate:n})=>{let[f,b]=(0,i.useState)(""),[v,y]=(0,i.useState)("none"),[S,C]=(0,i.useState)(!0),[E,I]=(0,i.useState)(u.rC8),[w,A]=(0,i.useState)(4),k=(0,l.pHO)(),T=(0,l.lZB)(),{formatNumber:P,translate:D}=(0,a.h)(),x=(0,m.tx)(),R=(0,h.H)(),L=(0,m.$M)(R,{patient:!0}),N=(null==L?void 0:L.images.outlines)!=="none",$=(0,i.useRef)(!1),O=(0,d.zX)(()=>{n({count:w,type:"none"===v?void 0:v,academicLevel:E,createImages:N&&S,description:f})});return(0,i.useEffect)(()=>{$.current||void 0===L||(O(),$.current=!0)},[O,L]),r().createElement("section",{className:(0,s.Z)(k.inputPanelRoot,t),"aria-label":D("global.settings")},r().createElement(o.AnalyticsTypography,{variant:"h2",className:"input-panel-header"},D("courseCore.generate.form.header")),r().createElement(o.AnalyticsTextField,{analyticsId:`${e}.description`,className:k.generateInputRow,label:D("courseCore.generate.form.description"),id:"lm-generate-description",placeholder:x("courseCore.generate.form.descriptionPlaceholder"),onChange:e=>b(e.target.value),multiline:!0,rows:6,value:f}),r().createElement(o.AnalyticsTextField,{id:"lm-generate-title-prefix-id",analyticsId:`${e}.type`,className:k.generateInputRow,select:!0,label:D("courseCore.generate.form.title"),value:v,onChange:e=>{y(e.target.value)}},g.map(t=>r().createElement(o.AnalyticsMenuItem,{analyticsId:`${e}.type.item`,button:!0,key:t,value:t},D((0,p.e7)(t))))),N&&r().createElement(o.AnalyticsFormControlLabel,{analyticsId:`${e}.images.label`,label:D("courseCore.generate.form.includeImages"),htmlFor:"generate-modules-create-images",className:(0,s.Z)(T.checkboxMarginFix,k.generateInputRow),checked:S,control:r().createElement(o.AnalyticsCheckbox,{analyticsId:`${e}.images.checkbox`,value:"checkbox",id:"generate-modules-create-images",onChange:e=>C(e.target.checked)})}),r().createElement(l.avz,{analyticsId:`${e}.complexity`,className:k.generateInputRow,label:D("courseCore.generate.form.complexity"),minLabel:D("courseCore.generate.form.complexityLow"),maxLabel:D("courseCore.generate.form.complexityHigh"),step:1,min:u.pKH,max:u.GN3,valueLabelDisplay:"off",value:E,onValueChange:e=>I(e)}),r().createElement(l.avz,{className:k.generateInputRow,analyticsId:`${e}.moduleCount`,label:D("courseCore.generate.form.moduleCount"),minLabel:P(u._aA),maxLabel:P(u.JTF),step:1,min:u._aA,max:u.JTF,valueLabelDisplay:"auto",value:w,onValueChange:e=>A(e)}),r().createElement(o.AnalyticsPrimaryButton,{analyticsId:`${e}.generate`,className:(0,s.Z)(k.submitGenerate,k.generateInputRow),startIcon:r().createElement(c.AutoGenerate,null),onClick:O},D("courseCore.generate.form.generateButton")))}},654668:function(e,t,n){"use strict";n.d(t,{r:function(){return S}});var i=n(202784),r=n.n(i),s=n(410628),o=n(276635),a=n(847969),l=n(675689),c=n(327355),d=n(88818),u=n(592493),p=n(563060),m=n(171223),h=n(954922),g=n(723831),f=n(35302),b=n(509204);let v=(0,c.makeStyles)(e=>({unsplashInfo:{borderBlockStart:`1px solid ${e.palette.border.main}`,marginBlockStart:"30px",paddingBlockStart:"8px",color:e.palette.text.hint}})),y=()=>({...(0,d.KeX)(),...v()}),S=({courseId:e,parentId:t,courseName:n,onOutlineGenerated:c})=>{var v,S;let C=null!==(v=(0,u.Kx)("positionBefore"))&&void 0!==v?v:"",E=null!==(S=(0,u.Kx)("positionAfter"))&&void 0!==S?S:"",I="outline.generate",w=(0,s.q)(),A=(0,u.tx)(),k=y(),{enqueueSnackbar:T}=(0,d.Ds_)(d.VWo.ContentGenerated,!1),[P,D]=(0,i.useState)([]),[x,R]=(0,i.useState)(),[L,N]=(0,i.useState)(!1),$=(0,u.$M)(e),{status:O,fetchStatus:G,data:_,refetch:M}=(0,f.y5)({queryKey:[e,$.images.outlines,null!=x?x:{}],queryFn:({signal:e,queryKey:t})=>(0,g.O)(...t,e),enabled:!!x}),B=(0,b.s)({courseId:e,parentId:t,positionBefore:C,positionAfter:E}),{isCloseInterrupted:F,cancelClose:U,doClose:V}=(0,p.YK)(!L&&"success"===O),H=async()=>{if(!L)try{N(!0),await B(P),c(),p.Nd.leavePeekState()}catch(e){T({snackbarMessage:w("courseCore.generate.saveFailed"),icon:r().createElement(l.AlertError,null)}),N(!1)}};return r().createElement(r().Fragment,null,r().createElement(d.huC,{fixedHeader:!0,header:r().createElement(d.YIP,{headerText:w("courseCore.generate.header"),subHeaderText:n,analyticsIdPrefix:`${I}.header`,showMenuToggleButton:!0,readyToFocus:!1})},r().createElement("div",{className:k.generatedContentLayout},r().createElement(m.u,{analyticsId:`${I}.form`,className:k.inputPanelPosition,onGenerate:e=>{D([]),(0,o.isEqual)(x,e)&&"fetching"!==G?M():R(e)}}),r().createElement("section",{className:k.generatedContentPreviewRoot,"aria-label":w("courseCore.generate.learningModules")},"success"===O&&r().createElement(a.AnalyticsBanner,{severity:"info",icon:r().createElement(l.Information,null)},w("courseCore.generate.warning")),"error"===O?r().createElement(a.AnalyticsBanner,{severity:"error",icon:r().createElement(l.Attention,null)},w("courseCore.generate.error")):"loading"===O||"fetching"===G?r().createElement("div",{className:k.generatingContentProgress},r().createElement(a.AnalyticsCircularProgress,{id:"course-structure-loading",label:w("courseCore.generate.loading")})):r().createElement("div",{className:k.generatedContentPreviewContent},r().createElement(d.Clg,{multiple:!0,analyticsId:`${I}.preview`,generatedItems:_,disableItem:e=>e.thumbnail,onSelectionChanged:D,renderItem:(e,t)=>{let n=`generated-module-${t}-label`,i=`generated-module-${t}-description`;return{containerProps:{"aria-labelledby":n},selectionInputProps:{"aria-labelledby":n,"aria-describedby":i},result:r().createElement(h.W,{item:e,index:t,labelId:n,descriptionId:i})}}}),"unsplash"===$.images.outlines&&(null==x?void 0:x.createImages)&&r().createElement(a.AnalyticsTypography,{variant:"caption",className:k.unsplashInfo},w("courseCore.generate.unsplash.source")),r().createElement(a.AnalyticsOffScreenAnnouncement,{analyticsId:`${I}.announcement`,message:w("courseCore.generate.modulesGeneratedCount",{count:_.length})}))),r().createElement(d.jHD,{className:k.generatedContentPanelFooter},r().createElement(a.AnalyticsDefaultButton,{analyticsId:`${I}.cancel`,onClick:()=>{p.Nd.leavePeekState()}},w("global.cancel")),r().createElement(a.AnalyticsPrimaryButton,{analyticsId:`${I}.add.button`,disabled:0===P.length||L,onClick:H},A("courseCore.generate.save",{count:P.length}))))),r().createElement(d.U6L,{analyticsId:`${I}.discard-dialog`,open:F,titleText:w("courseCore.generate.discardModal.title"),contentText:A("courseCore.generate.discardModal.description"),rootId:"courseCore-generate-outline-discard-modal",cancelButtonText:w("courseCore.generate.discardModal.cancel"),confirmationButtonText:w("courseCore.generate.discardModal.confirm"),exitCallback:e=>{e?V():U()}}))}},723831:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var i=n(259197),r=n(339729),s=n(357235);async function o(e,t,n,o){let{createImages:a,...l}=n,c=function(e,t){var n;let i=(0,s.U8)(null!==(n=t.type)&&void 0!==n?n:"none");return e.map(({thumbnail:e,...t})=>({...t,thumbnail:void 0,titlePrefixKey:i,key:t.title,label:t.title}))}((await (0,i.cUf)(e,{...l,thumbnailKeywords:a&&"unsplash"===t},o)).outline,n);return n.createImages?c.map(n=>({...n,thumbnail:(0,r.Z)({name:n.title,description:n.description,courseId:e,thumbnailSource:t,thumbnailKeywords:n.thumbnailKeywords,signal:o})})):c}},339729:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(986709),r=n(259197),s=n(817426),o=n(202784),a=n.n(o),l=n(971895);async function c(e){let{name:t,description:n,courseId:o,thumbnailKeywords:c,thumbnailSource:d,signal:u}=e;switch(d){case"ai":{let{images:e}=await (0,r.kyU)(o,{name:t,description:n,count:1},void 0,u);return e[0]}case"unsplash":{let e,n=t;c&&c.length>0&&(n=c.join(" "),e=t);let r=await (0,l.eL)(o,n,e),d=await (0,l.j_)(r.resizedUrl),u=new URL(d);return u.searchParams.append(s.xx,r.id),u.searchParams.append("imageSource","unsplash"),{url:u.href,altText:r.altDescription||r.description||void 0,subtext:a().createElement(l.Mw,{authorName:r.user.name,authorUrl:r.user.profileUrl}),onSave:()=>new i.LQY({courseId:o}).withQueryParams({unsplashId:r.id})}}default:throw Error("Tried to generate a thumbnail without a valid image source")}}},357235:function(e,t,n){"use strict";n.d(t,{Jz:function(){return o},U8:function(){return s},e7:function(){return r}});var i=n(986709);function r(e){return"none"===e?"courseCore.generate.modulePrefix.none":`courseCore.generate.modulePrefix.${e.toLowerCase()}`}function s(e){return"none"===e?null:r(e)}function o(e,t,n,r){if(null===t)return r;let o=e(t);return e("courseCore.generate.moduleName",{prefix:o,number:n,title:function(e,t){let n=function(e){let t=e.join("|");return RegExp(`^(${t})\\s+\\d+\\s*[-:]?\\s*`,"i")}(Object.values(i.Vie).map(t=>e(s(t))));return t.replace(n,"")}(e,r)})}},954922:function(e,t,n){"use strict";n.d(t,{W:function(){return u}});var i=n(35302),r=n(202784),s=n.n(r),o=n(410628),a=n(583521),l=n(598680),c=n(357235),d=n(274310);let u=e=>{let{item:t,index:n,labelId:r,descriptionId:u}=e,p=(0,d.y)(),m=(0,o.q)(),{data:h,status:g}=(0,i.y5)({queryKey:[t],queryFn:async()=>{let e=await t.thumbnail;return null!=e?e:{url:void 0,subtext:void 0,altText:void 0}}});return s().createElement("div",{className:p.generatedLearningModule},s().createElement(l.D,{item:{thumbnailImage:null==h?void 0:h.url,thumbnailAltText:null==h?void 0:h.altText},classes:{container:p.thumbnailContainer},showSkeleton:t.thumbnail&&"loading"===g},s().createElement("div",{className:p.imageSubtextBelowImage},null==h?void 0:h.subtext)),s().createElement("div",{className:p.learningModuleDetails},s().createElement(a.f,{className:p.contentItemTitle,id:r,analyticsId:`generated.learning.module.preview.item.${n}`,readOnly:!0,notAccessible:!0},(0,c.Jz)(m,t.titlePrefixKey,n+1,t.title)),s().createElement("div",{id:u},t.description),s().createElement("div",{className:p.imageSubtextBelowDescription},null==h?void 0:h.subtext)))}},274310:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({generatedLearningModule:{display:"flex"},thumbnailContainer:{display:"flex",gap:"4px",flexDirection:"column",marginRight:"10px",[e.breakpoints.up("sm")]:{marginRight:"20px"}},contentItemTitle:{whiteSpace:"normal"},learningModuleDetails:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"10px"},imageSubtextBelowImage:{[e.breakpoints.only("xs")]:{display:"none"}},imageSubtextBelowDescription:{[e.breakpoints.up("sm")]:{display:"none"}}}))},971895:function(e,t,n){"use strict";n.d(t,{Mw:function(){return u},eL:function(){return c},j_:function(){return d}});var i=n(327355),r=n(88818),s=n(259197),o=n(202784),a=n.n(o),l=n(410628);async function c(e,t,n){let i=await (0,s.L36)(e,{count:5,query:t},{w:300,h:300,fit:"crop",crop:"edges"}),r=Math.floor(Math.random()*i.results.length),o=i.results[r];if(null==o?void 0:o.resizedUrl)return o;if(n)return c(e,n);throw Error("Unsplash search yielded no results")}async function d(e){let t=await fetch(e);if(!t.ok)throw Error("Failed to download the image");let n=await (0,s.OmG)({file:await t.blob()});if(!n.webLocation||!n.fileName)throw Error("Image failed to be uploaded");return n.webLocation+n.fileName}let u=e=>{let t=(0,l.q)(),n=(0,i.useMediaQuery)(e=>e.breakpoints.only("xs"));return a().createElement(r.EZk,{authorLinkText:n?t("courseCore.generate.unsplash.imageBy",{userName:e.authorName}):void 0,analyticsId:"outline.generate.preview",...e})}},509204:function(e,t,n){"use strict";n.d(t,{s:function(){return c}});var i=n(202784),r=n(410628),s=n(259197),o=n(592493),a=n(357235),l=n(845095);let c=e=>{let{courseId:t,parentId:n,positionBefore:c,positionAfter:d}=e,u=(0,r.q)(),p=(0,o.Lx)(),m=(0,i.useCallback)(async e=>p(s.Nwg.content.createContent(e)),[p]);return(0,i.useCallback)(async e=>{let i=e.map((e,t)=>({...e,title:(0,a.Jz)(u,e.titlePrefixKey,t+1,e.title)}));await (0,l.w)({createLearningModule:m,selectedModules:i,courseId:t,parentId:n,positionBefore:c,positionAfter:d})},[m,t,n,c,d,u])}},673805:function(e,t,n){"use strict";n.d(t,{r:function(){return i.r}});var i=n(654668)},941207:function(e,t,n){"use strict";n.d(t,{R:function(){return h}});var i=n(202784),r=n.n(i),s=n(906277),o=n(847969),a=n(410628),l=n(921080),c=n(133814),d=n(958299),u=n(675689),p=n(847614),m=n(563060);let h=e=>{let[t,n]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),f=(0,a.q)(),b=(0,l.y)();return(0,i.useEffect)(()=>{let e=setTimeout(()=>{g(!0)},3e3);return()=>{clearTimeout(e)}},[]),r().createElement(r().Fragment,null,h&&r().createElement(p.m,{key:`${e.title}-banner`,className:b.warningBanner,severity:"info",icon:r().createElement(u.Information,null),actions:[r().createElement(c.i,{key:`${e.title}-openInNewWindow-button`,onClick:()=>{window.open(e.initialIframeSrc,"_blank"),m.Nd.leavePeekState()},analyticsId:"courseCore.course.webLinkLaunchFrame.openInNewWindow"},f("courseCore.course.webLinkLaunchFrame.openInNewWindow")),r().createElement(d.AnalyticsIconButton,{key:`${e.title}-close-button`,onClick:()=>{g(!1)},analyticsId:"course.launch.frame.close.button"},r().createElement(u.Close,null))]},f("courseCore.course.webLinkLaunchFrame.warning")),r().createElement("div",{className:b.modalContent},!t&&r().createElement("div",null,r().createElement(o.AnalyticsCircularProgress,{id:"url.launchFrame.loading",label:f("courseCore.course.webLinkLaunchFrame.loading"),ariaLabel:"url.launchFrame.loading",size:"small"}),r().createElement("div",{className:"sr-only",role:"status","aria-live":"polite"},f("courseCore.course.webLinkLaunchFrame.loading"))),r().createElement("iframe",{onLoad:()=>{n(!0)},id:"url-launch-iframe",name:"url-launch-iframe",allow:"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",src:e.initialIframeSrc,title:e.title,className:(0,s.Z)(e.className,b.iframeContainer,{[b.loadingIframeContainer]:!t})})))}},921080:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(()=>(0,i.createStyles)({modalContent:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},iframeContainer:{display:"flex",height:"100vh"},loadingIframeContainer:{display:"none"},warningBanner:{position:"relative",top:0,left:0,right:0}}))},425608:function(e,t,n){"use strict";n.d(t,{DB:function(){return s},LV:function(){return o},Qq:function(){return r},V5:function(){return d},ll:function(){return a},p$:function(){return i},ql:function(){return l},se:function(){return c}});let i="course.file.content.upload",r="course.file.content.upload.uploadSucceeded",s="course.file.content.upload.uploadSucceeded.cancelRemaining",o="course.cloud.file.content.upload";function a(e,t,n){return{type:i,payload:n,meta:{groupUploadId:e,isInsideFolder:t}}}function l(e,t){return{type:o,payload:t,meta:{groupUploadId:e}}}function c(e){let{correlationId:t,...n}=e;return{type:r,meta:{correlationId:t},payload:n}}function d(){return{type:s}}},872491:function(e,t,n){"use strict";n.d(t,{C:function(){return d.C},D$:function(){return T.D},Dg:function(){return h.D},Dr:function(){return m.D},E_:function(){return S.E},H$:function(){return o.H$},Hv:function(){return E.H},Ko:function(){return i.Ko},Lu:function(){return o.Lu},Mn:function(){return g.M},NT:function(){return l.NT},N_:function(){return A.N},Rx:function(){return x.R},SM:function(){return v.S},VS:function(){return $.V},Wo:function(){return w.W},Ws:function(){return P.W},YQ:function(){return R.Y},YT:function(){return y.YT},ZH:function(){return k.Z},dZ:function(){return l.dZ},dp:function(){return c.dp},fQ:function(){return r.f},kQ:function(){return C.k},lM:function(){return o.lM},p3:function(){return a.p},pW:function(){return p.p},qU:function(){return c.qU},r:function(){return N.r},r5:function(){return D.r},rZ:function(){return L.r},rj:function(){return u.r},s$:function(){return k.s},s_:function(){return f.s},to:function(){return m.t},u$:function(){return y.u$},vQ:function(){return I.Z},vZ:function(){return s.v},zp:function(){return b.z},zr:function(){return c.zr}});var i=n(685486),r=n(527551);n(26736);var s=n(72410),o=n(317176),a=n(180169),l=n(417321),c=n(815640),d=n(20098),u=n(669666),p=n(842606),m=n(341433),h=n(583681),g=n(626427),f=n(880949),b=n(927475),v=n(865447),y=n(581905),S=n(685299);n(807581);var C=n(723053),E=n(453923),I=n(421248),w=n(589181),A=n(375746),k=n(113573),T=n(560606),P=n(873495),D=n(39166),x=n(941207),R=n(463648),L=n(673805);n(490059);var N=n(233901),$=n(82628)},421248:function(e,t,n){"use strict";var i=n(994426),r=n(788637),s=n(69621);t.Z={uploadFileContentItemSaga:i.Z,cloudUploadFileContentItemSaga:r.C,cloudUploadRequestWatcherSaga:s.F}},345974:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});let i=(e,t)=>`${e}${t}`.replace(/_/g,".")},463648:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});let i=e=>e%20+1;function r(e,t,n){let r=i(e);return`static/images/default-banners/${t?"structure":"nature"}${r}${n?"_thumb":""}.jpg`}},163662:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i=n(986709);function r(e){return e.isOverride?e.messageOption===i.pDj.ReplyOnly:e.adminMessageOption===i.pDj.ReplyOnly}},606027:function(e,t,n){"use strict";n.d(t,{q:function(){return r}});var i=n(259197);function r(e){return e?i.lL$.ParticipantOrgMessagingAvailabilityMode:i.lL$.StudentCourseMessagingAvailabilityMode}},258517:function(e,t,n){"use strict";n.d(t,{d:function(){return r}});var i=n(259197);function r(e){return e?i.lL$.OrgMessagingForceEmailMode:i.lL$.CourseMessagingForceEmailMode}},815640:function(e,t,n){"use strict";n.d(t,{dp:function(){return r.d},qU:function(){return i.q},zr:function(){return s.z}});var i=n(606027),r=n(258517),s=n(163662)},375931:function(e,t,n){"use strict";var i,r;n.d(t,{N:function(){return i}}),(r=i||(i={})).ModifyConfiguration="course.progress.settings.MODIFY",r.ViewConfiguration="course.progress.settings.VIEW",r.ViewProgressInformation="course.progress.information.VIEW"},694715:function(e,t,n){"use strict";n.d(t,{V:function(){return l}});var i=n(202784),r=n(259197),s=n(150885),o=n(953276),a=n(544431);let l=e=>{let{contentBlocks:t}=(0,o.P)(e.bbml),{courseId:n,prepareEditorPlugins:l}=e,c=null!=l?l:e=>[(0,s.link)(),(0,s.image)(),(0,s.video)(),(0,s.insertLocalFile)({courseId:e,apiBasePath:r.vc.apiBasePath,xsrfToken:r.vc.xsrf}),(0,s.math)({courseId:e,apiBasePath:r.vc.apiBasePath,xsrfToken:r.vc.xsrf}),(0,s.contentMarket)({courseId:e,xsrfToken:r.vc.xsrf,apiBasePath:r.vc.apiBasePath,openContentMarket:()=>{},getEmbedSrc:()=>Promise.resolve("")})];return i.createElement("div",{className:"bbml-document-viewer"},t.map(e=>i.createElement(a.kP,{block:e,key:e.id,courseId:n,prepareEditorPlugins:c})))}},140155:function(e,t,n){"use strict";n.d(t,{q:function(){return u}});var i=n(202784),r=n.n(i),s=n(410628),o=n(675689),a=n(312203),l=n(847969),c=n(592493),d=n(563060);let u=e=>{let{analyticsId:t,courseId:n}=e,i=(0,c.$M)(n),u=(0,d.Ls)(d.SS.GenerateDocumentQuestions()),p=(0,s.q)(),m=(0,a.y)();return i.canGenerateQuestions?r().createElement("div",{className:m.container},r().createElement(o.AutoGenerate,null),r().createElement(l.AnalyticsTooltip,{analyticsId:`${t}.tooltip`,placement:"bottom",title:p("documents.generateQuestions.tip")},r().createElement(l.AnalyticsLink,{analyticsId:`${t}.link`,href:u},p("documents.generateQuestions.link")))):null}},312203:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(()=>({container:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:"8px",marginTop:"8px"}}))},741717:function(e,t,n){"use strict";n.d(t,{u:function(){return c}});var i=n(847969),r=n(150885),s=n(202784),o=n.n(s),a=n(611836),l=n(460806);let c=e=>{let{contentId:t,block:n,autoFocus:c}=e,[d,u]=(0,s.useState)(c),{isEditing:p}=(0,s.useContext)(a.R),m=(0,s.useRef)(null),h=(0,l.fy)(),g=function(e){let t=(0,s.useRef)(e.value),[,n]=(0,s.useReducer)(e=>e+1,0);return t.current!==e.value&&(t.current=e.value,n()),t}(n);(0,s.useEffect)(()=>{p||u(!1)},[p]),(0,s.useLayoutEffect)(()=>{var e;if(!d)return;let t=null===(e=null==m?void 0:m.current)||void 0===e?void 0:e.querySelector(".bb-editor");null==t||t.focus({preventScroll:!0})},[d]);let f=o().createElement(r.BbEditor,{bbml:g.current,editorId:n.id,isReadOnly:!d,rootContentId:t,onFocus:()=>{var e;let t=null===(e=null==m?void 0:m.current)||void 0===e?void 0:e.querySelector(".bb-editor");null==t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},onChange:e=>{g.current=e.toBbML()}});return p?o().createElement(i.AnalyticsClickAwayListener,{onClickAway:()=>{u(!1)},analyticsId:`document.text.block.${n.id}.clickAwayListener`},o().createElement("div",{ref:m,onClick:()=>{u(!0)},onBlur:()=>{h({type:"updateBlock",id:n.id,update:{type:"text",value:g.current}})}},f)):f}},721739:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(202784),r=n.n(i),s=n(741717);let o=e=>{let{block:t,contentId:n}=e;return"text"===t.type?r().createElement(s.u,{autoFocus:t.isNew,block:t,contentId:n}):null}},332164:function(e,t,n){"use strict";n.d(t,{i:function(){return c}});var i=n(906277),r=n(202784),s=n.n(r),o=n(540535),a=n(177978),l=n(910383);let c=e=>{let{analyticsId:t,documentId:n,canEdit:r,sidebarOpen:c}=e,d=(0,o.y)();return n?s().createElement("div",{className:(0,i.Z)(d.root,r&&d.editLayout)},s().createElement(l.e,{open:c,className:d.sidebarGridArea}),s().createElement(a.E,{analyticsId:t,documentId:n,className:d.contentGridArea})):null}},540535:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var i,r,s=n(327355);(i=r||(r={})).Sidebar="sidebar",i.Content="content";let o=(0,s.makeStyles)(()=>({root:{flexGrow:1,display:"grid",gridTemplateAreas:`
        "${r.Content}"
      `},editLayout:{gridTemplateColumns:"auto 1fr",gridTemplateAreas:`
        "${r.Sidebar} ${r.Content}"
      `},sidebarGridArea:{gridArea:r.Sidebar},contentGridArea:{gridArea:r.Content}}))},607822:function(e,t,n){"use strict";n.d(t,{s:function(){return c}});var i=n(202784),r=n.n(i),s=n(327355),o=n(721739),a=n(603288);let l=(0,s.makeStyles)(()=>({column:{gridColumn:e=>(function(e){let t=a.D+1,n=Math.min(Math.max(e.partitionStart,1),t),i=Math.min(Math.max(e.partitionEnd+1,1),t);return`${n} / ${i}`})(e)}})),c=e=>{let{column:t,contentId:n}=e,i=l(t);return r().createElement("div",{className:i.column},t.blocks.map(e=>r().createElement(o.g,{key:e.id,block:e,contentId:n})))}},177978:function(e,t,n){"use strict";n.d(t,{E:function(){return c}});var i=n(202784),r=n.n(i),s=n(976024),o=n(183826),a=n(906277),l=n(460806);let c=e=>{let{analyticsId:t,documentId:n,className:i}=e,c=(0,s.y)(),d=(0,l.Gv)();return r().createElement("div",{className:(0,a.Z)(c.root,i)},d.rows.map(e=>r().createElement(o.X,{analyticsId:`${t}.row`,key:e.id,row:e,contentId:n})))}},976024:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(327355),r=n(603288);let s=(0,i.makeStyles)(e=>({root:{maxWidth:"800px",width:"100%",marginLeft:"auto",marginRight:"auto",display:"flex",flexDirection:"column",[e.breakpoints.up("md")]:{display:"grid",gridTemplateColumns:`repeat(${r.D}, 1fr)`,gridAutoRows:"min-content"},"& .bb-editor-container.is-read-only .ql-editor":{maxHeight:"none"}}}))},183826:function(e,t,n){"use strict";n.d(t,{X:function(){return m}});var i=n(202784),r=n.n(i),s=n(607822),o=n(327355),a=n(611836),l=n(675689),c=n(460806),d=n(847969),u=n(410628);let p=(0,o.makeStyles)(e=>({row:{gridColumn:"1 / 13",display:"grid",gridTemplateColumns:"inherit",isolation:"isolate",position:"relative","&:hover $floatingControls":{display:"initial",position:"absolute",top:"50%",transform:"translateY(-50%) translateX(-65%)",border:`1px solid ${e.palette.border.main}`,borderRadius:"4px"}},floatingControls:{display:"none",zIndex:1,backgroundColor:e.palette.background.default},deleteButton:{color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}}})),m=e=>{let{analyticsId:t,row:n,contentId:o}=e,m=p(),{isEditing:h}=(0,i.useContext)(a.R),g=(0,c.fy)(),f=(0,u.q)(),b=e=>{g({type:"deleteRow",rowId:e})};return r().createElement("div",{className:m.row},h&&r().createElement("div",{className:m.floatingControls},r().createElement(d.AnalyticsIconButton,{analyticsId:`${t}.delete.button`,"aria-label":f("documents.panel.content.row.delete"),classes:{root:m.deleteButton},size:"small",onClick:()=>{b(n.id)}},r().createElement(l.Trash,null))),n.columns.map(e=>r().createElement(s.s,{key:e.id,column:e,contentId:o})))}},611836:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});let i=(0,n(202784).createContext)({isEditing:!1,setIsEditing:()=>{}})},460806:function(e,t,n){"use strict";n.d(t,{$B:function(){return l},E$:function(){return d},Gv:function(){return u},fy:function(){return c}});var i=n(465139),r=n(715729),s=n(198022),o=n(603288),a=n(646878);let{HistoryProvider:l,useDispatch:c,useHistory:d,useState:u}=(0,i.fi)(function(e,t){switch(t.type){case"addBlock":return{rows:[...e.rows,{id:(0,s.v4)(),columns:[{id:(0,s.v4)(),blocks:[{id:(0,a.EM)(),type:"text",value:"",isNew:!0}],partitionStart:1,partitionEnd:o.D}]}]};case"updateBlock":return(0,r.Uy)(e,e=>{for(let n of e.rows)for(let e of n.columns)for(let n of e.blocks)if(n.id===t.id){Object.assign(n,t.update);return}});case"deleteRow":return{rows:e.rows.filter(e=>e.id!==t.rowId)};default:return e}})},391253:function(e,t,n){"use strict";n.d(t,{s:function(){return g}});var i=n(202784),r=n.n(i),s=n(259197),o=n(847969),a=n(872491),l=n(927335),c=n(563060),d=n(327355),u=n(410628),p=n(465139),m=n(88818);let h=(0,d.makeStyles)(()=>({activityIndicator:{position:"relative",bottom:"10px"}})),g=e=>{let{page:t,analyticsId:n}=e,d=h(),g=(0,u.q)(),[f,b]=(0,i.useState)(),v=(0,p.Me)(),y=(0,a.VS)(t);return(0,i.useEffect)(()=>{(async()=>{var e;for(let n of(await (0,s.IqD)(null!==(e=t.courseId)&&void 0!==e?e:"")).indicators)if(t.id===n.contentId&&n.classConversationHasIndicator){b(!0);return}b(!1)})()},[t.id,t.courseId]),r().createElement(o.AnalyticsIconButton,{analyticsId:`${n}.conversations.button`,"aria-label":g("documents.panel.header.conversation",{title:t.title}),onClick:async()=>{y&&await c.Nd.goPeekState(y),b(!1)}},r().createElement(l.Conversation,null),f&&r().createElement(m.P2r,{className:d.activityIndicator,id:v}))}},738007:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var i=n(88818),r=n(202784),s=n.n(r),o=n(410628);let a=e=>{let{analyticsId:t,courseName:n,canEdit:r,documentTitle:a,children:l,onTitleChange:c}=e,d=(0,o.q)();return r?s().createElement(i.fuW,{editButtonAriaLabel:d("documents.panel.header.edit",{title:a}),headerText:a,subHeaderText:n,analyticsIdPrefix:t,showMenuToggleButton:!0,readyToFocus:!0,onHeaderTextChange:c},l):s().createElement(i.YIP,{headerText:a,subHeaderText:n,analyticsIdPrefix:t,showMenuToggleButton:!0,readyToFocus:!0},l)}},268220:function(e,t,n){"use strict";n.d(t,{N:function(){return c}});var i=n(872491),r=n(986709),s=n(259197),o=n(592493),a=n(202784),l=n.n(a);let c=e=>{let{page:t,onSave:n}=e,a=(0,o.Lx)(),c=(0,o.pJ)(e=>null!=t&&!!t.id&&!!s.Ys.content.getAdaptiveReleaseCriteriaByContentId(e,t.id).length);async function d(e){await n({isAvailable:e===r.hbA.Visible,isPartiallyVisible:!1,adaptiveReleaseRules:{}}),t&&c&&a(s.Nwg.content.deleteAdaptiveReleaseRules([t],{keepForcedSequenceRules:!0}))}return l().createElement(i.D$,{variant:"panelHeader",content:null!=t?t:{isAvailable:!1},onChange:d})}},219008:function(e,t,n){"use strict";n.d(t,{h:function(){return k}});var i=n(88818),r=n(872491),s=n(259197),o=n(592493),a=n(202784),l=n.n(a),c=n(410628),d=n(646878),u=n(611836),p=n(738007),m=n(829255),h=n(659698),g=n(460806),f=n(586948),b=n(78916),v=n(391253),y=n(268220),S=n(847969),C=n(927335),E=n(675689),I=n(563060),w=n(327355);let A="document.panel",k=e=>{var t,n,k,T;let{onPageChange:P}=e,D=(0,m.y)(),x=(0,r.Hv)(),R=(0,o.Tn)(x),{page:L,document:N,savePage:$}=(0,f.v)(x,P),O=(0,a.useMemo)(()=>{var e;return(0,d.wL)(null===(e=null==N?void 0:N.body)||void 0===e?void 0:e.rawText)},[null===(t=null==N?void 0:N.body)||void 0===t?void 0:t.rawText]),[G,_]=(0,a.useState)(!1),M=!!L&&s.AaE.canEdit(L),B=(0,a.useMemo)(()=>({isEditing:G,setIsEditing:_}),[G,_]),F=(0,c.q)(),U=(0,w.useMediaQuery)(e=>e.breakpoints.up("md")),{toolbarControls:V,body:H}=(0,b.m)(A,x,null==L?void 0:L.id,N,M,_);return l().createElement(i.huC,{header:l().createElement(p.o,{analyticsId:A,canEdit:M,courseName:null!==(n=null==R?void 0:R.name)&&void 0!==n?n:"",documentTitle:null!==(k=null==L?void 0:L.title)&&void 0!==k?k:"",onTitleChange:e=>$({title:e})},l().createElement("div",{className:D.headerButtons},M&&l().createElement(y.N,{onSave:$,page:L}),!!L&&s.AaE.hasConversation(L)&&l().createElement(v.s,{analyticsId:A,page:L}),M&&l().createElement(S.AnalyticsIconButton,{onClick:()=>{I.Nd.goPeekState(I.SS.DocumentSettings())},analyticsId:`${A}.settings.button`,"aria-label":F("documents.panel.header.settings")},U?l().createElement(C.Settings,null):l().createElement(E.Settings,null))))},l().createElement("div",{className:D.root},l().createElement(u.R.Provider,{value:B},l().createElement(g.$B,{initialState:O,key:null===(T=null==N?void 0:N.body)||void 0===T?void 0:T.rawText},M&&l().createElement(h.J,{pageId:null==L?void 0:L.id,hideTabs:G},V),H))))}},829255:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(()=>({root:{height:"100%",display:"flex",flexDirection:"column"},headerButtons:{display:"flex",gap:"10px","@media print":{display:"none"}}}))},25374:function(e,t,n){"use strict";n.d(t,{X:function(){return p}});var i=n(847969),r=n(675689),s=n(327355),o=n(202784),a=n.n(o),l=n(410628),c=n(460806),d=n(245578);let u=(0,s.makeStyles)(()=>({container:{padding:"20px",display:"flex",flexDirection:"column",gap:"10px"},section:{display:"flex",flexDirection:"column",gap:"10px"},blocks:{display:"flex",alignItems:"flex-start",alignContent:"flex-start",gap:"10px",flexWrap:"wrap"},button:{width:"96px",height:"96px"}})),p=()=>{let e=u(),t=(0,l.q)(),n=(0,c.fy)();return a().createElement("div",{className:e.container},a().createElement("div",{className:e.section},a().createElement(i.AnalyticsTypography,{variant:"h4"},t("documents.panel.sidebar.blocks.text.sectionName")),a().createElement("div",{className:e.blocks},a().createElement(d.f,{analyticsId:"documents.sidebar.paragraph.button",className:e.button,icon:a().createElement(r.Text,null),label:t("documents.panel.sidebar.blocks.text.paragraph"),onClick:()=>n({type:"addBlock"})}))))}},910383:function(e,t,n){"use strict";n.d(t,{e:function(){return p}});var i=n(327355),r=n(88818),s=n(906277),o=n(202784),a=n.n(o),l=n(410628),c=n(241759),d=n(25374),u=n(280765);let p=e=>{let{open:t,className:n}=e,o=(0,u.y)(),p=(0,l.q)(),m=(0,i.useMediaQuery)(r.QE9);return a().createElement(c.ZP,{in:t,timeout:m?0:u.h,unmountOnExit:!0},e=>a().createElement("section",{"aria-label":p("documents.panel.sidebar.label"),className:(0,s.Z)([n,o.root,"exiting"===e&&o.slideOut]),inert:"entered"!==e?"":void 0},a().createElement(d.X,null)))}},280765:function(e,t,n){"use strict";n.d(t,{h:function(){return r},y:function(){return s}});var i=n(327355);let r=300,s=(0,i.makeStyles)(e=>({root:{borderRight:`1px solid ${e.palette.border.main}`,width:360,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{animation:`$slideIn ${r}ms`,transition:`width ${r}ms`}},"@keyframes slideIn":{from:{width:"0px"},to:{width:"360px"}},slideOut:{width:"0px"}}))},245578:function(e,t,n){"use strict";n.d(t,{f:function(){return c}});var i=n(847969),r=n(327355),s=n(906277),o=n(202784),a=n.n(o);let l=(0,r.makeStyles)(e=>({root:{display:"flex",flexDirection:"column",gap:"4px",borderRadius:"4px",border:"1px solid transparent",transition:"border-color 0.3s ease-out, color 0.3s ease-out","&:hover, &:focus-visible":{borderColor:e.palette.focus.light,color:e.palette.focus.light}}})),c=(0,o.forwardRef)((e,t)=>{let{children:n,icon:r,label:o}=e,c=l();return a().createElement(i.AnalyticsButtonBase,{...e,ref:t,className:(0,s.Z)(c.root,e.className)},r,o&&a().createElement(i.AnalyticsTypography,{variant:"caption"},o),n)})},700003:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var i=n(847969),r=n(88818),s=n(563060),o=n(202784),a=n.n(o),l=n(410628),c=n(460806);let d=e=>{let{analyticsId:t,onCancel:n}=e,d=(0,l.q)(),{clear:u,canUndo:p}=(0,c.E$)(),{isCloseInterrupted:m,cancelClose:h,doClose:g}=(0,s.YK)(p),{displayModal:f,modal:b}=(0,r.ddY)(r.U6L,{titleText:d("documents.panel.confirmation.title"),contentText:d("documents.panel.confirmation.message"),analyticsId:`${t}.unsavedChanges.confirm`,rootId:d("unsavedChanges.confirm"),confirmationButtonText:d("global.close")});async function v(){if(p){let{confirmed:e}=await f();if(!e)return;u()}null==n||n()}return(0,o.useEffect)(()=>{(async function(){if(!m)return;let{confirmed:e}=await f();if(e){g();return}h()})()},[h,f,g,m]),a().createElement(a().Fragment,null,a().createElement(i.AnalyticsDefaultButton,{analyticsId:`${t}.cancel.button`,onClick:v},d("global.cancel")),b)}},351997:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var i=n(847969),r=n(202784),s=n.n(r),o=n(410628),a=n(871699),l=n(611836),c=n(347137),d=n(700003),u=n(19039);let p=e=>{let{analyticsId:t,document:n,sidebarOpen:p,toggleSidebar:m,onChangeEditMode:h}=e,g=(0,a.y)(),f=(0,o.q)(),{isEditing:b,setIsEditing:v}=(0,r.useContext)(l.R);return b?s().createElement(c.U,{analyticsId:t,classes:{editControls:g.editControls},sidebarOpen:p,onToggleSidebar:()=>m(!p),cancelButton:s().createElement(d.t,{analyticsId:`${t}.cancel.button`,onCancel:()=>{m(!1),v(!1)}}),saveButton:s().createElement(u.Z,{analyticsId:`${t}.save.button`,document:n,onSave:()=>{m(!1),v(!1)}})}):s().createElement("div",{className:g.editControls},s().createElement(i.AnalyticsPrimaryButton,{analyticsId:`${t}.edit.button`,onClick:()=>h(!0)},f("global.edit")))}},871699:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(()=>({editControls:{display:"flex",gap:"10px",alignSelf:"center",marginInlineStart:"auto"}}))},659698:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var i=n(906277),r=n(202784),s=n.n(r),o=n(860172),a=n(138176);let l=e=>{let{pageId:t,hideTabs:n=!1,className:r,children:l}=e,c=(0,a.y)();return s().createElement("div",{className:(0,i.Z)(c.root,r)},!n&&s().createElement(o.U,{pageId:t}),l)}},138176:function(e,t,n){"use strict";n.d(t,{y:function(){return i}});let i=(0,n(327355).makeStyles)(e=>({root:{display:"flex",gap:"8px",borderBlockEnd:`1px solid ${e.palette.border.main}`,paddingInline:"16px",minBlockSize:"49px","@media print":{display:"none"}}}))},347137:function(e,t,n){"use strict";n.d(t,{U:function(){return p}});var i=n(847969),r=n(927335),s=n(675689),o=n(906277),a=n(202784),l=n.n(a),c=n(410628),d=n(460806),u=n(296484);let p=e=>{let{analyticsId:t,classes:n,sidebarOpen:a,onToggleSidebar:p,saveButton:m,cancelButton:h}=e,g=(0,u.y)(),f=(0,c.q)(),b=(0,d.E$)();return l().createElement(l().Fragment,null,l().createElement("div",{className:g.modifyBlocksControls},l().createElement(i.AnalyticsPrimaryButton,{analyticsId:`${t}.sidebar.button`,className:g.addButton,"aria-label":f(a?"documents.panel.toolbar.closeSidebar":"documents.panel.toolbar.openSidebar"),"aria-expanded":a,onClick:p},l().createElement(r.AddPlus,{className:(0,o.Z)(g.addIcon,a&&g.rotateAddIcon)})),l().createElement(i.AnalyticsIconButton,{analyticsId:`${t}.undo.button`,disabled:!b.canUndo,onClick:b.undo,"aria-label":f("documents.panel.toolbar.undo")},l().createElement(s.Undo,null)),l().createElement(i.AnalyticsIconButton,{analyticsId:`${t}.redo.button`,disabled:!b.canRedo,onClick:b.redo,"aria-label":f("documents.panel.toolbar.redo")},l().createElement(s.GoForward,null))),l().createElement("div",{className:null==n?void 0:n.editControls},h,m))}},296484:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(327355),r=n(280765);let s=(0,i.makeStyles)(()=>({modifyBlocksControls:{alignSelf:"center"},addButton:{paddingInline:"6px",paddingBlock:"4px",minInlineSize:"auto"},addIcon:{"@media (prefers-reduced-motion: no-preference)":{transition:`transform ${r.h}ms`}},rotateAddIcon:{transform:"rotate(45deg)"}}))},19039:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(202784),r=n.n(i),s=n(847969),o=n(586920),a=n(592493),l=n(460806),c=n(259197),d=n(410628);let u=e=>{let{analyticsId:t,document:n,onSave:i}=e,u=(0,d.q)(),p=(0,a.Lx)(),m=(0,l.Gv)();return r().createElement(s.AnalyticsPrimaryButton,{analyticsId:t,onClick:function(){if(!n)return;let e=(0,o.h)(m);p(c.Nwg.content.persistContent(n,{...n,body:{...n.body,rawText:e}})),null==i||i()}},u("global.save"))}},586948:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var i=n(259197),r=n(592493),s=n(465139),o=n(202784);function a(e,t){let n=(0,r.Lx)(),a=(0,r.pJ)(e=>i.Ys.app.getRoute(e).params.id||void 0),l=(0,r.pJ)(e=>a?i.Ys.content.getContentById(e,a):void 0),c=(0,r.pJ)(e=>{var t;return a?null===(t=i.Ys.content.getContentsByParentContentId(e,a))||void 0===t?void 0:t[0]:void 0});(0,o.useEffect)(()=>{a&&n(i.Nwg.content.loadContents({courseId:e,contentId:a,eagerFetchChildren:!0}))},[a,e,n]);let d=(0,s.zX)(async e=>{l&&(await n(i.Nwg.content.persistContent(l,{...l,...e})),t(e))});return{page:l,document:c,savePage:d}}},669149:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(88818),r=n(866176),s=n(202784),o=n.n(s);let a=e=>{let{courseId:t,pageId:n}=e;return o().createElement(i.gXi,null,n&&o().createElement(r.D4,{courseId:t,contentId:n,analyticsId:"course.content.document.progress"}))}},860172:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var i=n(866176),r=n(872491),s=n(592493),o=n(202784),a=n.n(o);let l=e=>{let{pageId:t}=e,[n,o]=(0,i.WJ)(),l=(0,r.Hv)(),c=(0,s.sM)(l)&&t;return a().createElement(a().Fragment,null,c&&a().createElement(i.Bk,{analyticsId:"course.content.document",onChange:o,value:n,variant:"basic"}))}},78916:function(e,t,n){"use strict";n.d(t,{m:function(){return c}});var i=n(866176),r=n(202784),s=n.n(r),o=n(332164),a=n(669149),l=n(351997);let c=(e,t,n,c,d,u)=>{let[p,m]=(0,r.useState)(!1),[h]=(0,i.WJ)();switch(h){case i.GJ.Content:return{toolbarControls:s().createElement(l.H,{analyticsId:e,document:c,sidebarOpen:p,toggleSidebar:m,onChangeEditMode:u}),body:s().createElement(o.i,{analyticsId:e,documentId:null==c?void 0:c.id,canEdit:d,sidebarOpen:p})};case i.GJ.Progress:return{toolbarControls:null,body:s().createElement(a.A,{courseId:t,pageId:n})}}}},858750:function(e,t,n){"use strict";n.d(t,{n:function(){return b}});var i=n(202784),r=n.n(i),s=n(465139),o=n(847969),a=n(675689),l=n(410628),c=n(489448),d=n(150885),u=n(35302),p=n(88818),m=n(276635),h=n(906277),g=n(219711),f=n(259197);let b=({analyticsPrefix:e,courseId:t,contentId:n,courseName:b,onContentInserted:v,onInsertionCanceled:y,onGenerateContent:S})=>{let C,E;let I=(0,l.q)(),w=(0,p.KeX)(),A=(0,g.y)(),[k,T]=(0,i.useState)(),{data:P,status:D,fetchStatus:x,refetch:R}=(0,u.y5)({queryKey:[t,n,null!=k?k:{}],queryFn:async({queryKey:e,signal:t})=>await (0,f.LrM)(...e,t),enabled:!!k}),L=(0,i.useCallback)(e=>{(0,m.isEqual)(k,e)&&"fetching"!==x?R():T(e)},[k,x,R]),N="success"===D,$=(0,s.f0)(S);return(0,i.useEffect)(()=>{null==$||$(N)},[N,$]),r().createElement(p.huC,{fixedHeader:!0,header:r().createElement(p.YIP,{headerText:I("documents.components.generateContent.header"),subHeaderText:b,analyticsIdPrefix:`${e}.header`,showMenuToggleButton:!0,readyToFocus:!0})},r().createElement("div",{className:w.generatedContentLayout},r().createElement("div",{className:w.inputPanelPosition},r().createElement(c.Ns,{analyticsPrefix:e,onGenerate:L})),(C=null,E=null,"fetching"===x?C=r().createElement("div",{className:w.generatingContentProgress},r().createElement(o.AnalyticsCircularProgress,{id:"generate-content-panel-loading",label:I("documents.components.generateContent.loading")})):"error"===D?E=r().createElement(o.AnalyticsBanner,{severity:"error",icon:r().createElement(a.Attention,null)},I("documents.components.generateContent.error")):"success"===D&&(E=r().createElement(o.AnalyticsBanner,{severity:"info",icon:r().createElement(a.Information,null)},I("courseCore.generate.warning")),C=r().createElement("div",{className:"bbml-editor"},r().createElement(o.AnalyticsTypography,{variant:"h2"},I("documents.components.generateContent.previewHeader")),r().createElement(o.AnalyticsFormLabel,{id:e,analyticsId:e,className:w.generatedContentItem},I("documents.components.generateContent.previewLabel")),r().createElement("div",{className:(0,h.Z)(A.generatedDocumentContent,"content-list")},r().createElement(d.BbEditor,{editorId:`${e}.preview`,bbml:P.content.displayText,isReadOnly:!0,size:"large",ariaLabelledBy:e})))),r().createElement("section",{className:w.generatedContentPreviewRoot,"aria-label":I("documents.components.generateContent.textContent")},E,r().createElement("div",{className:(0,h.Z)(w.generatedContentPreviewContent,A.generatedContentPreviewContent)},C))),r().createElement(p.jHD,{className:w.generatedContentPanelFooter},r().createElement(o.AnalyticsDefaultButton,{analyticsId:`${e}.cancel`,onClick:y},I("documents.components.generateContent.cancel")),r().createElement(o.AnalyticsPrimaryButton,{analyticsId:`${e}.insert.button`,disabled:"success"!==D||"fetching"===x,onClick:()=>{var e;"success"===D&&v(null!==(e=P.content.rawText)&&void 0!==e?e:"")}},I("documents.components.generateContent.insert")))))}},219711:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({generatedContentPreviewContent:{"& .bbml-editor .bb-editor-root .bb-editor-container.is-read-only .ql-editor":{padding:"10px 15px"}},generatedDocumentContent:{backgroundColor:e.palette.background.b3,border:`1px solid ${e.palette.border.main}`}}))},473571:function(e,t,n){"use strict";n.d(t,{q:function(){return l}});var i=n(202784),r=n.n(i),s=n(410628),o=n(847969),a=n(311822);let l=e=>{let{exitCallback:t,analyticsId:n}=e,l=(0,s.q)(),c=`${n}.cancel-unsaved.dialog`,[d,u]=(0,i.useState)(!1),[p,m]=(0,i.useState)(!1),h=(e=!1)=>{m(e),u(!0)};return r().createElement(a.P2,{analyticsId:c,open:!d,onClose:()=>h(),title:l("documents.discardModal.title"),description:l("documents.discardModal.description"),TransitionProps:{onExited:()=>{t(p),u(!1)}},style:{zIndex:2e3}},r().createElement(o.AnalyticsDefaultButton,{analyticsId:`${n}.cancel.button`,onClick:()=>h(!1)},l("documents.discardModal.cancel")),r().createElement(o.AnalyticsPrimaryButton,{analyticsId:`${n}.confirmation.button`,onClick:()=>h(!0)},l("documents.discardModal.confirm")))}},489448:function(e,t,n){"use strict";n.d(t,{Ns:function(){return p}});var i=n(202784),r=n.n(i),s=n(465139),o=n(906277),a=n(847969),l=n(88818),c=n(755755),d=n(986709),u=n(675689);let p=({analyticsPrefix:e,onGenerate:t})=>{let{translate:n,formatNumber:p}=(0,c.h)(),m=(0,l.pHO)(),[h,g]=(0,i.useState)(""),[f,b]=(0,i.useState)(d.rC8),[v,y]=(0,i.useState)(0),S=0===v,C=(0,s.zX)(()=>{let e={prompt:h,academicLevel:f};v>0&&(e.numberOfParagraphs=v),t(e)});return(0,i.useEffect)(()=>{C()},[C]),r().createElement("section",{className:m.inputPanelRoot,"aria-label":n("global.settings")},r().createElement(a.AnalyticsTypography,{variant:"h2"},n("documents.components.generateContent.inputsHeader")),r().createElement(a.AnalyticsTextField,{className:m.generateInputRow,analyticsId:`${e}.prompt`,label:n("documents.components.generateContent.promptLabel"),multiline:!0,rows:6,placeholder:n("documents.components.generateContent.promptPlaceholder"),value:h,onChange:e=>g(e.target.value)}),r().createElement(l.avz,{className:m.generateInputRow,analyticsId:`${e}.complexity`,label:n("documents.components.generateContent.complexityLabel"),minLabel:n("documents.components.generateContent.complexityMin"),maxLabel:n("documents.components.generateContent.complexityMax"),min:d.pKH,max:d.GN3,value:f,onValueChange:b}),r().createElement(l.avz,{className:m.generateInputRow,analyticsId:`${e}.numberOfParagraphs`,label:n("documents.components.generateContent.numberOfParagraphsLabel"),minLabel:n("documents.components.generateContent.auto"),maxLabel:p(5),min:0,max:5,value:v,onValueChange:y,valueLabelDisplay:S?"off":"auto"}),r().createElement(a.AnalyticsPrimaryButton,{className:(0,o.Z)(m.submitGenerate,m.generateInputRow),analyticsId:`${e}.generate.button`,startIcon:r().createElement(u.AutoGenerate,null),onClick:C},n("documents.components.generateContent.generate")))}},646878:function(e,t,n){"use strict";n.d(t,{EM:function(){return l},Sy:function(){return o},wL:function(){return p},xy:function(){return a},z$:function(){return s}});var i=n(198022),r=n(603288);let s="data-layout-row",o="data-layout-column",a="data-layout-column-width";function l(){return"bbml-editor-id_"+(0,i.v4)()}function c(e){return Array.from(e.children)}function d(e){var t;return{id:null!==(t=e.getAttribute("data-bbid"))&&void 0!==t?t:l(),type:"text",value:e.innerHTML,isNew:!1}}function u(e,t,n){return{partitionStart:e,partitionEnd:Math.min(Math.max(e+Math.min(t,n)-1,e),e+n)}}function p(e){if(!e)return{rows:[]};let t=new DOMParser().parseFromString(e,"text/html"),n=[];for(let e of c(t.body))e.hasAttribute(s)?n.push(function(e){var t,n,l;let p=r.D,m=1,h=[];for(let s of c(e)){let e;s.hasAttribute(o)?e=function(e,t,n){var r;let s=function(e,t){var n;let i=parseInt(null!==(n=e.getAttribute(a))&&void 0!==n?n:"",10);return Number.isSafeInteger(i)?i:t}(e,n),l=[];for(let t of c(e))l.push(d(t));return{id:null!==(r=e.getAttribute(o))&&void 0!==r?r:(0,i.v4)(),...u(t,s,n),blocks:l}}(s,m,p):(t=m,n=p,e={id:(0,i.v4)(),...u(t,1,n),blocks:[d(s)]}),p=r.D-e.partitionEnd,m=e.partitionEnd+1,h.push(e)}return{id:null!==(l=e.getAttribute(s))&&void 0!==l?l:(0,i.v4)(),columns:h}}(e)):n.push({id:(0,i.v4)(),columns:[{id:(0,i.v4)(),partitionStart:1,partitionEnd:r.D,blocks:[d(e)]}]});return{rows:n}}},586920:function(e,t,n){"use strict";n.d(t,{h:function(){return r}});var i=n(646878);function r(e){let t=document.createElement("div");for(let n of e.rows)t.append(function(e){let t=document.createElement("div");for(let n of(t.setAttribute(i.z$,e.id),e.columns))t.append(function(e){let t=e.partitionEnd-e.partitionStart+1,n=document.createElement("div");for(let r of(n.setAttribute(i.Sy,e.id),n.setAttribute(i.xy,t.toString()),e.blocks))n.appendChild(function(e){if("text"===e.type)return function(e){let t=document.createElement("div");return t.dataset.bbid=e.id,t.innerHTML=e.value,t}(e);throw Error(`Unhandled block type (${e.type}) in serialize.`)}(r));return n}(n));return t}(n));return t.innerHTML}},479323:function(e,t,n){"use strict";n.d(t,{Kd:function(){return m},he:function(){return c.h},ng:function(){return d.n},q0:function(){return u.q},qh:function(){return p.q}});var i=n(202784),r=n(928316),s=n(44432),o=n(174897),a=n(740934),l=n(146636);n(694715);var c=n(219008),d=n(858750),u=n(473571),p=n(140155);let m={render:l.c,destroy:l.b};t.ZP={renderComponent:(e,t,n)=>{r.render(i.createElement(o.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,isRtl:n.isRtl},i.createElement(s.zt,{store:t},i.createElement(a.C,{...n.componentProps}))),e)},destroyComponent:e=>{r.unmountComponentAtNode(e)}}},517216:function(e,t,n){"use strict";n.d(t,{FX:function(){return r},T$:function(){return l},X6:function(){return c},dW:function(){return a},eu:function(){return d}});var i=n(523984);let r="bb-embedded-html",s={autoResize:!0},o={autoResize:i.i},a=e=>new DOMParser().parseFromString(e,"text/html"),l=(e,t=s)=>{let n="";for(let[e,i]of Object.entries(t))i&&e in o&&(n+=o[e].html().trim());return n+e},c=e=>{let t=a(e);if("bb-no-alternate-domain"===t.body.id)throw Error("No alternate domain is configured.");let n=t.getElementsByClassName(r),i=e;for(let e=0;e<n.length;e++)i=i.replace(n[e].outerHTML,"");return i},d=(e,t=s)=>{let n=[];for(let[i,r]of Object.entries(t)){let t=!!r&&i in o&&o[i].listener;t&&n.push(t(e))}return n}},780687:function(e,t,n){"use strict";n.d(t,{X6:function(){return i.X6},T$:function(){return i.T$},eu:function(){return i.eu},qC:function(){return d}});var i=n(517216),r=n(530361);let s=["action","background","cite","classid","codebase","data","formaction","longdesc","href","icon","manifest","poster","profile","src","usemap"],o=s.map(e=>`*[${e}]`).join(","),a=e=>{if(null===e)return null;try{return new URL(e)}catch(e){return null}},l=e=>s.some(t=>e.hasAttribute(t)&&!a(e.getAttribute(t))),c=e=>`<pre>${(0,r.encode)(e)}</pre>`,d=e=>{let t=(0,i.dW)(e).querySelectorAll(o),n=e;for(let e=0;e<t.length;e++){let i=t[e];if(l(i)){let e=i.outerHTML;n=n.replace(e,c(e))}}return n}},637963:function(e,t,n){"use strict";n.d(t,{AY:function(){return ep},aA:function(){return o},si:function(){return ed},Of:function(){return er},Ak:function(){return em},yJ:function(){return W},X6:function(){return s},dq:function(){return eg},hm:function(){return ef}});var i,r,s,o,a=n(202784),l=n.n(a),c=n(906277),d=n(410628),u=n(755755),p=n(958299),m=n(394229),h=n(188505),g=n(579633),f=n(150885),b=n(327355);let v=(0,b.makeStyles)(()=>(0,b.createStyles)({editor:()=>({"& .bb-editor":{padding:0}}),actions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingTop:"5px"},placeholder:{fontStyle:"italic"}})),y=l().forwardRef((e,t)=>{let{ariaLabelledBy:n,isReadOnly:i,placeholder:r,pluginsConfig:s,rawTextFeedback:o,onChange:a}=e,{getEmbedSrc:d,openCloudStorageIntegrationModal:u}=s,p=v(e),m=[(0,f.link)(),(0,f.image)({...s}),(0,f.video)(),(0,f.math)({...s}),(0,f.insertLocalFile)({...s}),(0,f.videoEverywhere)({...s}),(0,f.insertYoutubeVideo)({getEmbedSrc:d,...s})];return u&&m.push((0,f.insertCloudStorageIntegrationFile)({openCloudStorageIntegrationModal:u,...s})),l().createElement("div",{ref:t,className:(0,c.Z)({[p.editor]:e.isReadOnly},e.className)},i&&!o?l().createElement("div",{className:p.placeholder,id:"feedback-placeholder"},r):l().createElement(f.BbEditor,{bbml:o,isReadOnly:i,placeholder:r,ariaLabelledBy:n,plugins:m,onChange:a}))});var S=n(847969);let C=(0,b.makeStyles)(()=>(0,b.createStyles)({collapsed:{overflow:"hidden",height:"136px",whiteSpace:"nowrap"},link:{padding:"10px 0px",display:"inline-block"},lineHeight:{lineHeight:1.6}})),E=e=>{let[t,n]=l().useState(!0),[i,r]=l().useState(!1),s=l().createRef(),o=e.isFeedbackEditable&&!e.isReadOnly,a=C(),u=(0,d.q)();l().useEffect(()=>{r(!o&&!!(null==s?void 0:s.current)&&s.current.clientHeight>136)},[e.isFeedbackEditable,e.isReadOnly,e.rawTextFeedback]);let p={showLessContentText:u("feedbackAuthoring.body.content.graderFeedback.showLessContent"),showMoreContentText:u("feedbackAuthoring.body.content.graderFeedback.showMoreContent")},m=l().useCallback(()=>n(!t),[t]),h=t?`${e.analyticsId}.showMoreContent`:`${e.analyticsId}.showLessContent`;return l().createElement(l().Fragment,null,l().createElement(y,{className:(0,c.Z)({[a.collapsed]:i&&t},a.lineHeight),ref:s,...e}),i&&l().createElement(S.AnalyticsLink,{className:a.link,onClick:m,analyticsId:h},t?p.showMoreContentText:p.showLessContentText))};var I=e=>{let{collapsible:t,...n}=e;return t?l().createElement(E,{...n}):l().createElement(y,{...n})};let w=(0,b.makeStyles)(()=>(0,b.createStyles)({actions:{display:"flex",flexDirection:"row",justifyContent:"flex-end",paddingTop:"5px"},action:{margin:"3px"}})),A=e=>{let t=w(),{primary:n,className:i,...r}=e;return n?a.createElement(S.AnalyticsPrimaryButton,{className:(0,c.Z)("primary-action-button",t.action,i),...r}):a.createElement(S.AnalyticsDefaultButton,{className:(0,c.Z)("default-action-button",t.action,i),...r})},k=e=>{let t=w();return e.children?a.createElement("div",{className:(0,c.Z)("feedback-editor-action-buttons",t.actions,e.className)},e.children):null},T=e=>{let t;let{analyticsId:n,onChange:i,peerReviewer:r,...s}=e,{rawTextFeedback:o,pluginsConfig:{onClickCancel:a,onClickSave:c}}=e,u=(0,d.q)(),p=!e.isReadOnly&&e.isFeedbackEditable,m=l().useCallback(()=>{!r&&t&&t(o),a()},[a]),h=l().useCallback(()=>{c()},[c]),g=l().useCallback(e=>{t=e.setPristine,i(e)},[i]),f=`${n}.feedbackEditor`,b={defaultButton:r?`${f}.saveDraft`:`${f}.cancel`,primaryButton:r?`${f}.submit`:`${f}.save`},v="feedbackAuthoring.body.content.graderFeedback.feedbackEditor",y={defaultButton:u(r?`${v}.draftLabel`:`${v}.cancelLabel`),primaryButton:u(r?`${v}.submitLabel`:`${v}.saveLabel`)};return l().createElement(l().Fragment,null,l().createElement(I,{analyticsId:f,...s,onChange:g}),p&&l().createElement(k,null,l().createElement(A,{analyticsId:b.defaultButton,onClick:m},y.defaultButton),l().createElement(A,{analyticsId:b.primaryButton,onClick:h,primary:!0},y.primaryButton)))};var P=n(675689);let D=(0,b.makeStyles)(e=>(0,b.createStyles)({graderDetails:{display:"flex",flexDirection:"row",marginBottom:"20px"},avatarWrapper:{marginRight:"10px"},nameAndDate:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",overflow:"hidden"},graderAttrs:{display:"flex",flexDirection:"column"},personalizationAndDate:{width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"space-between"},pronunciation:{display:"inline-flex",alignItems:"center",margin:"0 -5px","& > span":{padding:"0 5px",fontWeight:e.typography.fontWeightRegular},"& $pronunciationAudio":{"& > button":{minWidth:0,minHeight:0,padding:"2px 5px 0"}}},pronunciationAudio:{},name:{color:e.palette.text.primary,fontWeight:e.typography.fontWeightSemiBold},date:{color:e.palette.text.hint,"&$dateLate":{color:e.palette.error.main}},dateLate:{},dateWrapper:{display:"flex",justifyContent:"flex-end"},fromCurrentStudentNameAndDate:{[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},visibilityIcons:{height:"16px",width:"16px"}})),x=(0,b.makeStyles)(e=>(0,b.createStyles)({fromCurrentStudentName:{minWidth:"fit-content",[e.breakpoints.up("sm")]:{flex:1}}}));var R=n(563060);let L=e=>{let[t,n]=(0,a.useState)("#");return(0,a.useEffect)(()=>{R.Nd.getPeekHref((0,R.IN)(e)).then(e=>{n(e)})},[e]),t},N=e=>{let{attemptId:t,isAnonymous:n,reviewee:i,reviewer:r}=e,s=(0,d.q)(),o=L({deepLinkAttemptId:t,...n?{peerIndex:i}:null}),a=l().createElement(S.AnalyticsLink,{className:(0,c.Z)("js-submission-deep-link",{"js-anonymous-deep-link":n}),href:o,analyticsId:"course.grades.submissions-deep-link"},s(n?"feedbackAuthoring.body.content.graderFeedback.anonymousRevieweesSubmission":"feedbackAuthoring.body.content.graderFeedback.revieweesSubmission",{reviewee:i})),u=x();return l().createElement("span",{className:(0,c.Z)(u.fromCurrentStudentName,"js-grader-title")},s("feedbackAuthoring.body.content.graderFeedback.reviewerReviewedRevieweeDeepLink",{reviewer:r,revieweesSubmission:a}))},$=(0,b.makeStyles)(e=>(0,b.createStyles)({editIcon:{color:e.palette.text.secondary,minHeight:"16px",minWidth:"16px","&:hover":{color:e.palette.text.primary}}})),O=l().forwardRef((e,t)=>{let{analyticsId:n,editFeedbackCallback:i,ariaLabel:r,className:s}=e,o=(0,d.q)(),a=null!=r?r:o("feedbackAuthoring.body.content.editAriaLabel"),u=$();return l().createElement(p.AnalyticsIconButton,{analyticsId:`${n}.content.edit`,className:(0,c.Z)("js-edit-feedback-icon",u.editIcon,s),onClick:i,"aria-label":a,title:a,ref:t},l().createElement(P.Edit,null))});var G=n(88818);let _=e=>{var t;let n;let{attemptId:i,analyticsId:r,grader:s,userBeingGraded:o,ariaLabelledBy:a,rawTextFeedback:d,editorIsReadOnly:f,editorPlaceholder:b,attemptLastGradedDate:v,late:y,isFeedbackEditable:S,editorConfigProps:C,onFeedbackChange:E,isFeedbackFromCurrentStudent:I,showFeedbackVisibilityToggle:w,isFeedbackVisible:A,onClickChangeVisibility:k,onClickEdit:x,listIndex:R,isPeerGrading:L,showAnonymousWhenNoUserData:$,currentUserHasEnterFeedbackEntitlement:_}=e,M=D(),{formatUsername:B,formatDatetime:F,translate:U}=(0,u.h)(),V=d&&""!==d,H=v&&V,q=(s||o||$)&&V&&f,j=q&&!I&&(null==s?void 0:s.pronouns),z=q&&!I&&(null==s?void 0:s.pronunciation),W=S&&f&&C.peerReviewer,K=l().useMemo(()=>A?U("feedbackAuthoring.body.content.graderFeedback.feedbackVisibleToStudent"):U("feedbackAuthoring.body.content.graderFeedback.feedbackHiddenFromStudent"),[A,U]),Z=l().useMemo(()=>s?U("feedbackAuthoring.body.content.graderFeedback.hideFeedbackFromStudentWithName",{grader:B(s,g.ILocaleUsernameFormat.Short)}):"",[s,B,U]),Q=(e,t,n=!1)=>l().createElement(N,{attemptId:i,isAnonymous:n,reviewee:t,reviewer:e});return l().createElement("div",{className:"js-grader-feedback"},l().createElement("div",{className:M.graderDetails},q&&l().createElement("div",{className:M.avatarWrapper},((e,t)=>{let n=I?t:e;return(null==n?void 0:n.avatarUrl)?l().createElement(m.G,{size:"medium",src:n.avatarUrl,"aria-hidden":!0,className:"non-anonymous-avatar"}):l().createElement(m.G,{size:"medium","aria-hidden":!0,className:"anonymous-avatar"})})(s,o)),(q||H)&&l().createElement("div",{className:I?(0,c.Z)(M.nameAndDate,M.fromCurrentStudentNameAndDate):M.nameAndDate},q&&(()=>{if(L){if(I){let e=U("feedbackAuthoring.body.content.graderFeedback.droppedStudent"),t=_&&!s?e:B(s,g.ILocaleUsernameFormat.Short);return _?Q(t,o?B(o,g.ILocaleUsernameFormat.Short):e):Q(t,R,!0)}if(!s)return _?l().createElement("div",{className:(0,c.Z)(M.name,"js-grader-title","js-dropped-student-peer-number")},U("feedbackAuthoring.body.content.graderFeedback.droppedStudentWithNumber",{number:R})):l().createElement("div",{className:(0,c.Z)(M.name,"js-grader-title","js-name-peer-number")},U("feedbackAuthoring.body.content.graderFeedback.peerReviewWithNumber",{number:R}))}return l().createElement("div",{className:(0,c.Z)(M.name,"js-grader-title")},B(s,g.ILocaleUsernameFormat.Short))})(),l().createElement("div",{className:M.personalizationAndDate},l().createElement("div",{className:(0,c.Z)(M.graderAttrs)},z&&l().createElement("span",{className:M.pronunciation},l().createElement("span",null,s.pronunciation),(null===(t=s.pronunciationAudio)||void 0===t?void 0:t.permanentUrl)&&l().createElement(G.zi,{className:M.pronunciationAudio,src:s.pronunciationAudio.permanentUrl,analyticsId:"graderFeedback.pronunciation"})),j&&l().createElement("span",null,s.pronouns)),H&&(n=F(new Date(v),g.ILocaleDatetimeFormat.Short),y&&(n=U("feedbackAuthoring.body.content.graderFeedback.lastGradedLate",{dateGraded:n})),l().createElement("div",{className:M.dateWrapper},l().createElement("div",{className:(0,c.Z)(M.date,{[M.dateLate]:y})},n))))),W&&l().createElement(O,{editFeedbackCallback:x,analyticsId:r}),w&&l().createElement(h.AnalyticsTooltip,{title:K,className:"js-visibility-tooltip",analyticsId:`${r}.graderFeedback.visibilityTooltip`,placement:"top-end"},l().createElement(p.AnalyticsIconButton,{analyticsId:`${r}.graderFeedback.visibilityIcon`,"aria-pressed":!A,"aria-label":Z,className:(0,c.Z)(M.visibilityIcons,A?"visible-icon":"invisible-icon"),onClick:()=>null==k?void 0:k()},A?l().createElement(P.Visible,null):l().createElement(P.Invisible,null)))),l().createElement(T,{analyticsId:`${r}.graderFeedback`,rawTextFeedback:d,ariaLabelledBy:a,isReadOnly:f,placeholder:b,onChange:E,pluginsConfig:C,isFeedbackEditable:S,peerReviewer:C.peerReviewer,collapsible:!0}))};var M=n(998426);let B=(0,M.ZL)(e=>(0,M.kc)({list:{listStyle:"none",margin:0},listItem:{paddingBottom:"12px",borderBottom:`1px solid ${e.palette.border.main}`,marginBottom:"12px"}})),F=e=>{let{analyticsId:t,configProps:n,secondaryGradersFeedback:i,showFeedbackVisibilityToggle:r}=e,s=B(),{isPeerGrading:o,currentUserHasEnterFeedbackEntitlement:a,editorConfigProps:c}=n,d=i.map(e=>l().createElement("li",{className:s.listItem,key:e.id},l().createElement(_,{analyticsId:t,...e,editorIsReadOnly:!0,ariaLabelledBy:"secondary-feedback-title",editorConfigProps:c,showFeedbackVisibilityToggle:r,isPeerGrading:o,currentUserHasEnterFeedbackEntitlement:a})));return l().createElement("ul",{className:s.list},d)},U=(0,b.makeStyles)(e=>(0,b.createStyles)({container:{marginTop:"28px"},primaryContainer:{display:"flex",justifyContent:"space-between",marginBottom:"14px"},primaryTitle:{fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold,margin:0},secondaryContainer:{marginTop:"37px"},secondaryTitle:{fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold}})),V=e=>{let t,n;let{analyticsId:i,feedbackContentType:r,primaryGraderFeedback:s,secondaryGradersFeedback:o,configProps:{isPeerGrading:a,currentUserHasEnterFeedbackEntitlement:u,primaryFeedbackConfigProps:p,isOrganization:m,editorConfigProps:h,showFeedbackVisibilityToggle:g}}=e,f=(0,d.q)(),b=U(),{editorPlaceholder:v,onClickEdit:y,editorIsReadOnly:S,showPeerReviewerSpecificText:C}=p,E=null==s?void 0:s.isFeedbackEditable,I=o&&o.length>0,w=m?"organization":"course",A="organization"===w?`${w}`:`${w}.${r}`,k=h.peerReviewer,T=I&&!k,P=!I&&a&&!k,D=E&&S&&!k,x=f("feedbackAuthoring.body.content.noReviewsByOthers"),R=f("feedbackAuthoring.body.content.primaryGraderTitle.course.peerReviewerSubtitle"),L=f(a?"feedbackAuthoring.body.content.peerGraders.secondaryGradersTitle":"feedbackAuthoring.body.content.secondaryGradersTitle");return s&&(t=f(C&&!k?"feedbackAuthoring.body.content.primaryGraderTitle.student":`feedbackAuthoring.body.content.primaryGraderTitle.${A}`),n=v||f(C&&k?"feedbackAuthoring.body.content.editorPlaceholder.reviewer":`feedbackAuthoring.body.content.editorPlaceholder.${E?"feedbackEditable":"feedbackNotEditable"}.${w}`)),l().createElement("div",{className:(0,c.Z)("js-feedback-content-container",b.container)},s&&l().createElement("div",{className:(0,c.Z)("js-feedback-content-primary-container",b.primaryContainer)},l().createElement("h3",{id:"primary-feedback-title",className:b.primaryTitle},t),D&&l().createElement(O,{editFeedbackCallback:y,analyticsId:i})),k&&l().createElement("p",{className:"js-peer-reviewer-subtitle"},R),s&&l().createElement(_,{...s,...p,analyticsId:`${i}.content.primaryFeedback`,ariaLabelledBy:"primary-feedback-title",editorPlaceholder:n,editorConfigProps:h,isPeerGrading:a}),T&&l().createElement("div",{className:b.secondaryContainer},l().createElement("h3",{className:b.secondaryTitle},L),l().createElement(F,{analyticsId:`${i}.content.secondaryFeedback`,secondaryGradersFeedback:o,configProps:{isOrganization:m,isPeerGrading:a,currentUserHasEnterFeedbackEntitlement:u,editorConfigProps:h,secondaryFeedbackConfigProps:{title:L}},showFeedbackVisibilityToggle:g})),P&&l().createElement("div",{className:(0,c.Z)("js-empty-secondary-feedback-section",b.secondaryContainer)},l().createElement("h3",{className:b.secondaryTitle},L),x))};var H=n(146115);let q=(0,b.makeStyles)(e=>(0,b.createStyles)({feedbackBody:{paddingLeft:"16px",paddingRight:"16px",paddingBottom:"0 !important",paddingTop:0,[e.breakpoints.up("sm")]:{paddingLeft:0,paddingRight:0}},feedbackTabs:{margin:"0 -30px",display:"flex",backgroundColor:e.palette.background.b2,borderBottom:`1px solid ${e.palette.border.main}`,"& $tabButton":{flex:1,margin:0,padding:0,height:"45px",transition:"background-color 200ms ease-out","&:before":{borderBottom:"none"},"&:hover":{backgroundColor:e.palette.background.b3},'&[aria-selected="true"]':{backgroundColor:e.palette.background.default,"&:before":{left:0,right:0,borderBottom:`4px solid ${e.palette.brand.main}`}},"&:first-child":{borderRight:`1px solid ${e.palette.border.main}`},"&:only-child":{borderRight:"0"}}},tabButton:{}}));(i=s||(s={})).General="GENERAL",i.Individual="INDIVIDUAL",i.Common="COMMON";let j=e=>{let{analyticsId:t,configProps:{initialSelectedTabKey:n,isFeedbackForGroupSubmission:i,...r},...o}=e,a=(0,d.q)(),u=q(),p=n||s.General,m=l().createElement(V,{analyticsId:`${t}.feedbackBody`,configProps:{...r},feedbackContentType:(e=>{switch(e){case s.General:return"group";case s.Common:return"common";default:return"individual"}})(n),...o}),h=t=>{let{configProps:{onGroupTabChange:n}}=e;n&&n(t)};return l().createElement("div",{className:u.feedbackBody},i?l().createElement(l().Fragment,null,l().createElement(S.AnalyticsTabs,{value:p,className:(0,c.Z)("js-feedback-tabs",u.feedbackTabs),analyticsId:`${t}.feedbackBody.tabs`},l().createElement(S.AnalyticsTab,{label:a("feedbackAuthoring.body.groupTab"),value:s.General,className:u.tabButton,analyticsId:`${t}.feedbackBody.group`,onClick:()=>h(s.General)}),l().createElement(S.AnalyticsTab,{label:a("feedbackAuthoring.body.individualTab"),value:s.Individual,className:u.tabButton,analyticsId:`${t}.feedbackBody.individual`,onClick:()=>h(s.Individual)})),l().createElement(H.x,{panelId:p,ariaLabelledby:p},m)):m)};var z=n(228357);let W=e=>{let{analyticsId:t,configProps:n,secondaryGradersFeedback:i}=e,r={noReviewsForStudent:(0,d.q)()("feedbackAuthoring.body.content.noReviewsForStudent")};return l().createElement(z.Q,{theme:"light"},i.length>0&&l().createElement(F,{configProps:n,secondaryGradersFeedback:i,analyticsId:`${t}.feedbackList.secondaryFeedback`}),0===i.length&&n.isPeerGrading&&l().createElement("div",{className:"js-feedback-list-no-reviews-for-student"},r.noReviewsForStudent))};var K=n(927335);let Z=e=>{let{analyticsId:t,onNavigateToNextFeedback:n,onNavigateToPreviousFeedback:i}=e,r=(0,d.q)();return l().createElement(l().Fragment,null,l().createElement(p.AnalyticsIconButton,{onClick:i,disabled:!i,"aria-label":r("feedbackAuthoring.header.previous"),analyticsId:`${t}.navigator.previous`},l().createElement(K.ArrowLeft,null)),l().createElement(p.AnalyticsIconButton,{onClick:n,disabled:!n,"aria-label":r("feedbackAuthoring.header.next"),analyticsId:`${t}.navigator.next`},l().createElement(K.ArrowRight,null)))},Q=(0,M.ZL)(e=>(0,M.kc)({inlineNavigation:{height:"40px",marginTop:"28px",display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"15px",borderBottom:`1px solid ${e.palette.secondary.light}`,marginLeft:"-16px",marginRight:"-16px",[e.breakpoints.up("sm")]:{marginLeft:"-30px",marginRight:"-30px"}},inlineNavigationTitle:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightSemiBold,fontSize:e.typography.fontSizeMedium,marginLeft:"18px"},inlineNavigationArrows:{whiteSpace:"nowrap",marginRight:"18px"}})),J=e=>{let t=Q(),{analyticsId:n,inlineConfigProps:i,primaryGraderFeedback:r,secondaryGradersFeedback:s}=e,o=`${n}.feedbackAuthoring.components`;return l().createElement("div",null,i.showNavigator&&l().createElement("div",{className:t.inlineNavigation},l().createElement("div",{className:t.inlineNavigationTitle,id:"inline-feedback-navigation-title"},i.navigationTitle),l().createElement("div",{className:t.inlineNavigationArrows},l().createElement(Z,{onNavigateToNextFeedback:i.onNavigateToNextFeedback,onNavigateToPreviousFeedback:i.onNavigateToPreviousFeedback,analyticsId:o}))),l().createElement(j,{analyticsId:o,configProps:i,primaryGraderFeedback:r,secondaryGradersFeedback:s}))};var Y=n(608555);let X=()=>(0,b.createStyles)({overflowEllipsis:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),ee=(0,b.makeStyles)(e=>(0,b.createStyles)({feedbackHeader:t=>({"& .ms-Panel-header":{boxShadow:"none",[e.breakpoints.up("sm")]:{alignItems:"flex-end",minHeight:0,".header-actions":{margin:0,flex:0}},".ms-Panel-titles-container":{maxWidth:"100%",[e.breakpoints.up("sm")]:{position:"static"},".ms-Panel-subTitle":{...X().overflowEllipsis},".ms-Panel-headerText":{...X().overflowEllipsis,textAlign:"center",[e.breakpoints.up("sm")]:{textAlign:"start",fontSize:e.typography.fontSizeXXLarge,fontFamily:e.typography.fontFamilySerif,color:e.palette.primary.main}},".ms-Panel-content-right":{".is-disabled":{color:e.palette.secondary.light}}}},[e.breakpoints.up("sm")]:{"& .ms-Panel-commands":{backgroundColor:e.palette.background.default}}}),navigator:{"& .ms-Panel-header":{"& .ms-Panel-content-right":{"& .ms-Button":{color:e.palette.secondary.light,[e.breakpoints.up("sm")]:{color:"inherit"}},"& .is-disabled":{color:e.palette.text.disabled,[e.breakpoints.up("sm")]:{color:"inherit"}}},"& .ms-Panel-titles-container":{[e.breakpoints.only("xs")]:{position:"static",left:"90px",minWidth:"calc(100% - 180px)"},[e.breakpoints.up("sm")]:{maxWidth:"calc(100% - 76px)"}}}}})),et=e=>{let t=ee(e),n=(0,d.q)(),{configProps:{onNavigateToNextFeedback:i,onNavigateToPreviousFeedback:r,showNavigator:s},analyticsId:o,headerSubtitle:a,headerTitle:u}=e,p=`${o}.feedbackHeader`,m={title:u,smallHeaderTitle:a||n("feedbackAuthoring.header.smallTitle"),type:Y.BbPanelType.full,analyticsId:p,navMenuAriaLabel:n("global.navigationMenu")};return s&&(m.panelContentRight=l().createElement(Z,{onNavigateToNextFeedback:i,onNavigateToPreviousFeedback:r,analyticsId:p})),l().createElement("header",{className:(0,c.Z)("panel-header","simple-header",t.feedbackHeader,{[t.navigator]:s})},l().createElement(Y.BbPanelHeader,{...m}))},en=(0,b.makeStyles)(e=>(0,b.createStyles)({container:{"&:before":{content:"",display:"block",height:"5px",left:"-1px",position:"absolute",right:"-1px",top:"-1px"}}})),ei=e=>{let t=en(),{analyticsId:n,panelConfigProps:i,primaryGraderFeedback:r,secondaryGradersFeedback:s,panelSubtitle:o,panelTitle:a}=e,d={showNavigator:i.showNavigator,onNavigateToNextFeedback:i.onNavigateToNextFeedback,onNavigateToPreviousFeedback:i.onNavigateToPreviousFeedback},u={isOrganization:i.isOrganization,initialSelectedTabKey:i.initialSelectedTabKey,isFeedbackForGroupSubmission:i.isFeedbackForGroupSubmission,primaryFeedbackConfigProps:i.primaryFeedbackConfigProps,onGroupTabChange:i.onGroupTabChange,editorConfigProps:i.editorConfigProps},p=`${n}.feedbackAuthoring.components`;return l().createElement("div",{className:(0,c.Z)("panel-wrap","course-color","js-feedback-panel-container",t.container,i.courseColorClass)},l().createElement(et,{analyticsId:p,configProps:d,headerTitle:a,headerSubtitle:o}),l().createElement(j,{analyticsId:p,configProps:u,primaryGraderFeedback:r,secondaryGradersFeedback:s}))},er=e=>{let{isInlineMode:t,configProps:n,...i}=e,{allowMultipleFeedbackNavigation:r,...s}=n,o={showNavigator:r,...s};return t&&(o.navigationTitle=i.panelTitle),l().createElement(l().Fragment,null,t?l().createElement(J,{...i,inlineConfigProps:o}):l().createElement(ei,{...i,panelConfigProps:o}))},es=(0,b.makeStyles)(e=>(0,b.createStyles)({feedbackHeader:{display:"flex",paddingBottom:"16px"},headerLabel:{fontWeight:e.typography.fontWeightSemiBold},editFeedbackIcon:{marginLeft:"auto"}})),eo=(0,b.makeStyles)(()=>(0,b.createStyles)({buttonsContainer:{display:"flex",justifyContent:"flex-end",marginTop:"11px"},saveChangesButton:{marginLeft:"10px"}})),ea="feedbackAuthoring.body.content.graderFeedback.feedbackEditor",el=e=>{let{isReadOnly:t,isSaveButtonDisabled:n,analyticsId:i,onCancel:r,onSave:s}=e,o=eo(),a=(0,d.q)();return l().createElement(l().Fragment,null,e.children,!t&&l().createElement("div",{className:o.buttonsContainer},l().createElement(S.AnalyticsDefaultButton,{onClick:r,analyticsId:`${i}.cancelButton`},a(`${ea}.cancelLabel`)),l().createElement(S.AnalyticsPrimaryButton,{onClick:s,analyticsId:`${i}.saveButton`,disabled:n,className:o.saveChangesButton},a(`${ea}.saveChangesLabel`))))};var ec=n(465139);let ed=e=>{let{rawTextFeedback:t,titleId:n,isReadOnly:i,canEditFeedback:r,isSaveButtonDisabled:s,pluginsConfig:o,analyticsId:c,editFeedbackButtonRef:u,onFeedbackTextChange:p,handleEdit:m,headerLabel:h,editButtonAriaLabel:g}=e,{onClickCancel:f,onClickSave:b}=o,v=es(),S=(0,d.q)(),[C,E]=(0,a.useState)(t),I=null!=g?g:S("feedbackAuthoring.body.content.editOverallFeedbackAriaLabel");(0,a.useEffect)(()=>{i?E(t):E(void 0)},[i,t]);let w=(0,ec.Me)(),A=`feedback-${w}`,k=h?A:n;return l().createElement(el,{isReadOnly:i,isSaveButtonDisabled:s,analyticsId:c,onCancel:f,onSave:b},l().createElement("div",{className:v.feedbackHeader},h&&l().createElement("div",{id:A,className:v.headerLabel},h),i&&r?l().createElement(O,{className:v.editFeedbackIcon,analyticsId:`${c}.editOverallFeedback`,editFeedbackCallback:m,ariaLabel:I,ref:u}):null),l().createElement(y,{isReadOnly:i,pluginsConfig:o,placeholder:S("feedbackAuthoring.body.content.editorPlaceholder.overallFeedback"),ariaLabelledBy:k,rawTextFeedback:C,onChange:e=>{i||p(e)}}))};var eu=n(311822);(r=o||(o={})).UnsavedChanges="contentUnsavedChanges",r.SwitchView="contentSwitchView";let ep=e=>{let{contentType:t,exitCallback:n}=e,[i,r]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),c="feedbackAuthoring.body.content.overallFeedbackDialogModal",u="feedbackAuthoring.overallFeedbackConfirmationDialog",p=`${c}.header`,m=`${c}.${t}`,h=(0,d.q)(),g=(e=!1)=>{o(e),r(!0)};return l().createElement(eu._X,{analyticsId:u,"aria-labelledby":"overall-feedback-confirmation-dialog-heading-id",open:!i,TransitionProps:{onExited:()=>{n(s),r(!1)}},isAlert:!0},l().createElement(S.AnalyticsDialogTitle,{analyticsId:`${u}.title`,onClose:()=>g(),id:"overall-feedback-confirmation-dialog-heading-id",ariaDescribedby:"overall-feedback-confirmation-dialog-message-id"},h(p)),l().createElement(S.AnalyticsDialogContent,{analyticsId:`${u}.context`},l().createElement(S.AnalyticsDialogContentText,{analyticsId:`${u}.contextText`,id:"overall-feedback-confirmation-dialog-message-id"},h(m))),l().createElement(S.AnalyticsDialogActions,{analyticsId:`${u}.dialogAction`},l().createElement(S.AnalyticsDefaultButton,{analyticsId:`${u}.continueWorkingButton`,onClick:()=>g()},h(`${c}.continueWorkingButtonLabel`)),l().createElement(S.AnalyticsPrimaryButton,{analyticsId:`${u}.discardButton`,onClick:()=>g(!0)},h(`${c}.discardButtonLabel`))))},em=({color:e="brand",isFeedbackAvailable:t,isDisabled:n=!1,iconProps:i,size:r="medium"})=>{let s=(0,b.useTheme)(),o={htmlColor:n||"brand"!==e?void 0:s.palette.brand.main,...i,color:n?"disabled":"brand"===e?void 0:e};if(t)switch(r){case"small":return l().createElement(P.Feedback,{"data-testid":"feedback-icon",...o});case"medium":return l().createElement(K.Feedback,{"data-testid":"feedback-icon",...o})}switch(r){case"small":return l().createElement(P.AddFeedback,{"data-testid":"add-feedback-icon",...o});case"medium":return l().createElement(K.AddFeedback,{"data-testid":"add-feedback-icon",...o})}},eh=(0,a.createContext)({isVideoRecordingDialogOpen:!1,dialogOpen:()=>{},dialogClosed:()=>{}}),eg=({children:e})=>{let[t,n]=(0,a.useState)(!1),i=(0,a.useCallback)(()=>n(!0),[]),r=(0,a.useCallback)(()=>n(!1),[]),s=(0,a.useMemo)(()=>({isVideoRecordingDialogOpen:t,dialogOpen:i,dialogClosed:r}),[r,i,t]);return l().createElement(eh.Provider,{value:s},e)},ef=()=>(0,a.useContext)(eh)},83991:function(e,t,n){"use strict";n.d(t,{bG:function(){return sd},IQ:function(){return q},VG:function(){return sm},if:function(){return rY},Nh:function(){return z},XW:function(){return tx},S_:function(){return r_},vl:function(){return lV},AZ:function(){return Y},r:function(){return lB},u$:function(){return eW},Au:function(){return eZ},iY:function(){return ng},Qj:function(){return sy},SY:function(){return aH},uD:function(){return sP},N7:function(){return sL},Cq:function(){return sN},z8:function(){return s$},Y3:function(){return sD},hD:function(){return sx},ix:function(){return sR},BH:function(){return oI},Pn:function(){return l6},dJ:function(){return K},b$:function(){return W},Vn:function(){return lo},Bq:function(){return tR},vY:function(){return O},Dz:function(){return tF},SE:function(){return _},Ep:function(){return ry},bO:function(){return am},Ip:function(){return oi},Gq:function(){return G},lS:function(){return iB},sb:function(){return ab},vO:function(){return aC},kT:function(){return az},nl:function(){return aT},CA:function(){return aF},WJ:function(){return s3},k0:function(){return sY},t$:function(){return s1},dX:function(){return nE},r$:function(){return oo},Tj:function(){return om},qZ:function(){return N},Lx:function(){return oC},z_:function(){return tU},sZ:function(){return nf},Jg:function(){return t$},cC:function(){return tT},jK:function(){return ss},nv:function(){return nC},sE:function(){return lf},Zc:function(){return ls},yc:function(){return lc},Go:function(){return lv},KY:function(){return lS},$v:function(){return lW},Sp:function(){return ib},Vt:function(){return lU},ir:function(){return lt},$O:function(){return Z},A0:function(){return ok},_c:function(){return X},NL:function(){return lb},ZG:function(){return ln},aX:function(){return or},cQ:function(){return l3},vn:function(){return sl},TD:function(){return tr},M_:function(){return sk},b:function(){return sA},Jm:function(){return lg},lk:function(){return lu},vG:function(){return ti},Vw:function(){return tM},V0:function(){return lh},il:function(){return e8},pT:function(){return e9},$K:function(){return r6},xZ:function(){return r0},xB:function(){return l5},f_:function(){return sS},cK:function(){return se},HM:function(){return st},MK:function(){return su},l:function(){return sC},le:function(){return rJ},EN:function(){return s7},z5:function(){return ip}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k,T,P,D,x,R,L,N,$,O,G,_,M,B,F,U,V,H,q,j,z,W,K,Z,Q,J,Y,X,ee,et,en={};n.r(en),n.d(en,{FeedbackType:function(){return U},GRADE_DEFAULT_POINTS:function(){return tZ},GRADE_MAX_POINTS:function(){return tW},GRADE_MIN_POINTS:function(){return tK},GRADE_PILL_DEFAULT_BG_CLASS:function(){return tJ},GRADE_POINTS_DECIMALS_RULE_1:function(){return tV},GRADE_POINTS_DECIMALS_RULE_2:function(){return tH},GRADE_POINTS_DECIMALS_RULE_3:function(){return tq},GRADE_POINTS_MAX_EDIT_DECIMALS:function(){return tj},GRADE_POINTS_MAX_EDIT_INTEGRALS:function(){return tz},GradeNumberDisplayRule1Format:function(){return tX},GradeNumberDisplayRule2Format:function(){return t0},GradeNumberDisplayRule3Format:function(){return t1},GradeNumberEditFormat:function(){return t2},GradePercentileColor:function(){return F},GradePillSizes:function(){return B},GradeUnits:function(){return M},REDUCE_ERR_MARGIN_VALUE:function(){return tQ},canPostAnonymousGradesAsDelegatedGrader:function(){return no},determineDisplayRuleFromDigitCount:function(){return t4},determineDisplayRuleFromNumber:function(){return t5},getGradeInputAriaLabelKey:function(){return nt},getGradePillType:function(){return t7},getOverriddenGrade:function(){return ns},getPercentileColor:function(){return t3},gradeNeedsPosting:function(){return t8},hasGradesToPost:function(){return t9},isGradeOverridden:function(){return nr},isGradePosted:function(){return ni},isGraded:function(){return nn},parseGradeValue:function(){return tY},shouldShowPastDueZeroIndicator:function(){return ne},sumFloatValues:function(){return t6}});var ei=n(202784),er=n.n(ei),es=n(928316),eo=n(44432),ea=n(174897),el=n(142895),ec=n(844156),ed=n(410628),eu=n(311822);let ep=e=>{let{downloadErrorDialogHidden:t,onCloseDialog:n}=e,i=(0,ed.q)();return ei.createElement("div",null,ei.createElement(eu.Dy,{hidden:t,onDismiss:n,dialogContentProps:{type:el.DialogType.normal,title:i("gradebook.download-submissions.noneSelectedDialog.title"),subText:i("gradebook.download-submissions.noneSelectedDialog.body")},modalProps:{isAlert:!0},analyticsId:"download-submissions-error-dialog"},ei.createElement(el.DialogFooter,null,ei.createElement(ec.AnalyticsDefaultButton,{onClick:()=>n(),analyticsId:"download-submissions-error-dialog-dialog-footer-primary-button"},i("gradebook.download-submissions.noneSelectedDialog.close")))))};var em=n(608555),eh=n(50635);class eg extends ei.PureComponent{constructor(){super(...arguments),this.cancel=()=>{this.props.onLeaveAction()},this.download=()=>{this.props.onDownloadAction()}}render(){let{t:e}=this.props;return ei.createElement(em.BbPanelFooter,{primaryButtonProps:{text:e("gradebook.download-submissions.footer.submitButton"),onClick:this.download,id:"button-download"},secondaryButtonProps:{text:e("gradebook.download-submissions.footer.cancelButton"),onClick:this.cancel,id:"button-cancel"},analyticsId:"gradebook.downloadSubmissions.footer"})}}let ef=(0,eh.H)(eg);var eb=n(847969);class ev extends ei.PureComponent{constructor(){super(...arguments),this.onToggleSelected=()=>{this.props.onToggleSelected(this.props.contentItem)}}render(){let{contentItem:e,isSelected:t,rowIndex:n}=this.props,{date:i,name:r}=e;return ei.createElement("tr",{className:`download-submissions-table__row js-item-id-${e.studentId}`,role:"row","aria-rowindex":n},ei.createElement("td",{className:"download-submissions-content-table__cell -fixed-checkbox",role:"gridcell","aria-colindex":1,"aria-describedby":"download-submissions-content-table__cell__header--id-checkbox"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},ei.createElement(eb.AnalyticsFormControlLabel,{label:"",htmlFor:`download-submissions.content-table-cell-checkbox-${n}`,className:"download-submissions-content-table__cell__checkbox",control:ei.createElement(eb.AnalyticsCheckbox,{id:`download-submissions.content-table-cell-checkbox-${n}`,onChange:this.onToggleSelected,checked:t,"aria-label":r,analyticsId:"downloadSubmissions.contentTable.cell.checkbox"}),analyticsId:"downloadSubmissions.contentTable.cell.label"})))),ei.createElement("td",{className:"download-submissions-content-table__cell--title -column-name",role:"gridcell",tabIndex:-1,"aria-colindex":2,"aria-describedby":"download-submissions-content-table__cell__header--id-name"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},r))),ei.createElement("td",{className:"download-submissions-content-table__cell -column-date",role:"gridcell",tabIndex:-1,"aria-colindex":3,"aria-describedby":"download-submissions-content-table__cell__header--id-date"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},this.formatDateString(i)))),ei.createElement("td",{className:"download-submissions-content-table__cell -padder -padder-cell","aria-hidden":!0}))}formatDateString(e){let{t}=this.props;return e?ei.createElement("div",null,t("gradebook.download-submissions.table.submissionDatetime",{datetime:e})):t("gradebook.download-submissions.table.submissionNoDatetime")}}let ey=(0,eh.H)(ev);var eS=n(701182),eC=n(315109),eE=n(675689),eI=n(158550);(i=D||(D={}))[i.name=0]="name",i[i.date=1]="date",(r=x||(x={}))[r.ascending=0]="ascending",r[r.descending=1]="descending";class ew extends ei.PureComponent{constructor(e){super(e),this.onNameHeaderClick=()=>{this.handleSort(D.name,ek,eT)},this.onDateHeaderClick=()=>{this.handleSort(D.date,eD,ex)},this.getColumnSortInformation=e=>{if(this.state.sortColumn===e){if(this.state.sortDirection===x.ascending)return{icon:ei.createElement(eE.SortArrowAscending,null),sorted:"sortedAscending"};if(this.state.sortDirection===x.descending)return{icon:ei.createElement(eE.SortArrowDescending,null),sorted:"sortedDescending"}}return{icon:null,sorted:"unsorted"}},this.onSelectAllToggle=()=>{this.props.onSelectAllToggle()},this.state={sortColumn:D.name,sortDirection:x.ascending}}displaySpinnerOrChildren(){let{children:e,errorLoading:t,loadingContent:n,t:i}=this.props;return t?ei.createElement("div",{className:"error-message","data-testid":"error-message"},ei.createElement("div",{className:"download-submissions-content-table__error_message"},i("gradebook.download-submissions.table.errorLoading"))):n?ei.createElement(eC.Spinner,{className:"download-submissions-content-table__table__spinner",size:eC.SpinnerSize.xLarge,"aria-label":i("gradebook.download-submissions.table.loadContent")}):ei.createElement("table",{className:"download-submissions-content-table__table",role:"grid","aria-readonly":"true"},ei.createElement("thead",null,this.renderHeader()),ei.createElement("tbody",null,e))}handleSort(e,t,n){if(e===this.state.sortColumn)switch(this.state.sortDirection){case x.ascending:this.setState({sortDirection:x.descending}),this.props.onSortColumn(n);break;case x.descending:this.setState({sortDirection:x.ascending}),this.props.onSortColumn(t)}else this.setState({sortColumn:e,sortDirection:x.ascending}),this.props.onSortColumn(t)}render(){return ei.createElement("div",{className:"download-submissions-content-table"},ei.createElement("div",null,this.displaySpinnerOrChildren()))}renderHeader(){let{t:e,selectAllStatus:t}=this.props,n=this.renderSortButton(this.getColumnSortInformation(D.name)),i=this.renderSortButton(this.getColumnSortInformation(D.date)),r="gradebook.downloadSubmissions.column.name.header",s="gradebook.downloadSubmissions.column.date.header",o=this.props.analyticsEventAugmentor(eI.AnalyticsEventTypes.CLICK_EVENT,this.onNameHeaderClick,s),a=this.props.analyticsEventAugmentor(eI.AnalyticsEventTypes.CLICK_EVENT,this.onDateHeaderClick,r);return ei.createElement("tr",{className:"download-submissions-content-table__row -header",role:"row"},ei.createElement("th",{className:"download-submissions-content-table__cell--header -fixed-checkbox",role:"columnheader",id:"download-submissions-content-table__cell__header--id-checkbox","aria-label":e("gradebook.download-submissions.header.selectColumn")},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper"},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},ei.createElement(eb.AnalyticsFormControlLabel,{label:"",className:"download-submissions-content-table__cell__checkbox","aria-label":e("gradebook.download-submissions.header.selectAll"),htmlFor:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox",control:ei.createElement(eb.AnalyticsCheckbox,{id:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox",checked:t===eS.CheckStateTypesEnum.CHECKED,indeterminate:t===eS.CheckStateTypesEnum.PARTIAL,onChange:this.onSelectAllToggle,analyticsId:"gradebook.downloadSubmissions.header.selectAll.triStateCheckbox"}),analyticsId:"gradebook.downloadSubmissions.header.selectAll.label"})))),ei.createElement("th",{className:"download-submissions-content-table__cell--header -column-name",role:"columnheader","aria-sort":this.getAriaSortState(D.name),id:"download-submissions-content-table__cell__header--id-name",tabIndex:-1,onClick:o,"data-analytics-id":r},ei.createElement("span",{className:"download-submissions-content-table__cell__data-wrapper",role:"button",tabIndex:0},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},e("gradebook.download-submissions.table.nameColumn")),n)),ei.createElement("th",{className:"download-submissions-content-table__cell--header -column-date",role:"columnheader","aria-sort":this.getAriaSortState(D.date),id:"download-submissions-content-table__cell__header--id-date",tabIndex:-1,onClick:a,"data-analytics-id":s},ei.createElement("span",{className:"download-submissions-content-table__cell__data-wrapper",role:"button",tabIndex:0},ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper__data"},e("gradebook.download-submissions.table.dateColumn")),i)),ei.createElement("td",{className:"download-submissions-content-table__cell--header -padder","aria-hidden":!0}))}renderSortButton(e){let{t}=this.props;return e.icon?ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper--icon",title:t(`gradebook.download-submissions.screenReaderSortUpdates.${e.sorted}`)},e.icon):ei.createElement("div",{className:"download-submissions-content-table__cell__data-wrapper--arrow-container",title:t(`gradebook.download-submissions.screenReaderSortUpdates.${e.sorted}`)},ei.createElement(eE.SortArrows,null))}getAriaSortState(e){if(this.state.sortColumn===e){if(this.state.sortDirection===x.ascending)return"ascending";if(this.state.sortDirection===x.descending)return"descending"}return"none"}}let eA=(0,eI.withAnalytics)((0,eh.H)(ew)),ek=(e,t)=>eP(e.name.toLowerCase(),t.name.toLowerCase()),eT=(e,t)=>ek(t,e),eP=(e,t)=>e.localeCompare(t),eD=(e,t)=>eR(e.date,t.date),ex=(e,t)=>eR(t.date,e.date),eR=(e,t)=>e||t?e?t?e>t?1:e<t?-1:0:-1:1:0;class eL extends ei.PureComponent{constructor(e){super(e),this.handleColumnSort=e=>{this.setState({sortRule:e})},this.renderErrorDialog=()=>ei.createElement(ep,{onCloseDialog:this.closeErrorDialog,downloadErrorDialogHidden:this.state.downloadErrorDialogHidden}),this.renderDownloadDialog=()=>ei.createElement(eU,{hidden:this.state.downloadDialogHidden,onCloseDialog:this.closeDownloadDialog,onDownload:this.onDownload,selectedItems:this.state.selectedItems}),this.toggleSelectedItem=e=>{this.setState(t=>{let n=t.selectedItems.findIndex(t=>t.studentId===e.studentId);return n>=0?{selectedItems:[...t.selectedItems.slice(0,n),...t.selectedItems.slice(n+1)]}:{selectedItems:[...t.selectedItems,e]}})},this.getSelectAllStatus=()=>{let{contentItems:e}=this.props;return e&&void 0!==e.length&&0===e.length?eS.CheckStateTypesEnum.UNCHECKED:e.every(e=>this.state.selectedItems.some(t=>e.studentId===t.studentId))?eS.CheckStateTypesEnum.CHECKED:this.state.selectedItems.length>0?eS.CheckStateTypesEnum.PARTIAL:eS.CheckStateTypesEnum.UNCHECKED},this.onSelectAllToggle=()=>{this.selectAllToggle()},this.downloadSubmissions=()=>{0===this.state.selectedItems.length?this.setState({downloadErrorDialogHidden:!1}):this.setState({downloadDialogHidden:!1})},this.onDownload=e=>{this.props.downloadSubmissions(e),this.closeDownloadDialog()},this.closeErrorDialog=()=>{this.setState({downloadErrorDialogHidden:!0})},this.closeDownloadDialog=()=>{this.setState({downloadDialogHidden:!0})},this.state={selectedItems:[],sortRule:ek,downloadErrorDialogHidden:!0,downloadDialogHidden:!0}}render(){let{contentItems:e,courseName:t,loadingContent:n,errorLoading:i,t:r}=this.props,{sortRule:s}=this.state,o=this.getSelectAllStatus(),a=e.sort(s);return ei.createElement("div",{className:"download-submissions-panel panel-wrap"},this.renderErrorDialog(),this.renderDownloadDialog(),ei.createElement("div",{className:"download-submissions-panel__content"},ei.createElement("div",{className:"download-submissions-panel__header"},ei.createElement(em.BbPanelHeader,{title:r("gradebook.download-submissions.header.title"),smallHeaderTitle:t,type:em.BbPanelType.full,analyticsId:"gradebook.downloadSubmissions.header.title",navMenuAriaLabel:r("global.navigationMenu")})),ei.createElement("div",{className:"download-submissions-panel__content__header"},r("gradebook.download-submissions.header.contents")),ei.createElement("div",{className:"download-submissions-panel__content__table"},ei.createElement(eA,{loadingContent:n,errorLoading:i,selectAllStatus:o,onSelectAllToggle:this.onSelectAllToggle,onSortColumn:this.handleColumnSort,analyticsId:"gradebook.downloadSubmissions.panel.contentTable",t:r},a.map((e,t)=>ei.createElement(ey,{key:e.studentId,contentItem:e,isSelected:!!this.state.selectedItems.find(t=>e.studentId===t.studentId),rowIndex:t+1,onToggleSelected:this.toggleSelectedItem})))),ei.createElement("div",{className:"download-submissions-panel__footer"},ei.createElement(ef,{onDownloadAction:this.downloadSubmissions,onLeaveAction:this.props.onLeaveAction}))))}selectAllToggle(){let{contentItems:e}=this.props;this.setState(t=>({selectedItems:this.getSelectAllStatus()===eS.CheckStateTypesEnum.CHECKED?[]:e.slice(0)}))}}let eN=(0,eh.H)(eL);var e$=n(986709),eO=n(259197),eG=n(118717);class e_ extends er().PureComponent{constructor(e){super(e),this.downloadSubmissions=e=>{let{courseId:t,columnId:n,onLeaveAction:i}=this.props,r=e.map(e=>e.studentId);(0,eO.GjL)({course:t,column:n,studentIds:{students:r}}).then(()=>{i()})},this.state={loadingContent:!0,errorLoading:!1}}componentWillUnmount(){this.setState({loadingContent:!0})}render(){let{contentItems:e,courseName:t,onLeaveAction:n}=this.props,{loadingContent:i,errorLoading:r}=this.state;return er().createElement(eN,{courseName:t,contentItems:e,onLeaveAction:n,loadingContent:i,errorLoading:r,downloadSubmissions:this.downloadSubmissions})}async componentDidMount(){let{courseId:e,columnId:t,loadCourseMembershipsByCourseId:n,loadGradebookAttemptsByColumnId:i}=this.props;try{let r=[],s=n({courseId:e,roleBucket:e$.O8v.Taking});r.push(s);let o=i({courseId:e,columnId:t});r.push(o),await Promise.all(r).then(async()=>{await this.setState({loadingContent:!1,errorLoading:!1})})}catch(e){await this.setState({loadingContent:!1,errorLoading:!0})}}}let eM=e=>e.length>0?new Date(e.reduce((e,t)=>e&&e.attemptDate>t.attemptDate?e:t).attemptDate):null,eB=(0,eo.$j)((e,t)=>{let{courseId:n,columnId:i,t:r}=t,s=[],o=eO.Ys.courseMembership.getCourseMembershipsByCourseId(e,n,e$.O8v.Taking);return o.forEach(t=>{let o=eO.Ys.user.getUserById(e,t.userId),a=eM(eO.Ys.gradebookAttempt.getGradebookAttemptsByUserId(e,n,i,t.userId)),l={name:r("gradebook.download-submissions.table.name",{user:o}),studentId:t.userId,date:a};s.push(l)}),{courseMembers:o,contentItems:s}},e=>(0,eG.DE)({loadCourseMembershipsByCourseId:eO.Nwg.courseMembership.loadCourseMembershipsByCourseId,loadGradebookAttemptsByColumnId:eO.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId},e))(e_),eF=(0,eh.H)(eB),eU=e=>{let{hidden:t,onCloseDialog:n,onDownload:i,selectedItems:r}=e,s=(0,ed.q)(),o=ei.createElement(eb.AnalyticsLink,{href:s("gradebook.download-submissions.downloadDialog.helpLink"),target:"_blank",analyticsId:"download-submissions-dialog-help-link"},s("gradebook.download-submissions.downloadDialog.help"));return ei.createElement("div",null,ei.createElement(eu.Dy,{hidden:t,onDismiss:n,dialogContentProps:{type:el.DialogType.normal,title:s("gradebook.download-submissions.downloadDialog.title"),subText:s("gradebook.download-submissions.downloadDialog.body")},modalProps:{isAlert:!0},analyticsId:"download-submissions-dialog"},ei.createElement(el.DialogFooter,{helpLink:o},ei.createElement(eb.AnalyticsDefaultButton,{onClick:()=>n(),analyticsId:"download-submissions-dialog-dialog-footer-primary-button"},s("gradebook.download-submissions.downloadDialog.cancelButton")),ei.createElement(eb.AnalyticsPrimaryButton,{onClick:()=>i(r),analyticsId:"download-submissions-dialog-dialog-footer-primary-button"},s("gradebook.download-submissions.downloadDialog.downloadButton")))))};var eV=n(327355);let eH=(0,eV.makeStyles)(e=>({helpLink:{marginRight:"auto"}}));var eq=n(592493),ej=n(88818);(s=R||(R={})).network="Network error",s.generic="Generic error";let ez="download-anonymous-submissions-dialog",eW=e=>{let{open:t,onCloseDialog:n,columnId:i,courseId:r,numStudentsSubmitted:s}=e,[o,a]=(0,ei.useState)(t),[l,c]=(0,ei.useState)(!1),d=(0,ed.q)(),u=(0,eq.gH)("gradebook.","organization.gradebook."),{enqueueSnackbar:p,dequeueSnackbar:m}=(0,ej.Ds_)(ej.VWo.AnonymousBulkDownload,!0),h=eH(),g=()=>{c(!1),a(!1),n()};(0,ei.useEffect)(()=>{a(t)},[t]);let f=e=>{m(),p({icon:e===R.network?er().createElement(eE.ConnectionIssue,null):er().createElement(eE.Attention,null),snackbarMessage:d(e===R.network?"gradebook.downloadAnonymousSubmissions.snackBar.networkConnectivity":"gradebook.downloadAnonymousSubmissions.snackBar.fileGenerationError")})},b=async()=>{c(!0);try{await (0,eO.GjL)({course:r,column:i,studentIds:{students:["all"]}}),g()}catch(e){e instanceof TypeError?f(R.network):f(R.generic),g()}};return er().createElement(eu._X,{analyticsId:ez,open:o,onClose:g,"aria-labelledby":"anonymous-bulk-download-dialog-message-id",TransitionProps:{onExited:g}},er().createElement(eb.AnalyticsDialogTitle,{onClose:()=>g(),analyticsId:`${ez}.title`,id:"anonymous-bulk-download-dialog-heading-id","aria-labelledby":"anonymous-bulk-download-dialog-message-id"},d("gradebook.downloadAnonymousSubmissions.downloadDialog.title")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${ez}.content`,id:"anonymous-bulk-download-dialog-message-id"},er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${ez}.contentCountText`},d("gradebook.downloadAnonymousSubmissions.downloadDialog.attemptsContent",{attemptCount:s})),er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${ez}.contentText`},d(u("gradebook.downloadAnonymousSubmissions.downloadDialog.body")))),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${ez}.action`},er().createElement("div",{className:h.helpLink},er().createElement(eb.AnalyticsLink,{href:d("gradebook.downloadAnonymousSubmissions.downloadDialog.helpLink"),target:"_blank",analyticsId:`${ez}.helpLink`},d("global.help"))),er().createElement(eb.AnalyticsDefaultButton,{onClick:()=>g(),analyticsId:`${ez}.action.cancelButton`},d("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{onClick:()=>b(),analyticsId:`${ez}.action.sendButton`,disabled:l},d("global.continue"))))},eK="download-anonymous-no-submissions-dialog",eZ=e=>{let{open:t,onCloseDialog:n}=e,[i,r]=(0,ei.useState)(t),[s,o]=(0,ei.useState)(!1),a=(0,ed.q)(),l=()=>{r(!1),n()};return(0,ei.useEffect)(()=>{r(t)},[t]),er().createElement(eu._X,{analyticsId:eK,open:i,onClose:l,"aria-labelledby":"anonymous-bulk-download-dialog-heading-id",TransitionProps:{onExited:l}},er().createElement(eb.AnalyticsDialogTitle,{onClose:()=>l(),analyticsId:`${eK}.title`,id:"anonymous-bulk-download-dialog-heading-id","aria-labelledby":"anonymous-bulk-download-dialog-heading-content"},a("gradebook.downloadAnonymousSubmissions.downloadDialog.noAttemptTitle")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${eK}.content`,id:"anonymous-bulk-download-dialog-heading-content"},er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${eK}.contentText`},a("gradebook.downloadAnonymousSubmissions.downloadDialog.noAttemptsContent"))),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${eK}.action`},er().createElement(eb.AnalyticsDefaultButton,{onClick:()=>l(),analyticsId:`${eK}.action.cancelButton`},a("global.cancel"))))};var eQ=n(755755),eJ=n(276635),eY=n.n(eJ),eX=n(906277);(o=L||(L={})).Default="default",o.Mini="mini",o.Large="large",(a=N||(N={})).Grey="grey",a.Black="black",a.Green="green",a.YellowGreen="yellow-green",a.Yellow="yellow",a.Orange="orange",a.Red="red",(l=$||($={})).MaxExceeded="maxExceeded",l.WrongFormat="wrongFormat",(c=O||(O={})).Points="points",c.Percentage="percentage",c.Tabular="tabular",c.Complete="complete",c.UnitBased="unitBased",(d=G||(G={})).Points="points",d.PointsEach="points.each";var e0=n(797580);let{fade:e1}=eV.colorManipulator,e2=(0,eV.makeStyles)(e=>{let t="120px",n="140px",i="max-content",r=e0.fx.greenHover,s=e0.fx.yellowGreenHover,o=e0.fx.yellowHover,a=e0.fx.brightOrangeHover,l=e0.fx.redHover,c=e0.fx.disabledHover,d=e.palette.background.b9,u=e0.fx.green,p=e0.fx.yellowGreen,m=e0.fx.yellow,h=e0.fx.brightOrange,g=e0.fx.red,f=e.palette.background.b5,b=e.palette.background.b9,v=e.palette.background.b3,y=e.palette.focus.main,S=e.palette.error.main,C={fontFamily:e.typography.fontFamily,lineHeight:"normal",overflow:"hidden",padding:"0 8px",borderRadius:"30px",display:"inline-flex",justifyContent:"center",alignItems:"center","box-sizing":"border-box",fontWeight:e0.vC.fontWeightSemiBold,"&.default":{"&.big-pill":{maxWidth:i},height:"30px",minWidth:"70px",maxWidth:t,fontSize:e.typography.fontSizeDefault},"&.mini":{"&.big-pill":{maxWidth:i},height:"26px",minWidth:"50px",maxWidth:t,fontSize:e.typography.fontSizeDefault},"&.large":{"&.big-pill":{maxWidth:i},height:"36px",minWidth:"90px",maxWidth:"150px",fontSize:e.typography.fontSizeLarge,padding:"0 12px"},"&.green, &.yellow-green, &.yellow, &.orange, &.red, &.grey":{border:"0",color:e0.DF.primary},"&.black":{border:"0",background:d,color:e.palette.common.white},"&.grey":{background:f},"&.green":{background:u},"&.yellow-green":{background:p},"&.yellow":{background:m},"&.orange":{background:h},"&.red":{background:g},"&.icon-pill":{justifyContent:"left","&.default":{maxWidth:n},"&.mini":{maxWidth:n},"&.large":{maxWidth:"160px"}}};return(0,eV.createStyles)({pill:{...C,border:`1px solid ${b}`,background:"white",transition:"background-color 0.2s cubic-bezier(0.55, 0, 0.1, 1)","&:hover":{background:v,cursor:"pointer"},"&:hover .hyphens-hover":{color:e.palette.grey[800]},"&.focus":{border:`1px solid ${y}`,boxShadow:`inset 0 0 0 1px ${y}`},"&.active":{background:"white",border:`1px solid ${y}`,boxShadow:`inset 0 0 0 4px ${e1(y,.1)}`},"&.error":{background:"white",border:`1px solid ${S}`,boxShadow:`inset 0 0 0 4px ${e1(S,.1)}`},"&.black:hover":{background:c},"&.green:hover":{background:r},"&.yellow-green:hover":{background:s},"&.yellow:hover":{background:o},"&.orange:hover":{background:a},"&.red:hover":{background:l},"&.disabled-max-width":{maxWidth:"inherit"}},readonlyPill:{"&&":{...C}},containerCallOut:{color:S,display:"flex","& div":{paddingRight:"12px"}},containerPill:{display:"inline-flex",alignItems:"center"},iconAlertCallOut:{paddingTop:"4px",paddingRight:"4px"}})}),e4=e=>{let{hasFocus:t,hasError:n,pillSize:i,pillColor:r,errorKey:s,showIconButton:o,maxWidthDisabled:a}=e,l=(0,ed.q)(),{errorId:c,analyticsId:d,onClick:u,onPointerDown:p,onPointerUp:m}=e,h=e2(e),g=(0,ei.useRef)(null),[f,b]=(0,ei.useState)(!1),[v,y]=(0,ei.useState)(!1),S=(0,eX.Z)(h.pill,"pill",r,{"icon-pill":o,focus:t,active:f,[i||"default"]:!0,error:n,"disabled-max-width":a}),C=()=>{f&&(null==m||m(),b(!1))};return(0,ei.useEffect)(()=>(document.addEventListener("pointerup",C),()=>{document.removeEventListener("pointerup",C)})),(0,ei.useEffect)(()=>{y(!!n)},[n]),ei.createElement(eb.AnalyticsTooltip,{placement:"bottom-start",title:ei.createElement("div",{role:"alert",className:h.containerCallOut,id:c},ei.createElement("div",{className:h.iconAlertCallOut},ei.createElement(eE.Attention,null)),l(`gradePill.errors.${s}`,{maxDigits:5,maxDecimalDigits:2})),analyticsId:`${d}.tooltip`,open:v},ei.createElement("div",{className:h.containerPill},ei.createElement("div",{className:S,ref:g,onClick:o?()=>{}:()=>{n&&y(!0),null==u||u()},onPointerDown:o?()=>{}:()=>{null==p||p(),b(!0)},onPointerUp:o?()=>{}:C},e.children)))},e6=e=>{let{screenReaderText:t="",enableHideOffScreen:n}=e;return ei.createElement(ei.Fragment,null,ei.createElement("span",{className:"pill-hyphens","aria-hidden":n},"--"),n?ei.createElement(eV.HideOffScreen,null,t):"")};(0,eV.makeStyles)(()=>(0,eV.createStyles)({pillHyphens:{marginRight:"2px"},pillPercentage:{marginLeft:"2px"}})),(0,eV.makeStyles)(()=>(0,eV.createStyles)({pillPointsSeparator:{margin:"0 3px"}}));let e5=(0,eV.makeStyles)(()=>(0,eV.createStyles)({pillSeparator:{margin:"0px 3px"}})),e3=e=>{let{grade:t,pointsPossible:n,enableHideOffScreen:i,screenReaderText:r}=e,s=e5(e),{formatNumber:o}=(0,eQ.h)();return ei.createElement(ei.Fragment,null,ei.createElement("span",{className:"js-pill-grade","aria-hidden":"true"},o(t,t5(t))),ei.createElement("span",{className:s.pillSeparator,"aria-hidden":"true"},"/"),ei.createElement("span",{className:"pill-points-possible","aria-hidden":"true"},o(n,tX)),i&&""!==r?ei.createElement(eV.HideOffScreen,null,r):null)},e8=e=>{var t;return(null==e?void 0:e.manualStatus)===e$.WTZ.IsPosted&&null!==(t=null==e?void 0:e.displayGrade)&&void 0!==t&&!!t.isOverride&&null!=e.displayGrade.score||(null==e?void 0:e.status)===e$.EyR.Graded&&null!=e&&!!e.displayGrade&&!e.displayGrade.isOverride&&null!=e.displayGrade.score},e9=e=>{var t;return(null==e?void 0:e.manualStatus)===e$.WTZ.NoOverride&&(null==e?void 0:e.status)===e$.EyR.NeedsGrading&&(null===(t=null==e?void 0:e.displayGrade)||void 0===t?void 0:t.score)!=null||(null==e?void 0:e.manualStatus)===e$.WTZ.ReadyToPost},e7=(e,t,n=!1)=>{if(n)return N.Black;if("number"!=typeof e||"number"!=typeof t||0===t||0===e&&0===t)return N.Grey;let i=100*e/t;return i>=90?N.Green:i>=80&&i<90?N.YellowGreen:i>=70&&i<80?N.Yellow:i>=60&&i<70?N.Orange:N.Red},te=e=>{if(null==e)return!0;let t=Math.abs(Math.trunc(e)).toString().length,n=e===Math.trunc(e)?0:e.toString().split(".")[1].length;return!(t>5)&&!(n>2)},tt=(e,t,n)=>{if(void 0===e||void 0===t||void 0===n)return"";let i=100*t/n;for(let t of(0,eJ.orderBy)(e,["lowerBound"],["desc"]))if(i>=t.lowerBound)return t.symbol;return""},tn=(e,t,n,i,r,s)=>{if(null==t)return null;if(e===O.Points||e===O.UnitBased)return r(t,t5(t));if(e===O.Percentage){let e=100*t/n;return i("gradePill.percentageGrade",{displayGrade:r(e,t5(e))})}return e===O.Tabular&&s?tt(s,t,n):null},ti=e=>e===e$.aQo.Percent?O.Percentage:e===e$.aQo.Tabular?O.Tabular:e===e$.aQo.Complete?O.Complete:O.Points,tr=(e,t,n)=>n===O.Percentage&&void 0!==e?e*t/100:e,ts=e=>{var t;return(null==e?void 0:e.grade)&&null!==(t=e.score)&&void 0!==t?t:void 0},to=(e,t)=>0===e&&!t||!!e,ta=(e,t,n)=>t.length>e.length?n+1:t.length<e.length?n-1:n,tl=(e,t,n,i)=>{let r;let s=e.target.value,o=t(s)||s,a=n(o.trim()),l=e.target.selectionStart;if(r={value:void 0,regrouped:s,cursorPosition:0,hasError:!0,errorKey:void 0},s){if(Number.isNaN(a))r={value:void 0,regrouped:s,cursorPosition:null!=l?l:0,hasError:!0,errorKey:$.WrongFormat};else{let e=te(a);r={value:a,regrouped:s,cursorPosition:ta(s,o,null!=l?l:0),hasError:!e,errorKey:e?void 0:$.MaxExceeded}}}else Number.isNaN(a)&&(r={value:void 0,regrouped:o,cursorPosition:0,hasError:!1,errorKey:void 0},r=i?{...r,hasError:!0,errorKey:$.WrongFormat}:{...r,hasError:!1,errorKey:void 0});return r},tc=e=>{let{grade:t,pointsPossible:n}=e,{translate:i,formatNumber:r}=(0,eQ.h)();return ei.createElement("div",null,tn(O.Percentage,t,n,i,r))},td=(0,eV.makeStyles)(()=>(0,eV.createStyles)({gradedTabularContent:{overflow:"hidden",textOverflow:"ellipsis","& span":{whiteSpace:"nowrap"}}})),tu=e=>{let{symbolGrade:t}=e,n=td(e);return ei.createElement("div",{className:n.gradedTabularContent},ei.createElement("span",null,t))},tp=(0,eV.makeStyles)(()=>(0,eV.createStyles)({unitBasedContent:{margin:"0 3px","& span":{whiteSpace:"nowrap"}}})),tm=e=>{let{unit:t}=e,n=tp(e),i=(0,ed.q)();return ei.createElement("div",{className:n.unitBasedContent},ei.createElement("span",null,i(`gradebook.grade.${t}`)))},th=e=>{let{grade:t,unit:n}=e,{formatNumber:i}=(0,eQ.h)();return ei.createElement(ei.Fragment,null,ei.createElement("span",null,null==t?"--":i(t,t5(t))),ei.createElement(tm,{unit:n}))},tg=(0,eV.makeStyles)(e=>(0,eV.createStyles)({pillInput:{overflow:"hidden",textOverflow:"ellipsis",background:"none",border:"none",textAlign:"center",fontWeight:"inherit",margin:"0px",padding:"0px",fontSize:"inherit",color:"inherit",outline:"none",cursor:"pointer","&:focus":{border:"none",fontWeight:e.typography.fontWeightRegular},"&::placeholder":{color:"inherit"}},pillInputContainer:{overflow:"hidden"},contentRef:{width:"auto",visibility:"hidden",position:"absolute"}})),tf=e=>{let{regroupNumber:t,parseNumber:n,formatNumber:i}=(0,eQ.h)(),{grade:r,displayGrade:s,hasFocus:o}=e,{analyticsId:a,id:l,showRegroupedGrade:c,onFocus:d,onBlur:u,onError:p,onErrorSolved:m}=e,{ariaLabel:h,ariaDescribedBy:g,ariaHidden:f,emptyGradeNotAllowed:b,enableHideOffScreen:v,screenReaderText:y="",pointsPossible:S}=e,[C,E]=(0,ei.useState)(!1),[I,w]=(0,ei.useState)(void 0),[A,k]=(0,ei.useState)(0),[T,P]=(0,ei.useState)({value:r,regrouped:null!=r?t(i(r,{round:"truncate",maximumFractionDigits:2})):"",cursorPosition:0}),D=tg(e),x=(0,ei.useRef)(null),R=(0,ei.useRef)(null),L=(0,ei.useRef)(null);return(0,ei.useEffect)(()=>{var e;o&&(null===(e=x.current)||void 0===e||e.focus())},[o]),(0,ei.useLayoutEffect)(()=>{var e,t;k((null!==(t=null===(e=L.current)||void 0===e?void 0:e.offsetWidth)&&void 0!==t?t:0)+2)},[T]),(0,ei.useLayoutEffect)(()=>{var e;let t=null===(e=R.current)||void 0===e?void 0:e.offsetWidth;o||A===t||k(null!=t?t:0)},[A]),(0,ei.useEffect)(()=>{C||null==m||m()},[C]),(0,ei.useEffect)(()=>{let e=null!=r?t(i(r,{round:"truncate",maximumFractionDigits:2})):"",n=e.length;P({value:r,regrouped:e,cursorPosition:n})},[r,i,t]),(0,ei.useEffect)(()=>{var e;let{cursorPosition:t}=T;null===(e=x.current)||void 0===e||e.setSelectionRange(t,t)},[T]),ei.createElement("div",{className:D.pillInputContainer,ref:R},ei.createElement("input",{id:l,className:D.pillInput,value:o||c||!s?T.regrouped:s,ref:x,onBlur:()=>{C&&(null==p||p(I)),!C&&u&&u(T.value)},onChange:e=>{let{value:i,regrouped:r,cursorPosition:s,hasError:o,errorKey:a}=tl(e,t,n,b);P({value:i,regrouped:r,cursorPosition:s}),E(o),w(a)},onKeyDown:e=>{var t;13===e.keyCode&&(C?null==p||p(I):null===(t=x.current)||void 0===t||t.blur())},style:{width:`${A}px`},maxLength:11,"analytics-id":`${a}.input`,"aria-label":h,"aria-describedby":g,"aria-hidden":f,tabIndex:f?-1:0,"aria-invalid":!!C,placeholder:"--",onFocus:d,readOnly:!o}),ei.createElement("div",{className:D.contentRef,ref:L,"aria-hidden":!0},o||c||!s?T.regrouped||"--":s),v&&ei.createElement(eV.HideOffScreen,{id:g},y))},tb=(0,eV.makeStyles)(()=>(0,eV.createStyles)({pendingContent:{fontStyle:"italic"}})),tv=e=>{let t=tb(e),n=(0,ed.q)();return ei.createElement("div",{className:t.pendingContent},ei.createElement("span",null,n("gradePill.pendingState")))},ty=(0,eV.makeStyles)(()=>(0,eV.createStyles)({pillPointsSeparator:{margin:"0 3px"}})),tS=e=>{let{pointsPossible:t}=e,n=ty(e),{formatNumber:i}=(0,eQ.h)();return ei.createElement(ei.Fragment,null,ei.createElement("span",{className:n.pillPointsSeparator,"aria-hidden":!0},"/"),ei.createElement("span",{className:"pill-points-possible","aria-hidden":!0},i(t,t5(t))))},tC=e=>(0,eq.pJ)(t=>eO.Ys.systemPreference.getSystemPreferenceByKey(t,e)),tE="gradepill.color.preference.settings",tI=()=>{let e=(0,eq.Lx)();(0,ei.useEffect)(()=>{e(eO.Nwg.systemPreference.loadSystemPreference({key:tE}))},[e]);let t=tC(tE);return!!t&&!!t.value&&!JSON.parse(t.value).isColorEnabled};var tw=n(998426);let tA=(0,eV.makeStyles)(e=>(0,eV.createStyles)({container:{display:"flex",alignItems:"center"},pill:{"&&":{display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",padding:"0 8px",height:"30px",minWidth:"80px",maxWidth:"120px",transition:"background-color 0.2s cubic-bezier(0.55, 0, 0.1, 1)",borderRadius:"20px",color:e.palette.background.b1}},bgSuccess:{"&&":{background:e.palette.success.main}},bgDisabled:{"&&":{background:e.palette.background.b8}},bgBlack:{"&&":{background:e.palette.background.b9}},bgHasError:{background:e.palette.background.default,border:`1px solid ${e.palette.border.main}`,boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${tw.r8.fade(e.palette.error.main,.1)}`},readOnlyPill:{pointerEvents:"none"},pillInputContainer:{display:"flex",alignItems:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},pillInput:t=>({background:"inherit",border:0,outline:0,minWidth:"2ch",paddingLeft:"4px",fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightSemiBold,"&::placeholder":{color:e.palette.primary.contrastText},width:`${t.currentGradeLength+.8}ch`}),pillInputHasError:{color:e.palette.action.active,marginLeft:0},pillInputIsValid:{color:e.palette.primary.contrastText},totalPoints:{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightSemiBold},totalPointsHasError:{color:e.palette.action.active},containerCallOut:{color:e.palette.error.main,display:"flex","& div":{paddingRight:"12px"}},iconAlertCallOut:{padding:"4px 4px 0 0"},attentionIcon:{color:e.palette.error.main,marginLeft:"5px"}})),tk=(0,eV.makeStyles)(e=>(0,eV.createStyles)({iconButton:{minWidth:0,padding:0,"&.default":{marginRight:"9px"},"&.mini":{marginRight:"4px"},"&.large":{marginRight:"10px"},"&:hover":{color:"inherit"}},rubricIcon:{fontSize:e.typography.fontSizeMedium}})),tT=e=>{let{analyticsId:t,ariaLabel:n,onClick:i,size:r}=e,s=tk(e),o=(0,eX.Z)(s.iconButton,r||"default"),a=(0,eX.Z)(s.rubricIcon,r||"default");return ei.createElement(eb.AnalyticsIconButton,{className:o,"aria-label":n,color:"inherit",onClick:i,analyticsId:`${t}.iconButton`},ei.createElement(eE.Rubric,{className:a}))},tP=(0,eV.makeStyles)(e=>(0,eV.createStyles)({pillIcon:{color:e.palette.background.default},pillIconHasError:{color:e.palette.action.active}})),tD=({isComplete:e,hasError:t})=>{let n=tP();return e?er().createElement(eE.CheckCircle,{className:(0,eX.Z)({[n.pillIcon]:!0,[n.pillIconHasError]:t,"js-complete-pill-icon":!0})}):er().createElement(eE.Minus,{className:(0,eX.Z)({[n.pillIcon]:!0,[n.pillIconHasError]:t,"js-incomplete-pill-icon":!0})})},tx=({isComplete:e,totalPoints:t,onBlur:n,gradeValue:i,initialHasFocus:r,isEditable:s,ariaCompleteIncompleteLabel:o,isRubricEnabled:a,canOpenRubricEval:l,analyticsId:c,children:d})=>{var u;let[p,m]=(0,ei.useState)(r),[h,g]=(0,ei.useState)(r),[f,b]=(0,ei.useState)(!1),[v,y]=(0,ei.useState)(void 0),{regroupNumber:S,parseNumber:C,formatNumber:E,translate:I}=(0,eQ.h)(),w=C(i),[A,k]=(0,ei.useState)({value:w,regrouped:i?E(w,{round:"truncate",maximumFractionDigits:2}):""}),T=tA({currentGradeLength:null===(u=A.regrouped)||void 0===u?void 0:u.length}),P=tI();(0,ei.useEffect)(()=>{k({value:w,regrouped:i?E(w,{round:"truncate",maximumFractionDigits:2}):""})},[w,i,E]);let D=(0,ei.useCallback)(()=>{s&&m(!0)},[s]),x=(0,ei.useCallback)(e=>{g(!1);let t=null!==A.value&&void 0!==A.value?A.value.toString():"";f||(n(e,t,t!==(null==w?void 0:w.toString())),m(!1))},[A.value,w,n,f]),R=(0,ei.useCallback)(()=>{g(!0)},[]);return er().createElement(eb.AnalyticsTooltip,{placement:"bottom-start",title:er().createElement("div",{role:"alert",className:T.containerCallOut},er().createElement("div",{className:T.iconAlertCallOut},er().createElement(eE.Attention,null)),I(`gradePill.errors.${v}`,{maxDigits:5,maxDecimalDigits:2})),open:f&&h,analyticsId:`${c}`},er().createElement("div",{className:T.container},er().createElement(eb.AnalyticsButtonBase,{onClick:D,analyticsId:`${c}.button`,className:(0,eX.Z)({[T.pill]:!0,[T.bgSuccess]:e,[T.bgDisabled]:!e,[T.bgHasError]:f,[T.bgBlack]:P,[T.readOnlyPill]:!s})},er().createElement("p",{className:"sr-only"},I(e?"gradebook.grade.grade-input.aria.complete":"gradebook.grade.grade-input.aria.incomplete")),p?er().createElement("div",{className:T.pillInputContainer},!f&&er().createElement(tD,{isComplete:e,hasError:!1}),er().createElement("input",{autoFocus:!0,placeholder:"--",value:A.regrouped,className:(0,eX.Z)({[T.pillInput]:!0,[T.pillInputHasError]:f,[T.pillInputIsValid]:!f}),"aria-label":o,onFocus:R,onBlur:x,onChange:e=>{let{value:t,regrouped:n,hasError:i,errorKey:r}=tl(e,S,C,!1);k({value:t,regrouped:n}),b(i),y(r)},onKeyDown:e=>{"Enter"===e.key&&(f?e.preventDefault():x(e))},"data-analytics-id":c}),er().createElement(eb.AnalyticsTypography,{className:(0,eX.Z)({[T.totalPoints]:!0,[T.totalPointsHasError]:f})},I("components.directives.grade.grade-input.points",{total:t}))):er().createElement(er().Fragment,null,d," ",a?s?er().createElement(tT,{analyticsId:`${c}.rubricIcon`}):er().createElement(tT,{analyticsId:`${c}.rubricIcon`,onClick:l}):null,er().createElement(tD,{isComplete:e,hasError:f}))),f&&er().createElement(eE.Attention,{className:T.attentionIcon})))},tR=e=>{let t,n;let{translate:i,formatNumber:r}=(0,eQ.h)(),{grade:s,pointsPossible:o,hasFocus:a,variant:l,symbolsMap:c,unit:d,emptyGradeNotAllowed:u}=e,{pillSize:p,colorOverride:m,analyticsId:h,id:g,onBlur:f,scoredByAutomaticZero:b,enableHideOffScreen:v,screenReaderText:y}=e,{ariaLabel:S,ariaHidden:C,ariaDescribedBy:E=""}=e,[I,w]=(0,ei.useState)(s),[A,k]=(0,ei.useState)(tn(l,s,null!=o?o:0,i,r,c)),[T,P]=(0,ei.useState)(!1),[D,x]=(0,ei.useState)(a||!1),[R,L]=(0,ei.useState)(!1),[N,$]=(0,ei.useState)(void 0),G=(0,eJ.uniqueId)("errorMessageId"),_=(0,eJ.uniqueId)("complementId"),M=ei.createElement(tS,{pointsPossible:null!=o?o:0}),B=tI();(0,ei.useEffect)(()=>{w(s),k(tn(l,s,null!=o?o:0,i,r,c))},[s,l]);let F=e=>{w(e),k(tn(l,e,null!=o?o:0,i,r,c)),x(!1),f&&f(e)},U=!1;if((D&&l!==O.UnitBased||T&&l===O.Points)&&(t=M),l===O.UnitBased){if(U=!0,!d)throw Error("BaseGradePill requires a GradingUnit when variant is UnitBased");t=ei.createElement(tm,{unit:d})}T||D||null==I||l===O.UnitBased||(n=null!=m?m:e7(I,o,B),l===O.Points&&(t=M),l!==O.Tabular||(U=!0));let V=R?`${E}${_}${G}`:`${E}${_}`,H={isComplete:to(s,b),totalPoints:o,onBlur:(e,t,n)=>{let i=Number.parseFloat(t);F(isNaN(i)?void 0:i)},gradeValue:s?r(s):"",initialHasFocus:!1,isEditable:!0,ariaLabel:S,analyticsId:`${h}.input`};return ei.createElement(ei.Fragment,null,l===O.Complete?ei.createElement(tx,{...H},e.children):ei.createElement(e4,{pillSize:p,pillColor:n,hasFocus:D,hasError:R,errorKey:N,errorId:G,showIconButton:!!e.children,analyticsId:h,maxWidthDisabled:U,onClick:()=>{x(!0)},onPointerDown:()=>{P(!0)},onPointerUp:()=>{P(!1)}},e.children,ei.createElement(tf,{grade:I,displayGrade:null!=A?A:"",emptyGradeNotAllowed:u,analyticsId:`${h}.gradableContent`,ariaLabel:S,hasFocus:D,onFocus:()=>{x(!0)},onBlur:F,onError:e=>{L(!0),$(e)},ariaDescribedBy:V,ariaHidden:C,id:g,showRegroupedGrade:e.showRegroupedGrade,onErrorSolved:()=>{L(!1),$(void 0)},enableHideOffScreen:v,screenReaderText:y,pointsPossible:o}),v?t&&ei.createElement("div",null,t):t&&ei.createElement("div",{id:_},t)))};(u=_||(_={})).AllGrading="course.gradebook-grades.EXECUTE",u.DeanonymizeGrades="course.gradebook-deanonymize.EXECUTE",u.EnterFeedback="course.gradebook-grades.feedback.EXECUTE",u.EnterItemGrades="course.gradebook-grades.attempt.EXECUTE",u.ExportGradebookData="course.gradebook-data.export.EXECUTE",u.FullGradebookAccess="course.gradebook.MODIFY",u.ModifyGradebook="course.gradebook.MODIFY",u.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",u.Observe="observer.gradebook.VIEW",u.OverrideItemGrades="course.gradebook-grades.override.EXECUTE",u.ProvideGradingFeedback="course.gradebook-grades.feedback.EXECUTE",u.PublishGrades="course.gradebook-grades.publish.EXECUTE",u.ViewAttempts="course.gradebook.attempts.VIEW",u.ViewGradebook="course.gradebook.VIEW",u.ViewGradebookMetaData="course.gradebook-metadata.VIEW",u.OverrideGrade="course.gradebook-grades.override.EXECUTE",u.ViewException="course.gradebook-item.exceptions.VIEW",u.AssessmentViewException="course.assessment.exceptions.VIEW",u.ViewChildCourse="course.children.VIEW",u.ViewGrades="course.gradebook-grades.VIEW",u.ViewUserGrades="course.user.grades.VIEW",u.PostGrades="course.gradebook-grades.publish.EXECUTE",u.UserPropertiesModify="course.user.properties.MODIFY";let tL=e=>{var t;let{pillSize:n,pillColor:i,showIconButton:r,pointsPossible:s}=e,o=e2(e),a=(0,eX.Z)(o.readonlyPill,"readonly-pill",{"big-pill":null!==(t=null==s?void 0:s.toString().length)&&void 0!==t&&t},i,n||"default",{"icon-pill":r});return ei.createElement("div",{className:a},e.children)},tN=e=>{let{variant:t,grade:n,pointsPossible:i,isPending:r,symbolGrade:s,unit:o,enableHideOffScreen:a,screenReaderText:l=""}=e;if(r)return ei.createElement(tv,null);let c={enableHideOffScreen:a,screenReaderText:l};switch(t){case O.Percentage:return null!=n&&null!=i?ei.createElement(tc,{grade:n,pointsPossible:i}):ei.createElement(e6,{...c});case O.Tabular:return null!=s?ei.createElement(tu,{symbolGrade:s}):ei.createElement(e6,{...c});case O.UnitBased:return null!=o?ei.createElement(th,{grade:n,unit:o}):ei.createElement(e6,null);default:if(null!=i)return null!=n?ei.createElement(e3,{grade:n,pointsPossible:i,enableHideOffScreen:a,screenReaderText:l}):ei.createElement(e6,{...c});return ei.createElement(e6,{...c})}},t$=e=>{let{grade:t,symbolGrade:n,pointsPossible:i,isPending:r,variant:s,pillSize:o,colorOverride:a,unit:l,scoredByAutomaticZero:c,enableHideOffScreen:d,screenReaderText:u=""}=e,p=tI(),m=null!=a?a:e7(t,i,p),h={isComplete:to(t,c),initialHasFocus:!1,isEditable:!1,totalPoints:i,onBlur:(e,t,n)=>{},gradeValue:t?t.toString():""};return ei.createElement(ei.Fragment,null,s===O.Complete?ei.createElement(tx,{...h},e.children):ei.createElement(tL,{pillSize:o,pillColor:m,showIconButton:!!e.children,pointsPossible:i},e.children,ei.createElement(tN,{grade:t,symbolGrade:n,pointsPossible:i,isPending:r,variant:s,unit:l,enableHideOffScreen:d,screenReaderText:u})))},tO=e=>{let{analyticsId:t,ariaLabel:n,currentScore:i,canGradeWithRubric:r,showRubricIcon:s,handleOnBlur:o,handleOnRubricIconClick:a,isEditable:l,pointsPossible:c,symbolGrade:d,symbolsMap:u,variant:p,scoredByAutomaticZero:m,colorOverride:h,enableHideOffScreen:g,screenReaderText:f}=e,b=!1,v=(0,eq.Sp)("gradepill.color.preference.settings");v&&(b=!JSON.parse(v).isColorEnabled);let y=(0,ed.q)(),S={grade:i,pointsPossible:c,variant:p,gradeColorVariant:b?N.Black:void 0,scoredByAutomaticZero:m,enableHideOffScreen:g,screenReaderText:f},C=()=>r?er().createElement(tT,{onClick:a,ariaLabel:y("gradePill.gradebookAttemptGradePill.rubricIconAriaLabel"),analyticsId:`${t}.gradepill.rubricIcon`}):er().createElement(tT,{ariaLabel:y("gradePill.gradebookAttemptGradePill.rubricIconAriaLabelDisabled")});return l?(()=>{let e={...S,symbolsMap:u,onBlur:o,ariaLabel:n,analyticsId:`${t}.gradePill`};return er().createElement(tR,{...e},s&&C())})():(()=>{let e={...S,symbolGrade:d,colorOverride:h};return er().createElement(t$,{...e},s&&C())})()},tG=e=>`${e}.confirmClearRubricAttemptGrade.dialog`,t_=e=>{let{open:t,onCancel:n,onConfirmation:i}=e,r=(0,ed.q)(),s=tG(e.analyticsId),o="confirm-remove-rubric-attempt-grade.dialog-title";return ei.createElement(eu._X,{analyticsId:s,open:t,onClose:n,maxWidth:"md","aria-labelledby":o},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${s}.title`,id:o,onClose:n},r("gradebook.clearRubricAttemptGradeConfirmationDialog.title")),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${s}.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:`${s}.body`},r("gradebook.clearRubricAttemptGradeConfirmationDialog.body"))),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${s}.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${s}.cancel.button`,onClick:n},r("gradebook.clearRubricAttemptGradeConfirmationDialog.secondaryButtonText")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${s}.confirmation.button`,onClick:i},r("gradebook.clearRubricAttemptGradeConfirmationDialog.primaryButtonText"))))},tM=(e,t,n,i,r,s)=>{let o;if(void 0===t&&void 0===n)return"";if(r)r&&void 0!==s&&(o=n?void 0!==i?e("gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.attemptGradeGraded",{attemptNumber:s,pointsEarned:i,pointsPossible:t}):e("gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.attemptGradeUngraded",{attemptNumber:s}):e(void 0!==i?"gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.editableFinalGradePillGraded":"gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.editableFinalGradePillUngraded",{pointsEarned:i,pointsPossible:t}));else{let r="";r=n?void 0!==i?"studentListGradeGraded":"studentListGradeUngraded":void 0!==i?"editableFinalGradePillGraded":"editableFinalGradePillUngraded",o=e(`gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.${r}`,{pointsEarned:i,pointsPossible:t})}return o},tB=(e,t,n,i,r,s,o)=>{let a="";return void 0===r?e("gradePill.gradebookAttemptGradePill.ariaLabel.finalGradeSimpleLabel",{pointsEarned:i,pointsPossible:r}):n?e("gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.attemptGradeSimpleLabel",{attemptNumber:o}):(a=t?"scoreInputContinued.finalGradeSimpleLabel":"scoreInputEmpty",s?a=t?"scoreInputContinued.finalGradeSimpleLabel":"pastDueZeroScoreInputGraded":void 0!==i&&(a=t?"scoreInputContinued.finalGradeSimpleLabel":"scoreInputGraded"),e(`gradePill.gradebookAttemptGradePill.ariaLabel.${a}`,{pointsEarned:i,pointsPossible:r}))},tF=e=>{var t,n,i,r,s,o,a,l;let{userId:c,isForAttempt:d,assessmentId:u,courseId:p,columnId:m,ariaLabel:h,analyticsId:g,canShowRubricIcon:f,canGradeWithRubric:b,readonly:v,onGradeUpdate:y,handleOnRubricIconClick:S,affectsAttemptGradeWhenCleared:C,enableHideOffScreen:E,attemptNumber:I}=e,w=(0,ed.q)(),A=(0,eq.IP)(p,m),k=null!==(t=null==A?void 0:A.gradingSchemaId)&&void 0!==t?t:"",T=(0,eq.Yp)(p,k),P=null!==(n=null==A?void 0:A.anonymousGrading)&&void 0!==n&&n,D=(0,eq.VP)(P?{columnId:m,gradeId:c}:{columnId:m,userId:c}),x=e.attemptId||(null==D?void 0:D.lastAttemptId)||"",{attempt:R}=(0,eq.or)({courseId:p,columnId:m,attemptId:d?x:""}),L=(0,eq.qi)(p,u),$=(0,eq.vD)(p,[_.EnterItemGrades]),O=(0,eq.vD)(p,[_.OverrideItemGrades]),G=null==A?void 0:A.possible,M=ti(null==T?void 0:T.scaleType),B=!e.attemptId,F=nr(D),U=d&&x&&!(B&&F),V=U?ts(R):tr(null==D?void 0:D.displayGrade.score,null!=G?G:0,M),H=null==T?void 0:T.symbols,q=U?tt(H,V,G):null==D?void 0:D.displayGrade.grade,j=null!==(i=null==D?void 0:D.id)&&void 0!==i?i:"",z=(null!==(s=null===(r=null==A?void 0:A.rubricAssociations)||void 0===r?void 0:r.length)&&void 0!==s?s:0)>0,W=null==D?void 0:D.isExempt,K=(0,eq.qI)(),Z=(0,eq.Hr)(),Q=(0,eq.cH)(x),J=(0,eq.UF)(),Y=(0,eq.u3)(j),X=(0,eq.XY)(),ee=eO.u$1.Survey.isEqualTo(null==A?void 0:A.scoreProviderHandle),et=null!==(o=null==A?void 0:A.scorable)&&void 0!==o&&o,en=eO.f_.isGradedSurveyWithMultipleAttempts(A),es=(0,ei.useCallback)(()=>{Z({courseId:p,columnId:m,attemptId:x,payload:{score:null,grade:"-",status:e$.I$9.NeedsGrading,rubricEvaluation:null}})},[x,m,p,Z]),eo=(0,ei.useCallback)(()=>{J({courseId:p,columnId:m,gradeId:j,payload:{manualScore:null}})},[J,p,m,j]),[ea,el]=(0,ei.useState)(!1),ec=(0,ei.useCallback)(()=>{es(),eo(),el(!1)},[es,eo]),eu=(0,ei.useCallback)(()=>{el(!1)},[]),[ep,em]=(0,ei.useState)(!1),[eh,eg]=(0,ei.useState)(V);(0,ei.useEffect)(()=>{ep&&K&&em(!1)},[ep,K]),(0,ei.useEffect)(()=>{ea||ep||K||Q||Y||eh===V||(eg(V),null==y||y(null!=V?V:null,c))},[ea,ep,K,Q,Y,eh,V,y,c]);let ef=null!==(a=null==L?void 0:L.hasAnswerableQuestions)&&void 0!==a&&a,eb=en?d&&x:d&&x&&!ef,ev=(0,ei.useCallback)(e=>{if(e!==V){if(eg(e),null==y||y(null!=e?e:null,c),eb&&(!z||void 0===e)){if(void 0===e){if(z){el(!0);return}es()}else Z({courseId:p,columnId:m,attemptId:x,payload:{score:e,readyToPost:!0}});B&&eo()}else j?void 0===e&&x&&!F&&C?(es(),em(!0)):J({courseId:p,columnId:m,gradeId:j,payload:{manualScore:null!=e?e:null}}):X({courseId:p,columnId:m,userId:c,payload:{manualScore:e}})}},[C,es,eo,m,p,X,V,j,z,F,B,y,x,Z,J,eb,c]),ey=ee?(B||!z)&&$:(B||!(ef||z))&&$,eS=d?ey:O,eC=!(d&&x)&&W,eE=ee?!v&&eS&&!eC&&et:!v&&eS&&!eC;return er().createElement(er().Fragment,null,er().createElement(tO,{analyticsId:g,ariaLabel:h||tB(w,E,d,eh,G,null==D?void 0:D.displayGrade.scoredByAutomaticZero,I),canGradeWithRubric:b,showRubricIcon:f&&z,currentScore:eh,handleOnBlur:ev,handleOnRubricIconClick:S,isEditable:eE,pointsPossible:G,symbolGrade:q,symbolsMap:H,variant:M,colorOverride:W&&!P?N.Grey:void 0,scoredByAutomaticZero:null===(l=null==D?void 0:D.displayGrade)||void 0===l?void 0:l.scoredByAutomaticZero,enableHideOffScreen:E,screenReaderText:tM(w,G,!eE,eh,d,I)}),er().createElement(t_,{open:ea,onCancel:eu,onConfirmation:ec,analyticsId:g}))},tU=e=>{let{analyticsId:t,courseId:n,onGradeUpdate:i,gradeChangeModalHandler:r,questionAttemptId:s}=e,o=(0,ed.q)(),a=(0,eq.MT)(),l=(0,eq.of)(n,s),c=(0,eq.iz)(n,null==l?void 0:l.attemptId,null==l?void 0:l.questionId,s,["questionAttempt.question","questionAttempt.question.usageCount","questionAttempt.question.sourceInfo","questionAttempt.answerCorrectness"]),d=(0,eq.UQ)(),u=(0,eq.vD)(n,[_.ModifyGradebook]),p=(0,eq.Tn)(n),[m,h]=(0,ei.useState)(0),g=(0,ei.useCallback)(async e=>{if((null==c?void 0:c.points)!==e){let t={points:e,questionAttempt:l};if(r){let{confirmed:o}=await r();o?(d(n,s,t),null==i||i(e)):h(m+1)}else d(n,s,t,a),null==i||i(e)}},[n,l,d,c,s,m,r,i,a]);if(!c||!l)return null;let{question:f}=l;if(!f)throw Error("No `question` field found in the question attempt object");let b=o("gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.questionGradingGradePillSimple",{questionNumber:null==f?void 0:f.position}),v="";return v=o(void 0!==c.points?"gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.questionGradingGradePillGraded":"gradePill.gradebookAttemptGradePill.ariaLabel.scoreInputContinued.questionGradingGradePillUngraded",{pointsPossible:f.points}),er().createElement(tO,{key:m,currentScore:c.points,pointsPossible:f.points,variant:O.Points,handleOnRubricIconClick:()=>{},handleOnBlur:g,analyticsId:t,canGradeWithRubric:!1,isEditable:u&&!(null==p?void 0:p.isClosed),showRubricIcon:!1,enableHideOffScreen:!0,ariaLabel:b,screenReaderText:v})},tV=2,tH=1,tq=0,tj=2,tz=5,tW=99999,tK=0,tZ=100,tQ=1e3;(p=M||(M={})).Points="points",p.Percent="percent",p.PointsPerQuestion="points.each",(m=B||(B={})).Default="default",m.Mini="mini",m.Large="large",(h=F||(F={})).Green="green",h.Yellowgreen="yellowgreen",h.Yellow="yellow",h.Orange="orange",h.Red="red",h.Disabled="color-disabled",h.Ungraded="white",h.Override="grey";let tJ=F.Ungraded;function tY(e,t=!1){var n,i,r,s;let o=Number(e),a=RegExp(`^-?\\d+(?:\\.\\d{0,${o<999||!t?tV:o<9999?tH:tq}})?`);return"number"==typeof e?null!==(i=null===(n=e.toString().match(a))||void 0===n?void 0:n[0])&&void 0!==i?i:"":"string"==typeof e&&null!==(s=null===(r=e.match(a))||void 0===r?void 0:r[0])&&void 0!==s?s:""}(U||(U={})).Override="override";let tX={minimumFractionDigits:0,maximumFractionDigits:tV,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},t0={minimumFractionDigits:0,maximumFractionDigits:tH,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},t1={minimumFractionDigits:0,maximumFractionDigits:tq,useGrouping:!0,minimumIntegerDigits:1,round:"truncate"},t2={minimumFractionDigits:0,maximumFractionDigits:tj,useGrouping:!0,minimumIntegerDigits:1,style:"decimal",round:"truncate"};function t4(e){return e.integerCount>=0&&e.integerCount<4?tX:4===e.integerCount?t0:t1}function t6(e){let t=e.reduce((e,t)=>(e?e+=t*tQ:e=t*tQ,e),null);return null===t?t:t/tQ}function t5(e){let t={integerCount:0,fractionalCount:0};if(!Number.isNaN(Number(e)))for(;Math.abs(e)>10**t.integerCount;)t.integerCount=t.integerCount+1;return t4(t)}function t3(e,t){return t?e>=90?F.Green:e>=80&&e<90?F.Yellowgreen:e>=70&&e<80?F.Yellow:e>=60&&e<70?F.Orange:F.Red:F.Disabled}let t8=e=>{var t;return e.manualStatus===e$.WTZ.NoOverride&&e.status===e$.EyR.NeedsGrading&&(null===(t=e.displayGrade)||void 0===t?void 0:t.score)!=null||e.manualStatus===e$.WTZ.ReadyToPost},t9=e=>{var t,n;return null!==(n=e&&(e.numStudentsSubmissionGradedNeedsPosting>0?e.numStudentsSubmissionGradedNeedsPosting>0:(null!==(t=e.numStudentsGradedNeedsPosting)&&void 0!==t?t:0)>0||e.numberOfOverriddenGradesToPost>0))&&void 0!==n&&n},t7=e=>e===e$.aQo.Percent?O.Percentage:e===e$.aQo.Tabular?O.Tabular:e===e$.aQo.Complete?O.Complete:O.Points,ne=e=>!!(null==e?void 0:e.scoredByAutomaticZero),nt=e=>{let t="gradebook.grade.grade-input.aria.scoreInputEmpty";return ne(e)?t="gradebook.grade.grade-input.aria.pastDueZeroScoreInputGraded":(null==e?void 0:e.score)!==void 0&&(t="gradebook.grade.grade-input.aria.scoreInputGraded"),t},nn=e=>null!=e.displayGrade&&(null!=e.displayGrade.score||null!=e.displayGrade.grade&&""!==e.displayGrade.grade),ni=e=>{let t=!(e.isCalculatedColumnGrade&&null!=e.manualGrade)&&(e$.WTZ.NoOverride===e.manualStatus&&(e.hasGradeBeenPosted||!eJ.has(e,"hasGradeBeenPosted")&&nn(e))||e$.WTZ.IsPosted===e.manualStatus);return nn(e)&&t},nr=e=>{var t,n;return(null===(t=null==e?void 0:e.displayGrade)||void 0===t?void 0:t.isOverride)&&!(null===(n=null==e?void 0:e.displayGrade)||void 0===n?void 0:n.scoredByAutomaticZero)||!1},ns=e=>{var t,n,i,r;return e?nr(e)&&null!==(r=null!==(n=null===(t=e.displayGrade)||void 0===t?void 0:t.score)&&void 0!==n?n:null===(i=e.displayGrade)||void 0===i?void 0:i.grade)&&void 0!==r?r:null:void 0},no=(e,t=!1,n=!1,i=[])=>{var r,s;if(!t||!n)return!0;let o=i.reduce((e,t)=>(t.groups&&t.groups.forEach(t=>e.add(t.groupId)),e),new Set),a=i.find(t=>t.userId===e);return(null==a?void 0:a.graderType)!==e$.xI1.Groups||0===(null!==(r=null==a?void 0:a.groups)&&void 0!==r?r:[]).length||(null!==(s=null==a?void 0:a.groups)&&void 0!==s?s:[]).length>=o.size};var na=n(609582);let nl=(0,eV.makeStyles)(e=>({downloadTestResultsPanelHeader:{height:"auto","& .ms-Panel-header":{boxShadow:"none"}},downloadTestResultsPanelBody:{top:0,overflow:"auto",height:"auto",position:"relative",marginBottom:"48px",[e.breakpoints.up("sm")]:{marginTop:"24px"}},errorMessage:{backgroundColor:"#F9DBD7",display:"flex",padding:"1rem",[e.breakpoints.up("sm")]:{margin:"0 -1.875rem"}},downloadTestResultsPanelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},panelSection:{padding:"14px 10px",borderBottom:`1px solid ${e.palette.border.main}`,"&:last-child":{borderBottom:"none",paddingBottom:0},"&:first-child":{paddingTop:0},"& fieldset":{border:0,margin:0,padding:0},"& h2":{fontWeight:"bold",marginBottom:"8px"}}}));(g=V||(V={})).Delimiter="delimiter-type",g.Format="format-of-results",g.Attempts="attempts";let nc=e=>`id-${e.toLowerCase()}-radio`,nd=e=>ei.createElement(eb.AnalyticsRadioGroup,{analyticsId:e.analyticsId,id:e.radioGroupId,legendVariant:"h2",legendText:e.legendText,name:e.name,value:e.selectedValue,onChange:e.onChangeHandler},e.groupDescription&&ei.createElement("div",null,ei.createElement("p",null,e.groupDescription)),e.radioProps.map(t=>ei.createElement("div",{key:t.value},ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:t.labelAnalyticsId,htmlFor:nc(t.value),value:t.value,control:ei.createElement(eb.AnalyticsRadio,{analyticsId:t.radioAnalyticsId,checked:t.value===e.selectedValue,onChange:e.onChangeHandler,id:nc(t.value)}),label:t.label}))));var nu=n(646782),np=n(563060),nm=n(177622),nh=n(175644);let ng=e=>{let{courseName:t,isOrganization:n}=e,i=(0,ed.q)(),[r,s]=ei.useState(e$.dZq.Tab),[o,a]=ei.useState(e$.Wvp.User),[l,c]=ei.useState(e$.uzw.AllAttempts),[d,u]=ei.useState(!1),[p,m]=ei.useState(!1),h=n?"organization.":"",g=()=>{np.Nd.leavePeekState()},f=async()=>{let t;m(!0);try{t=await (0,eO.FaB)(e.courseId,e.columnId,{delimiter:r,resultFormat:o,attempts:l}),(0,nu.saveAs)(t.blob,t.filename),g()}catch(e){console.error(e),u(!0)}},b="course.grades.download-test-results",v=nl();return ei.createElement("div",{id:"download-test-results-panel"},ei.createElement("div",{className:"panel-wrap"},ei.createElement("header",{className:`panel-header simple-header ${v.downloadTestResultsPanelHeader}`},ei.createElement(na.BbPanelHeader,{smallHeaderTitle:t,type:na.BbPanelType.peek,analyticsId:`${b}.header`,title:i("course.grades.download-test-results.pageTitle"),navMenuAriaLabel:i("global.navigationMenu")})),d&&ei.createElement("div",{className:v.errorMessage,id:"error-block"},ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${b}.error.attention`},ei.createElement(nh.l,null)),ei.createElement("span",null,i("course.grades.download-test-results.errorMessage")),ei.createElement(eb.AnalyticsIconButton,{id:"close-error",analyticsId:`${b}.error.close`,onClick:()=>{u(!1)}},ei.createElement(nm.Close,null))),ei.createElement("div",{className:`panel-body panel-content ${v.downloadTestResultsPanelBody}`},ei.createElement("div",{className:v.panelSection},ei.createElement(nd,{analyticsId:`${b}.delimiter.radiogroup`,radioGroupId:"delimiter-radio-group",name:V.Delimiter,legendText:i("course.grades.download-test-results.fileType"),selectedValue:r,onChangeHandler:e=>{s(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.delimiter.excel.label`,radioAnalyticsId:`${b}.delimiter.excel.radio`,value:e$.dZq.Tab,label:i("course.grades.download-test-results.excel")},{labelAnalyticsId:`${b}.delimiter.comma.label`,radioAnalyticsId:`${b}.delimiter.comma.radio`,value:e$.dZq.Comma,label:i("course.grades.download-test-results.comma")}]})),ei.createElement("div",{className:v.panelSection},ei.createElement(nd,{analyticsId:`${b}.results-format.radiogroup`,radioGroupId:"results-format-radio-group",name:V.Format,legendText:i("course.grades.download-test-results.formatOfResults"),groupDescription:i(`${h}course.grades.download-test-results.formatDescription`),selectedValue:o,onChangeHandler:e=>{a(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.format.student.label`,radioAnalyticsId:`${b}.format.student.radio`,value:e$.Wvp.User,label:i(`${h}course.grades.download-test-results.student`)},{labelAnalyticsId:`${b}.format.question-and-student.label`,radioAnalyticsId:`${b}.format.question-and-student.radio`,value:e$.Wvp.QuestionAndUser,label:i(`${h}course.grades.download-test-results.questionAndStudent`)}]})),ei.createElement("div",{className:v.panelSection},ei.createElement(nd,{analyticsId:`${b}.attempts.radiogroup`,radioGroupId:"attempts-radio-group",name:V.Attempts,legendText:i("course.grades.download-test-results.attemptsToDownload"),groupDescription:i(`${h}course.grades.download-test-results.attemptsDescription`),selectedValue:l,onChangeHandler:e=>{c(e.target.value)},radioProps:[{labelAnalyticsId:`${b}.attempts.all-attempts.label`,radioAnalyticsId:`${b}.attempts.all-attempts.radio`,value:e$.uzw.AllAttempts,label:i("course.grades.download-test-results.allAttempts")},{labelAnalyticsId:`${b}.attempts.valid-attempts.label`,radioAnalyticsId:`${b}.attempts.valid-attempts.radio`,value:e$.uzw.ValidAttempts,label:i("course.grades.download-test-results.validAttempts")}]})))),ei.createElement("div",{className:v.downloadTestResultsPanelFooter},ei.createElement(na.BbPanelFooter,{primaryButtonProps:{onClick:f,disabled:p,text:i("course.grades.download-test-results.download"),id:"button-download"},secondaryButtonProps:{onClick:g,text:i("course.grades.download-test-results.cancel"),id:"button-cancel"},analyticsId:`${b}.footer`})))},nf=e=>e.isDisabled?ei.createElement(t$,{grade:e.grade,variant:O.Points,pointsPossible:e.pointsPossible}):ei.createElement(tR,{grade:e.grade,pointsPossible:e.pointsPossible,variant:O.Points,onBlur:e.save,showRegroupedGrade:!0,analyticsId:"ultra.components.directives.assessment.gradePill"}),nb=(0,eV.makeStyles)(e=>(0,eV.createStyles)({overallGradeWrapper:{justifyContent:"center",alignContent:"center","& $overallGradeSetupContent":{[e.breakpoints.up("sm")]:{textAlign:"left"}},"& $row":{[e.breakpoints.up("md")]:{flexDirection:"row"}},"& $overallBorder":{[e.breakpoints.up("sm")]:{display:"block",paddingRight:"16px",maxWidth:"575px"},"& $overallGradeImgWrapper":{[e.breakpoints.up("sm")]:{float:"left"},"& $overallGradeImage":{[e.breakpoints.up("sm")]:{marginBottom:"0",marginTop:"16px",marginRight:"7px",marginLeft:"initial"}}},"& $overallGradeSetupHeading":{[e.breakpoints.up("sm")]:{marginTop:"16px",fontSize:e.typography.fontSizeLarge}},"& $overallGradeSetupText":{[e.breakpoints.up("sm")]:{marginBottom:"0px",textAlign:"left"}}},"& $setupOverallBtn":{[e.breakpoints.up("sm")]:{width:"100%",marginTop:"20px",marginLeft:"0"}}},buttonWrapper:{display:"flex",flexDirection:"column"},overallGradeWrapperFixed:{justifyContent:"center",alignContent:"center"},overallGradeSetupContent:{padding:"8px",border:"none",marginTop:"30px",textAlign:"center"},row:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},overallGradeImgWrapper:{minHeight:"inherit"},overallGradeImage:{height:"70px",width:"70px",marginBottom:"14px"},overallSetupContent:{},overallGradeSetupHeading:{"&&":{display:"block",fontSize:e.typography.fontSizeMedium,fontWeight:e.typography.fontWeightSemiBold,marginBottom:"4px"}},overallGradeSetupText:{lineHeight:"1.4",textAlign:"center",color:e.palette.text.secondary,marginBottom:"10px"},setupOverallBtn:{width:"auto",marginBottom:"10px",display:"inline-block"},hideThisMessageLinkOverride:{marginTop:"10px",fontSize:e.typography.fontSizeSmall},overallBorder:{display:"flex",flexDirection:"column",alignItems:"center"}})),nv=({onClose:e,onHideMessage:t,hidden:n})=>{let i=(0,ed.q)();return ei.createElement(eu.Dy,{analyticsId:"hideOverallGrade.dialog",dialogContentProps:{type:na.DialogType.normal,title:i("components.common.hideOverallGradeDialog.title"),subText:i("components.common.hideOverallGradeDialog.text"),showCloseButton:!0,className:"js-hide-overall-grade-component-dialog"},hidden:n,onDismiss:e},ei.createElement(na.DialogFooter,null,ei.createElement(ec.AnalyticsDefaultButton,{analyticsId:"components.common.hideOverallGradeDialog.cancel.button",onClick:e},i("components.common.hideOverallGradeDialog.cancel")),ei.createElement(ec.AnalyticsPrimaryButton,{analyticsId:"components.common.hideOverallGradeDialog.hide.button",className:"js-hide-overall-grade-component-dialog-hide-button",onClick:t},i("components.common.hideOverallGradeDialog.hideButton"))))};var ny=n(73719),nS=n.n(ny);let nC={key:"setupOverallGradeMessageIsHidden",value:"true",visibleToStudents:!1},nE=e=>{let t=(0,eq.Lx)(),n=(0,ed.q)(),{analyticsId:i,showFixedView:r,courseId:s,setupOverallGradeHideMessageCallback:o}=e,[a,l]=ei.useState(!0),c=nb((0,tw.Fg)()),d=r?c.overallGradeWrapperFixed:c.overallGradeWrapper,u=ei.useCallback(()=>{l(!0)},[]),p=ei.useCallback(()=>{t(eO.Nwg.coursePreference.persistCoursePreference(nC,s)).then(()=>{o&&o()})},[s,o,t]),m=`${i}.setup-button`,h=`${i}.hide-message-button`,g=(0,eI.useAnalyticsAugmentEventOnElement)(eI.AnalyticsEventTypes.CLICK_EVENT,()=>np.Nd.goPeekState((0,np.ee)()),m);return ei.createElement("div",{className:`${d} js-overall-grade-setup${r?"-fixed":""}`},ei.createElement(nv,{hidden:a,onClose:u,onHideMessage:p}),ei.createElement("div",{className:c.overallGradeSetupContent},ei.createElement("div",{className:`${c.row}`},ei.createElement("div",{className:c.overallBorder},ei.createElement("div",{className:c.overallGradeImgWrapper},ei.createElement("div",{className:c.overallGradeImage,dangerouslySetInnerHTML:{__html:nS()},"aria-hidden":!0})),ei.createElement("div",null,ei.createElement("h2",{className:`heading ${c.overallGradeSetupHeading}`},n("components.common.overallPanel.title")),ei.createElement("p",{className:c.overallGradeSetupText},n("components.common.overallPanel.text")))),ei.createElement("div",{className:c.buttonWrapper},ei.createElement("button",{onClick:g,type:"button",className:`button ${c.setupOverallBtn} js-overall-grade-setup-button`,"data-analytics-id":m},n("components.common.overallPanel.setupButton")),ei.createElement("button",{className:`button-anchor ${c.hideThisMessageLinkOverride} js-hide-this-message-button`,onClick:()=>l(!1),"data-analytics-id":h,"aria-haspopup":"dialog"},n("components.common.overallPanel.hideThisMessage"))))))},nI=(0,tw.ZL)(()=>(0,tw.kc)({loadingIcon:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}}));var nw=n(188505);let nA=({row:e,isOverallGradeConfigured:t,gradingSchema:n,className:i,overallGradeColumn:r,pillSize:s})=>{let o,a,l,c,d;(null==r?void 0:r.possible)&&((null==n?void 0:n.scaleType)===e$.aQo.Score||(null==n?void 0:n.scaleType)===e$.aQo.Tabular)&&(l=r.possible);let u=()=>{switch(null==n?void 0:n.scaleType){case e$.aQo.Tabular:break;case e$.aQo.Percent:return O.Percentage;case e$.aQo.Score:return O.Points;case e$.aQo.Complete:return O.Complete}return O.Tabular},p=e.overallGrade,m=ei.useRef(null),h=(0,ed.q)();if(!t)return ei.createElement(nw.AnalyticsTooltip,{title:h("gradebook.studentList.table.overallGradeNotSetUpTooltip"),placement:"left-end",analyticsId:"gradebook.student-list.overall-grade-column"},ei.createElement("div",{ref:m},ei.createElement(t$,{variant:O.Tabular,pillSize:s})));if(!p||!n)return n&&n.scaleType===e$.aQo.Score?ei.createElement(t$,{variant:O.Points,pointsPossible:r&&r.possible,pillSize:s}):ei.createElement(t$,{variant:u(),pillSize:s});if(null==p?void 0:p.displayGrade){null!==p.manualGrade&&(l=p.pointsPossible);let e=p.displayGrade,t=e.isOverride;t&&(d=N.Grey),t&&e.perfCode?(o=e.perfCode.code,c=O.Tabular):(null==n?void 0:n.scaleType)===e$.aQo.Complete?(c=O.Complete,o=e.grade,a=e.score):e.grade&&void 0!==e.score?(c=O.Tabular,o=e.grade,a=e.score):void 0!==e.score?e.requiresSchemaKnowledgeToDisplay?(c=O.Percentage,a=e.score,l=100):(c=O.Points,a=parseFloat(tY(e.score))):c=u()}return ei.createElement("div",{className:i},ei.createElement(t$,{grade:a,symbolGrade:o,variant:c,pointsPossible:l,colorOverride:d,pillSize:s}))};var nk=n(579633);let nT=(0,eV.makeStyles)({anchor:{color:"inherit",textDecoration:"inherit",display:"inline-block","&:hover, &:focus, &:active":{color:"inherit",textDecoration:"inherit"}}}),nP=(0,eV.makeStyles)({accommodations:{display:"inline",marginRight:"4px",verticalAlign:"middle","& svg":{height:"16px",width:"16px"}}}),nD=e=>(0,eq.pJ)(t=>e?eO.Ys.courseMembership.getMembershipPermissions(t,e):void 0),nx=e=>{let t=nD(null==e?void 0:e.courseId);return!!e&&!!t&&eO.LPT.hasAccommodations(e,t)};var nR=n(35302);let nL=()=>{let e=nP(),t=(0,ed.q)();return ei.createElement(ej.gid,{className:e.accommodations,titleAccess:t("gradebook.studentList.fullNameComponent.aria.accommodations")})},nN=({row:e,isLink:t})=>{let n=ei.createElement(nR.K6,{user:e.user,format:nk.ILocaleUsernameFormat.Short,ariaHidden:!1}),i=nT(),r=nx(e.membership),s="gradebook.studentListView.fullNameColumn.link",o=(0,eI.useAnalyticsAugmentEventOnElement)(eI.AnalyticsEventTypes.CLICK_EVENT,eI.defaultOnClick,s);return t?ei.createElement("a",{href:"#",className:i.anchor,"data-analytics-id":s,onClick:o},r?ei.createElement(nL,null):null,n):ei.createElement(ei.Fragment,null,r?ei.createElement(nL,null):null,n)},n$=({row:e})=>{let{formatDatetime:t}=(0,eQ.h)();return e.membership.lastAccessDate?ei.createElement(ei.Fragment,null,t(e.membership.lastAccessDate,nk.ILocaleDatetimeFormat.Short)):ei.createElement(ei.Fragment,null,"")};var nO=n(414294),nG=n(346522);let n_=e=>{let{row:t,className:n,courseId:i}=e,{translate:r,formatUsername:s}=(0,eQ.h)(),o=t.membership.permissions.editDueDateException||t.membership.permissions.editTimeLimitException,a=t.membership.isAvailable||void 0===t.membership.isAvailable,l=ei.useCallback(()=>{np.Nd.goPeekState((0,np.k9)({courseId:i,recipientIds:t.user.id}))},[t.user.id,i]),c=ei.useCallback(()=>{np.Nd.goPeekState((0,np.xB)({membershipId:t.membership.id}))},[t.membership.id]),d={items:[...o?[{icon:ei.createElement(nO.e,null),key:"accomodations",name:r("gradebook.studentList.table.actionsMenu.accommodations"),onClick:c}]:[],...a?[{icon:ei.createElement(nG.V,null),key:"messageStudent",name:r("gradebook.studentList.table.actionsMenu.messageStudent"),onClick:l}]:[]]};return o||a?ei.createElement(na.ActionMenu,{analyticsId:"gradebook.studentListView.studentList",ariaLabel:r("gradebook.studentList.table.actionsMenu.moreOptions",{fullName:s(t.user,nk.ILocaleUsernameFormat.Short)}),menuProps:d,className:n}):null},nM=(0,eV.makeStyles)(e=>(0,eV.createStyles)({cell:{backgroundColor:e.palette.common.white,borderTop:"none",paddingTop:"0",paddingBottom:"0"},headerTitle:{display:"inline-flex"},invisibleIcon:{height:"8px",verticalAlign:"middle",color:e.palette.common.black},tooltip:{maxWidth:"175px"},nowrap:{whiteSpace:"nowrap"}})),nB=({analyticsId:e})=>{let t=(0,ed.q)(),n=nM();return ei.createElement(eb.AnalyticsTooltip,{analyticsId:`${e}.tableCell.overallGrade.visibilityInformationTooltip`,classes:{tooltip:n.tooltip},title:t("course.grades.gradeVisibilityTooltip"),placement:"top"},ei.createElement(eb.AnalyticsIconButton,{className:n.invisibleIcon,analyticsId:`${e}.tableCell.overallGrade.visibilityInformationTooltip.button`,"aria-label":t("course.grades.gradeVisibilityIcon")},ei.createElement(eE.Invisible,null)))};(f=H||(H={})).fullName="fullName",f.lastAccessDate="lastAccessDate",f.overallGrade="overallGrade",f.studentId="studentId",f.username="username",f.actionMenu="actionMenu";let nF=H.fullName,nU=(e,t)=>e===H.lastAccessDate?[{field:e$.PJt.LastAccessDate,direction:t}]:e===H.studentId?[{field:e$.PJt.StudentId,direction:t},{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}]:e===H.username?[{field:e$.PJt.Username,direction:t}]:e===H.overallGrade?[{field:e$.PJt.Grade,direction:t},{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}]:[{field:e$.PJt.FamilyName,direction:e===H.fullName?t:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e===H.fullName?t:e$.SrV.Ascending}],nV=e=>({row:t})=>{let n=e(t);return n?ei.createElement(ei.Fragment,null,n):ei.createElement(ei.Fragment,null,"")},nH={[H.fullName]:{largeBreakpointSize:3,key:H.fullName,renderContent:e=>ei.createElement(nN,{...e,isLink:!0}),renderHeader:e=>ei.createElement(ei.Fragment,null,e.t("gradebook.studentList.table.fullName")),sortable:!0},[H.studentId]:{largeBreakpointSize:1,key:H.studentId,renderContent:nV(e=>e.user.studentId),renderHeader:e=>ei.createElement(ei.Fragment,null,e.t("gradebook.studentList.table.studentId")),sortable:!0},[H.username]:{largeBreakpointSize:2,key:H.username,renderContent:nV(e=>e.user.userName),renderHeader:e=>ei.createElement(ei.Fragment,null,e.t("gradebook.studentList.table.username")),sortable:!0},[H.lastAccessDate]:{largeBreakpointSize:4,key:H.lastAccessDate,renderContent:n$,renderHeader:e=>ei.createElement(ei.Fragment,null,e.t("gradebook.studentList.table.lastAccessDate")),sortable:!0},[H.overallGrade]:{largeBreakpointSize:2,key:H.overallGrade,renderContent:nA,renderHeader:e=>ei.createElement(ei.Fragment,null,e.isOverallGradeHidden&&ei.createElement(nB,{analyticsId:e.analyticsId}),e.t("gradebook.studentList.table.overallGrade")),sortable:!1},[H.actionMenu]:{largeBreakpointSize:1,key:H.actionMenu,renderContent:e=>ei.createElement("div",{onClick:e=>e.stopPropagation()},ei.createElement(n_,{row:e.row,courseId:e.courseId})),renderHeader:()=>ei.createElement("span",null),hideHeaderText:!0,sortable:!1}},nq=[H.fullName,H.studentId,H.username,H.lastAccessDate,H.overallGrade,H.actionMenu],nj=(e,t)=>e.map(e=>(nH[e].key===H.overallGrade&&(nH[e].sortable=t),nH[e])),nz=(e,t)=>e.filter(e=>e.key!==H.overallGrade||t),nW=[{label:"25",value:"25"},{label:"50",value:"50"},{label:"100",value:"100"}],nK=nW.map(e=>Number(e.value)),nZ=e=>0>nK.indexOf(Number(e))?{value:"25",label:"25"}:{value:`${e}`,label:`${e}`},nQ=(0,eV.makeStyles)(e=>(0,eV.createStyles)({fullNameCell:{fontWeight:e.typography.fontWeightSemiBold}})),nJ=(e,t,n)=>e===H.fullName?`${t.fullNameCell} ${n}`:"",nY=({analyticsId:e,column:t,colIndex:n,data:i,isOverallGradeConfigured:r,hoverClass:s,courseId:o,gradingSchema:a,overallGradeColumn:l})=>{let c=nQ(),d=nJ(t.key,c,s);return ei.createElement(eb.AnalyticsTableCell,{"aria-colindex":n,"aria-describedby":`studentListTable_header_${t.key}`,analyticsId:`${e}.tableCell.${t.key}`,className:`js-student-list-view-table-body-cell ${d}`,tabIndex:-1},ei.createElement(t.renderContent,{row:i,isOverallGradeConfigured:r,courseId:o,gradingSchema:a,overallGradeColumn:l}))},nX=(0,eV.makeStyles)(e=>(0,eV.createStyles)({hoverTarget:{},tableRow:{"&:hover":{backgroundColor:e.palette.background.b3,cursor:"pointer","& $hoverTarget":{textDecoration:"underline"}}},disabled:{cursor:"default","&:hover":{textDecoration:"none",cursor:"default"},"& a:hover":{cursor:"default"}}})),n0=({data:e,courseId:t,analyticsId:n,isOverallGradeConfigured:i,columns:r,rowIndex:s,gradingSchema:o,overallGradeColumn:a,isDisabled:l})=>{var c,d,u;let p=nX(),m=ei.useCallback(()=>{var n,i;np.Nd.goPeekState((0,np.gO)({courseId:t,userId:null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.id,membershipId:null===(i=null==e?void 0:e.membership)||void 0===i?void 0:i.id}))},[t,null===(c=null==e?void 0:e.user)||void 0===c?void 0:c.id,null===(d=null==e?void 0:e.membership)||void 0===d?void 0:d.id]),h=ei.useMemo(()=>nz(r,i),[r,i]);return ei.createElement(eb.AnalyticsTableRow,{"aria-rowindex":s,analyticsId:`${n}.tableRow`,className:(0,eX.Z)("js-student-list-view-body-row",p.tableRow,l?p.disabled:""),key:null===(u=null==e?void 0:e.user)||void 0===u?void 0:u.id,onClick:l?void 0:m},h.map((r,s)=>ei.createElement(nY,{colIndex:s+1,analyticsId:n,data:e,column:r,key:r.key,isOverallGradeConfigured:i,hoverClass:p.hoverTarget,courseId:t,gradingSchema:o,overallGradeColumn:a})))},n1=({analyticsId:e,bodyData:t,columns:n,isDataLoading:i,courseId:r,isOverallGradeConfigured:s,gradingSchema:o,overallGradeColumn:a,isDisabled:l})=>{let c=nI(),d=(0,ed.q)();return ei.createElement(eb.AnalyticsTableBody,{analyticsId:`${e}.tableBody`,className:"js-student-list-view-body"},i?ei.createElement(eb.AnalyticsTableRow,{analyticsId:`${e}.loadingIcon.tableRow.container`},ei.createElement(eb.AnalyticsTableCell,{analyticsId:`${e}.loadingIcon.tableCell.container`,colSpan:n.length},ei.createElement("div",{className:c.loadingIcon},ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:d("components.studentListView.loadingIconAriaLabel"),size:"large"})))):t.map((t,i)=>{var c;return ei.createElement(n0,{rowIndex:i+1,data:t,key:null===(c=t.user)||void 0===c?void 0:c.id,courseId:r,isOverallGradeConfigured:s,analyticsId:e,columns:n,gradingSchema:o,overallGradeColumn:a,isDisabled:l})}))},n2=({analyticsId:e,column:t,isOverallGradeHidden:n})=>{let i=(0,ed.q)(),r=nM(),s=t.key===H.studentId,o=`${e}.tableCell.${t.key}`;return t.sortable?ei.createElement(eb.AnalyticsSortableTableHeaderCell,{id:`studentListTable_header_${t.key}`,analyticsId:o,columnId:t.key,tableCellProps:{className:`js-student-list-view-table-header-cell js-student-list-view-table-header-cell-${t.key} large-${t.largeBreakpointSize} ${r.cell}${s?` ${r.nowrap}`:""}`}},ei.createElement(t.renderHeader,{t:i,analyticsId:e,isOverallGradeHidden:n})):ei.createElement(eb.AnalyticsTableCell,{analyticsId:o,className:`js-student-list-view-table-header-cell js-student-list-view-table-header-cell-${t.key} large-${t.largeBreakpointSize} ${r.cell}${s?` ${r.nowrap}`:""}`,tabIndex:-1},ei.createElement(t.renderHeader,{t:i,analyticsId:e,isOverallGradeHidden:n}))},n4=(0,eV.makeStyles)({row:{height:"40px"}}),n6=({analyticsId:e,columns:t,isOverallGradeHidden:n,isOverallGradeConfigured:i})=>{let r=n4(),s=ei.useMemo(()=>nz(t,i),[t,i]);return ei.createElement(eb.AnalyticsTableHead,{analyticsId:`${e}.tableHead`,className:"js-student-list-view-header"},ei.createElement(eb.AnalyticsTableRow,{analyticsId:`${e}.tableRow`,className:`js-student-list-view-header-row ${r.row}`},s.map(t=>ei.createElement(n2,{analyticsId:e,column:t,key:`studentListView.tableHeaderCell.${t.key}`,isOverallGradeHidden:n}))))},n5=e=>{let{analyticsId:t,isLoading:n,bodyData:i,columnData:r,courseId:s,isOverallGradeConfigured:o,isOverallGradeHidden:a,gradingSchema:l,onSortChanged:c,overallGradeColumn:d}=e,u=(0,ed.q)(),p=ei.useCallback(e=>(c&&c(e.sortColumnId,e.sortDirection),!0),[c]),m=ei.useCallback((e,t)=>{let n=u(`gradebook.studentList.table.${e}`);return u(`components.studentListTable.ariaSortMessage.${t}`,{columnName:n})},[u]),h=(0,eq.pJ)(e=>eO.Ys.courseEntitlements.userHasCourseEntitlement(e,s,_.ViewException)),g=(0,eq.pJ)(e=>eO.Ys.courseEntitlements.userHasCourseEntitlement(e,s,_.AssessmentViewException));return ei.createElement(eb.AnalyticsTableContainer,{analyticsId:`${t}.container`},ei.createElement(eb.AnalyticsSortableTable,{id:"student-list-view_table",analyticsId:`${t}.table`,tableProps:{className:"js-student-list-view-table"},getAriaSortMessage:m,onSortChanged:p,initialSortColumnId:nF,initialSortDirection:"asc"},ei.createElement(n6,{analyticsId:`${t}.table`,columns:r,isOverallGradeHidden:a,isOverallGradeConfigured:o}),ei.createElement(n1,{analyticsId:`${t}.table`,bodyData:i,columns:r,isDataLoading:n,courseId:s,isOverallGradeConfigured:o,gradingSchema:l,overallGradeColumn:d,isDisabled:!(h&&g)})))},n3=e=>(0,eq.pJ)(t=>eO.Ys.gradebookColumn.getGradebookColumnsByCourseId(t,e)),n8=e=>{let t=(0,eq.Lx)();return(0,ei.useEffect)(()=>{t(eO.Nwg.gradebookColumn.loadGradebookColumnsByCourseId(e))},[t,e]),n3(e).filter(e=>e.externalGrade)[0]},n9=(0,eV.makeStyles)(e=>(0,eV.createStyles)({loadingIcon:{display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"center"},firstStudentCard:{borderTop:`1px solid ${e.palette.border.main}`},overallGradeInfo:{paddingBottom:"16px",fontStyle:"italic"},infoIcon:{verticalAlign:"middle",marginRight:"8px"}}));var n7=n(173475),ie=n(456412);let it=(0,eV.makeStyles)(e=>(0,eV.createStyles)({smallBreakpointGradePill:{marginTop:"14px"},cardRoot:{"&:hover":{backgroundColor:e.palette.background.b3},"&:hover a $smallBreakpointUserName":{textDecoration:"underline"},borderStyle:"none none solid none",borderBottom:`1px solid ${e.palette.border.main}`},cardContent:{display:"flex"},smallBreakpointUserName:{fontWeight:e.typography.fontWeightSemiBold},smallBreakpointStudentId:{marginBottom:"8px"},cardLink:{"&:hover, &:active, &:focus":{color:"inherit",textDecoration:"inherit"},color:"inherit",textDecoration:"inherit",width:"100%"},smallBreakpointActionMenu:{alignSelf:"flex-end",position:"absolute",right:"0px"}})),ii=e=>{let[t,n]=(0,ei.useState)("#");return(0,ei.useEffect)(()=>{np.Nd.getPeekHref((0,np.gO)(e)).then(e=>{n(e)})},[e]),t};var ir=n(810920);let is=e=>{var t;let{data:n,isOverallGradeConfigured:i,gradingSchema:r,classes:s,overallGradeColumn:o}=e,a=(0,ed.q)();return ei.createElement(ei.Fragment,null,ei.createElement("div",{className:`${s.smallBreakpointUserName}`},ei.createElement(nN,{row:n})),(null===(t=n.user)||void 0===t?void 0:t.studentId)&&ei.createElement("div",{className:s.smallBreakpointStudentId},n.user.studentId),n.membership.lastAccessDate&&ei.createElement("div",null,a("gradebook.studentList.card.lastAccessedOn",{lastAccessDateControl:ei.createElement(n$,{row:n})})),i&&ei.createElement(nA,{row:n,className:s.smallBreakpointGradePill,isOverallGradeConfigured:i,gradingSchema:r,overallGradeColumn:o}))},io=(0,eI.withAnalytics)(e=>{var t,n;let{analyticsId:i,data:r,courseId:s,isOverallGradeConfigured:o,gradingSchema:a,analyticsEventAugmentor:l,overallGradeColumn:c}=e,d=it(),u=ii({courseId:s,userId:null===(t=null==r?void 0:r.user)||void 0===t?void 0:t.id,membershipId:null===(n=null==r?void 0:r.membership)||void 0===n?void 0:n.id}),p="gradebook.studentListView.studentCard.link";return ei.createElement(n7.B,{analyticsId:`${i}.card`,className:d.cardRoot},ei.createElement(ie.P,{analyticsId:`${i}.cardContent`,className:d.cardContent},ei.createElement("a",{className:d.cardLink,href:u,"data-analytics-id":p,onClick:l(ir.U.CLICK_EVENT,eI.defaultOnClick,p)},ei.createElement(is,{data:r,isOverallGradeConfigured:o,gradingSchema:a,classes:d,overallGradeColumn:c})),ei.createElement(n_,{row:r,className:d.smallBreakpointActionMenu,courseId:s})))}),ia=e=>{let{analyticsId:t,bodyData:n,isLoading:i,courseId:r,isOverallGradeConfigured:s,isOverallGradeHidden:o,gradingSchema:a,overallGradeColumn:l}=e,c=n9(),d=(0,ed.q)();return i?ei.createElement("div",{className:c.loadingIcon},ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:d("components.studentListView.loadingIconAriaLabel"),size:"large"})):ei.createElement(ei.Fragment,null,o&&ei.createElement("div",{className:c.overallGradeInfo},ei.createElement(eE.Information,{className:c.infoIcon}),ei.createElement("span",null,d("course.grades.gradeVisibilityTooltip"))),n.map((e,n)=>ei.createElement("div",{className:0===n?c.firstStudentCard:"",key:n},ei.createElement(io,{key:e.user.userName,analyticsId:t,data:e,courseId:r,isOverallGradeConfigured:s,gradingSchema:a,overallGradeColumn:l}))))},il=(0,eV.makeStyles)(e=>(0,eV.createStyles)({pageInfo:{display:"inline-flex",margin:"14px 16px 13px 0",alignItems:"center",fontWeight:e.typography.fontWeightBold},pageInfoSmall:{textAlign:"center",marginTop:"8px",fontWeight:e.typography.fontWeightBold},pageSize:{display:"inline-flex",margin:"14px 0 13px 0",alignItems:"center"},searchTextControl:{[e.breakpoints.up("md")]:{width:"340px"},width:"100%",margin:"14px 0 13px 0"},smallIconButton:{minWidth:"26px",maxHeight:"40px"},tableHeader:{display:"inline-flex",justifyContent:"space-between",width:"100%",flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row"}},searchTooltipWrapper:{display:"flex",alignItems:"center"},pagingOptions:{display:"inline-flex",flexDirection:"row",marginBottom:"13px",justifyContent:"center",[e.breakpoints.up("md")]:{justifyContent:"flex-start",marginBottom:"0px"},"& .paging-component-button":{boxSizing:"border-box"}},pagingControl:{paddingTop:"35px","& .paging-component":{[e.breakpoints.up("sm")]:{justifyContent:"flex-end"},"& .paging-component-button":{boxSizing:"border-box"}}}})),ic=e=>{let t=(0,eq.Lx)();return(0,ei.useEffect)(()=>{t(eO.Nwg.course.fetchCourse(e))},[t,e]),(0,eq.pJ)(t=>eO.Ys.course.getCourseById(t,e))},id=e=>{let t=ic(e),n=(null==t?void 0:t.isAvailable)===!0&&(null==t?void 0:t.isClosed)===!0;return(0,eq.bW)(e,"course.gradebook.MODIFY")&&t&&!n},iu=e=>{let t=(0,eq.Lx)();return(0,ei.useEffect)(()=>{t(eO.Nwg.gradebookColumn.loadGradebookColumnsByCourseId(e))},[t,e]),n3(e).length>0},ip=(e,t)=>{let n=()=>void 0===e?void 0:window.localStorage.getItem(e)||t,[i,r]=(0,ei.useState)(n());return(0,ei.useEffect)(()=>{r(n())},[e]),[i,t=>{void 0!==e&&(window.localStorage.setItem(e,t),r(t))}]},im=(e,t)=>{let[n,i]=ei.useState(0),[r,s]=ip(`${e}.studentListViewPageSize`,nW[0].value),o=t?25:Number(r),a=ei.useRef(t);return ei.useEffect(()=>{a.current!==t&&(a.current=t,i(Math.floor((t?Number(r):25)*n/o)))},[t,r,n,o]),{effectiveItemsPerPage:o,page:n,setPage:i,itemsPerPage:String(r),setItemsPerPage:s}},ih=(e,t)=>{let n=(0,eq.Lx)(),i=(0,eq.pJ)(e=>eO.Ys.gradebookSchema.areGradebookSchemasLoading(e)),r=(0,eq.pJ)(e=>eO.Ys.gradebookSchema.getGradebookSchemaById(e,t));return(0,ei.useEffect)(()=>{e&&t&&!r&&!i&&n(eO.Nwg.gradebookSchema.loadGradebookSchema({courseId:e,schemaId:t}))},[n,e,t,r,i]),r},ig=(e,t)=>Math.max(1,Math.ceil(e/t)),ib=e=>{var t,n,i,r,s,o,a;let l;let{analyticsId:c,courseId:d,currentUserId:u}=e,p=(0,ed.q)(),m=il((0,tw.Fg)()),h=(0,tw.Fg)(),g=(0,tw.ac)(h.breakpoints.down("xs")),{page:f,setPage:b,itemsPerPage:v,setItemsPerPage:y,effectiveItemsPerPage:S}=im(u,g),[C,E]=ei.useState(""),[I,w]=ei.useState(),[A,k]=ei.useState(),[T,P]=ei.useState(!1),D=ei.useRef(),x=nU(I,A),R=n8(d),L=(0,eq.ye)(eO.x40.OverallGradeSorting),{memberships:N,users:$,view:O}=(0,eq.d$)({courseId:d,filter:{searchString:C,roleBucket:[e$.O8v.Taking]},paging:{limit:S,offset:f*S},sort:x,columnId:I===H.overallGrade?null==R?void 0:R.id:void 0}),G=(0,eq.yH)(nC.key,d),_=iu(d),M=(0,eq.vr)(d,null==R?void 0:R.id,N),B=id(d)&&_&&!R&&(null==G?void 0:G.value)!=="true",F=ih(d,null==R?void 0:R.gradingSchemaId),U=ei.useCallback((0,eJ.debounce)(e=>{b(0),E(e)},250),[]),V=ei.useCallback(e=>{b(0),y(e.toString())},[b,y]),q=N.map(e=>({user:$[e.userId],membership:e,overallGrade:M&&M[e.userId]})),j=ei.useCallback((e,t)=>{w(e),k(t)},[]),z=nj(nq,L),W=!(null===(t=null==R?void 0:R.visible)||void 0===t||t),K=p(`gradebook.studentList.common.search.${g?"short":"long"}`),Z=null!==(i=null===(n=null==O?void 0:O.paging)||void 0===n?void 0:n.count)&&void 0!==i?i:0,Q=Number.isInteger(null===(r=null==O?void 0:O.paging)||void 0===r?void 0:r.offset)?O.paging.offset+1:0,J=Number.isInteger(null===(s=null==O?void 0:O.paging)||void 0===s?void 0:s.offset)?O.paging.offset+q.length:0,Y="student-list-filter-tooltip";l=R?(null==O?void 0:O.isLoading)||!W&&!F:null==O?void 0:O.isLoading;let X=ei.useCallback(()=>{P(!0)},[]),ee=ei.useCallback(()=>{P(!1)},[]);return ei.useEffect(()=>{let e=D.current;return e&&(e.addEventListener("focus",X),e.addEventListener("blur",ee)),()=>{e&&(e.removeEventListener("focus",X),e.removeEventListener("blur",ee))}},[X,ee]),ei.createElement(ei.Fragment,null,ei.createElement("div",{className:m.tableHeader},ei.createElement("div",{className:m.searchTooltipWrapper},ei.createElement(ej._Wk,{inputId:"student-list-filter-input",analyticsId:`${c}.filter.input`,inputRef:D,label:p("gradebook.studentList.common.search.abbreviated"),InputProps:{inputProps:{"aria-describedby":Y}},TextFieldProps:{fullWidth:!1,className:m.searchTextControl},onChange:U}),ei.createElement(eb.AnalyticsTooltip,{id:Y,analyticsId:`${c}.filter.tooltip`,open:T,placement:"top-start",onOpen:X,onClose:ee,title:K},ei.createElement(eb.AnalyticsIconButton,{id:"student-list-filter-tooltip-iconButton",analyticsId:`${c}.filter.tooltip.iconButton`,className:m.smallIconButton,"aria-label":p("gradebook.studentList.common.search.tooltipAriaLabel")},ei.createElement(eE.Information,null)))),ei.createElement("div",{className:m.pagingOptions},!g&&ei.createElement(ei.Fragment,null,!l&&ei.createElement(ej.yZw,{className:m.pageInfo,totalItems:Z,rangeStart:Q,rangeEnd:J}),ei.createElement(ej.Y03,{className:m.pageSize,pageSizeOptions:nW.map(({value:e})=>Number(e)),initialPageSize:nZ(v).value,onPageSizeChange:V,analyticsId:c})),(null==O?void 0:O.paging)&&ei.createElement(ej.Vdz,{page:f,className:"paging-component",compact:g,numberOfPages:ig(null===(o=null==O?void 0:O.paging)||void 0===o?void 0:o.count,S),onPageChange:b,analyticsId:c}))),g&&ei.createElement(ia,{analyticsId:c,bodyData:q,isLoading:l,isOverallGradeConfigured:!!R,isOverallGradeHidden:W,courseId:d,gradingSchema:F,overallGradeColumn:R}),!g&&ei.createElement(n5,{analyticsId:c,columnData:z,bodyData:q,isLoading:l,isOverallGradeConfigured:!!R,isOverallGradeHidden:W,courseId:d,onSortChanged:j,gradingSchema:F,overallGradeColumn:R}),(null==O?void 0:O.paging)&&ei.createElement("div",{className:m.pagingControl},ei.createElement(ej.Vdz,{className:"paging-component",compact:g,page:f,numberOfPages:ig(null===(a=null==O?void 0:O.paging)||void 0===a?void 0:a.count,S),onPageChange:b,analyticsId:c}),g&&!l&&ei.createElement(ej.yZw,{className:m.pageInfoSmall,totalItems:Z,rangeStart:Q,rangeEnd:J})),B&&ei.createElement(nE,{analyticsId:`${c}.overallGradeSetup`,showFixedView:!1,courseId:d}))},iv=(0,eV.makeStyles)(()=>(0,eV.createStyles)({panelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}}})),iy=e=>{let{analyticsId:t,onClickApply:n,onClickCancel:i,isFiltersPanelDirty:r}=e,s=iv(),o=(0,ed.q)();return ei.createElement("div",{className:s.panelFooter},ei.createElement(em.BbPanelFooter,{primaryButtonProps:{text:o("gradebook.gridFiltersPanel.footer.apply"),onClick:n,disabled:!r},secondaryButtonProps:{text:o("gradebook.gridFiltersPanel.footer.cancel"),onClick:i},analyticsId:t}))},iS=(0,eV.makeStyles)(()=>(0,eV.createStyles)({header:{"& .ms-Panel-header":{boxShadow:"none"}},body:{marginTop:"24px",marginBottom:"48px"},clearFilters:{marginBottom:"8px",height:"29px"},filter:{marginBottom:"16px"}})),iC=e=>{let{inputId:t,analyticsId:n,courseId:i,onSelectionChange:r}=e,s=(0,ed.q)(),o=e.selectedMembershipIds||[],a=o.join(""),l=(0,eq.pJ)(e=>eO.Ys.courseMembership.getUsersFromMembershipIds(e,o).map(e=>null==e?void 0:e.id)),[c,d]=(0,ei.useState)(l),u=(0,eq.pJ)(e=>eO.Ys.courseMembership.getCourseMembershipsByUserIds(e,i,c).map(e=>null==e?void 0:e.id)),p=u.join(""),m=(0,eq.pJ)(e=>eO.Ys.courseMembership.getUsersFromMembershipIds(e,u)),[h,g]=(0,ei.useState)(!1),f=(0,ei.useCallback)(e=>{g(!0),d(e.map(e=>null==e?void 0:e.id))},[d]);(0,ei.useEffect)(()=>{h&&p!==a&&r(u),g(!1)},[p,a,h]),(0,ei.useEffect)(()=>{d(l)},[l.join(""),c.join("")]);let b={inputId:t,analyticsId:n,courseId:i,placeholder:s("gradebook.gridFiltersPanel.memberships.placeholder"),selectedUsers:m,onMemberSelectionChanged:f,selectionLimit:100,label:s("gradebook.gridFiltersPanel.memberships.label"),roleBuckets:[e$.O8v.Taking]};return c.some(e=>!e)?ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:s("gradebook.gridFiltersPanel.memberships.loading"),size:"small"}):ei.createElement(nR.JD,{...b})},iE=e=>{let{inputId:t,courseId:n,analyticsId:i,onSelectionChange:r,selectedGroupIds:s}=e,o=(0,ed.q)(),a=(0,ei.useCallback)(e=>{r(e.map(e=>e.id))},[r]),l=(0,eq.pJ)(e=>eO.Ys.group.getCourseGroupsByIds(e,s));return l.some(e=>!e)?ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:o("gradebook.gridFiltersPanel.groups.loading"),size:"small"}):ei.createElement(nR.j4,{inputId:t,label:o("gradebook.gridFiltersPanel.groups.label"),courseId:n,analyticsId:i,placeholder:o("gradebook.gridFiltersPanel.groups.placeholder"),selectionLimit:100,selectedGroups:l,onSelectedGroupsChanged:a})};var iI=n(195540);(b=q||(q={})).Formative="formative",b.Summative="summative";let iw=(e,t)=>{let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n},iA=e=>{let t=(0,ej.lZB)(),{selectedAssessmentTypes:n,onSelectionChange:i,analyticsId:r}=e,s=(0,ed.q)(),o=(0,ei.useCallback)((e,t)=>{i(iw(n,e.target.value))},[n,i]);return ei.createElement(iI.c,{legendText:s("gradebook.gridFiltersPanel.assessmentTypes.title"),legendVariant:"h4"},Object.values(q).map(e=>ei.createElement(eb.AnalyticsFormControlLabel,{label:s(`gradebook.gridFiltersPanel.assessmentTypes.types.${e}`),className:t.checkboxMarginFix,htmlFor:e,control:ei.createElement(eb.AnalyticsCheckbox,{id:e,value:e,checked:n.includes(e),analyticsId:`${r}.pickAssessmentTypeCheckbox.${e}`,onChange:o}),analyticsId:`${r}.pickAssessmentTypeLabel.${e}`,key:e})))},ik=(e,t)=>{if(e.localizableTitle){let n=e.localizableTitle.languageKey.toLowerCase();return t(`categories.${n}`)}return e.title},iT=/-/g,iP=(e,t,n)=>e&&e.sort((e,i)=>{var r;let s=ik(e,t),o=ik(i,t),a=(null===(r=null==n?void 0:n.match(iT))||void 0===r?void 0:r.length)>1?n.split("-",2).join("-"):n;return s.localeCompare(o,a)}),iD=e=>{let t=(0,ej.lZB)(),{categories:n,selectedCategoryIds:i,onSelectionChange:r,analyticsId:s}=e,{translate:o,locale:a}=(0,eQ.h)(),l=iP(n,o,a),c=(e,t)=>{let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n},d=(0,ei.useCallback)(e=>{r(c(i,e.target.value))},[i,r]);return ei.createElement(iI.c,{legendText:o("gradebook.gridFiltersPanel.categoriesTitle"),legendVariant:"h4"},l.map(e=>ei.createElement(eb.AnalyticsFormControlLabel,{label:ik(e,o),className:t.checkboxMarginFix,htmlFor:e.id,control:ei.createElement(eb.AnalyticsCheckbox,{id:e.id,value:e.id,checked:i.includes(e.id),analyticsId:`${s}.pickCategoryCheckbox.${e.id}`}),analyticsId:`${s}.pickCategoryLabel.${e.id}`,key:e.id,onChange:d})))},ix=e=>{let t=(0,eq.Lx)(),n=(0,eq.pJ)(t=>eO.Ys.gradebookCategory.getGradebookCategoriesByCourseId(t,e));return(0,ei.useEffect)(()=>{n||t(eO.Nwg.gradebookCategory.loadGradebookCategoriesByCourseId(e))},[t,e,n]),n},iR=e=>{let[t,n]=(0,ei.useState)(!1),i=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params);return(0,ei.useEffect)(()=>{var t;let{selectedMembershipIds:r,selectedGroupIds:s,selectedCourses:o,selectedAssessmentTypes:a,selectedCategoryIds:l,selectedColumnIds:c}=e,d=i.memberId?i.memberId!==(null==r?void 0:r.join(",")):(null==r?void 0:r.length)>0,u=i.courseGroupId?i.courseGroupId!==(null==s?void 0:s.join(",")):(null==s?void 0:s.length)>0,p=i.childCourseId?i.childCourseId!==(null==o?void 0:o.join(",")):(null==o?void 0:o.length)>0,m=i.gradebookAssessmentType?i.gradebookAssessmentType!==(null==a?void 0:a.join(",")):(null==a?void 0:a.length)>0,h=i.gradebookCategoryId?i.gradebookCategoryId!==(null==l?void 0:l.join(",")):(null==l?void 0:l.length)>0,g=i.gradebookColumnId?i.gradebookColumnId!==(null==c?void 0:c.join(",")):(null!==(t=null==c?void 0:c.length)&&void 0!==t?t:0)>0;n(d||u||p||m||h||g)},[i.memberId,i.courseGroupId,i.childCourseId,i.gradebookAssessmentType,i.gradebookCategoryId,i.gradebookColumnId,e,e.selectedMembershipIds,e.selectedGroupIds,e.selectedCourses,e.selectedAssessmentTypes,e.selectedCategoryIds,e.selectedColumnIds]),t},iL=(0,eV.makeStyles)(e=>(0,eV.createStyles)({dialogTitle:{"& h1":{fontFamily:e.typography.fontFamily}}})),iN=e=>{let{showConfirmationModal:t,analyticsId:n,handleOnClose:i,handleOnConfirmation:r}=e,s=(0,ed.q)(),o="cancel-grid-advanced-filters",a=iL(e);return ei.createElement(eu._X,{analyticsId:n,open:t,maxWidth:"md",onClose:i,"aria-labelledby":`${o}-dialog-title`},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${n}.titleClose.button`,id:`${o}-dialog-title`,onClick:i,className:a.dialogTitle},s("gradebook.gridFiltersPanel.confirmationDialog.title")),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${n}.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:"",id:`${o}-dialog-description`},s("gradebook.gridFiltersPanel.confirmationDialog.content"))),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${n}.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${n}.close.button`,onClick:i},s("gradebook.gridFiltersPanel.confirmationDialog.cancel")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${n}.confirmation.button`,onClick:r},s("gradebook.gridFiltersPanel.confirmationDialog.confirmation"))))},i$=e=>{let{inputId:t,analyticsId:n,courseId:i,onSelectionChange:r,selectedColumnsIds:s}=e,o=(0,ed.q)(),a=(0,eq.pJ)(e=>{let t=eO.Ys.gradebookColumn.getGradebookColumnsByIds(e,s);return Object.keys(t).map(e=>t[e])}),l=(0,ei.useCallback)(e=>{r(e.map(e=>e.id))},[r]);return a.some(e=>!e)?ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:o("gradebook.gridFiltersPanel.gradebookColumns.loading"),size:"small"}):ei.createElement(nR.Ad,{inputId:t,analyticsId:`${n}.pickColumns`,courseId:i,onColumnSelectionChange:l,selectedColumns:a,selectionLimit:100,label:o("gradebook.gridFiltersPanel.gradebookColumns.label"),placeholder:o("gradebook.gridFiltersPanel.gradebookColumns.placeholder"),allowAnonymousGrading:!0,allowCalculatedColumns:!0})},iO=(0,eV.makeStyles)(e=>(0,eV.createStyles)({choiceLabel:{marginLeft:"-8px"},paragraph:{color:e.palette.text.secondary,marginBottom:"12px",fontStyle:"italic",fontWeight:e.typography.fontWeightRegular},divider:{border:"1px solid",borderColor:e.palette.secondary.main,margin:"16px 0px 0px 0px",height:"0px"}}));var iG=n(140172);let i_=e=>{let t=(0,eq.pJ)(t=>eO.Ys.courseChildren.byParentCourseId(t,e)),n=(0,eq.Lx)();return ei.useEffect(()=>{t||n(eO.Nwg.courseChildren.loadChildCourses(e))},[n,e,t]),t},iM=e=>{let t=iO(),{courseId:n,selectedChildCourseIds:i,onSelectionChanged:r,analyticsId:s}=e,o=i_(n),a=(0,ed.q)(),l=(0,ei.useCallback)(e=>{r(function(e,t){let n=[...e],i=n.indexOf(t);return -1!==i?n.splice(i,1):n.push(t),n}(i,e.target.value))},[i,r]);return ei.createElement(ei.Fragment,null,(null==o?void 0:o.length)>0&&ei.createElement(eV.CheckboxGroup,{legendText:a("gradebook.gridFiltersPanel.mergedCourses.label"),legendVariant:"h4"},ei.createElement(eb.AnalyticsTypography,{className:t.paragraph,variant:"subtitle2"},a("gradebook.gridFiltersPanel.mergedCourses.guide")),o.map((e,n)=>ei.createElement(eb.AnalyticsFormControlLabel,{label:e.childCourse.name,className:t.choiceLabel,htmlFor:`standard-checkbox-${e.childCourse.id}`,control:ei.createElement(eb.AnalyticsCheckbox,{id:`standard-checkbox-${e.childCourse.id}`,checked:i.includes(e.childCourse.id),value:e.childCourse.id,onChange:l,analyticsId:`${s}.pickMergedCourse.Checkbox.${e.childCourse.id}`}),analyticsId:`${s}.pickMergedCourse.${n}`,key:e.childCourse.id})),ei.createElement(iG.i,{className:`${t.divider}`,variant:"middle"})))},iB=e=>{var t,n,i,r,s,o,a,l,c,d,u,p;let{courseId:m,onFiltersChanged:h,analyticsId:g}=e,f=iS(),b=(0,ed.q)(),v=(0,eq.ye)(eO.x40.FormativeAssessment),[y,S]=ei.useState(!1),C=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams),E=null!==(n=null===(t=null==C?void 0:C.memberId)||void 0===t?void 0:t.split(","))&&void 0!==n?n:[],I=null!==(r=null===(i=null==C?void 0:C.courseGroupId)||void 0===i?void 0:i.split(","))&&void 0!==r?r:[],w=null!==(o=null===(s=null==C?void 0:C.gradebookColumnId)||void 0===s?void 0:s.split(","))&&void 0!==o?o:[],A=null!==(l=null===(a=null==C?void 0:C.gradebookAssessmentType)||void 0===a?void 0:a.split(","))&&void 0!==l?l:[],k=null!==(d=null===(c=null==C?void 0:C.gradebookCategoryId)||void 0===c?void 0:c.split(","))&&void 0!==d?d:[],T=null!==(p=null===(u=null==C?void 0:C.childCourseId)||void 0===u?void 0:u.split(","))&&void 0!==p?p:[],[P,D]=(0,ei.useState)(E),[x,R]=(0,ei.useState)(T),[L,N]=(0,ei.useState)(w),[$,O]=(0,ei.useState)(A),[G,M]=(0,ei.useState)(k),[B,F]=(0,ei.useState)(I),[U,V]=(0,ei.useState)(!1),H=ix(m),q=iR({selectedMembershipIds:P,selectedGroupIds:B,selectedCourses:x,selectedAssessmentTypes:$,selectedCategoryIds:G,selectedColumnIds:L}),j=(0,eq.bW)(m,_.ViewChildCourse);(0,ei.useEffect)(()=>{h(q)},[q]);let z=(0,ei.useCallback)(()=>{let e={...C,memberId:void 0,childCourseId:void 0,gradebookAssessmentType:void 0,gradebookCategoryId:void 0,gradebookColumnId:void 0,courseGroupId:void 0};P.length>0&&(e.memberId=P.join(",")),x.length>0&&(e.childCourseId=x.join(",")),$.length>0&&(e.gradebookAssessmentType=$.join(",")),G.length>0&&(e.gradebookCategoryId=G.join(",")),L.length>0&&(e.gradebookColumnId=L.join(",")),B.length>0&&(e.courseGroupId=B.join(",")),np.Nd.search(e),h(!1),np.Nd.leavePeekState()},[$,G,B,P,x,L]),W=(0,ei.useCallback)(()=>{P.length>0&&D([]),x.length>0&&R([]),$.length>0&&O([]),G.length>0&&M([]),L.length>0&&N([]),B.length>0&&F([]),V(!1),h(!0)},[h,$,G,B,P,x,L]),K=(0,ei.useCallback)(()=>{h(!1),S(!1),np.Nd.leavePeekState()},[h]),Z=(0,ei.useCallback)(()=>{q?S(!0):(h(!1),np.Nd.leavePeekState())},[q,h]);(0,ei.useEffect)(()=>{V(P.length>0||x.length>0||L.length>0||$.length>0||G.length>0||B.length>0)},[$,G,B,P,x,L]);let Q=b("gradebook.gridFiltersPanel.header.clearAll");return ei.createElement("div",{className:"grid-filters-panel"},y&&ei.createElement(iN,{analyticsId:`${g}.cancel`,showConfirmationModal:y,handleOnClose:()=>S(!1),handleOnConfirmation:K}),ei.createElement("div",{className:"panel-wrap"},ei.createElement("div",{className:`panel-header simple-header ${f.header}`},ei.createElement(em.BbPanelHeader,{title:b("gradebook.gridFiltersPanel.header.title"),smallHeaderTitle:b("gradebook.gridFiltersPanel.header.smallTitle"),type:em.BbPanelType.peek,analyticsId:`${g}.header`,hideNavMenu:!0,panelContentRight:U?ei.createElement(eb.AnalyticsLink,{className:f.clearFilters,"aria-label":Q,variant:"button",tabIndex:0,href:"#",analyticsId:`${g}.clearAllFilters`,onClick:W},Q):null})),ei.createElement("div",{className:`panel-body panel-content ${f.body}`},j&&ei.createElement("div",{className:`${f.filter}`},ei.createElement(iM,{courseId:m,analyticsId:`${g}.mergedCoursesPicker`,selectedChildCourseIds:x,onSelectionChanged:R})),ei.createElement("div",{className:`${f.filter}`},ei.createElement(iC,{inputId:"student-picker",courseId:m,selectedMembershipIds:P,onSelectionChange:D,analyticsId:`${g}.membershipsPicker`})),ei.createElement("div",{className:`${f.filter}`},ei.createElement(iE,{inputId:"groups-picker",courseId:m,selectedGroupIds:B,analyticsId:`${g}.groupsPicker`,onSelectionChange:F})),ei.createElement("div",{className:`${f.filter}`},ei.createElement(i$,{inputId:"gradable-items-picker",courseId:m,analyticsId:`${g}.gradebookColumnsPicker`,selectedColumnsIds:L,onSelectionChange:N})),v&&ei.createElement("div",{className:`${f.filter}`},ei.createElement(iA,{analyticsId:`${g}.assessmentTypesPicker`,selectedAssessmentTypes:$,onSelectionChange:O})),(null==H?void 0:H.length)&&ei.createElement("div",{className:`${f.filter}`},ei.createElement(iD,{analyticsId:`${g}.categoriesPicker`,categories:H,selectedCategoryIds:G,onSelectionChange:M})))),ei.createElement(iy,{onClickApply:z,onClickCancel:Z,isFiltersPanelDirty:q,analyticsId:`${g}.footer`}))},iF=(0,eV.makeStyles)(e=>(0,eV.createStyles)({gradeOptionDescription:{color:e.palette.text.secondary,marginLeft:"20px"}}));(v=j||(j={})).Gradebook="gradebook",v.GradeHistory="gradeHistory";let iU=[j.Gradebook,j.GradeHistory],iV=[e$.nMe.Tab,e$.nMe.Comma],iH=[{id:"_All",value:e$.RjJ.AllTime},{id:"_6Months",value:e$.RjJ.SixMonths},{id:"_30Days",value:e$.RjJ.ThirtyDays},{id:"_14Days",value:e$.RjJ.FourteenDays},{id:"_7Days",value:e$.RjJ.SevenDays},{id:"_1Day",value:e$.RjJ.OneDay}],iq=[e$.JdL.MyDevice,e$.JdL.ContentCollection],ij=ei.memo(e=>{let{analyticsId:t,gradeOption:n,onChangeGradeOption:i}=e,r=(0,ed.q)(),s=iF(),o="gradebook.grades-download";return ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsTypography,{variant:"h2",gutterBottom:!0},r(`${o}.downloadOptions`)),ei.createElement(eb.AnalyticsRadioGroup,{analyticsId:`${t}.grade-options`,hasCustomLegend:!1,legendVariant:"h3",legendText:r(`${o}.gradeRecords.title`),value:n,onChange:e=>i(e.target.value)},iU.map(e=>ei.createElement(ei.Fragment,{key:e},ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${o}.gradeRecords.${e}.description`,value:e,htmlFor:`radio-${e}-id`,control:ei.createElement(eb.AnalyticsRadio,{id:`radio-${e}-id`,analyticsId:`${t}.${e}.input.radio`,inputProps:{"aria-describedby":`${e}-record-id`}}),label:r(`${o}.gradeRecords.${e}.title`)}),ei.createElement(eb.AnalyticsTypography,{id:`${e}-record-id`,component:"span",className:s.gradeOptionDescription},r(`${o}.gradeRecords.${e}.description`))))))}),iz=(0,eV.makeStyles)(()=>(0,eV.createStyles)({showMoreButton:{marginTop:"8px"}}));var iW=n(817426);let iK=e=>e.filter(e=>e.checked).map(e=>e.value),iZ=e=>{let t=eO.u$1.Survey.isEqualTo(e.scoreProviderHandle)&&!e.scorable;return!!e.id&&!!e.columnName&&!t},iQ=e=>({value:e.id||"-",label:e.columnName||"-",checked:!1}),iJ=e=>e.filter(iZ).map(iQ),iY=e=>e.filter(e=>e.calculationType===e$.eNW.NonCalculated&&iZ(e)).map(iQ),iX=(e,t,n)=>e.map(e=>({...e,checked:!!n||t.includes(e.value)})),i0=e=>{let t=(0,iW.mg)();window.location.href=t+e},i1=(e,t,n)=>{if(!e)return!1;let i=0;for(let r=0;r<e.length;r++)if(t(e[r])&&n(i+=1))return!0;return!1},i2=(e,t,n)=>{var i,r;let{gradebookColumns:s,view:o}=(0,eq.nh)({courseId:e,paging:{limit:n}});return{columns:t(s),totalColumns:null!==(r=null===(i=null==o?void 0:o.paging)||void 0===i?void 0:i.count)&&void 0!==r?r:0,view:o}},i4=e=>{var t;let{courseId:n,onChange:i,analyticsId:r,converter:s,selectedColumnIds:o,onChangeSelectAllItems:a,selectAllItems:l,children:c}=e,d=(0,ed.q)(),u=iz(),p="gradebook.grades-download.grade-history.RecordDetails",[m,h]=(0,ei.useState)(50),[g,f]=(0,ei.useState)([]),{columns:b,view:v,totalColumns:y}=i2(n,s,m);(0,ei.useEffect)(()=>{null!=v&&v.isLoading||f(iX(b,o,l))},[null==v?void 0:v.isLoading,null===(t=null==v?void 0:v.paging)||void 0===t?void 0:t.limit]);let S=(0,ei.useCallback)(e=>{f(t=>{let n=e(t);return null==i||i(n),n})},[f,i]);return(null==v?void 0:v.isLoading)?ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:d(`${p}.MultiselectCheckbox.loading`),size:"small"}):ei.createElement(ei.Fragment,null,ei.createElement(ej.q8v,{analyticsId:r,items:g,checkboxGroupLegendText:d(`${p}.header.title`),headerDescription:d(`${p}.header.description`),selectAllItemsLabel:d(`${p}.MultiselectCheckbox.selectAll.Label`),onChange:S,onChangeSelectAllItems:a}),y>50&&m!==y&&ei.createElement(eb.AnalyticsLink,{analyticsId:"course.grades.grades-download-settings.showMore",className:u.showMoreButton,component:"button",onClick:()=>{h(y)}},d("gradebook.grades-download.common.showMore")),c)},i6=(0,eV.makeStyles)(e=>(0,eV.createStyles)({fileTypeDescription:{color:e.palette.text.secondary,marginBottom:"13px"}})),i5=ei.memo(e=>{let{analyticsId:t,delimiterType:n,onChangeDelimiterType:i}=e,r=(0,ed.q)(),s=i6(),o="gradebook.grades-download";return ei.createElement(eb.AnalyticsRadioGroup,{id:"gradesDownload.delimiterType.RadioGroup",analyticsId:`${t}.delimiterType.RadioGroup`,hasCustomLegend:!1,legendVariant:"h3",legendText:r(`${o}.delimiterType.LegendText`),value:n,onChange:e=>i(e.target.value)},ei.createElement("span",{className:s.fileTypeDescription},r(`${o}.delimiterType.description`)),iV.map(e=>ei.createElement(eb.AnalyticsFormControlLabel,{key:e,value:e,htmlFor:`radio-${e}-id`,control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`${t}.delimiterType.${e}.Radio`,id:`radio-${e}-id`}),label:r(`${o}.delimiterType.${e}.Label`),analyticsId:`course.grades.grades-download-settings.${e}.input.radio`})))}),i3=(0,eV.makeStyles)(e=>(0,eV.createStyles)({switchControlRoot:{marginLeft:"auto"},switchFormControlLabelPlacementStart:{marginRight:"0"},switchFormControlLabel:{display:"flex",justifyContent:"space-between",marginLeft:"0"},switchFormControlLabelDisabled:{color:`${e.palette.primary.light}`},switchFormControlRoot:{width:"100%"}})),i8=e=>{let{enableFlag:t,flagValue:n,setFlagValue:i,flagControlId:r,i18nFlagLabelKey:s,analyticsId:o,disabled:a}=e,l=(0,ed.q)(),c=i3();return t?ei.createElement("div",{className:"bottom-option stretch-message"},ei.createElement(eb.AnalyticsFormControl,{analyticsId:"record.details.extra.check.formControl",className:c.switchFormControlRoot},ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:"record.details.extra.check.formControlLabel",label:l(s),htmlFor:r,control:ei.createElement(eb.AnalyticsSwitch,{analyticsId:`${o}.switchExtraCheck`,id:r,checked:n,onChange:e=>{i(e.target.checked)},disabled:!!a,classes:{root:c.switchControlRoot}}),labelPlacement:"start",className:c.switchFormControlLabel,classes:{labelPlacementStart:c.switchFormControlLabelPlacementStart,label:c.switchFormControlLabelDisabled}}))):null},i9=(0,eV.makeStyles)(e=>(0,eV.createStyles)({contentCollection:{display:"flex",marginTop:"10px","& input":{border:"0",marginBottom:"0"},[e.breakpoints.down("xs")]:{flexDirection:"column"}},contentCollectionFormControl:{flex:"1",[e.breakpoints.down("xs")]:{marginBottom:"16px"}}})),i7=ei.memo(e=>{let{analyticsId:t,saveLocation:n,contentCollectionUrl:i,onChangeSaveLocation:r,onChangeContentCollectionUrl:s}=e,o=(0,ed.q)(),a=i9(),l="gradebook.grades-download",c=n===e$.JdL.ContentCollection;return ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsRadioGroup,{id:"gradesDownload.saveLocation.RadioGroup",analyticsId:`${t}.saveLocation.RadioGroup`,hasCustomLegend:!1,legendVariant:"h3",legendText:o(`${l}.saveLocation.LegendText`),value:n,onChange:e=>r(e.target.value)},iq.map(e=>ei.createElement(eb.AnalyticsFormControlLabel,{key:e,value:e,htmlFor:`radio-${e}-id`,control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`course.grades.grades-download-settings.${e}.input.radio`,id:`radio-${e}-id`}),label:o(`${l}.saveLocation.${e}.Label`),analyticsId:`${t}.saveLocation.${e}.Label`}))),c&&ei.createElement("div",{className:a.contentCollection},ei.createElement(eb.AnalyticsTextField,{analyticsId:"course.grades.grades-download-settings.content.collection.input.text",id:"content-collection-url-input",className:a.contentCollectionFormControl,value:i,onChange:e=>s(e.target.value)}),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:"course.grades.grades-download-settings.browse",onClick:()=>{np.Nd.goPeekState({routeName:"content-collection-picker",getArgs:()=>({pickerType:"Folder",multi:"false"})})}},o(`${l}.saveLocation.browse`))))}),re=(0,eV.makeStyles)(e=>(0,eV.createStyles)({messageFeedback:{color:e.palette.text.secondary}})),rt=({enableFlag:e,messageKey:t})=>{let n=(0,ed.q)(),i=re();return e?ei.createElement("div",{className:"bottom-option stretch"},ei.createElement("span",{className:i.messageFeedback},n(t))):null},rn=(e,t,n)=>{i1(e,e=>e.checked,e=>e>1)?(t(!0),n(!1)):t(!1)},ri=(e,t)=>(0,ei.useCallback)(n=>{rn(n,e,t)},[e,t]),rr=e=>(0,tw.kc)({styles:{backgroundColor:e.palette.border.main,margin:"20px 0"}}),rs=({courseId:e,analyticsId:t,delimiterType:n,saveLocation:i,contentCollectionUrl:r,onChangeSaveLocation:s,onChangeContentCollectionUrl:o,onChangeDelimiterType:a,includeFeedbackFlag:l,setIncludeFeedbackFlag:c,includeFeedbackControlId:d,onChangeSelectedColumnItems:u,selectedColumnIds:p,onChangeSelectAllItems:m,selectAllItems:h})=>{let g=(0,eV.makeStyles)(rr)(),[f,b]=(0,ei.useState)(!1),v="gradebook.grades-download.grade-history.RecordDetails",y=ri(b,c),S=(0,ei.useCallback)(e=>{y(e),u(e)},[y,u]);return ei.createElement(ei.Fragment,null,ei.createElement(i4,{courseId:e,analyticsId:t,selectedColumnIds:p,selectAllItems:h,onChange:S,converter:iJ,onChangeSelectAllItems:m},ei.createElement(i8,{analyticsId:t,enableFlag:!0,flagControlId:d,flagValue:l,setFlagValue:c,disabled:f,i18nFlagLabelKey:`${v}.MultiselectCheckbox.includeFeedback.Label`}),ei.createElement(rt,{messageKey:`${v}.MultiselectCheckbox.includeFeedback.FeedbackDescription`,enableFlag:f})),ei.createElement(iG.i,{className:g.styles}),ei.createElement(i5,{analyticsId:t,delimiterType:n,onChangeDelimiterType:a}),ei.createElement(iG.i,{className:g.styles}),ei.createElement(i7,{analyticsId:t,saveLocation:i,contentCollectionUrl:r,onChangeSaveLocation:s,onChangeContentCollectionUrl:o}))},ro=ei.memo(({options:e,analyticsId:t,defaultSelectedValue:n,onChange:i})=>{let r=(0,ed.q)(),s="gradebook.grades-download.grade-history",[o,a]=(0,ei.useState)(n);return ei.createElement(eb.AnalyticsTextField,{fullWidth:!0,className:"lastmodifiedDatePicker_Container",analyticsId:`${t}.lastmodifiedDatePicker`,id:"lastmodifiedDatePicker",select:!0,label:r(`${s}.lastmodifiedDatePicker.Label`),"aria-label":r(`${s}.lastmodifiedDatePicker.AriaLabel`),value:o,onChange:e=>{let t=e.target.value;a(t),i(t)}},e.map(e=>ei.createElement(eb.AnalyticsMenuItem,{button:!0,key:e.id,value:e.value,analyticsId:`${t}.lastmodifiedDatePicker.${e.value}`},r(`${s}.lastmodifiedDatePicker.${e.id}.Label`))))}),ra=({courseId:e,analyticsId:t,delimiterType:n,lastModifiedDate:i,onChangeDelimiterType:r,onChangeLastModifiedDate:s,includeDeletedItemsFlag:o,setIncludeDeletedItemsFlag:a,includeDeletedItemsControlId:l,saveLocation:c,contentCollectionUrl:d,onChangeSaveLocation:u,onChangeContentCollectionUrl:p,onChangeSelectedColumnItems:m,selectedColumnIds:h,onChangeSelectAllItems:g,selectAllItems:f})=>{let b=(0,eV.makeStyles)(rr)();return ei.createElement(ei.Fragment,null,ei.createElement(i4,{courseId:e,analyticsId:t,selectedColumnIds:h,selectAllItems:f,converter:iY,onChangeSelectAllItems:g,onChange:m},ei.createElement(i8,{analyticsId:t,enableFlag:!0,flagControlId:l,flagValue:o,setFlagValue:a,i18nFlagLabelKey:"gradebook.grades-download.grade-history.RecordDetails.MultiselectCheckbox.includeDeletedItems.Label"})),ei.createElement(iG.i,{className:b.styles}),ei.createElement(ro,{analyticsId:t,defaultSelectedValue:i,options:iH,onChange:s}),ei.createElement(iG.i,{className:b.styles}),ei.createElement(i5,{analyticsId:t,delimiterType:n,onChangeDelimiterType:r}),ei.createElement(iG.i,{className:b.styles}),ei.createElement(i7,{analyticsId:t,saveLocation:c,contentCollectionUrl:d,onChangeSaveLocation:u,onChangeContentCollectionUrl:p}))},rl=(0,eV.makeStyles)(e=>(0,eV.createStyles)({body:{marginTop:"22px",marginBottom:"48px",[e.breakpoints.down("xs")]:{marginTop:"0"}},divider:{...rr(e).styles}})),rc=(0,eV.makeStyles)(()=>(0,eV.createStyles)({panelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}}})),rd=e=>{let{onClickDownload:t,onClickCancel:n,isDownloadDisabled:i,isGradeHistory:r}=e,s=(0,ed.q)(),o=rc();return ei.createElement("div",{className:o.panelFooter},ei.createElement(em.BbPanelFooter,{primaryButtonProps:{text:s("gradebook.grades-download.footer.download"),onClick:t,disabled:i},secondaryButtonProps:{text:s("gradebook.grades-download.common.cancel"),onClick:n},analyticsId:r?"course.grades.grades-download.settings.gradeHistoryDownloadAction":"course.grades.grades-download.settings.downloadAction"}))},ru="course.grade.gradesDownloadSettings.download",rp="gradebook.grades-download.download",rm=e=>{let{isOpen:t,isGradeHistory:n,onClose:i,onTryAgain:r}=e,s=(0,ed.q)(),o=s(n?`${rp}.gradeHistoryFailed`:`${rp}.gradebookFailed`);return ei.createElement(eu._X,{open:t,onClose:i,"aria-labelledby":"download-grades-error-title","aria-describedby":"download-grades-error-modal",analyticsId:`${ru}.error.modal`},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${ru}.error.title`,onClose:i,id:"download-grades-error-title"},s(`${rp}.failedTitle`)),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${ru}.error.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:`${ru}.error.text`,id:"download-grades-error-modal"},o)),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${ru}.error.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${ru}.cancel.button`,onClick:i},s("gradebook.grades-download.common.cancel")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${ru}.tryAgain.button`,onClick:r},s(`${rp}.tryAgain`))))},rh=e=>{let t=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).name),n=(0,ei.useCallback)(n=>{"classic-picker-submit"===n.data.messageId&&(t.endsWith("peek.content-collection-picker")&&np.Nd.leavePeekState(t),n.data.items.length&&e(n.data.items[0].filePath)),"classic-picker-cancel"===n.data.messageId&&t.endsWith("peek.content-collection-picker")&&np.Nd.leavePeekState(t)},[t]);(0,ei.useEffect)(()=>(window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}),[n])},rg=(e,t)=>e&&t?e$.cc9.HistoryLogAll:e&&!t?e$.cc9.HistoryLog:t?e$.cc9.All:e$.cc9.ByColumns,rf=(e,t)=>{switch(e){case e$.RjJ.AllTime:t.setTime(0);break;case e$.RjJ.FourteenDays:t.setDate(t.getDate()-14);break;case e$.RjJ.OneDay:t.setDate(t.getDate()-1);break;case e$.RjJ.SevenDays:t.setDate(t.getDate()-7);break;case e$.RjJ.SixMonths:t.setDate(t.getDate()-180);break;case e$.RjJ.ThirtyDays:t.setDate(t.getDate()-30)}return t};var rb=n(263407),rv=n(776517);let ry=e=>{let{courseId:t,analyticsId:n}=e,i=rl(),r=(0,ed.q)(),[s,o]=(0,ei.useState)(j.Gradebook),[a,l]=(0,ei.useState)(e$.RjJ.AllTime),[c,d]=(0,ei.useState)(!1),[u,p]=(0,ei.useState)(!1),[m,h]=(0,ei.useState)([]),[g,f]=(0,ei.useState)(e$.nMe.Tab),[b,v]=(0,ei.useState)(e$.JdL.MyDevice),[y,S]=(0,ei.useState)(""),[C,E]=(0,ei.useState)(!1),[I,w]=(0,ei.useState)(!1),[A,k]=(0,ei.useState)(!1),T=ic(t),P=s===j.GradeHistory;rh(S);let{enqueueSnackbar:D}=(0,ej.Ds_)(ej.VWo.GradesDownloadToasts,!1),x=()=>{h([]),d(!1),p(!1),w(!1)},R=(0,ei.useCallback)(e=>{o(e),x()},[]),L=(0,ei.useCallback)(e=>{f(e)},[f]),N=(0,ei.useCallback)(e=>{v(e)},[v]),$=(0,ei.useCallback)(e=>{S(e)},[S]),O=(0,ei.useCallback)(e=>{l(e)},[l]),G=(0,ei.useCallback)(e=>{h(iK(e))},[h]),_=(0,ei.useCallback)(e=>{w(e)},[w]),M=async()=>{(0,rv.sA)(rv.Cs.GradeBookDownloadButtonClicked);let e={icon:ei.createElement(rb.f,null),snackbarMessage:r("gradebook.grades-download.download.successful"),isPersistent:!1},n={closeButtonAriaLabel:r("gradebook.grades-download.download.closeSnackbarAriaLabel")},i={delimiterType:g,downloadTo:b,dataScopeType:rg(P,I),contentCollectionUrl:y,columnIds:I?void 0:m,isShowComments:!!P||u,lastModifiedDate:P?rf(a,new Date):void 0,isDeletedItemsIncluded:!!P&&c};k(!0),i.dataScopeType===e$.cc9.All&&u&&(i.columnIds=m,i.dataScopeType=e$.cc9.ByColumns);try{let r=await (0,eO.I5k)(t,i);"SUCCESS"===r.responseCode?(D(e,n),b===e$.JdL.MyDevice&&r.downloadUrl&&i0(r.downloadUrl),np.Nd.leavePeekState()):E(!0)}catch(e){E(!0)}finally{k(!1)}};return ei.createElement(ei.Fragment,null,ei.createElement("div",{className:"panel-wrap"},ei.createElement("div",{className:"panel-header simple-header"},ei.createElement(em.BbPanelHeader,{title:r("gradebook.grades-download.header.title"),smallHeaderTitle:null==T?void 0:T.displayName,type:em.BbPanelType.peek,analyticsId:`${n}.header`,hideNavMenu:!0})),ei.createElement("div",{className:`panel-body panel-content ${i.body}`},ei.createElement(ij,{analyticsId:n,gradeOption:s,onChangeGradeOption:R}),ei.createElement(iG.i,{className:i.divider}),!P&&ei.createElement(rs,{courseId:t,analyticsId:n,delimiterType:g,saveLocation:b,selectedColumnIds:m,contentCollectionUrl:y,selectAllItems:I,onChangeDelimiterType:L,includeFeedbackFlag:u,setIncludeFeedbackFlag:p,includeFeedbackControlId:"include-feedback",onChangeSaveLocation:N,onChangeContentCollectionUrl:$,onChangeSelectedColumnItems:G,onChangeSelectAllItems:_}),P&&ei.createElement(ra,{courseId:t,analyticsId:n,delimiterType:g,lastModifiedDate:a,selectAllItems:I,onChangeDelimiterType:L,onChangeLastModifiedDate:O,includeDeletedItemsFlag:c,setIncludeDeletedItemsFlag:d,includeDeletedItemsControlId:"include-deleteditems",saveLocation:b,contentCollectionUrl:y,selectedColumnIds:m,onChangeSaveLocation:N,onChangeContentCollectionUrl:$,onChangeSelectedColumnItems:G,onChangeSelectAllItems:_}))),ei.createElement(rd,{onClickCancel:()=>{np.Nd.leavePeekState()},onClickDownload:()=>M(),isDownloadDisabled:(()=>{let e=m.length;return!!A||0===e&&!c||b===e$.JdL.ContentCollection&&""===y})(),isGradeHistory:P}),ei.createElement(rm,{isOpen:C,isGradeHistory:P,onClose:()=>E(!1),onTryAgain:()=>{E(!1),M()}}))},rS={marginRight:"8px",marginBottom:"8px",height:"29px"},rC=(0,eV.makeStyles)(()=>(0,eV.createStyles)({skeletonChip:{...rS,backgroundColor:"rgba(0, 0, 0, 0.3 )",display:"inline-flex",width:"80px",borderRadius:"16px",transform:"initial"}})),rE=()=>{let e=rC();return ei.createElement(eV.Skeleton,{className:e.skeletonChip})},rI=(e,t)=>{let n=(0,eq.Lx)(),i=(0,eq.pJ)(e=>eO.Ys.courseMembership.getCourseMembershipByMembershipId(e,t));(0,ei.useEffect)(()=>{i&&i.userId||n(eO.Nwg.courseMembership.loadCourseMembershipByMemberId(e,t))},[n,t,e,i]);let r=(0,eq.pJ)(e=>{let t=null==i?void 0:i.user;return t||(t=eO.Ys.user.getUserById(e,null==i?void 0:i.userId)),t}),s=null==i?void 0:i.userId;return(0,ei.useEffect)(()=>{s&&!r&&n(eO.Nwg.user.loadUser(s))},[n,r,s]),r},rw=e=>{let{formatUsername:t}=(0,eQ.h)(),{userNameFormat:n,analyticsId:i,membershipId:r,courseId:s,onDelete:o,className:a}=e,l=(0,ei.useCallback)(()=>o(r),[o,r]),c=rI(s,r);return c?ei.createElement(eb.AnalyticsChip,{analyticsId:i,disabled:!c,className:a,label:t(c,n||nk.ILocaleUsernameFormat.Short),onDelete:l}):ei.createElement(rE,null)},rA=(e,t)=>{let n=(0,eq.Lx)(),i=(0,eq.pJ)(e=>eO.Ys.group.getGroupByGroupId(e,t));return(0,ei.useEffect)(()=>{i||n(eO.Nwg.group.loadGroupById(e,t))},[n,i,t,e]),i},rk=e=>{let{analyticsId:t,courseId:n,groupId:i,onDelete:r,className:s}=e,o=(0,ei.useCallback)(()=>r(i),[r,i]),a=rA(n,i);return a?ei.createElement(eb.AnalyticsChip,{analyticsId:t,disabled:!a,label:a.title,onDelete:o,className:s}):ei.createElement(rE,null)},rT=(e,t)=>{let n=(0,eq.Lx)(),i=(0,eq.pJ)(e=>eO.Ys.gradebookColumn.getGradebookColumnById(e,t));return(0,ei.useEffect)(()=>{i||n(eO.Nwg.gradebookColumn.loadGradebookColumn({courseId:e,columnId:t}))},[n,i,t,e]),i},rP=e=>{let{analyticsId:t,courseId:n,columnId:i,onDelete:r,className:s}=e,o=(0,ei.useCallback)(()=>r(i),[r,i]),a=rT(n,i);return a?ei.createElement(eb.AnalyticsChip,{analyticsId:t,disabled:!a,className:s,label:a.columnName,onDelete:o}):ei.createElement(rE,null)},rD=e=>{let{analyticsId:t,assessmentType:n,onDelete:i,className:r}=e,s=(0,ed.q)(),o=(0,ei.useCallback)(()=>i(n),[i,n]);return Object.values(q).includes(n)?ei.createElement(eb.AnalyticsChip,{analyticsId:t,disabled:!n,className:r,label:s(`gradebook.gridFiltersPanel.assessmentTypes.types.${n}`),onDelete:o}):ei.createElement(rE,null)},rx=e=>{let{analyticsId:t,categoryId:n,onDelete:i,className:r}=e,s=(0,ed.q)(),o=(0,ei.useCallback)(()=>i(n),[i,n]),a=(0,eq.pJ)(e=>eO.Ys.gradebookCategory.getGradebookCategoryById(e,n));return a?ei.createElement(eb.AnalyticsChip,{analyticsId:t,disabled:!a,className:r,label:ik(a,s),onDelete:o}):ei.createElement(rE,null)},rR=(e,t)=>{let n=(0,eq.Lx)(),i=(0,eq.pJ)(e=>eO.Ys.courseChildren.byChildCourseId(e,t));return(0,ei.useEffect)(()=>{i||n(eO.Nwg.courseChildren.loadChildCourse(e,t))},[n,e,t,i]),i},rL=e=>{let{analyticsId:t,parentCourseId:n,childCourseId:i,onDelete:r,className:s}=e,o=(0,ei.useCallback)(()=>r(i),[r,i]),a=rR(n,i);return(null==a?void 0:a.childCourse)?ei.createElement(eb.AnalyticsChip,{analyticsId:t,disabled:!a,label:a.childCourse.name,onDelete:o,className:s}):ei.createElement(rE,null)},rN={marginRight:"8px",marginBottom:"8px",height:"29px"},r$=(0,eV.makeStyles)(e=>(0,eV.createStyles)({filterChips:{display:"flex",flexWrap:"wrap",marginTop:"8px"},filtersApplied:{...rN,fontWeight:e.typography.fontWeightSemiBold},clearFilters:{...rN},chip:{paddingTop:"7px",backgroundColor:"rgba(0, 0, 0, 0.3 )",...rN},chipButton:{marginBottom:"-4px"}}));function rO(e,t){return e.filter(e=>e!==t)}let rG=e=>{let{courseId:t,analyticsId:n,membershipIds:i,onMembershipIdsChanged:r,groupIds:s,onGroupIdsChanged:o,gradeColumnIds:a,onGradeColumnIdsChanged:l,gradeAssessmentTypes:c,onGradeAssessmentTypesChanged:d,gradeCategoryIds:u,onGradeCategoryIdsChanged:p,childCourseIds:m,onChildCourseIdsChanged:h,onClearAllFilters:g}=e,f=r$(),b=(0,ed.q)(),v=(0,ei.useCallback)(e=>r(rO(i,e)),[r,i]),y=i.map((e,i)=>ei.createElement(rw,{analyticsId:`${n}.courseMember.chip.${i}`,courseId:t,membershipId:e,onDelete:v,key:e,className:f.chip})),S=(0,ei.useCallback)(e=>o(rO(s,e)),[o,s]),C=s.map((e,i)=>ei.createElement(rk,{analyticsId:`${n}.group.chip.${i}`,courseId:t,groupId:e,onDelete:S,key:e,className:f.chip})),E=(0,ei.useCallback)(e=>{l(rO(a,e))},[a,l]),I=a.map((e,i)=>ei.createElement(rP,{key:e,columnId:e,courseId:t,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:E,className:f.chip})),w=(0,ei.useCallback)(e=>{d(rO(c,e))},[c,d]),A=c.map((e,i)=>ei.createElement(rD,{key:e,assessmentType:e,courseId:t,analyticsId:`${n}.assessmentType.chip.${i}`,onDelete:w,className:f.chip})),k=(0,ei.useCallback)(e=>{p(rO(u,e))},[u,p]),T=u.map((e,i)=>ei.createElement(rx,{key:i,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:k,courseId:t,categoryId:e,className:f.chip})),P=(0,ei.useCallback)(e=>{h(rO(m,e))},[m,rO]),D=m.map((e,i)=>ei.createElement(rL,{key:i,analyticsId:`${n}.gradeColumn.chip.${i}`,onDelete:P,parentCourseId:t,childCourseId:e,className:f.chip})),x=b("gradebook.filterChips.filtersApplied"),R=b("gradebook.filterChips.clearAll");return ei.createElement("div",{className:f.filterChips},ei.createElement("span",{className:f.filtersApplied},x),y,C,I,A,T,D,ei.createElement(eb.AnalyticsLink,{className:f.clearFilters,variant:"button",analyticsId:`${n}.clearAllFilters`,onClick:g,tabIndex:0,"aria-label":R,href:"#"},R))},r_=e=>{var t,n,i,r,s,o;let a=(0,eq.pJ)(e=>{var t;return null===(t=eO.Ys.app.getRoute(e).params)||void 0===t?void 0:t.courseId}),l=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams),c=[null==l?void 0:l.gradebookView,null==l?void 0:l.memberId,null==l?void 0:l.courseGroupId,null==l?void 0:l.gradebookColumnId,null==l?void 0:l.gradebookAssessmentType,null==l?void 0:l.gradebookCategoryId,null==l?void 0:l.childCourseId],d=(null===(t=null==l?void 0:l.memberId)||void 0===t?void 0:t.split(","))||[],u=(null===(n=null==l?void 0:l.courseGroupId)||void 0===n?void 0:n.split(","))||[],p=(null===(i=null==l?void 0:l.gradebookColumnId)||void 0===i?void 0:i.split(","))||[],m=(null===(r=null==l?void 0:l.gradebookAssessmentType)||void 0===r?void 0:r.split(","))||[],h=(null===(s=null==l?void 0:l.gradebookCategoryId)||void 0===s?void 0:s.split(","))||[],g=(null===(o=null==l?void 0:l.childCourseId)||void 0===o?void 0:o.split(","))||[];ix(a);let f=(0,ei.useCallback)(e=>{let t={...l,memberId:e.length>0?e.join(","):void 0};np.Nd.search(t)},c),b=(0,ei.useCallback)(e=>{let t={...l,courseGroupId:e.length>0?e.join(","):void 0};np.Nd.search(t)},c),v=(0,ei.useCallback)(e=>{let t={...l,gradebookColumnId:e.length>0?e.join(","):void 0};np.Nd.search(t)},c),y=(0,ei.useCallback)(e=>{let t={...l,gradebookCategoryId:e.length>0?e.join(","):void 0};np.Nd.search(t)},c),S=(0,ei.useCallback)(e=>{let t={...l,gradebookAssessmentType:e.length>0?e.join(","):void 0};np.Nd.search(t)},[l]),C=(0,ei.useCallback)(e=>{let t={...l,childCourseId:e.length>0?e.join(","):void 0};np.Nd.search(t)},c),E=(0,ei.useCallback)(()=>{let e={...l,memberId:void 0,courseGroupId:void 0,gradebookColumnId:void 0,gradebookAssessmentType:void 0,gradebookCategoryId:void 0,childCourseId:void 0};np.Nd.search(e)},c);return ei.createElement(rG,{courseId:a,membershipIds:d,groupIds:u,gradeColumnIds:p,gradeAssessmentTypes:m,gradeCategoryIds:h,childCourseIds:g,analyticsId:e.analyticsId,onMembershipIdsChanged:f,onGroupIdsChanged:b,onGradeColumnIdsChanged:v,onGradeAssessmentTypesChanged:S,onGradeCategoryIdsChanged:y,onChildCourseIdsChanged:C,onClearAllFilters:E})},rM=(0,eV.makeStyles)(e=>(0,eV.createStyles)({categoryRuleHeader:{display:"block",fontSize:e.typography.fontSizeLarge,fontWeight:e.typography.fontWeightSemiBold,marginBottom:"16px"},categoryRuleDescription:{display:"block",fontSize:e.typography.fontSizeSmall,marginTop:"8px"},dropLabel:{display:"flex",alignItems:"center",marginLeft:"20px",flexWrap:"wrap",marginTop:"15px",fontWeight:e.typography.fontWeightRegular},dropScoreInformation:{color:e.palette.text.hint,fontSize:e.typography.fontSizeSmall,fontStyle:"italic",marginLeft:"20px"},dropScoresErrorMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.error.main},minOrMaxRadio:{display:"block",marginLeft:"20px"},numberInput:{width:"50px",margin:"0 10px"},radio:{marginTop:"16px",display:"block"},radioDescription:{marginLeft:"20px",fontSize:e.typography.fontSizeSmall,marginBottom:"6px"},radioLabel:{fontWeight:e.typography.fontWeightSemiBold},tooManyItemsDroppedErrorMessage:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,marginLeft:"20px"}}));var rB=n(715729);(y=z||(z={})).DropScores="DROP_SCORES",y.GradeCalculationUseOnlyOption="USE_ONLY";let rF=(e,t)=>{var n,i,r;let s=(null==e?void 0:e.dropLow)||(null==e?void 0:e.dropHigh)?z.DropScores:null;null===s&&(s=(null==e?void 0:e.useOnly)?z.GradeCalculationUseOnlyOption:null);let o={dropLow:null!==(n=null==e?void 0:e.dropLow)&&void 0!==n?n:0,dropHigh:null!==(i=null==e?void 0:e.dropHigh)&&void 0!==i?i:0,useOnly:null!==(r=null==e?void 0:e.useOnly)&&void 0!==r?r:null};return{enabled:!!s,selectedRuleType:s,rules:{...o},numGradableItems:null!=t?t:0,initialState:{enabled:!!s,selectedRuleType:s,rules:{...o}}}},rU="TOGGLE_ENABLED",rV="SELECT_RULE",rH="SET_DROP_LOW",rq="SET_DROP_HIGH",rj="SET_USE_ONLY",rz="INITIALIZE_STATE",rW="ROLLBACK_INITIAL_STATE",rK={dropHigh:0,dropLow:0,useOnly:null},rZ=(e,t)=>{if(t.type===rU)return(0,rB.Uy)(e,t=>{t.enabled=!e.enabled,t.selectedRuleType=null,t.rules=rK});if(t.type===rV)return(0,rB.Uy)(e,e=>{e.selectedRuleType=t.payload.ruleType,e.rules=rK});if(t.type===rH)return(0,rB.Uy)(e,e=>{e.rules.dropLow=t.payload.dropLow});if(t.type===rq)return(0,rB.Uy)(e,e=>{e.rules.dropHigh=t.payload.dropHigh});if(t.type===rj)return(0,rB.Uy)(e,e=>{e.rules.useOnly=t.payload.useOnly});if(t.type===rz)return rF(t.payload.rules,t.payload.numGradableItems);if(t.type===rW){let t=e.initialState;return(0,rB.Uy)(e,e=>{e.enabled=t.enabled,e.rules=t.rules,e.selectedRuleType=t.selectedRuleType})}return e},rQ=ei.createContext({calculationRule:rF(void 0,0),dispatch:e=>{}}),rJ=()=>ei.useContext(rQ),rY=({calculationRule:e,numGradableItems:t,children:n})=>{let[i,r]=ei.useReducer(rZ,rF(e,t));return ei.useEffect(()=>{r(se(e,t))},[e,t]),ei.createElement(rQ.Provider,{value:{calculationRule:i,dispatch:r}},n)},rX=e=>{var t,n;if(null===e.rules.dropLow||null===e.rules.dropHigh)return!1;let i=null!==(t=e.rules.dropHigh)&&void 0!==t?t:0,r=null!==(n=e.rules.dropLow)&&void 0!==n?n:0;return!!Number.isInteger(i)&&!!Number.isInteger(r)&&!(i<0)&&!(r<0)&&(0!==r||0!==i)},r0=e=>!e.enabled||(e.selectedRuleType===z.DropScores?rX(e):e.selectedRuleType===z.GradeCalculationUseOnlyOption&&!!e.rules.useOnly),r1=e=>{var t,n;return(null!==(t=e.rules.dropHigh)&&void 0!==t?t:0)+(null!==(n=e.rules.dropLow)&&void 0!==n?n:0)+1},r2=()=>e=>!!(null!=e&&Number.isInteger(e)),r4=e=>!!e.rules.dropLow&&e.rules.dropLow>0||!!e.rules.dropHigh&&e.rules.dropHigh>0,r6=e=>{let t=e.initialState;return e.enabled!==t.enabled||e.selectedRuleType!==t.selectedRuleType||e.rules.dropHigh!==t.rules.dropHigh||e.rules.dropLow!==t.rules.dropLow||e.rules.useOnly!==t.rules.useOnly},r5=()=>({type:rU}),r3=e=>({type:rV,payload:{ruleType:e}}),r8=e=>({type:rH,payload:{dropLow:e}}),r9=e=>({type:rq,payload:{dropHigh:e}}),r7=e=>({type:rj,payload:{useOnly:e}}),se=(e,t)=>({type:rz,payload:{rules:e,numGradableItems:t}}),st=()=>({type:rW}),sn=e=>{var t,n;let{isExternalGrade:i}=e,r=rM(),{calculationRule:s,dispatch:o}=rJ(),a=(0,ed.q)(),l=i?"features.course.grades.overall-grade":"features.course.grades.total-calculation",c=ei.useCallback(()=>s.selectedRuleType===z.DropScores,[s]),d=c()&&ei.createElement(ej.lvo,{ariaDescribedBy:"drop-scores-message",ariaLabel:a("gradebook.overallGradeCalculationPanel.dropLowestScores"),analyticsId:`${l}.calculation-rule-panel.dropLow.number.input`,className:(0,eX.Z)(r.numberInput,"js-drop-low-scores-input"),min:0,onChange:e=>o(r8(e)),value:null!==(t=s.rules.dropLow)&&void 0!==t?t:null,validate:r2(),required:!1,hideErrorMessage:!0}),u=c()&&ei.createElement(ej.lvo,{ariaDescribedBy:"drop-scores-message",ariaLabel:a("gradebook.overallGradeCalculationPanel.dropHighestScores"),analyticsId:`${l}.calculation-rule-panel.dropHigh.number.input`,className:(0,eX.Z)(r.numberInput,"js-drop-high-scores-input"),min:0,onChange:e=>o(r9(e)),value:null!==(n=s.rules.dropHigh)&&void 0!==n?n:null,validate:r2(),required:!1,hideErrorMessage:!0});return ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${l}.calculation-rule-panel.dropScores.radio.label`,checked:c(),className:(0,eX.Z)(r.radio,"js-drop-scores-radio"),control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`${l}.calculation-rule-panel.dropScores.radio`,id:z.DropScores}),disabled:!s.enabled,htmlFor:z.DropScores,label:ei.createElement("span",{className:r.radioLabel},a("gradebook.overallGradeCalculationPanel.dropScoresTitle")),onChange:e=>o(r3(e.target.value)),value:z.DropScores}),ei.createElement("p",{className:r.radioDescription},a("gradebook.overallGradeCalculationPanel.dropScoresDescription")),c()&&ei.createElement(ei.Fragment,null,r4(s)&&s.numGradableItems<r1(s)&&ei.createElement("p",{className:(0,eX.Z)(r.tooManyItemsDroppedErrorMessage,"js-too-many-items-message"),id:"drop-scores-message"},a("gradebook.overallGradeCalculationPanel.tooManyItemsDroppedWarning",{minGradableItems:r1(s)})),ei.createElement(eb.AnalyticsInputLabel,{className:r.dropLabel,analyticsId:`${l}.calculation-rule-panel.dropLow.number.input.label`},a("gradebook.overallGradeCalculationPanel.dropLowestScores",{numberInput_LOCALIZED:d})),ei.createElement(eb.AnalyticsInputLabel,{className:r.dropLabel,analyticsId:`${l}.calculation-rule-panel.dropHigh.number.input.label`,"aria-describedby":"drop-scores-message"},a("gradebook.overallGradeCalculationPanel.dropHighestScores",{numberInput_LOCALIZED:u}))))};class si{constructor(e){this.exclude_alias=e}}class sr{constructor(){this.type="item",this.alias=""}}(S=W||(W={})).UseMinScore="min",S.UseMaxScore="max";let ss="X_Running_Total";(C=K||(K={})).UseLowestScore="LOWEST",C.UseHighestScore="HIGHEST",C.Default="DEFAULT";class so{constructor(){this.element=new sr,this.weight=0}}let sa=(e=[],{average:t=!1}={})=>({average:t,elements:e});class sl{static is(e){return!!e&&(e instanceof sl||"weights"in e)}constructor(e=[],{running:t=!0}={}){this.weights=e,this.running=t}}class sc{static is(e){return!!e&&(e instanceof sc||"selected"in e)}constructor(e=sa(),{running:t=!0}={}){this.selected=e,this.running=t}}class sd{static is(e){return!!e&&(e instanceof sd||"formula"in e)}constructor({aliases:e,formula:t},n){var i,r;if(this.aliases=e,this.formula=t,-1!==t.indexOf(ss))this.running=-1!==t.indexOf(`${ss}=true`);else{let e=[];for(let t=0;t<=n.length;t++){let s=n.item(t);if(s)switch(s.nodeName){case"ci":case"mi":{let[,t]=null!==(r=/^@X@BBCalColElem\([^:]+:(.*)\)@X@$/.exec(null!==(i=s.textContent)&&void 0!==i?i:""))&&void 0!==r?r:[];try{let n=JSON.parse(t);"running"in n&&e.push(n.running)}catch(e){console.warn("Invalid non-JSON function body",t)}}}}this.running=0===e.length||e.some(e=>!1!==e)}}}function su(e,t){return sl.is(e)?t.weighted(e):sc.is(e)?t.sumSelected(e):t.advanced(e)}let sp=e=>{let{isExternalGrade:t}=e,n=(0,ed.q)(),i=rM(),{calculationRule:r,dispatch:s}=rJ(),o=t?"features.course.grades.overall-grade":"features.course.grades.total-calculation",a=e=>{s(r7(e.target.value))};return ei.createElement("div",null,ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${o}.calculation-rule-panel.useOnly.radio.label`,checked:r.selectedRuleType===z.GradeCalculationUseOnlyOption,className:(0,eX.Z)(i.radio,"js-overall-grade-use-only-radio"),control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`${o}.calculation-rule-panel.useOnly.radio`,id:z.GradeCalculationUseOnlyOption}),disabled:!r.enabled,htmlFor:z.GradeCalculationUseOnlyOption,label:ei.createElement("span",{className:i.radioLabel},n("gradebook.overallGradeCalculationPanel.useOnlyTitle")),onChange:e=>s(r3(e.target.value)),value:z.GradeCalculationUseOnlyOption}),ei.createElement("p",{className:i.radioDescription},n("gradebook.overallGradeCalculationPanel.useOnlyDescription")),r.selectedRuleType===z.GradeCalculationUseOnlyOption&&ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${o}.calculation-rule-panel.min.radio.label`,checked:r.rules.useOnly===W.UseMinScore,className:(0,eX.Z)(i.minOrMaxRadio,"js-use-only-lowest-grade"),control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`${o}.calculation-rule-panel.min.radio`,id:W.UseMinScore}),htmlFor:W.UseMinScore,label:n("gradebook.overallGradeCalculationPanel.useOnlyLowest"),onChange:a,value:W.UseMinScore}),ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${o}.calculation-rule-panel.max.radio.label`,checked:r.rules.useOnly===W.UseMaxScore,className:(0,eX.Z)(i.minOrMaxRadio,"js-use-only-highest-grade"),control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`${o}.calculation-rule-panel.max.radio`,id:W.UseMaxScore}),htmlFor:W.UseMaxScore,label:n("gradebook.overallGradeCalculationPanel.useOnlyHighest"),onChange:a,value:W.UseMaxScore})))},sm=e=>{let{isExternalGrade:t}=e,n=rM(),{calculationRule:i,dispatch:r}=rJ(),s=(0,ed.q)(),o=t?"features.course.grades.overall-grade":"features.course.grades.total-calculation";return ei.createElement("div",null,ei.createElement("span",{className:n.categoryRuleHeader},s("gradebook.overallGradeCalculationPanel.categoryCalculationRuleTitle")),ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${o}.calculation-rule-panel.enable.switch.label`,checked:!!i.enabled,className:"js-enable-calculation-rule",control:ei.createElement(eb.AnalyticsSwitch,{analyticsId:`${o}.calculation-rule-panel.enable.switch`,id:"enable"}),htmlFor:"enable",label:s("gradebook.overallGradeCalculationPanel.enableCalculationRule"),onChange:()=>r(r5())}),ei.createElement("span",{className:n.categoryRuleDescription},s("gradebook.overallGradeCalculationPanel.categoryCalculationRuleDescription")),ei.createElement("span",{className:n.categoryRuleDescription},s("gradebook.overallGradeCalculationPanel.categoryCalculationRuleDescriptionXPlus1Rule")),ei.createElement(sn,{isExternalGrade:t}),ei.createElement(sp,{isExternalGrade:t}))},sh=(0,eV.makeStyles)(e=>(0,eV.createStyles)({ruleButton:{fontSize:"12px",minHeight:"unset"},ruleText:{flexShrink:0},warning:{color:e.palette.error.main,"&:hover, &:focus, &:active":{color:e.palette.error.main}}})),sg=e=>{var t,n;if(!e)return!1;let i=null!==(t=e.dropLow)&&void 0!==t?t:0,r=null!==(n=e.dropHigh)&&void 0!==n?n:0;return i>0||r>0||!!e.useOnly},sf=(e,t)=>{var n,i;if(!sg(t))return!1;let r=null!==(n=t.dropLow)&&void 0!==n?n:0,s=null!==(i=t.dropHigh)&&void 0!==i?i:0;return r>0||s>0?r+s>=e:!t.useOnly},sb=(e,t)=>sf(e,t)?eE.AlertError:sg(t)?eE.Edit:eE.Add,sv=(e,t)=>{var n,i;return(null==e?void 0:e.dropLow)||(null==e?void 0:e.dropHigh)?t("course.grades.overallGrade.editDropScores.plural",{numOfDrops:Number(null!==(n=e.dropLow)&&void 0!==n?n:0)+Number(null!==(i=e.dropHigh)&&void 0!==i?i:0)}):t((null==e?void 0:e.useOnly)?e.useOnly===W.UseMaxScore?"course.grades.overallGrade.useOnlyHighest":"course.grades.overallGrade.useOnlyLowest":"course.grades.overallGrade.editCalculationRules")},sy=({ButtonProps:e,calculationRule:t,numGradableItemsInCategory:n,isExternalGrade:i})=>{let r=(0,ed.q)(),s=sh(),o=sb(n,t),a=sv(t,r),l=sf(n,t);return ei.createElement(eb.AnalyticsIconButton,{...e,className:(0,eX.Z)(s.ruleButton,{[s.warning]:l},null==e?void 0:e.className),analyticsId:`${i?"course.grades.overallGrade":"course.grades.totalCalculation"}.editCalculationRule`},ei.createElement(o,null),ei.createElement(eb.AnalyticsTypography,{className:s.ruleText,component:"span",variant:"inherit"},a))};function sS(e){let t;if(!e.formula||""===e.formula)return null;if(-1!==e.formula.indexOf(ss)){if(!e.formula.trim().endsWith("X_Running_Total=true")&&!e.formula.trim().endsWith("X_Running_Total=false"))return null;t=e.formula.substring(0,e.formula.indexOf(ss))}else t=e.formula;let n=new DOMParser().parseFromString(t,"text/xml").children[0];if("math"!==n.nodeName)return null;let i=n.childNodes;if(0===i.length)return null;if(i.length>1||-1===["ci","mi"].indexOf(i[0].nodeName))return new sd(e,i);let r=i[0];switch(r.nodeName){case"ci":case"mi":{if(null===r.textContent)return null;let t=/^@X@BBCalColElem\(([^:]+):(.*)\)@X@$/.exec(r.textContent);if(null===t)return null;let[,n,s]=t;try{let t=JSON.parse(s);if("sum"===n){if(t.selected.elements.some(e=>"equal"===e.mode))return new sd(e,i);return new sc(t.selected,{running:t.running})}if("wgt"===n)return new sl(t.weights,{running:t.running});return new sd(e,i)}catch(e){console.error(e)}}}return null}function sC(e,t,n=Object.keys(t.reduce((e,t)=>t.gradebookCategoryId?{...e,[t.gradebookCategoryId]:null}:e,{}))){var i;let r=null!==(i=null==e?void 0:e.aliases)&&void 0!==i?i:{},s=e?sS(e):null,o=s?su(s,{weighted:e=>e.weights.map(e=>e.element),sumSelected:e=>e.selected.elements,advanced:()=>[]}):[],a=o.reduce((e,t)=>"cat"===t.type?{...e,[r[t.alias]]:t}:e,{}),l=o.reduce((e,t)=>"item"===t.type?{...e,[r[t.alias]]:t}:e,{}),c=sl.is(s)?s.weights.reduce((e,t)=>({...e,[t.element.alias]:t.weight}),{}):{},d=t.filter(e=>!l[e.id]),u=(e,t,{isExempted:n}={})=>{var i,r,s;let o=e.id;if(!o)return null;let a=null!==(r=null===(i=null==t?void 0:t.exclude_list)||void 0===i?void 0:i.map(e=>e.exclude_alias))&&void 0!==r?r:[];return{column:e,el:t,id:o,isCalculation:e.calculationType!==e$.eNW.NonCalculated,isUncategorizedItem:void 0===e.gradebookCategoryId,isCategory:!1,isExempted:null!=n?n:!!t&&!!a.includes(t.alias),weight:t&&null!==(s=c[t.alias])&&void 0!==s?s:0}},p=(e,t)=>{var n,i,o,a,l,p;let m=null!==(i=null===(n=null==t?void 0:t.exclude_list)||void 0===n?void 0:n.map(e=>e.exclude_alias))&&void 0!==i?i:[],h=m.filter(e=>e!==(null==t?void 0:t.alias)).map(e=>r[e]);return{calculationRule:{dropLow:Number(null!==(o=null==t?void 0:t.drop_low)&&void 0!==o?o:0),dropHigh:Number(null!==(a=null==t?void 0:t.drop_high)&&void 0!==a?a:0),useOnly:null!==(l=null==t?void 0:t.maxmin)&&void 0!==l?l:null},el:t,id:e,isCalculation:!1,isCategory:!0,isUncategorizedItem:!1,isExempted:t&&!!m.includes(t.alias)||sc.is(s)&&void 0===t,weight:t&&null!==(p=c[t.alias])&&void 0!==p?p:0,childGradeItems:d.filter(t=>t.gradebookCategoryId===e).map(e=>u(e,void 0,{isExempted:!!h.find(t=>t===e.id)})).filter(e=>null!==e)}},m=n.map(e=>e?p(e,a[e]):null),h=Object.values(l).map(e=>({el:e,column:t.find(t=>t.id===r[e.alias])})).map(({column:e,el:t})=>void 0!==e?u(e,t):null),g=t.filter(e=>e.calculationType!==e$.eNW.NonCalculated&&!e.externalGrade&&!l[e.id]).map(e=>u(e)),f=t.filter(e=>!e.gradebookCategoryId&&e.calculationType===e$.eNW.NonCalculated&&!e.externalGrade&&!l[e.id]).map(e=>u(e));return{items:m.concat(h).concat(g).concat(f).filter(e=>!!e),formula:s}}function sE(e,t,n,i){return{formula:`<math xmlns="http://www.w3.org/1998/Math/MathML"><mi>@X@BBCalColElem(${e}:${JSON.stringify(t)})@X@</mi></math>`,aliases:n,isTotalCalculation:i}}function sI(e){let t=e.id.split("_")[1];return e.isCategory?`c_${t}`:`i_${t}`}function sw(e){return e.reduce(({aliases:t,elements:n},i)=>{var r,s,o,a,l;let c=new sr;if(c.alias=sI(i),c.exclude_list=[],t[c.alias]=i.id,i.isExempted&&(null===(r=c.exclude_list)||void 0===r||r.push(new si(c.alias))),i.isCategory){c.type="cat";let n=i.calculationRule;if(n&&((null!==(s=n.dropLow)&&void 0!==s?s:0)>0&&(c.drop_low=String(null==n?void 0:n.dropLow)),(null!==(o=n.dropHigh)&&void 0!==o?o:0)>0&&(c.drop_high=String(null==n?void 0:n.dropHigh)),n.useOnly&&(c.maxmin=n.useOnly)),!i.isExempted){let n=e.filter(e=>!e.isCategory).filter(e=>{var t;return(null===(t=e.column)||void 0===t?void 0:t.gradebookCategoryId)===i.id});(null!==(a=i.childGradeItems)&&void 0!==a?a:[]).filter(e=>e.isExempted).concat(n).forEach(e=>{var n;let i=sI(e);t[i]=e.id,null===(n=c.exclude_list)||void 0===n||n.push(new si(i))})}}else c.type="item";return(null===(l=c.exclude_list)||void 0===l?void 0:l.length)||(c.exclude_list=void 0),{aliases:t,elements:[...n,c]}},{aliases:{},elements:[]})}function sA(e,t,n){let i=new sl;i.running=t;let{aliases:r,elements:s}=sw(e),o=e.reduce((e,t)=>({...e,[sI(t)]:t.isExempted?0:t.weight}),{});return i.weights=s.map(e=>{let t=new so;return t.element=e,t.weight=o[e.alias],t}),sE("wgt",i,r,n)}function sk(e,t,n){let{aliases:i,elements:r}=sw(e);return sE("sum",new sc(sa(r),{running:t}),i,n)}let sT=(0,eV.makeStyles)(e=>(0,eV.createStyles)({usersGroups:{textOverflow:"ellipsis",overflow:"hidden"},groupTitle:{whiteSpace:"nowrap",fontWeight:e.typography.fontWeightMedium,color:e.palette.text.secondary}})),sP=e=>{let{userId:t,filteredGroupIds:n=[]}=e,{formatItems:i}=(0,eQ.h)(),r=sT(),s=i((0,eq.pJ)(e=>n.map(t=>eO.Ys.group.getGroupByGroupId(e,t)).filter(e=>{var n;return null===(n=null==e?void 0:e.memberships)||void 0===n?void 0:n.some(e=>e.userId===t)})).map(e=>e.title));return ei.createElement("div",{className:r.usersGroups},ei.createElement(eb.AnalyticsTooltip,{analyticsId:"filtered.users.groups.tooltip",title:s,placement:"top"},ei.createElement("span",{className:r.groupTitle}," ",s," ")))},sD=[{field:e$.PJt.IsPreviewStudent,direction:e$.SrV.Ascending},{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}],sx=[{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}],sR=[{field:e$.PJt.FamilyName,direction:e$.SrV.Descending},{field:e$.PJt.GivenName,direction:e$.SrV.Descending}],sL=[{field:e$.PJt.Grade,direction:e$.SrV.Ascending},{field:e$.PJt.IsPreviewStudent,direction:e$.SrV.Ascending},{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}],sN=[{field:e$.PJt.Grade,direction:e$.SrV.Descending},{field:e$.PJt.IsPreviewStudent,direction:e$.SrV.Ascending},{field:e$.PJt.FamilyName,direction:e$.SrV.Ascending},{field:e$.PJt.GivenName,direction:e$.SrV.Ascending}],s$={roleBucket:[e$.O8v.Taking]};var sO=n(743983),sG=n(998092),s_=n(985949),sM=n(879121),sB=n(256335),sF=n(539976),sU=n(741615),sV=n(823009),sH=n(598368);let sq=(0,eV.makeStyles)(e=>(0,eV.createStyles)({actionContainer:{alignItems:"center",display:"flex",flex:0,"&::before":{backgroundColor:e.palette.border.main,content:'" "',height:"50%",left:0,position:"absolute",width:"2px"}},contentContainer:{alignItems:"flex-start",display:"flex",flexDirection:"column",flex:1,justifyContent:"center","& h4":{display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-word",WebkitBoxOrient:"vertical",WebkitLineClamp:2}},controlsContainer:{alignItems:"center",display:"flex",flex:0},iconContainer:{alignItems:"center",display:"flex",flex:0,justifyContent:"center"},itemContainer:{alignItems:"stretch",borderColor:e.palette.border.main,borderStyle:"solid",borderWidth:0,display:"flex",flexDirection:"row",padding:e.spacing(.5),"& > div":{position:"relative"}},rootContainer:{backgroundColor:e.palette.background.default,borderColor:e.palette.border.main,borderWidth:"1px"}})),sj=({Action:e,ActionProps:t,ContainerProps:n,Content:i,ContentProps:r,Controls:s,Icon:o,RootProps:a,children:l,testId:c})=>{let d=sq();return ei.createElement(eV.Box,{"data-testid":c,...a,className:(0,eX.Z)(d.rootContainer,null==a?void 0:a.className)},ei.createElement(eV.Box,{...n,className:(0,eX.Z)(d.itemContainer,null==n?void 0:n.className)},void 0!==o?ei.createElement(eV.Box,{className:d.iconContainer},o):void 0,ei.createElement(eV.Box,{...r,className:(0,eX.Z)(d.contentContainer,null==r?void 0:r.className)},i),ei.createElement(eV.Box,{className:d.controlsContainer},s),void 0!==e?ei.createElement(eV.Box,{...t,className:(0,eX.Z)(d.actionContainer,null==t?void 0:t.className)},e):void 0),l)},sz=(0,eV.makeStyles)(e=>(0,eV.createStyles)({input:{"& > div":{paddingRight:({unitHint:e=""})=>""!==e?"10px":void 0}},root:{display:"inline-block",position:"relative",width:"4.5rem"},unitHint:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",position:"absolute",right:0,top:0,textAlign:"center",width:"1.5rem"},weightNotApplicable:{textAlign:"center",color:e.palette.text.disabled}})),sW=({alias:e,analyticsId:t="course.grades.overallGrade.weight.input.text",disabled:n=!1,isNotApplicable:i=!1,onBlur:r,onFocus:s,unitHint:o="",value:a,...l})=>{let c=sz({unitHint:o}),d=(0,ed.q)(),u=`overall-grade-weight-validation-${e}`,[p,m]=ei.useState(a),[h,g]=ei.useState(!1),[f,b]=ei.useState(""),v=ei.useCallback((e,t)=>{null==r||r(t,p)},[r,p]),y=ei.useCallback((...e)=>{m(a),null==s||s(...e)},[s,a]);return ei.useEffect(()=>{n&&(g(!0),b(""))},[n]),ei.createElement(eV.Box,{className:c.root},i?ei.createElement(eb.AnalyticsTypography,{className:c.weightNotApplicable,variant:"body1"},d("course.grades.overallGrade.NA")):ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsTooltip,{id:u,analyticsId:`${t}.tooltip`,open:""!==f,placement:"top",title:f},ei.createElement(ej.W1I,{analyticsId:t,ariaDescribedBy:""!==f?u:void 0,disabled:n,className:c.input,error:!h,helperText:void 0,hideErrorMessage:!0,onChangeValidState:(e,t)=>{g(e),b(e?"":t.trim())},max:100,min:0,onBlurNative:v,onFocus:y,value:a,...l})),""!==o?ei.createElement(eV.Box,{"aria-hidden":!0,className:c.unitHint},ei.createElement(eb.AnalyticsTypography,null,o)):void 0))};var sK=n(860246);let sZ=(0,eV.makeStyles)(e=>(0,eV.createStyles)({actionPropsUnavailable:{visibility:"hidden"},contentEditCalculationRuleButton:{paddingBottom:e.spacing(.5),paddingRight:e.spacing(1),paddingTop:e.spacing(.5)},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},icon:{visibility:"hidden"},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial","& > div":{padding:e.spacing(1)}},itemRoot:{background:"none",borderBottomStyle:"solid","&:last-child":{borderBottomStyle:"none"}},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),sQ=({alias:e,categoryName:t,icon:n,isExempted:i,isReadOnly:r,onClickExempt:s,onClickLink:o,pointsPossible:a,subTitle:l,title:c,valueType:d,isExternalGrade:u})=>{let p=`child-item-${e}-overflow-menu`,m=(0,eV.useTheme)(),h=(0,eV.useMediaQuery)(m.breakpoints.down("sm")),g=sZ({isExempted:i}),{translate:f,formatNumber:b}=(0,eQ.h)(),v="points"===d,y=!s,S=ei.useMemo(()=>(0,nR.dJ)(n),[n]),[C,E]=ei.useState(null),I=ei.useCallback(e=>{e.stopPropagation(),E(e.currentTarget)},[]),w=u?"course.grades.overallGrade":"course.grades.totalCalculation";return ei.createElement(sj,{RootProps:{className:g.itemRoot},ContainerProps:{className:g.itemContainer},Icon:ei.createElement(S,{className:g.icon}),Content:ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsTypography,{component:"div",variant:"h4"},f(c)),void 0!==l?ei.createElement(eb.AnalyticsTypography,{variant:"body2"},f(l)):void 0),Controls:ei.createElement(ei.Fragment,null,v?ei.createElement(eV.Box,{"data-test-id":"points-possible",className:g.pointsPossibleContainer},b(a,{maximumFractionDigits:2})):void 0,h&&v&&!r?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${w}.toggleExempt.button`,"aria-label":f(i?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:c}),"aria-pressed":i,className:(0,eX.Z)(g.controlButton,{[g.controlButtonUnavailable]:y}),disabled:r||y,onClick:s},ei.createElement(sM.d,{className:i?g.controlButtonLockedActive:void 0})),r||!h||v?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${w}.unlink.button`,"aria-label":f("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),onClick:o},ei.createElement(sK.h,null)),!r&&v&&h?ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${w}.toggleItemMobileOverflowMenu.toggle`,"aria-controls":C?p:void 0,"aria-expanded":null!==C,"aria-haspopup":"menu",className:(0,eX.Z)(g.controlButton),onClick:I},ei.createElement(sF.Menu,null)),ei.createElement(eb.AnalyticsMenu,{analyticsId:`${w}.toggleItemMobileOverflowMenu.menu`,anchorEl:C,id:p,onClose:e=>{var t;null===(t=e.stopPropagation)||void 0===t||t.call(e),E(null)},open:null!==C,MenuListProps:{"aria-label":f("course.grades.overallGrade.overflowActions")}},y?void 0:ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${w}.toggleExempt.button`,button:!0,"aria-label":f(i?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:c}),"aria-pressed":i,onClick:s},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${w}.listItemIcon`},ei.createElement(sM.d,{className:i?g.controlButtonLockedActive:void 0})),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${w}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,f("course.grades.overallGrade.exempt")))),ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${w}.unlink.button`,"aria-label":f("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),button:!0,onClick:o},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${w}.listItemIcon`},ei.createElement(sK.h,null)),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${w}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,f("course.grades.overallGrade.unlinkFromCategory")))))):void 0),Action:h?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${w}.unlink.button`,"aria-label":f("course.grades.overallGrade.unlinkFromCategoryName",{title:t}),className:r?g.controlButtonUnavailable:void 0,disabled:r,onClick:o},ei.createElement(sK.h,null)),ActionProps:{className:r?g.actionPropsUnavailable:void 0},testId:c})},sJ=(0,eV.makeStyles)(e=>(0,eV.createStyles)({contentEditCalculationRuleButton:{paddingBottom:e.spacing(.5),paddingRight:e.spacing(1),paddingTop:e.spacing(.5)},contentSubTextContainer:{display:"flex",flexDirection:"row","& > *":{paddingLeft:e.spacing(1),paddingRight:e.spacing(1),position:"relative"},"& > *:not(:first-child):before":{borderLeft:`solid 1px ${e.palette.border.dark}`,content:'""',display:"inline-block",height:"18px",left:0,position:"absolute"},"& > *:first-child":{paddingLeft:0}},contentSubTextItems:{color:e.palette.text.hint},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial",borderBottomWidth:({isExpanded:e})=>e?"1px":"0",boxShadow:({isExpanded:t})=>t?`${e.palette.border.dark} 0px 4px 5px -3px`:"none","& > div":{padding:e.spacing(1)}},itemRoot:{borderStyle:"solid",marginBottom:e.spacing(.25),marginTop:e.spacing(.25)},childrenContainer:{display:({isExpanded:e})=>e?"block":"none"},noChildrenContainer:{color:e.palette.text.secondary,padding:"20px",textAlign:"center"},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),sY=({alias:e,calculationRule:t,childItems:n=[],icon:i,isExempted:r,isLocked:s,isReadOnly:o,numGradableItemsInCategory:a,onBlurWeight:l,onChangeWeight:c,onClickEditCalculationRule:d,onClickExempt:u,onClickLock:p,pointsPossible:m,title:h,valueType:g,weight:f,isExternalGrade:b})=>{let v=(0,eV.useTheme)(),y=(0,eV.useMediaQuery)(v.breakpoints.down("sm")),{translate:S,formatNumber:C}=(0,eQ.h)(),E="points"===g,[I,w]=ei.useState(!1),A=!d,k=!u,T=!p,P=k&&A,D=b?"course.grades.overallGrade":"course.grades.totalCalculation",x=sJ(ei.useMemo(()=>({isCompact:y,isExempted:r,isExpanded:I}),[y,r,I])),R=`item-${e}-overflow-menu`,L=`category-children-${e}`,N=`${L}-toggle`,[$,O]=ei.useState(null),G=ei.useCallback(e=>{e.stopPropagation(),O(e.currentTarget)},[]),_=ei.useCallback(e=>{e.stopPropagation(),w(e=>!e)},[]),M=ei.useMemo(()=>(0,nR.dJ)(i),[i]);return ei.createElement(sj,{RootProps:{className:x.itemRoot},ContainerProps:{className:x.itemContainer},Icon:ei.createElement(M,null),Content:ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsTypography,{component:"div",variant:"h4"},S(h)),ei.createElement(eV.Box,{className:x.contentSubTextContainer},ei.createElement(eb.AnalyticsTypography,{className:x.contentSubTextItems},S("course.grades.overallGrade.nItems.plural",{n:n.length})),o||y||A?void 0:ei.createElement(sy,{calculationRule:t,numGradableItemsInCategory:a,ButtonProps:{"aria-label":S("course.grades.overallGrade.editCalculationRulesForCategory",{title:h}),className:x.contentEditCalculationRuleButton,disabled:r,onClick:d},isExternalGrade:b}))),ContentProps:{onClick:e=>{y&&null===$&&_(e)}},Controls:ei.createElement(ei.Fragment,null,y?ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.overallGradeController.collapse`,"aria-controls":I?L:void 0,"aria-expanded":I,"aria-label":S(I?"course.grades.overallGrade.collapseItemsForCategory":"course.grades.overallGrade.expandItemsForCategory",{title:h}),id:N,onClick:_},I?ei.createElement(sV.C,null):ei.createElement(sU.I,null)):void 0,o||y||E?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.toggleLocked.button`,"aria-label":S(s?"course.grades.overallGrade.unlockWeightForCategory":"course.grades.overallGrade.lockWeightForCategory",{title:h}),"aria-pressed":s,className:(0,eX.Z)(x.controlButton,{[x.controlButtonUnavailable]:T}),disabled:T||r,onClick:p},!s||r?ei.createElement(sH.d,null):ei.createElement(sB.H,null)),E&&void 0!==m?ei.createElement(eV.Box,{"data-test-id":"points-possible",className:x.pointsPossibleContainer},C(m,{maximumFractionDigits:2})):ei.createElement(sW,{alias:e,analyticsId:`${D}.updateTotalWeight.input.text`,ariaLabel:S("course.grades.overallGrade.weightForCategory",{title:h}),disabled:o||s||r,isNotApplicable:!c,onBlur:l,onChange:c,unitHint:"%",value:f}),o||!y||E?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.toggleLocked.button`,"aria-label":S(!s||r?"course.grades.overallGrade.lockWeightForCategory":"course.grades.overallGrade.unlockWeightForCategory",{title:h}),"aria-pressed":s,className:(0,eX.Z)(x.controlButton,{[x.controlButtonUnavailable]:T}),disabled:T||r,onClick:p},!s||r?ei.createElement(sH.d,null):ei.createElement(sB.H,null)),o||!y?ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.toggleExempt.button`,"aria-label":S(r?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:h}),"aria-pressed":r,className:(0,eX.Z)(x.controlButton,{[x.controlButtonUnavailable]:k}),disabled:o||k,onClick:u},ei.createElement(sM.d,{className:r?x.controlButtonLockedActive:void 0})):void 0,!o&&y?ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.toggleItemMobileOverflowMenu.toggle`,"aria-controls":$?R:void 0,"aria-expanded":null!==$,"aria-haspopup":"menu",className:(0,eX.Z)(x.controlButton,{[x.controlButtonUnavailable]:P}),disabled:P,onClick:G},ei.createElement(sF.Menu,null)),ei.createElement(eb.AnalyticsMenu,{analyticsId:`${D}.toggleItemMobileOverflowMenu.menu`,anchorEl:$,id:R,onClose:e=>{var t;null===(t=e.stopPropagation)||void 0===t||t.call(e),O(null)},open:null!==$,MenuListProps:{"aria-label":S("course.grades.overallGrade.overflowActions")}},ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${D}.toggleExempt.button`,"aria-label":S(r?"course.grades.overallGrade.unexemptCategory":"course.grades.overallGrade.exemptCategory",{title:h}),"aria-pressed":r,button:!0,onClick:u},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${D}.listItemicon`},ei.createElement(sM.d,{className:r?x.controlButtonLockedActive:void 0})),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${D}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,S("course.grades.overallGrade.exempt")))),ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${D}.editCalculationRule`,"aria-label":S("course.grades.overallGrade.editCalculationRulesForCategory",{title:h}),button:!0,disabled:r,onClick:d},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${D}.listItemIcon`},ei.createElement(sO.m,null)),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${D}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,S("course.grades.overallGrade.editCalculationRules")))))):void 0),Action:y?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${D}.overallGradeController.collapse`,"aria-controls":I?L:void 0,"aria-label":S(I?"course.grades.overallGrade.collapseItemsForCategory":"course.grades.overallGrade.expandItemsForCategory",{title:h}),"aria-expanded":I,id:N,onClick:_},I?ei.createElement(s_.K,null):ei.createElement(sG._,null))},ei.createElement(eV.Box,{id:L,role:"region","aria-labelledby":N,className:(0,eX.Z)(x.childrenContainer,0===n.length?x.noChildrenContainer:null)},n.length>0?n.map(e=>ei.createElement(sQ,{key:e.alias,...e,categoryName:h,isReadOnly:o,valueType:g,isExternalGrade:b})):ei.createElement(eb.AnalyticsTypography,null,S("course.grades.overallGrade.noItemsInThisCategory"))))};var sX=n(862482);let s0=(0,eV.makeStyles)(e=>(0,eV.createStyles)({actionPropsUnavailable:{visibility:"hidden"},controlButton:{padding:e.spacing(1)},controlButtonUnavailable:{visibility:"hidden"},controlButtonLockedActive:{color:e.palette.brand.main},itemContainer:{backgroundColor:({isExempted:t})=>t?e.palette.background.b2:"initial","& > div":{padding:e.spacing(1)}},itemRoot:{borderStyle:"solid",marginBottom:e.spacing(.25),marginTop:e.spacing(.25)},pointsPossibleContainer:{color:e.palette.text.hint,margin:"0 10px",textAlign:"right",width:"80px"}})),s1=({alias:e,isExempted:t,isLocked:n,isReadOnly:i,onBlurWeight:r,onChangeWeight:s,onClickExempt:o,onClickLink:a,onClickLock:l,pointsPossible:c=0,subTitle:d,title:u,valueType:p,weight:m,isExternalGrade:h})=>{let g=(0,eV.useTheme)(),f=(0,eV.useMediaQuery)(g.breakpoints.down("sm")),b=s0({isExempted:t}),{translate:v,formatNumber:y}=(0,eQ.h)(),S="points"===p,C=ei.useMemo(()=>`item-${e}-overflow-menu`,[e]),E=h?"course.grades.overallGrade":"course.grades.totalCalculation",[I,w]=ei.useState(null),A=ei.useCallback(e=>{e.stopPropagation(),w(e.currentTarget)},[]);return ei.createElement(sj,{RootProps:{className:b.itemRoot},ContainerProps:{className:b.itemContainer},Content:ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsTypography,{component:"div",variant:"h4"},v(u)),f?void 0:ei.createElement(eb.AnalyticsTypography,{variant:"body2"},v(d))),Controls:ei.createElement(ei.Fragment,null,i||f||S?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${E}.toggleLocked.button`,"aria-label":v(!n||t?"course.grades.overallGrade.lockWeightForItem":"course.grades.overallGrade.unlockWeightForItem",{title:u}),"aria-pressed":n,className:b.controlButton,onClick:l,disabled:t},!n||t?ei.createElement(sH.d,null):ei.createElement(sB.H,null)),S?ei.createElement(eV.Box,{"data-test-id":"points-possible",className:b.pointsPossibleContainer},y(c,{maximumFractionDigits:2})):ei.createElement(sW,{alias:e,analyticsId:`${E}.updateTotalWeight.input.text`,ariaLabel:v("course.grades.overallGrade.weightForItem",{title:u}),disabled:i||n||t,onBlur:r,onChange:s,value:m,unitHint:"%"}),i||!f||S?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${E}.toggleLocked.button`,"aria-label":v(!n||t?"course.grades.overallGrade.lockWeightForItem":"course.grades.overallGrade.unlockWeightForItem",{title:u}),"aria-pressed":n,className:b.controlButton,disabled:t,onClick:l},!n||t?ei.createElement(sH.d,null):ei.createElement(sB.H,null)),i||!f?ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${E}.toggleExempt.button`,"aria-label":v(t?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:u}),"aria-pressed":t,className:b.controlButton,disabled:i,onClick:o},ei.createElement(sM.d,{className:t?b.controlButtonLockedActive:void 0})):void 0,!i&&f?ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${E}.toggleItemMobileOverflowMenu.toggle`,"aria-controls":I?C:void 0,"aria-expanded":null!==I,"aria-haspopup":"menu",onClick:A},ei.createElement(sF.Menu,null)),ei.createElement(eb.AnalyticsMenu,{analyticsId:`${E}.toggleItemMobileOverflowMenu.menu`,anchorEl:I,id:C,onClose:()=>w(null),open:null!==I,MenuListProps:{"aria-label":v("course.grades.overallGrade.overflowActions")}},ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${E}.toggleExempt.button`,"aria-label":v(t?"course.grades.overallGrade.unexemptItem":"course.grades.overallGrade.exemptItem",{title:u}),"aria-pressed":t,button:!0,onClick:o},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${E}.listItemIcon`},ei.createElement(sM.d,{className:t?b.controlButtonLockedActive:void 0})),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${E}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,v("course.grades.overallGrade.exempt")))),ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${E}.link.button`,"aria-label":v("course.grades.overallGrade.linkToCategoryName",{title:d}),button:!0,onClick:a},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:`${E}.listItemIcon`},ei.createElement(sX.r,null)),ei.createElement(eb.AnalyticsListItemText,{analyticsId:`${E}.listItemText`},ei.createElement(eb.AnalyticsTypography,null,v("course.grades.overallGrade.linkToCategory")))))):void 0),Action:f?void 0:ei.createElement(eb.AnalyticsIconButton,{analyticsId:`${E}.link.button`,"aria-label":v("course.grades.overallGrade.linkToCategoryName",{title:d}),className:i?b.controlButtonUnavailable:void 0,disabled:i,onClick:a},ei.createElement(sX.r,null)),ActionProps:{className:i?b.actionPropsUnavailable:void 0}})};var s2=n(914271),s4=n(444424);let s6=(0,eV.makeStyles)(e=>(0,eV.createStyles)({showMore:{"&, &:active, &:focus, &:hover":{color:e.palette.text.primary},marginLeft:"8px"},details:{display:({expandDetails:e})=>e?"block":"none","& svg":{verticalAlign:"middle"}}})),s5={excludeIcon:ei.createElement(sM.d,null),lockIcon:ei.createElement(s2.S,null),unlinkIcon:ei.createElement(s4.x,null)},s3=({calculationType:e,isExternalGrade:t})=>{let n=(0,eV.useTheme)(),i=(0,eV.useMediaQuery)(n.breakpoints.down("sm")),r=(0,ed.q)(),[s,o]=ei.useState(),a=null!=s?s:!i,l=s6({expandDetails:a}),c=t?"course.grades.overallGrade":"course.grades.totalCalculation",d=ei.useMemo(()=>{switch(e){case"weighted":return ei.createElement(ei.Fragment,null,ei.createElement("li",null,r("course.grades.overallGrade.calculationDetail.li0",s5)),ei.createElement("li",null,r("course.grades.overallGrade.calculationDetail.li3",s5)),ei.createElement("li",null,t?r("course.grades.overallGrade.calculationDetail.li2",s5):r("course.grades.totalCalculation.calculationDetail.li2",s5)));case"points":return ei.createElement(ei.Fragment,null,ei.createElement("li",null,r("course.grades.overallGrade.calculationDetail.li4",s5)),ei.createElement("li",null,t?r("course.grades.overallGrade.calculationDetail.li2",s5):r("course.grades.totalCalculation.calculationDetail.li2",s5)));case"advanced":return}},[e,t,r]);return ei.createElement(ei.Fragment,null,ei.createElement("span",null,r(function(){switch(e){case"weighted":return t?"course.grades.overallGrade.calculationDetail.p0":"course.grades.totalCalculation.calculationDetail.p0";case"points":return"course.grades.overallGrade.calculationDetail.p1";case"advanced":return"course.grades.overallGrade.calculationDetail.p2"}}())),d?ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsLink,{"aria-controls":a?"overall-grade-detail-expand":void 0,"aria-expanded":a,analyticsId:`${c}.calculationDetail.showMore`,className:l.showMore,component:"button",id:"overall-grade-detail-expand-toggle",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(!a)}},ei.createElement(eb.AnalyticsTypography,{component:"span"},a?r("course.grades.overallGrade.calculationDetail.showLess"):r("course.grades.overallGrade.calculationDetail.showMore"))),ei.createElement("div",{id:"overall-grade-detail-expand",role:"region","aria-labelledby":"overall-grade-detail-expand-toggle",className:l.details},ei.createElement("ul",null,d))):void 0)},s8=(0,eV.makeStyles)(e=>(0,eV.createStyles)({filterWrapper:{display:"flex",flexDirection:"column",[e.breakpoints.up("md")]:{flexDirection:"row",flexWrap:"wrap",alignContent:"center",gap:"12px"}},textFieldFilter:{display:"flex",margin:"8px 0px",flexGrow:1,[e.breakpoints.up("sm")]:{minWidth:"240px"},[e.breakpoints.up("lg")]:{flexGrow:0}}}));var s9=n(465139);function s7(e){let t=(0,eq.pJ)(e=>{var t,n;return null===(n=null===(t=eO.Ys.app.getLocation(e))||void 0===t?void 0:t.queryParams)||void 0===n?void 0:n.gradingStatus}),n=(0,e$.LAV)(t),i=(0,s9.f0)(e);return(0,ei.useEffect)(()=>{np.Nd.search({gradingStatus:t},{location:"replace"}),null==i||i(n)},[i,n,t]),i?e=>{np.Nd.search({gradingStatus:e,page:"1"})}:n}let oe=e=>{let t=(0,eq.pJ)(e=>{var t,n;return null===(n=null===(t=eO.Ys.app.getLocation(e))||void 0===t?void 0:t.queryParams)||void 0===n?void 0:n.submissionStatus});return(0,ei.useEffect)(()=>{np.Nd.search({submissionStatus:t},{location:"replace"}),e((0,e$.Aev)(t))},[t,e]),e=>{np.Nd.search({submissionStatus:e,page:"1"})}},ot=(e,t)=>{let n=(0,ed.q)(),i=(0,eq.gH)("course.grades.gradebook-item.filters","organization.grades.gradebook-item.filters");return(0,ei.useMemo)(()=>{let r=new Map;switch(t?r.set(e$.nXr.AllStatuses,n("course.grades.gradebook-item.filters.studentStatus.allGroupStatuses")):r.set(e$.nXr.AllStatuses,n(i("course.grades.gradebook-item.filters.studentStatus.allStatuses"))),e.toString()){case eO.u$1.UltraAssignment.toString():case eO.u$1.ClassicAssignment.toString():case eO.u$1.Test.toString():case eO.u$1.Survey.toString():r.set(e$.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noSubmission")),r.set(e$.nXr.AttemptInProgress,n("course.grades.gradebook-item.filters.studentStatus.draftSaved")),r.set(e$.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.submitted"));break;case eO.u$1.Journal.toString():r.set(e$.nXr.NoEntry,n("course.grades.gradebook-item.filters.studentStatus.noEntry")),r.set(e$.nXr.EntryMade,n("course.grades.gradebook-item.filters.studentStatus.entryMade"));break;case eO.u$1.Discussion.toString():r.set(e$.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noEntry")),r.set(e$.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.entryMade"));break;case eO.u$1.Scorm.toString():r.set(e$.nXr.NoAttempt,n("course.grades.gradebook-item.filters.studentStatus.noSubmission")),r.set(e$.nXr.AttemptInProgress,n("course.grades.gradebook-item.filters.studentStatus.draftSaved")),r.set(e$.nXr.AttemptSubmitted,n("course.grades.gradebook-item.filters.studentStatus.submitted"))}return r},[e,t,n,i])},on=(e,t,n,i,r)=>{let s=(0,ed.q)();return(0,ei.useMemo)(()=>{let o=new Map;if(!i)return o;let a=(e,t)=>{r(e)&&o.set(e,t)};switch(a(e$.qr.AllStatuses,s("course.grades.gradebook-item.filters.gradingStatus.allStatuses")),e.toString()){case eO.u$1.UltraAssignment.toString():case eO.u$1.ClassicAssignment.toString():case eO.u$1.Test.toString():case eO.u$1.Survey.toString():t?n?(a(e$.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsToReconcile")),a(e$.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting")),a(e$.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToReconcile"))):a(e$.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")):(a(e$.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")),a(e$.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting"))),a(e$.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed")),o.get(e$.qr.NothingToGrade)||a(e$.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToGrade"));break;case eO.u$1.Journal.toString():case eO.u$1.Discussion.toString():case eO.u$1.Scorm.toString():a(e$.qr.NeedsGrading,s("course.grades.gradebook-item.filters.gradingStatus.needsGrading")),a(e$.qr.GradeNeedsPosting,s("course.grades.gradebook-item.filters.gradingStatus.needsPosting")),a(e$.qr.Completed,s("course.grades.gradebook-item.filters.gradingStatus.completed")),a(e$.qr.NothingToGrade,s("course.grades.gradebook-item.filters.gradingStatus.nothingToGrade"))}return o},[e,t,n,s,i,r])},oi=({analyticsId:e,gradingFilterSelected:t,scoreProviderHandler:n,isDelegated:i,isUserReconciler:r,isGraded:s=!0,canShowOption:o=()=>!0,AnalyticsTextFieldProps:a,showGradingFilter:l,disableGradingFilter:c})=>{let d=(0,ed.q)(),u=(0,s9.zX)(o),p=on(n,i,r,s,u),[m,h]=ei.useState(()=>p.keys().next().value),g=s7(ei.useCallback(e=>{m!==e&&u(e)&&(h(e),null==t||t(e))},[m,h,t,u])),f=e=>{m!==e&&u(e)&&g(e)};return p.size>0&&l?ei.createElement(eb.AnalyticsTextField,{analyticsId:`${e}.grading-status`,select:!0,id:"submission-list-dropdown-filters-grading-status",label:d("course.grades.gradebook-item.filters.gradingStatusFilterLabel"),floatingLabel:!0,value:p.get(m),disabled:c,...a},[...p.keys()].map(t=>ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${e}.grading-status.${t}.list-item`,button:!0,onClick:()=>f(t),key:t,value:p.get(t)},p.get(t)))):null},or=e=>{let{analyticsId:t,scoreProviderHandler:n,studentFilterSelected:i,isGroupContent:r}=e,s=(0,ed.q)(),o=(0,eq.gH)("course.grades.gradebook-item.filters","organization.grades.gradebook-item.filters"),a=ot(n,r),l=s8(),[c,d]=ei.useState(e$.nXr.AllStatuses),u=oe(ei.useCallback(e=>{c!==e&&(d(e),null==i||i(e))},[c,d,i])),p=e=>{c!==e&&u(e)},m=s(r?"course.grades.gradebook-item.filters.groupStatusFilterLabel":o("course.grades.gradebook-item.filters.studentStatusFilterLabel"));return ei.createElement("div",{className:l.filterWrapper},ei.createElement(eb.AnalyticsTextField,{analyticsId:`${t}.student-status`,select:!0,id:"submission-list-dropdown-filters-student-status",label:m,floatingLabel:!0,value:a.get(c),className:l.textFieldFilter},[...a.keys()].map(e=>ei.createElement(eb.AnalyticsMenuItem,{analyticsId:`${t}.student-status.${e}.list-item`,button:!0,onClick:()=>p(e),key:e,value:a.get(e)},a.get(e)))),ei.createElement(oi,{...e,AnalyticsTextFieldProps:{className:l.textFieldFilter}}))},os=(0,eV.makeStyles)(e=>{let t=e.spacing(2.5),n=e.spacing(1);return(0,eV.createStyles)({root:{display:"inline-flex",flexDirection:"row"},buttonBase:{backgroundColor:e.palette.background.default,border:`solid 1px ${e.palette.border.main}`,borderRightWidth:0,color:"#666",margin:0,paddingBottom:n,paddingLeft:t,paddingRight:t,paddingTop:n,"&:first-child":{borderBottomLeftRadius:4,borderTopLeftRadius:4},"&:last-child":{borderBottomRightRadius:4,borderRightWidth:1,borderTopRightRadius:4},".side-panel-content &":{cursor:"pointer"}},buttonSelected:{backgroundColor:e.palette.common.black,borderColor:e.palette.common.black,color:e.palette.common.white}})}),oo=({isReadOnly:e=!1,onClick:t,selected:n,isExternalGrade:i=!0})=>{let r=os(),s=(0,ed.q)(),o="overall-grade-tab-calculation-type",a=i?"course.grades.overallGrade":"course.grades.totalCalculation";function l(e,n){e.stopPropagation(),t(n)}return ei.createElement(eV.Box,{className:r.root},ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${a}.tab.points`,className:(0,eX.Z)(r.buttonBase,"points"===n?r.buttonSelected:null,"js-total-points-tab"),control:ei.createElement(eV.HideOffScreen,{component:"span"},ei.createElement(eb.AnalyticsRadio,{checked:"points"===n,analyticsId:`${a}.tab.points.radio`,disabled:e,id:"overall-grade-tab-points",name:o,onChange:e=>l(e,"points"),tabIndex:-1,value:"points"})),label:s("course.grades.overallGrade.points"),tabIndex:0}),ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${a}.tab.weighted`,className:(0,eX.Z)(r.buttonBase,"weighted"===n?r.buttonSelected:null,"js-total-weighted-tab"),control:ei.createElement(eV.HideOffScreen,{component:"span"},ei.createElement(eb.AnalyticsRadio,{checked:"weighted"===n,analyticsId:`${a}.tab.weighted.radio`,disabled:e,id:"overall-grade-tab-weighted",name:o,onChange:e=>l(e,"weighted"),tabIndex:-1,value:"weighted"})),disabled:e,label:s("course.grades.overallGrade.weighted"),tabIndex:0}),i&&ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:`${a}.tab.advanced`,className:(0,eX.Z)(r.buttonBase,"advanced"===n?r.buttonSelected:null),control:ei.createElement(eV.HideOffScreen,{component:"span"},ei.createElement(eb.AnalyticsRadio,{checked:"advanced"===n,analyticsId:`${a}.tab.advanced.radio`,disabled:e,id:"overall-grade-tab-advanced",name:o,onChange:e=>l(e,"advanced"),tabIndex:-1,value:"advanced"})),label:s("course.grades.overallGrade.advanced"),tabIndex:0}))};var oa=n(342494),ol=n(784899),oc=n(989571),od=n(715584);let ou=(0,eV.makeStyles)(e=>(0,eV.createStyles)({root:{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%"},calculationTypeButtonsContainer:{paddingLeft:"60px","& button":{marginRight:"16px"}},calculationTypeContainer:{maxWidth:"650px",minWidth:"350px",width:"50%","& ul":{listStyleType:"none"}},calculationTypeOptionContainer:{marginTop:e.spacing(3),"&:last-of-type":{marginBottom:e.spacing(6)}},calculationTypeOptionDetailsContainer:{marginLeft:"20px"},calculationTypeOptionTitle:{lineHeight:"32px"},calculationTypeOptionsContainer:{paddingLeft:"60px"},description:{color:e.palette.text.secondary},exampleRowChild:{},exampleTable:{minWidth:"350px","& tr":{height:"24px"},"& tr.example-row-child th, & tr.example-row-child td":{paddingTop:0},"& th, & td":{border:"none",padding:0,paddingTop:"16px"}}})),op=({description:e,example:t,isSelected:n,value:i})=>{let r=ou(),s=(0,ed.q)(),o=`overall-grade-wizard-option-${i}`,a=`${o}-description`,[l,c]=ei.useState(!1);return ei.createElement(eV.Box,{className:r.calculationTypeOptionContainer},ei.createElement(eb.AnalyticsFormControlLabel,{analyticsId:"course.grades.overallGrade.formControlLabel",control:ei.createElement(eb.AnalyticsRadio,{analyticsId:`course.grades.overallGrade.wizard.${i}.radio`,id:o,inputProps:{"aria-checked":n,"aria-describedby":e?a:void 0},value:i}),htmlFor:o,label:ei.createElement(eb.AnalyticsTypography,{className:r.calculationTypeOptionTitle},s(`course.grades.overallGrade.wizard.options.${i}.name`))}),ei.createElement(eV.Box,{className:r.calculationTypeOptionDetailsContainer},void 0!==e?ei.createElement(eV.Box,{id:a,className:r.description},e):void 0,void 0!==t?ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsLink,{"aria-controls":`overall-grade-wizard-${i}-example`,"aria-expanded":l,"aria-label":s(l?`course.grades.overallGrade.wizard.options.${i}.hideExampleUnique`:`course.grades.overallGrade.wizard.options.${i}.showExampleUnique`),analyticsId:`course.grades.overallGrade.wizard.${i}.example.button`,component:"button",id:`overall-grade-wizard-${i}-example-toggle`,onClick:function(e){e.stopPropagation(),c(e=>!e)}},ei.createElement(eb.AnalyticsTypography,{component:"span"},s(l?"course.grades.overallGrade.wizard.hideExample":"course.grades.overallGrade.wizard.showExample"))),l?ei.createElement(eV.Box,{id:`overall-grade-wizard-${i}-example`},t):void 0):void 0))},om=({onCancel:e,onComplete:t})=>{let n=ou(),{translate:i,formatNumber:r}=(0,eQ.h)(),[s,o]=ei.useState("points");return ei.createElement(eV.Box,{className:n.root},ei.createElement(eV.Box,{className:n.calculationTypeContainer},ei.createElement(oa.Z,{component:"fieldset"},ei.createElement(ol.Z,{component:"legend"},ei.createElement(eb.AnalyticsTypography,{variant:"h2"},i("course.grades.overallGrade.wizard.header")),ei.createElement(eb.AnalyticsTypography,null,i("course.grades.overallGrade.wizard.description"))),ei.createElement(eV.Box,{className:n.calculationTypeOptionsContainer},ei.createElement(eb.AnalyticsRadioGroup,{analyticsId:"course.grades.overallGrade.RadioGroup",hasCustomLegend:!0,defaultValue:"points",onChange:function(e,t){o(t)}},ei.createElement(op,{example:ei.createElement(eb.AnalyticsTable,{analyticsId:"course.grades.overallGrade.table",className:n.exampleTable},ei.createElement(eb.AnalyticsTableBody,{analyticsId:"course.grades.overallGrade.tableBody"},ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignmentsCategory")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:r(200)}))),ei.createElement(oc.Z,{className:"example-row-child"},ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment1")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:r(100)}))),ei.createElement(oc.Z,{className:"example-row-child"},ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment2")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:r(100)}))),ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.finalExam")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.points.example.nPoints",{points:r(300)}))),ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.overallGrade")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.points.example.outOfPoints",{points:r(500)}))))),isSelected:"points"===s,value:"points"}),ei.createElement(op,{example:ei.createElement(eb.AnalyticsTable,{analyticsId:"course.grades.overallGrade.table",className:n.exampleTable},ei.createElement(eb.AnalyticsTableBody,{analyticsId:"course.grades.overallGrade.tableBody"},ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignmentsCategory")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.nPercent",{percent:r(40)}))),ei.createElement(oc.Z,{className:"example-row-child"},ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment1")),ei.createElement(od.Z,null)),ei.createElement(oc.Z,{className:"example-row-child"},ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.assignment2")),ei.createElement(od.Z,null)),ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.finalExam")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.nPercent",{percent:r(60)}))),ei.createElement(oc.Z,null,ei.createElement(od.Z,{component:"th"},i("course.grades.overallGrade.wizard.options.points.example.overallGrade")),ei.createElement(od.Z,null,i("course.grades.overallGrade.wizard.options.weighted.example.outOfPercent",{percent:r(100)}))))),isSelected:"weighted"===s,value:"weighted"}),ei.createElement(op,{description:ei.createElement(eb.AnalyticsTypography,null,i("course.grades.overallGrade.wizard.options.advanced.description")),isSelected:"advanced"===s,value:"advanced"})))),ei.createElement(eV.Box,{className:n.calculationTypeButtonsContainer},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:"course.grades.overallGrade.wizard.cancel.button",onClick:function(t){t.stopPropagation(),e()}},i("course.grades.overallGrade.wizard.cancel")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:"course.grades.overallGrade.wizard.next.button",disabled:void 0===s,onClick:function(e){e.stopPropagation(),void 0!==s&&t({calculationType:s})}},i("course.grades.overallGrade.wizard.next")))))},oh=(0,eV.makeStyles)(()=>(0,eV.createStyles)({gradableItemExempt:{position:"absolute",inset:0,display:"flex",flexDirection:"column",justifyContent:"flex-start"},panelContent:{padding:"0 30px",flexGrow:1},panelContentRow:{marginTop:"24px"},panelFooter:{width:"100%",bottom:0,"& > div":{padding:"0 30px"},"& button":{margin:0,"&:first-child":{marginRight:"8px"}}},footerButton:{height:"38px",alignSelf:"center"}})),og=e=>{let{showConfirmationModal:t,onCancel:n,onConfirmation:i}=e,r=(0,ed.q)(),s=`${e.analyticsId}.cancel-unsaved.dialog`,o="cancel-unsaved.dialog-title";return ei.createElement(eu._X,{className:"cancel-unsaved-confirmation-dialog",analyticsId:s,open:t,onClose:n,maxWidth:"md","aria-labelledby":o},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${s}.title`,id:o,onClose:n},r("gradebook.closeExemptionPanelConfirmationModal.title")),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${s}.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:`${s}.body`},r("gradebook.closeExemptionPanelConfirmationModal.content"))),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${s}.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${s}.cancel.button`,onClick:n},r("gradebook.closeExemptionPanelConfirmationModal.cancel")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${s}.confirmation.button`,onClick:i},r("gradebook.closeExemptionPanelConfirmationModal.close"))))},of="save-feedback-confirmation",ob="offline-items.save-feedback-confirmation",ov=e=>{let{exitCallback:t}=e,n=(0,ed.q)(),[i,r]=ei.useState(!1),[s,o]=ei.useState(!1),[a,l]=ei.useState(!1),c=(e=!1,t=!1)=>{o(e),r(!0),l(t)};return ei.createElement(eu._X,{analyticsId:ob,open:!i,maxWidth:"md",onClose:()=>c(),"aria-labelledby":`${of}-dialog-title`,TransitionProps:{onExited:()=>{t(s,a),r(!1)}}},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${ob}.titleClose.button`,id:`${of}-dialog-title`,onClose:()=>c()},n("gradebook.gradeFeedback.confirmation.title-x-bb-save-feedback")),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${ob}.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:`${ob}.contentText`,id:`${of}-dialog-description`},n("gradebook.gradeFeedback.confirmation.instructions-x-bb-save-feedback"))),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${ob}.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${ob}.close.button`,onClick:()=>c(!1,!0)},n("gradebook.gradeFeedback.confirmation.cancel-x-bb-save-and-close")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${ob}.save-feedback.button`,onClick:()=>c(!0,!0)},n("gradebook.gradeFeedback.confirmation.ok-x-bb-save-feedback"))))},oy="post-grade-confirmation",oS="offline-items.post-grade-confirmation",oC=e=>{let{exitCallback:t}=e,n=(0,ed.q)(),i=(0,eq.gH)("gradebook.","organization.gradebook."),[r,s]=ei.useState(!1),[o,a]=ei.useState(!1),l=(e=!1)=>{a(e),s(!0)};return ei.createElement(eu._X,{analyticsId:`${oS}`,open:!r,maxWidth:"md",onClose:()=>l(),"aria-labelledby":`${oy}-dialog-title`,TransitionProps:{onExited:()=>{t(o),s(!1)}}},ei.createElement(eb.AnalyticsDialogTitle,{analyticsId:`${oS}.titleClose.button`,id:`${oy}-dialog-title`,onClick:()=>l()},n("gradebook.gradeFeedback.confirmation.title-x-bb-grade-options")),ei.createElement(eb.AnalyticsDialogContent,{analyticsId:`${oS}.content`},ei.createElement(eb.AnalyticsDialogContentText,{analyticsId:`${oS}.contentText`,id:`${oy}-dialog-description`},n(i("gradebook.gradeFeedback.confirmation.instructions-x-bb-grade-column-post-grades")))),ei.createElement(eb.AnalyticsDialogActions,{analyticsId:`${oS}.actions`},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:`${oS}.cancel.button`,onClick:()=>l()},n("global.cancel")),ei.createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${oS}.post-grade.button`,onClick:()=>l(!0)},n("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"))))},oE="gradebook.gradableItem.ExemptPanel",oI=()=>{var e;let t=oh(),n=(0,ed.q)(),i=(0,eq.Lx)(),{userId:r,columnId:s,courseId:o}=function(e){let t=new URLSearchParams(window.location.search);return e.reduce((e,n)=>{let i=t.get(n);return i&&(e[n]=i),e},{})}(["userId","columnId","courseId"]),a=null===(e=(0,eq.pJ)(e=>eO.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,s,r),eo.wU))||void 0===e?void 0:e[0],l=(0,eq.pJ)(e=>eO.Ys.user.getUserById(e,r)),c=(0,eq.pJ)(e=>eO.Ys.gradebookColumn.getGradebookColumnById(e,s)),[d,u]=(0,ei.useState)(!!(null==a?void 0:a.isExempt)),[p,m]=(0,ei.useState)(!1),[h,g]=(0,ei.useState)(!1),[f,b]=(0,ei.useState)(!1),v=eJ.memoize(()=>{g(!0)}),y=!!(null==a?void 0:a.isExempt)!==d,S=y&&!f;(0,np.OO)(S,v);let C=(0,ei.useCallback)(()=>{i(eO.Nwg.gradebookGrade.loadAnonymousGradeExemption(a,{courseId:o,columnId:s,userId:r}))},[i,a,o,s,r]);(0,ei.useEffect)(()=>{!a&&(null==c?void 0:c.anonymousGrading)&&C(),a&&u(!!(null==a?void 0:a.isExempt))},[c,a,C]),(0,ei.useEffect)(()=>{p&&!y&&np.Nd.leavePeekState()},[d,p,y]);let E=()=>{(null==c?void 0:c.anonymousGrading)?i(eO.Nwg.gradebookGrade.updateAnonymousGradeExemption(a,{courseId:o,columnId:s,userId:r,isExempt:d})):a?i(eO.Nwg.gradebookGrade.updateGradeByGradeId(a,{...a,isExempt:d})):i(eO.Nwg.gradebookGrade.createGradeByUserId({courseId:o,columnId:s,userId:r,isExempt:d})),m(!0)},I={headerText:n("components.directives.grade.submission-list-row.per-gradable-item.title"),subHeaderText:(null==c?void 0:c.columnName)||"",analyticsIdPrefix:`${oE} `,showMenuToggleButton:!0,readyToFocus:!1},w=(0,nR.R7)(nk.ILocaleUsernameFormat.Short,l);return ei.createElement("div",{className:t.gradableItemExempt},ei.createElement(ej.YIP,{...I}),ei.createElement("div",{className:t.panelContent},ei.createElement("div",{className:t.panelContentRow},ei.createElement(na.TextField,{value:w,isReadOnly:!0,label:n("components.directives.grade.submission-list-row.per-gradable-item.selectedStudentLabel")})),ei.createElement("div",{className:t.panelContentRow},ei.createElement(na.Checkbox,{checked:d,disabled:(null==c?void 0:c.anonymousGrading)&&!a,label:n("components.directives.grade.submission-list-row.per-gradable-item.checkboxExemptLabel"),onChange:(e,t)=>u(!!t),analyticsId:`${oE}.checkbox`}))),ei.createElement("div",{className:t.panelFooter},ei.createElement(na.BbPanelFooter,{primaryButtonProps:{text:n("components.directives.save-buttons.notSaved"),disabled:!y,onClick:()=>E(),className:t.footerButton},secondaryButtonProps:{text:n("components.directives.save-buttons.cancel"),onClick:()=>np.Nd.leavePeekState(),className:t.footerButton},analyticsId:`${oE}.footer`})),ei.createElement(og,{showConfirmationModal:h,onCancel:()=>g(!1),onConfirmation:()=>{g(!1),b(!0),np.Nd.leavePeekState()},analyticsId:oE}))},ow=(0,eV.makeStyles)(e=>(0,eV.createStyles)({studentTabs:{borderBottom:`1px solid ${e.palette.border.main}`,margin:"0 -30px",padding:"0 30px"}}));(E=Z||(Z={})).Grades="grades",E.Progress="progress",E.Notes="notes";let oA=[{id:Z.Grades,ariaControls:`student-tab-panel-${Z.Grades}`,displayKey:"gradebook.studentTabs.grades"},{id:Z.Progress,ariaControls:`student-tab-panel-${Z.Progress}`,displayKey:"gradebook.studentTabs.progress"},{id:Z.Notes,ariaControls:`student-tab-panel-${Z.Notes}`,displayKey:"gradebook.studentTabs.notes"}],ok=e=>{let{tabIds:t,onChange:n,value:i,analyticsId:r}=e,s=ow(),o=(0,ed.q)(),a=t.map(e=>oA.find(t=>t.id===e)).filter(e=>!!e);return ei.createElement("div",{className:s.studentTabs},ei.createElement(eb.AnalyticsTabs,{onChange:(e,t)=>n(t),value:null!=i?i:oA[0].id,analyticsId:`${r}.grade.studentTabs`},a.map(e=>ei.createElement(eb.AnalyticsTab,{analyticsId:`${r}.grade.studentTabs.${e.id}`,className:`js-student-tab-${e.id}`,key:`student-tab-${e.id}`,value:e.id,id:`student-tab-${e.id}`,label:o(e.displayKey),"aria-controls":e.ariaControls}))))};var oT=n(137444),oP=n(423704),oD=n(745916);let ox=(0,tw.ZL)(()=>(0,tw.kc)({schemaDialog:{"& div":{border:"none"},"& input":{margin:"0px",border:"none"},"& .bb-dialog-content":{minHeight:"85px"}},warningMessage:{margin:"0"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));var oR=n(180399);function oL(){return{isValid:!0,symbols:{}}}let oN={NOT_A_NUMBER:"components.directives.validation.messages.errors.number_invalid",SHOULD_BE_ZERO:"components.directives.validation.messages.errors.number_be_zero",SHOULD_BE_GREATER_THAN:"components.directives.validation.messages.errors.number_small",SHOULD_BE_GREATER_THAN_OR_EQUAL_TO_HUNDRED:"components.directives.validation.messages.errors.number_small",NO_EMPTY:"components.directives.validation.messages.errors.required",NO_DUPLICATE:"components.directives.validation.messages.errors.schema_symbol_string",NOT_MORE_THAN_32_CHARACTERS:"components.directives.validation.messages.errors.max_chars"},o$=e=>{let{formatNumber:t}=(0,eQ.h)(),n=(0,ed.q)(),[i,r]=(0,ei.useState)(oL()),s=(0,ei.useCallback)(t=>{var n;let i=e[t].lowerBound,r=null===(n=e[t+1])||void 0===n?void 0:n.lowerBound;return void 0!==r&&i<=r},[e]),o=(0,ei.useCallback)((i,r)=>{var o;let a=r.lowerBound,l="";return("string"==typeof a?a:"")?l=n(oN.NOT_A_NUMBER):i===e.length-1&&0!==a?l=n(oN.SHOULD_BE_ZERO):s(i)&&(l=n(oN.SHOULD_BE_GREATER_THAN,{value_LOCALIZED:t((null===(o=e[i+1])||void 0===o?void 0:o.lowerBound)+.1,{style:"decimal",maximumFractionDigits:5})})),{isValid:!l,errorMessage:l}},[t,s,e,n]),a=(0,ei.useCallback)((e,i)=>{if(0===e){let e=i.upperBound,r="";return("string"==typeof e?e:"")?r=n(oN.NOT_A_NUMBER):e<100?r=n(oN.SHOULD_BE_GREATER_THAN_OR_EQUAL_TO_HUNDRED,{value_LOCALIZED:t(100)}):!isNaN(i.lowerBound)&&i.upperBound<=i.lowerBound&&(r=n(oN.SHOULD_BE_GREATER_THAN,{value_LOCALIZED:t(i.lowerBound+.1,{style:"decimal",maximumFractionDigits:5})})),{isValid:!r,errorMessage:r}}return{isValid:!0,errorMessage:""}},[t,n]),l=(0,ei.useCallback)((i,r)=>{let s=r.symbol,o="";return s.trim()?s.length>32?o=n(oN.NOT_MORE_THAN_32_CHARACTERS,{limit:t(32)}):e.find((e,t)=>t!==i&&e.symbol===s)&&(o=n(oN.NO_DUPLICATE)):o=n(oN.NO_EMPTY),{isValid:!o,errorMessage:o}},[e,n,t]),c=(0,ei.useCallback)(()=>{r(e&&0!==e.length?e.reduce((e,t,n)=>{let i=o(n,t),r=a(n,t),s=l(n,t);return e.symbols[t.id]={lowerBound:i,upperBound:r,gradeName:s},e.isValid&&(i.errorMessage||r.errorMessage||s.errorMessage)&&(e.isValid=!1),e},{symbols:{},isValid:!0}):oL())},[e,l,o,a]);return(0,ei.useEffect)(()=>{c()},[c,e]),i},oO=e=>{let t=(0,eq.Lx)(),n=(0,eq.pJ)(e=>eO.Ys.gradebookSchema.areGradebookSchemasLoading(e)),i=(0,eq.pJ)(e=>eO.Ys.gradebookSchema.isGradebookSchemaDataValid(e));return(0,ei.useEffect)(()=>{!e||n||i||t(eO.Nwg.gradebookSchema.loadGradebookSchemasByCourseId({courseId:e}))},[e,t,n,i]),{gradingSchemas:(0,eq.pJ)(t=>eO.Ys.gradebookSchema.getGradebookSchemasByCourseId(t,e)),isLoading:n,isValid:i}},oG=e=>{let t=(0,ed.q)();return(0,ei.useMemo)(()=>e.map(e=>({...e,ui:{...e.ui,displayTitle:e.ui.displayTitleKey?t(e.ui.displayTitleKey):e.ui.displayTitle}})),[e,t])},o_=(e,t,n)=>{let i=oG(oO(e).gradingSchemas);return(0,ei.useMemo)(()=>i.some(e=>e.id!==n&&e.ui.displayTitle.toLocaleLowerCase()===t.toLocaleLowerCase()),[n,t,i])},oM="add-schema";var oB=({courseId:e,exitCallback:t})=>{let[n,i]=(0,ei.useState)(!1),[r,s]=(0,ei.useState)(!1),[o,a]=(0,ei.useState)(""),l=(0,ei.useRef)(null),c=ox(),d=(0,ed.q)(),u="add-schema-name-field",p=(e=!1)=>{s(e),i(!0)},m=(0,oR.y1)(()=>{var e,t;l&&l.current&&(null===(t=null===(e=l.current.getElementsByTagName("input"))||void 0===e?void 0:e.item(0))||void 0===t||t.focus())},1);(0,ei.useEffect)(()=>{n||m()},[n,m]);let h=o_(e,o);return er().createElement(eu._X,{open:!n,maxWidth:"md",disableBackdropClick:!0,className:(0,eX.Z)(c.schemaDialog,"js-add-schema-dialog"),onClose:()=>p(),TransitionProps:{onExited:()=>{t(r,o),i(!1)}},"aria-labelledby":`${oM}-dialog-title`,analyticsId:"course.grades.settings.schema.add.dialog"},er().createElement(eb.AnalyticsDialogTitle,{analyticsId:`${oM}-dialog-title`,onClose:()=>p(),id:`${oM}-dialog-title`,closeButtonProps:{"aria-label":d("gradingSchema.aria.addSchemaCloseBtn")}},d("gradingSchema.addGradingSchemaModal.title")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${oM}-dialog-content`},er().createElement(oT.L,{ref:l,analyticsId:"course.grades.settings.schema.add.title.input",floatingLabel:!0,label:d("gradingSchema.addGradingSchemaModal.textInputLabel"),value:o,error:h,helperText:h&&er().createElement(eb.AnalyticsTypography,{component:"span",className:c.warningMessage},d("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),InputProps:{id:u},InputLabelProps:{htmlFor:u},FormHelperTextProps:{classes:{root:c.helperTxtMsg}},onChange:e=>{a(e.target.value.substring(0,64))},fullWidth:!0})),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${oM}-dialog-actions`},er().createElement(oP.x,{onClick:()=>p(!1),analyticsId:"course.grades.settings.schema.add.cancel.button","aria-label":d("global.cancel")},d("global.cancel")),er().createElement(oD.AnalyticsPrimaryButton,{analyticsId:"course.grades.settings.schema.add.save.button",disabled:""===o||h,onClick:()=>p(!0),"aria-label":d("global.save")},d("gradingSchema.addGradingSchemaModal.add"))))};let oF=(0,tw.ZL)(e=>(0,tw.kc)({sideBarContainer:{height:"100%",borderRight:`1px solid ${e.palette.border.main}`,overflowY:"auto",width:"20%",[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}},schemaTopBar:{display:"flex",padding:"15px 10px 15px 15px",justifyContent:"space-between",alignItems:"center"},sideBarTitle:{margin:"0 !important",fontSize:"16px !important",fontWeight:e.typography.fontWeightBold},openSchemaDialogBtn:{background:e.palette.background.default,color:e.palette.text.secondary,"&:hover":{borderColor:e.palette.background.default,background:e.palette.background.default,color:e.palette.action.active}},warningBanner:{padding:"12px 16px"},warningIconContainer:{display:"flex",justifyContent:"center",alignItems:"center"},warningIcon:{marginRight:"10px"}}));var oU=n(664626);let oV=(0,tw.ZL)(e=>(0,tw.kc)({gradingSchemaListItem:{padding:0},gradingSchemaListItemButton:{width:"100%",justifyContent:"flex-start",padding:"12px",color:e.palette.action.active,fontWeight:e.typography.fontWeightMedium,borderRadius:0,borderBottom:`1px solid ${e.palette.border.main}`,wordBreak:"break-word",textAlign:"start",background:e.palette.background.default,"&:hover":{background:e.palette.background.default}},gradingSchemaListItemButtonActive:{color:e.palette.background.default,background:e.palette.action.selected,textDecoration:"underline","&:hover":{textDecoration:"underline",background:e.palette.action.selected}}}));var oH=n(102802);let oq=({schema:e,selectedSchema:t,setSelectedSchema:n,listItemRef:i,setDrawerOpen:r,discardToggleOpen:s,isFooterOpen:o})=>{var a,l;let c=(0,eV.useTheme)(),d=(0,eV.useMediaQuery)(c.breakpoints.down("xs")),u=oV();return ei.createElement(oH.o,{analyticsId:"course.grades.settings.schema.select",onClick:()=>{o?t.id!==e.id&&s(!0):(n(e),d&&r(!0))},ref:t.id===e.id?i:null,className:u.gradingSchemaListItem,title:null===(a=null==e?void 0:e.ui)||void 0===a?void 0:a.displayTitle},ei.createElement(eb.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.button",className:(0,eX.Z)({[u.gradingSchemaListItemButton]:!0,"js-listitem-btn-active":t.id===e.id,[u.gradingSchemaListItemButtonActive]:t.id===e.id})},null===(l=null==e?void 0:e.ui)||void 0===l?void 0:l.displayTitle))},oj=({courseId:e,schemas:t,setSelectedSchema:n,selectedSchema:i,setDrawerOpen:r,drawerOpen:s,discardToggleOpen:o,isFooterOpen:a,focusAndScrollAddedSchema:l,setFocusAndScrollAddedSchema:c,openAddSchemaDialog:d})=>{let u=oF(),p=(0,ed.q)(),m=(0,ei.useRef)(null),h=oO(e).gradingSchemas,g=h.length>=100,f=(0,eq.gH)("gradingSchema","gradingSchema.organization"),b=(0,s9.y1)(e=>{var t,n;m&&m.current&&(m.current.scrollIntoView({behavior:"smooth",block:"center"}),e&&(null===(n=null===(t=m.current.getElementsByTagName("button"))||void 0===t?void 0:t.item(0))||void 0===n||n.focus(),c(!1)))},350);return(0,ei.useEffect)(()=>{b(l)},[h.length,s,l,b]),er().createElement("div",{className:u.sideBarContainer},er().createElement("div",{className:u.schemaTopBar},er().createElement(eb.AnalyticsTypography,{variant:"h2",className:u.sideBarTitle},p("gradingSchema.sideBar.title")),er().createElement(eb.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.add.button",className:u.openSchemaDialogBtn,disabled:g,startIcon:er().createElement(eE.Add,null),onClick:d,"aria-label":p("gradingSchema.addGradingSchemaModal.title")},p("gradingSchema.sideBar.add"))),g&&er().createElement(oU.m,{severity:"warning",classes:{root:u.warningBanner}},er().createElement("div",{className:u.warningIconContainer},er().createElement(eE.Warning,{className:u.warningIcon}),er().createElement(eb.AnalyticsTypography,null,p(f("gradingSchema.sideBar.maximumLimitWarning"))))),i&&er().createElement(eb.AnalyticsList,{analyticsId:"gradebook.schema.side-bar.list",className:"grading-schema-list"},t.map(e=>er().createElement(oq,{key:e.id,setDrawerOpen:r,selectedSchema:i,schema:e,listItemRef:m,setSelectedSchema:n,isFooterOpen:a,discardToggleOpen:o}))))},oz=(0,tw.ZL)(e=>(0,tw.kc)({gradingSchemaContainer:{display:"flex",height:"100%"},peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",height:"100%"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",[e.breakpoints.up("sm")]:{maxWidth:"400px"}}},peekPanelContainer:{height:"100%",padding:0,overflowY:"auto"},schemaDrawer:{top:"3rem"},spinner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}})),oW=(0,tw.ZL)(()=>(0,tw.kc)({schemaDialog:{"& div":{border:"none"},"& input":{margin:"0px",border:"none"},"& .bb-dialog-content":{minHeight:"85px"}},warningMessage:{margin:"0"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));(I=Q||(Q={})).Discard="discard",I.Duplicate="duplicate",I.Delete="delete";let oK=({dialogHandler:e,handleOnClose:t,title:n,description:i,isDialogOpen:r,dialogId:s,actionBtnName:o,selectedSchemaName:a,courseId:l})=>{let c=(0,ed.q)(),d=oW(),u=s===Q.Duplicate,[p,m]=(0,ei.useState)(""),h=(0,ei.useRef)(null),g="dialog-text-field";(0,ei.useEffect)(()=>{let e=c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicatedName",{value:""}).length;m(c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicatedName",{value:a.substring(0,64-e)}))},[c,a]);let f=(0,s9.y1)(()=>{var e,t,n;null===(n=null===(t=null===(e=null==h?void 0:h.current)||void 0===e?void 0:e.getElementsByTagName("input"))||void 0===t?void 0:t.item(0))||void 0===n||n.focus()},1);(0,ei.useEffect)(()=>{r&&f()},[r,f]);let b=o_(l,p);return er().createElement(eb.AnalyticsDialog,{analyticsId:`${s}-dialog`,id:`${s}-dialog`,className:(0,eX.Z)({[d.schemaDialog]:u,"js-duplicate-schema-dialog":u,"gradingSchema-dicard-dialog":!u}),open:r,maxWidth:"md",disableBackdropClick:!0,onClose:t,"aria-labelledby":`${s}-dialog-title`},er().createElement(eb.AnalyticsDialogTitle,{analyticsId:`${s}-dialog-title`,onClose:t,id:`${s}-dialog-title`},n),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${s}-dialog-content`},u?er().createElement(eb.AnalyticsTextField,{ref:h,analyticsId:"course.grades.settings.schema.duplicate.title.input",floatingLabel:!0,label:c("gradingSchema.addGradingSchemaModal.textInputLabel"),value:p,error:b,helperText:b&&er().createElement(eb.AnalyticsTypography,{component:"span",className:d.warningMessage},c("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),FormHelperTextProps:{classes:{root:d.helperTxtMsg}},InputProps:{id:g},InputLabelProps:{htmlFor:g},onChange:e=>{m(e.target.value.substring(0,64))},fullWidth:!0}):er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${s}-dialog-description`,id:`${s}-dialog-description`},i,er().createElement("div",null),c("gradingSchema.schemaDetail.discardGradingSchemaModal.warning"))),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${s}-dialog-actions`},er().createElement(eb.AnalyticsDefaultButton,{onClick:t,analyticsId:`course.grades.settings.schema.${s}.cancel.button`,"aria-label":c("global.cancel")},c("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:`course.grades.settings.schema.${s}.button`,disabled:!!u&&(""===p||b),onClick:()=>e(p),"aria-label":u?c("gradingSchema.aria.copySchemaSave"):c("gradingSchema.aria.discardSchemaButton")},o)))},oZ=(0,tw.ZL)(e=>(0,tw.kc)({footerContainer:{width:"80%",position:"absolute",bottom:0,right:0,zIndex:3,[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}}})),oQ=(0,tw.ZL)(e=>(0,tw.kc)({menuIconBtn:{minHeight:"auto",zIndex:1},detailsMenuIcon:{cursor:"pointer",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},menuItem:{transition:"all .2s","& span":{marginLeft:"10px"},"&:hover":{transition:"all .2s",background:e.palette.background.b9,color:e.palette.background.default}}}));var oJ=({symbol:e,rowDeleteHandler:t,setEditableHandler:n,numberOfSchemaRows:i,currentSymbolIndex:r})=>{let s=oQ(),o=(0,ed.q)(),[a,l]=(0,ei.useState)(null),c=(0,ei.useCallback)(()=>{l(null)},[]),d=(0,ei.useCallback)(e=>{l(e.currentTarget)},[]);return er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.schema.read-only-symbol-menu.iconButton",className:s.menuIconBtn,onClick:d,"aria-label":o("gradingSchema.aria.optionsButton",{NAME:e.symbol})},er().createElement(sF.Menu,{"aria-expanded":null!==a,"aria-haspopup":"menu",className:(0,eX.Z)(s.detailsMenuIcon,`menu-icon-${e.symbol}`)})),er().createElement(eb.AnalyticsMenu,{analyticsId:"gradebook.schema.read-only-symbol-menu.menu",anchorEl:a,open:null!==a,onClose:c},er().createElement(eb.AnalyticsMenuItem,{analyticsId:"gradebook.schema.read-only-symbol-menu.menuItem",className:(0,eX.Z)(s.menuItem,`js-edit-menu-${e.symbol}`),button:!0,onClick:()=>{c(),n(J.SYMBOL)},"aria-label":o("gradingSchema.schemaDetail.edit")},er().createElement(eE.Edit,{className:"menu-icon"}),er().createElement(eb.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.edit"))),i-1!==r&&i>2&&er().createElement(eb.AnalyticsMenuItem,{analyticsId:"gradebook.schema.read-only-symbol-menu.menuItem",className:(0,eX.Z)(s.menuItem,`js-delete-menu-${e.symbol}`),button:!0,onClick:()=>{c(),t(r)},"aria-label":o("gradingSchema.schemaDetail.delete")},er().createElement(eE.Trash,{className:"menu-icon"}),er().createElement(eb.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.delete")))))};let oY=(0,tw.ZL)(e=>(0,tw.kc)({gradeText:{width:"70%",'& input[type="text"]':{border:"none"},[e.breakpoints.up("sm")]:{width:"100%"},[e.breakpoints.up("xs")]:{'& input[type="text"]':{margin:"0px"}}},gradeTextErrorMsg:{marginBottom:"5px"},gradeSymbol:{display:"inline-block",width:"70%",margin:"0",zIndex:1,cursor:"pointer"},helperTxtMsg:{margin:"0px",marginTop:"5px"}}));var oX=({symbol:e,isEditable:t,gradeSymbolOnChangeHandler:n,gradeSymbolOnClickHandler:i,currentEditableRow:r,currentIndex:s,clickedTextField:o,validation:a})=>{let l=(0,ed.q)(),c=oY(),d=`grade-symbol-text-field-${s}`,u=`grade-symbol-error-msg-${s}`;return er().createElement(er().Fragment,null,t?er().createElement(eb.AnalyticsTextField,{className:c.gradeText,floatingLabel:!0,label:l("gradingSchema.schemaDetail.symbolLabel"),value:null==e?void 0:e.symbol,onChange:n,onClick:i,InputLabelProps:{shrink:!0,htmlFor:d},autoFocus:r===s&&o===J.SYMBOL,error:!a.isValid,helperText:er().createElement(er().Fragment,null,!a.isValid&&er().createElement(eb.AnalyticsTypography,{component:"span",className:c.gradeTextErrorMsg,id:u},a.errorMessage)),InputProps:{id:d,"aria-label":l("gradingSchema.aria.gradeName"),"aria-describedby":a.isValid?void 0:u},FormHelperTextProps:{classes:{root:c.helperTxtMsg}},analyticsId:"course.grades.settings.schemaEdit.updateSymbolString.input.text",required:!0}):er().createElement(eb.AnalyticsTypography,{component:"span",onClick:i,className:(0,eX.Z)(c.gradeSymbol,`symbol-${e.symbol}grade-symbol`)},e.symbol))},o0=({validation:e,currentIndex:t})=>{let n=(0,tw.ZL)(()=>(0,tw.kc)({warningMessage:{margin:"0"}}))();return er().createElement(er().Fragment,null,!e.lowerBound.isValid&&er().createElement(eb.AnalyticsTypography,{component:"span",className:n.warningMessage,id:`lower-bound-error-msg-${t}`},e.lowerBound.errorMessage),!e.upperBound.isValid&&er().createElement(eb.AnalyticsTypography,{component:"span",className:n.warningMessage,id:`upper-bound-error-msg-${t}`},e.upperBound.errorMessage))};let o1=(0,tw.ZL)(e=>(0,tw.kc)({rangeText:{width:"60px",'& input[type="text"],input[type="text"][disabled]':{margin:"0",textAlign:"left",backgroundColor:e.palette.background.default,border:"none",color:e.palette.action.selected}},nonEditableBound:{margin:"0",cursor:"pointer"},boundHelperTxtMsg:{display:"flex",flexDirection:"column",margin:"0",marginTop:"5px",whiteSpace:"nowrap",color:e.palette.error.main,width:"250px",overflowWrap:"break-word",wordBreak:"break-word",[e.breakpoints.down("sm")]:{whiteSpace:"pre-wrap"}}})),o2=(e,t)=>{let{formatNumber:n,countDigits:i}=(0,eQ.h)();if("string"==typeof e)return t;let r=i(t).fractionalCount;return n(e,{maximumFractionDigits:5,useGrouping:!1,minimumFractionDigits:r>0&&r<=5?r:void 0})};var o4=({isEditable:e,symbol:t,lowerBoundOnClickHandler:n,lowerBoundOnChangeHandler:i,isCurrentRowEditable:r,clickedTextField:s,validation:o,HelperText:a,currentIndex:l})=>{let c=o1(),d=(0,ed.q)(),[u,p]=(0,ei.useState)(t.lowerBound||0===t.lowerBound?t.lowerBound.toString():""),m=`lower-bound-field-${l}`,h=(0,ei.useCallback)(e=>{let{value:t}=e.target;p(t),i(t)},[i]),g=(0,ei.useCallback)(()=>{p(t.lowerBound||0===t.lowerBound?t.lowerBound.toString():"")},[t.lowerBound]),f=o2(t.lowerBound,u);return er().createElement(er().Fragment,null,e?er().createElement(oT.L,{analyticsId:"course.grades.settings.schemaEdit.first.lowerBound.input.text",className:c.rangeText,floatingLabel:!0,label:d("gradingSchema.schemaDetail.lowerBoundLabel"),value:f,onClick:n,onChange:h,onBlur:g,autoFocus:r&&s===J.LOWER_BOUND,InputProps:{id:m,"aria-label":d("gradingSchema.aria.lowerBound"),"aria-describedby":o.isValid?void 0:`lower-bound-error-msg-${l}`},InputLabelProps:{shrink:!0,htmlFor:m},error:!o.isValid,helperText:a,FormHelperTextProps:{classes:{root:c.boundHelperTxtMsg}},required:!0}):er().createElement(eb.AnalyticsTypography,{component:"span",className:(0,eX.Z)(c.nonEditableBound,`js-lowerBound-${t.symbol}`),onClick:n},d("gradingSchema.schemaDetail.boundValues",{value:f})))},o6=({isDisabled:e,isEditable:t,symbol:n,upperBoundOnClickHandler:i,upperBoundOnChangeHandler:r,currentEditableRow:s,currentIndex:o,clickedTextField:a,validation:l})=>{let c=(0,ed.q)(),d=o1(),[u,p]=(0,ei.useState)(n.upperBound||0===n.upperBound?n.upperBound.toString():""),m=`upper-bound-field-${o}`,h=(0,ei.useCallback)(e=>{let{value:t}=e.target;p(t),r(t)},[r]),g=(0,ei.useCallback)(()=>{p(n.upperBound||0===n.upperBound?n.upperBound.toString():"")},[n.upperBound]),f=o2(n.upperBound,u);return er().createElement(er().Fragment,null,!e&&t?er().createElement(oT.L,{analyticsId:"course.grades.settings.schemaEdit.first.upperBound.input.text",className:d.rangeText,value:f,disabled:e,onClick:i,onChange:h,onBlur:g,autoFocus:s===o&&a===J.UPPER_BOUND,error:!l.isValid,InputProps:{id:m,"aria-label":c("gradingSchema.aria.upperBound"),"aria-describedby":l.isValid?void 0:`upper-bound-error-msg-${o}`},InputLabelProps:{htmlFor:m},required:!0}):er().createElement(eb.AnalyticsTypography,{component:"span",className:(0,eX.Z)(d.nonEditableBound,`js-upperBound-${n.symbol}`),onClick:i},c("gradingSchema.schemaDetail.boundValues",{value:f})))};let o5=(0,tw.ZL)(()=>(0,tw.kc)({deleteIcon:{transition:"0.2s linear",cursor:"pointer"},deleteIconBtn:{minHeight:"auto",zIndex:1},deleteIconHidden:{visibility:"hidden"}}));var o3=({rowDeleteHandler:e,numberOfSchemaRows:t,currentSymbolIndex:n,deleteMenuVisibilityIndex:i})=>{let r=(0,ed.q)(),s=o5();return er().createElement(er().Fragment,null,t>2&&er().createElement(eb.AnalyticsIconButton,{analyticsId:"gradingSchema.schemaDetail.delete",className:s.deleteIconBtn,onClick:()=>e(n),"aria-label":r("gradingSchema.schemaDetail.delete")},er().createElement(eE.Trash,{className:(0,eX.Z)({[s.deleteIcon]:!0,"js-delete-icon":!0,[s.deleteIconHidden]:!(i===n&&t-1!==n)})})))};let o8=(0,tw.ZL)(e=>(0,tw.kc)({gradeDetailsContainer:{position:"relative",padding:0,borderBottom:`1px solid ${e.palette.border.main}`,"&:last-child":{borderBottom:`1px solid ${e.palette.border.main}`}},gradeList:{display:"inline-flex",justifyContent:"space-between",width:"40%",alignItems:"baseline","& span":{width:"100%"},[e.breakpoints.down("sm")]:{display:"flex",width:"100%"}},gradeListRange:{display:"inline-flex",justifyContent:"space-between",width:"60%",alignItems:"baseline",[e.breakpoints.down("sm")]:{display:"flex",width:"100%"}},leftCellBorder:{borderRight:`1px solid ${e.palette.border.main}`},cellContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("sm")]:{alignItems:"flex-start"}},gradeLeftContainer:{display:"flex",justifyContent:"space-between",alignItems:"center"},textBoxContainer:{width:"70%"},gradeRightContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",[e.breakpoints.down("sm")]:{marginTop:"24px"}},gradeListRangeLeft:{display:"inline-flex",alignItems:"baseline",justifyContent:"space-between",zIndex:1},textBetween:{margin:"0px 5px",whiteSpace:"nowrap"},middleAddIconList:{position:"absolute",width:"100%",padding:"0",left:0,height:"16px",bottom:2},middleAddIcon:{width:"100%",position:"relative",padding:"12px 0",left:0,transition:"all 0.2s","& span":{height:"16px",zIndex:2}},iconLine:{position:"absolute",bottom:"0",width:"100%",border:`1px solid ${e.palette.brand.main}`},iconLineDisabled:{border:`1px solid ${e.palette.action.disabled}`},addIcon:{color:e.palette.brand.main,fill:e.palette.common.white,position:"absolute",bottom:"30%",zIndex:1},addIconDisabled:{color:e.palette.action.disabled}}));var o9=({symbol:e,index:t,id:n,symbolChangeHandler:i,lowerBoundChangeHandler:r,upperBoundChangeHandler:s,editedSchemaSymbols:o,addRowHandler:a,deleteRowHandler:l,validation:c,isUpperBoundDisabled:d,numberOfSchemaRows:u,setEditableRow:p,editableRow:m,clickedTextField:h,setClickedTextField:g})=>{let[f,b]=(0,ei.useState)(-1),[v,y]=(0,ei.useState)(-1),[S,C]=(0,ei.useState)(!1),E=(0,eV.useTheme)(),I=(0,ed.q)(),w=o8(),A=(0,eV.useMediaQuery)(E.breakpoints.down("sm")),k=m===t||!c.upperBound.isValid||!c.lowerBound.isValid||!c.gradeName.isValid,T=(0,ei.useCallback)(e=>{g(e),p(t)},[t,g,p]),P=(0,ei.useCallback)(()=>{T(J.SYMBOL)},[T]),D=(0,ei.useCallback)(()=>{T(J.LOWER_BOUND)},[T]),x=(0,ei.useCallback)(()=>{T(J.UPPER_BOUND)},[T]),R=(0,ei.useCallback)(e=>{i(t,e.target.value)},[t,i]),L=(0,ei.useCallback)(e=>{r(t,e)},[t,r]),N=(0,ei.useCallback)(e=>{s(t,e)},[t,s]);(0,ei.useEffect)(()=>{u-1!==t&&C("number"!=typeof o[t+1].lowerBound)},[o,t,u]);let $=()=>{b(t)},O=()=>{b(-1)},G=()=>er().createElement("div",{className:w.gradeRightContainer},er().createElement(eV.Box,{className:w.gradeListRangeLeft},er().createElement(o4,{isEditable:k,symbol:e,currentIndex:t,lowerBoundOnClickHandler:D,lowerBoundOnChangeHandler:L,isCurrentRowEditable:m===t,clickedTextField:h,validation:c.lowerBound,HelperText:er().createElement(o0,{validation:c,currentIndex:t})}),er().createElement(eb.AnalyticsTypography,{component:"span",className:w.textBetween},0!==t?I("gradingSchema.schemaDetail.textBetween"):I("gradingSchema.schemaDetail.textBetweenLastRow")),er().createElement(o6,{isDisabled:d,isEditable:k,symbol:e,upperBoundOnClickHandler:x,upperBoundOnChangeHandler:N,currentEditableRow:m,currentIndex:t,clickedTextField:h,validation:c.upperBound}))),_=()=>er().createElement("div",null,k?er().createElement(o3,{rowDeleteHandler:l,numberOfSchemaRows:u,currentSymbolIndex:t,deleteMenuVisibilityIndex:v}):er().createElement(oJ,{symbol:e,rowDeleteHandler:l,setEditableHandler:T,numberOfSchemaRows:u,currentSymbolIndex:t}),u-1!==t&&er().createElement("div",{className:w.middleAddIconList,onMouseEnter:$,onMouseLeave:O,onFocus:$,onBlur:O},er().createElement(eb.AnalyticsTooltip,{analyticsId:"",title:I("gradingSchema.schemaDetail.addIcon",{value:e.symbol}),className:w.middleAddIcon},er().createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.schema.details.iconButton",disabled:S,className:`js-middleAdd-con-${e.symbol}`,onClick:()=>a(t),"aria-label":I("gradingSchema.schemaDetail.addIcon",{value:e.symbol})},f===t&&er().createElement(er().Fragment,null,er().createElement(eE.Add,{className:(0,eX.Z)({[w.addIcon]:!0,"js-add-Icon":!0,[w.addIconDisabled]:S})}),er().createElement("hr",{className:(0,eX.Z)({[w.iconLine]:!0,[w.iconLineDisabled]:S})}))))));return er().createElement(eb.AnalyticsTableRow,{analyticsId:"gradebook.schema.details.tableRow",className:(0,eX.Z)(w.gradeDetailsContainer,"js-grade-deatails-container"),key:n,onMouseOver:()=>{y(t)},onMouseOut:()=>{y(-1)},onFocus:()=>{y(t)},onBlur:()=>{y(-1)}},er().createElement(eb.AnalyticsTableCell,{analyticsId:"gradebook.schema.details.tableCell",className:w.leftCellBorder},er().createElement("div",{className:w.cellContainer},er().createElement("div",{className:w.textBoxContainer},er().createElement(oX,{symbol:e,isEditable:k,gradeSymbolOnChangeHandler:R,gradeSymbolOnClickHandler:P,currentEditableRow:m,currentIndex:t,clickedTextField:h,validation:c.gradeName}),A&&G()),A&&_())),!A&&er().createElement(eb.AnalyticsTableCell,{analyticsId:"gradebook.schema.details.tableCell"},er().createElement("div",{className:w.cellContainer},G(),_())))},o7=n(198022);(w=J||(J={}))[w.SYMBOL=0]="SYMBOL",w[w.LOWER_BOUND=1]="LOWER_BOUND",w[w.UPPER_BOUND=2]="UPPER_BOUND",w[w.NONE=3]="NONE";var ae=({editedSchemaSymbols:e,setSymbolsInCurrentSchema:t,setFooterOpen:n,setIsDirty:i,editableRow:r,setEditableRow:s,validation:o})=>{let{parseNumber:a,formatNumber:l}=(0,eQ.h)(),[c,d]=(0,ei.useState)(J.NONE),u=(0,ei.useCallback)(r=>{var o;let c=[...e];if(r<c.length-1){let u=c[r+1],p=a(l((u.lowerBound+u.upperBound)/2,{style:"decimal",maximumFractionDigits:5}));c.splice(r+1,0,{schemaId:null===(o=e[r])||void 0===o?void 0:o.schemaId,lowerBound:p,upperBound:u.upperBound,absoluteTranslation:(p+u.upperBound)/2,symbol:"",id:(0,o7.v4)()}),u.upperBound=p,u.absoluteTranslation=(u.lowerBound+u.upperBound)/2,c[r+2]=u,t(c),n(!0),i(!1),s(r+1),d(J.SYMBOL)}},[e,a,l,t,n,i,s]),p=(0,ei.useCallback)(r=>{let s=[...e];if(r!==s.length-1&&s.length>2){let e=s[r+1];e.upperBound=s[r].upperBound,e.absoluteTranslation=(e.lowerBound+e.upperBound)/2,s.splice(r,1),t(s),i(!0),n(!0)}},[e,n,i,t]),m=(0,ei.useCallback)(n=>{let i=[...e];n!==e.length-1&&(i[n+1].upperBound=i[n].lowerBound,i[n+1].absoluteTranslation=(i[n+1].lowerBound+i[n+1].upperBound)/2,t(i))},[e,t]),h=(0,ei.useCallback)((r,s,o)=>{let c=[...e];if("symbol"===o)c[r][o]=s;else if(s.length<=21){let e=a(s);isNaN(e)?c[r][o]=s:(c[r][o]=a(l(e,{style:"decimal",maximumFractionDigits:5})),c[r].absoluteTranslation=(c[r].lowerBound+c[r].upperBound)/2,"lowerBound"===o&&m(r))}t(c),n(!0),i(!0)},[e,t,n,i,a,l,m]),g=(0,ei.useCallback)((e,t)=>{h(e,t,"symbol")},[h]),f=(0,ei.useCallback)((e,t)=>{h(e,t,"lowerBound")},[h]),b=(0,ei.useCallback)((e,t)=>{h(e,t,"upperBound")},[h]);return er().createElement(er().Fragment,null,e.filter(e=>!!e).map((t,n)=>er().createElement(o9,{numberOfSchemaRows:e.length,editedSchemaSymbols:e,symbol:t,key:t.id,id:t.id,index:n,symbolChangeHandler:g,lowerBoundChangeHandler:f,upperBoundChangeHandler:b,addRowHandler:u,deleteRowHandler:p,setEditableRow:s,editableRow:r,isUpperBoundDisabled:0!==n,validation:o.symbols[t.id]||function(){let e={isValid:!0,errorMessage:""};return{lowerBound:e,upperBound:e,gradeName:e}}(),clickedTextField:c,setClickedTextField:d})))};let at=(0,tw.ZL)(e=>(0,tw.kc)({bodyContainer:{height:"100%",overflowY:"auto",padding:"20px",width:"80%",[e.breakpoints.down("sm")]:{width:"50%"},[e.breakpoints.down("xs")]:{width:"100%"}},backButton:{marginBottom:"10px"},backIcon:{fontSize:e.typography.fontSizeMedium,marginRight:"10px"},detailsHeader:{width:"70%",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:`1px solid ${e.palette.border.main}`,"& :hover":{cursor:"pointer"},'& input[type="text"],input[type="text"]:focus':{margin:"0",textAlign:"left",backgroundColor:e.palette.background.default,border:"none",color:e.palette.action.selected,boxShadow:"none"},[e.breakpoints.down("md")]:{width:"70%"},[e.breakpoints.down("sm")]:{width:"100%"}},schemaTitle:{display:"inline-block",wordBreak:"break-all",margin:"0 !important"},detailsMenuIcon:{position:"relative",cursor:"pointer",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}},editableTitle:{border:"none",fontSize:e.typography.fontSizeLarge},duplicateNameWarning:{margin:"8px 0 0 0",color:e.palette.error.main},inUseMessage:{margin:"8px 0 0 0"},listContainer:{width:"70%",border:`1px solid ${e.palette.border.main}`,borderBottom:0,marginTop:"16px",marginBottom:"50px",padding:"0px","& th":{width:"60%",background:e.palette.background.default,borderTop:0},[e.breakpoints.down("md")]:{width:"70%"},[e.breakpoints.down("sm")]:{width:"100%"}},leftCellBorder:{width:"40% !important",borderRight:`1px solid ${e.palette.border.main}`},listHeaderContainer:{padding:0},listHeader:{borderBottom:`1px solid ${e.palette.border.main}`},middleBorder:{position:"absolute",height:"100%",width:"60%",borderLeft:`1px solid ${e.palette.border.main}`,left:"40%"},gradeRangeBox:{marginLeft:0}})),an=({isValid:e,numberOfSchemas:t,canDeleteGradingSchema:n,onDuplicateIconClick:i,onDeleteIconClick:r})=>{let s=oQ(),o=(0,ed.q)(),[a,l]=(0,ei.useState)(null),c=(0,ei.useCallback)(e=>{l(e.currentTarget)},[]),d=(0,ei.useCallback)(()=>{l(null)},[]),u=(0,ei.useCallback)(()=>{d(),i()},[d,i]),p=(0,ei.useCallback)(()=>{d(),r()},[d,r]);return n?er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.schema.options.menu.iconButton",className:s.menuIconBtn,onClick:c,"aria-label":o("gradingSchema.aria.schemaMenuOption")},er().createElement(sF.Menu,{"aria-expanded":null!==a,"aria-haspopup":"menu",className:s.detailsMenuIcon})),er().createElement(eb.AnalyticsMenu,{className:"react-container",analyticsId:"gradebook.schema.options.menu",anchorEl:a,open:null!==a,onClose:d},er().createElement(eb.AnalyticsMenuItem,{analyticsId:"course.grades.settings.duplicate.button",className:s.menuItem,button:!0,onClick:u,"aria-label":o("gradingSchema.aria.copySchemaButton"),disabled:!e||t>=100},er().createElement(eE.Duplicate,null),er().createElement(eb.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.duplicate"))),er().createElement(eb.AnalyticsMenuItem,{analyticsId:"course.grades.settings.delete.button",className:s.menuItem,button:!0,onClick:p,"aria-label":o("gradingSchema.schemaDetail.delete")},er().createElement(eE.Trash,null),er().createElement(eb.AnalyticsTypography,{component:"span"},o("gradingSchema.schemaDetail.delete"))))):er().createElement(eb.AnalyticsTooltip,{analyticsId:"course.grades.settings.duplicate.tooltip",title:o("gradingSchema.schemaDetail.duplicate"),placement:"right"},er().createElement(eb.AnalyticsIconButton,{id:"copy-schema-btn",analyticsId:"course.grades.settings.duplicate.button",disabled:!e||t>=100,onClick:i,"aria-label":o("gradingSchema.aria.copySchemaButton")},er().createElement(eE.Duplicate,{className:s.detailsMenuIcon})))},ai=({schemaName:e,isDirty:t,courseId:n,hasDuplicateName:i,editedSchemaSymbols:r,isFooterOpen:s,editableRow:o,setEditedSchemaSymbols:a,setDrawerOpen:l,setFooterOpen:c,setIsDirty:d,setEditableRow:u,discardToggleOpen:p,setIsDuplicateDialogOpen:m,setSchemaName:h,validation:g,selectedSchema:f,setIsNameEditable:b,isNameEditable:v,deleteSelectedGradingSchema:y})=>{let S=(0,ed.q)(),C=(0,eV.useTheme)(),E=at(),I=(0,eV.useMediaQuery)(C.breakpoints.down("xs")),w=(0,eV.useMediaQuery)(C.breakpoints.down("sm")),A=oO(n).gradingSchemas,k=(0,ei.useRef)(null),T=(0,ei.useCallback)(e=>{a([...e])},[a]);(0,ei.useEffect)(()=>{t||b(!0)},[f.id,t,b]),(0,ei.useEffect)(()=>{v||f.ui.displayTitle===e||(c(!0),d(!0))},[v,c,d,e,f.ui.displayTitle]),(0,ei.useEffect)(()=>{c(!1),d(!1)},[f,c,d]),(0,ei.useEffect)(()=>{let e=e=>{var t;!k.current||(null===(t=k.current)||void 0===t?void 0:t.contains(e.target))||u(-1)};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[g.isValid,u]);let P=(0,ei.useCallback)(e=>{"Enter"===e.key&&b(!i)},[b,i]);return er().createElement(eV.Box,{className:E.bodyContainer},I&&er().createElement(eb.AnalyticsIconButton,{className:E.backButton,onClick:()=>{s?p(!0):l(!1)},analyticsId:"course.grades.settings.back.button"},er().createElement(eE.ChevronLeft,{className:E.backIcon}),S("gradingSchema.schemaDetail.back")),er().createElement(eV.Box,{className:E.detailsHeader},v?er().createElement("div",null,er().createElement(eb.AnalyticsTypography,{className:E.schemaTitle,variant:"h2"},e),er().createElement(eb.AnalyticsIconButton,{analyticsId:"course.grades.settings.edit.title.button","aria-label":S("gradingSchema.aria.editSchemaNameButton"),onClick:()=>{b(!1)}},er().createElement(eE.Edit,{className:E.detailsMenuIcon}))):er().createElement(eb.AnalyticsTextField,{analyticsId:"course.grades.settings.schema.add.title.input",autoFocus:!0,InputProps:{classes:{root:E.editableTitle}},value:e,onChange:e=>h(e.target.value.substring(0,64)),onKeyDown:P,onBlur:()=>b(!i)}),er().createElement(an,{isValid:g.isValid,numberOfSchemas:A.length,onDuplicateIconClick:()=>t?p(!0):m(!0),onDeleteIconClick:t?()=>p(!0):()=>y(f.id),canDeleteGradingSchema:!f.isInUse})),i&&er().createElement(eb.AnalyticsTypography,{className:E.duplicateNameWarning},S("gradingSchema.schemaDetail.duplicateGradingSchemaModal.warning")),f.isInUse&&er().createElement(eb.AnalyticsTypography,{className:(0,eX.Z)(E.inUseMessage,"js-in-use-message")},S("gradingSchema.schemaDetail.inUseMessage")),er().createElement("div",{className:(0,eX.Z)(E.listContainer,"js-list-Container"),ref:k},er().createElement(eb.AnalyticsTable,{analyticsId:"gradingSchema.schemeMappingTable","aria-label":S("gradingSchema.aria.schemaMappingTable")},er().createElement(eb.AnalyticsTableHead,{analyticsId:"gradingSchema.schemeMappingTableHead"},er().createElement(eb.AnalyticsTableRow,{analyticsId:"gradingSchema.schemeMappingTableRow"},er().createElement(eb.AnalyticsTableCell,{analyticsId:"gradingSchema.schemeMappingTableCell",className:E.leftCellBorder},er().createElement(eb.AnalyticsTypography,{component:"div",variant:"h3"},S("gradingSchema.schemaDetail.gradeName"))),!w&&er().createElement(eb.AnalyticsTableCell,{analyticsId:"gradingSchema.schemeMappingTableCell"},er().createElement(eb.AnalyticsTypography,{component:"div",variant:"h3"},S("gradingSchema.schemaDetail.gradeRange"))))),er().createElement(eb.AnalyticsTableBody,{analyticsId:"gradingSchema.schemeMappingTableBody"},r&&r.length&&er().createElement(ae,{editedSchemaSymbols:r,setSymbolsInCurrentSchema:T,setFooterOpen:c,setIsDirty:d,editableRow:o,setEditableRow:u,validation:g})))))},ar=({selectedSchema:e,setDrawerOpen:t,courseId:n,setSelectedSchema:i,setFooterOpen:r,isFooterOpen:s,discardToggleOpen:o,isDiscardOpen:a,setFocusAndScrollAddedSchema:l,deleteSelectedGradingSchema:c})=>{var d;let[u,p]=(0,ei.useState)(e.symbols),m=o$(u),[h,g]=(0,ei.useState)(!1),[f,b]=(0,ei.useState)(null===(d=null==e?void 0:e.ui)||void 0===d?void 0:d.displayTitle),[v,y]=(0,ei.useState)(-1),[S,C]=(0,ei.useState)(!1),[E,I]=(0,ei.useState)(!0),w=(0,eq.Lx)(),A=(0,ed.q)(),k=oZ(),T=o_(n,f,null==e?void 0:e.id),P=eY().cloneDeep((0,eq.pJ)(t=>eO.Ys.gradebookSchema.getGradebookSchemaById(t,e.id)));(0,ei.useEffect)(()=>{p(e.symbols),b(e.ui.displayTitle),y(-1)},[e.symbols,e.ui.displayTitle]);let D=(0,ei.useCallback)(()=>{o(!1)},[o]),x=(0,ei.useCallback)(()=>{C(!1)},[]),R=(0,ei.useCallback)(async()=>{let e=(null==P?void 0:P.ui.displayTitleKey)?A(null==P?void 0:P.ui.displayTitleKey):null==P?void 0:P.ui.displayTitle;i({...P,ui:{displayTitle:e}}),b(e),p(eY().cloneDeep(null==P?void 0:P.symbols)),r(!1),g(!1),o(!1),I(!0)},[o,P,r,i,A]),L=(0,ei.useCallback)(async t=>{if(h)return;let r=await w(eO.Nwg.gradebookSchema.persistGradebookSchema({courseId:n,schema:{...e,symbols:u,id:void 0,title:t,ui:{displayTitle:t}}}));i(eY().cloneDeep(null==r?void 0:r.schema)),l(!0),x()},[n,w,u,x,h,e,l,i]),N=(0,ei.useCallback)(()=>{o(!0)},[o]),$=(0,ei.useCallback)(e=>{"Escape"===e.key&&s&&!a&&N()},[N,a,s]);(0,ei.useEffect)(()=>(document.addEventListener("keydown",$,!1),()=>{document.removeEventListener("keydown",$,!1)}),[$]);let O=(0,ei.useCallback)(()=>{w(eO.Nwg.gradebookSchema.updateGradebookSchema({courseId:n,schema:{...e,title:f,ui:{displayTitle:f},symbols:u}})),g(!1),r(!1),y(-1)},[n,w,u,f,e,r]),G=(0,ei.useCallback)(e=>{e&&c(e)},[c]);return er().createElement(er().Fragment,null,u.length>0&&er().createElement(er().Fragment,null,er().createElement(ai,{schemaName:f,isDirty:h,editableRow:v,courseId:n,hasDuplicateName:T,editedSchemaSymbols:u,isFooterOpen:s,setEditedSchemaSymbols:p,setDrawerOpen:t,setFooterOpen:r,setIsDirty:g,setEditableRow:y,discardToggleOpen:o,setIsDuplicateDialogOpen:C,setSchemaName:b,validation:m,selectedSchema:e,setIsNameEditable:I,isNameEditable:E,deleteSelectedGradingSchema:G}),s&&er().createElement(eb.AnalyticsDialogActions,{analyticsId:"gradebook.schema.view.actions",className:k.footerContainer},er().createElement(eb.AnalyticsDefaultButton,{analyticsId:"course.grades.settings.schema.cancel.button",className:"js-footer-cancel-btn",onClick:N,"aria-haspopup":"dialog","aria-label":A("global.cancel")},A("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{id:"footer-save-btn",onClick:O,disabled:!h||!m.isValid||T||f.trim().length<=0,analyticsId:"course.grades.settings.schema.save.button","aria-label":A("global.save")},A("gradingSchema.save")))),er().createElement(oK,{title:A("gradingSchema.schemaDetail.discardGradingSchemaModal.title"),description:A("gradingSchema.schemaDetail.discardGradingSchemaModal.description"),dialogId:Q.Discard,handleOnClose:D,dialogHandler:R,isDialogOpen:a,actionBtnName:A("gradingSchema.schemaDetail.discardGradingSchemaModal.discard"),selectedSchemaName:f,courseId:n}),er().createElement(oK,{title:A("gradingSchema.schemaDetail.duplicateGradingSchemaModal.title"),description:"",dialogId:Q.Duplicate,handleOnClose:x,dialogHandler:L,isDialogOpen:S,actionBtnName:A("gradingSchema.schemaDetail.duplicateGradingSchemaModal.duplicate"),selectedSchemaName:f,courseId:n}))},as=(0,tw.ZL)(()=>(0,tw.kc)({emptyPage:{textAlign:"center"}}));var ao=n(132458),aa=n.n(ao);let al=({openAddSchemaDialog:e})=>{let t=(0,ed.q)(),n=as();return er().createElement("div",{className:n.emptyPage},er().createElement(ej.R22,{illustration:ao,prominentText:t("gradingSchema.empty.title"),subText:t("gradingSchema.empty.description")}),er().createElement(eb.AnalyticsPrimaryButton,{onClick:e,analyticsId:"course.grades.settings.schema.add.button","aria-label":t("gradingSchema.empty.setup")},t("gradingSchema.empty.setup")))},ac=e=>oG(e.filter(e=>e.scaleType===e$.aQo.Tabular)),ad=e=>{let t=(0,eq.Lx)(),n=ac(oO(e).gradingSchemas);return{deleteGradingSchema:(0,ei.useCallback)(i=>{let r;let s=n.find(e=>e.id===i);if(!s)return;let o=n.indexOf(s);return n.length>1&&(r=o===n.length-1?n[o-1]:n[o+1]),t(eO.Nwg.gradebookSchema.deleteGradebookSchema({courseId:e,schemaId:i})),r},[e,t,n])}},au=Q.Delete,ap=({exitCallback:e})=>{let t=(0,ed.q)(),n=ox(),[i,r]=(0,ei.useState)(!1),s=(0,ei.useCallback)((t=!1)=>{r(!0),e(t)},[e]);return er().createElement(eu._X,{open:!i,maxWidth:"md",disableBackdropClick:!0,className:(0,eX.Z)(n.schemaDialog),onClose:()=>s(),analyticsId:`${au}-dialog`},er().createElement(eb.AnalyticsDialogTitle,{analyticsId:`${au}-dialog-title`,onClose:()=>s(),id:`${au}-dialog-title`,closeButtonProps:{"aria-label":t("gradingSchema.aria.deleteSchemaCloseBtn")}},t("gradingSchema.schemaDetail.deleteGradingSchemaModel.title")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${au}-dialog-content`},er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${au}-dialog-description`,id:`${au}-dialog-description`,"aria-live":"assertive",role:"alert"},t("gradingSchema.schemaDetail.deleteGradingSchemaModel.confirmation"),er().createElement("div",null),t("gradingSchema.schemaDetail.deleteGradingSchemaModel.warning"))),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${au}-dialog-actions`},er().createElement(eb.AnalyticsDefaultButton,{onClick:()=>s(),analyticsId:`course.grades.settings.schema.${au}.cancel.button`,"aria-label":t("global.cancel")},t("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:`course.grades.settings.schema.${au}.button`,onClick:()=>s(!0),"aria-label":t("gradingSchema.aria.deleteSchema")},t("gradingSchema.schemaDetail.delete"))))},am=({courseId:e,setIsDirty:t})=>{let n=ic(e),i=(0,eV.useTheme)(),r=(0,ed.q)(),s=oz(),o=(0,eV.useMediaQuery)(i.breakpoints.down("xs")),{deleteGradingSchema:a}=ad(e),l=(0,eq.Lx)(),[c,d]=(0,ei.useState)(),[u,p]=(0,ei.useState)(!1),[m,h]=(0,ei.useState)(!1),[g,f]=(0,ei.useState)(!1),[b,v]=(0,ei.useState)(!1),[y,S]=(0,ei.useState)(!1),{gradingSchemas:C,isValid:E,isLoading:I}=oO(e),w=ac(C),{displayModal:A,modal:k}=(0,ej.ddY)(oB,{courseId:e}),{displayModal:T,modal:P}=(0,ej.ddY)(ap),D=(0,ei.useCallback)(e=>{d(e?eJ.cloneDeep(e):void 0)},[]),x=(0,s9.y1)(()=>{S(!1)},5e3),R=(0,ei.useCallback)(async t=>{let n=[{id:(0,o7.v4)(),schemaId:"",symbol:"A",lowerBound:50,upperBound:100,absoluteTranslation:75},{id:(0,o7.v4)(),schemaId:"",symbol:"F",lowerBound:0,upperBound:50,absoluteTranslation:25}],i={courseId:e,scaleType:e$.aQo.Tabular,symbols:n,title:t,userDefined:!1,version:0,isInUse:!1},r=await l(eO.Nwg.gradebookSchema.persistGradebookSchema({courseId:e,schema:i}));d(eJ.cloneDeep(r.schema)),v(!0)},[e,l,v,d]),L=(0,ei.useCallback)(async()=>{if(m)f(!0);else{let{confirmed:e,results:t}=await A();e&&t&&await R(t)}},[R,A,m]),N=(0,ei.useCallback)(()=>{p(!1)},[]),$=(0,ei.useCallback)(async e=>{let{confirmed:t}=await T();t&&(D(a(e)),S(!0),x())},[a,T,D,x]);return((0,ei.useEffect)(()=>{if(w&&w.length>0&&E){if(c){let e=w.find(e=>e.id===c.id);e&&e.isInUse!==c.isInUse&&D({...c,isInUse:e.isInUse})}else D(w[0])}},[c,w,D,E]),(0,ei.useEffect)(()=>{t(m)},[m,t]),I)?ei.createElement("div",{"data-testid":"spinner",className:s.spinner},ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:r("global.loading"),size:"large"})):ei.createElement("div",{className:`react-container ${s.peekPanel}`},ei.createElement("header",{className:s.peekPanelHeader},ei.createElement(ej.YIP,{headerText:r("course.grades.grading-schema.title"),subHeaderText:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"",analyticsIdPrefix:"gradebook.components.grading-schema-header",showMenuToggleButton:!0,readyToFocus:!0})),ei.createElement("div",{className:s.peekPanelContainer},E&&(w.length>0?ei.createElement("div",{className:s.gradingSchemaContainer},y&&ei.createElement(eb.AnalyticsOffScreenAnnouncement,{analyticsId:"gradebook.components.grading-schema.deletion.offScreenAnnouncement",type:"polite",message:r("gradingSchema.aria.deleteSchemaLive"),changeTrigger:1}),ei.createElement(oj,{courseId:e,schemas:w,setDrawerOpen:p,drawerOpen:u,setSelectedSchema:D,selectedSchema:c,isFooterOpen:m,discardToggleOpen:f,focusAndScrollAddedSchema:b,setFocusAndScrollAddedSchema:v,openAddSchemaDialog:L}),c&&c.symbols&&w.length>0&&ei.createElement(ei.Fragment,null,o?ei.createElement(eb.AnalyticsDrawer,{analyticsId:"gradebook.schema.drawer",anchor:"bottom",variant:"persistent",PaperProps:{className:s.schemaDrawer},hideBackdrop:!0,disableEnforceFocus:!0,open:u,onClose:N},ei.createElement(ar,{selectedSchema:c,setSelectedSchema:D,setDrawerOpen:p,courseId:e,setFooterOpen:h,isFooterOpen:m,discardToggleOpen:f,isDiscardOpen:g,setFocusAndScrollAddedSchema:v,deleteSelectedGradingSchema:$})):ei.createElement(ar,{selectedSchema:c,setSelectedSchema:D,setDrawerOpen:p,courseId:e,setFooterOpen:h,isFooterOpen:m,discardToggleOpen:f,isDiscardOpen:g,setFocusAndScrollAddedSchema:v,deleteSelectedGradingSchema:$}))):ei.createElement(al,{openAddSchemaDialog:L}))),k,P)},ah=(0,eV.makeStyles)(e=>(0,eV.createStyles)({container:{display:"flex",flexDirection:"row",paddingLeft:"10px",paddingRight:"10px",[e.breakpoints.up("sm")]:{paddingRight:"0px"},[e.breakpoints.up("md")]:{paddingLeft:"0px"}},userDetailContainer:{flex:1},userFieldContainer:{display:"flex",flexDirection:"row",padding:"2px 5px","& button":{minWidth:0,minHeight:0,padding:"0 5px"}},nameIdContainer:{display:"flex",flexDirection:"column",flexFlow:"row wrap",[e.breakpoints.up("sm")]:{flexDirection:"row"}},username:{paddingRight:"0px",[e.breakpoints.up("sm")]:{paddingRight:"10px"}},userLabel:{fontWeight:e.typography.fontWeightSemiBold,paddingRight:"5px"},noWrap:{whiteSpace:"nowrap"},userValues:{wordBreak:"break-all"},pipeSymbol:{display:"none",[e.breakpoints.up("sm")]:{display:"block",margin:"0px 5px"}},pronounceContainer:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}}})),ag=(0,eV.makeStyles)(()=>({studentMenuItem:{minWidth:"200px"},studentMenuIcon:{marginRight:"11px",marginLeft:"6px",display:"flex",alignItems:"center"},container:{display:"flex",height:"fit-content"},iconButton:{margin:"0px 10px"}})),af=e=>{let{displayName:t,membership:n}=e,i=(0,ed.q)(),r=ag(),s=(0,tw.Fg)(),o=(0,tw.ac)(s.breakpoints.up("md")),[a,l]=ei.useState(void 0),c=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams),d=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params),u=null==n?void 0:n.id,p=null==c?void 0:c.userId,m=null==d?void 0:d.courseId,h=ei.useCallback(()=>{l(void 0),np.Nd.goPeekState((0,np.k9)({courseId:m,recipientIds:p}))},[p,m]),g=ei.useCallback(()=>{l(void 0),np.Nd.goPeekState((0,np.xB)({membershipId:u}))},[u]),f=ei.useCallback(()=>{l(void 0),np.Nd.goPeekState((0,np._Y)({userId:p}))},[p]),b=[{id:"student-activity",analyticsId:"gradebook.components.student-action-menu.student-activity",text:i("gradebook.individualStudentDetails.studentActivity"),icon:ei.createElement(eE.BeastAnalytics,null),onClick:f,show:!0},{id:"accommodations",analyticsId:"gradebook.components.student-action-menu.accommodations",text:i("gradebook.studentList.table.actionsMenu.accommodations"),icon:ei.createElement(eE.Accommodations,null),onClick:g,show:(null==n?void 0:n.permissions.editDueDateException)||(null==n?void 0:n.permissions.editTimeLimitException)},{id:"send-message",analyticsId:"gradebook.components.student-action-menu.send-message",text:i("gradebook.individualStudentDetails.sendMessage"),icon:ei.createElement(eE.Messages,null),onClick:h,show:null==n?void 0:n.isAvailable}];return ei.createElement("div",{className:r.container},o?b.map(e=>e.show&&ei.createElement(eb.AnalyticsIconButton,{analyticsId:e.analyticsId,id:e.id,key:e.id,onClick:e.onClick,className:r.iconButton},e.icon,ei.createElement(eb.AnalyticsTypography,{component:"span",variant:"inherit"},e.text))):ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.components.common.student-action-menu.moreOptions",id:"student-action-menu-button","aria-controls":a?"student-action-menu":void 0,"aria-haspopup":"menu","aria-label":i("gradebook.studentList.table.actionsMenu.moreOptions",{fullName:t}),"aria-expanded":!!a,onClick:e=>{l(e.currentTarget)}},ei.createElement(eE.Menu,null)),ei.createElement(eb.AnalyticsMenu,{variant:"menu",id:"student-action-menu",anchorEl:a,open:!!a,onClose:()=>{l(void 0)},MenuListProps:{"aria-labelledby":"student-action-menu-button"},analyticsId:"gradebook.components.student-action-menu.menu"},b.map(e=>e.show&&ei.createElement(eb.AnalyticsMenuItem,{analyticsId:e.analyticsId,id:e.id,key:e.id,className:r.studentMenuItem,button:!0,onClick:e.onClick},ei.createElement("span",{className:r.studentMenuIcon},e.icon),ei.createElement("span",null,e.text))))))},ab=e=>{var t,n,i;let{user:r,membership:s}=e,{translate:o,formatDatetime:a,formatUsername:l}=(0,eQ.h)(),c=ah(),d=l(r,nk.ILocaleUsernameFormat.Short,{noWrap:!0});return ei.createElement("div",{className:c.container},ei.createElement("div",{className:c.userDetailContainer},ei.createElement("div",{className:c.userFieldContainer},ei.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.lastAccess")),ei.createElement("div",{className:c.userValues},s.lastAccessDate?a(s.lastAccessDate,nk.ILocaleDatetimeFormat.Short):o("gradebook.individualStudentDetails.noActivity"))),ei.createElement("div",{className:c.nameIdContainer},r.userName&&ei.createElement("div",{className:c.userFieldContainer},ei.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.userName")),ei.createElement("div",{className:(0,eX.Z)(c.userValues,c.username)},r.userName)),r.studentId&&ei.createElement("div",{className:c.userFieldContainer},ei.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.studentId")),ei.createElement("div",{className:c.userValues},r.studentId))),ei.createElement("div",{className:c.pronounceContainer},r.pronouns&&ei.createElement("div",{className:c.userFieldContainer},ei.createElement("div",{className:c.userLabel},o("gradebook.individualStudentDetails.pronouns")),ei.createElement("div",{className:c.noWrap},r.pronouns)),r.pronouns&&(r.pronunciation||(null===(t=r.pronunciationAudio)||void 0===t?void 0:t.permanentUrl))&&ei.createElement("span",{className:c.pipeSymbol},"|"),(r.pronunciation||(null===(n=r.pronunciationAudio)||void 0===n?void 0:n.permanentUrl))&&ei.createElement("div",{className:c.userFieldContainer},ei.createElement("div",{className:(0,eX.Z)(c.userLabel,c.noWrap)},o("gradebook.individualStudentDetails.pronounceAs")),r.pronunciation&&ei.createElement("div",{className:c.userValues},r.pronunciation),(null===(i=r.pronunciationAudio)||void 0===i?void 0:i.permanentUrl)&&ei.createElement(ej.zi,{analyticsId:"gradebook.individual-student-grades-info.user.pronunciation",src:r.pronunciationAudio.permanentUrl,ariaLabel:o("gradebook.individualStudentDetails.pronunciationAriaLabel")})))),ei.createElement(af,{displayName:d,membership:s}))},av=(0,eV.makeStyles)(e=>(0,eV.createStyles)({container:{width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",whiteSpace:"nowrap",[e.breakpoints.up("md")]:{justifyContent:"space-between"}},headerContainer:{display:"flex",maxWidth:"100%",[e.breakpoints.up("md")]:{flex:1,minWidth:0}},iconContainer:{display:"flex",margin:"0px 4px",alignItems:"center"},accommodationsIcon:{color:e.palette.brand.main,marginRight:"10px"},headerText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.palette.primary.contrastText,[e.breakpoints.up("md")]:{color:e.palette.text.primary}}})),ay=(0,eV.makeStyles)(e=>(0,eV.createStyles)({container:{display:"flex",alignItems:"center"},currentGrade:{display:"none",[e.breakpoints.up("md")]:{display:"flex",marginRight:"8px",alignItems:"center"}}})),aS=e=>{let{courseId:t,membership:n,user:i}=e,r=(0,ed.q)(),s=ay(),o=(0,tw.Fg)(),a=(0,tw.ac)(o.breakpoints.up("md")),l=n8(t),c=ih(t,null==l?void 0:l.gradingSchemaId),d=(0,eq.vr)(t,(null==l?void 0:l.id)||null,[n]),u=(null==l?void 0:l.visible)===!1,p={user:i,membership:n,overallGrade:d&&d[n.userId],overallGradeColumn:l},m=a?L.Large:L.Default;return ei.createElement(ei.Fragment,null,p.overallGrade&&ei.createElement("div",{className:s.container,"data-testid":"test-grade-pill-container"},u&&ei.createElement(eb.AnalyticsTooltip,{analyticsId:"gradebook.individualStudentOverallGradePill.visibilityInformationTooltip",title:r("gradebook.grade.tooltip.gradeVisibility")},ei.createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.individualStudentOverallGradePill.visibilityInformationTooltip.button","aria-label":r("gradebook.grade.gradeVisibilityIcon")},ei.createElement(eE.Invisible,null))),ei.createElement(eb.AnalyticsTypography,{component:"span",variant:"h3",className:s.currentGrade},r("gradebook.grade.currentGrade")),ei.createElement(nA,{row:p,isOverallGradeConfigured:!!l,gradingSchema:c,overallGradeColumn:l,pillSize:m})))},aC=()=>{var e;let{translate:t,formatUsername:n}=(0,eQ.h)(),i=av(),r=(0,tw.Fg)(),s=(0,tw.ac)(r.breakpoints.up("md")),o=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams),a=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params),l=null==o?void 0:o.userId,c=null==o?void 0:o.membershipId,d=null==a?void 0:a.courseId,u=(0,eq.PU)(l),p=(0,eq.pJ)(e=>eO.Ys.courseMembership.getCourseMembershipByMembershipId(e,c)),m=(0,eq.Tn)(d),h=ei.createElement(nR.K6,{user:u,format:nk.ILocaleUsernameFormat.Short,ariaHidden:!1}),g=nx(p),f=u&&n(u,nk.ILocaleUsernameFormat.Short,{noWrap:!0}),b=ei.createElement("div",{className:i.container},ei.createElement("div",{className:i.headerContainer},s&&ei.createElement("div",null,ei.createElement(eb.AnalyticsAvatar,{size:"medium",src:null===(e=null==u?void 0:u.avatar)||void 0===e?void 0:e.permanentUrl,alt:f})),ei.createElement(eb.AnalyticsTypography,{component:"h1",variant:s?"display1":"h3",className:i.headerText},h),g&&ei.createElement("div",{className:i.iconContainer},ei.createElement(eE.Accommodations,{className:i.accommodationsIcon,titleAccess:t("gradebook.studentList.fullNameComponent.aria.accommodations")}))));return ei.createElement(ej.YIP,{headerText:b,subHeaderText:(null==m?void 0:m.displayName)||"",analyticsIdPrefix:"gradebook.components.individual-student-grades-panel-header",showMenuToggleButton:!0,readyToFocus:!0},p&&ei.createElement(aS,{courseId:d,user:u,membership:p}))};var aE=n(637963),aI=n(150885);let aw=(0,eV.makeStyles)(e=>({userCardContainer:{display:"flex",width:"100%",alignItems:"center",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},avatar:{minWidth:"unset",display:"flex"},userContainer:{width:"100%",display:"flex",gap:"8px",marginLeft:"12px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},userDetails:{display:"flex",gap:"8px",overflow:"hidden"},username:{maxWidth:"50%",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},iconContainer:{display:"flex",alignItems:"center"},accommodationIcon:{color:e.palette.brand.main,marginRight:"10px"},userNameContainer:{maxWidth:"50%"},userName:{fontWeight:e.typography.fontWeightSemiBold},roleBadge:{textTransform:"uppercase",fontSize:e.typography.fontSizeXSmall,fontWeight:e.typography.fontWeightBold,backgroundColor:e.palette.background.b10,padding:"0px 10px"},courseRole:{color:e.palette.text.secondary}})),aA=e=>{var t;let{avatarSize:n,className:i,showRoleInBadge:r,role:s,user:o,showAccommodation:a,showUsername:l=!1}=e,c=aw(),{translate:d,formatUsername:u}=(0,eQ.h)(),p=u(o,nk.ILocaleUsernameFormat.Short),m=(0,eq.gH)("global.course.","global.organization.");return ei.createElement("div",{className:(0,eX.Z)(c.userCardContainer,i)},ei.createElement("div",{className:c.avatar},ei.createElement(eb.AnalyticsAvatar,{size:n,alt:p,"aria-hidden":!0,src:null===(t=null==o?void 0:o.avatar)||void 0===t?void 0:t.permanentUrl})),ei.createElement("div",{className:c.userContainer},a&&ei.createElement("div",{className:c.iconContainer},ei.createElement(eE.Accommodations,{className:c.accommodationIcon,titleAccess:d("gradebook.studentList.fullNameComponent.aria.accommodations")})),ei.createElement("div",{className:c.userDetails},ei.createElement("div",{className:c.userNameContainer},ei.createElement(nR.K6,{userNameStyles:c.userName,format:nk.ILocaleUsernameFormat.Short,ariaHidden:!1,user:o})),l&&ei.createElement(eb.AnalyticsTypography,{className:c.username},`(${o.userName})`)),s&&(r?ei.createElement(eb.AnalyticsBadge,{classes:{badge:c.roleBadge},position:"inline",badgeContent:d(m(`global.course.role.${s}`)),offScreenLabel:d(m(`global.course.role.${s}`))}):ei.createElement("div",{className:c.courseRole},d(m(`global.course.role.${s}`))))))},ak=(0,eV.makeStyles)(()=>({graderInfo:{paddingLeft:"4px"},feedBackPanel:{height:"50%",position:"relative",overflowY:"auto"}})),aT=e=>{var t,n;let{feedback:i,onFeedbackSave:r,openCloudStorageIntegrationModal:s,lastFeedbackAuthor:o,feedbackIsDirty:a,cancelFuncRef:l,initialSelectedTabKey:c}=e,[d,u]=ei.useState(!0),[p,m]=ei.useState(!1),[h,g]=ei.useState(null!==(t=null==i?void 0:i.rawText)&&void 0!==t?t:""),f=ei.useRef(""),b=ei.useRef(""),v=ei.useRef(null==i?void 0:i.rawText),y=ei.useRef((0,aI.generateToBbML)(h)),S=ak(),{translate:C,locale:E}=(0,eQ.h)(),I=(0,eq.c2)(),w=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.courseId),A=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.userId),k=(0,eq.bW)(w,_.EnterFeedback),T=(0,eq.pJ)(e=>eO.Ys.course.getCourseById(e,w)),P=(0,eq.PU)(null==o?void 0:o.userId),D=(0,eq.pJ)(e=>eO.Ys.courseMembership.getCourseMembershipsByUserIds(e,w,[null==o?void 0:o.userId])[0]),x=null==D?void 0:D.role,R=ei.useCallback(()=>{a&&a(!(0,iW.vZ)(v.current,h),v.current,d)},[a,i,v.current,d,h]);ei.useEffect(()=>{var e;let t=null!==(e=null==i?void 0:i.rawText)&&void 0!==e?e:"";g(t),v.current=t,y.current=(0,aI.generateToBbML)(t),u(!!t||!k),l&&(l.current=N),R()},[i,k,A]);let L=async()=>{if(!(!h&&(0,iW.vZ)(v.current,h))){m(!0),u(!0);try{let e=await y.current(!0);r&&await r({rawText:e,fileLocation:f.current,webLocation:b.current})}finally{m(!1)}}},N=ei.useCallback(()=>{v.current=h,h&&(R(),u(!0))},[R,h]),$=ei.useCallback(e=>{f.current=e.fileLocation,b.current=e.webLocation},[]);return ei.createElement(ei.Fragment,null,ei.createElement(aE.Of,{analyticsId:"gradebook.grade-and-feedback.offline-items.feedback",panelTitle:C("gradebook.gradeFeedback.offlineGradesAndFeedback.pageTitle"),configProps:{isOrganization:T.isOrganization,courseColorClass:"",initialSelectedTabKey:c,editorConfigProps:{apiBasePath:eO.vc.apiBasePath,courseId:w,onClickCancel:N,onClickSave:L,onUploadSuccess:$,xsrfToken:eO.vc.xsrf,locale:E,fileUploadSettings:I,openCloudStorageIntegrationModal:s},primaryFeedbackConfigProps:{onFeedbackChange:e=>{y.current=e.toBbML;let t=e.toBbML();v.current=t,R()},onClickEdit:()=>{u(!1)},editorIsReadOnly:d}},primaryGraderFeedback:{isFeedbackEditable:!p&&k,rawTextFeedback:null!==(n=v.current)&&void 0!==n?n:""},isInlineMode:!0}),d&&h&&P&&ei.createElement("div",{className:S.graderInfo},ei.createElement(aA,{avatarSize:"small",role:x,showRoleInBadge:!0,user:P,showAccommodation:!1})))},aP=e=>{let[t,n]=(0,ei.useState)([]),{memberships:i,users:r,view:s}=e;return(0,ei.useEffect)(()=>{if(i&&i.length&&!(null==s?void 0:s.isLoading)){let e=[];i.forEach(t=>{t.userId&&e.push(r[t.userId])}),n(e)}},[null==s?void 0:s.isLoading,JSON.stringify(i)]),{users:t}};var aD=n(958299);let ax=(0,eV.makeStyles)(()=>({navigationLabel:{padding:"0 10px"},navigationContainer:{display:"flex",justifyContent:"space-between",padding:"16px 30px",width:"100%"}})),aR=e=>{let{onNavigateToNextFeedback:t,onNavigateToPreviousFeedback:n,shouldDisableNextFeedback:i,shouldDisablePreviousFeedback:r}=e,{translate:s,isRtl:o}=(0,eQ.h)(),a=ax(),l=(0,eq.gH)("gradebook.","organization.gradebook.");return ei.createElement("div",{className:a.navigationContainer},o()?ei.createElement(ei.Fragment,null,ei.createElement(aD.AnalyticsIconButton,{onClick:t,disabled:i,analyticsId:"offline-feedback.feedback-navigator.next","aria-label":s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))},ei.createElement(eE.ArrowLeft,null),ei.createElement("span",{className:a.navigationLabel},s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent")))),ei.createElement(aD.AnalyticsIconButton,{onClick:n,disabled:r,analyticsId:"offline-feedback.feedback-navigator.previous","aria-label":s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))},ei.createElement("span",{className:a.navigationLabel},s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))),ei.createElement(eE.ArrowRight,null))):ei.createElement(ei.Fragment,null,ei.createElement(aD.AnalyticsIconButton,{onClick:n,disabled:r,analyticsId:"offline-feedback.feedback-navigator.previous","aria-label":s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent"))},ei.createElement(eE.ArrowLeft,null),ei.createElement("span",{className:a.navigationLabel},s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.previousStudent")))),ei.createElement(aD.AnalyticsIconButton,{onClick:t,disabled:i,analyticsId:"offline-feedback.feedback-navigator.next","aria-label":s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))},ei.createElement("span",{className:a.navigationLabel},s(l("gradebook.gradeFeedback.offlineGradesAndFeedback.nextStudent"))),ei.createElement(eE.ArrowRight,null))))},aL=(0,eV.makeStyles)(()=>({gradeMenuItem:{minWidth:"278px"},gradeMenuIcon:{marginRight:"5px",marginLeft:"6px"}})),aN=e=>{let{gradeDetail:t,onGradeUpdate:n}=e,i=(0,ed.q)(),r=(0,eq.Lx)(),s=aL(),o=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.courseId),a=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.columnId),[l,c]=ei.useState(void 0),d=async()=>{if(await r(eO.Nwg.gradebookGrade.postGradeByGradeId({courseId:o,columnId:a,id:t.id})),n){let e={...t};e.manualStatus=e$.WTZ.IsPosted,e.status=e$.EyR.Graded,n(e)}r(eO.Nwg.gradebookGrade.loadBulkView(o,[a],{membershipIds:[t.memberId]},{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]})),r(eO.Nwg.columnSummary.loadColumnSummary({courseId:o,columnId:a}))},u=ei.useCallback(()=>{c(void 0)},[]),p=ei.useCallback(e=>{c(e.currentTarget)},[]),{displayModal:m,modal:h}=(0,ej.ddY)(oC),g=async()=>{u();let{confirmed:e}=await m();e&&d()},f=[{key:i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"),analyticsId:"gradebook.components.common.grade-submission.grade-action-menu.postGrade",text:i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.postGrade"),icon:ei.createElement(eE.Post,{className:s.gradeMenuIcon}),onClick:g}];return ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.components.common.grade-submission.grade-action-menu.trigger",id:"grade-action-menu-button","aria-controls":l?"grade-action-menu":void 0,"aria-haspopup":"menu","aria-label":i("gradebook.gradeFeedback.offlineGradesAndFeedback.overflowMenu.aria"),"aria-expanded":!!l,onClick:p},ei.createElement(eE.Menu,null)),ei.createElement(eb.AnalyticsMenu,{variant:"menu",id:"grade-action-menu",anchorEl:l,open:!!l,onClose:u,MenuListProps:{"aria-labelledby":"grade-action-menu-button"},transformOrigin:{vertical:0,horizontal:"right"},analyticsId:"gradebook.components.common.grade-submission.grade-action-menu"},f.map(e=>ei.createElement(eb.AnalyticsMenuItem,{analyticsId:e.analyticsId,key:e.key,className:s.gradeMenuItem,button:!0,onClick:e.onClick},ei.createElement(eb.AnalyticsListItemIcon,{analyticsId:"gradebook.components.common.grade-submissions.listItemIcon"},e.icon),ei.createElement(eb.AnalyticsListItemText,{analyticsId:"gradebook.components.common.grade-submissions.listItemIcon"},e.text)))),h)},a$=(0,eV.makeStyles)(e=>({postGrades:{display:"flex",float:"right"},gradeSubmissionCard:{display:"flex",width:"100%"},gradeAdditionalInfo:{fontWeight:e.typography.fontWeightRegular,color:e.palette.text.hint,right:"0px",float:"right"},gradingSection:{position:"relative",width:"35%"},profileCard:{width:"65%"}})),aO=e=>{let{analyticsId:t,student:n,role:i,onGradeInputBlur:r,gradeDetail:s,onGradeUpdate:o,membership:a}=e,l=(0,ed.q)(),c=a$(),d=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.courseId),u=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.columnId),p=(0,eq.pJ)(e=>eO.Ys.gradebookColumn.getGradebookColumnById(e,u)),m=ih(d,null==p?void 0:p.gradingSchemaId),h=(0,eq.pJ)(e=>eO.Ys.courseEntitlements.userHasCourseEntitlement(e,d,_.PublishGrades)),g=nx(a);return ei.createElement("div",{className:c.gradeSubmissionCard},ei.createElement("div",{className:c.profileCard},ei.createElement(aA,{avatarSize:"medium",user:n,role:i,showAccommodation:g})),ei.createElement("div",{className:c.gradingSection},ei.createElement("div",{className:c.postGrades},m&&ei.createElement(tR,{grade:null==s?void 0:s.manualScore,variant:t7(m.scaleType),analyticsId:t,pointsPossible:p.possible,ariaLabel:l(nt(null==s?void 0:s.displayGrade),{user:n,grade:null==s?void 0:s.manualScore,total:p.possible}),onBlur:r,symbolsMap:m.symbols,colorOverride:(null==s?void 0:s.isExempt)?N.Grey:void 0}),s&&h&&t8(s)&&ei.createElement(aN,{gradeDetail:s,onGradeUpdate:o})),ne(null==s?void 0:s.displayGrade)&&ei.createElement("div",{className:c.gradeAdditionalInfo},l("gradebook.grade.grade-input.pastDueZero"))))},aG=e=>{let{gradeDetail:t,onGradeUpdate:n,student:i,role:r,membership:s}=e,[o,a]=ei.useState(null),l=(0,eq.Lx)(),c=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.courseId),d=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.columnId),u=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.userId),p=(0,eq.pJ)(e=>eO.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,d,u)[0]),m=async e=>{void 0!==e&&e!==o&&(a(e),t&&(null==t?void 0:t.id)?await l(eO.Nwg.gradebookGrade.updateGradeByGradeId(t,{...t,manualScore:e})):await l(eO.Nwg.gradebookGrade.createGradeByUserId({courseId:c,columnId:d,userId:u,manualScore:e})),l(eO.Nwg.gradebookGrade.loadBulkView(c,[d],{membershipIds:[s.id]},{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]})),l(eO.Nwg.columnSummary.loadColumnSummary({courseId:c,columnId:d})))};return ei.useEffect(()=>{var e;(null===(e=null==t?void 0:t.displayGrade)||void 0===e?void 0:e.score)?a(t.displayGrade.score):a(null)},[t]),ei.useEffect(()=>{n&&p&&n(p)},[p,n]),ei.createElement(aO,{analyticsId:"offline-grades.gradePill",onGradeInputBlur:m,student:i,membership:s,role:r,gradeDetail:t,onGradeUpdate:n})},a_=(0,eV.makeStyles)(e=>({peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",[e.breakpoints.up("sm")]:{maxWidth:"400px"}}},hideHeader:{display:"none"},peekPanelBody:{padding:"16px",overflowY:"auto",flex:1,[e.breakpoints.up("sm")]:{padding:"30px"},"& h3":{fontSize:e.typography.fontSizeDefault}}})),aM=eO.Nwg.gradebookGrade.createGradeByUserId,aB=eO.Nwg.gradebookGrade.updateGradeByGradeId,aF=e=>{var t,n,i;let{courseName:r,onGradeUpdate:s,onFeedbackUpdate:o,openCloudStorageIntegrationModal:a,onFeedbackDirty:l}=e,c=(0,ed.q)(),d=(0,eq.Lx)(),u=a_(),p=ei.useRef(!1),m=ei.useRef(!0),[h,g]=ei.useState(0),f=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.userId),b=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.page),v=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.limit),y=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.q),S=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.courseId),C=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params.columnId),E=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams.sortParam),I=ei.useRef(),w=function(e,t=""){let n=(0,eq.Lx)();return(0,ei.useEffect)(()=>{e&&t&&n(eO.Nwg.gradebookColumn.loadGradebookColumn({columnId:t,courseId:e,allowedErrors:[e$.oji.Forbidden]}))},[n,e,t]),(0,eq.pJ)(e=>eO.Ys.gradebookColumn.getGradebookColumnById(e,t))}(S,C),A=(0,eq.bW)(S,_.ViewGradebookMetaData),k=(0,eq.d$)({courseId:S,filter:(()=>{let e={roleBucket:[e$.O8v.Taking]};return y&&(e.searchString=y),e})(),sort:(()=>{let e={"name(asc)":[e$.PJt.FamilyName,e$.PJt.GivenName,e$.PJt.Username],"name(desc)":[e$.PJt.FamilyName,e$.PJt.GivenName,e$.PJt.Username],"grade(asc)":[e$.PJt.Grade],"grade(desc)":[e$.PJt.Grade],"post(asc)":[e$.PJt.Post],"post(desc)":[e$.PJt.Post],"feedback(asc)":[e$.PJt.Feedback],"feedback(desc)":[e$.PJt.Feedback]},t=[e$.PJt.IsPreviewStudent,e$.PJt.FamilyName,e$.PJt.GivenName],n={asc:e$.SrV.Ascending,desc:e$.SrV.Descending},i=t.map(e=>({field:e,direction:e$.SrV.Ascending}));if(E in e){let t=n[E.split("(")[1].slice(0,-1)],r=e[E].map(e=>({field:e,direction:t}));return"name(asc)"===E||"name(desc)"===E?r:r.concat(i)}return i})(),columnId:C}),{memberships:T}=k,{users:P}=aP(k),D=(0,eq.pJ)(e=>eO.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(e,C,f)[0]),x=ei.useRef((null===(t=null==D?void 0:D.instructorFeedback)||void 0===t?void 0:t.rawText)||""),R=()=>Number(v||25),L=()=>{let e=P.findIndex(e=>e.id===f),t=Math.ceil((e+1)/R()).toString();return -1!==e&&b!==t&&np.Nd.search({page:t}),e};ei.useEffect(()=>{P&&P.length&&f&&g(L())},[P,f]),ei.useEffect(()=>{o&&D&&o(D)},[D,o]);let N=()=>{p.current=!1,d(eO.Nwg.gradebookGrade.loadBulkView(S,[C],{membershipIds:[T[h].id]},{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]}))},$=async e=>{let t=await d(aM({columnId:C,courseId:S,userId:f}));await O(null==t?void 0:t.grade,e)},O=async(e,t)=>{let n=G(e,t);await d(aB(e,{...e,instructorFeedback:n})),await N()},G=(e,t)=>(null==e?void 0:e.instructorFeedback)&&{...null==e?void 0:e.instructorFeedback,rawText:t.rawText}||t&&(null==t?void 0:t.fileLocation)!==""&&(null==t?void 0:t.webLocation)!==""&&{fileLocation:t.fileLocation,webLocation:t.webLocation,rawText:t.rawText}||{rawText:t.rawText},M=ei.useCallback((e={rawText:x.current})=>{var t;(0,iW.vZ)(e.rawText,null===(t=null==D?void 0:D.instructorFeedback)||void 0===t?void 0:t.rawText)||(D?O(D,e):$(e),l(!1,!0))},[D,T,C,S,d,f]),{displayModal:B,modal:F}=(0,ej.ddY)(ov),U=async()=>{let{confirmed:e,results:t}=await B();return e&&await M(),I.current(),t},V=()=>{var e;let t=R();np.Nd.search({userId:null===(e=P[h+1])||void 0===e?void 0:e.id,page:Math.ceil((h+2)/t).toString()}),g(e=>e+1)},H=()=>{var e;R(),np.Nd.search({userId:null===(e=P[h-1])||void 0===e?void 0:e.id}),g(e=>e-1)},q=async()=>{h+1!==P.length&&(!p.current||m.current?V():await U()&&V())},j=async()=>{!(h<1)&&(!p.current||m.current?H():await U()&&H())};return ei.useEffect(()=>{let e={type:rv.Cs.OfflineGradesAndFeedbacksPanelOpened,status:rv.rJ.Success,pageTitle:c("gradebook.gradeFeedback.offlineGradesAndFeedback.pageTitle")};(0,rv.Db)(e)},[]),ei.createElement("div",{id:"offline-grades-and-feedback-panel"},ei.createElement("div",{className:u.peekPanel},ei.createElement("header",{className:(0,eX.Z)(u.peekPanelHeader,(0,rv.Dd)()&&u.hideHeader)},ei.createElement(na.BbPanelHeader,{smallHeaderTitle:r,type:na.BbPanelType.peek,analyticsId:"gradebook.grade-and-feedback.offline-items-feedback-panel-header",title:null!==(n=null==w?void 0:w.columnName)&&void 0!==n?n:"",navMenuAriaLabel:c("global.navigationMenu")})),0!==P.length&&A&&-1!==h&&ei.createElement(ei.Fragment,null,ei.createElement("div",{className:u.peekPanelBody},ei.createElement("h2",null,c("gradebook.gradeFeedback.offlineGradesAndFeedback.gradesAndFeedbackTitle")),ei.createElement(aG,{gradeDetail:D,student:P[h],role:null===(i=T[h])||void 0===i?void 0:i.role,membership:T[h],onGradeUpdate:s}),ei.createElement(aT,{cancelFuncRef:I,feedback:null==D?void 0:D.instructorFeedback,feedbackIsDirty:(e,t,n)=>{p.current=e,x.current=t,m.current=n,l(e,n)},onFeedbackSave:M,lastFeedbackAuthor:null==D?void 0:D.lastFeedbackAuthor,openCloudStorageIntegrationModal:a})),ei.createElement(aR,{onNavigateToNextFeedback:q,onNavigateToPreviousFeedback:j,shouldDisableNextFeedback:h===P.length-1,shouldDisablePreviousFeedback:0===h}))),F)};var aU=n(927335);let aV=(0,eV.makeStyles)(e=>(0,eV.createStyles)({feedbackIcon:{color:e.palette.brand.main}})),aH=e=>{let{student:t,sortParam:n}=e,i=aV(e),r=(0,ed.q)();return ei.createElement(eb.AnalyticsTooltip,{placement:"bottom-start",title:r("gradebook.gradeFeedback.offlineGradesAndFeedback.viewFeedback"),analyticsId:"gradebook.components.common.edit-feedback-tooltip.title"},ei.createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.components.common.edit-feedback-tooltip.icon-button",onClick:()=>{if(t.id){let e={userId:t.id};n&&(e.sortParam=n),np.Nd.goPeekState((0,np.p$)(e))}},"aria-label":r("gradebook.gradeFeedback.offlineGradesAndFeedback.viewFeedbackAriaLabel",{student:t})},ei.createElement(aU.Feedback,{className:i.feedbackIcon})))},aq=(0,eV.makeStyles)(e=>(0,eV.createStyles)({offlineListFilters:{display:"flex",flexDirection:"column",minWidth:0,margin:"0px",[e.breakpoints.up("sm")]:{flexDirection:"row",justifyContent:"space-between",minWidth:"500px",height:"auto"}},offlineListSearchBox:{[e.breakpoints.up("sm")]:{maxWidth:"290px",margin:0,width:"100%"}},pageSizeContainer:{display:"inline-flex",alignItems:"center",borderBottom:`1px solid ${e.palette.secondary.main}`,padding:"20px 17px",[e.breakpoints.up("sm")]:{padding:0,borderBottom:"none"}},itemsPerPage:{padding:0,"& button":{border:`1px solid ${e.palette.text.hint}`,marginLeft:0,"&:hover":{border:`1px solid ${e.palette.text.hint}`}}}})),aj=[25,50,100],az=e=>{let{onSearchBoxTextChange:t,onPageSizeChange:n,initialPageSize:i}=e,r=aq(),s=(0,ed.q)(),[o,a]=ei.useState(""),l=ei.useCallback(e=>{a(e),t(e)},[t]);return ei.createElement("div",{className:r.offlineListFilters},ei.createElement(ej._Wk,{value:o,inputId:"offline-items-list-search-input",label:s("gradebook.gridFiltersPanel.memberships.placeholder"),analyticsId:"gradebook.offline-grades-list.search",onChange:l,onClear:()=>l(""),className:r.offlineListSearchBox}),ei.createElement("div",{className:r.pageSizeContainer},ei.createElement(ej.Y03,{className:r.itemsPerPage,pageSizeOptions:aj,initialPageSize:i,onPageSizeChange:n,analyticsId:"gradebook.offline-grades-list.onPageSizeChange.selector"})))},aW=(e,t)=>{let n=(0,eq.Lx)();return{onCreateNote:(0,ei.useCallback)(i=>n(eO.Nwg.courseUserNotes.createNote(e,t,{body:{rawText:i}})),[n,e,t])}},aK=(0,eV.makeStyles)(()=>({readOnlyMode:{"& .bb-editor":{maxHeight:"unset",minHeight:0,padding:0}}})),aZ=(0,ei.memo)((0,ei.forwardRef)(function(e,t){return er().createElement(aI.BbEditor,{...e,ref:t})})),aQ=(0,ei.memo)(function({analyticsId:e,bbml:t,editorId:n,isDisabled:i,isReadOnly:r,isToolbarHidden:s=!0,focusOnRender:o,onBlur:a,onChange:l,onFocus:c,size:d,ariaLabelledBy:u}){let p=(0,ed.q)(),m=aK(),[h,g]=(0,ei.useState)(!1),f=(0,ei.useRef)(null);(0,ei.useEffect)(()=>g(!1),[t]),(0,ei.useEffect)(()=>{var e;o&&!r&&(null===(e=f.current)||void 0===e||e.focusEditor())},[o,r]);let b=(0,ei.useCallback)(e=>{let t=e.toBbML();g(e.isDirty),l({rawText:t,asyncRawText:()=>e.toBbML(!0)})},[l]),{isCloseInterrupted:v,cancelClose:y,doClose:S}=(0,np.YK)(h);return er().createElement("div",{className:r?m.readOnlyMode:void 0},er().createElement(aZ,{ariaLabelledBy:u,ariaRequired:!0,bbml:t,editorId:n,isToolbarHidden:s,isDisabled:i,isReadOnly:r,onChange:b,onFocus:c,onBlur:a,placeholder:p("notes.note.body.placeholder"),size:d,showWordCount:!1,ref:f}),v?er().createElement(og,{showConfirmationModal:v,onCancel:()=>y(),onConfirmation:()=>S(),analyticsId:`${e}.unsaved-dialog`}):void 0)}),aJ=(0,eV.makeStyles)(e=>({form:{paddingBottom:"20px",borderBottom:`1px solid ${e.palette.border.main}`},editor:{flexGrow:1},editorLabel:{marginBottom:"4px"},buttonRow:{display:"flex",flexDirection:"row",justifyContent:"flex-end",margin:"14px 0"},btnCancel:{marginInlineEnd:"10px"}})),aY=e=>{let{analyticsId:t,courseId:n,userId:i,activeNoteEditor:r,onNoteEditorActive:s}=e,o=aJ(),a=(0,ed.q)(),[l,c]=(0,ei.useState)(!1),[d,u]=(0,ei.useState)(!1),[p,m]=(0,ei.useState)({rawText:"",asyncRawText:()=>Promise.resolve("")}),h=(0,ei.useCallback)(e=>m(e),[m]),g=(0,ei.useCallback)(e=>{e?(c(!0),s("add")):(m(null),c(!1),s(void 0),u(!1))},[s]),f=(0,ei.useCallback)(()=>g(!0),[g]),{onCreateNote:b}=aW(n,i),v=(0,ei.useCallback)(async e=>{if(e.preventDefault(),null!==p){u(!0);try{let e=await p.asyncRawText();await b(e),g(!1)}catch(e){u(!1)}}},[b,p,g]),y=null!==p&&""!==p.rawText&&!d;return er().createElement("div",{className:o.form},er().createElement("div",{className:o.editor},er().createElement(eb.AnalyticsFormLabel,{id:"studentNoteAddBodyLabel",analyticsId:`${t}.label`},a("notes.addANote")),er().createElement(aQ,{analyticsId:`${t}.editor`,ariaLabelledBy:"studentNoteAddBodyLabel",bbml:" ",editorId:"student-note-add-editor",isDisabled:void 0!==r&&"add"!==r,isReadOnly:!1,isToolbarHidden:!l,onChange:h,onFocus:f,size:l?"medium":"small"})),l?er().createElement("div",{className:o.buttonRow},er().createElement(eb.AnalyticsDefaultButton,{analyticsId:`${t}.cancel`,className:o.btnCancel,onClick:()=>g(!1)},a("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${t}.save`,disabled:!y,onClick:v,type:"submit"},a("global.save"))):void 0)},aX=(0,eV.makeStyles)(()=>({buttonRow:{display:"flex",flexDirection:"row",justifyContent:"flex-end",margin:"12px 0"},btnCancel:{marginInlineEnd:"10px"}})),a0=({analyticsId:e,edit:t,note:n,onCancel:i,onUpdateBody:r})=>{let s=(0,ed.q)(),o=aX(),[a,l]=(0,ei.useState)(null),c=(0,ei.useCallback)(e=>l(e),[l]),[d,u]=(0,ei.useState)(!1),p=er().createElement(aQ,{analyticsId:`${e}.editor`,ariaLabelledBy:"studentNoteEditBodyLabel",editorId:`student-note-${n.id}-editor`,isDisabled:!1,isReadOnly:!t,bbml:n.body.rawText,isToolbarHidden:!1,onChange:c,size:t?"medium":void 0,focusOnRender:!0});return t?er().createElement(er().Fragment,null,p,er().createElement(eV.HideOffScreen,{id:"studentNoteEditBodyLabel"},s("notes.note.body.editAriaLabel")),er().createElement("div",null,er().createElement("div",{className:o.buttonRow},er().createElement(eb.AnalyticsDefaultButton,{analyticsId:`${e}.cancel`,className:o.btnCancel,onClick:()=>{l(null),i()}},s("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${e}.save`,disabled:d||null===a||(null==a?void 0:a.rawText)===""||(null==a?void 0:a.rawText)===n.body.rawText,onClick:async()=>{u(!0);let e=await (null==a?void 0:a.asyncRawText());if(e)try{await r(e).catch(()=>({}))}finally{u(!1)}}},s("global.save"))))):p},a1=({exitCallback:e})=>{let t=(0,ed.q)(),n="student-note-delete-dialog",[i,r]=(0,ei.useState)(!1),[s,o]=(0,ei.useState)(!1),a=e=>{o(e),r(!0)};return er().createElement(eu._X,{isAlert:!0,analyticsId:`${n}.content`,open:!i,TransitionProps:{onExited:()=>{e(s),r(!1)}},maxWidth:"sm","aria-labelledby":`${n}-dialog-title`},er().createElement(eb.AnalyticsDialogTitle,{analyticsId:`${n}.title`,onClose:()=>a(!1),id:`${n}-dialog-title`},t("notes.note.dialog.deleteNote")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:`${n}.content`},er().createElement(eb.AnalyticsDialogContentText,{analyticsId:`${n}.content.text`,id:`${n}-dialog-description`},t("notes.note.dialog.doYouWantToDelete"))),er().createElement(eb.AnalyticsDialogActions,{analyticsId:`${n}.actions`},er().createElement(eb.AnalyticsDefaultButton,{analyticsId:`${n}.actions.cancel`,onClick:()=>a(!1)},t("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:`${n}.actions.delete`,onClick:()=>a(!0)},t("global.delete"))))},a2=({analyticsId:e,note:t,onDelete:n,onEdit:i})=>{let{formatUsername:r,translate:s}=(0,eQ.h)(),[o,a]=(0,ei.useState)(!1),[l,c]=er().useState(null),{displayModal:d,modal:u}=(0,ej.ddY)(a1),p=(0,ei.useMemo)(()=>{let r=[];return t.permissions.modify&&r.push({analyticsId:`${e}.menu.edit`,icon:er().createElement(eE.Edit,null),key:"edit",onClick:()=>{a(!1),c(null),i()},text:s("global.edit")}),t.permissions.delete&&r.push({analyticsId:`${e}.menu.delete`,icon:er().createElement(eE.Trash,null),key:"delete",onClick:async()=>{a(!1),c(null);let{confirmed:e}=await d();e&&n()},text:s("global.delete")}),r},[t.permissions.modify,t.permissions.delete,e,s,i,n,d]),m=`student-note-menu-${t.id}`;return p.length>0?er().createElement(er().Fragment,null,u,er().createElement(eb.AnalyticsIconButton,{"aria-controls":o?m:void 0,"aria-expanded":o,"aria-haspopup":"menu","aria-label":s("notes.note.contextMenu.open",{name:r(t.author,nk.ILocaleUsernameFormat.Short),datetime:t.createdDate}),onClick:e=>{c(e.currentTarget),a(e=>!e)},analyticsId:`${e}.showMenu`},er().createElement(eE.Menu,null)),er().createElement(ej.rMz,{id:m,analyticsId:`${e}.menu`,onClose:()=>a(!1),open:o,anchorEl:l,items:p})):null},a4=(0,eV.makeStyles)(e=>({note:{padding:"16px 12px",borderBottom:`1px solid ${e.palette.border.main}`},noteHeader:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",fontSize:"unset",fontWeight:"unset"},noteHeaderInfo:{display:"flex",flexDirection:"column",[e.breakpoints.up("sm")]:{flexDirection:"row"}},usernameStyles:{fontWeight:e.typography.fontWeightBold,marginInlineEnd:"5px"},noteDatetime:{color:e.palette.text.hint},lastEditedOn:{color:e.palette.text.hint}})),a6=e=>{let t=(0,eq.Lx)();return{onDeleteNote:(0,ei.useCallback)(()=>t(eO.Nwg.courseUserNotes.deleteNote(e.courseId,e.userId,e.id)),[t,e.courseId,e.userId,e.id])}},a5=e=>{let t=(0,eq.Lx)();return{onUpdateNote:(0,ei.useCallback)(n=>t(eO.Nwg.courseUserNotes.updateNote(e.courseId,e.userId,e.id,{body:{...e.body,rawText:n}})),[t,e.courseId,e.userId,e.id,e.body])}},a3=(0,ei.memo)(({analyticsId:e,note:t,activeNoteEditor:n,onNoteEditorActive:i})=>{let{formatDatetime:r,formatUsername:s,translate:o}=(0,eQ.h)(),[a,l]=(0,ei.useState)(!1),c=a4(),d=(0,ei.useCallback)(e=>{l(e),i(e?t.id:void 0)},[t.id,i]),{onDeleteNote:u}=a6(t),{onUpdateNote:p}=a5(t),m=(0,ei.useCallback)(e=>p(e).then(()=>d(!1)),[p,d]);return er().createElement("div",{className:(0,eX.Z)(c.note,"js-course-user-note")},er().createElement(eb.AnalyticsTypography,{variant:"h3",className:c.noteHeader},er().createElement("div",{className:c.noteHeaderInfo},er().createElement("span",{className:c.usernameStyles},s(t.author,nk.ILocaleUsernameFormat.Short)),er().createElement("span",{className:c.noteDatetime},r(t.createdDate,nk.ILocaleDatetimeFormat.Short))),void 0===n?er().createElement(a2,{analyticsId:`${e}.context`,note:t,onEdit:()=>d(!0),onDelete:u}):null),er().createElement(a0,{note:t,edit:a,onCancel:()=>d(!1),onUpdateBody:m,analyticsId:`${e}.body`}),t.lastModifiedDate&&er().createElement("span",{className:c.lastEditedOn},o("notes.note.lastEditedOn",{datetime:t.lastModifiedDate})))}),a8=(e,t,n,i)=>{let r=(0,eq.Lx)(),s=(0,eq.pJ)(n=>eO.Ys.courseUserNotes.getNotes(n,e,t)),o=(0,ei.useCallback)(async()=>{null==n||n(),await r(eO.Nwg.courseUserNotes.fetchNotes({courseId:e,userId:t,limit:20})),null==i||i()},[r,e,t,n,i]);(0,ei.useEffect)(()=>{(null==s?void 0:s.totalNotes)!==void 0||(null==s?void 0:s.isLoading)||(null==s?void 0:s.hasError)||o()},[null==s?void 0:s.totalNotes,null==s?void 0:s.isLoading,null==s?void 0:s.hasError,o]);let a=(null==s?void 0:s.totalNotes)===void 0||s.totalNotes>s.notes.length,l=(0,ei.useMemo)(()=>[...s.notes].sort((e,t)=>t.createdDate.getTime()-e.createdDate.getTime()),[s.notes]);return{...s,notes:l,hasMore:a,limit:20,loadMore:o}},a9=(0,eV.makeStyles)(()=>({progressLoader:{display:"flex",justifyContent:"center",margin:"20px"},notesList:{listStyle:"none",margin:0}})),a7=e=>{let{analyticsId:t,courseId:n,userId:i,activeNoteEditor:r,onNoteEditorActive:s}=e,o=a9(),a=(0,ed.q)(),[l,c]=(0,ei.useState)(void 0),d=(0,ei.useCallback)(()=>{c(a("notes.loader.done"))},[a]),{hasMore:u,isLoading:p,limit:m,loadMore:h,notes:g}=a8(n,i,(0,ei.useCallback)(()=>{c(a("notes.loader.loading"))},[a]),d);return er().createElement(er().Fragment,null,er().createElement("ul",{className:o.notesList},g.map(e=>er().createElement("li",{key:`note-${e.id}`},er().createElement(a3,{analyticsId:`${t}.note`,note:e,activeNoteEditor:r,onNoteEditorActive:s})))),er().createElement(ej.oxm,{loader:h,incomingLoadCount:u?m:0,axLoadMoreButtonLabelKey:"notes.loader.loadMore",showLoadButtonOnFocus:!0}),p&&er().createElement("div",{className:o.progressLoader,"aria-hidden":!0},er().createElement(eb.AnalyticsCircularProgress,{ariaLabel:a("notes.loader.loading"),size:"medium"})),er().createElement(eb.AnalyticsOffScreenAnnouncement,{analyticsId:`${t}.liveMessage`,type:"polite",message:l}))},le=(0,eV.makeStyles)(e=>({container:{margin:"0 auto",maxWidth:"800px"},heading:{padding:"12px 0",marginBottom:"33px",borderBottom:`1px solid ${e.palette.border.main}`}})),lt=e=>{let{analyticsId:t,courseId:n,studentUserId:i}=e,r=(0,ed.q)(),s=le(),{permissions:o,totalNotes:a}=a8(n,i),[l,c]=(0,ei.useState)();return er().createElement("div",{className:s.container},er().createElement(eb.AnalyticsTypography,{className:s.heading,variant:"h2"},"number"==typeof a?r("notes.internalNotesWithTotal",{total:a}):r("notes.internalNotes")),(null==o?void 0:o.create)&&er().createElement(aY,{analyticsId:`${t}.add`,courseId:n,userId:i,activeNoteEditor:l,onNoteEditorActive:c}),er().createElement(a7,{analyticsId:`${t}.list`,courseId:n,userId:i,activeNoteEditor:l,onNoteEditorActive:c}))};(A=Y||(Y={})).ViewNotes="course.user.notes.VIEW",A.ModifyNotes="course.user.notes.MODIFY",A.AdminDeleteNotes="course.user.notes.admin.DELETE";let ln=e=>{let{analyticsId:t,onClick:n,indeterminate:i,isDisabled:r,checked:s}=e,o=(0,ed.q)(),a=o("global.selectAll"),l=o("global.deselectAll");return er().createElement(eb.AnalyticsTooltip,{analyticsId:`${t}.tooltip`,title:s?l:a},er().createElement(eb.AnalyticsCheckbox,{analyticsId:t,onClick:n,indeterminate:i,disabled:r,checked:s,inputProps:{"aria-label":s?l:a}}))},li=(0,eV.makeStyles)(e=>(0,eV.createStyles)({sendMessageButton:{width:"100%",[e.breakpoints.up("md")]:{width:"unset"}}})),lr=(e,t)=>{let n=Array.from(t).join(",");np.Nd.goPeekState((0,np.k9)({courseId:e,recipientIds:n,conversationPerRecipient:!0}))},ls=e=>{let{courseId:t,recipientUserIds:n,analyticsId:i}=e,r=li(),s=(0,ed.q)();return ei.createElement(eb.AnalyticsOutlineButton,{startIcon:ei.createElement(eE.Messages,null),analyticsId:i,onClick:()=>lr(t,n),className:r.sendMessageButton},s("global.sendMessage"))},lo=e=>{let{columnId:t,columnName:n,courseId:i,isGroupContent:r,isExceptionApplicable:s,isExemptApplicable:o,attemptCount:a,contentId:l,groupId:c,gradeId:d,scoreProviderHandle:u,isExternalSubmission:p,isAnonymousGrading:m}=e,h=(0,ed.q)(),[g,f]=ei.useState(void 0),b=(0,eq.pJ)(e=>eO.Ys.app.getLocation(e).queryParams),v=null==b?void 0:b.userId,y=()=>{f(void 0)},S=ei.useCallback(()=>{f(void 0),np.Nd.goPeekState((0,np.Rj)({courseId:i,columnId:t,userId:v}))},[v,i,t]),C=ei.useCallback(()=>{void 0!==d&&void 0!==l&&(f(void 0),np.Nd.goPeekState((0,np.h4)({courseId:i,columnId:t,gradeId:d,contentId:l})))},[d,i,t,l]),E=ei.useCallback(()=>{f(void 0),np.Nd.goPeekState((0,np.Vp)({courseId:i,columnId:t,userId:v,contentId:l}))},[v,i,t,l]),I=ei.useCallback(()=>{f(void 0),np.Nd.goPeekState((0,np.jZ)({courseId:i,columnId:t,userId:v,contentId:l,groupId:c}))},[v,i,t,l,c]),w=[],A=(0,eq.vD)(i,[_.ModifyGradebook]),k=(0,eq.ye)(eO.x40.AssessmentAttemptLog);return(eO.u$1.Test.isEqualTo(u)||eO.u$1.PeerSubmissionsTest.isEqualTo(u))&&a>=0&&!m&&!p&&A&&k&&w.push({key:`AttemptLog_${t}`,analyticsId:"gradebook.components.grade-item-action-menu.attemptLog",icon:ei.createElement(eE.TrueFalse,null),text:h("gradebook.individualStudentGradeList.actionMenu.attemptLog"),disabled:0===a,onClick:C}),s&&w.push({key:`exceptionGradableItem_${t}`,analyticsId:"gradebook.components.grade-item-action-menu.exception-gradable-item",icon:ei.createElement(eE.TimeExtra,null),text:h("components.directives.grade.submission-list-row.per-assessment.exceptions"),onClick:r?I:E}),o&&w.push({key:`exemptGradableItem_${t}`,analyticsId:"gradebook.components.grade-item-action-menu.exempt-gradable-item",icon:ei.createElement(eE.Exempt,null),text:h("gradebook.individualStudentGradeList.actionMenu.exemptGradableItem"),onClick:S}),ei.createElement(ei.Fragment,null,ei.createElement(eb.AnalyticsIconButton,{analyticsId:"gradebook.components.common.grade-item-action-menu.moreOptions",id:`grade-item-action-menu-button-${t}`,"aria-controls":g?"grade-item-action-menu":void 0,"aria-haspopup":"menu","aria-label":h("gradebook.individualStudentGradeList.actionMenu.moreOptions",{gradeItemName:n}),"aria-expanded":!!g,onClick:e=>{f(e.currentTarget)}},ei.createElement(eE.Menu,null)),ei.createElement(ej.rMz,{id:`grade-item-action-menu-${t}`,analyticsId:"gradebook.components.grade-item-action-menu.menu",anchorEl:g,open:!!g,onClick:y,onClose:y,items:w}))},la=({numStudentsNotSubmitted:e,isGroup:t,exitCallback:n})=>{let i=e>0,[r,s]=(0,ei.useState)(!1),[o,a]=(0,ei.useState)(!1),l=(0,ed.q)(),c=(0,eq.tx)(iW.r9.Outdated_PrependSection,{courseKeySection:"course",orgKeySection:"organization"}),d=i?c(`grades.gradebook-item.anonymousGrading.sendReminder.${t?"group":"notGroup"}.confirmationMessage`,{count:e}):c("grades.gradebook-item.anonymousGrading.sendReminder.noReminderMessage"),u=(e=!1)=>{a(e),s(!0)};return er().createElement(eu._X,{analyticsId:"anonymous.sendReminders","aria-labelledby":"anonymous-send-reminder-dialog-heading-id",open:!r,className:"ms-modal",TransitionProps:{onExited:()=>{n(o),s(!1)}},onClose:()=>u()},er().createElement(eb.AnalyticsDialogTitle,{analyticsId:"anonymous.sendReminders.title",onClose:()=>u(),id:"anonymous-send-reminder-dialog-heading-id","aria-describedby":"anonymous-send-reminder-dialog-message-id"},l("course.grades.gradebook-item.anonymousGrading.sendReminder.buttonLabel")),er().createElement(eb.AnalyticsDialogContent,{analyticsId:"anonymous.sendReminders.content"},er().createElement(eb.AnalyticsDialogContentText,{analyticsId:"anonymous.sendReminders.text",id:"anonymous-send-reminder-dialog-message-id"},d)),er().createElement(eb.AnalyticsDialogActions,{analyticsId:"anonymous.sendReminders.actions"},i?er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsDefaultButton,{analyticsId:"anonymous.sendReminders.cancel.button",onClick:()=>u()},l("global.cancel")),er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:"anonymous.sendReminders.send.button",onClick:()=>u(!0),className:"js-ok-button"},l("global.send"))):er().createElement(eb.AnalyticsPrimaryButton,{analyticsId:"anonymous.sendReminders.ok.button",onClick:()=>u()},l("global.ok"))))},ll=({courseId:e,columnId:t,numStudentsNotSubmitted:n,isGroup:i,showErrorMessage:r,dismissErrorBanner:s})=>{let[o,a]=(0,ei.useState)(!1),{displayModal:l,modal:c}=(0,ej.ddY)(la,{numStudentsNotSubmitted:n,isGroup:i}),{enqueueSnackbar:d,dequeueSnackbar:u}=(0,ej.Ds_)(ej.VWo.AnonymousSendReminders,!0),p=(0,ed.q)()("global.close"),m=(0,eq.tx)(iW.r9.Outdated_PrependSection,{courseKeySection:"course",orgKeySection:"organization"}),h=i?"group":"notGroup",g=m("grades.gradebook-item.anonymousGrading.sendReminder.errorMessage"),f=(0,ei.useCallback)(e=>{if(r)return r(e);d({icon:er().createElement(eE.Attention,null),snackbarMessage:e},{closeButtonAriaLabel:p})},[p,d,r]),b=(0,ei.useCallback)(e=>{let t=(0,eO.Gtp)(e);(0,eO.$ME)(t)&&"bb-send-reminder-user-not-enrolled"===t.code?f(m("grades.gradebook-item.anonymousGrading.sendReminder.userNotEnrolled")):(0,eO.$ME)(t)&&"bb-send-reminder-columns-with-release-conditions-not-supported"===t.code?f(m("grades.gradebook-item.anonymousGrading.sendReminder.releaseConditionsNotSupported")):f(g)},[f,g,m]),v=(0,ei.useCallback)(e=>{d({icon:er().createElement(eE.Check,null),snackbarMessage:m(`grades.gradebook-item.anonymousGrading.sendReminder.${h}.successMessage`,{count:e})},{closeButtonAriaLabel:p})},[p,d,h,m]),y=(0,ei.useCallback)(e=>{e.successCount===e.count?v(e.successCount):e.failureCount===e.count?f(m("grades.gradebook-item.anonymousGrading.sendReminder.noValidMail")):e.failureCount>0&&e.successCount>0?f(m("grades.gradebook-item.anonymousGrading.sendReminder.messageNotToAll",{successCount:e.successCount,errorCount:e.failureCount})):f(g)},[f,v,g,m]);return{disabled:o,modal:c,onClickSendReminderButton:(0,ei.useCallback)(async()=>{a(!0);let{confirmed:n}=await l();if(!n){a(!1);return}s&&s(),u();try{let n=await (0,eO.$_n)(e,t);y(n)}catch(e){b(e)}finally{a(!1)}},[t,e,u,s,l,y,b])}},lc=e=>{let{analyticsId:t}=e,{disabled:n,modal:i,onClickSendReminderButton:r}=ll(e),s=(0,ed.q)();return er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsOutlineButton,{analyticsId:t,startIcon:er().createElement(eE.Messages,null),disabled:n,onClick:r},s("course.grades.gradebook-item.anonymousGrading.sendReminder.buttonLabel")),i)},ld=(0,eV.makeStyles)(e=>(0,eV.createStyles)({menuItem:{textDecoration:"underline"}})),lu=(e,t)=>`${e}${t}`.replace(/_/g,".");(k=X||(X={})).SubmissionDateNewestToOldest="submissionDateNewestToOldest",k.SubmissionDateOldestToNewest="submissionDateOldestToNewest",k.LastNameAscending="lastNameAscending",k.LastNameDescending="lastNameDescending",k.FirstNameAscending="firstNameAscending",k.FirstNameDescending="firstNameDescending",k.StudentIdAscending="studentIdAscending",k.StudentIdDescending="studentIdDescending",(T=ee||(ee={})).SubmissionDateOldestToNewest="submissionDateOldestToNewest",T.SubmissionDateNewestToOldest="submissionDateNewestToOldest";let lp={[X.StudentIdAscending]:[[e$.PJt.StudentId,e$.SrV.Ascending],[e$.PJt.Id,e$.SrV.Ascending]],[X.StudentIdDescending]:[[e$.PJt.StudentId,e$.SrV.Descending],[e$.PJt.Id,e$.SrV.Descending]],[X.FirstNameAscending]:[[e$.PJt.GivenName,e$.SrV.Ascending],[e$.PJt.FamilyName,e$.SrV.Ascending],[e$.PJt.StudentId,e$.SrV.Ascending]],[X.FirstNameDescending]:[[e$.PJt.GivenName,e$.SrV.Descending],[e$.PJt.FamilyName,e$.SrV.Descending],[e$.PJt.StudentId,e$.SrV.Descending]],[X.LastNameAscending]:[[e$.PJt.FamilyName,e$.SrV.Ascending],[e$.PJt.GivenName,e$.SrV.Ascending],[e$.PJt.StudentId,e$.SrV.Ascending]],[X.LastNameDescending]:[[e$.PJt.FamilyName,e$.SrV.Descending],[e$.PJt.GivenName,e$.SrV.Descending],[e$.PJt.StudentId,e$.SrV.Descending]],[X.SubmissionDateOldestToNewest]:[[e$.PJt.LastAttemptDate,e$.SrV.Ascending],[e$.PJt.Id,e$.SrV.Ascending]],[X.SubmissionDateNewestToOldest]:[[e$.PJt.LastAttemptDate,e$.SrV.Descending],[e$.PJt.Id,e$.SrV.Descending]]},lm={[ee.SubmissionDateOldestToNewest]:[[e$.QDg.LastAttemptDate,e$.SrV.Ascending],[e$.QDg.GradeId,e$.SrV.Ascending]],[ee.SubmissionDateNewestToOldest]:[[e$.QDg.LastAttemptDate,e$.SrV.Descending],[e$.QDg.GradeId,e$.SrV.Descending]]},lh=e=>(lp[e]||[[e$.PJt.IsPreviewStudent,e$.SrV.Ascending],[e$.PJt.FamilyName,e$.SrV.Ascending],[e$.PJt.GivenName,e$.SrV.Ascending]]).map(([e,t])=>({field:e,direction:t})),lg=e=>(lm[e]||[[e$.QDg.GradeId,e$.SrV.Ascending]]).map(([e,t])=>({field:e,direction:t})),lf="flex.student.sorting.menu",lb=({analyticsId:e,contentId:t,menuId:n,courseId:i,isAnonymousGrading:r,AnalyticsIconButtonProps:s})=>{let o=lu(lf,t),a=(0,eq.Iw)(o),l=(0,eq.SS)(),c=(0,ed.q)(),d=(0,eq.bW)(i,_.UserPropertiesModify),[u,p]=(0,ei.useState)(null),m=ld(),h=(0,ei.useCallback)(e=>{p(null),l({key:o,value:e})},[o,l]),g=(0,ei.useMemo)(()=>(r?Object.values(ee):Object.values(X)).filter(e=>d||e!==X.StudentIdAscending&&e!==X.StudentIdDescending).map(e=>({key:e,isSelected:a&&e===a.value})),[d,r,a]);return er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsIconButton,{"aria-controls":u?n:void 0,"aria-expanded":null!==u,"aria-haspopup":"menu",onClick:e=>{p(e.currentTarget)},analyticsId:`${e}.icon.button`,"aria-label":c("course.grades.gradebook-item.filters.studentsSortingFilter.button.title"),...s},(null==a?void 0:a.value)?er().createElement(eb.AnalyticsBadge,{size:"small",position:"corner-top-right"},er().createElement(aU.SortDescending,null)):er().createElement(aU.SortDescending,null)),er().createElement(eb.AnalyticsMenu,{anchorEl:u,open:null!==u,onClose:()=>{p(null)},MenuListProps:{"aria-label":c("course.grades.gradebook-item.filters.studentsSortingFilter.button.title"),id:n},analyticsId:`${e}.menu`,className:"react-container"},g.map(({key:t,isSelected:n})=>er().createElement(eb.AnalyticsMenuItem,{key:t,analyticsId:`${e}.${t}.list-item`,button:!0,onClick:()=>h(t),selected:n,"aria-current":n,className:(0,eX.Z)({[m.menuItem]:n}),tabIndex:-1,"aria-label":c(`course.grades.gradebook-item.filters.studentsSortingFilter.aria.${t}`)},c(`course.grades.gradebook-item.filters.studentsSortingFilter.${t}`)))))},lv=e=>{let{showDialog:t,dialogCallback:n}=e,{modal:i,onClickSendReminderButton:r}=ll(e);return(0,ei.useEffect)(()=>{t&&r().then(()=>n())},[t,n,r]),er().createElement(er().Fragment,null,i)},ly=(0,eV.makeStyles)(()=>(0,eV.createStyles)({sendReminderMenuItem:{paddingLeft:"16px"},sendReminderMenuItemSpan:{paddingLeft:"9px"}})),lS=e=>{let{analyticsId:t}=e,{disabled:n,modal:i,onClickSendReminderButton:r}=ll(e),s=(0,ed.q)(),o=ly();return er().createElement(er().Fragment,null,er().createElement(eb.AnalyticsMenuItem,{button:!0,analyticsId:t,disabled:n,onClick:r,className:o.sendReminderMenuItem,tabIndex:0},er().createElement(nG.V,null),er().createElement("span",{className:o.sendReminderMenuItemSpan},s("course.grades.gradebook-item.anonymousGrading.sendReminder.buttonLabel"))),i)},lC=(0,eV.makeStyles)(e=>({body:{flex:"1 1 auto",overflowY:"scroll",padding:"10px 16px",[e.breakpoints.up("sm")]:{padding:"10px 24px"},[e.breakpoints.up("md")]:{padding:"10px 30px"}}}));var lE=n(410160),lI=n.n(lE),lw=n(706637);let lA=(0,ei.createContext)({distributedGraders:null,addGraderToGroup:()=>{},removeGraderFromGroup:()=>{},onGroupSetsRendered:()=>{},onGroupsRendered:()=>{}}),lk=(0,eV.makeStyles)(e=>(0,eV.createStyles)({grader:{display:"flex",alignItems:"center",gap:"8px",padding:"2px 8px",backgroundColor:e.palette.background.b3,height:"min-content",borderRadius:"2px"},removeGrader:{marginLeft:"auto"},usercard:{width:"auto"},username:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}})),lT=e=>{var t;let{userId:n,group:i}=e,r=(0,eq.sY)(n),s=null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"",o=lk(),a=(0,ed.q)(),{removeGraderFromGroup:l}=(0,ei.useContext)(lA),c=(0,eX.Z)(o.grader,"js-grader-option"),d=a("components.distributedGradingGroup.removeGrader",{user:(null==r?void 0:r.userName)||n,group:null==i?void 0:i.title});return er().createElement("div",{className:c},r?er().createElement(aA,{className:o.usercard,avatarSize:"small",user:r,showAccommodation:!1,showUsername:!0}):er().createElement(eb.AnalyticsTypography,null,n),er().createElement(eb.AnalyticsIconButton,{analyticsId:"course.grades.distributedGradingGroup.grader.removeGrader",className:o.removeGrader,"aria-label":d,onClick:()=>l(n,s)},er().createElement(nm.Close,null)))},lP=(0,eV.makeStyles)(e=>(0,eV.createStyles)({addGrader:{height:"40px",alignSelf:"flex-end"},grader:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:e.palette.background.b3,"& p":{width:"100%",marginLeft:"12px"}},graderOption:{display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},gradersList:{display:"flex",flexDirection:"column",gap:"8px"},group:{border:`1px solid ${e.palette.border.main}`},groupGraders:{display:"flex",flexDirection:"column",gap:"8px",padding:"16px 8px 8px"},groupHeader:{display:"flex",alignItems:"center",padding:"8px",gap:"8px",borderBottom:`1px solid ${e.palette.border.main}`,boxShadow:`0px 0px 8px ${e.palette.border.main}`,clipPath:"inset(0px 0px -8px 0px)"},groupTitle:{"&&":{marginBottom:"0",fontSize:e.typography.fontSizeDefault}}})),lD=e=>{var t;let{courseId:n,group:i}=e,r=null!==(t=null==i?void 0:i.id)&&void 0!==t?t:"",s=lP(),o=(0,ed.q)(),[a,l]=(0,ei.useState)(""),{addGraderToGroup:c,distributedGraders:d}=(0,ei.useContext)(lA),{users:u}=(0,eq.d$)({courseId:n,filter:{searchString:a,roleBucket:[e$.O8v.Grading]}}),p=(0,ei.useMemo)(()=>{var e;return null!==(e=null==d?void 0:d[r])&&void 0!==e?e:[]},[d,r]),m=(0,ei.useMemo)(()=>{var e;let t=new Set(p);return null!==(e=Object.values(u).filter(({id:e})=>e&&!t.has(e)))&&void 0!==e?e:[]},[p,u]),h=(0,eX.Z)(s.group,"js-group-container");return er().createElement("section",{"aria-labelledby":"groupTitle",className:h},er().createElement("div",{className:s.groupHeader},er().createElement(lw.F,null),er().createElement("div",null,er().createElement(eb.AnalyticsTypography,{variant:"h2",id:"groupTitle",className:s.groupTitle},i.title),er().createElement(eb.AnalyticsTypography,{className:"js-student-count"},o("components.distributedGradingGroup.studentCount",{studentCount:i.studentCount})))),er().createElement("div",{className:s.groupGraders},er().createElement(ej.Rj2,{analyticsId:"course.grades.distributedGradingGroup.newGraderSearchbox",className:"js-group-search-box",inputId:"grader-search-box",label:o("components.distributedGradingGroup.graders"),placeholder:o("components.distributedGradingGroup.searchByGraderName"),options:m,onChange:l,onOptionSelected:e=>{let{id:t}=e;t&&c(t,r),l("")},renderOption:e=>er().createElement("div",{className:s.graderOption},er().createElement(aA,{avatarSize:"small",user:e,showAccommodation:!1,showUsername:!0})),value:a,InputProps:{inputProps:{"aria-label":o("components.distributedGradingGroup.gradersLabel",{group:i.title})}}}),(null==p?void 0:p.length)>0&&er().createElement("div",{className:s.gradersList},p.map(e=>er().createElement(lT,{key:e,userId:e,group:i})))))},lx=(0,eV.makeStyles)(()=>({loading:{textAlign:"center"},groups:{display:"flex",flexDirection:"column",gap:"20px",maxWidth:"930px",marginLeft:"auto",marginRight:"auto"},contents:{},emptyContainer:{paddingTop:"20px",display:"flex",flexDirection:"column",alignItems:"center"},emptyImage:{width:"250px",height:"250px"}})),lR=e=>{let{courseId:t,selectedGroupSetId:n}=e,i=lx(),r=(0,ed.q)(),{onGroupsRendered:s}=(0,ei.useContext)(lA),{groups:o,view:a}=(0,eq.d_)({courseId:t,groupSetId:null!=n?n:"",expand:["studentCount"],sort:[{field:"title",direction:e$.SrV.Ascending}]}),l={illustration:lI(),prominentText:r("components.distributedGradingContents.noGroupsStateHeader"),subText:r("components.distributedGradingContents.noGroupsStateText")};return(s(o),!a||a.isLoading)?er().createElement("div",{className:i.loading},er().createElement(eb.AnalyticsCircularProgress,{size:"large",ariaLabel:r("components.distributedGradingGroups.loadingGroups")})):0===o.length&&null!==n?er().createElement(ej.R22,{...l}):er().createElement("div",{className:i.groups},o.map(e=>er().createElement(lD,{key:e.id,courseId:t,group:e})))},lL=e=>{let t=(0,ed.q)(),{courseId:n,noGroupSets:i,selectedGroupSetId:r}=e;return i?er().createElement(ej.R22,{illustration:lI(),prominentText:t("components.distributedGradingContents.noGroupSetsStateHeader"),subText:t("components.distributedGradingContents.noGroupSetsStateText")}):i||null!==r?er().createElement(lR,{courseId:n,selectedGroupSetId:r}):er().createElement(ej.R22,{illustration:aa(),prominentText:t("components.distributedGradingContents.emptyStateHeader"),subText:t("components.distributedGradingContents.emptyStateText")})},lN=(0,eV.makeStyles)(e=>({contents:{paddingBottom:"16px",borderBottom:`1px solid ${e.palette.border.main}`,marginBottom:"10px"},dropdown:{paddingTop:"16px"}})),l$="course.grades.distributedGradingHeader",lO=e=>{let{courseId:t,onGroupSetChange:n,selectedGroupSetId:i}=e,{distributedGraders:r,onGroupSetsRendered:s}=(0,ei.useContext)(lA),o=(0,ed.q)(),a=lN(),l=(0,ej.rvo)(),c=(0,ej.Jvq)(),{groupSets:d,view:u}=(0,eq.Mq)({courseId:t}),p=(null==u?void 0:u.isValid)&&!u.isLoading;p&&s(d);let m=(0,ei.useMemo)(()=>d.map(e=>{var t;return{label:o("components.distributedGradingPage.groupSetOptionLabel",{title:e.title,groupCount:e.groupCount}),value:null!==(t=e.id)&&void 0!==t?t:""}}),[d,o]),h=(0,ei.useMemo)(()=>{if(i)return m.find(e=>e.value===i)},[m,i]);if(null==r||!p)return null;let g={id:`${l$}.groupSetCombobox`,analyticsId:`${l$}.groupSetPicker`,classes:{root:(0,eX.Z)(l.comboboxReset,l.comboboxWidth,"js-groups-combobox")},isSearchable:!1,label:o("components.distributedGradingPage.chooseAGroupSet"),onChange:e=>{var t;n(null!==(t=null==e?void 0:e.value)&&void 0!==t?t:null)},defaultValue:h};return er().createElement("div",{className:a.contents},er().createElement("div",null,o("components.distributedGradingPage.selectGroupSet")),er().createElement("div",{className:a.dropdown},er().createElement(eb.AnalyticsCombobox,{floatingLabel:!0,strings:c,options:m,disabled:0===d.length,...g})))},lG=e=>{let{analyticsIdPrefix:t,exitCallback:n}=e,i=(0,ed.q)(),r=`${t}.cancel.confirmation`;return er().createElement(ej.U6L,{analyticsId:r,rootId:"distributed-grading-cancel-confirmation-dialog",titleText:i("components.distributedGradingCancelDialog.title"),contentText:i("components.distributedGradingCancelDialog.body1"),subheaderText:i("components.distributedGradingCancelDialog.body2"),confirmationButtonText:i("global.yes"),cancelButtonText:i("global.no"),exitCallback:n})},l_="course.grades.distributedGradingFooter",lM=e=>{let{disableSave:t,saveCallback:n,showCloseButton:i,showConfirmOnCancel:r}=e,s=(0,ed.q)(),{displayModal:o,modal:a}=(0,ej.ddY)(lG,{analyticsIdPrefix:l_}),l=()=>{n(),np.Nd.leavePeekState()},c=async()=>{if(r){(await o()).confirmed&&np.Nd.leavePeekState();return}np.Nd.leavePeekState()};return er().createElement(er().Fragment,null,i?er().createElement(em.BbPanelFooter,{analyticsId:`${l_}.footer`,primaryButtonProps:{className:"js-primary-button",onClick:()=>{np.Nd.leavePeekState()},text:s("global.close")}}):er().createElement(em.BbPanelFooter,{analyticsId:`${l_}.footer`,primaryButtonProps:{onClick:()=>l(),text:s("global.save"),disabled:t},secondaryButtonProps:{onClick:()=>c(),text:s("global.cancel")}}),a)},lB=e=>{let{courseName:t,courseId:n,distributedGraders:i,onSaveDistributedGraders:r}=e,{distributedGraders:s,initialGroupSetId:o,addGraderToGroup:a,removeGraderFromGroup:l,clearAllGraders:c,getAsDistributedGradersArray:d}=function(e){var t,n;let i=(0,ei.useMemo)(()=>e?e.filter(e=>{var t;return null===(t=e.groups)||void 0===t?void 0:t.filter(e=>e.groupSetId)}):[],[e]),r=(0,ei.useMemo)(()=>{let t={};if(null==e)return{};for(let n of e)if(n.groups)for(let e of n.groups)t[e.groupId]||(t[e.groupId]=[]),t[e.groupId].push(n.userId);return t},[e]),[s,o]=(0,ei.useState)(r),a=i.length>0&&null!==(n=null===(t=null==i?void 0:i[0].groups)||void 0===t?void 0:t[0].groupSetId)&&void 0!==n?n:null,l=(0,ei.useCallback)((e,t)=>{var n;(null!==(n=s[t])&&void 0!==n?n:[]).some(t=>t===e)||(s?s[t]?o({...s,[t]:[...s[t],e]}):o({...s,[t]:[e]}):o({[t]:[e]}))},[s,o]),c=(0,ei.useCallback)((e,t)=>{var n;if((null!==(n=s[t])&&void 0!==n?n:[]).some(t=>t===e)){if(1===s[t].length){let{[t]:e,...n}=s;o({...n})}else o({...s,[t]:s[t].filter(t=>t!==e)})}},[s,o]),d=(0,ei.useCallback)(()=>{o({})},[]),u=(0,ei.useCallback)(e=>{let t={};return Object.keys(s).reduce((e,t)=>(s[t].forEach(n=>{e[n]||(e[n]=[]),e[n].push(t)}),e),t),Object.keys(t).map(n=>({userId:n,graderType:e$.xI1.Groups,groups:t[n].map(t=>({groupId:t,groupSetId:e})),canReconcile:!1}))},[s]);return{distributedGraders:s,initialGroupSetId:a,addGraderToGroup:l,removeGraderFromGroup:c,clearAllGraders:d,getAsDistributedGradersArray:u}}(i),u=lC(),p=(0,ed.q)(),[m,h]=(0,ei.useState)(o),[g,f]=(0,ei.useState)(!1),[b,v]=(0,ei.useState)(!1),[y,S]=(0,ei.useState)(!1),C=(0,ei.useRef)([]),E=(0,ei.useCallback)(()=>{if(null==m||0===C.current.length||!b){f(!1);return}let e=C.current.map(e=>{var t;return null!==(t=e.id)&&void 0!==t?t:""}),t=Object.keys(s);if(e.some(e=>!t.includes(e))){f(!1);return}f(!0)},[s,b,m]),I=er().useCallback(()=>{r(d(null!=m?m:""))},[d,r,m]),w=(0,ei.useMemo)(()=>({distributedGraders:s,addGraderToGroup:(e,t)=>{a(e,t),v(!0),E()},removeGraderFromGroup:(e,t)=>{l(e,t),v(!0),E()},onGroupSetsRendered:e=>{0===e.length&&S(!0)},onGroupsRendered:e=>{C.current=e,E()}}),[s,a,E,l]);return er().createElement(ej.huC,{header:er().createElement(ej.YIP,{analyticsIdPrefix:"course.grades.distributedGradingPage",headerText:p("components.distributedGradingPage.delegatedGrading"),readyToFocus:!0,showMenuToggleButton:!0,subHeaderText:t}),footer:er().createElement(lM,{showConfirmOnCancel:b,disableSave:!g,saveCallback:I,showCloseButton:!i})},er().createElement(lA.Provider,{value:w},er().createElement("div",{className:u.body},null==i?er().createElement(eb.AnalyticsTypography,{component:"span"},p("components.distributedGradingPage.distributedGradersNotProvided")):er().createElement(er().Fragment,null,er().createElement(lO,{courseId:n,selectedGroupSetId:m,onGroupSetChange:e=>{h(e),e!==m&&(v(!0),c())}}),er().createElement(lL,{courseId:n,noGroupSets:y,selectedGroupSetId:m})))))},lF=(0,eV.makeStyles)(e=>(0,eV.createStyles)({accommodationIcon:{display:"flex",marginRight:"3px",alignItems:"center",color:e.palette.brand.main},container:{display:"flex"}})),lU=e=>{let{fullName:t,membershipId:n,userId:i}=e,r=lF(),s=(0,ed.q)(),o=nx((0,eq.pJ)(e=>eO.Ys.courseMembership.getCourseMembershipByMembershipId(e,n)));return er().createElement("div",{className:r.container},o&&er().createElement("span",{className:r.accommodationIcon},er().createElement(eE.Accommodations,{titleAccess:s("gradebook.studentList.fullNameComponent.aria.accommodations")})),er().createElement(eb.AnalyticsOverflowTooltip,{title:t,analyticsId:"course.grade.grid.student-name.tooltip",className:`js-student-name-${i}`},er().createElement("span",null,t)))};(P=et||(et={})).Assignment="assignment",P.Attendance="attendance",P.OverallGrade="overall-grade",P.Calculation="calculation",P.Discussion="discussion",P.Homework="homework",P.Journal="journal",P.Lti="lti",P.Presentation="presentation",P.Scormengine="scormengine",P.Test="test",P.Survey="survey",P.Quiz="quiz",P.Exam="exam",P.DocumentBlank="document_blank";let lV=e=>{let{icon:t,color:n}=e;switch(t){case et.Assignment:return er().createElement(aU.Assignments,{color:n});case et.Attendance:return er().createElement(aU.Attendance,{color:n});case et.OverallGrade:return er().createElement(aU.OverallGrade,{color:n});case et.Calculation:return er().createElement(aU.Calculation,{color:n});case et.Discussion:return er().createElement(aU.Discussion,{color:n});case et.Homework:return er().createElement(aU.Homework,{color:n});case et.Journal:return er().createElement(aU.Journal,{color:n});case et.Lti:return er().createElement(aU.Lti,{color:n});case et.Presentation:return er().createElement(aU.Presentation,{color:n});case et.Scormengine:return er().createElement(aU.Scormengine,{color:n});case et.Test:case et.Quiz:return er().createElement(aU.Test,{color:n});case et.Exam:return er().createElement(aU.Exam,{color:n});case et.Survey:return er().createElement(aU.Survey,{color:n});default:return er().createElement(aU.DocumentBlank,{color:n})}},lH=(0,eV.makeStyles)(e=>(0,eV.createStyles)({studentGradeAndFeedbackContainer:{padding:"24px 30px"},gradeAndFeedbackLabel:{marginBottom:"14px"},overallGradeContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",border:`1px solid ${e.palette.secondary.main}`,backgroundColor:e.palette.background.b2,padding:"11px 9px","&:hover":{backgroundColor:e.palette.background.b3}}})),lq=(0,eV.makeStyles)(e=>(0,eV.createStyles)({attemptContainer:{border:`1px solid ${e.palette.border.main}`,marginTop:"14px",padding:"10px"},feedbackIconDisabled:{display:"flex",margin:"0px 7px"},attemptCard:{display:"flex",justifyContent:"space-between",alignItems:"center"},gradeFeedback:{display:"flex",alignItems:"center"}})),lj=e=>{var t,n;let{attempt:i,pointsPossible:r,variant:s,count:o}=e,a=lq(),[l,c]=(0,ei.useState)(!1),d=null===(t=i.feedbackToUser)||void 0===t?void 0:t.rawText,u=(0,ed.q)();return er().createElement("div",{className:a.attemptContainer},er().createElement("div",{className:a.attemptCard},er().createElement(eb.AnalyticsTypography,{component:"legend",variant:"h4"},u("gradebook.gradeFeedback.assessmentGradesAndFeedback.attemptCardTitle",{attemptCount:o})),er().createElement("div",{className:a.gradeFeedback},er().createElement(t$,{grade:null===(n=i.displayGrade)||void 0===n?void 0:n.score,pointsPossible:r,variant:s}),d?er().createElement(eb.AnalyticsIconButton,{"aria-label":u("gradebook.gradeFeedback.assessmentGradesAndFeedback.feedback.ariaLabel",{attemptCount:o}),"aria-expanded":l,onClick:()=>{c(e=>!e)},analyticsId:"gradebook.studentAttemptGradeAndFeedback.button"},er().createElement(aE.Ak,{size:"medium",isFeedbackAvailable:!0})):er().createElement("div",{className:a.feedbackIconDisabled},er().createElement(aE.Ak,{size:"medium",isFeedbackAvailable:!0,isDisabled:!0})))),l&&er().createElement(aT,{feedback:i.feedbackToUser,lastFeedbackAuthor:i.lastFeedbackAuthor,initialSelectedTabKey:aE.X6.Common}))},lz=e=>{switch(e){case"TABULAR":return O.Tabular;case"SCORE":default:return O.Points;case"TEXT":return O.UnitBased;case"PERCENT":return O.Percentage;case"COMPLETE":return O.Complete}},lW=()=>{var e;let t=lH(),n=(0,ed.q)(),{courseId:i,columnId:r,contentId:s,scaleType:o}=(0,eq.pJ)(e=>{let t=eO.Ys.app.getLocation(e).queryParams;return{courseId:t.courseId,columnId:t.columnId,contentId:t.contentId,scaleType:t.scaleType}}),a=(0,eq.Lx)(),l=(0,eq.pJ)(e=>eO.Ys.content.getContentById(e,s)),c=(0,eq.pJ)(e=>eO.Ys.gradebookAttempt.getGradebookAttemptsByColumnId(e,i,r)),d=(0,eq.pJ)(e=>eO.Ys.course.getCourseById(e,i)),u=(0,eq.pJ)(e=>eO.Ys.gradebookGrade.getGradebookGradesByColumnId(e,r));return(0,ei.useEffect)(()=>{!l&&s&&i&&a(eO.Nwg.content.loadContents({courseId:i,contentId:s})),i&&r&&a(eO.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId({courseId:i,columnId:r,expand:"lastFeedbackAuthor"}))},[l,s,i,r,a]),er().createElement(ej.huC,{fixedHeader:!0,header:er().createElement(ej.YIP,{headerText:(null==l?void 0:l.title)||"",subHeaderText:(null==d?void 0:d.displayName)||"",analyticsIdPrefix:"gradebook.studentGradeAndFeedback.header",showMenuToggleButton:!0,readyToFocus:!1})},er().createElement("div",{className:t.studentGradeAndFeedbackContainer},er().createElement("div",{className:t.gradeAndFeedbackLabel},er().createElement(eb.AnalyticsTypography,{component:"legend",variant:"h3"},n("gradebook.gradeFeedback.assessmentGradesAndFeedback.gradesAndFeedbackTitle"))),er().createElement("div",{className:t.overallGradeContainer},er().createElement("span",null,n("gradebook.gradeFeedback.assessmentGradesAndFeedback.scoreCard.yourScore")),(null==u?void 0:u.length)>0&&er().createElement(t$,{grade:u[0].displayGrade.score,symbolGrade:u[0].displayGrade.grade,pointsPossible:u[0].pointsPossible,variant:lz(o)})),(null==u?void 0:u.length)>0&&(null===(e=u[0].instructorFeedback)||void 0===e?void 0:e.rawText)&&er().createElement(aT,{feedback:u[0].instructorFeedback,lastFeedbackAuthor:u[0].lastFeedbackAuthor,initialSelectedTabKey:aE.X6.Common}),(null==c?void 0:c.length)>0&&l&&c.map((e,t)=>{var n;return er().createElement(lj,{key:e.id,attempt:e,pointsPossible:null===(n=l.gradingColumn)||void 0===n?void 0:n.possible,count:t+1,variant:lz(o)})})))},lK=(0,eV.makeStyles)(e=>(0,eV.createStyles)({panelStandardBody:{padding:"16px",[e.breakpoints.up("md")]:{padding:"16px 30px"}},panelBody:{display:"flex",flexDirection:"column",gap:"8px",[e.breakpoints.up("md")]:{gap:"16px"}},panelContainer:{display:"flex",flexDirection:"column",gap:"16px",[e.breakpoints.up("md")]:{flexDirection:"row",gap:"24px"}},itemStatistics:{display:"flex",flexDirection:"column",gap:"16px",flex:"3 0 0",[e.breakpoints.up("md")]:{flexDirection:"row",gap:"24px"}},itemDetailsSection:{display:"flex",flexDirection:"column",height:"fit-content",flex:"1 0 0",background:e.palette.background.b2,padding:"8px",[e.breakpoints.up("md")]:{padding:"16px"}},itemDetailsContainer:{display:"flex",flexDirection:"column",gap:"16px"},itemDetailsFieldContainer:{display:"flex",flexDirection:"column",gap:"16px",margin:"0px",[e.breakpoints.up("sm")]:{flexDirection:"row"},[e.breakpoints.up("md")]:{flexDirection:"column"}},itemDetailsField:{display:"flex",flexDirection:"column",gap:"4px",flex:"1 0 0","& p":{margin:"0px"}},itemDescription:{wordBreak:"break-word"},itemStatisticsSection:{display:"flex",flexDirection:"column",gap:"8px",flex:"1 0 0"},itemStatisticsHeader:{padding:" 8px 0px",boxShadow:`0px 1px 0px 0px ${e.palette.border.main}`},loadingIcon:{display:"flex",flex:"1 0 0",justifyContent:"center",alignSelf:"center"},statisticsField:{textAlign:"left",padding:"4px 0px"},statisticsValue:{textAlign:"right"}})),lZ=e=>{let{label:t,value:n,className:i}=e,r=lK();return ei.createElement("li",{className:r.itemDetailsField},ei.createElement(eb.AnalyticsTypography,{variant:"subtitle2",component:"span"},t),ei.createElement("span",{className:i},n))},lQ=e=>{let{description:t}=e,n=lK(),i=(0,ed.q)();return ei.createElement("div",{className:n.itemDetailsField},ei.createElement(eb.AnalyticsTypography,{variant:"subtitle2",component:"h3"},i("gradebook.gradableItemStatistics.itemInformation.description")),ei.createElement("p",{className:(0,eX.Z)(n.itemDescription,"js-description-statistics")},t||"---"))},lJ=e=>{var t,n;let{courseId:i,analyticsId:r,selectedColumn:s,onColumnSelectionChange:o}=e,{translate:a,formatDatetime:l}=(0,eQ.h)(),c=lK();return ei.createElement("div",{className:c.itemDetailsSection},ei.createElement(eb.AnalyticsTypography,{variant:"h3",component:"h2"},a("gradebook.gradableItemStatistics.itemInformation.header")),ei.createElement("div",{className:c.itemDetailsContainer},ei.createElement(nR.Ux,{inputId:"gradable-items-picker-statistics",analyticsId:`${r}.pickColumns`,courseId:i,onColumnSelectionChange:o,selectedColumn:s,label:a("gradebook.gradableItemStatistics.itemInformation.gradebookItem"),placeholder:a("gradebook.gridFiltersPanel.gradebookColumns.placeholder")}),s&&ei.createElement(ei.Fragment,null,ei.createElement("ul",{className:c.itemDetailsFieldContainer},ei.createElement(lZ,{label:a("gradebook.gradableItemStatistics.itemInformation.dueDate"),value:s.dueDate?l(s.dueDate,nk.ILocaleDatetimeFormat.Short):a("gradebook.gradableItemStatistics.itemInformation.noDueDate")}),ei.createElement(lZ,{label:a("gradebook.gradableItemStatistics.itemInformation.pointsPossible"),value:a("global.localizedNumber",{number:null!==(t=s.possible)&&void 0!==t?t:0}),className:"js-points-possible-statistics"}),ei.createElement(lZ,{label:a("gradebook.gradableItemStatistics.itemInformation.category"),value:s.gradebookCategory?ik(s.gradebookCategory,a):a("gradebook.gradableItemStatistics.itemInformation.noCategory"),className:"js-category-statistics"})),ei.createElement("div",{className:c.itemDetailsFieldContainer},ei.createElement(lQ,{description:null===(n=s.description)||void 0===n?void 0:n.rawText})))))},lY=e=>{let{label:t,value:n,className:i}=e,r=lK(),s=(0,ed.q)();return ei.createElement("tr",null,ei.createElement("th",{className:r.statisticsField},ei.createElement(eb.AnalyticsTypography,{variant:"subtitle2",component:"span"},t)),ei.createElement("td",{className:(0,eX.Z)(r.statisticsValue,i)},s("global.localizedNumber",{number:n})))},lX=e=>{var t,n,i,r,s,o,a,l;let{gradeStatistics:c}=e,d=lK(),u=(0,ed.q)(),p=[{label:u("gradebook.gradableItemStatistics.gradeStatistics.gradeCount"),value:null!==(t=null==c?void 0:c.gradeCount)&&void 0!==t?t:0,className:"js-grade-count-statistics"},{label:u("gradebook.gradableItemStatistics.gradeStatistics.minimumValue"),value:null!==(n=null==c?void 0:c.minValue)&&void 0!==n?n:0,className:"js-minimum-value-statistics"},{label:u("gradebook.gradableItemStatistics.gradeStatistics.maximumValue"),value:null!==(i=null==c?void 0:c.maxValue)&&void 0!==i?i:0,className:"js-maximum-value-statistics"},{label:u("gradebook.gradableItemStatistics.gradeStatistics.range"),value:null!==(r=null==c?void 0:c.valueRange)&&void 0!==r?r:0},{label:u("gradebook.gradableItemStatistics.gradeStatistics.average"),value:null!==(s=null==c?void 0:c.averageValue)&&void 0!==s?s:0},{label:u("gradebook.gradableItemStatistics.gradeStatistics.median"),value:null!==(o=null==c?void 0:c.medianValue)&&void 0!==o?o:0},{label:u("gradebook.gradableItemStatistics.gradeStatistics.standardDeviation"),value:null!==(a=null==c?void 0:c.standardDeviationValue)&&void 0!==a?a:0},{label:u("gradebook.gradableItemStatistics.gradeStatistics.variance"),value:null!==(l=null==c?void 0:c.varianceValue)&&void 0!==l?l:0}];return ei.createElement("div",{className:d.itemStatisticsSection},ei.createElement("div",{className:d.itemStatisticsHeader},ei.createElement(eb.AnalyticsTypography,{variant:"h3",id:"grade-statistics"},u("gradebook.gradableItemStatistics.gradeStatistics.header"))),ei.createElement("table",{"aria-labelledby":"grade-statistics"},ei.createElement("tbody",null,p.map((e,t)=>ei.createElement(lY,{key:t,label:e.label,value:e.value,className:e.className})))))},l0=e=>{let{gradingStatus:t}=e,n=lK(),i=(0,ed.q)(),r=[{label:i("gradebook.gradableItemStatistics.gradingStatus.notStarted"),value:t.notStartedCount,className:"js-not-started-statistics"},{label:i("gradebook.gradableItemStatistics.gradingStatus.inProgress"),value:t.inProgressCount},{label:i("gradebook.gradableItemStatistics.gradingStatus.needsGrading"),value:t.needsGradingCount},{label:i("gradebook.gradableItemStatistics.gradingStatus.exempt"),value:t.exemptCount,className:"js-exempt-statistics"}];return ei.createElement("div",{className:n.itemStatisticsSection},ei.createElement("div",{className:n.itemStatisticsHeader},ei.createElement(eb.AnalyticsTypography,{variant:"h3",id:"grading-status"},i("gradebook.gradableItemStatistics.gradingStatus.header"))),ei.createElement("table",{"aria-labelledby":"grading-status"},ei.createElement("tbody",null,r.map((e,t)=>ei.createElement(lY,{key:t,label:e.label,value:e.value,className:e.className})))))},l1=(e,t)=>e===e$.aQo.Score||e===e$.aQo.Percent?100===t.lowerGradeRange?"js-greater-than-100":0===t.upperGradeRange?"js-less-than-0":`js-${t.lowerGradeRange}-${t.upperGradeRange}`:`js-${t.gradeRange}`,l2=e=>{let{gradeDistribution:t}=e,n=lK(),i=(0,ed.q)(),r=(e,t)=>{var n;return e===e$.aQo.Score||e===e$.aQo.Percent?100===t.lowerGradeRange?i("gradebook.gradableItemStatistics.gradeDistribution.greaterThan100"):0===t.upperGradeRange?i("gradebook.gradableItemStatistics.gradeDistribution.lessThan0"):i("gradebook.gradableItemStatistics.gradeDistribution.minToMax",{minValue:t.lowerGradeRange,maxValue:t.upperGradeRange}):e===e$.aQo.Complete?i(`gradebook.gradableItemStatistics.gradeDistribution.${t.gradeRange}`):null!==(n=t.gradeRange)&&void 0!==n?n:""};return ei.createElement("div",{className:n.itemStatisticsSection},ei.createElement("div",{className:n.itemStatisticsHeader},ei.createElement(eb.AnalyticsTypography,{variant:"h3",id:"grade-distribution"},i(t.gradingScaleType===e$.aQo.Score||t.gradingScaleType===e$.aQo.Percent?"gradebook.gradableItemStatistics.gradeDistribution.headerWithPercentage":"gradebook.gradableItemStatistics.gradeDistribution.header"))),ei.createElement("table",{"aria-labelledby":"grade-distribution"},ei.createElement("tbody",null,t.gradeRangeCount.map((e,n)=>ei.createElement(lY,{key:n,label:r(t.gradingScaleType,e),value:e.gradeCount,className:l1(t.gradingScaleType,e)})))))},l4="course.grades.gradable-item-statistics",l6=()=>{var e;let t=lK(),n=(0,ed.q)(),i=(0,eq.pJ)(e=>eO.Ys.app.getRoute(e).params),r=null==i?void 0:i.columnId,s=null==i?void 0:i.courseId,[o,a]=(0,ei.useState)(r),l=(0,ei.useCallback)(e=>{a(e.id),np.Nd.search({columnId:e.id})},[a]),c=(0,eq.Tn)(s),d=(0,eq.IP)(s,o),u=(0,eq.$y)(s,o),p=(0,eq.Nh)(o),m=(0,ei.useCallback)(()=>{if(d)return eO.u$1.Attendance.isEqualTo(d.scoreProviderHandle)?n("gradebook.gradableItemStatistics.attendancePanelTitle"):n("gradebook.gradableItemStatistics.panelTitle",{columnName:d.columnName})},[n,d])();return(0,ei.useEffect)(()=>{if(!m)return;let e={type:rv.Cs.ColumnStatisticsOpened,status:rv.rJ.Success,pageTitle:m};(0,rv.Db)(e)},[m]),ei.createElement("div",{className:"js-gradable-item-statistics-panel"},ei.createElement(ej.huC,{header:!(0,rv.Dd)()&&ei.createElement(ej.YIP,{headerText:m,analyticsIdPrefix:`${l4}.header`,readyToFocus:!0,showMenuToggleButton:!0,subHeaderText:null!==(e=null==c?void 0:c.displayName)&&void 0!==e?e:""})},ei.createElement(ej.gXi,{className:t.panelStandardBody},ei.createElement("div",{className:t.panelBody},ei.createElement("span",null,n("gradebook.gradableItemStatistics.panelDescription")),ei.createElement("div",{className:t.panelContainer},ei.createElement(lJ,{courseId:s,analyticsId:l4,selectedColumn:d,onColumnSelectionChange:l}),ei.createElement("div",{className:t.itemStatistics},p&&ei.createElement("div",{className:t.loadingIcon},ei.createElement(eb.AnalyticsCircularProgress,{ariaLabel:n("global.loading"),size:"large"})),!p&&u&&ei.createElement(ei.Fragment,null,ei.createElement(lX,{gradeStatistics:u.gradeStatistics}),ei.createElement(l0,{gradingStatus:u.gradingStatus}),ei.createElement(l2,{gradeDistribution:u.gradeDistribution}))))))))},l5={renderDownloadSubmissionsPanel:(e,t,n)=>{es.render(ei.createElement(ea.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["gradebook/locales/[locale]/gradebook.json"],isRtl:n.isRtl},ei.createElement(eb.AnalyticsJssThemeProvider,{isRtl:n.isRtl},ei.createElement(eo.zt,{store:t},ei.createElement(eF,{...n.componentProps})))),e)},destroyComponent:e=>{es.unmountComponentAtNode(e)}},l3=en},880625:function(e,t,n){"use strict";n.d(t,{V:function(){return s},Y:function(){return r}});var i=n(715729);let r=(e,t)=>(0,i.Uy)(e,e=>{switch(e.paging||(e.paging={}),t.type){case"change.page":e.paging.offset=t.offset;break;case"search.text":e.filter={...e.filter,searchString:t.searchString},e.paging.offset=0}});function s(e,t){return Math.max(1,Math.ceil(e/t))}},514461:function(e,t,n){"use strict";n.d(t,{bg:function(){return m.b},rZ:function(){return eC},qz:function(){return S.qz},KZ:function(){return J},jg:function(){return ea},Fq:function(){return m.F},nV:function(){return ey},xf:function(){return F},AT:function(){return G},GS:function(){return eE},Ig:function(){return eI},LI:function(){return y},P3:function(){return l.Z},Lf:function(){return eS},ZP:function(){return eP},Qn:function(){return eT},pL:function(){return S.pL},Rk:function(){return eA},nx:function(){return ek}});var i=n(202784),r=n.n(i),s=n(928316),o=n(44432),a=n(174897),l=n(415550),c=n(773250),d=n(697419),u=n(194842),p=n(847969),m=n(897084),h=n(410628),g=n(847614),f=n(175644),b=n(327355);let v=(0,b.makeStyles)(e=>(0,b.createStyles)({banner:{padding:"12px 30px"}}));var y=()=>{let[e,t]=i.useState(!0),n=v(),r=(0,h.q)();return e?(()=>{let e=i.createElement(f.l,null),s=r("course.groupWorkspace.movingMembersBanner.closeText"),o=r("course.groupWorkspace.movingMembersBanner.bannerMessage");return i.createElement(g.m,{severity:"warning",icon:e,onClose:()=>t(!1),closeText:s,className:n.banner},i.createElement("span",{className:"js-banner-contents"},o))})():null},S=n(352685),C=n(609582);let E=(0,b.makeStyles)(e=>({peekPanel:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowY:"auto"},peekPanelHeader:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",[e.breakpoints.up("xl")]:{paddingLeft:"30px"}}},hideHeader:{display:"none"},peekPanelBody:{padding:"30px",position:"relative",marginBottom:"48px"},peekPanelTabsContainer:{padding:"0 30px",position:"relative",marginBottom:"48px"},importPeekPanelTabsContainer:{padding:"0 30px",position:"relative",marginBottom:"68px"},peekPanelFooter:{position:"absolute",bottom:0,left:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},peekPanelTabs:{borderBottom:`1px solid ${e.palette.border.main}`},tabButton:{minWidth:"50%"},tabPanelBody:{marginTop:"24px"}})),I=(0,b.makeStyles)(e=>({helpContainer:{display:"flex"},uploadFileText:{flex:1,fontWeight:e.typography.fontWeightSemiBold},fileIcon:{marginRight:"5px"},fileListContainer:{display:"flex",flexDirection:"row",marginTop:"15px",height:"50px",alignItems:"center",backgroundColor:e.palette.background.b2,padding:"5px"},trashIcon:{marginLeft:"5px"},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"auto",flex:1}}));var w=n(88818),A=n(927335),k=n(906277);let T=e=>{let{description:t,analyticsId:n,helpLink:r,templateLink:s,templateText:o,validFileFormats:a}=e,{file:l,onFileUpload:c,onRemoveFile:d,onFileUploadError:u}=e,m=(0,h.q)(),g=I();return i.createElement(i.Fragment,null,i.createElement("p",null,t),i.createElement("div",{className:g.helpContainer},i.createElement("span",{className:g.uploadFileText},m("course.groupWorkspace.importGroupSet.uploadFile")),i.createElement(p.AnalyticsLink,{analyticsId:`${n}.help.link`,href:r,target:"_blank"},m("global.help"))),i.createElement(w.p0f,{analyticsId:`${n}.file-upload`,validFormats:a,onFileUpload:c,onFileUploadError:u}),i.createElement("div",null,i.createElement(p.AnalyticsLink,{analyticsId:`${n}.template.link`,href:s},o)),l&&i.createElement("div",{className:(0,k.Z)("js-file-container",g.fileListContainer)},i.createElement(A.Reports,{className:g.fileIcon}),i.createElement("span",{className:g.fileName},l.fileName),i.createElement(p.AnalyticsIconButton,{analyticsId:`${n}.trash.icon`,onClick:d,className:g.trashIcon,"aria-label":m("global.delete")},i.createElement(A.Trash,null))))};var P=n(259197),D=n(563060),x=n(986709),R=n(592493);let L=(e,t,n=x.raB.Groups)=>{let r=(0,R.Lx)(),[s,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)(),c=(0,i.useCallback)(()=>{D.Nd.leavePeekState()},[]),d=(0,i.useCallback)(()=>{if(o(!0),(null==a?void 0:a.fileName)&&(null==a?void 0:a.fileLocation)){let i={fileName:a.fileName,fileLocation:a.fileLocation,scope:n};r(t?P.Nwg.groupSetImport.importGroupSet(e,i):P.Nwg.groupMembersImport.importGroupMembers(e,i))}c()},[e,a,n,t,c,r]);return{isPrimaryButtonDisabled:s,file:a,dismissPanel:c,onImportClick:d,onFileUpload:e=>{l(e),o(!1)},onFileUploadError:n=>{console.error(n.message),r(t?P.Nwg.groupSetImport.setFileUploadGroupSetError(e,n):P.Nwg.groupMembersImport.setFileUploadGroupMembersError(e,n)),c()},onRemoveFile:()=>{l(void 0),o(!0)}}};var N=n(776517);let $=[".csv"],O="course.groups.import-group-set",G=e=>{let{courseId:t,courseName:n}=e,s=(0,h.q)(),o=E(),a=(0,R.gH)("course.","organization."),{isPrimaryButtonDisabled:l,file:c,dismissPanel:d,onImportClick:u,onFileUpload:p,onFileUploadError:m,onRemoveFile:g}=L(t,!0);return(0,i.useEffect)(()=>{let e={type:N.Cs.ImportGroupSetPanelOpened,status:N.rJ.Success,pageTitle:s("course.groupWorkspace.importGroupSet.pageTitle")};(0,N.Db)(e)},[s]),r().createElement("div",{id:"import-group-set-panel"},r().createElement("div",{className:o.peekPanel},r().createElement("header",{className:(0,k.Z)(o.peekPanelHeader,(0,N.Dd)()&&o.hideHeader)},r().createElement(C.BbPanelHeader,{smallHeaderTitle:n,type:C.BbPanelType.peek,analyticsId:`${O}.header`,title:s("course.groupWorkspace.importGroupSet.pageTitle"),navMenuAriaLabel:s("global.navigationMenu")})),r().createElement("div",{className:o.peekPanelBody},r().createElement(T,{analyticsId:O,description:s(a("course.groupWorkspace.importGroupSet.description")),helpLink:s("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,P.uIm)("/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groups.csv"),templateText:s("course.groupWorkspace.importGroupSet.downloadGroupSetsTemplate"),onFileUpload:p,onRemoveFile:g,onFileUploadError:m,validFileFormats:$,file:c}))),r().createElement("footer",{className:o.peekPanelFooter},r().createElement(C.BbPanelFooter,{primaryButtonProps:{onClick:u,disabled:l,text:s("global.import"),id:"js-button-import"},secondaryButtonProps:{onClick:d,text:s("global.cancel")},analyticsId:`${O}.footer`})))};var _=n(146115);let M=[".csv"],B="course.groups.import-group-members",F=e=>{let{courseId:t,courseName:n}=e,s=E(),o=(0,h.q)(),[a,l]=(0,i.useState)("create"),c=(0,R.gH)("course.","organization."),{isPrimaryButtonDisabled:d,file:u,dismissPanel:m,onImportClick:g,onFileUpload:f,onFileUploadError:b,onRemoveFile:v}=L(t,!1,"create"===a?x.raB.Groups:x.raB.Members),y="create"===a?"/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groups.csv":"/webapps/bb-group-mgmt-LEARN/help/ultra/sample_groupmembers.csv";return(0,i.useEffect)(()=>{let e={type:N.Cs.ImportGroupMembersPanelOpened,status:N.rJ.Success,pageTitle:o("course.content.courseGroup.importGroups")};(0,N.Db)(e)},[o]),r().createElement("div",{id:"import-group-members-panel"},r().createElement("div",{className:s.peekPanel},r().createElement("header",{className:(0,k.Z)(s.peekPanelHeader,(0,N.Dd)()&&s.hideHeader)},r().createElement(C.BbPanelHeader,{smallHeaderTitle:n,type:C.BbPanelType.peek,analyticsId:`${B}.header`,title:o("course.content.courseGroup.importGroups"),navMenuAriaLabel:o("global.navigationMenu")})),r().createElement("div",{className:s.importPeekPanelTabsContainer},r().createElement(p.AnalyticsTabs,{value:a,className:s.peekPanelTabs,analyticsId:`${B}.tabs`,onChange:()=>{u&&v()}},r().createElement(p.AnalyticsTab,{label:o("course.groupWorkspace.importGroupMembers.createGroupsTab"),value:"create",className:s.tabButton,analyticsId:`${B}.tabs.create`,onClick:()=>l("create"),id:"id-create-groups-tab","aria-controls":"id-create-groups-tab-panel"}),r().createElement(p.AnalyticsTab,{label:o("course.groupWorkspace.importGroupMembers.assignMembersTab"),value:"assign",className:s.tabButton,analyticsId:`${B}.tabs.assign`,onClick:()=>l("assign"),id:"id-assign-members-tab","aria-controls":"id-assign-members-tab-panel"})),r().createElement(_.x,{panelId:"create"===a?"id-create-groups-tab-panel":"id-assign-members-tab-panel",ariaLabelledby:"create"===a?"id-create-groups-tab":"id-assign-members-tab"},r().createElement("div",{className:s.tabPanelBody},"create"===a?r().createElement(T,{analyticsId:`${B}.createTab`,description:o(c("course.groupWorkspace.importGroupSet.description")),helpLink:o("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,P.uIm)(y),templateText:o("course.groupWorkspace.importGroupMembers.downloadGroupsTemplate"),onFileUpload:f,onRemoveFile:v,onFileUploadError:b,validFileFormats:M,file:u}):r().createElement(T,{analyticsId:`${B}.assignTab`,description:o(c("course.groupWorkspace.importGroupMembers.assignDescription")),helpLink:o("course.groupWorkspace.importGroupSet.helpLink"),templateLink:(0,P.uIm)(y),templateText:o("course.groupWorkspace.importGroupMembers.downloadMembersTemplate"),onFileUpload:f,onRemoveFile:v,onFileUploadError:b,validFileFormats:M,file:u}))))),r().createElement("div",{className:s.peekPanelFooter},r().createElement(C.BbPanelFooter,{primaryButtonProps:{onClick:g,disabled:d,text:o("global.import"),id:"js-button-import"},secondaryButtonProps:{onClick:m,text:o("global.cancel")},analyticsId:`${B}.footer`})))},U=(0,b.makeStyles)(e=>({radioGroup:{padding:"24px 0",borderBottom:`1px solid ${e.palette.border.main}`},fileContainer:{padding:"24px 0",borderBottom:`1px solid ${e.palette.border.main}`,"& svg":{cursor:"pointer",marginRight:"10px"}},trashIconButton:{alignItems:"start"},fileLink:{display:"flex",flex:1,color:e.palette.text.primary,textDecoration:"none","&:hover,&:focus":{color:e.palette.text.primary,textDecoration:"none"}},fileDetail:{display:"flex","& span":{width:"200px",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",[e.breakpoints.up("sm")]:{width:"250px"}},"& p":{textAlign:"left"}},noFileText:{padding:"24px 0",textAlign:"center"},pagination:{margin:"12px 0"},paginationFooter:{position:"absolute",bottom:0,left:0,right:0,backgroundColor:`${e.palette.background.default}`}})),V=e=>{let{analyticsId:t,setSelectedFieldsToInclude:n,setIsPrimaryButtonDisabled:s}=e,o=(0,h.q)(),a=U(),[l,c]=(0,i.useState)({groupSetOnly:!1,membersOnly:!1}),d=()=>{l.groupSetOnly&&l.membersOnly?(s(!1),n(x.raB.GroupsAndMembers)):l.groupSetOnly?(s(!1),n(x.raB.Groups)):l.membersOnly?(s(!1),n(x.raB.Members)):s(!0)};return(0,i.useEffect)(()=>{d()},[l]),r().createElement(r().Fragment,null,r().createElement("div",{className:a.radioGroup},r().createElement(b.CheckboxGroup,{id:"id_fields_to_include",legendVariant:"h2",legendText:o("course.groupWorkspace.exportGroupSet.fieldsToInclude"),name:"Fields_To_Include"},r().createElement(p.AnalyticsFormControlLabel,{analyticsId:`${t}.label.group-only`,htmlFor:"group_set_only_id",value:x.raB.Groups,control:r().createElement(p.AnalyticsCheckbox,{analyticsId:`${t}.checkbox.group-only`,onChange:(e,t)=>{c(e=>({...e,groupSetOnly:t}))},id:"group_set_only_id",name:"groupSetOnly"}),label:o("course.groupWorkspace.exportGroupSet.groupSetOnly")}),r().createElement(p.AnalyticsFormControlLabel,{analyticsId:`${t}.label.members-only`,htmlFor:"members_only_id",value:x.raB.Members,control:r().createElement(p.AnalyticsCheckbox,{analyticsId:`${t}.checkbox.members-only`,onChange:(e,t)=>{c(e=>({...e,membersOnly:t}))},id:"members_only_id",name:"membersOnly"}),label:o("course.groupWorkspace.exportGroupSet.membersOnly")}))),r().createElement("div",{className:a.radioGroup},r().createElement(p.AnalyticsRadioGroup,{analyticsId:t,id:"id_file_type",legendVariant:"h2",legendText:o("course.groupWorkspace.exportGroupSet.fileType"),name:"File_Type",value:"CSV"},r().createElement(p.AnalyticsFormControlLabel,{analyticsId:`${t}.label.csv`,htmlFor:"csv_id",value:"csv",control:r().createElement(p.AnalyticsRadio,{analyticsId:`${t}.radio.csv`,checked:!0,id:"csv_id",readOnly:!0}),label:o("course.groupWorkspace.exportGroupSet.csv")}))))};var H=n(579633),q=n(755755),j=n(675689),z=n(238136);let W=e=>{let{analyticsId:t,file:n,files:r,courseId:s,groupSetId:o,page:a,setPage:l,refreshFileList:c}=e,d=U(),{translate:u,formatDate:m}=(0,q.h)(),h=(0,R.Lx)();return i.createElement(p.AnalyticsListItem,{analyticsId:`${t}.listItem`,key:n.fileName,className:d.fileContainer},i.createElement(p.AnalyticsLink,{analyticsId:`${t}.download-file`,href:n.downloadUrl,className:d.fileLink},i.createElement(z.DownloadFile,null),i.createElement("span",{className:d.fileDetail},i.createElement(p.AnalyticsListItemText,{analyticsId:`${t}.listItem`,primary:n.fileName,secondary:u("course.groupWorkspace.exportGroupSet.createdDate",{date:m(n.dateCreated,H.ILocaleDateFormat.Short)})}))),i.createElement(p.AnalyticsIconButton,{analyticsId:`${t}.delete.icon`,onClick:()=>{try{h(P.Nwg.groupSetExport.deleteFile(s,o,{fileName:n.fileName})).then(()=>{1===r.length&&0!==a?l(e=>e-1):c()})}catch(e){console.error(e)}},className:d.trashIconButton,"aria-label":u("components.directives.file-viewer.aria.deleteFile",{fileName:n.fileName})},i.createElement(j.Trash,null)))},K=[{field:"fileName",direction:x.SrV.Descending}],Z=e=>{var t;let{analyticsId:n,courseId:s,groupSetId:o,page:a,setPage:l,pageSize:c}=e,d=U(),u=(0,h.q)(),m=(0,R.Lx)(),g=(0,R.pJ)(e=>P.Ys.groupSetExport.getExportGroupSet(e,s)),f=null===(t=null==g?void 0:g.byGroupSetId[o])||void 0===t?void 0:t.files,b=()=>{m(P.Nwg.groupSetExport.getExportedFiles(s,o,{paging:{limit:c,offset:a*c},sort:K}))};return(0,i.useEffect)(()=>{b()},[a,s,o,K]),r().createElement(r().Fragment,null,(null==f?void 0:f.length)>0?r().createElement(p.AnalyticsList,{analyticsId:`${n}.list`},f.map(e=>r().createElement(W,{key:e.fileName,file:e,analyticsId:n,files:f,courseId:s,groupSetId:o,page:a,setPage:l,refreshFileList:b}))):r().createElement("div",{className:d.noFileText},r().createElement("span",null,u("course.groupWorkspace.exportGroupSet.noFilesText"))))},Q="course.groups.export-group-set",J=e=>{var t,n,s,o;let{courseId:a,groupSetId:l,courseName:c,isGroupSetDetailView:d}=e,u=(0,h.q)(),m=E(),g=U(),f=(0,R.Lx)(),[b,v]=(0,i.useState)(!0),[y,S]=(0,i.useState)("create"),[I,A]=(0,i.useState)(x.raB.GroupsAndMembers),[T,L]=(0,i.useState)(0),$=u("create"===y?"course.groupWorkspace.exportGroupSet.exportFromGroups":"course.groupWorkspace.exportGroupSet.exportFile"),O=(0,R.pJ)(e=>P.Ys.groupSetExport.getExportGroupSet(e,a)),G=null!==(n=null===(t=null==O?void 0:O.byGroupSetId[l])||void 0===t?void 0:t.paging)&&void 0!==n&&!!n.count&&O.byGroupSetId[l].paging.count>7,M=(null===(o=null===(s=null==O?void 0:O.byGroupSetId[l])||void 0===s?void 0:s.paging)||void 0===o?void 0:o.count)?O.byGroupSetId[l].paging.count/7:1;(0,i.useEffect)(()=>{let e={type:N.Cs.ExportGroupSetPanelOpened,status:N.rJ.Success,pageTitle:$};(0,N.Db)(e)},[$]);let B=(0,i.useCallback)(()=>{D.Nd.leavePeekState()},[]),F=(0,i.useCallback)(()=>{v(!0),f(P.Nwg.groupSetExport.exportGroupSet(a,l,{scope:I},d?"GROUP_SET_DETAIL_VIEW":"GROUPS_LIST_VIEW")),B()},[I,a,l,d,B,f]);return r().createElement("div",{id:"export-group-set-panel"},r().createElement("div",{className:m.peekPanel},r().createElement("header",{className:(0,k.Z)(m.peekPanelHeader,(0,N.Dd)()&&m.hideHeader)},r().createElement(C.BbPanelHeader,{smallHeaderTitle:c,type:C.BbPanelType.peek,analyticsId:`${Q}.header`,title:$,navMenuAriaLabel:u("global.navigationMenu")})),r().createElement("div",{className:m.peekPanelTabsContainer},r().createElement(p.AnalyticsTabs,{value:y,className:m.peekPanelTabs,analyticsId:`${Q}.tabs`},r().createElement(p.AnalyticsTab,{label:u("course.groupWorkspace.exportGroupSet.createTab"),value:"create",className:m.tabButton,analyticsId:`${Q}.tabs.create`,onClick:()=>S("create"),"aria-controls":"id-create-tab-panel",id:"id-create-tab"}),r().createElement(p.AnalyticsTab,{label:u("global.export"),value:"export",className:m.tabButton,analyticsId:`${Q}.tabs.export`,onClick:()=>S("export"),"aria-controls":"id-export-tab-panel",id:"id-export-tab"})),r().createElement(_.x,{panelId:"create"===y?"id-create-tab-panel":"id-export-tab-panel",ariaLabelledby:"create"===y?"id-create-tab":"id-export-tab"},"create"===y?r().createElement(V,{analyticsId:`${Q}.createTab`,setSelectedFieldsToInclude:A,setIsPrimaryButtonDisabled:v}):r().createElement(Z,{analyticsId:`${Q}.fileList`,courseId:a,groupSetId:l,page:T,setPage:L,pageSize:7})))),"create"===y&&r().createElement("footer",{className:m.peekPanelFooter},r().createElement(C.BbPanelFooter,{primaryButtonProps:{onClick:F,disabled:b,text:u("course.groupWorkspace.exportGroupSet.exportFile"),id:"js-button-export"},secondaryButtonProps:{onClick:B,text:u("global.cancel")},analyticsId:`${Q}.footer`})),"export"===y&&G&&r().createElement("footer",{className:g.paginationFooter},r().createElement(w.Vdz,{className:g.pagination,analyticsId:`${Q}.fileList`,page:T,numberOfPages:M,onPageChange:e=>{L(e)}})))},Y=(0,b.makeStyles)(e=>(0,b.createStyles)({groupMembersListPanel:{position:"absolute",top:0,left:0,right:0,bottom:0},panel:{display:"flex",flexDirection:"column",alignItems:"stretch",height:"100vh"},header:{flex:"0 1 auto","& .ms-Panel-titles-container":{[e.breakpoints.up("sm")]:{position:"relative",left:e.spacing(3)}}},hideHeader:{display:"none"},content:{flex:"1 1 auto",overflowY:"auto",padding:e.spacing(2),[e.breakpoints.up("sm")]:{padding:e.spacing(3)}},footer:{backgroundColor:`${e.palette.background.default}`},groupMemberListItem:{borderBottom:`1px solid ${e.palette.border.main}`,borderRight:"0px",borderLeft:"0px",borderTop:"0px"},spinnerContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},pagination:{margin:"12px 0"},userNameStyles:{fontWeight:e.typography.fontWeightBold},membersSearchBoxContainer:{borderBottom:`1px solid ${e.palette.border.main}`,padding:"12px 0"},membersSearchBox:{[e.breakpoints.up("sm")]:{margin:0,width:"100%"}},noResultsMessage:{marginTop:"5px"}}));var X=n(35302);let ee=e=>{let{memberships:t,users:n,courseId:i}=e,s=(0,h.q)(),o=Y(),a=(0,R.gH)("global.course","global.organization"),l=(0,R.pJ)(e=>P.Ys.courseMembership.getMembershipPermissions(e,i)),c=t.map(e=>{var t;let{role:i,userId:c}=e;if(!c)return null;let d=n[c],u=P.LPT.hasAccommodations(e,l);return r().createElement(p.AnalyticsListItem,{key:c,className:o.groupMemberListItem,analyticsId:"courseCore.components.courseInstructors.listItem"},r().createElement(p.AnalyticsListItemAvatar,{analyticsId:"courseCore.components.courseInstructors.listItemAvatar"},r().createElement(p.AnalyticsAvatar,{size:"medium",src:null===(t=d.avatar)||void 0===t?void 0:t.permanentUrl,alt:s("courseCore.components.courseInstructors.avatarAltText",{user:d})})),r().createElement(p.AnalyticsListItemText,{analyticsId:"courseCore.components.courseInstructors.listItemText",primary:r().createElement(X.K6,{ariaHidden:!0,format:H.ILocaleUsernameFormat.Short,user:d,subtext:s(a(`global.course.role.${i}`)),showPronunciation:!0,showPronouns:!0,showAccommodation:u,userNameStyles:o.userNameStyles})}))});return r().createElement(p.AnalyticsList,{analyticsId:"courseCore.components.courseInstructors.groupMembers.list"},c)};var et=n(880625);let en=e=>{var t;let{viewPaging:n,page:i,onPageChange:s,analyticsId:o,pageSize:a}=e,l=n?(0,et.V)(null!==(t=n.count)&&void 0!==t?t:1,a):1,c=(0,b.useMediaQuery)(e=>e.breakpoints.down("xs")),d=Y();return r().createElement("div",{className:d.footer},r().createElement(w.Vdz,{className:d.pagination,analyticsId:o,page:i,numberOfPages:l,onPageChange:s,compact:c}))},ei=e=>{let{onSearchBoxTextChange:t,analyticsId:n,membershipsCount:s,isLoading:o}=e,a=(0,h.q)(),l=Y(),[c,d]=(0,i.useState)(),u=e=>{d(e),t(e)};return r().createElement("div",{className:l.membersSearchBoxContainer},r().createElement(w._Wk,{"aria-describedby":"noResultsMessage",inputId:"group-members-list-search-input",analyticsId:n,className:l.membersSearchBox,label:a("course.groupWorkspace.groupMembers.search"),onChange:u,onClear:()=>{u("")},value:c}),0===s&&!o&&r().createElement(p.AnalyticsTypography,{variant:"body1",id:"noResultsMessage",role:"alert",className:l.noResultsMessage},a("course.groupWorkspace.groupMembers.noSearchResult")),!!s&&!o&&r().createElement(p.AnalyticsOffScreenAnnouncement,{type:"polite",role:"status",changeTrigger:1,message:o?null:(null==c?void 0:c.length)===0?a("course.groupWorkspace.groupMembers.searchCleared",{oldResultsCount:s}):0===s?a("course.groupWorkspace.groupMembers.noSearchResult"):s&&s>0?a("course.groupWorkspace.groupMembers.resultsFound",{resultsCount:s}):null,analyticsId:n}))};var er=n(465139),es=n(815532);let eo="course.groups.group-members-list",ea=e=>{var t,n,s;let{courseId:o}=e,a=(0,R.pJ)(e=>P.Ys.app.getLocation(e).queryParams.groupId),l=(0,R.pJ)(e=>P.Ys.app.getLocation(e).queryParams.contentId),c=!!l,{group:d,groupSet:u,loadingStatus:m}=(0,R.Te)(o,a,c);if((c&&!(null==d?void 0:d.id)||!c&&!(null==d?void 0:d.groupSetId))&&m===es.S.Loaded)throw D.Nd.leavePeekState(),Error(`Group ${a} not found.`);let g=null===(t=(0,R.pJ)(e=>P.Ys.content.getContentById(e,l)))||void 0===t?void 0:t.title,f=c?g:null==u?void 0:u.title,b={courseId:o,filter:{searchString:"",roleBucket:[x.O8v.Taking],groupId:[a]},paging:{limit:20,offset:0},sort:[{field:x.PJt.GivenName,direction:x.SrV.Ascending},{field:x.PJt.FamilyName,direction:x.SrV.Ascending}]},[v,y]=(0,i.useReducer)(et.Y,b),{memberships:S,users:E,view:I}=(0,R.d$)(v),w=Y(),A=(0,h.q)(),T=(0,er.y1)(e=>{y({type:"search.text",searchString:e})},500),L=null==d?void 0:d.title;return(0,i.useEffect)(()=>{if(!L)return;let e={type:N.Cs.GroupMembersListOpened,status:N.rJ.Success,pageTitle:L};(0,N.Db)(e)},[L]),r().createElement("div",{className:w.groupMembersListPanel},r().createElement("div",{className:w.panel},r().createElement("header",{className:(0,k.Z)(w.header,(0,N.Dd)()&&w.hideHeader)},r().createElement(C.BbPanelHeader,{smallHeaderTitle:f,type:C.BbPanelType.peek,analyticsId:`${eo}.header`,title:null==d?void 0:d.title,navMenuAriaLabel:A("global.navigationMenu")})),r().createElement("div",{className:w.content},r().createElement(ei,{onSearchBoxTextChange:T,analyticsId:eo,membershipsCount:S.length,isLoading:!I||I.isLoading}),(!I||I.isLoading)&&r().createElement("div",{className:w.spinnerContainer},r().createElement(p.AnalyticsCircularProgress,{ariaLabel:A("global.loading"),size:"medium"})),r().createElement(ee,{memberships:S,users:E,courseId:o})),r().createElement(en,{viewPaging:null==I?void 0:I.paging,page:(null!==(s=null===(n=v.paging)||void 0===n?void 0:n.offset)&&void 0!==s?s:0)/20,onPageChange:e=>{y({type:"change.page",offset:20*e})},analyticsId:eo,pageSize:20})))},el=(0,b.makeStyles)(e=>(0,b.createStyles)({groupSpaceContentHeader:{borderBottom:`1px solid ${e.palette.border.main}`,padding:e.spacing(2.5,3,1,3)},content:{flex:"1 1 auto",overflowY:"auto",padding:e.spacing(0,2,2,2),[e.breakpoints.up("sm")]:{padding:e.spacing(0,3,3,3)}},groupSpaceListItem:{borderBottom:`1px solid ${e.palette.border.main}`,borderRight:"0px",borderLeft:"0px",borderTop:"0px"},spinnerContainer:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},noContentsMessage:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},contentTitle:{textDecoration:"none",color:e.palette.text.primary},pagination:{paddingBottom:e.spacing(2)},groupSpacePanel:{display:"flex",flexDirection:"column",height:"100%"}})),ec=e=>{let t;switch(P.AaE.getContentHandler(e).handle){case x.DXv.TestLink:t=function(e){var t,n;let i=null===(n=null===(t=e.gradingColumn)||void 0===t?void 0:t.gradebookCategory)||void 0===n?void 0:n.title;return i===x.bu3.Assignment?x.zcD.Assignment:i===x.bu3.Test?x.zcD.Test:x.zcD.DocumentBlank}(e);break;case x.DXv.SurveyLink:t=x.zcD.Survey;break;case x.DXv.Discussion:t=x.zcD.Discussion;break;case x.DXv.LtiLink:t=x.zcD.CollaborativeCloud;break;default:t=x.zcD.DocumentBlank}return{Icon:(0,X.dJ)(t),ariaLabelKey:(0,X.O1)(t)}},ed=(e,t)=>e.id?t?(0,D.sn)({courseId:e.courseId,contentId:e.id,gradeitemView:"details",assessmentType:x.IQK.Test.toLowerCase()}):P.AaE.isExternalSubmissionsAssessment(e)?(0,D.tk)({contentId:e.id}):(0,D.el)({contentId:e.id}):void 0,eu=e=>e&&(e.match(RegExp("courseId=","g"))||[]).length>1?e.replace(/courseId=/,"groupCourseId="):e,ep=({content:e,analyticsId:t})=>{let n=el(),i=(0,R.vD)(e.courseId,["course.assessment.MODIFY","course.assessment.VIEW"]),s=ed(e,i),o=(0,D.Ls)(s);if(void 0===i)return r().createElement("div",null,e.title);let a=eu(o);return r().createElement(p.AnalyticsLink,{analyticsId:`${t}.assignment.link`,className:n.contentTitle,href:a},e.title)},em=({content:e,analyticsId:t})=>{var n;let i=el(),s=eu((0,D.Ls)(D.yf.DiscussionWithGrading({contentId:null!==(n=e.id)&&void 0!==n?n:"",view:"discussions"})));return r().createElement(p.AnalyticsLink,{analyticsId:`${t}.discussion.link`,className:i.contentTitle,href:s},e.title)},eh=({content:e,analyticsId:t})=>{switch(P.AaE.getContentHandler(e).handle){case x.DXv.TestLink:return r().createElement(ep,{content:e,analyticsId:t});case x.DXv.Discussion:return r().createElement(em,{content:e,analyticsId:t});default:return r().createElement("div",null,e.title)}},eg=({Icon:e,titleAccess:t})=>r().createElement(e,{color:"primary",titleAccess:t}),ef=({courseId:e,content:t,groupMemberships:n,analyticsId:i})=>{var s,o,a,l;let c=(0,h.q)(),d=el(),u=ec(t),m=(0,R.aq)(e),g=m&&P.Fce.isStudentMembership(m)?m.id:null===(s=n[0])||void 0===s?void 0:s.id,f=(0,R.Y$)(e,null!==(a=null===(o=t.gradingColumn)||void 0===o?void 0:o.id)&&void 0!==a?a:"",null!=g?g:""),b=null!==(l=null==f?void 0:f.effectiveDueDate)&&void 0!==l?l:function(e){var t,n,i;let r=null!==(n=null===(t=e.gradingColumn)||void 0===t?void 0:t.dueDate)&&void 0!==n?n:null===(i=e.genericReadOnlyData)||void 0===i?void 0:i.dueDate;return r instanceof Date?r:"string"==typeof r?new Date(r):void 0}(t);return r().createElement(p.AnalyticsListItem,{key:t.id,className:d.groupSpaceListItem,analyticsId:i},r().createElement(eg,{Icon:u.Icon,titleAccess:c(u.ariaLabelKey)}),r().createElement(p.AnalyticsListItemText,{analyticsId:`${i}.listItemText`,primary:r().createElement(eh,{content:t,analyticsId:`${i}.listItemText`}),secondary:b&&(null==f?void 0:f.dueDateExceptionType)!==x.BQp.Unlimited?c("courseCore.components.contentItems.dueDate",{date:b}):"",primaryTypographyProps:{variant:"h4"}}))},eb=({courseId:e,contents:t,groupMemberships:n})=>{let i="groupWorkspace.components.groupSpace.list";return r().createElement(p.AnalyticsList,{analyticsId:i},t.map(t=>r().createElement(ef,{courseId:e,content:t,groupMemberships:n,key:t.id,analyticsId:`${i}.listItem`})))},ev="course.groups.group-space-space",ey=({courseId:e})=>{var t,n;let s;let[o,a]=(0,i.useState)(0),l=(0,R.Tn)(e),c=(0,R.pJ)(e=>P.Ys.app.getLocation(e).queryParams.groupId),d=(0,R.pJ)(e=>P.Ys.app.getLocation(e).queryParams.contentId||P.Ys.app.getLocation(e).queryParams.groupContentId),{group:u,groupSet:m}=(0,R.Te)(e,c,!!d),g={courseId:e,filter:{searchString:"",roleBucket:[x.O8v.Taking],groupId:[c]}},[f]=(0,i.useReducer)(et.Y,g),{memberships:v,view:y}=(0,R.d$)(f),S=d||!m?null==l?void 0:l.name:`${null==l?void 0:l.name} \u2022 ${null==m?void 0:m.title}`,C={headerText:null==u?void 0:u.title,subHeaderText:null!=S?S:"",analyticsIdPrefix:`${ev}`,showMenuToggleButton:!0,readyToFocus:!1},E={paging:{limit:10,offset:10*o},sort:[{field:"dueDate",direction:x.SrV.Ascending}]},{contents:I,view:A}=(0,R.gA)({filter:{courseId:e,groupId:c},params:E}),k=el(),T=(0,h.q)();s=!A||A.isLoading||!y||y.isLoading?r().createElement("div",{className:k.spinnerContainer},r().createElement(p.AnalyticsCircularProgress,{ariaLabel:T("global.loading"),size:"medium"})):I.length>0?r().createElement("div",{className:k.content},r().createElement(eb,{courseId:e,contents:I,groupMemberships:v})):r().createElement(p.AnalyticsTypography,{variant:"h4",id:"noContentsMessage",role:"alert",className:k.noContentsMessage},T("course.groupWorkspace.space.noContentsMessage"));let D=(null===(t=null==A?void 0:A.paging)||void 0===t?void 0:t.count)&&(null===(n=null==A?void 0:A.paging)||void 0===n?void 0:n.limit)?Math.ceil(A.paging.count/A.paging.limit):1,L=(0,b.useMediaQuery)(e=>e.breakpoints.down("xs")),$=r().createElement(w.Vdz,{className:k.pagination,analyticsId:ev,page:o,numberOfPages:D,onPageChange:e=>a(e),compact:L}),O=(0,N.Dd)()?null:r().createElement(w.YIP,{...C}),G=r().createElement("div",{className:k.groupSpaceContentHeader},r().createElement(p.AnalyticsTypography,{variant:"h2"},T("course.groupWorkspace.space.title"))),_=null==u?void 0:u.title;return(0,i.useEffect)(()=>{if(!_)return;let e={type:N.Cs.GroupSpaceOpened,status:N.rJ.Success,pageTitle:_};(0,N.Db)(e)},[_]),r().createElement(w.huC,{fixedHeader:!0,header:O,footer:$},r().createElement("div",{className:k.groupSpacePanel},G,s))},eS=e=>{let{tooltipTitle:t,tooltipAnalyticsId:n}=e;return i.createElement(p.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n},i.createElement(j.Upload,null))},eC=e=>{let{tooltipTitle:t,tooltipAnalyticsId:n}=e;return i.createElement(p.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n},i.createElement(j.Download,null))},eE=e=>{let{tooltipTitle:t,analyticsId:n,isTooltipDisabled:r}=e;return i.createElement(p.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n,disableFocusListener:null!=r&&r,disableHoverListener:null!=r&&r},i.createElement(j.Messages,null))},eI=e=>{let{tooltipTitle:t,analyticsId:n}=e;return i.createElement(p.AnalyticsTooltip,{placement:"top",title:t,"aria-label":t,analyticsId:n},i.createElement(j.MoveUser,null))};n(741786);let ew=(e,t,n,r,o,l)=>{let c=n;null==n&&"undefined"!=typeof window&&window.location.search.match("setLang=")&&(c=window.location.search.match(/setLang=([^$&]+)/)[1]),s.render(i.createElement(p.AnalyticsJssThemeProvider,{isRtl:l},i.createElement(a.g,{locale:c,babelfishInstance:r,babelfishFormatInstance:o,bundlesToLoad:["group-workspace/locales/[locale]/group-workspace.json"],isRtl:l},i.createElement("div",null,e))),t)},eA=(e,t,n)=>{ew(i.createElement(o.zt,{store:t},i.createElement(d.Z,{courseId:n.courseId,contentId:n.contentId,contentName:n.contentName,userId:n.userId,root:e,onGroupJoined:n.onGroupJoined,analyticsId:"selfEnrollList"})),e,n.locale,n.babelfishInstance,n.babelfishFormatInstance,n.isRtl)},ek=(e,t,n)=>{ew(i.createElement(o.zt,{store:t},i.createElement(u.Z,{courseId:n.courseId,contentName:n.contentName,userId:n.userId,root:e,onGroupJoined:n.onGroupJoined,analyticsId:"selfEnrollList"})),e,n.locale,n.babelfishInstance,n.babelfishFormatInstance,n.isRtl)},eT=e=>{s.unmountComponentAtNode(e)};var eP={renderGroupSetListPanelComponent:(e,t,n,r,s,a,l,d,u)=>{ew(i.createElement(o.zt,{store:t},i.createElement(c.Z,{courseId:l,root:e,openGroupSetDetailPanel:u,featuresConfig:d,analyticsId:"groupSetList"})),e,n,r,s,a)},renderContentGroupSelfEnrollmentPanelComponent:eA,renderCourseGroupSelfEnrollmentPanelComponent:ek,destroyComponent:eT}},823513:function(e,t,n){"use strict";n.d(t,{ZH:function(){return c},lX:function(){return l},Di:function(){return i},_k:function(){return a},uS:function(){return o},BT:function(){return s}});let i=50,r={};function s(e){let t=e.priority||i;t<0&&(t=i),r[e.name]=t}let o=new class{constructor(){this.components=[],this.guidanceTargets={},this.hasStartedShowing=!1,this.currentShownComponent=null,this.getFirstComponentToShowPromise=null}isComponentRegistered(e){return this.components.indexOf(e)>=0}registerComponent(e){if(this.components.length){var t;let n,s;if(this.isComponentRegistered(e))return;let o=this.components.length-1;for(;0>(t=this.components[o],(n=e.priority||r[e.componentType]||i)<0&&(n=i),(s=t.priority||r[t.componentType]||i)<0&&(s=i),n-s)&&!((o-=1)<0););this.components.splice(o+1,0,e)}else this.components.push(e);let n=this.hasStartedShowing&&!e.isInitialHide,s=this.currentShownComponent||this.getFirstComponentToShowPromise;n&&!s&&this.showGuidanceComponentAsync()}deregisterComponent(e){if(this.getFirstComponentToShowPromise){this.getFirstComponentToShowPromise.then(()=>this.deregisterComponent(e));return}if(!this.isComponentRegistered(e))return;let t=this.components.indexOf(e);this.components.splice(t,1),this.currentShownComponent&&this.currentShownComponent.componentKey===e.componentKey&&(this.currentShownComponent.onHidden(!0),this.onComponentHidden(this.currentShownComponent))}registerTarget(e){let t=this.guidanceTargets[e.componentKey]||[];if(this.guidanceTargets[e.componentKey]=t,(0===t.length||e.multiTargetSupport)&&t.push(e),this.hasStartedShowing&&this.currentShownComponent){let t=this.currentShownComponent.componentKey;e.componentKey===t&&e.onShown()}}deregisterTarget(e){this.guidanceTargets[e.componentKey]=null}startQueue(){this.hasStartedShowing||(this.hasStartedShowing=!0,this.showGuidanceComponentAsync())}stopQueue(){this.hasStartedShowing&&(this.hasStartedShowing=!1,this.currentShownComponent&&(this.currentShownComponent.onHidden(!0),this.hideTargetsForComponent(this.currentShownComponent),this.currentShownComponent=null))}hideComponent(e){this.getFirstComponentToShowPromise?this.getFirstComponentToShowPromise.then(()=>{this.hideComponent(e)}):this.currentShownComponent&&this.currentShownComponent.componentKey===e&&(this.currentShownComponent.onHidden(!1),this.onComponentHidden(this.currentShownComponent))}hideTargetsForComponent(e){let t=this.guidanceTargets[e.componentKey];t&&t.forEach(e=>{e.onHidden()})}showTargetsForComponent(e){let t=this.guidanceTargets[e.componentKey];t&&t.forEach(e=>{e.onShown()})}onComponentHidden(e){this.currentShownComponent===e&&(this.currentShownComponent=null,this.hideTargetsForComponent(e),this.showGuidanceComponentAsync())}showGuidanceComponentAsync(){0!==this.components.length&&(this.getFirstComponentToShowPromise=this.getFirstComponentToShowAsync(0).then(e=>(e&&this.hasStartedShowing&&(this.currentShownComponent=e,e.onShown(),this.showTargetsForComponent(e)),this.getFirstComponentToShowPromise=null,e)))}getFirstComponentToShowAsync(e){return this.components[e].shouldShow().then(t=>t?this.components[e]:e<this.components.length-1?this.getFirstComponentToShowAsync(e+1):null)}},a=new class{constructor(e){this.guidanceManager=e,this.watchers=[],this.addWatcher=e=>{this.watchers.push(e),this.handleStateChange(e.started),e.onStateChanged(this.handleStateChange)},this.removeWatcher=e=>{let t=this.watchers.indexOf(e);-1!==t&&(e.onStateChanged(void 0),this.watchers.splice(t,1))},this.sendStart=()=>{this.handleStateChange(!0)},this.handleStateChange=e=>{if(!e){this.updateGuidanceState(e);return}this.updateGuidanceState(!this.watchers.some(e=>!e.started))},this.updateGuidanceState=e=>{e!==this.startState&&(this.startState=e,e?this.guidanceManager.startQueue():this.guidanceManager.stopQueue())}}}(o),l=35,c="guidance"},11641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(306794),t),i.__exportStar(n(229287),t),i.__exportStar(n(25264),t),i.__exportStar(n(126068),t),i.__exportStar(n(281998),t)},988991:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchApiTaskLocation=t.makeRequestAsync=void 0;let i=n(482532),r=n(231181);async function s(e){let t=(await (0,i.fetchApiResult)(e)).headers.get("Location");if(!t)throw Error("Unable to find task ID in location");return(0,r.getPathParameterValue)(t,"tasks")}t.makeRequestAsync=function(e){return{...e,async:!0}},t.fetchApiTaskLocation=s},809294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAiTaskStatusRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/ai/tasks/%taskId%",e)}}t.LearnGetAiTaskStatusRequest=r},980370:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiTaskStatusGet=void 0;let i=n(482532),r=n(809294);async function s(e,t){let n=new r.LearnGetAiTaskStatusRequest({taskId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.aiTaskStatusGet=s},729872:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAiContentKeywordsRequest=t.LearnAiGenerateQuestionRequest=t.LearnAiGenerateContentSuggestRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/ai/contents/%contentId%/suggest",e)}}t.LearnAiGenerateContentSuggestRequest=r;class s extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/assessments/ai/contents/%contentId%/question",e)}}t.LearnAiGenerateQuestionRequest=s;class o extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/ai/contents/%contentId%/keywords",e)}}t.LearnAiContentKeywordsRequest=o},59022:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiContentKeywordsGet=t.aiGenerateQuestionAsync=t.aiGenerateSuggestionAsync=void 0;let i=n(482532),r=n(988991),s=n(729872);t.aiGenerateSuggestionAsync=function(e,t,n,i){let o=(0,r.makeRequestAsync)(i),a=new s.LearnAiGenerateContentSuggestRequest({courseId:t,contentId:n}).withSession(e).withQueryParams(o);return(0,r.fetchApiTaskLocation)(a)},t.aiGenerateQuestionAsync=function(e,t,n,i){let o=(0,r.makeRequestAsync)(i),a=new s.LearnAiGenerateQuestionRequest({courseId:t,contentId:n}).withSession(e).withBody(o);return(0,r.fetchApiTaskLocation)(a)},t.aiContentKeywordsGet=function(e,t,n,r){let o=new s.LearnAiContentKeywordsRequest({courseId:t,contentId:n}).withSession(e).withBody(null!=r?r:{});return(0,i.fetchJsonApiResult)(o)}},247928:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAiSettingsRequest=void 0;let i=n(459837);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/ai/settings",e)}}t.LearnGetAiSettingsRequest=r},599876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiSettingsGet=void 0;let i=n(482532),r=n(247928);async function s(e,t){let n=new r.LearnGetAiSettingsRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.aiSettingsGet=s},14428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAiBannerKeywordsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/ai/bannerKeywords",e)}}t.LearnGetAiBannerKeywordsRequest=r},450036:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiBannerKeywordsGet=void 0;let i=n(482532),r=n(14428);t.aiBannerKeywordsGet=function(e,t){let n=new r.LearnGetAiBannerKeywordsRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}},213364:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAiGenerateCourseContentImageRequest=t.LearnAiImageDimension=void 0;let s=n(459837);(r=i||(t.LearnAiImageDimension=i={})).Small="256x256",r.Medium="512x512",r.Large="1024x1024";class o extends s.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/ai/contents/%contentId%/images",e)}}t.LearnAiGenerateCourseContentImageRequest=o},299663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiGenerateCourseContentImageAsync=void 0;let i=n(988991),r=n(213364);t.aiGenerateCourseContentImageAsync=function(e,t,n,s){let o=(0,i.makeRequestAsync)(s),a=new r.LearnAiGenerateCourseContentImageRequest({courseId:t,contentId:n}).withSession(e).withBody(o);return(0,i.fetchApiTaskLocation)(a)}},684428:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseContentAiOutlineRequest=t.OutlineType=void 0;let s=n(25264);(r=i||(t.OutlineType=i={})).Topics="Topics",r.Units="Units",r.Weeks="Weeks",r.Chapters="Chapters",r.Modules="Modules";class o extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/ai/outline",e)}}t.LearnCourseContentAiOutlineRequest=o},313181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiCourseContentOutlineGetAsync=void 0;let i=n(988991),r=n(684428);async function s(e,t,n){let s=(0,i.makeRequestAsync)(n),o=new r.LearnCourseContentAiOutlineRequest({courseId:t}).withSession(e).withQueryParams(s);return(0,i.fetchApiTaskLocation)(o)}t.aiCourseContentOutlineGetAsync=s},96220:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseAiAssessmentRubricRequest=t.LearnCourseAiRubricRequest=t.LearnAiRubricType=void 0;let s=n(25264);(r=i||(t.LearnAiRubricType=i={})).Percentage="Percentage",r.PercentageRange="PercentageRange",r.Points="Points",r.PointsRange="PointsRange";class o extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/rubrics/ai/rubric",e)}}t.LearnCourseAiRubricRequest=o;class a extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/assessments/ai/assessments/%assessmentId%/rubric",e)}}t.LearnCourseAiAssessmentRubricRequest=a},219129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiCourseRubricForAssessmentGetAsync=t.aiCourseRubricGetAsync=void 0;let i=n(988991),r=n(96220);async function s(e,t,n){let s=(0,i.makeRequestAsync)(n),o=new r.LearnCourseAiRubricRequest({courseId:t}).withSession(e).withQueryParams(s);return(0,i.fetchApiTaskLocation)(o)}async function o(e,t,n,s){let o=(0,i.makeRequestAsync)(s),a=new r.LearnCourseAiAssessmentRubricRequest({courseId:t,assessmentId:n}).withSession(e).withQueryParams(o);return(0,i.fetchApiTaskLocation)(a)}t.aiCourseRubricGetAsync=s,t.aiCourseRubricForAssessmentGetAsync=o},674806:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineType=t.LearnAiImageDimension=void 0;let i=n(122970);i.__exportStar(n(980370),t),i.__exportStar(n(988991),t),i.__exportStar(n(599876),t),i.__exportStar(n(59022),t),i.__exportStar(n(450036),t),i.__exportStar(n(299663),t);var r=n(213364);Object.defineProperty(t,"LearnAiImageDimension",{enumerable:!0,get:function(){return r.LearnAiImageDimension}});var s=n(684428);Object.defineProperty(t,"OutlineType",{enumerable:!0,get:function(){return s.OutlineType}}),i.__exportStar(n(313181),t),i.__exportStar(n(96220),t),i.__exportStar(n(219129),t)},811341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCreateAnnouncementRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(){super("/v1/announcements")}}t.LearnCreateAnnouncementRequest=r},729364:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.announcementCreate=void 0;let i=n(482532),r=n(811341);async function s(e,t){let n=new r.LearnCreateAnnouncementRequest().withSession(e).withBody(t);return(0,i.fetchJsonApiResult)(n)}t.announcementCreate=s},957693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(811341),t),i.__exportStar(n(729364),t)},249267:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(243801),t),i.__exportStar(n(466764),t)},243801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetXSRFTokenRequest=t.LearnLoginRequest=t.LearnGetLogin=void 0;let i=n(25264);class r extends i.LearnGetRequest{constructor(){super("")}}t.LearnGetLogin=r;class s extends i.LearnPostFormRequest{constructor(){super("/webapps/login/")}getRequestInit(){return Object.assign(super.getRequestInit(),{redirect:"manual"})}async failed(e){e.status>=300&&e.status<=399||await super.failed(e)}}t.LearnLoginRequest=s;class o extends i.LearnApiGetRequest{constructor(){super("/v1/utilities/xsrfToken")}}t.LearnGetXSRFTokenRequest=o},466764:function(e,t,n){"use strict";var i=n(348834).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createSession=t.getXsrfToken=t.getUserCookie=void 0;let r=n(482532),s=n(243801),o=/name='blackboard\.platform\.security\.NonceUtil\.nonce' value='(.*)'/,a=/name="blackboard\.platform\.security\.NonceUtil\.nonce\.ajax" value="(.*)"/;function l(e){var t;return null!==(t=null==e?void 0:e[1])&&void 0!==t?t:""}async function c(e,t){var n;let c;let d={userName:e,xsrfToken:"",cookies:""},u=new s.LearnGetLogin().withSession(d),p=await (0,r.fetchTextApiResult)(u),m=(n=p,l(c=a.exec(n))||l(c=o.exec(n))),h=new s.LearnLoginRequest().withSession(d).withBody({user_id:e,action:"login",encoded_pw:i.from(t).toString("base64"),password:t,[o.test(p)?"blackboard.platform.security.NonceUtil.nonce":"blackboard.platform.security.NonceUtil.nonce.ajax"]:m});return await (0,r.fetchTextApiResult)(h),d}async function d(e){let t=new s.LearnGetXSRFTokenRequest().withSession(e);return(await (0,r.fetchJsonApiResult)(t)).xsrfToken}async function u(e,t){let n=await c(e,t),i=await d(n);return n.xsrfToken=i,n}t.getUserCookie=c,t.getXsrfToken=d,t.createSession=u},376791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPutBatchRequest=void 0;let i=n(25264);class r extends i.LearnApiPutRequest{constructor(){super("v1/utilities/batch")}}t.LearnPutBatchRequest=r},483446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeBatchRequest=void 0;let i=n(482532),r=n(25264),s=n(376791);async function o(e,t){let n=t.map(e=>({method:e.method,relativeUrl:e.getRelativeUrl(),body:e instanceof r.LearnApiRequestWithBody?e.getBody():void 0})),o=new s.LearnPutBatchRequest().withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(o)}t.makeBatchRequest=o},932299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(376791),t),i.__exportStar(n(483446),t)},666239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetCloudStorageTaskStatusRequest=t.LearnGetCloudStorageItemDownloadRequest=t.LearnGetCloudStorageItemInfoRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%",e)}}t.LearnGetCloudStorageItemInfoRequest=r;class s extends i.LearnApiGetFieldsRequest{constructor(e){super("/v1/cloudstorages/%serviceId%/contents/%contentId%/download",e)}}t.LearnGetCloudStorageItemDownloadRequest=s;class o extends i.LearnApiGetFieldsRequest{constructor(e){super("/v1/cloudstorages/tasks/%taskId%",e)}}t.LearnGetCloudStorageTaskStatusRequest=o},18444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloudStorageTaskStatusGet=t.cloudStorageContentDownloadGet=t.cloudStorageContentGet=void 0;let i=n(482532),r=n(666239);async function s(e,t,n,s){let o=new r.LearnGetCloudStorageItemInfoRequest({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:s});return(0,i.fetchJsonApiResult)(o)}async function o(e,t,n,s){let o=new r.LearnGetCloudStorageItemDownloadRequest({serviceId:t,contentId:n}).withSession(e).withQueryParams({accessToken:s}).withExpand("isMedia","mimeType");return(0,i.fetchJsonApiResult)(o)}async function a(e,t,n){let s=new r.LearnGetCloudStorageTaskStatusRequest({taskId:t}).withSession(e).withQueryParams({accessToken:n}).withExpand("isMedia","mimeType");return(0,i.fetchJsonApiResult)(s)}t.cloudStorageContentGet=s,t.cloudStorageContentDownloadGet=o,t.cloudStorageTaskStatusGet=a},739378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(666239),t),i.__exportStar(n(18444),t)},117793:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAdaptiveReleaseRulesRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules",e)}}t.LearnGetAdaptiveReleaseRulesRequest=r},40373:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adaptiveReleaseRulesGet=void 0;let i=n(482532),r=n(117793);async function s(e,t,n,s){let o=new r.LearnGetAdaptiveReleaseRulesRequest({courseId:t,contentId:n}).withSession(e).withPaging(s);return(0,i.fetchJsonApiResult)(o)}t.adaptiveReleaseRulesGet=s},741890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(40373),t),i.__exportStar(n(117793),t)},165770:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetCourseAnnouncementCountsRequest=t.LearnUpdateAnnouncemementReadStatus=t.LearnUpdateCourseAnnouncementRequest=t.LearnGetCourseAnnouncementRequest=t.LearnDeleteCourseAnnouncementRequest=t.LearnCreateCourseAnnouncementRequest=t.LearnGetCourseAnnouncementsRequest=t.LearnCourseAnnouncementSortField=void 0;let s=n(25264);(r=i||(t.LearnCourseAnnouncementSortField=i={})).Title="title",r.StartDateRestriction="startDateRestriction",r.ModifiedDate="modifiedDate",r.Status="status",r.ReadCount="readCount";class o extends s.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}t.LearnGetCourseAnnouncementsRequest=o;class a extends s.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}t.LearnCreateCourseAnnouncementRequest=a;class l extends s.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}t.LearnDeleteCourseAnnouncementRequest=l;class c extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}t.LearnGetCourseAnnouncementRequest=c;class d extends s.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}t.LearnUpdateCourseAnnouncementRequest=d;class u extends s.LearnApiPutRequest{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%/status",e)}}t.LearnUpdateAnnouncemementReadStatus=u;class p extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/announcements/counts",e)}}t.LearnGetCourseAnnouncementCountsRequest=p},794213:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseAnnouncementReadStatusUpdate=t.courseAnnouncementCountsGet=t.courseAnnouncementUpdate=t.courseAnnouncementGet=t.courseAnnouncementDelete=t.courseAnnouncementCreate=t.courseAnnouncementsGet=void 0;let i=n(482532),r=n(165770);async function s(e,t,n,s){let o=new r.LearnGetCourseAnnouncementsRequest({courseId:t}).withSession(e).withPaging(n);return s&&o.withSort(...s),(0,i.fetchJsonApiResult)(o)}async function o(e,t,n){let s=new r.LearnCreateCourseAnnouncementRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function a(e,t,n){let s=new r.LearnDeleteCourseAnnouncementRequest({courseId:t,announcementId:n}).withSession(e);await (0,i.fetchApiResult)(s)}async function l(e,t,n){let s=new r.LearnGetCourseAnnouncementRequest({courseId:t,announcementId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function c(e,t,n,s){let o=new r.LearnUpdateCourseAnnouncementRequest({courseId:t,announcementId:n}).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}async function d(e,t){let n=new r.LearnGetCourseAnnouncementCountsRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function u(e,t,n,s){let o=new r.LearnUpdateAnnouncemementReadStatus({courseId:t,announcementId:n}).withSession(e).withBody({isRead:s});await (0,i.fetchJsonApiResult)(o)}t.courseAnnouncementsGet=s,t.courseAnnouncementCreate=o,t.courseAnnouncementDelete=a,t.courseAnnouncementGet=l,t.courseAnnouncementUpdate=c,t.courseAnnouncementCountsGet=d,t.courseAnnouncementReadStatusUpdate=u},952700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(794213),t),i.__exportStar(n(165770),t)},34748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAttemptLogRequest=void 0;let i=n(459837);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/assessments/attempts/%attemptId%/log",e)}}t.LearnGetAttemptLogRequest=r},377222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptLogGetData=void 0;let i=n(482532),r=n(34748);async function s(e,t,n){let s=new r.LearnGetAttemptLogRequest({courseId:t,attemptId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)}t.attemptLogGetData=s},482974:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAiGenerateAuthenticAssessmentRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/assessments/ai/contents/%contentId%/authenticAssessments",e)}}t.LearnAiGenerateAuthenticAssessmentRequest=r},237053:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiGenerateAuthenticAssessmentsAsync=void 0;let i=n(674806),r=n(482974);t.aiGenerateAuthenticAssessmentsAsync=function(e,t,n,s){let o=(0,i.makeRequestAsync)(s),a=new r.LearnAiGenerateAuthenticAssessmentRequest({courseId:t,contentId:n}).withSession(e).withQueryParams(o);return(0,i.fetchApiTaskLocation)(a)}},737505:function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUpdateCourseAssessmentRequest=t.LearnCreateCourseAssessmentRequest=t.LearnDeleteCourseAssessmentRequest=t.LearnGetCourseAssessmentRequest=t.LearnGetCourseAssessmentsRequest=t.AssessmentExpandFields=t.AssessmentHasExternallyRefQuestionError=t.ASSESSMENT_CONFLICT_NOT_ENOUGH_PEER_REVIEWS=t.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE=void 0;let r=n(482532),s=n(453626),o=n(25264);t.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE="bb-assessment-conflict-external-referenced-questions",t.ASSESSMENT_CONFLICT_NOT_ENOUGH_PEER_REVIEWS="bb-assessment-conflict-not-enough-peer-reviews";class a extends s.ResponseError{constructor(e){super(t.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE,r.HttpStatus.Conflict,e)}}t.AssessmentHasExternallyRefQuestionError=a,(i||(t.AssessmentExpandFields=i={})).ExternalQuestions="hasExternallyReferencedQuestions";class l extends o.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/assessments",e)}}t.LearnGetCourseAssessmentsRequest=l;class c extends o.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}}t.LearnGetCourseAssessmentRequest=c;class d extends o.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}async failed(e){let n=await e.json();if(e.status===r.HttpStatus.Conflict&&n.code===t.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE)throw new a(this.path);await super.failed(e)}}t.LearnDeleteCourseAssessmentRequest=d;class u extends o.LearnApiPostRequest{constructor(e){super("v1/courses/%courseId%/assessments",e)}}t.LearnCreateCourseAssessmentRequest=u;class p extends o.LearnApiPatchRequest{constructor(e){super("v1/courses/%courseId%/assessments/%assessmentId%",e)}}t.LearnUpdateCourseAssessmentRequest=p},987821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseAssessmentUpdate=t.courseAssessmentCreate=t.courseAssessmentDelete=t.courseAssessmentGet=t.courseAssessmentsGet=void 0;let i=n(482532),r=n(737505);async function s(e,t,n){let s=new r.LearnGetCourseAssessmentsRequest({courseId:t}).withSession(e).withPaging(n);return(0,i.fetchJsonApiResult)(s)}async function o(e,t,n){let s=new r.LearnGetCourseAssessmentRequest({courseId:t,assessmentId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function a(e,t,n){let s=new r.LearnDeleteCourseAssessmentRequest({courseId:t,assessmentId:n}).withSession(e);await (0,i.fetchApiResult)(s)}async function l(e,t,n){let s=new r.LearnCreateCourseAssessmentRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function c(e,t,n,s){let o=new r.LearnUpdateCourseAssessmentRequest({courseId:t,assessmentId:n}).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}t.courseAssessmentsGet=s,t.courseAssessmentGet=o,t.courseAssessmentDelete=a,t.courseAssessmentCreate=l,t.courseAssessmentUpdate=c},383646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(237053),t),i.__exportStar(n(482974),t),i.__exportStar(n(987821),t),i.__exportStar(n(737505),t),i.__exportStar(n(377222),t),i.__exportStar(n(34748),t)},167218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCreateCourseAttendanceGradeColumnRequest=t.LearnCreateCourseAttendanceMeetingRecordsRequest=t.LearnCreateCourseAttendanceMeetingRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%",s=`${r}/meetings`,o=`${r}/attendanceRecords/meetings/%meetingId%/bulk`,a=`${r}/attendance/gradebook`;class l extends i.LearnApiPostRequest{constructor(e){super(s,e)}}t.LearnCreateCourseAttendanceMeetingRequest=l;class c extends i.LearnApiPostRequest{constructor(e){super(o,e)}}t.LearnCreateCourseAttendanceMeetingRecordsRequest=c;class d extends i.LearnApiPutRequest{constructor(e){super(a,e)}}t.LearnCreateCourseAttendanceGradeColumnRequest=d},613497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseAttendanceGradebookColumnCreate=t.courseAttendanceMeetingRecordsCreate=t.courseAttendanceMeetingCreate=void 0;let i=n(167218),r=n(482532);async function s(e,t,n){let s=new i.LearnCreateCourseAttendanceMeetingRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function o(e,t,n){let s=new i.LearnCreateCourseAttendanceMeetingRecordsRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function a(e,t,n){let s=new i.LearnCreateCourseAttendanceGradeColumnRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.courseAttendanceMeetingCreate=s,t.courseAttendanceMeetingRecordsCreate=o,t.courseAttendanceGradebookColumnCreate=a},900818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(613497),t),i.__exportStar(n(167218),t)},585931:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCreateOfficeHoursRequest=t.LearnCreateCourseCalendarItemRequest=t.LearnCreateCourseScheduleRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/schedule",e)}}t.LearnCreateCourseScheduleRequest=r;class s extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/calendars/calendarItems",e)}}t.LearnCreateCourseCalendarItemRequest=s;class o extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/officeHours",e)}}t.LearnCreateOfficeHoursRequest=o},16799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.officeHoursCreate=t.courseCalendarItemCreate=t.courseScheduleCreate=void 0;let i=n(482532),r=n(585931);async function s(e,t,n){let s=new r.LearnCreateCourseScheduleRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function o(e,t,n){let s=new r.LearnCreateCourseCalendarItemRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function a(e,t,n,s){let o=new r.LearnCreateOfficeHoursRequest({courseId:t,userId:n}).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}t.courseScheduleCreate=s,t.courseCalendarItemCreate=o,t.officeHoursCreate=a},421826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(16799),t),i.__exportStar(n(585931),t)},620883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseContentReviewStateUsersReportStatesRequest=t.LearnCourseContentReviewStateUsersRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users",e)}}t.LearnCourseContentReviewStateUsersRequest=r;class s extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users/reports/states",e)}}t.LearnCourseContentReviewStateUsersReportStatesRequest=s},311890:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCreateCourseContentScormSettingsRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/scormSettings",e)}}t.LearnCreateCourseContentScormSettingsRequest=r},596780:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseContentCreateScormSettings=void 0;let i=n(482532),r=n(311890);async function s(e,t,n){let s=new r.LearnCreateCourseContentScormSettingsRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}t.courseContentCreateScormSettings=s},502119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetContentReferencesCount=t.LearnGetCourseContentsByGroupIdRequest=t.LearnCourseContentUpdateProgressRequest=t.LearnCourseContentUpdateGroupsRequest=t.LearnCourseContentUpdateGoalsRequest=t.LearnCourseContentPatchRequest=t.LearnCourseContentUpdateAvailabilityRequest=t.LearnCreateCourseContentAdaptiveReleaseRulesRequest=t.LearnGetCourseContent=t.LearnGetCourseContentsRequest=t.LearnCreateCourseContentRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/contents",e)}}t.LearnCreateCourseContentRequest=r;class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/contents",e)}}t.LearnGetCourseContentsRequest=s;class o extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%",e)}}t.LearnGetCourseContent=o;class a extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules",e)}}t.LearnCreateCourseContentAdaptiveReleaseRulesRequest=a;class l extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%",e)}}t.LearnCourseContentUpdateAvailabilityRequest=l;class c extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%",e)}}t.LearnCourseContentPatchRequest=c;class d extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%",e)}}t.LearnCourseContentUpdateGoalsRequest=d;class u extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%",e)}}t.LearnCourseContentUpdateGroupsRequest=u;class p extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/states/me",e)}}t.LearnCourseContentUpdateProgressRequest=p;class m extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/groups/%groupId%/contents",e)}}t.LearnGetCourseContentsByGroupIdRequest=m;class h extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/resources/%resourceXid%/countReferences",e)}}t.LearnGetContentReferencesCount=h},150540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentGetReferencesCount=t.courseGetContentsByGroupId=t.courseContentUpdateProgress=t.courseContentUpdateGroups=t.courseContentUpdateGoals=t.courseContentUpdate=t.updateCourseContentAvailability=t.courseCreateContentAdaptiveReleaseRules=t.courseGetContents=t.courseGetContent=t.courseCreateContent=void 0;let i=n(502119),r=n(482532);async function s(e,t,n){let s=new i.LearnCreateCourseContentRequest(t).withBody(n).withSession(e);return(0,r.fetchJsonApiResult)(s)}async function o(e,t){let n=new i.LearnGetCourseContent(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function a(e,t){let n=new i.LearnGetCourseContentsRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function l(e,t,n){let s=new i.LearnCreateCourseContentAdaptiveReleaseRulesRequest(t).withBody(n).withSession(e);return(0,r.fetchJsonApiResult)(s)}async function c(e,t,n){let s=new i.LearnCourseContentUpdateAvailabilityRequest(t).withSession(e).withBody(n).withQueryParams({fields:"id"});return(0,r.fetchJsonApiResult)(s)}async function d(e,t,n){let s=new i.LearnCourseContentPatchRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function u(e,t,n){let s=new i.LearnCourseContentUpdateGoalsRequest(t).withSession(e).withBody(n).withQueryParams({expand:"alignedGoals"});return(0,r.fetchJsonApiResult)(s)}async function p(e,t,n){let s=new i.LearnCourseContentUpdateGroupsRequest(t).withSession(e).withBody(n).withQueryParams({expand:"assignedGroups"});return(0,r.fetchJsonApiResult)(s)}async function m(e,t,n){let s=new i.LearnCourseContentUpdateProgressRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function h(e,t,n){let s=new i.LearnGetCourseContentsByGroupIdRequest(t).withSession(e);return(null==n?void 0:n.paging)&&s.withPaging(n.paging),(null==n?void 0:n.sort)&&s.withSort(...n.sort),(0,r.fetchJsonApiResult)(s)}t.courseCreateContent=s,t.courseGetContent=o,t.courseGetContents=a,t.courseCreateContentAdaptiveReleaseRules=l,t.updateCourseContentAvailability=c,t.courseContentUpdate=d,t.courseContentUpdateGoals=u,t.courseContentUpdateGroups=p,t.courseContentUpdateProgress=m,t.courseGetContentsByGroupId=h,t.contentGetReferencesCount=function(e,t){let n=new i.LearnGetContentReferencesCount(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}},723544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(620883),t),i.__exportStar(n(596780),t),i.__exportStar(n(311890),t),i.__exportStar(n(150540),t),i.__exportStar(n(502119),t)},554516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCreateCourseConversationReplyRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/conversations/%conversationId%/messages",e)}}t.LearnCreateCourseConversationReplyRequest=r},889301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conversationCreateReplyMessage=void 0;let i=n(482532),r=n(554516);async function s(e,t,n){let s=new r.LearnCreateCourseConversationReplyRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}t.conversationCreateReplyMessage=s},437985:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(889301),t),i.__exportStar(n(554516),t)},214561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteCourseRequest=t.LearnUpdateCourseRequest=t.LearnGetCourseRequest=t.LearnCreateCourseRequest=t.LearnGetCoursesRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(){super("/v1/courses")}}t.LearnGetCoursesRequest=r;class s extends i.LearnApiPostRequest{constructor(){super("/v1/courses")}}t.LearnCreateCourseRequest=s;class o extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%",e)}}t.LearnGetCourseRequest=o;class a extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%",e)}}t.LearnUpdateCourseRequest=a;class l extends i.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%",e)}}t.LearnDeleteCourseRequest=l},184363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseDelete=t.courseUpdate=t.courseGet=t.courseCreate=t.coursesGet=void 0;let i=n(482532),r=n(214561);async function s(e,t){let n=new r.LearnGetCoursesRequest().withSession(e);return(null==t?void 0:t.paging)&&n.withPaging(t.paging),(null==t?void 0:t.sort)&&(Array.isArray(t.sort)?n.withSort(...t.sort):n.withSort(t.sort)),(0,i.fetchJsonApiResult)(n)}async function o(e,t){let n=new r.LearnCreateCourseRequest().withSession(e).withBody(t);return(0,i.fetchJsonApiResult)(n)}async function a(e,t){let n=new r.LearnGetCourseRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function l(e,t,n){let s=new r.LearnUpdateCourseRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function c(e,t){let n=new r.LearnDeleteCourseRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.coursesGet=s,t.courseCreate=o,t.courseGet=a,t.courseUpdate=l,t.courseDelete=c},870295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAiGenerateDiscussionRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/discussionboards/ai/contents/%contentId%/discussion",e)}}t.LearnAiGenerateDiscussionRequest=r},71039:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiGenerateDiscussionsAsync=void 0;let i=n(988991),r=n(870295);t.aiGenerateDiscussionsAsync=function(e,t,n,s){let o=(0,i.makeRequestAsync)(s),a=new r.LearnAiGenerateDiscussionRequest({courseId:t,contentId:n}).withSession(e).withQueryParams(o);return(0,i.fetchApiTaskLocation)(a)}},85217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseContentPatchForumCommentRequest=t.LearnCourseContentCreateForumCommentRequest=t.LearnCourseContentCreateForumRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages",e)}}t.LearnCourseContentCreateForumRequest=r;class s extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/replies",e)}}t.LearnCourseContentCreateForumCommentRequest=s;class o extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%",e)}}t.LearnCourseContentPatchForumCommentRequest=o},105388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.discussionForumCommentUpdate=t.discussionForumCommentCreate=t.discussionCreateForum=void 0;let i=n(482532),r=n(306794),s=n(85217);async function o(e,t,n){let r=new s.LearnCourseContentCreateForumRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(r)}async function a(e,t,n,s){let o=new r.LearnCourseContentCreateForumCommentRequest(t).withSession(e).withQueryParams(s).withBody(n);return(0,i.fetchJsonApiResult)(o)}async function l(e,t,n){let s=new r.LearnCourseContentPatchForumCommentRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}t.discussionCreateForum=o,t.discussionForumCommentCreate=a,t.discussionForumCommentUpdate=l},803057:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseUpdateDiscussionSettingsRequest=void 0;let i=n(25264);class r extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/discussionboards/settings",e)}}t.LearnCourseUpdateDiscussionSettingsRequest=r},22009:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCourseDiscussionSettings=void 0;let i=n(482532),r=n(803057);async function s(e,t,n){let s=new r.LearnCourseUpdateDiscussionSettingsRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}t.updateCourseDiscussionSettings=s},811805:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(71039),t),i.__exportStar(n(870295),t),i.__exportStar(n(105388),t),i.__exportStar(n(85217),t),i.__exportStar(n(22009),t),i.__exportStar(n(803057),t)},175929:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnImportGroupsAndMembersRequest=t.LearnDeleteExportedFileRequest=t.LearnGetExportedGroupSetFilesRequest=t.LearnGroupSetExportRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}t.LearnGroupSetExportRequest=r;class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}t.LearnGetExportedGroupSetFilesRequest=s;class o extends i.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}t.LearnDeleteExportedFileRequest=o;class a extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/groupsets/import",e)}}t.LearnImportGroupsAndMembersRequest=a},89603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.importGroupsAndMembers=t.deleteExportedFiles=t.getExportedFiles=t.exportGroupSet=void 0;let i=n(482532),r=n(175929);async function s(e,t,n,s){let o=new r.LearnGroupSetExportRequest({courseId:t,groupSetId:n}).withSession(e).withBody(s);return(0,i.fetchApiResult)(o)}async function o(e,t,n,s){let o=new r.LearnGetExportedGroupSetFilesRequest({courseId:t,groupSetId:n}).withSession(e);return s.paging&&o.withPaging(s.paging),s.sort&&o.withSort(...s.sort),(0,i.fetchJsonApiResult)(o)}async function a(e,t,n,s){let o=new r.LearnDeleteExportedFileRequest({courseId:t,groupSetId:n}).withSession(e).withQueryParams(s);return(0,i.fetchApiResult)(o)}async function l(e,t,n){let s=new r.LearnImportGroupsAndMembersRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchApiResult)(s)}t.exportGroupSet=s,t.getExportedFiles=o,t.deleteExportedFiles=a,t.importGroupsAndMembers=l},89619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUpdateCourseGroupRequest=t.LearnPatchCourseGroupsByContentRequest=t.LearnGetCourseGroupsByGroupSetRequest=t.LearnGetCourseGroupsByContentRequest=t.LearnPostCourseGroupRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%",s=`${r}/groups`,o=`${r}/contents/%contentId%`,a=`${r}/groupsets/%groupSetId%`,l=`${o}/assignedGroups`,c=`${a}/groups`,d=`${s}/%groupId%`;class u extends i.LearnApiPostRequest{constructor(e){super(s,e)}}t.LearnPostCourseGroupRequest=u;class p extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(l,e)}}t.LearnGetCourseGroupsByContentRequest=p;class m extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(c,e)}}t.LearnGetCourseGroupsByGroupSetRequest=m;class h extends i.LearnApiPatchRequest{constructor(e){super(o,e)}}t.LearnPatchCourseGroupsByContentRequest=h;class g extends i.LearnApiPatchRequest{constructor(e){super(d,e)}}t.LearnUpdateCourseGroupRequest=g},639979:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostCourseGroupSetRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/groupsets",e)}}t.LearnPostCourseGroupSetRequest=r},53286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupSet=void 0;let i=n(639979),r=n(482532);async function s(e,t,n){let s=new i.LearnPostCourseGroupSetRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.createGroupSet=s},721177:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCourseGroup=t.updateGroupsByCourseIdAndContentId=t.getGroupsByGroupSetIdAndQuery=t.getGroupsByContentIdAndQuery=t.createCourseGroup=void 0;let i=n(482532),r=n(89619);async function s(e,t,n){let s=new r.LearnPostCourseGroupRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function o(e,t){var n,s,o;let a=new r.LearnGetCourseGroupsByContentRequest({courseId:t.courseId,contentId:t.contentId}).withSession(e),l=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return a.withPaging(l),t.expand&&a.withExpand(t.expand),a.withQueryParams({submissionStatus:null===(s=t.filter)||void 0===s?void 0:s.submissionStatus,gradingStatus:null===(o=t.filter)||void 0===o?void 0:o.gradingStatus,includeCount:!0}),(0,i.fetchJsonApiResult)(a)}async function a(e,t){var n;let s=new r.LearnGetCourseGroupsByGroupSetRequest({courseId:t.courseId,groupSetId:t.groupSetId}).withSession(e),o=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return s.withPaging(o),t.expand&&s.withExpand(...t.expand),t.sort&&s.withSort(...t.sort),(0,i.fetchJsonApiResult)(s)}async function l(e,t,n){let s=new r.LearnPatchCourseGroupsByContentRequest(t).withSession(e).withBody(n).withQueryParams({expand:"assignedGroups"});return(0,i.fetchJsonApiResult)(s)}async function c(e,t,n,s){let o=new r.LearnUpdateCourseGroupRequest({courseId:t,groupId:n}).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}t.createCourseGroup=s,t.getGroupsByContentIdAndQuery=o,t.getGroupsByGroupSetIdAndQuery=a,t.updateGroupsByCourseIdAndContentId=l,t.updateCourseGroup=c},492146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(721177),t),i.__exportStar(n(89603),t),i.__exportStar(n(175929),t),i.__exportStar(n(89619),t),i.__exportStar(n(53286),t),i.__exportStar(n(639979),t)},797585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(741890),t),i.__exportStar(n(952700),t),i.__exportStar(n(383646),t),i.__exportStar(n(900818),t),i.__exportStar(n(421826),t),i.__exportStar(n(723544),t),i.__exportStar(n(437985),t),i.__exportStar(n(879250),t),i.__exportStar(n(214561),t),i.__exportStar(n(184363),t),i.__exportStar(n(811805),t),i.__exportStar(n(492146),t),i.__exportStar(n(706100),t),i.__exportStar(n(505295),t),i.__exportStar(n(851214),t),i.__exportStar(n(832395),t),i.__exportStar(n(175238),t),i.__exportStar(n(177513),t),i.__exportStar(n(798936),t),i.__exportStar(n(609659),t),i.__exportStar(n(827666),t),i.__exportStar(n(973179),t),i.__exportStar(n(784111),t),i.__exportStar(n(982905),t)},244844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAiGenerateJournalRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/journals/ai/contents/%contentId%/journal",e)}}t.LearnAiGenerateJournalRequest=r},193783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aiGenerateJournalsAsync=void 0;let i=n(988991),r=n(244844);t.aiGenerateJournalsAsync=function(e,t,n,s){let o=(0,i.makeRequestAsync)(s),a=new r.LearnAiGenerateJournalRequest({courseId:t,contentId:n}).withSession(e).withQueryParams(o);return(0,i.fetchApiTaskLocation)(a)}},699080:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CourseJournalCommentPostRequest=t.CourseJournalEntryPostRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/journals/%journalId%/entries",s=`${r}/%entryId%/comments`;class o extends i.LearnApiPostRequest{constructor(e){super(r,e)}}t.CourseJournalEntryPostRequest=o;class a extends i.LearnApiPostRequest{constructor(e){super(s,e)}}t.CourseJournalCommentPostRequest=a},132866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateJournalRubricAssociation=t.journalEntryCommentPost=t.journalEntryPost=void 0;let i=n(482532),r=n(699080),s=n(227363);async function o(e,t,n){let s=new r.CourseJournalEntryPostRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function a(e,t,n){let s=new r.CourseJournalCommentPostRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function l(e,t,n,r){let o=new s.GradebookColumnsRubricAssociationRequest(t).withSession(e).withBody(n);return(null==r?void 0:r.length)&&(o=o.withExpand(...r)),(0,i.fetchJsonApiResult)(o)}t.journalEntryPost=o,t.journalEntryCommentPost=a,t.updateJournalRubricAssociation=l},706100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(132866),t),i.__exportStar(n(699080),t),i.__exportStar(n(193783),t),i.__exportStar(n(244844),t)},339549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCanForcedSequeceBeEnabled=t.LearnGetSoftLinksRequest=t.LearnHasCourseLinksRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/contents",s=r+"/%contentId%/hasCourseLinks",o=r+"/%contentId%/softLinks",a=r+"/%contentId%/canForcedSequenceBeEnabled";class l extends i.LearnApiGetRequest{constructor(e){super(s,e)}}t.LearnHasCourseLinksRequest=l;class c extends i.LearnApiGetRequest{constructor(e){super(o,e)}}t.LearnGetSoftLinksRequest=c;class d extends i.LearnApiGetRequest{constructor(e){super(a,e)}}t.LearnCanForcedSequeceBeEnabled=d},174876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canForcedSequenceBeEnabled=t.getSoftLinks=t.hasCourseLinks=void 0;let i=n(482532),r=n(339549);t.hasCourseLinks=function(e,t){let n=new r.LearnHasCourseLinksRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)},t.getSoftLinks=function(e,t){let n=new r.LearnGetSoftLinksRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)},t.canForcedSequenceBeEnabled=function(e,t){let n=new r.LearnCanForcedSequeceBeEnabled(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}},505295:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(174876),t),i.__exportStar(n(339549),t)},896401:function(e,t,n){"use strict";var i,r,s,o,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteCourseMembershipRequest=t.LearnUpdateCourseMembershipRequest=t.LearnGetCourseMembershipRequest=t.LearnGetCourseMembershipsFieldsRequest=t.LearnGetCourseMembershipsRequest=t.LearnGetCourseMembershipCountsRequest=t.LearnCreateCourseMembershipRequest=t.LearnCourseMembershipSortField=t.LearnCourseMembershipSearchField=t.LearnCourseMembershipExpandField=void 0;let c=n(25264);(o=i||(t.LearnCourseMembershipExpandField=i={})).User="user",o.DefaultReconciler="defaultReconciler",(a=r||(t.LearnCourseMembershipSearchField=r={})).FamilyName="familyName",a.GivenName="givenName",a.UserName="userName",(l=s||(t.LearnCourseMembershipSortField=s={})).CourseId="course.courseId",l.DisplayOrder="displayOrder",l.EnrollmentDate="enrollmentDate",l.FamilyName="user.familyName",l.GivenName="user.givenName",l.Id="id",l.LastAccessDate="lastAccessDate",l.Role="role",l.Username="user.userName",l.StudentId="user.studentId",l.IsPreviewStudent="isPreviewStudent",l.Grade="grade",l.LastAttemptDate="lastAttemptDate",l.Post="postStatus",l.Feedback="feedbackStatus",l.SubmissionStatus="submissionStatus",l.GradingStatus="gradingStatus",l.NeedsGrading="needsGrading";class d extends c.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}t.LearnCreateCourseMembershipRequest=d;class u extends c.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/memberships/counts",e)}}t.LearnGetCourseMembershipCountsRequest=u;class p extends c.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}t.LearnGetCourseMembershipsRequest=p;class m extends c.LearnApiGetFieldsRequest{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}t.LearnGetCourseMembershipsFieldsRequest=m;class h extends c.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}t.LearnGetCourseMembershipRequest=h;class g extends c.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}t.LearnUpdateCourseMembershipRequest=g;class f extends c.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}t.LearnDeleteCourseMembershipRequest=f},579108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetCourseMembershipByUserIdRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("v1/courses/%courseId%/users/%userId%",e)}}t.LearnGetCourseMembershipByUserIdRequest=r},138738:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseMembershipByUserIdGet=void 0;let i=n(482532),r=n(579108);async function s(e,t,n){let s=new r.LearnGetCourseMembershipByUserIdRequest({courseId:t,userId:n}).withSession(e).withExpand(...["courseRole","user"]);return(0,i.fetchJsonApiResult)(s)}t.courseMembershipByUserIdGet=s},599786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseMembershipGet=t.courseMembershipsGet=t.courseMembershipDelete=t.courseMembershipUpdate=t.courseMembershipCreate=t.courseMembershipCountsGet=void 0;let i=n(482532),r=n(896401);async function s(e,t){let n=new r.LearnGetCourseMembershipCountsRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function o(e,t,n){let s=new r.LearnCreateCourseMembershipRequest({courseId:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function a(e,t,n,s){let o=new r.LearnUpdateCourseMembershipRequest({courseId:t,membershipId:n}).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}async function l(e,t,n){let s=new r.LearnDeleteCourseMembershipRequest({courseId:t,membershipId:n}).withSession(e);await (0,i.fetchApiResult)(s)}async function c(e,t,n){let s=new r.LearnGetCourseMembershipsRequest({courseId:t}).withSession(e).withPaging(n);return(0,i.fetchJsonApiResult)(s)}async function d(e,t,n){let s=new r.LearnGetCourseMembershipRequest({courseId:t,membershipId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)}t.courseMembershipCountsGet=s,t.courseMembershipCreate=o,t.courseMembershipUpdate=a,t.courseMembershipDelete=l,t.courseMembershipsGet=c,t.courseMembershipGet=d},851214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(599786),t),i.__exportStar(n(896401),t),i.__exportStar(n(138738),t),i.__exportStar(n(579108),t)},82482:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUpdateCourseMessagingOption=t.LearnGetCourseMessagingOption=t.LearnGetCourseUnreadMessageCountsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/conversations/counts",e)}}t.LearnGetCourseUnreadMessageCountsRequest=r;class s extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}t.LearnGetCourseMessagingOption=s;class o extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}t.LearnUpdateCourseMessagingOption=o},370982:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCourseMessageOption=t.courseMessageOptionGet=t.courseUnreadMessageCountsGet=void 0;let i=n(82482),r=n(482532);async function s(e,t){let n=new i.LearnGetCourseUnreadMessageCountsRequest({courseId:t}).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function o(e,t){let n=new i.LearnGetCourseMessagingOption({courseId:t}).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function a(e,t,n){let s=new i.LearnUpdateCourseMessagingOption({courseId:t}).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.courseUnreadMessageCountsGet=s,t.courseMessageOptionGet=o,t.setCourseMessageOption=a},879250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(370982),t),i.__exportStar(n(82482),t)},832395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(764625),t),i.__exportStar(n(686169),t)},686169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostQuestionAnalysisReportRequest=t.LearnGetQuestionAnalysisReportRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/questionAnalysis/assessments/%assessmentId%";class s extends i.LearnApiGetRequest{constructor(e){super(r,e)}}t.LearnGetQuestionAnalysisReportRequest=s;class o extends i.LearnApiPostWithoutBodyRequest{constructor(e){super(r,e)}}t.LearnPostQuestionAnalysisReportRequest=o},764625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseQuestionsAnalysisReportCreate=t.courseQuestionAnalysisReportGet=void 0;let i=n(482532),r=n(686169);t.courseQuestionAnalysisReportGet=function(e,t,n){let s=new r.LearnGetQuestionAnalysisReportRequest({courseId:t,assessmentId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)},t.courseQuestionsAnalysisReportCreate=function(e,t,n){let s=new r.LearnPostQuestionAnalysisReportRequest({courseId:t,assessmentId:n}).withSession(e);return(0,i.fetchJsonApiResult)(s)}},81798:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseQuestionUpdateGoalsRequest=t.LearnGetCourseQuestionTypesRequest=t.LearnGetCourseQuestionTagsRequest=t.LearnUploadQuestionsFileRequest=t.LearnGetCourseQuestionsSearchRequest=t.LearnPostCourseQuestionsRequest=t.LearnGetCourseQuestionsRequest=t.LearnGetCourseQuestionRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/assessments/%assessmentId%/questions";class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(`${r}/%questionId%`,e)}}t.LearnGetCourseQuestionRequest=s;class o extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(r,e)}}t.LearnGetCourseQuestionsRequest=o;class a extends i.LearnApiPostRequest{constructor(e){super(r,e)}}t.LearnPostCourseQuestionsRequest=a;class l extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/questions",e)}}t.LearnGetCourseQuestionsSearchRequest=l;class c extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions/uploadQuestions",e)}}t.LearnUploadQuestionsFileRequest=c;class d extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/questions/tags",e)}}t.LearnGetCourseQuestionTagsRequest=d;class u extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/questions/types",e)}}t.LearnGetCourseQuestionTypesRequest=u;class p extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions/%questionId%",e)}}t.LearnCourseQuestionUpdateGoalsRequest=p},229224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseQuestionGoalsUpdate=t.courseQuestionTypesGet=t.courseQuestionTagsGet=t.createCourseQuestion=t.courseQuestionsGet=t.courseQuestionGet=void 0;let i=n(482532),r=n(81798);async function s(e,t,n,s){let o=new r.LearnCourseQuestionUpdateGoalsRequest(t).withSession(e).withBody(n);return(null==s?void 0:s.length)&&(o=o.withExpand(...s)),(0,i.fetchJsonApiResult)(o)}t.courseQuestionGet=function(e,t,n,s){let o=new r.LearnGetCourseQuestionRequest({assessmentId:t,courseId:n,questionId:s}).withSession(e);return(0,i.fetchJsonApiResult)(o)},t.courseQuestionsGet=function(e,t,n,s){let o=new r.LearnGetCourseQuestionsRequest({assessmentId:t,courseId:n}).withSession(e).withPaging(s);return(0,i.fetchJsonApiResult)(o)},t.createCourseQuestion=function(e,t,n){let s=new r.LearnPostCourseQuestionsRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)},t.courseQuestionTagsGet=function(e,t,n){let s=new r.LearnGetCourseQuestionTagsRequest({courseId:t}).withSession(e).withPaging(n);return(0,i.fetchJsonApiResult)(s)},t.courseQuestionTypesGet=function(e,t,n){let s=new r.LearnGetCourseQuestionTypesRequest({courseId:t}).withSession(e).withQueryParams({assessmentIds:n}).withPaging({offset:0});return(0,i.fetchJsonApiResult)(s)},t.courseQuestionGoalsUpdate=s},175238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(229224),t),i.__exportStar(n(81798),t),i.__exportStar(n(912196),t)},912196:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnQuestionAttemptBatchUpdate=t.LearnQuestionAttemptUpdateRequest=void 0;let i=n(932299),r=n(227363),s=n(231181);function o(e,t){if(!(null==t?void 0:t.id)||!t.attemptId)throw Error("No attempt id or question attempt id available.");let{id:n,attemptId:i}=t;return new r.LearnUpdateQuestionAttemptRequest({courseId:e,attemptId:i,questionAttemptId:n})}t.LearnQuestionAttemptUpdateRequest=o,t.LearnQuestionAttemptBatchUpdate=function(e,t,n){let r=n.map(e=>o(t,e).withBody(e));return(0,i.makeBatchRequest)(e,r).then(e=>Object.values(e).map(e=>{var t;return 200===e.statusCode?{isOk:!0,id:null!==(t=e.body.id)&&void 0!==t?t:"",result:e.body}:{isOk:!1,id:(0,s.getPathParameterValue)(e.relativeUrl,"answers"),error:{status:e.statusCode}}}))}},730012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAllCourseResourcesRequest=t.LearnCourseBatchDeleteUnusedFilesRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/resources/rpc/deleteUnused",e)}}t.LearnCourseBatchDeleteUnusedFilesRequest=r;class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/resources",e)}}t.LearnGetAllCourseResourcesRequest=s},388428:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAllCourseResources=t.courseBatchDeleteUnusedFiles=void 0;let i=n(482532),r=n(730012);async function s(e,t,n){let s=new r.LearnCourseBatchDeleteUnusedFilesRequest({courseId:t}).withBody(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function o(e,t,n,s){let o=new r.LearnGetAllCourseResourcesRequest({courseId:t}).withSession(e).withQueryParams(n).withPaging(s);return(0,i.fetchJsonApiResult)(o)}t.courseBatchDeleteUnusedFiles=s,t.getAllCourseResources=o},177513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(388428),t),i.__exportStar(n(730012),t)},926077:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetUserRubricPreferencesRequest=t.LearnDeleteUserRubricPreferenceRequest=t.LearnUpdateUserRubricPreferenceRequest=t.LearnGetUserRubricPreferenceRequest=t.LearnCourseRubricUpdateGoalsRequest=t.LearnCreateCourseRubricRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/rubrics",s=`${r}/%rubricId%`,o=`${r}/%rubricId%/users/%userId%/preferences`,a=`${o}/%preferenceKey%`;class l extends i.LearnApiPostRequest{constructor(e){super(r,e)}}t.LearnCreateCourseRubricRequest=l;class c extends i.LearnApiPatchRequest{constructor(e){super(s,e)}}t.LearnCourseRubricUpdateGoalsRequest=c;class d extends i.LearnApiGetRequest{constructor(e){super(a,e)}}t.LearnGetUserRubricPreferenceRequest=d;class u extends i.LearnApiPutRequest{constructor(e){super(o,e)}}t.LearnUpdateUserRubricPreferenceRequest=u;class p extends i.LearnApiDeleteRequest{constructor(e){super(a,e)}}t.LearnDeleteUserRubricPreferenceRequest=p;class m extends i.LearnApiGetRequest{constructor(e){super(o,e)}}t.LearnGetUserRubricPreferencesRequest=m},315206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userRubricPreferenceUpdate=t.userRubricPreferenceGet=t.courseRubricUpdateGoals=t.createCourseRubric=void 0;let i=n(482532),r=n(926077);async function s(e,t,n){let s=new r.LearnCreateCourseRubricRequest(t).withBody(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function o(e,t,n){let s=new r.LearnCourseRubricUpdateGoalsRequest(t).withSession(e).withBody(n).withQueryParams({expand:"alignedGoals"});return(0,i.fetchJsonApiResult)(s)}t.createCourseRubric=s,t.courseRubricUpdateGoals=o,t.userRubricPreferenceGet=function(e,t){let n=new r.LearnGetUserRubricPreferenceRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)},t.userRubricPreferenceUpdate=function(e,t,n){let s=new r.LearnUpdateUserRubricPreferenceRequest(t).withBody(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}},798936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(315206),t),i.__exportStar(n(926077),t)},881761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDirectSubmitUploadSubmissionPostRequest=t.LearnDirectSubmitAddSubmissionPostRequest=t.LearnDirectSubmitCourseSettingsGetRequest=t.LearnDirectSubmitPluginStatusGetRequest=t.LearnDirectSubmitPapersGetRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/safeassign/directSubmitItems";class s extends i.LearnApiGetRequest{constructor(e){super(r,e)}}t.LearnDirectSubmitPapersGetRequest=s;class o extends i.LearnApiGetRequest{constructor(){super("v1/safeassign/pluginStatus")}}t.LearnDirectSubmitPluginStatusGetRequest=o;class a extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/safeassign/pluginStatus",e)}}t.LearnDirectSubmitCourseSettingsGetRequest=a;class l extends i.LearnApiPostFormRequest{constructor(e){super(r,e)}}t.LearnDirectSubmitAddSubmissionPostRequest=l;class c extends i.LearnApiPostFormRequest{constructor(e){super(r,e)}}t.LearnDirectSubmitUploadSubmissionPostRequest=c},619906:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.directSubmitUploadSubmission=t.directSubmitAddSubmission=t.directSubmitCourseSettingsGet=t.directSubmitPluginStatusGet=t.directSubmitPapersGet=void 0;let i=n(881761),r=n(482532),s=n(881761);t.directSubmitPapersGet=(e,t)=>{let n=new s.LearnDirectSubmitPapersGetRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)},t.directSubmitPluginStatusGet=e=>{let t=new i.LearnDirectSubmitPluginStatusGetRequest().withSession(e);return(0,r.fetchJsonApiResult)(t)},t.directSubmitCourseSettingsGet=(e,t)=>{let n=new i.LearnDirectSubmitCourseSettingsGetRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)},t.directSubmitAddSubmission=function(e,t,n){let s={paper:new Blob([JSON.stringify(n)],{type:"application/json"})},o=new i.LearnDirectSubmitAddSubmissionPostRequest(t).withSession(e).withBody(s);return(0,r.fetchApiResult)(o)},t.directSubmitUploadSubmission=function(e,t,n){let{file:s,...o}=n,a={paper:new Blob([JSON.stringify(o)],{type:"application/json"}),file:null!=s?s:""},l=new i.LearnDirectSubmitUploadSubmissionPostRequest(t).withSession(e).withBody(a);return(0,r.fetchApiResult)(l)}},609659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(619906),t),i.__exportStar(n(881761),t)},397151:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteCourseLogRequest=t.LearnGetCourseLogsRequest=t.LearnCourseLogsFilterField=void 0;let s=n(25264);(r=i||(t.LearnCourseLogsFilterField=i={})).AllLogs="allLogs",r.CopyLogs="courseCopyLogs",r.ImportLogs="importLogs",r.RestoreLogs="restoreLogs";class o extends s.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/tasks/logs",e)}}t.LearnGetCourseLogsRequest=o;class a extends s.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/tasks/logs/%logId%",e)}}t.LearnDeleteCourseLogRequest=a},339542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseLogDelete=t.courseLogsGet=void 0;let i=n(482532),r=n(397151);async function s(e,t,n,s){let o=new r.LearnGetCourseLogsRequest({courseId:t}).withSession(e).withQueryParams(n).withPaging(s);return(0,i.fetchJsonApiResult)(o)}t.courseLogsGet=s,t.courseLogDelete=function(e,t,n){let s=new r.LearnDeleteCourseLogRequest({courseId:n,logId:t}).withSession(e);return(0,i.fetchApiResult)(s)}},203596:function(e,t,n){"use strict";var i,r,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteCourseTaskRequest=t.LearnGetCourseTasksRequest=t.LearnCourseTasksFilterStatusField=t.LearnCourseTasksFilterField=void 0;let a=n(25264);(s=i||(t.LearnCourseTasksFilterField=i={})).AllTasks="allTasks",s.CxTasks="cxTasks",s.CopyTasks="courseCopyTasks",s.ConvertToUltra="ultraCourseConversionTasks",s.CxImport="CXIMPORT",s.CxExport="CXEXPORT",s.CxArchive="CXARCHIVE",s.CxRestore="CXRESTORE",(o=r||(t.LearnCourseTasksFilterStatusField=r={})).AllStatus="All",o.Waiting="WAITING",o.Assigned="ASSIGNED",o.Running="RUNNING",o.Complete="COMPLETE",o.CompleteErrors="COMPLETE_ERRORS",o.Incomplete="INCOMPLETE";class l extends a.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/tasks",e)}}t.LearnGetCourseTasksRequest=l;class c extends a.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/tasks/%taskId%",e)}}t.LearnDeleteCourseTaskRequest=c},129122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseTaskDelete=t.courseTasksGet=void 0;let i=n(203596),r=n(482532);async function s(e,t,n,s){let o=new i.LearnGetCourseTasksRequest({courseId:t}).withSession(e).withQueryParams(n).withPaging(s);return(0,r.fetchJsonApiResult)(o)}t.courseTasksGet=s,t.courseTaskDelete=function(e,t,n){let s=new i.LearnDeleteCourseTaskRequest({courseId:t,taskId:n}).withSession(e);return(0,r.fetchApiResult)(s)}},827666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(203596),t),i.__exportStar(n(129122),t),i.__exportStar(n(397151),t),i.__exportStar(n(339542),t)},648609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUpdateCourseTool=t.LearnGetCourseTool=void 0;let i=n(25264),r="/v1/courses/%courseId%/tools/%toolId%";class s extends i.LearnApiGetRequest{constructor(e){super(r,e)}}t.LearnGetCourseTool=s;class o extends i.LearnApiPatchRequest{constructor(e){super(r,e)}}t.LearnUpdateCourseTool=o},736883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCourseToolStudentVisibility=t.getCourseTool=void 0;let i=n(482532),r=n(648609);t.getCourseTool=function(e,t){let n=new r.LearnGetCourseTool(e).withSession(t);return(0,i.fetchJsonApiResult)(n)},t.setCourseToolStudentVisibility=function(e,t,n){let s=new r.LearnUpdateCourseTool(e).withSession(t).withBody(n);return(0,i.fetchJsonApiResult)(s)}},973179:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(736883),t),i.__exportStar(n(648609),t)},525104:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetUnsplashSettingsRequest=t.LearnNotifyUnsplashDownloadRequest=t.LearnSearchUnsplashRequest=t.ImageOrientation=void 0;let s=n(25264);(r=i||(t.ImageOrientation=i={})).Landscape="landscape",r.Portrait="portrait",r.Squarish="squarish";class o extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/unsplash/search",e)}withBaseQueryParams(e){return this.withQueryParams(e),this}setResizeQueryParam(e,t,n){e[t]=n}withResizeOptions(e){let t;let n={};for(t in e)e.hasOwnProperty.call(e,t)&&this.setResizeQueryParam(n,`size-${t}`,e[t]);return this.withQueryParams(n),this}}t.LearnSearchUnsplashRequest=o;class a extends s.LearnApiPostWithoutBodyRequest{constructor(e){super("/v1/courses/%courseId%/unsplash/downloadNotify",e)}}t.LearnNotifyUnsplashDownloadRequest=a;class l extends s.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/unsplash/settings",e)}}t.LearnGetUnsplashSettingsRequest=l},960454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unsplashSettingsGet=t.unsplashDownloadNotify=t.unsplashSearch=void 0;let i=n(482532),r=n(525104);async function s(e,t,n){let s=new r.LearnNotifyUnsplashDownloadRequest({courseId:t}).withSession(e).withQueryParams(n);await (0,i.fetchJsonApiResult)(s)}t.unsplashSearch=function(e,t,n,s){let o=new r.LearnSearchUnsplashRequest({courseId:t}).withSession(e).withBaseQueryParams(n).withResizeOptions(null!=s?s:{});return(0,i.fetchJsonApiResult)(o)},t.unsplashDownloadNotify=s,t.unsplashSettingsGet=function(e,t){let n=new r.LearnGetUnsplashSettingsRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}},784111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(960454),t),i.__exportStar(n(525104),t)},379197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseUserContentChildrenRequest=void 0;let i=n(459837);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/contents/%contentId%/children",e)}}t.LearnCourseUserContentChildrenRequest=r},517761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseUserDeleteNoteRequest=t.LearnCourseUserUpdateNoteRequest=t.LearnCourseUserCreateNoteRequest=t.LearnCourseUserNotesRequest=void 0;let i=n(459837);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}t.LearnCourseUserNotesRequest=r;class s extends i.LearnApiPostRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}t.LearnCourseUserCreateNoteRequest=s;class o extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}t.LearnCourseUserUpdateNoteRequest=o;class a extends i.LearnApiDeleteRequest{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}t.LearnCourseUserDeleteNoteRequest=a},371961:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseUserNoteDelete=t.courseUserNoteUpdate=t.courseUserNoteGet=t.courseUserNoteCreate=void 0;let i=n(482532),r=n(517761);t.courseUserNoteCreate=function(e,t,n){let s=new r.LearnCourseUserCreateNoteRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)},t.courseUserNoteGet=function(e,t,n,s){let o=new r.LearnCourseUserNotesRequest(t).withSession(e).withQueryParams({includeCount:!0,...n}).withExpand("author");return s&&(o=o.withSort(...s)),(0,i.fetchJsonApiResult)(o)},t.courseUserNoteUpdate=function(e,t,n){let s=new r.LearnCourseUserUpdateNoteRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)},t.courseUserNoteDelete=function(e,t){let n=new r.LearnCourseUserDeleteNoteRequest(t).withSession(e);return(0,i.fetchApiResult)(n)}},639278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetStudentPreviewUserRequest=t.LearnEnableCourseUserStudentPreviewRequest=void 0;let i=n(25264);class r extends i.LearnApiPutRequest{constructor(e){super("/v1/courses/%courseId%/spreview",e)}}t.LearnEnableCourseUserStudentPreviewRequest=r;class s extends i.LearnApiGetRequest{constructor(e){super("v1/courses/%courseId%/spreview",e)}}t.LearnGetStudentPreviewUserRequest=s},827762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseUserStudentPreviewEnable=void 0;let i=n(482532),r=n(639278);async function s(e,t){let n=new r.LearnEnableCourseUserStudentPreviewRequest(t).withBody({}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.courseUserStudentPreviewEnable=s},982905:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(371961),t),i.__exportStar(n(517761),t),i.__exportStar(n(379197),t),i.__exportStar(n(827762),t),i.__exportStar(n(639278),t)},354051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnToggleDevOnlyRequest=void 0;let i=n(453626),r=n(25264);class s extends r.LearnGetRequest{constructor(){super("/webapps/portal/support.jsp")}async validate(){if(await super.validate(),!this.getQueryString())throw new i.APIRequestValidationError("Query parameters are required to toggle dev only")}}t.LearnToggleDevOnlyRequest=s},801261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toggleDevOnly=void 0;let i=n(482532),r=n(354051);async function s(e,t){let n=new r.LearnToggleDevOnlyRequest().withQueryParams({Action:"toggleDevOnlyRestEndpoints",enabled:t}).withSession(e);await (0,i.fetchTextApiResult)(n)}t.toggleDevOnly=s},620165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(354051),t),i.__exportStar(n(801261),t)},542861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnSetFeatureFlagRequest=t.LearnGetFeatureFlagRequest=t.LearnGetFeatureFlagsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(){super("/v1/featureFlags")}}t.LearnGetFeatureFlagsRequest=r;class s extends i.LearnApiGetRequest{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}t.LearnGetFeatureFlagRequest=s;class o extends i.LearnApiPutRequest{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}t.LearnSetFeatureFlagRequest=o},643352:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.featureFlagSet=t.featureFlagGet=t.featureFlagsGet=void 0;let i=n(482532),r=n(542861);async function s(e){let t=new r.LearnGetFeatureFlagsRequest().withSession(e);return(0,i.fetchJsonApiResult)(t)}async function o(e,t){let n=new r.LearnGetFeatureFlagRequest({flagKey:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function a(e,t,n){let s=new r.LearnSetFeatureFlagRequest({flagKey:t}).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}t.featureFlagsGet=s,t.featureFlagGet=o,t.featureFlagSet=a},573217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(542861),t),i.__exportStar(n(643352),t)},215229:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUploadFileRequestWithProgress=t.XhrResponseError=t.XhrApiResponseError=t.LearnUploadFileRequest=void 0;let i=n(298338),r=n(25264),s=n(482532);class o extends r.LearnApiPostFormRequest{constructor(){super("/v1/files")}}t.LearnUploadFileRequest=o;class a extends s.XhrRequestError{constructor(e){super(s.XhrRequestErrorType.API),this._apiError=e}get apiError(){return this._apiError}get status(){return this._apiError.body.status}}t.XhrApiResponseError=a;class l extends s.XhrRequestError{constructor(){super(s.XhrRequestErrorType.API)}}t.XhrResponseError=l,t.LearnUploadFileRequestWithProgress=class extends o{xhrFailed(e){if(!e)return new l;let t=JSON.parse(e);return new a(new i.APIResponseError(t))}xhrBody(){return this.getBodyInit()}toXhr(e){let t=new XMLHttpRequest;return t.open(this.method,null!=e?e:this.getUrl()),this.headers.forEach((e,n)=>{t.setRequestHeader(n,e)}),t}}},439315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileUploadWithProgress=t.fileUpload=void 0;let i=n(482532),r=n(215229);t.fileUpload=function(e,t,n,s){let o=new r.LearnUploadFileRequest().withSession(e).withBody(t).withQueryParams(n);return s&&s.length>0&&(o=o.withExpand(...s)),(0,i.fetchJsonApiResult)(o)},t.fileUploadWithProgress=function(e,t,n,s){let o=new r.LearnUploadFileRequestWithProgress().withSession(e).withBody(t).withQueryParams(n);return s&&s.length>0&&(o=o.withExpand(...s)),(0,i.requestJsonApiResultWithProgress)(o)}},758483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(439315),t),i.__exportStar(n(215229),t)},557993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetColumnStatisticsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/statistics",e)}}t.LearnGetColumnStatisticsRequest=r},492936:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.columnStatisticsGet=void 0;let i=n(482532),r=n(557993);t.columnStatisticsGet=(e,t)=>{let n=new r.LearnGetColumnStatisticsRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}},293785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDownloadTestResultsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/results/export",e)}}t.LearnDownloadTestResultsRequest=r},823380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetExceptionDetailsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/memberships/%membershipId%/exceptions",e)}}t.LearnGetExceptionDetailsRequest=r},955147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exceptionDetailsGet=void 0;let i=n(482532),r=n(823380);t.exceptionDetailsGet=function(e,t,n){let s=new r.LearnGetExceptionDetailsRequest(t).withQueryParams(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}},17901:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetGradableColumnsUserOptionRequest=t.LearnGetGradableItemUserOptionExceptionsRequest=t.LearnGetGradableItemUserOptionCountRequest=t.LearnGetGradableItemUserOptionRequest=t.LearnDeleteGradableItemUserOptionByGroupId=t.LearnUpdateGradableItemUserOptionByGroupId=t.LearnDeleteGradableItemUserOptionByMembershipId=t.LearnUpdateGradableItemUserOptionByMembershipId=t.LearnFetchGradableItemUserOptionTypes=void 0;let s=n(25264),o="/v1/courses/%courseId%",a=`${o}/gradebook/columns`,l=`${a}/%columnId%`,c=`${l}/exceptions`,d=`${c}/count`,u=`${o}/gradebook/memberships/%membershipId%/exceptions`,p=`${c}/memberships/%membershipId%`,m=`${c}/groups/%groupId%`;(r=i||(t.LearnFetchGradableItemUserOptionTypes=i={})).Unlimited="UNLIMITED",r.Fixed="FIXED",r.Relative="RELATIVE";class h extends s.LearnApiPutRequest{constructor(e){super(p,e)}}t.LearnUpdateGradableItemUserOptionByMembershipId=h;class g extends s.LearnApiDeleteRequest{constructor(e){super(p,e)}}t.LearnDeleteGradableItemUserOptionByMembershipId=g;class f extends s.LearnApiPutRequest{constructor(e){super(m,e)}}t.LearnUpdateGradableItemUserOptionByGroupId=f;class b extends s.LearnApiDeleteRequest{constructor(e){super(m,e)}}t.LearnDeleteGradableItemUserOptionByGroupId=b;class v extends s.LearnApiGetRequest{constructor(e){super(c,e)}}t.LearnGetGradableItemUserOptionRequest=v;class y extends s.LearnApiGetRequest{constructor(e){super(d,e)}}t.LearnGetGradableItemUserOptionCountRequest=y;class S extends s.LearnApiGetRequest{constructor(e){super(u,e)}}t.LearnGetGradableItemUserOptionExceptionsRequest=S;class C extends s.LearnApiGetRequest{constructor(e){super(a,e)}}t.LearnGetGradableColumnsUserOptionRequest=C},805779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradableColumnsUserOptionGet=t.gradableItemUserOptionExceptionsGet=t.gradableItemUserOptionCountGet=t.gradableItemUserOptionGet=t.gradableItemUserOptionDeleteByGroupId=t.gradableItemUserOptionUpdateByGroupId=t.gradableItemUserOptionDeleteByMembershipId=t.gradableItemUserOptionUpdateByMembershipId=void 0;let i=n(482532),r=n(17901);async function s(e,t,n){let s=new r.LearnUpdateGradableItemUserOptionByMembershipId(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function o(e,t){let n=new r.LearnDeleteGradableItemUserOptionByMembershipId(t).withSession(e);await (0,i.fetchApiResult)(n)}async function a(e,t,n){let s=new r.LearnUpdateGradableItemUserOptionByGroupId(t).withSession(e).withBody(n);return await (0,i.fetchJsonApiResult)(s)}async function l(e,t){let n=new r.LearnDeleteGradableItemUserOptionByGroupId(t).withSession(e);await (0,i.fetchApiResult)(n)}async function c(e,t,n){let s=new r.LearnGetGradableItemUserOptionRequest(t).withQueryParams(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function d(e,t){let n=new r.LearnGetGradableItemUserOptionCountRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function u(e,t,n){let s=new r.LearnGetGradableItemUserOptionExceptionsRequest(t).withQueryParams(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function p(e,t){let n=new r.LearnGetGradableColumnsUserOptionRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.gradableItemUserOptionUpdateByMembershipId=s,t.gradableItemUserOptionDeleteByMembershipId=o,t.gradableItemUserOptionUpdateByGroupId=a,t.gradableItemUserOptionDeleteByGroupId=l,t.gradableItemUserOptionGet=c,t.gradableItemUserOptionCountGet=d,t.gradableItemUserOptionExceptionsGet=u,t.gradableColumnsUserOptionGet=p},425233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAttemptSendRemindersPostRequest=t.LearnAnonymousUserExemptionGetRequest=t.LearnAnonymousUserExemptionPatchRequest=t.LearnGroupGradeRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/gradebook/columns/%columnId%",s=`${r}/groupAssociations/%groupId%/grades`,o=`${r}/users/%userId%`,a=`${r}/attempts/reminders`;class l extends i.LearnApiGetRequest{constructor(e){super(s,e)}}t.LearnGroupGradeRequest=l;class c extends i.LearnApiPatchRequest{constructor(e){super(o,e)}}t.LearnAnonymousUserExemptionPatchRequest=c;class d extends i.LearnApiGetRequest{constructor(e){super(o,e)}}t.LearnAnonymousUserExemptionGetRequest=d;class u extends i.LearnApiPostWithoutBodyRequest{constructor(e){super(a,e)}}t.LearnAttemptSendRemindersPostRequest=u},587509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGradeAttemptDeleteRequest=t.LearnGradeGroupAttemptPatchRequest=t.LearnGradeAttemptPatchRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/gradebook";class s extends i.LearnApiPatchRequest{constructor(e){super(`${r}/attempts/%attemptId%`,e)}}t.LearnGradeAttemptPatchRequest=s;class o extends i.LearnApiPatchRequest{constructor(e){super(`${r}/groupAttempts/%attemptId%`,e)}}t.LearnGradeGroupAttemptPatchRequest=o;class a extends i.LearnApiDeleteRequest{constructor(e){super(`${r}/attempts/%attemptId%`,e)}}t.LearnGradeAttemptDeleteRequest=a},653983:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradebookGroupAttemptPatch=t.gradebookAttemptDelete=t.gradebookAttemptPatch=void 0;let i=n(587509),r=n(482532);async function s(e,t,n){let s=new i.LearnGradeAttemptPatchRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function o(e,t){let n=new i.LearnGradeAttemptDeleteRequest(t).withSession(e);return(0,r.fetchApiResult)(n)}async function a(e,t,n){let s=new i.LearnGradeGroupAttemptPatchRequest(t).withSession(e).withBody(n).withExpand("toolAttemptDetail");return(0,r.fetchJsonApiResult)(s)}t.gradebookAttemptPatch=s,t.gradebookAttemptDelete=o,t.gradebookGroupAttemptPatch=a},408117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeerReviewForAssessmentPostRequest=void 0;let i=n(25264);class r extends i.LearnApiPostWithoutBodyRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%graderUserId%/users",e)}}t.PeerReviewForAssessmentPostRequest=r},332876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.peerReviewForAssessmentCreate=void 0;let i=n(482532),r=n(408117);async function s(e,t){let n=new r.PeerReviewForAssessmentPostRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.peerReviewForAssessmentCreate=s},679774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnColumnGradeAttemptPatchRequest=t.LearnColumnGradeGetRequest=t.LearnGradeDetailPatchRequest=t.LearnGradeDetailPostRequest=t.LearnReadyGradesPostRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",s=`${r}/%gradeId%/postReadyGrades`,o=`${r}/%gradeId%`,a=`${o}/attempts/%attemptId%`;class l extends i.LearnApiPostWithoutBodyRequest{constructor(e){super(s,e)}}t.LearnReadyGradesPostRequest=l;class c extends i.LearnApiPostRequest{constructor(e){super(r,e)}}t.LearnGradeDetailPostRequest=c;class d extends i.LearnApiPatchRequest{constructor(e){super(o,e)}}t.LearnGradeDetailPatchRequest=d;class u extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(r,e)}}t.LearnColumnGradeGetRequest=u;class p extends i.LearnApiPatchRequest{constructor(e){super(a,e)}}t.LearnColumnGradeAttemptPatchRequest=p},638047:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateGradeAttempt=t.getColumnGradeList=t.updateGradeDetail=t.postGradeDetail=t.postReadyGrades=void 0;let i=n(679774),r=n(482532);async function s(e,t){let n=new i.LearnReadyGradesPostRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function o(e,t,n,s){let o=new i.LearnGradeDetailPostRequest(t).withSession(e).withBody(s).withQueryParams(n);return(0,r.fetchJsonApiResult)(o)}async function a(e,t,n){let s=new i.LearnGradeDetailPatchRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}async function l(e,t,n){let s=new i.LearnColumnGradeGetRequest(t).withSession(e).withQueryParams(n);return(0,r.fetchJsonApiResult)(s)}async function c(e,t,n){let s=new i.LearnColumnGradeAttemptPatchRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.postReadyGrades=s,t.postGradeDetail=o,t.updateGradeDetail=a,t.getColumnGradeList=l,t.updateGradeAttempt=c},744403:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnReadyGradesGroupAssociationPostRequest=void 0;let i=n(25264);class r extends i.LearnApiPostWithoutBodyRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/groupAssociations/%groupAssociationId%/postReadyGroupAttempts",e)}}t.LearnReadyGradesGroupAssociationPostRequest=r},687960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postReadyGradesGroupAssociation=void 0;let i=n(744403),r=n(482532);async function s(e,t,n,s){let o=new i.LearnReadyGradesGroupAssociationPostRequest({courseId:t,columnId:n,groupAssociationId:s}).withSession(e);return(0,r.fetchJsonApiResult)(o)}t.postReadyGradesGroupAssociation=s},870999:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GradebookColumnsRubricAssociationRequest=t.GradebookColumnsPatchRequest=t.GradebookColumnsPostRequest=t.GradebookColumnsGetRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/gradebook/columns",s=`${r}/%columnId%`;class o extends i.LearnApiGetPagedCollectionRequest{constructor(e){super(r,e)}}t.GradebookColumnsGetRequest=o;class a extends i.LearnApiPostRequest{constructor(e){super(r,e)}}t.GradebookColumnsPostRequest=a;class l extends i.LearnApiPatchRequest{constructor(e){super(s,e)}}t.GradebookColumnsPatchRequest=l;class c extends i.LearnApiPatchRequest{constructor(e){super(s,e)}}t.GradebookColumnsRubricAssociationRequest=c},312357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradebookColumnCreate=t.getGrades=t.gradebookColumnUpdate=void 0;let i=n(870999),r=n(482532);async function s(e,t,n,s){let o=new i.GradebookColumnsPatchRequest({courseId:t,columnId:n}).withSession(e).withBody(s);return(0,r.fetchJsonApiResult)(o)}async function o(e,t){let n=new i.GradebookColumnsGetRequest({courseId:t}).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function a(e,t,n){let s=new i.GradebookColumnsPostRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.gradebookColumnUpdate=s,t.getGrades=o,t.gradebookColumnCreate=a},268369:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetGradeDetailByGradeIdRequest=t.LearnGetGradebookGradesRequest=t.LearnGradebookGradeSortField=void 0;let s=n(25264),o="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",a=`${o}/%gradeId%`;(r=i||(t.LearnGradebookGradeSortField=i={})).GradeId="gradeId",r.LastAttemptDate="lastAttemptDate";class l extends s.LearnApiGetPagedCollectionRequest{constructor(e){super(o,e)}}t.LearnGetGradebookGradesRequest=l;class c extends s.LearnApiGetRequest{constructor(e){super(a,e)}}t.LearnGetGradeDetailByGradeIdRequest=c},111466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadTestResults=void 0;let i=n(227363),r=n(482532),s=e=>{var t;let n;return e.headers.raw||""===(n=null!==(t=e.headers.get("Content-Disposition"))&&void 0!==t?t:"")||(n=null==(n=n.indexOf("filename*")>=0?decodeURIComponent(n.split("filename*=")[1].split("UTF-8")[1]):n.split("filename=")[1].split(";")[0])?void 0:n.replace(/['"]/g,"")),n};async function o(e,t,n,o){let a=new i.LearnDownloadTestResultsRequest({courseId:t,columnId:n}).withQueryParams(o).withSession(e),l=await (0,r.fetchApiResult)(a);return{filename:s(l),blob:await l.blob()}}t.downloadTestResults=o},856596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDownloadPrepareRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("v1/courses/%courseId%/gradebook/prepareDownload",e)}}t.LearnDownloadPrepareRequest=r},208005:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareDownload=void 0;let i=n(482532),r=n(856596),s=async(e,t,n)=>{let s=new r.LearnDownloadPrepareRequest(t).withBody(n).withSession(e);return await (0,i.fetchJsonApiResult)(s)};t.prepareDownload=s},127755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostGroupAttemptRequest=t.LearnPostAttemptRequest=t.LearnGroupGradeRequest=void 0;let i=n(25264),r="/v1/courses/%courseId%/gradebook/columns/%columnId%",s=`${r}/attempts`,o=`${r}/groupAttempts`,a=`${r}/groupAssociations/%groupId%/grades`;class l extends i.LearnApiGetRequest{constructor(e){super(a,e)}}t.LearnGroupGradeRequest=l;class c extends i.LearnApiPostRequest{constructor(e){super(s,e)}}t.LearnPostAttemptRequest=c;class d extends i.LearnApiPostRequest{constructor(e){super(o,e)}}t.LearnPostGroupAttemptRequest=d},521778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendRemindersToNonSubmitters=t.updateAnonymousGradeExemption=t.fetchAnonymousGradeExemption=t.postGroupAttempt=t.postAttempt=t.fetchGradeByGroupId=void 0;let i=n(127755),r=n(482532),s=n(425233),o={expand:"toolAttemptDetail"},a={expand:"toolAttemptDetail,attempts,attempts.toolAttemptDetail"};async function l(e,t){let n=new s.LearnAnonymousUserExemptionGetRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}async function c(e,t,n){let i=new s.LearnAnonymousUserExemptionPatchRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(i)}async function d(e,t){let n=new s.LearnAttemptSendRemindersPostRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}t.fetchGradeByGroupId=function(e,t){let n=new s.LearnGroupGradeRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)},t.postAttempt=function(e,t,n){let s=new i.LearnPostAttemptRequest(t).withSession(e).withBody(n).withQueryParams(o);return(0,r.fetchJsonApiResult)(s)},t.postGroupAttempt=function(e,t,n){let s=new i.LearnPostGroupAttemptRequest(t).withSession(e).withBody(n).withQueryParams(a);return(0,r.fetchJsonApiResult)(s)},t.fetchAnonymousGradeExemption=l,t.updateAnonymousGradeExemption=c,t.sendRemindersToNonSubmitters=d},92534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GradingSchemaDeleteRequest=t.GradingSchemaUpdateRequest=t.GradingSchemaPersistRequest=t.GradingSchemaFetchRequest=t.GradingSchemasFetchRequest=t.GRADING_SCHEMA_API=t.GRADING_SCHEMAS_API=void 0;let i=n(25264);t.GRADING_SCHEMAS_API="/v1/courses/%courseId%/gradebook/schemas",t.GRADING_SCHEMA_API=`${t.GRADING_SCHEMAS_API}/%schemaId%`;class r extends i.LearnApiGetRequest{constructor(e){super(t.GRADING_SCHEMAS_API,e)}}t.GradingSchemasFetchRequest=r;class s extends i.LearnApiGetRequest{constructor(e){super(t.GRADING_SCHEMA_API,e)}}t.GradingSchemaFetchRequest=s;class o extends i.LearnApiPostRequest{constructor(e){super(t.GRADING_SCHEMAS_API,e)}}t.GradingSchemaPersistRequest=o;class a extends i.LearnApiPatchRequest{constructor(e){super(t.GRADING_SCHEMA_API,e)}}t.GradingSchemaUpdateRequest=a;class l extends i.LearnApiDeleteRequest{constructor(e){super(t.GRADING_SCHEMA_API,e)}}t.GradingSchemaDeleteRequest=l},984676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteGradingSchema=t.updateGradingSchema=t.persistGradingSchema=t.fetchGradingSchema=t.fetchGradingSchemas=void 0;let i=n(92534),r=n(482532);t.fetchGradingSchemas=function(e,t,n){let s=new i.GradingSchemasFetchRequest(t).withSession(e);return n&&s.withQueryParams(n),(0,r.fetchJsonApiResult)(s)},t.fetchGradingSchema=function(e,t){let n=new i.GradingSchemaFetchRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)},t.persistGradingSchema=function(e,t,n){let s=new i.GradingSchemaPersistRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)},t.updateGradingSchema=function(e,t,n){let s=new i.GradingSchemaUpdateRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)},t.deleteGradingSchema=function(e,t){let n=new i.GradingSchemaDeleteRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)}},227363:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(293785),t),i.__exportStar(n(955147),t),i.__exportStar(n(823380),t),i.__exportStar(n(805779),t),i.__exportStar(n(17901),t),i.__exportStar(n(111466),t),i.__exportStar(n(521778),t),i.__exportStar(n(425233),t),i.__exportStar(n(984676),t),i.__exportStar(n(92534),t),i.__exportStar(n(271897),t),i.__exportStar(n(268369),t),i.__exportStar(n(856596),t),i.__exportStar(n(208005),t),i.__exportStar(n(744403),t),i.__exportStar(n(687960),t),i.__exportStar(n(638047),t),i.__exportStar(n(679774),t),i.__exportStar(n(312357),t),i.__exportStar(n(870999),t),i.__exportStar(n(653983),t),i.__exportStar(n(587509),t),i.__exportStar(n(945242),t),i.__exportStar(n(892484),t),i.__exportStar(n(585960),t),i.__exportStar(n(534714),t),i.__exportStar(n(546168),t),i.__exportStar(n(332876),t),i.__exportStar(n(618314),t),i.__exportStar(n(678708),t),i.__exportStar(n(492936),t),i.__exportStar(n(557993),t)},678708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverallGradeNotationPostRequest=t.GRADE_NOTATION_API=void 0;let i=n(25264);t.GRADE_NOTATION_API="/v1/courses/%courseId%/gradebook/performancecodes";class r extends i.LearnApiPostRequest{constructor(e){super(t.GRADE_NOTATION_API,e)}}t.OverallGradeNotationPostRequest=r},618314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradeNotationCreate=void 0;let i=n(678708),r=n(482532);async function s(e,t,n){let s=new i.OverallGradeNotationPostRequest(t).withSession(e).withBody(n);return(0,r.fetchJsonApiResult)(s)}t.gradeNotationCreate=s},945242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetGradedQuestionAttemptRequest=t.LearnUpdateGradedQuestionAttemptRequest=t.LearnUpdateQuestionAttemptRequest=t.LearnGetGradedQuestionAttemptsRequest=t.LearnGetQuestionAttemptsByQuestionIdRequest=t.LearnGetQuestionAttemptsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers",e)}}t.LearnGetQuestionAttemptsRequest=r;class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/%questionId%/answers",e)}}t.LearnGetQuestionAttemptsByQuestionIdRequest=s;class o extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/grades",e)}}t.LearnGetGradedQuestionAttemptsRequest=o;class a extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}t.LearnUpdateQuestionAttemptRequest=a;class l extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}t.LearnUpdateGradedQuestionAttemptRequest=l;class c extends i.LearnApiGetRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}t.LearnGetGradedQuestionAttemptRequest=c},271897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.questionAttemptsByQuestionId=t.gradedQuestionAttemptUpdate=t.gradedQuestionAttemptsGet=t.gradedQuestionAttemptGet=t.questionAttemptsGet=t.questionAttemptUpdate=void 0;let i=n(482532),r=n(945242);async function s(e,t,n){let s=new r.LearnUpdateQuestionAttemptRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}async function o(e,t){let n=new r.LearnGetQuestionAttemptsRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function a(e,t,n=[]){let s=new r.LearnGetGradedQuestionAttemptRequest(t).withSession(e);return n.length>0&&(s=s.withExpand(...n)),(0,i.fetchJsonApiResult)(s)}async function l(e,t,n=[]){let s=new r.LearnGetGradedQuestionAttemptsRequest(t).withSession(e);return n&&n.length>0&&(s=s.withExpand(...n)),(0,i.fetchJsonApiResult)(s)}async function c(e,t,n){let s={manualPoints:null!==n.points&&void 0!==n.points?n.points:"",manualFeedback:n.manualFeedback,autoPoints:n.autoPoints,questionAttempt:{}},o=new r.LearnUpdateGradedQuestionAttemptRequest(t).withSession(e).withBody(s);return(0,i.fetchJsonApiResult)(o)}async function d(e,t,n={},s=[],o){let a=new r.LearnGetQuestionAttemptsByQuestionIdRequest(t).withSession(e).withPaging(n);return o&&a.withQueryParams(o),s&&s.length>0&&(a=a.withExpand(...s)),(0,i.fetchJsonApiResult)(a)}t.questionAttemptUpdate=s,t.questionAttemptsGet=o,t.gradedQuestionAttemptGet=a,t.gradedQuestionAttemptsGet=l,t.gradedQuestionAttemptUpdate=c,t.questionAttemptsByQuestionId=d},585960:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetQuestionBlockGradeStatusRequest=t.LearnGetQuestionGradeStatusRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/grading-status/summaries",e)}}t.LearnGetQuestionGradeStatusRequest=r;class s extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/%questionBlockId%/questions/grading-status/summaries",e)}}t.LearnGetQuestionBlockGradeStatusRequest=s},892484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.questionBlockGradingStatusGet=t.questionGradingStatusGet=void 0;let i=n(482532),r=n(585960);async function s(e,t,n){let s=new r.LearnGetQuestionGradeStatusRequest(t).withSession(e);return n&&s.withQueryParams(n),(0,i.fetchJsonApiResult)(s)}async function o(e,t){let n=new r.LearnGetQuestionBlockGradeStatusRequest(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.questionGradingStatusGet=s,t.questionBlockGradingStatusGet=o},546168:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAttemptSubmissionResultsGetRequest=t.ATTEMPT_SUBMISSION_RESULTS_API_PATH=void 0;let i=n(25264);t.ATTEMPT_SUBMISSION_RESULTS_API_PATH="/v1/courses/%courseId%/gradebook/attempts/%attemptId%/submissionResults";class r extends i.LearnApiGetRequest{constructor(e){super(t.ATTEMPT_SUBMISSION_RESULTS_API_PATH,e)}}t.LearnAttemptSubmissionResultsGetRequest=r},534714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attemptSubmissionResultsGet=void 0;let i=n(546168),r=n(482532),s=async(e,t)=>{let n=new i.LearnAttemptSubmissionResultsGetRequest(t).withSession(e);return(0,r.fetchJsonApiResult)(n)};t.attemptSubmissionResultsGet=s},306794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(674806),t),i.__exportStar(n(957693),t),i.__exportStar(n(249267),t),i.__exportStar(n(739378),t),i.__exportStar(n(797585),t),i.__exportStar(n(932299),t),i.__exportStar(n(620165),t),i.__exportStar(n(573217),t),i.__exportStar(n(758483),t),i.__exportStar(n(587963),t),i.__exportStar(n(227363),t),i.__exportStar(n(63690),t),i.__exportStar(n(802440),t),i.__exportStar(n(940224),t),i.__exportStar(n(263069),t),i.__exportStar(n(333037),t),i.__exportStar(n(912876),t),i.__exportStar(n(79058),t)},63690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(944431),t),i.__exportStar(n(61089),t)},61089:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnUpdateLtiAssetProcessorRequest=t.LearnGetLtiAssetProcessorsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors",e)}}t.LearnGetLtiAssetProcessorsRequest=r;class s extends i.LearnApiPatchRequest{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors/%placementHandle%",e)}}t.LearnUpdateLtiAssetProcessorRequest=s},944431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ltiAssetProcessorLinkUpdate=t.ltiAssetProcessorsGet=void 0;let i=n(482532),r=n(61089);t.ltiAssetProcessorsGet=function(e,t,n){var s,o;let a=new r.LearnGetLtiAssetProcessorsRequest(t).withSession(e);return(null===(s=null==n?void 0:n.filter)||void 0===s?void 0:s.paging)&&a.withPaging(n.filter.paging),(null===(o=null==n?void 0:n.filter)||void 0===o?void 0:o.sort)&&a.withSort(...n.filter.sort),(null==n?void 0:n.query)&&a.withQueryParams(n.query),(0,i.fetchJsonApiResult)(a)},t.ltiAssetProcessorLinkUpdate=function(e,t,n){let s=new r.LearnUpdateLtiAssetProcessorRequest(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}},420834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetCourseMessageSummariesRequest=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(){super("/v1/messages/summary")}}t.LearnGetCourseMessageSummariesRequest=r},737845:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.courseMessageSummariesGet=void 0;let i=n(420834),r=n(482532);async function s(e,t){let n=new i.LearnGetCourseMessageSummariesRequest().withSession(e).withPaging(t);return(0,r.fetchJsonApiResult)(n)}t.courseMessageSummariesGet=s},802440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(737845),t),i.__exportStar(n(420834),t)},940224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(817467),t),i.__exportStar(n(754825),t)},817467:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetPartnerCloudSettings=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("webapps/partner-cloud/app/v1/providers/%providerId%/settings",e)}}t.LearnGetPartnerCloudSettings=r},754825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.partnerCloudProviderSettingsGet=void 0;let i=n(482532),r=n(817467);async function s(e,t){let n=new r.LearnGetPartnerCloudSettings({providerId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.partnerCloudProviderSettingsGet=s},263069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(319382),t),i.__exportStar(n(164864),t)},319382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetPasswordSettingsRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(){super("/v1/passwordSettings")}}t.LearnGetPasswordSettingsRequest=r},164864:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.passwordSettingsGet=void 0;let i=n(482532),r=n(319382);t.passwordSettingsGet=function(e){let t=new r.LearnGetPasswordSettingsRequest().withSession(e);return(0,i.fetchJsonApiResult)(t)}},912876:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(990228),t),i.__exportStar(n(497522),t)},990228:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCancelScheduledImmediateTaskRequest=t.LearnRunScheduledTaskRequest=t.LearnGetScheduledTaskRequest=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("v1/scheduledTasks/%taskId%/",e)}}t.LearnGetScheduledTaskRequest=r;class s extends i.LearnApiPostRequest{constructor(e){super("v1/scheduledTasks/%taskId%/run",e)}validate(){return Promise.resolve()}}t.LearnRunScheduledTaskRequest=s;class o extends i.LearnApiPostWithoutBodyRequest{constructor(e){super("v1/scheduledTasks/%taskId%/cancelImmediateTask",e)}}t.LearnCancelScheduledImmediateTaskRequest=o},497522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelScheduledImmediateTask=t.runScheduledTask=t.getScheduledTask=void 0;let i=n(482532),r=n(620165),s=n(990228);async function o(e,t){let n=new s.LearnGetScheduledTaskRequest({taskId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function a(e,t){let n;await (0,r.toggleDevOnly)(e,!0);try{let r=new s.LearnRunScheduledTaskRequest({taskId:t}).withSession(e);n=await (0,i.fetchJsonApiResult)(r)}finally{await (0,r.toggleDevOnly)(e,!1)}return n}async function l(e,t){let n=new s.LearnCancelScheduledImmediateTaskRequest({taskId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}t.getScheduledTask=o,t.runScheduledTask=a,t.cancelScheduledImmediateTask=l},79058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(622410),t),i.__exportStar(n(626565),t)},622410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostKeepBbSessionActiveRequest=t.LearnGetCourseTimeBeforeSessionTimeoutRequest=void 0;let i=n(482532),r=n(453626),s=n(25264);class o extends s.LearnApiGetRequest{constructor(){super("/v1/utilities/timeUntilBbSessionInactive"),this.headers.set("Suppress-Session-Timestamp-Update","true"),this.headers.set("Include-Session-Last-Access-Time","true")}}t.LearnGetCourseTimeBeforeSessionTimeoutRequest=o;class a extends s.LearnApiPostWithoutBodyRequest{constructor(){super("/v1/utilities/keepBbSessionActive")}async failed(e){if(e.status===i.HttpStatus.Unauthorized)throw new r.ResponseError(e.statusText,e.status,e.url)}}t.LearnPostKeepBbSessionActiveRequest=a},626565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keepSessionActive=t.getTimeBeforeSessionTimeout=void 0;let i=n(622410),r=n(482532);async function s(e){let t=new i.LearnPostKeepBbSessionActiveRequest().withSession(e);await (0,r.fetchApiResult)(t)}t.getTimeBeforeSessionTimeout=function(e,t){let n=new i.LearnGetCourseTimeBeforeSessionTimeoutRequest().withSession(e).withQueryParams(t);return(0,r.fetchJsonApiResult)(n)},t.keepSessionActive=s},333037:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(766472),t),i.__exportStar(n(597643),t)},766472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteUserPreferencesRequest=t.LearnUpdateUserPreferencesRequest=t.LearnCreateUserCalendarItemRequest=t.LearnGetUserRequest=t.LearnUpdateUserRequest=t.LearnCreateUserRequest=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(){super("/v1/users")}}t.LearnCreateUserRequest=r;class s extends i.LearnApiPatchRequest{constructor(e){super("v1/users/%userId%",e)}}t.LearnUpdateUserRequest=s;class o extends i.LearnApiGetRequest{constructor(e){super("v1/users/%userId%",e)}}t.LearnGetUserRequest=o;class a extends i.LearnApiPostRequest{constructor(e){super("v1/users/%userId%/calendarItems",e)}}t.LearnCreateUserCalendarItemRequest=a;class l extends i.LearnApiPutRequest{constructor(e){super("/v1/users/me/preferences/%key%",e)}}t.LearnUpdateUserPreferencesRequest=l;class c extends i.LearnApiDeleteRequest{constructor(e){super("/v1/users/me/preferences/%key%",e)}}t.LearnDeleteUserPreferencesRequest=c},597643:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userPreferencesDelete=t.studentPreviewUserGet=t.userSetPreferences=t.userCalendarItemCreate=t.userGet=t.userUpdate=t.userCreate=void 0;let i=n(482532),r=n(766472),s=n(797585);async function o(e,t){let n=new r.LearnCreateUserRequest().withBody(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function a(e,t,n){let s=new r.LearnUpdateUserRequest({userId:t}).withBody(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function l(e,t){let n=new r.LearnGetUserRequest({userId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function c(e,t,n){let s=new r.LearnCreateUserCalendarItemRequest({userId:t}).withBody(n).withSession(e);return(0,i.fetchJsonApiResult)(s)}async function d(e,t){let n=new r.LearnUpdateUserPreferencesRequest({key:t.key}).withBody(t).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function u(e,t){let n=new s.LearnGetStudentPreviewUserRequest({courseId:t}).withSession(e);return(0,i.fetchJsonApiResult)(n)}async function p(e,t){let n=new r.LearnDeleteUserPreferencesRequest(t).withSession(e);await (0,i.fetchApiResult)(n)}t.userCreate=o,t.userUpdate=a,t.userGet=l,t.userCalendarItemCreate=c,t.userSetPreferences=d,t.studentPreviewUserGet=u,t.userPreferencesDelete=p},344217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetAttemptReceiptRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(e){super("/public/v1/attemptReceipts/%receiptId%",e)}}t.LearnGetAttemptReceiptRequestPubV1=r},846116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAttemptReceipt=void 0;let i=n(482532),r=n(344217);async function s(e,t){let n=new r.LearnGetAttemptReceiptRequestPubV1({receiptId:t}).withSession(e);return await (0,i.fetchJsonApiResult)(n)}t.getAttemptReceipt=s},176968:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(344217),t),i.__exportStar(n(846116),t)},519394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostCourseAssessmentsGroupExceptionsRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("public/v1/courses/%courseId%/assessments/%assessmentId%/exceptions/groups/%groupId%",e)}}t.LearnPostCourseAssessmentsGroupExceptionsRequestPubV1=r},506304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assessmentGroupExceptionCreate=void 0;let i=n(482532),r=n(519394);t.assessmentGroupExceptionCreate=function(e,t,n){let s=new r.LearnPostCourseAssessmentsGroupExceptionsRequestPubV1(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}},977746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostCourseAssessmentsUserExceptionsRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiPostRequest{constructor(e){super("public/v1/courses/%courseId%/assessments/%assessmentId%/exceptions/users/%userId%",e)}}t.LearnPostCourseAssessmentsUserExceptionsRequestPubV1=r},61683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assessmentUserExceptionCreate=void 0;let i=n(482532),r=n(977746);t.assessmentUserExceptionCreate=function(e,t,n){let s=new r.LearnPostCourseAssessmentsUserExceptionsRequestPubV1(t).withSession(e).withBody(n);return(0,i.fetchJsonApiResult)(s)}},656395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(61683),t),i.__exportStar(n(977746),t),i.__exportStar(n(506304),t),i.__exportStar(n(519394),t)},157509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGetFileUploadSetingsRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiGetRequest{constructor(){super("/public/v1/uploads/settings")}}t.LearnGetFileUploadSetingsRequestPubV1=r},251405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileUploadSettingsGet=void 0;let i=n(157509),r=n(482532);async function s(e){let t=new i.LearnGetFileUploadSetingsRequestPubV1().withSession(e);return(0,r.fetchJsonApiResult)(t)}t.fileUploadSettingsGet=s},115565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(157509),t),i.__exportStar(n(251405),t)},229287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(176968),t),i.__exportStar(n(482155),t),i.__exportStar(n(115565),t),i.__exportStar(n(105574),t),i.__exportStar(n(656395),t)},105574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(522557),t)},388486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostLTIDomainRequestPubV1=t.LearnGetLTIDomainsRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/public/v1/lti/domains",e)}}t.LearnGetLTIDomainsRequestPubV1=r;class s extends i.LearnApiPostRequest{constructor(){super("/public/v1/lti/domains")}}t.LearnPostLTIDomainRequestPubV1=s},594949:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostLTIPlacementRequestPubV1=t.LearnGetLTIPlacementsRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiGetPagedCollectionRequest{constructor(e){super("/public/v1/lti/placements",e)}}t.LearnGetLTIPlacementsRequestPubV1=r;class s extends i.LearnApiPostRequest{constructor(){super("/public/v1/lti/placements")}}t.LearnPostLTIPlacementRequestPubV1=s},522557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postLtiDomain=t.postLtiPlacement=t.getLtiPlacements=t.getLtiDomains=void 0;let i=n(482532),r=n(388486),s=n(594949);t.getLtiDomains=function(e,t){let n=new r.LearnGetLTIDomainsRequestPubV1({}).withSession(e);return t&&n.withPaging(t),(0,i.fetchJsonApiResult)(n)},t.getLtiPlacements=function(e,t){var n,r;let o=new s.LearnGetLTIPlacementsRequestPubV1({}).withSession(e);return(null===(n=null==t?void 0:t.filter)||void 0===n?void 0:n.paging)&&o.withPaging(t.filter.paging),(null===(r=null==t?void 0:t.filter)||void 0===r?void 0:r.sort)&&o.withSort(...t.filter.sort),(null==t?void 0:t.query)&&o.withQueryParams(t.query),(0,i.fetchJsonApiResult)(o)},t.postLtiPlacement=function(e,t){let n=new s.LearnPostLTIPlacementRequestPubV1().withSession(e);return n.withBody(t),(0,i.fetchJsonApiResult)(n)},t.postLtiDomain=function(e,t){let n=new r.LearnPostLTIDomainRequestPubV1().withSession(e);return n.withBody(t),(0,i.fetchJsonApiResult)(n)}},482155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(831111),t),i.__exportStar(n(393491),t)},831111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDeleteUserRequestPubV1=void 0;let i=n(25264);class r extends i.LearnApiDeleteRequest{constructor(e){super("/public/v1/users/%userId%",e)}}t.LearnDeleteUserRequestPubV1=r},393491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteUserPubV1=void 0;let i=n(482532),r=n(831111);async function s(e,t){let n=new r.LearnDeleteUserRequestPubV1({userId:t}).withSession(e);await (0,i.fetchJsonApiResult)(n)}t.deleteUserPubV1=s},25264:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(459837),t),i.__exportStar(n(135533),t),i.__exportStar(n(288598),t),i.__exportStar(n(656254),t)},459837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnApiPostFormRequest=t.LearnApiPostRequest=t.LearnApiPutRequest=t.LearnApiPatchRequest=t.LearnApiDeleteRequest=t.LearnApiRequestWithFormBody=t.LearnApiPostWithoutBodyRequest=t.LearnApiRequestWithJsonBody=t.LearnApiRequestWithBody=t.LearnApiGetPagedCollectionRequest=t.LearnApiGetFieldsRequest=t.LearnApiGetRequest=t.LearnApiFieldsRequest=t.LearnApiRequest=t.LEARN_API_PATH_PREFIX=void 0;let i=n(453626),r=n(135533),s=n(482532);t.LEARN_API_PATH_PREFIX="/learn/api";class o extends r.LearnRequest{getUrl(){let e=super.getRelativeUrl();return e&&(e=e.startsWith("/")?e:`/${e}`),s.urlManager.getUrl(t.LEARN_API_PATH_PREFIX+e)}requiresSession(){return!0}toString(){return`[LearnApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new i.APIResponseError(await e.json())}}t.LearnApiRequest=o;class a extends o{withFields(...e){return this.withQuery({fields:e})}}t.LearnApiFieldsRequest=a;class l extends o{constructor(e,t){super(s.HttpMethod.Get,e,t)}}t.LearnApiGetRequest=l,t.LearnApiGetFieldsRequest=class extends a{constructor(e,t){super(s.HttpMethod.Get,e,t)}},t.LearnApiGetPagedCollectionRequest=class extends l{withPaging(e){return this.withQuery({limit:e.limit,offset:e.offset,...e.offsetId?{offsetId:e.offsetId}:{}})}withSort(...e){return this.withQuery({sort:(null!=e?e:[]).map(e=>`${e.field}(${e.direction})`)})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("offset")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}};class c extends o{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(r.REQ_HEADER_CONTENT_TYPE,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new i.APIRequestValidationError("Request requires a body but none was provided")})}getBody(){return this.body}}t.LearnApiRequestWithBody=c;class d extends c{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}t.LearnApiRequestWithJsonBody=d,t.LearnApiPostWithoutBodyRequest=class extends o{constructor(e,t){super(s.HttpMethod.Post,e,t)}};class u extends c{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,i;t.append(e,null!==(i=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==i?i:"")}),t}}t.LearnApiRequestWithFormBody=u,t.LearnApiDeleteRequest=class extends o{constructor(e,t){super(s.HttpMethod.Delete,e,t)}},t.LearnApiPatchRequest=class extends d{constructor(e,t){super(s.HttpMethod.Patch,e,t)}},t.LearnApiPutRequest=class extends d{constructor(e,t){super(s.HttpMethod.Put,e,t)}},t.LearnApiPostRequest=class extends d{constructor(e,t){super(s.HttpMethod.Post,e,t)}},t.LearnApiPostFormRequest=class extends u{constructor(e,t){super(s.HttpMethod.Post,e,t)}}},135533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPostFormRequest=t.LearnRequestWithFormBody=t.LearnGetRequest=t.LearnRequestWithBody=t.LearnRequest=t.REQ_HEADER_COOKIE=t.REQ_HEADER_CONTENT_TYPE=t.REQ_HEADER_BLACKBOARD_XSRF=void 0;let i=n(482532),r=n(453626);t.REQ_HEADER_BLACKBOARD_XSRF="X-Blackboard-XSRF",t.REQ_HEADER_CONTENT_TYPE="Content-Type",t.REQ_HEADER_COOKIE="Cookie";class s{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){let e=this.path;if(this.pathParams)for(let[t,n]of Object.entries(this.pathParams))e=e.replace(`%${t}%`,encodeURIComponent(n));let t=this.getQueryString();return t&&(e+=`?${t}`),e}getUrl(){return i.urlManager.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){return this.session=e,e.xsrfToken&&this.headers.set(t.REQ_HEADER_BLACKBOARD_XSRF,e.xsrfToken),e.cookies&&this.headers.set(t.REQ_HEADER_COOKIE,e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(()=>{var e;if(this.requiresSession()&&!this.session)throw new r.APIRequestValidationError("Request requires session but no session info was added");let t=(null!==(e=this.path.match(/%\w+%/g))&&void 0!==e?e:[]).map(e=>e.slice(1,-1)).filter(e=>!this.pathParams[e]);if(t.length>0)throw new r.APIRequestValidationError(`Request is missing required path params: [${t}]`)})}async failed(e){throw new r.ResponseError(await e.text(),e.status,this.getUrl())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[LearnRequest: ${this.method} ${this.getUrl()}]`}}t.LearnRequest=s;class o extends s{constructor(e,n,i){super(e,n,i),this.getContentType()&&this.headers.set(t.REQ_HEADER_CONTENT_TYPE,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new r.APIRequestValidationError("Request requires a body but none was provided")})}}t.LearnRequestWithBody=o,t.LearnGetRequest=class extends s{constructor(e,t){super(i.HttpMethod.Get,e,t)}};class a extends o{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,i;t.append(e,null!==(i=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==i?i:"")}),t}}t.LearnRequestWithFormBody=a,t.LearnPostFormRequest=class extends a{constructor(e,t){super(i.HttpMethod.Post,e,t)}}},288598:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},656254:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},126068:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},281998:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},231181:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathParameterValue=void 0,t.getPathParameterValue=function(e,t){if(0===t.length)return"";let n=e.split("?")[0].split("/"),i=n.indexOf(t);return i+1<n.length?n[i+1]:""}},154833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIRequestValidationError=void 0;let i=n(630816);class r extends i.RequestError{}t.APIRequestValidationError=r},298338:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIResponseError=void 0,t.APIResponseError=class extends Error{get body(){return this.responseBody}constructor(e){super(e.message),this.responseBody=e,Object.setPrototypeOf(this,new.target.prototype)}}},630816:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=void 0,t.RequestError=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}},339935:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseError=void 0,t.ResponseError=class extends Error{get statusCode(){return this.status}get responseMessage(){return this.response}constructor(e,t,n){super(`HTTP ${t}: ${n}`),this.response=e,this.status=t,Object.setPrototypeOf(this,new.target.prototype)}}},453626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(154833),t),i.__exportStar(n(298338),t),i.__exportStar(n(630816),t),i.__exportStar(n(339935),t)},374212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(11641),t),i.__exportStar(n(453626),t),i.__exportStar(n(919026),t),i.__exportStar(n(482532),t)},919026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(345938),t),i.__exportStar(n(331866),t)},745618:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCognitiveProcess=t.LearnKnowledgeType=t.LearnAiGeneratedState=void 0,(s=n||(t.LearnAiGeneratedState=n={})).Yes="Yes",s.No="No",s.Originally="Originally",s.Modified="Modified",(o=i||(t.LearnKnowledgeType=i={})).Factual="Factual",o.Conceptual="Conceptual",o.Procedural="Procedural",o.Metacognitive="Metacognitive",(a=r||(t.LearnCognitiveProcess=r={})).Remember="Remember",a.Understand="Understand",a.Apply="Apply",a.Analyze="Analyze",a.Evaluate="Evaluate",a.Create="Create"},479019:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},305971:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ACADEMIC_LEVEL=t.MAX_ACADEMIC_LEVEL=t.MIN_ACADEMIC_LEVEL=t.MAX_GENERATED_QUESTION_COUNT=t.MIN_GENERATED_QUESTION_COUNT=t.MAX_GENERATED_LEARNING_MODULES_COUNT=t.MIN_GENERATED_LEARNING_MODULES_COUNT=void 0,t.MIN_GENERATED_LEARNING_MODULES_COUNT=1,t.MAX_GENERATED_LEARNING_MODULES_COUNT=20,t.MIN_GENERATED_QUESTION_COUNT=1,t.MAX_GENERATED_QUESTION_COUNT=10,t.MIN_ACADEMIC_LEVEL=1,t.MAX_ACADEMIC_LEVEL=10,t.DEFAULT_ACADEMIC_LEVEL=7},974602:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},928679:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},709043:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},839388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(745618),t),i.__exportStar(n(479019),t),i.__exportStar(n(305971),t),i.__exportStar(n(974602),t),i.__exportStar(n(928679),t),i.__exportStar(n(709043),t),i.__exportStar(n(893909),t),i.__exportStar(n(929150),t),i.__exportStar(n(793484),t)},893909:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},929150:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},793484:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},15874:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},598821:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAnnouncementPriority=t.LearnAnnouncemementStatus=t.LearnAnnouncementType=void 0,(s=n||(t.LearnAnnouncementType=n={})).Course="COURSE",s.System="SYSTEM",(o=i||(t.LearnAnnouncemementStatus=i={})).Draft="DRAFT",o.Posted="POSTED",o.Scheduled="SCHEDULED",(a=r||(t.LearnAnnouncementPriority=r={})).Standard="STANDARD",a.Important="IMPORTANT",a.Urgent="URGENT"},704286:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},154004:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CourseNameUsageType=void 0,(i=n||(t.CourseNameUsageType=n={})).CourseName="N",i.CourseId="I",i.CourseNameAndId="NI",i.CourseIdAndName="IN",i.UltraCourseIdAndName="UIN"},619835:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.MonthRepeatBy=t.CalendarItemRepeatRuleType=void 0,(i=n||(t.CalendarItemRepeatRuleType=n={})).ClassSchedule="C",i.ExternalCourseSchedule="E",i.OfficeHours="O",t.MonthRepeatBy="BYMONTHDAY"},463803:function(e,t){"use strict";var n,i,r,s,o,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarType=t.WeekDay=t.CalendarRecurFrequency=t.KnownCalendarIdentifier=void 0,(o=n||(t.KnownCalendarIdentifier=n={})).Institution="INSTITUTION",o.Personal="PERSONAL",(a=i||(t.CalendarRecurFrequency=i={})).Monthly="MONTHLY",a.Weekly="WEEKLY",a.Daily="DAILY",(l=r||(t.WeekDay=r={})).Sunday="SU",l.Monday="MO",l.Tuesday="TU",l.Wednesday="WE",l.Thursday="TH",l.Friday="FR",l.Saturday="SA",(s||(t.CalendarType=s={})).Gregorian="GREGORIAN"},405915:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CloudDownloadStatus=void 0,(i=n||(t.CloudDownloadStatus=n={})).Waiting="WAITING",i.Assigned="ASSIGNED",i.Running="RUNNING",i.Complete="COMPLETE",i.CompleteErrors="COMPLETE_ERRORS",i.Incomplete="INCOMPLETE"},621759:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},623800:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},559194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(621759),t),i.__exportStar(n(623800),t),i.__exportStar(n(558295),t),i.__exportStar(n(861246),t),i.__exportStar(n(207854),t),i.__exportStar(n(874634),t),i.__exportStar(n(856016),t),i.__exportStar(n(635280),t),i.__exportStar(n(259153),t)},558295:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.FirstDayOfWeek=void 0,(i=n||(t.FirstDayOfWeek=n={}))[i.Sunday=0]="Sunday",i[i.Monday=1]="Monday",i[i.Tuesday=2]="Tuesday",i[i.Wednesday=3]="Wednesday",i[i.Thursday=4]="Thursday",i[i.Friday=5]="Friday",i[i.Saturday=6]="Saturday"},861246:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},207854:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},874634:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.RowStatus=void 0,(i=n||(t.RowStatus=n={})).Enabled="0",i.SoftDelete="1",i.Disabled="2",i.DeletePending="3",i.CopyPending="4"},856016:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnContentPickerOption=t.LearnClassicSearchComparisonMethod=void 0,(r=n||(t.LearnClassicSearchComparisonMethod=n={})).Contains="contains",r.Equals="equals",r.NotBlank="notBlank",r.StartsWith="starts",(s=i||(t.LearnContentPickerOption=i={})).courseContent="courseContentPicker",s.courseLink="courseLinkPicker"},635280:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.convertStringToSortingDirectionEnum=t.convertStringToSortingColumnEnum=t.SortColumn=t.SortDirection=t.SortByEnum=void 0,(s=n||(t.SortByEnum=n={})).TITLE_ASC="title(asc)",s.TITLE_DESC="title(desc)",s.CREATED_DATE_ASC="createdDate(asc)",s.CREATED_DATE_DESC="createdDate(desc)",s.MODIFIED_DATE_ASC="modifiedDate(asc)",s.MODIFIED_DATE_DESC="modifiedDate(desc)",s.STUDENT_COUNT_ASC="studentCount(asc)",s.STUDENT_COUNT_DESC="studentCount(desc)",(o=i||(t.SortDirection=i={})).Ascending="asc",o.Descending="desc",(a=r||(t.SortColumn=r={})).SubmissionStatus="submissionStatus",a.GradingStatus="gradingStatus",t.convertStringToSortingColumnEnum=function(e){switch(e){case r.GradingStatus:return r.GradingStatus;case r.SubmissionStatus:return r.SubmissionStatus;default:return}},t.convertStringToSortingDirectionEnum=function(e){switch(e){case i.Ascending:return i.Ascending;case i.Descending:return i.Descending;default:return}}},259153:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},174793:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.FileRenderType=void 0,(i=n||(t.FileRenderType=n={})).Inline="inline",i.InlineOnly="inlineOnly",i.Attachment="attachment"},254775:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TIME_ACCOMMODATION_MULTIPLIER=t.TimeLimitException=t.DueDateException=void 0,(r=n||(t.DueDateException=n={})).Normal="Normal",r.Limited="Limited",r.Unlimited="Unlimited",(s=i||(t.TimeLimitException=i={})).Custom="Custom",s.Unlimited="Unlimited",s.NoAccommodation="Default",t.MAX_TIME_ACCOMMODATION_MULTIPLIER=44e5},209138:function(e,t,n){"use strict";var i,r,s,o,a,l;Object.defineProperty(t,"__esModule",{value:!0}),t.getDeployedAssessmentTypeByContentHandler=t.DeployedAssessmentType=t.AssessmentDeliveryType=t.RandomizeAnswers=void 0;let c=n(102956);(o=i||(t.RandomizeAnswers=i={})).Always="ALWAYS",o.Never="NEVER",o.PerQuestion="PER_QUESTION",(a=r||(t.AssessmentDeliveryType=r={})).Assessment="Assessment",a.Section="Section",a.Item="Item",(l=s||(t.DeployedAssessmentType=s={})).Assignment="assignment",l.Survey="survey",l.Test="test",l.Discussion="discussion",l.ClassicAssignment="classicAssignment",l.Scorm="scorm",t.getDeployedAssessmentTypeByContentHandler=function(e){switch(e){case c.ContentHandlerHandle.UltraAssignment:return s.Assignment;case c.ContentHandlerHandle.TestLink:return s.Test;case c.ContentHandlerHandle.SurveyLink:return s.Survey;case c.ContentHandlerHandle.Discussion:return s.Discussion;case c.ContentHandlerHandle.ClassicAssignment:return s.ClassicAssignment;case c.ContentHandlerHandle.RusticiScorm:return s.Scorm}}},13756:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AttemptApiErrors=t.assessmentErrorCodes=void 0,t.assessmentErrorCodes=["bb-assessment-conflict-between-group-and-timelimit","bb-assessment-conflict-between-group-and-secure","bb-assessment-conflict-between-group-and-enforce-due-date","bb-assessment-conflict-between-due-date-and-enforce-due-date","bb-assessment-randomize-answers-cannot-change","bb-assessment-timelimit-cannot-change"],(i=n||(t.AttemptApiErrors=n={})).AttemptCompletedOrForceCompletion="bb-rest-attempt-completed-or-force-completion",i.AttemptPastDue="bb-rest-attempt-past-due-exception"},306418:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentExceptionType=void 0,(i=n||(t.AssessmentExceptionType=n={})).Group="group",i.User="user"},609401:function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.getAssessmentTypeByContentHandler=t.AssessmentType=void 0;let s=n(102956);(r=i||(t.AssessmentType=i={})).Test="Test",r.Quiz="Quiz",r.Survey="Survey",r.Assignment="Assignment",r.UltraAssignment="UltraAssignment",r.Pool="Pool",t.getAssessmentTypeByContentHandler=function(e){switch(e){case s.ContentHandlerHandle.ClassicAssignment:return i.Assignment;case s.ContentHandlerHandle.TestLink:return i.Test;case s.ContentHandlerHandle.UltraAssignment:return i.UltraAssignment;case s.ContentHandlerHandle.SurveyLink:return i.Survey}}},128284:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAssessmentEventType=void 0,(i=n||(t.LearnAssessmentEventType=n={})).AttemptStarted="ATTEMPT_STARTED",i.QuestionSaved="QUESTION_SAVED",i.QuestionSavedMultiple="QUESTION_SAVED_MULTIPLE",i.QuestionSavedBlank="QUESTION_SAVED_BLANK",i.QuestionSavedMultipleBlank="QUESTION_SAVED_MULTIPLE_BLANK",i.AttemptSubmitted="ATTEMPT_SUBMITTED"},1897:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},749612:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentFeedbackOption=t.AssessmentFeedbackMode=void 0,(r=n||(t.AssessmentFeedbackMode=n={})).NoneSpecified="ns",r.AfterSubmission="as",r.AfterSubmissionHideResults="ashr",r.OnSpecifiedDate="osd",r.AfterDueDate="add",r.AfterAvailEndDate="aaed",r.AfterAttemptGraded="aag",r.AfterIndividualGradeIsPosted="aiag",(s=i||(t.AssessmentFeedbackOption=i={})).IncorrectAnswers="INCORRECT_ANSWERS",s.InstructorFeedback="INSTRUCTOR_FEEDBACK",s.AllAnswers="ALL_ANSWERS",s.CorrectAnswers="CORRECT_ANSWERS",s.UserAnswers="USER_ANSWERS",s.Score="SCORE"},720686:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},232222:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(209138),t),i.__exportStar(n(13756),t),i.__exportStar(n(306418),t),i.__exportStar(n(609401),t),i.__exportStar(n(128284),t),i.__exportStar(n(1897),t),i.__exportStar(n(749612),t),i.__exportStar(n(720686),t),i.__exportStar(n(183513),t),i.__exportStar(n(449331),t),i.__exportStar(n(145758),t),i.__exportStar(n(76600),t),i.__exportStar(n(27579),t),i.__exportStar(n(165021),t),i.__exportStar(n(247962),t)},343435:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},71867:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},918466:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},448389:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},634728:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},183513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(343435),t),i.__exportStar(n(71867),t),i.__exportStar(n(918466),t),i.__exportStar(n(448389),t),i.__exportStar(n(634728),t),i.__exportStar(n(222270),t),i.__exportStar(n(379962),t),i.__exportStar(n(520296),t),i.__exportStar(n(375795),t)},222270:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},379962:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},520296:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},375795:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},145758:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},449331:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},76600:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnQuestionUploadFromFileStatus=void 0,(i=n||(t.LearnQuestionUploadFromFileStatus=n={})).Success="SUCCESS",i.Incomplete="INCOMPLETE",i.Error="ERROR"},161464:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CalculatedFormulaAnswerPrecisionType=t.CalculatedFormulaToleranceType=t.CalculatedFormulaAnswerFormatType=void 0,(s=n||(t.CalculatedFormulaAnswerFormatType=n={})).Normal="Normal",s.Exponential="Exponential",(o=i||(t.CalculatedFormulaToleranceType=i={})).Numeric="numeric",o.Percent="percent",(a=r||(t.CalculatedFormulaAnswerPrecisionType=r={})).Decimal="Decimal",a.SignificantFigures="SigFig"},522965:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},207986:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},115317:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.FIMBAnswerEvaluationType=void 0,(i=n||(t.FIMBAnswerEvaluationType=n={})).Contains="CONTAINS",i.Exact="EXACT",i.Matches="MATCHES"},402353:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.HotspotAreaType=void 0,(i=n||(t.HotspotAreaType=n={})).Rectangle="Rectangle",i.Polygon="Polygon",i.Circle="Circle"},27579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(161464),t),i.__exportStar(n(522965),t),i.__exportStar(n(207986),t),i.__exportStar(n(115317),t),i.__exportStar(n(402353),t),i.__exportStar(n(596837),t),i.__exportStar(n(849385),t),i.__exportStar(n(811786),t),i.__exportStar(n(362357),t),i.__exportStar(n(336868),t),i.__exportStar(n(717378),t),i.__exportStar(n(630740),t)},596837:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.MatchingNumberType=void 0,(i=n||(t.MatchingNumberType=n={})).None="none",i.Arabic="arabic",i.Roman="roman",i.LetterUpper="letter_upper",i.LetterLower="letter_lower"},849385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},630740:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},811786:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionSubType=void 0,(i=n||(t.QuestionSubType=n={})).CloudFile="CLOUD_FILE",i.Embedded="EMBEDDED",i.File="FILE",i.Text="TEXT",i.Unknown="UNKNOWN"},362357:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},336868:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionType=void 0,(i=n||(t.QuestionType=n={})).CalculatedFormula="calculated",i.CalculatedNumeric="numeric",i.Either="eitherOr",i.Essay="essay",i.FIMB="fimb",i.Hotspot="hotspot",i.Matching="matching",i.Multiple="multipleanswer",i.PageBreak="pageBreak",i.PresentationOnly="presentation",i.QuestionBlock="questionBlock",i.OpinionScale="opinionScale"},717378:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TrueFalseAnswerType=void 0,(i=n||(t.TrueFalseAnswerType=n={})).TrueFalse="true_false",i.AgreeDisagree="agree_disagree",i.RightWrong="right_wrong",i.YesNo="yes_no",i.UserEnteredLabels="user_entered_labels"},165021:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeAssignUniqueHandle=void 0,t.safeAssignUniqueHandle="mdb-sa"},247962:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TimerCompletion=void 0,(i=n||(t.TimerCompletion=n={})).Continual="CONTINUAL",i.HardStop="HARDSTOP"},355667:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},999873:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},663862:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},627469:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},405:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},639621:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},679280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(999873),t),i.__exportStar(n(663862),t),i.__exportStar(n(627469),t),i.__exportStar(n(405),t),i.__exportStar(n(639621),t)},769013:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAdaptiveReleaseCriteriaType=void 0,(i=n||(t.LearnAdaptiveReleaseCriteriaType=n={})).ACL="ACL",i.Date="Date_Range",i.ForcedSequence="Pre_Content",i.Grade="Grade_Range",i.GradePercentage="Grade_Range_Percentage"},801893:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},123545:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},532797:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},102956:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentHandlerHandle=void 0,(i=n||(t.ContentHandlerHandle=n={})).Attendance="resource/x-bb-attendance",i.Audio="resource/x-bb-audio",i.Blog="resource/x-bb-bloglink",i.ClassicAssignment="resource/x-bb-assignment",i.CourseLink="resource/x-bb-courselink",i.Discussion="resource/x-bb-forumlink",i.Document="resource/x-bb-document",i.ExternalLink="resource/x-bb-externallink",i.File="resource/x-bb-file",i.Folder="resource/x-bb-folder",i.LearningModule="resource/x-bb-lesson",i.Image="resource/x-bb-image",i.Journal="resource/x-bb-journallink",i.Kaltura="resource/x-osv-kaltura/mashup",i.LtiLink="resource/x-bb-blti-link",i.LtiPlacement="resource/x-bb-bltiplacement",i.Page="resource/x-bb-page",i.PartnerCloud="resource/x-bbgs-partner-cloud",i.RusticiScorm="resource/x-plugin-scormengine",i.SurveyLink="resource/x-bb-asmt-survey-link",i.TestLink="resource/x-bb-asmt-test-link",i.UltraAssignment="resource/x-bb-asmt-agn-link",i.Unknown="resource/x-bb-unknown",i.Video="resource/x-bb-video",i.Wiki="resource/x-bb-wiki"},192529:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},222109:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentReviewState=void 0,(i=n||(t.ContentReviewState=n={})).None="None",i.Started="Started",i.Completed="Completed",i.Unlocked="Unlocked"},840297:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ScormScoringMethod=void 0,(i=n||(t.ScormScoringMethod=n={})).Score="SCORE",i.Completion="COMPLETION",i.Satisfaction="SATISFACTION"},863630:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.RootContentFolderNames=t.ContentType=void 0,(r=n||(t.ContentType=n={})).Assignment="assignment",r.Attendance="attendance",r.Audio="audio",r.Blog="blog",r.CollaborativeCloud="collaborative-cloud",r.CollaborativeGoogleCloud="cloud-collaboration-google",r.Course="course",r.Calculation="calculation",r.Discussion="discussion",r.DocumentBlank="document-blank",r.DocumentCloud="document-cloud",r.DocumentGoogle="document-google",r.Document="document-text",r.Exam="exam",r.Folder="folder",r.FolderOpen="folder-open",r.Homework="homework",r.Journal="journal",r.LearningModule="learning-module",r.Link="link",r.LTI="lti",r.OverallGrade="overall-grade",r.Pdf="pdf",r.Photo="photo",r.Presentation="presentation",r.Quiz="quiz",r.Root="ROOT",r.Scorm="scormengine",r.Spreadsheet="spreadsheet",r.Survey="survey",r.Test="test",r.Textbook="textbook",r.Video="video",r.Zip="zip",(s=i||(t.RootContentFolderNames=i={})).Root="ROOT",s.Interactive="INTERACTIVE",s.Indirect="INDIRECT"},629870:function(e,t,n){"use strict";var i,r,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentVisibility=t.fileAssociationModeAllowsDownload=t.FileAssociationMode=t.MAX_LEARNING_MODULE_THUMBNAIL_ALT_TEXT_LENGTH=void 0,n(102956),t.MAX_LEARNING_MODULE_THUMBNAIL_ALT_TEXT_LENGTH=255,(s=i||(t.FileAssociationMode=i={})).Embed="EMBED",s.EmbedOnly="EMBED_ONLY",s.Link="LINK",t.fileAssociationModeAllowsDownload=function(e){return e!==i.EmbedOnly},(o=r||(t.ContentVisibility=r={})).Visible="VISIBLE",o.Hidden="HIDDEN",o.Restricted="PARTIALLY_VISIBLE"},204995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(769013),t),i.__exportStar(n(532797),t),i.__exportStar(n(102956),t),i.__exportStar(n(192529),t),i.__exportStar(n(629870),t),i.__exportStar(n(222109),t),i.__exportStar(n(863630),t),i.__exportStar(n(801893),t),i.__exportStar(n(123545),t),i.__exportStar(n(840297),t)},75668:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseMessageType=t.StudentMessageAvailability=void 0,(r=n||(t.StudentMessageAvailability=n={})).MessageToAnyone="msg_to_anyone",r.MessageToStaffAndStudents="msg_to_staff_students",r.MessageToStaff="msg_to_staff",r.ReplyOnly="reply_to_msg",(s=i||(t.LearnCourseMessageType=i={})).System="System",s.Normal="Normal",s.NotSupported="NotSupported"},399037:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},702465:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},847892:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},550693:function(e,t){"use strict";var n,i,r,s,o,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.CourseEnrollment=t.CourseViewOption=t.CourseUltraStatus=t.CourseDuration=t.COURSE_BANNER_DEFAULT_FILE_LOCATION=t.MAX_BANNER_ALT_TEXT_LENGTH=void 0,t.MAX_BANNER_ALT_TEXT_LENGTH=100,t.COURSE_BANNER_DEFAULT_FILE_LOCATION="default",(o=n||(t.CourseDuration=n={})).Continuous="CONTINUOUS",o.DateRange="DATE_RANGE",o.FixedNumDays="FIXED_NUM_DAYS",o.UseTerm="USE_TERM",(a=i||(t.CourseUltraStatus=i={})).Undecided="UNDECIDED",a.Classic="CLASSIC",a.Ultra="ULTRA",a.UltraPreview="ULTRAPREVIEW",(l=r||(t.CourseViewOption=r={})).Instructor_choice="INSTRUCTOR_CHOICE",l.Choose_ultra="CHOOSE_ULTRA",l.Choose_classic="CHOOSE_CLASSIC",(c=s||(t.CourseEnrollment=s={})).InstructorLed="INSTRUCTOR_LED",c.SelfEnrollment="SELF_ENROLLMENT",c.EmailEnrollment="EMAIL_ENROLLMENT"},907978:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageLifeCycle=void 0,(i=n||(t.MessageLifeCycle=n={})).Published="PUBLISHED",i.Deleted="DELETED",i.Drafted="DRAFT"},727721:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},435904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUE_DATE_HAS_PASSED_CODE=void 0,t.DUE_DATE_HAS_PASSED_CODE="dueDateHasPassed"},508328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(727721),t),i.__exportStar(n(435904),t),i.__exportStar(n(907978),t)},424507:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},636562:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.AttemptOverrideStatus=t.AttemptStatus=void 0,(r=n||(t.AttemptStatus=n={})).NotAttempted="NOT_ATTEMPTED",r.Abandoned="ABANDONED",r.InProgress="IN_PROGRESS",r.Suspended="SUSPENDED",r.Canceled="CANCELED",r.NeedsGrading="NEEDS_GRADING",r.Completed="COMPLETED",r.InMoreProgress="IN_MORE_PROGRESS",r.NeedsMoreGrading="NEEDS_MORE_GRADING",r.Saved="SAVED",(s=i||(t.AttemptOverrideStatus=i={})).NoOverride="NO_OVERRIDE",s.FeedbackOverride="FEEDBACK_OVERRIDE",s.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE"},661554:function(e,t){"use strict";var n,i,r,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.SubmissionType=t.AttemptReceiptResponseStatusType=t.ReconciliationMode=void 0,(n||(t.ReconciliationMode=n={})).Custom="CUSTOM",(s=i||(t.AttemptReceiptResponseStatusType=i={})).ReceiptAndAttemptExist="ReceiptAndAttemptExist",s.ReceiptExistsButAttemptDoesNot="ReceiptExistsButAttemptDoesNot",s.ReceiptExistsNoAccessToAttempt="ReceiptExistsNoAccessToAttempt",s.ReceiptExistsColumnSoftDeleted="ReceiptExistsColumnSoftDeleted",(o=r||(t.SubmissionType=r={})).ManuallySubmitted="MANUALLY_SUBMITTED",o.AutomaticallySubmittedByBrowser="AUTOMATICALLY_SUBMITTED_BY_BROWSER",o.AutomaticallySubmittedByServer="AUTOMATICALLY_SUBMITTED_BY_SERVER",o.Unknown="UNKNOWN"},685767:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},978801:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},383313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(424507),t),i.__exportStar(n(636562),t),i.__exportStar(n(661554),t),i.__exportStar(n(685767),t),i.__exportStar(n(978801),t),i.__exportStar(n(293889),t),i.__exportStar(n(60602),t),i.__exportStar(n(345992),t),i.__exportStar(n(68400),t)},293889:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},68400:function(e,t,n){"use strict";var i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnAssetProcessorAssetOriginalityScoreType=t.LearnAssetProcessorAssetOriginalityPostStatus=t.LearnAssetProcessorAssetOriginalityStatus=t.ASSET_PROCESSOR_KEY=void 0,n(232222),t.ASSET_PROCESSOR_KEY="lti-asset-processor-submission-event-handler",(o=i||(t.LearnAssetProcessorAssetOriginalityStatus=i={})).Processed="Processed",o.Processing="Processing",o.Pending="Pending",o.PendingManual="PendingManual",o.Failed="Failed",o.NotReady="NotReady",o.NotProcessed="NotProcessed",(a=r||(t.LearnAssetProcessorAssetOriginalityPostStatus=r={})).PostFailed="PostFailed",a.PostAbandoned="PostAbandoned",a.NotPosted="NotPosted",a.Posted="Posted",(s||(t.LearnAssetProcessorAssetOriginalityScoreType=s={})).Originality="Originality"},60602:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},345992:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},295219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(232222)},272408:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CalculationType=void 0,(i=n||(t.CalculationType=n={})).NonCalculated="NON_CALCULATED",i.Total="TOTAL",i.Average="AVERAGE",i.WeightedTotal="WEIGHTED_TOTAL",i.MinMax="MINMAX",i.Custom="CUSTOM"},689069:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},865808:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},371145:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.GraderType=void 0,(i=n||(t.GraderType=n={})).All="ALL",i.Groups="GROUPS",i.None="NONE",i.Random="RANDOM"},575685:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},454239:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnDownloadTestResultsAttempts=t.LearnDownloadTestResultsFormatOfResults=t.LearnDownloadTestResultsDelimiterType=void 0,(s=n||(t.LearnDownloadTestResultsDelimiterType=n={})).Comma="COMMA",s.Tab="TAB",(o=i||(t.LearnDownloadTestResultsFormatOfResults=i={})).User="USER",o.QuestionAndUser="QUESTION_AND_USER",(a=r||(t.LearnDownloadTestResultsAttempts=r={})).AllAttempts="ALL",a.ValidAttempts="VALID"},84098:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},327171:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},912075:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},525143:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.KnownGradebookCategoryTitle=void 0,(i=n||(t.KnownGradebookCategoryTitle=n={})).Assignment="Assignment.name",i.Attendance="Attendance.name",i.Blog="Blog.name",i.Calculation="Calculation.name",i.Discussion="Discussion.name",i.Exam="Exam.name",i.Homework="Homework.name",i.Journal="Journal.name",i.LTI="Lti.name",i.Presentation="Presentation.name",i.Quiz="Quiz.name",i.ScormEngine="Scormengine.name",i.Survey="Survey.name",i.Test="Test.name"},201836:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},705074:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.AttemptAggregationModel=t.FormativeIndicator=void 0,(r=n||(t.FormativeIndicator=n={})).NonFormative="NOT_FORMATIVE",r.NotVisibleToStudents="FORMATIVE_NOT_VISIBLE_TO_STUDENTS",r.VisibleToStudents="FORMATIVE_VISIBLE_TO_STUDENTS",(s=i||(t.AttemptAggregationModel=i={})).Average="AVERAGE",s.First="FIRST",s.Highest="HIGHEST",s.Last="LAST",s.Lowest="LOWEST"},555147:function(e,t){"use strict";var n,i,r,s,o,a,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.GradesDownloadDataScopeType=t.GradesDownloadDateFilter=t.GradesDownloadSaveLocation=t.GradesDownloadDelimiterType=void 0,(o=n||(t.GradesDownloadDelimiterType=n={})).Tab="TAB",o.Comma="COMMA",(a=i||(t.GradesDownloadSaveLocation=i={})).MyDevice="MYDEVICE",a.ContentCollection="CONTENTCOLLECTION",(l=r||(t.GradesDownloadDateFilter=r={})).AllTime="ALLTIME",l.SixMonths="SIXMONTHS",l.ThirtyDays="THIRTYDAYS",l.FourteenDays="FOURTEENDAYS",l.SevenDays="SEVENDAYS",l.OneDay="ONEDAY",(c=s||(t.GradesDownloadDataScopeType=s={})).All="ALL",c.ByColumns="BYCOLUMNS",c.HistoryLog="HISTORYLOG",c.HistoryLogAll="HISTORYLOGALL"},556095:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnGradeScoreDesignation=t.GradeStatus=t.ManualGradeStatus=void 0,(s=n||(t.ManualGradeStatus=n={})).GradingInProgress="GRADING_IN_PROGRESS",s.IsPosted="IS_POSTED",s.ReadyToPost="READY_TO_POST",s.NoOverride="NO_OVERRIDE",(o=i||(t.GradeStatus=i={})).Graded="GRADED",o.NeedsGrading="NEEDS_GRADING",(a=r||(t.LearnGradeScoreDesignation=r={})).AttemptScore="a",a.None="-",a.OverrideScore="m"},759631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(383313),t),i.__exportStar(n(295219),t),i.__exportStar(n(272408),t),i.__exportStar(n(865808),t),i.__exportStar(n(371145),t),i.__exportStar(n(575685),t),i.__exportStar(n(454239),t),i.__exportStar(n(84098),t),i.__exportStar(n(327171),t),i.__exportStar(n(912075),t),i.__exportStar(n(525143),t),i.__exportStar(n(705074),t),i.__exportStar(n(556095),t),i.__exportStar(n(555147),t),i.__exportStar(n(580904),t),i.__exportStar(n(821844),t),i.__exportStar(n(694139),t),i.__exportStar(n(201836),t),i.__exportStar(n(689069),t)},580904:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},821844:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaScaleType=void 0,(i=n||(t.SchemaScaleType=n={})).Tabular="TABULAR",i.Score="SCORE",i.Text="TEXT",i.Percent="PERCENT",i.Complete="COMPLETE"},694139:function(e,t){"use strict";var n,i,r,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.convertStringToGradingStatusFilterKeyOption=t.GradingStatusFilterKeyOption=t.convertStringToStudentStatusFilterKeyOption=t.DelegatedGradingFilterKeyOption=t.StudentStatusFilterKeyOption=void 0,(s=n||(t.StudentStatusFilterKeyOption=n={})).AllStatuses="allStatuses",s.NoAttempt="noAttempt",s.AttemptInProgress="attemptInProgress",s.AttemptSubmitted="attemptSubmitted",s.NoEntry="noEntry",s.EntryMade="entryMade",s.AnyAttemptsSubmitted="anyAttemptsSubmitted",(i||(t.DelegatedGradingFilterKeyOption=i={})).MyStudentsToGrade="myStudentsToGrade",t.convertStringToStudentStatusFilterKeyOption=function(e){var t;return null!==(t=Object.values(n).find(t=>t===e))&&void 0!==t?t:n.AllStatuses},(o=r||(t.GradingStatusFilterKeyOption=r={})).AllStatuses="allStatuses",o.NeedsGrading="needsGrading",o.GradeNeedsPosting="gradeNeedsPosting",o.NothingToGrade="nothingToGrade",o.Completed="completedAttempt",t.convertStringToGradingStatusFilterKeyOption=function(e){var t;return null!==(t=Object.values(r).find(t=>t===e))&&void 0!==t?t:r.AllStatuses}},808971:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.GroupsImportApiErrors=t.LearnGroupSetExportType=void 0,(r=n||(t.LearnGroupSetExportType=n={})).Groups="groups",r.Members="members",r.GroupsAndMembers="groupsandmembers",(s=i||(t.GroupsImportApiErrors=i={})).InvalidFileFormat="bb-group-import-file-is-not-csv",s.EmptyFile="bb-group-import-file-is-empty",s.FileNotFound="bb-group-import-file-not-found-in-given-location"},830069:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},377530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(254775),t),i.__exportStar(n(232222),t),i.__exportStar(n(355667),t),i.__exportStar(n(679280),t),i.__exportStar(n(204995),t),i.__exportStar(n(75668),t),i.__exportStar(n(399037),t),i.__exportStar(n(702465),t),i.__exportStar(n(550693),t),i.__exportStar(n(847892),t),i.__exportStar(n(508328),t),i.__exportStar(n(759631),t),i.__exportStar(n(808971),t),i.__exportStar(n(830069),t),i.__exportStar(n(644007),t),i.__exportStar(n(490147),t),i.__exportStar(n(257151),t),i.__exportStar(n(709320),t),i.__exportStar(n(590314),t),i.__exportStar(n(634785),t),i.__exportStar(n(619262),t),i.__exportStar(n(906333),t),i.__exportStar(n(664507),t),i.__exportStar(n(686531),t),i.__exportStar(n(727468),t),i.__exportStar(n(733709),t),i.__exportStar(n(617186),t),i.__exportStar(n(636919),t),i.__exportStar(n(310011),t)},644007:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},545429:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},490147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(545429),t)},257151:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},709320:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},590314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(112e3),t),i.__exportStar(n(720894),t)},112e3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},720894:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.QuestionAnalysisReportSummaryAttempt=t.QuestionAnalysisReportState=void 0,(r=n||(t.QuestionAnalysisReportState=n={})).Complete="Complete",r.Delete="Delete",r.Error="Error",r.InProgress="InProgress",r.Unknown="Unknown",(s=i||(t.QuestionAnalysisReportSummaryAttempt=i={})).First="First",s.Last="Last"},321043:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceDeletionStatus=t.ResourceType=t.ResourceSortField=void 0,(s=n||(t.ResourceSortField=n={})).FileName="fileName",s.CreationDate="resourceCreationDate",s.FileSize="fileSize",s.Location="location",(o=i||(t.ResourceType=i={})).File="FILE",o.Folder="FOLDER",(a=r||(t.ResourceDeletionStatus=r={})).Deleting="DELETING",a.Error="ERROR"},310011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(321043),t)},634785:function(e,t){"use strict";var n,i,r,s,o;Object.defineProperty(t,"__esModule",{value:!0}),t.RubricType=t.RubricPreferenceValue=t.RubricPreferenceKey=void 0,(n||(t.RubricPreferenceKey=n={})).SHOW_DESCRIPTION="show.description",(s=i||(t.RubricPreferenceValue=i={})).TRUE="true",s.FALSE="false",(o=r||(t.RubricType=r={})).PERCENTAGE="PERCENTAGE",o.PERCENTAGE_RANGE="PERCENTAGE_RANGE",o.POINTS="NUMERIC",o.POINTS_RANGE="NUMERIC_RANGE"},664507:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnPluginStatus=void 0,(i=n||(t.LearnPluginStatus=n={})).Available="Y",i.Unavailable="N",i.Inactive="I",i.Corrupt="C"},619262:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(902398),t),i.__exportStar(n(78659),t)},902398:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},78659:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnScormGradebookScoreTiming=void 0,(i=n||(t.LearnScormGradebookScoreTiming=n={})).WhenPackageCompletes="WHEN_PACKAGE_COMPLETES",i.WhenScoCompletesLatestScore="WHEN_SCO_COMPLETES_LATEST_SCORE"},906333:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},306081:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseTaskLogType=void 0,(i=n||(t.LearnCourseTaskLogType=n={})).CourseCopy="CourseCopy",i.Import="Import",i.Restore="Restore"},47051:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.LearnCourseCxTaskOperation=void 0,(i=n||(t.LearnCourseCxTaskOperation=n={})).Import="IMPORT",i.Export="EXPORT",i.Archive="ARCHIVE",i.Restore="RESTORE"},686531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(306081),t),i.__exportStar(n(47051),t)},733709:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.TermDuration=void 0,(i=n||(t.TermDuration=n={})).Continuous="CONTINUOUS",i.DateRange="DATE_RANGE",i.FixedNumDays="FIXED_NUM_DAYS"},727468:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.KnownTool=t.LearnCourseToolType=void 0,(r=n||(t.LearnCourseToolType=n={}))[r.System=0]="System",r[r.Course=1]="Course",r[r.Organization=2]="Organization",r[r.ContentHander=3]="ContentHander",(s=i||(t.KnownTool=i={})).CourseRoster="course_roster",s.Announcements="announcements",s.Groups="groups",s.Messages="messages",s.Collab="bb-collab-ultra"},617186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},636919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(899663),t),i.__exportStar(n(791302),t)},899663:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},791302:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},157668:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CourseEntitlement=void 0,(i=n||(t.CourseEntitlement=n={})).ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",i.MessageAllMembersInCourse="course.conversations.message-all-members.CREATE",i.MessageAllActAsInstructorInCourse="course.conversations.message-all-act-as-instructor-roles.CREATE",i.MessageAllStudentsInCourse="course.conversations.message-all-students.CREATE"},566726:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},58062:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INPUT_TOO_LONG=void 0,t.INPUT_TOO_LONG="bb-rest-input-too-long"},345938:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(839388),t),i.__exportStar(n(15874),t),i.__exportStar(n(559194),t),i.__exportStar(n(174793),t),i.__exportStar(n(377530),t),i.__exportStar(n(174656),t),i.__exportStar(n(598821),t),i.__exportStar(n(704286),t),i.__exportStar(n(154004),t),i.__exportStar(n(619835),t),i.__exportStar(n(463803),t),i.__exportStar(n(157668),t),i.__exportStar(n(566726),t),i.__exportStar(n(922385),t),i.__exportStar(n(400060),t),i.__exportStar(n(102731),t),i.__exportStar(n(101466),t),i.__exportStar(n(242088),t),i.__exportStar(n(754157),t),i.__exportStar(n(645367),t),i.__exportStar(n(126050),t),i.__exportStar(n(987250),t),i.__exportStar(n(628941),t),i.__exportStar(n(405915),t),i.__exportStar(n(58062),t),i.__exportStar(n(803081),t),i.__exportStar(n(45797),t)},922385:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},400060:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(182735),t)},182735:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},102731:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},101466:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESPONSE_ERROR_EXPOSED_PASSWORD_VIOLATION=t.RESPONSE_ERROR_CONTENT_POLICY_VIOLATION=t.RESPONSE_ERROR_MINIMUM_AGE_POLICY_VIOLATION=t.RESPONSE_ERROR_REUSE_POLICY_VIOLATION=t.EXPOSED_PASSWORD_PROTECTION_VIOLATION=t.CONTENT_POLICY_VIOLATION=t.MINIMUM_AGE_POLICY_VIOLATION=t.REUSE_POLICY_VIOLATION=void 0,t.REUSE_POLICY_VIOLATION="reusePolicyViolation",t.MINIMUM_AGE_POLICY_VIOLATION="minimumAgePolicyViolation",t.CONTENT_POLICY_VIOLATION="contentPolicyViolation",t.EXPOSED_PASSWORD_PROTECTION_VIOLATION="exposedPasswordProtectionViolation",t.RESPONSE_ERROR_REUSE_POLICY_VIOLATION="bb-blackboard-core-reuse-policy-violated",t.RESPONSE_ERROR_MINIMUM_AGE_POLICY_VIOLATION="bb-blackboard-core-min-age-violated",t.RESPONSE_ERROR_CONTENT_POLICY_VIOLATION="bb-blackboard-core-content-policy-violated",t.RESPONSE_ERROR_EXPOSED_PASSWORD_VIOLATION="bb-blackboard-core-exposed-password-protection-violated"},181837:function(e,t){"use strict";var n,i,r,s,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CourseRoleBucket=t.CourseRoleAvailability=t.KnownCourseRoleIdentifier=void 0,(s=n||(t.KnownCourseRoleIdentifier=n={})).Student="S",s.Instructor="P",s.TeachingAssistant="T",s.CourseBuilder="B",s.Grader="G",s.Guest="U",s.Facilitator="BB_FACILITATOR",(o=i||(t.CourseRoleAvailability=i={})).Course="C",o.Organization="O",o.CourseAndOrganization="B",o.None="N",(a=r||(t.CourseRoleBucket=r={})).Grading="GRADING",a.Teaching="TEACHING",a.Supporting="SUPPORTING",a.Taking="TAKING",a.Visiting="VISITING"},242088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(181837),t),i.__exportStar(n(662582),t),i.__exportStar(n(720866),t)},662582:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},720866:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.KnownSystemRoleInternalName=t.KnownSystemRoleIdentifier=void 0,(r=n||(t.KnownSystemRoleIdentifier=n={})).AccountAdmin="A",r.CourseCreator="C",r.CourseSupport="R",r.Guest="U",r.Integration="X",r.Observer="O",r.Portal="Y",r.SystemAdmin="Z",r.SystemSupport="H",r.User="N",(s=i||(t.KnownSystemRoleInternalName=i={})).AccountAdmin="ACCOUNT_ADMIN",s.CourseCreator="COURSE_CREATOR",s.CourseSupport="COURSE_SUPPORT",s.Guest="GUEST",s.Integration="INTEGRATION",s.Observer="OBSERVER",s.Portal="PORTAL",s.SystemAdmin="SYSTEM_ADMIN",s.SystemSupport="SYSTEM_SUPPORT",s.User="USER",s.Default="USER",s.None="USER"},754157:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.QueueTaskType=t.QueueTaskStatus=void 0,(r=n||(t.QueueTaskStatus=n={})).Waiting="WAITING",r.Assigned="ASSIGNED",r.Running="RUNNING",r.Complete="COMPLETE",r.CompleteErrors="COMPLETE_ERRORS",r.Incomplete="INCOMPLETE",(s=i||(t.QueueTaskType=i={})).Copy="C",s.ContentExchange="X",s.ConvertToUltra="convertTOUltraQueuedOperation",s.AssessmentRegrade="ASSESSMENT_REGRADE",s.QuestionCopy="CopyQuestion",s.ProgressUpdateContent="courseProgressUpdateContent",s.Recycle="RecycleTask",s.DelegatedGraderDistribution="delegatedGraderDistribution",s.CloudStorageIntegrationDownload="downloadQueuedOperation",s.AssignmentExport="ExportAssignments",s.CalendarImport="calendar_import",s.BulkCopyAndConvertOperation="BulkCopyAndConvertOperation",s.BulkConvertOperation="BulkConvertOperation"},645367:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},432906:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_UPLOAD_SIZE_IN_BYTES=void 0,t.DEFAULT_MAX_UPLOAD_SIZE_IN_BYTES=2684354560},984781:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},121582:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},628941:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(984781),t),i.__exportStar(n(121582),t),i.__exportStar(n(802318),t),i.__exportStar(n(898473),t),i.__exportStar(n(892809),t),i.__exportStar(n(750386),t),i.__exportStar(n(432906),t)},802318:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationSettingContext=void 0,(i=n||(t.NotificationSettingContext=n={})).Course="COURSE",i.Org="ORG"},898473:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemPreferenceIndicator=void 0,(i=n||(t.SystemPreferenceIndicator=n={})).Yes="Y",i.No="N"},892809:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultLandingPageType=void 0,(i=n||(t.DefaultLandingPageType=n={})).ActivityStream="ActivityStream",i.CourseList="CourseList",i.InstitutionPage="InstitutionPage"},750386:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},803081:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},126050:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},862801:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},174656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(862801),t)},987250:function(e,t){"use strict";var n,i,r,s,o,a,l,c,d,u;Object.defineProperty(t,"__esModule",{value:!0}),t.LandingPage=t.VisibilityScope=t.Gender=t.EducationLevel=t.PreferredDisplayName=void 0,(a=n||(t.PreferredDisplayName=n={})).Given="GIVEN_NAME",a.Other="OTHER_NAME",a.Both="BOTH",(l=i||(t.EducationLevel=i={})).K8="K_8",l.HighSchool="HIGH_SCHOOL",l.Freshman="FRESHMAN",l.Sophomore="SOPHOMORE",l.Junior="JUNIOR",l.Senior="SENIOR",l.GraduateSchool="GRADUATE_SCHOOL",l.PostGraduateSchool="POST_GRADUATE_SCHOOL",l.Unknown="UNKNOWN",(c=r||(t.Gender=r={})).Female="FEMALE",c.Male="MALE",c.Other="OTHER",c.Unknown="UNKNOWN",(d=s||(t.VisibilityScope=s={})).Nobody="NOBODY",d.Classmates="CLASSMATES",d.Everyone="EVERYONE",(u=o||(t.LandingPage=o={})).ActivityStream="ActivityStream",u.CourseList="CourseList",u.InstitutionPage="InstitutionPage"},697323:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AssessmentExceptionTypePubV1=void 0,(i=n||(t.AssessmentExceptionTypePubV1=n={})).Group="GROUP",i.User="USER"},610536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(122970).__exportStar(n(697323),t)},5869:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},229217:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},601274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(610536),t),i.__exportStar(n(5869),t),i.__exportStar(n(229217),t)},997519:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},331866:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(601274),t),i.__exportStar(n(13019),t),i.__exportStar(n(298995),t),i.__exportStar(n(997519),t),i.__exportStar(n(250828),t)},879984:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PublicAvailability=void 0,(i=n||(t.PublicAvailability=n={})).Yes="Yes",i.No="No"},650694:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.LTIDomainSendUserData=t.LTIDomainStatus=void 0,(r=n||(t.LTIDomainStatus=n={})).Approved="Approved",r.Excluded="Excluded",r.NeedsApproval="NeedsApproval",(s=i||(t.LTIDomainSendUserData=i={})).Never="Never",s.SslOnly="SSLOnly",s.Always="Always"},250828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(650694),t),i.__exportStar(n(210617),t),i.__exportStar(n(879984),t)},210617:function(e,t){"use strict";var n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.LtiCloudDocumentType=t.PlacementType=void 0,(r=n||(t.PlacementType=n={})).Application="Application",r.AssetProcessor="AssetProcessor",r.ContentHandler="ContentHandler",r.ContentItemMessage="ContentItemMessage",r.System="System",r.Administrator="Administrator",r.UltraUI="UltraUI",r.BaseNavigation="BaseNavigation",r.Proctoring="Proctoring",r.CloudDocument="CloudDocument",(s=i||(t.LtiCloudDocumentType=i={})).Embedded="EmbeddedCD",s.EmbeddedGoogle="EmbeddedGoogleCD",s.CloudCollaboration="CloudCollaborationCD",s.CloudCollaborationGoogle="CloudCollaborationGoogleCD"},13019:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(625447),t),i.__exportStar(n(346109),t)},625447:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},346109:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},298995:function(e,t){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.PronounStatus=t.UNSAFE_PRONOUN_TEXT_ERROR_CODE=t.PRONOUN_MAX_LENGTH=t.PRONOUN_DELIMITER=void 0,t.PRONOUN_DELIMITER=",",t.PRONOUN_MAX_LENGTH=100,t.UNSAFE_PRONOUN_TEXT_ERROR_CODE="pronounNameXssViolation",(i=n||(t.PronounStatus=n={})).Approved="APPROVED",i.Pending="PENDING"},954467:function(e,t,n){"use strict";n.d(t,{a8:function(){return l},BQ:function(){return s},oh:function(){return ec},fm:function(){return el},QD:function(){return o},RF:function(){return ee.RF},$C:function(){return eC},kC:function(){return eI},Im:function(){return X},ZK:function(){return O},i8:function(){return u},Fe:function(){return j},ZY:function(){return q},YC:function(){return Q},zp:function(){return Z},YH:function(){return L},KR:function(){return x},ND:function(){return P},v7:function(){return N},DN:function(){return R},Oq:function(){return D},XD:function(){return T},$D:function(){return ef},t5:function(){return eg},k2:function(){return em},ts:function(){return en},Bi:function(){return er},_x:function(){return ei},dY:function(){return J},w9:function(){return eu},GR:function(){return es},wZ:function(){return et},sP:function(){return ey},xT:function(){return ev},$_:function(){return W},Q5:function(){return z},N0:function(){return Y}});var i,r,s,o,a=n(753031);class l extends a.SB{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/results/export",e)}}var c=n(482532),d=n(744819);function u(e,t,n){let i=new d.f(t).withQueryParams(n).withSession(e);return(0,c.fetchJsonApiResult)(i)}let p="/v1/courses/%courseId%",m=`${p}/gradebook/columns`,h=`${m}/%columnId%`,g=`${h}/exceptions`,f=`${g}/count`,b=`${p}/gradebook/memberships/%membershipId%/exceptions`,v=`${g}/memberships/%membershipId%`,y=`${g}/groups/%groupId%`;(i=s||(s={})).Unlimited="UNLIMITED",i.Fixed="FIXED",i.Relative="RELATIVE";class S extends a.wx{constructor(e){super(v,e)}}class C extends a.$v{constructor(e){super(v,e)}}class E extends a.wx{constructor(e){super(y,e)}}class I extends a.$v{constructor(e){super(y,e)}}class w extends a.SB{constructor(e){super(g,e)}}class A extends a.SB{constructor(e){super(f,e)}}class k extends a.SB{constructor(e){super(b,e)}}async function T(e,t,n){let i=new S(t).withSession(e).withBody(n);return(0,c.fetchJsonApiResult)(i)}async function P(e,t){let n=new C(t).withSession(e);await (0,c.fetchApiResult)(n)}async function D(e,t,n){let i=new E(t).withSession(e).withBody(n);return await (0,c.fetchJsonApiResult)(i)}async function x(e,t){let n=new I(t).withSession(e);await (0,c.fetchApiResult)(n)}async function R(e,t,n){let i=new w(t).withQueryParams(n).withSession(e);return(0,c.fetchJsonApiResult)(i)}async function L(e,t){let n=new A(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}async function N(e,t,n){let i=new k(t).withQueryParams(n).withSession(e);return(0,c.fetchJsonApiResult)(i)}let $=e=>{var t;let n;return e.headers.raw||""===(n=null!==(t=e.headers.get("Content-Disposition"))&&void 0!==t?t:"")||(n=null==(n=n.indexOf("filename*")>=0?decodeURIComponent(n.split("filename*=")[1].split("UTF-8")[1]):n.split("filename=")[1].split(";")[0])?void 0:n.replace(/['"]/g,"")),n};async function O(e,t,n,i){let r=new l({courseId:t,columnId:n}).withQueryParams(i).withSession(e),s=await (0,c.fetchApiResult)(r);return{filename:$(s),blob:await s.blob()}}n(596130);let G="/v1/courses/%courseId%/gradebook/columns/%columnId%",_=`${G}/groupAssociations/%groupId%/grades`,M=`${G}/users/%userId%`,B=`${G}/attempts/reminders`;class F extends a.SB{constructor(e){super(_,e)}}class U extends a.t9{constructor(e){super(M,e)}}class V extends a.SB{constructor(e){super(M,e)}}class H extends a.YX{constructor(e){super(B,e)}}function q(e,t){let n=new F(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}async function j(e,t){let n=new V(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}async function z(e,t,n){let i=new U(t).withSession(e).withBody(n);return(0,c.fetchJsonApiResult)(i)}async function W(e,t){let n=new H(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}var K=n(299541);function Z(e,t,n){let i=new K.AD(t).withSession(e);return n&&i.withQueryParams(n),(0,c.fetchJsonApiResult)(i)}function Q(e,t){let n=new K._2(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}function J(e,t,n){let i=new K.j7(t).withSession(e).withBody(n);return(0,c.fetchJsonApiResult)(i)}function Y(e,t,n){let i=new K.YW(t).withSession(e).withBody(n);return(0,c.fetchJsonApiResult)(i)}function X(e,t){let n=new K.r(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}var ee=n(709663);async function et(e,t){let n=new ee.Pe(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}async function en(e,t,n=[]){let i=new ee.fm(t).withSession(e);return n.length>0&&(i=i.withExpand(...n)),(0,c.fetchJsonApiResult)(i)}async function ei(e,t,n=[]){let i=new ee.jd(t).withSession(e);return n&&n.length>0&&(i=i.withExpand(...n)),(0,c.fetchJsonApiResult)(i)}async function er(e,t,n){let i={manualPoints:null!==n.points&&void 0!==n.points?n.points:"",manualFeedback:n.manualFeedback,autoPoints:n.autoPoints,questionAttempt:{}},r=new ee.W8(t).withSession(e).withBody(i);return(0,c.fetchJsonApiResult)(r)}async function es(e,t,n={},i=[],r){let s=new ee.ZD(t).withSession(e).withPaging(n);return r&&s.withQueryParams(r),i&&i.length>0&&(s=s.withExpand(...i)),(0,c.fetchJsonApiResult)(s)}let eo="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",ea=`${eo}/%gradeId%`;(r=o||(o={})).GradeId="gradeId",r.LastAttemptDate="lastAttemptDate";class el extends a.Ds{constructor(e){super(eo,e)}}class ec extends a.SB{constructor(e){super(ea,e)}}class ed extends a.B_{constructor(e){super("v1/courses/%courseId%/gradebook/prepareDownload",e)}}let eu=async(e,t,n)=>{let i=new ed(t).withBody(n).withSession(e);return await (0,c.fetchJsonApiResult)(i)};n(567053),n(70854),n(219604),n(802077);var ep=n(249873);async function em(e,t,n,i){let r=new ep.hU({courseId:t,columnId:n}).withSession(e).withBody(i);return(0,c.fetchJsonApiResult)(r)}var eh=n(995867);async function eg(e,t,n){let i=new eh.cS(t).withSession(e).withBody(n);return(0,c.fetchJsonApiResult)(i)}async function ef(e,t){let n=new eh.X5(t).withSession(e);return(0,c.fetchApiResult)(n)}var eb=n(150223);async function ev(e,t,n){let i=new eb.L(t).withSession(e);return n&&i.withQueryParams(n),(0,c.fetchJsonApiResult)(i)}async function ey(e,t){let n=new eb.U(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}var eS=n(928694);let eC=async(e,t)=>{let n=new eS.s(t).withSession(e);return(0,c.fetchJsonApiResult)(n)};n(378544),n(864209),n(780611);var eE=n(301649);let eI=(e,t)=>{let n=new eE.g(t).withSession(e);return(0,c.fetchJsonApiResult)(n)}},496120:function(e,t,n){"use strict";n.d(t,{BnC:function(){return eu},TqX:function(){return g},h0v:function(){return ep},ovf:function(){return M.o},iDW:function(){return m},SNh:function(){return h},McV:function(){return eA},iRb:function(){return ew},kcX:function(){return C},rfT:function(){return f},PJt:function(){return v},gQZ:function(){return y},VG2:function(){return S},ngf:function(){return tV},BQp:function(){return tl.BQ},SJR:function(){return K},O98:function(){return em},pHC:function(){return e1},FNw:function(){return e4},R37:function(){return e2},Z7d:function(){return e7},wGc:function(){return te},ohw:function(){return tl.oh},fmY:function(){return tl.fm},QDg:function(){return tl.QD},LQY:function(){return tN.LQ},AzN:function(){return td},Hsj:function(){return tt},Vie:function(){return p},srx:function(){return tQ},Pkm:function(){return W},tq_:function(){return G},mjt:function(){return $},MGk:function(){return F},yak:function(){return q},RTV:function(){return H},KVJ:function(){return ec},_nM:function(){return _._},Q$J:function(){return eM},HvS:function(){return eq},Wbz:function(){return N},KVV:function(){return L},CGz:function(){return T},bEJ:function(){return E.b},czX:function(){return eI},$CQ:function(){return tl.$C},kw8:function(){return e0},sHF:function(){return nc},acm:function(){return j.ac},Ysd:function(){return j.Ys},T0n:function(){return j.T0},kCM:function(){return tl.kC},Hn7:function(){return eP},y2J:function(){return eo},Vwz:function(){return en},WVZ:function(){return ei},ECF:function(){return er},zOC:function(){return ea},L$6:function(){return es},D0l:function(){return et},S9W:function(){return eS},A1x:function(){return ey},pzW:function(){return ev},Ug8:function(){return eC},x70:function(){return tu.x7},WnB:function(){return eO},OgR:function(){return eT},lzM:function(){return tD},E8D:function(){return tP},g7B:function(){return e3},p8Q:function(){return e6},J2$:function(){return eR},UjU:function(){return t7},oIX:function(){return tr},w6S:function(){return ts},sAK:function(){return to},yYO:function(){return tA},J_U:function(){return tw},lHP:function(){return ex},TZe:function(){return eG},JXy:function(){return tM},fyg:function(){return tU},hIc:function(){return tB},klr:function(){return tF},LU0:function(){return e$},iW6:function(){return tm},MQp:function(){return eV.MQ},Im$:function(){return tl.Im},_HO:function(){return tS},WRq:function(){return ty},hj4:function(){return tb},qZ4:function(){return tv},Rok:function(){return tC},ZKY:function(){return tl.ZK},i8y:function(){return tl.i8},uVV:function(){return eV.uV},HQE:function(){return tz},CV7:function(){return tW},j2:function(){return tj},FeW:function(){return tl.Fe},ZYv:function(){return tl.ZY},YCr:function(){return tl.YC},zpx:function(){return tl.zp},WiT:function(){return tX},ZX5:function(){return t0},Yx$:function(){return t6},yzO:function(){return t2},lLb:function(){return t4},WJ$:function(){return tu.WJ},HU8:function(){return tR},C0A:function(){return eV.C0},OrM:function(){return eF},XPp:function(){return eU},jdu:function(){return nl},SlR:function(){return eX},ziu:function(){return np},YHn:function(){return tl.YH},KRY:function(){return tl.KR},NDS:function(){return tl.ND},v7Q:function(){return tl.v7},DN0:function(){return tl.DN},Oqd:function(){return tl.Oq},XDk:function(){return tl.XD},$De:function(){return tl.$D},t5N:function(){return tl.t5},k2e:function(){return tl.k2},ts9:function(){return tl.ts},Bi2:function(){return tl.Bi},_xN:function(){return tl._x},cqI:function(){return eY},lZD:function(){return eV.lZ},A8I:function(){return nm},wFA:function(){return t8},p6X:function(){return t3},pDv:function(){return ta.p},hVK:function(){return ne.h},w64:function(){return nn},dYx:function(){return tl.dY},w9:function(){return tl.w9},GRx:function(){return tl.GR},wZ_:function(){return tl.wZ},sPL:function(){return tl.sP},xTX:function(){return tl.xT},$_n:function(){return tl.$_},c7z:function(){return eL},sUQ:function(){return tL},R5$:function(){return ns},FP8:function(){return tO},ZII:function(){return t$},awk:function(){return tG},Q5g:function(){return tl.Q5},N02:function(){return tl.N0},xJl:function(){return nr},w0S:function(){return no},F1$:function(){return th},RSb:function(){return tg}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E=n(62415),I=n(165132),w=n(482532),A=n(372730);class k extends A.SB{constructor(e){super("/v1/courses/%courseId%/ai/settings",e)}}async function T(e,t){let n=new k({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}var P=n(753031);class D extends P.SB{constructor(e){super("/v1/courses/%courseId%/ai/contents/%contentId%/suggest",e)}}class x extends P.B_{constructor(e){super("/v1/courses/%courseId%/assessments/ai/contents/%contentId%/question",e)}}class R extends P.B_{constructor(e){super("/v1/courses/%courseId%/ai/contents/%contentId%/keywords",e)}}function L(e,t,n,i){let r=(0,I.D)(i),s=new D({courseId:t,contentId:n}).withSession(e).withQueryParams(r);return(0,I.a)(s)}function N(e,t,n,i){let r=(0,I.D)(i),s=new x({courseId:t,contentId:n}).withSession(e).withBody(r);return(0,I.a)(s)}function $(e,t,n,i){let r=new R({courseId:t,contentId:n}).withSession(e).withBody(null!=i?i:{});return(0,w.fetchJsonApiResult)(r)}class O extends P.SB{constructor(e){super("/v1/courses/%courseId%/ai/bannerKeywords",e)}}function G(e,t){let n=new O({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}var _=n(432631),M=n(846302);(i=p||(p={})).Topics="Topics",i.Units="Units",i.Weeks="Weeks",i.Chapters="Chapters",i.Modules="Modules";class B extends P.SB{constructor(e){super("/v1/courses/%courseId%/ai/outline",e)}}async function F(e,t,n){let i=(0,I.D)(n),r=new B({courseId:t}).withSession(e).withQueryParams(i);return(0,I.a)(r)}(r=m||(m={})).Percentage="Percentage",r.PercentageRange="PercentageRange",r.Points="Points",r.PointsRange="PointsRange";class U extends P.SB{constructor(e){super("/v1/courses/%courseId%/rubrics/ai/rubric",e)}}class V extends P.SB{constructor(e){super("/v1/courses/%courseId%/assessments/ai/assessments/%assessmentId%/rubric",e)}}async function H(e,t,n){let i=(0,I.D)(n),r=new U({courseId:t}).withSession(e).withQueryParams(i);return(0,I.a)(r)}async function q(e,t,n,i){let r=(0,I.D)(i),s=new V({courseId:t,assessmentId:n}).withSession(e).withQueryParams(r);return(0,I.a)(s)}n(911209),n(485293);var j=n(812896),z=n(652550);async function W(e,t,n,i){let r=new z.g({courseId:t,contentId:n}).withSession(e).withPaging(i);return(0,w.fetchJsonApiResult)(r)}(s=h||(h={})).Title="title",s.StartDateRestriction="startDateRestriction",s.ModifiedDate="modifiedDate",s.Status="status",s.ReadCount="readCount";class K extends P.Ds{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class Z extends P.B_{constructor(e){super("/v1/courses/%courseId%/announcements",e)}}class Q extends P.$v{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class J extends P.SB{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class Y extends P.t9{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%",e)}}class X extends P.wx{constructor(e){super("/v1/courses/%courseId%/announcements/%announcementId%/status",e)}}class ee extends P.SB{constructor(e){super("/v1/courses/%courseId%/announcements/counts",e)}}async function et(e,t,n,i){let r=new K({courseId:t}).withSession(e).withPaging(n);return i&&r.withSort(...i),(0,w.fetchJsonApiResult)(r)}async function en(e,t,n){let i=new Z({courseId:t}).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}async function ei(e,t,n){let i=new Q({courseId:t,announcementId:n}).withSession(e);await (0,w.fetchApiResult)(i)}async function er(e,t,n){let i=new J({courseId:t,announcementId:n}).withSession(e);return(0,w.fetchJsonApiResult)(i)}async function es(e,t,n,i){let r=new Y({courseId:t,announcementId:n}).withSession(e).withBody(i);return(0,w.fetchJsonApiResult)(r)}async function eo(e,t){let n=new ee({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function ea(e,t,n,i){let r=new X({courseId:t,announcementId:n}).withSession(e).withBody({isRead:i});await (0,w.fetchJsonApiResult)(r)}class el extends P.SB{constructor(e){super("/v1/courses/%courseId%/assessments/ai/contents/%contentId%/authenticAssessments",e)}}function ec(e,t,n,i){let r=(0,I.D)(i),s=new el({courseId:t,contentId:n}).withSession(e).withQueryParams(r);return(0,I.a)(s)}var ed=n(607410);let eu="bb-assessment-conflict-external-referenced-questions";class ep extends ed.V{constructor(e){super(eu,w.HttpStatus.Conflict,e)}}(g||(g={})).ExternalQuestions="hasExternallyReferencedQuestions";class em extends P.Ds{constructor(e){super("/v1/courses/%courseId%/assessments",e)}}class eh extends P.SB{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}}class eg extends P.$v{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%",e)}async failed(e){let t=await e.json();if(e.status===w.HttpStatus.Conflict&&t.code===eu)throw new ep(this.path);await super.failed(e)}}class ef extends P.B_{constructor(e){super("v1/courses/%courseId%/assessments",e)}}class eb extends P.t9{constructor(e){super("v1/courses/%courseId%/assessments/%assessmentId%",e)}}async function ev(e,t,n){let i=new eh({courseId:t,assessmentId:n}).withSession(e);return(0,w.fetchJsonApiResult)(i)}async function ey(e,t,n){let i=new eg({courseId:t,assessmentId:n}).withSession(e);await (0,w.fetchApiResult)(i)}async function eS(e,t,n){let i=new ef({courseId:t}).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}async function eC(e,t,n,i){let r=new eb({courseId:t,assessmentId:n}).withSession(e).withBody(i);return(0,w.fetchJsonApiResult)(r)}var eE=n(275623);async function eI(e,t,n){let i=new eE.Q({courseId:t,attemptId:n}).withSession(e);return(0,w.fetchJsonApiResult)(i)}n(364854),n(211010);class ew extends P.Ds{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users",e)}}class eA extends P.SB{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/users/reports/states",e)}}n(71888),n(552766);var ek=n(546242);async function eT(e,t,n){let i=new ek.Ed(t).withSession(e);return(null==n?void 0:n.paging)&&i.withPaging(n.paging),(null==n?void 0:n.sort)&&i.withSort(...n.sort),(0,w.fetchJsonApiResult)(i)}function eP(e,t){let n=new ek.ZW(t).withSession(e);return(0,w.fetchJsonApiResult)(n)}n(363418);var eD=n(632371);async function ex(e,t){let n=new eD.hi({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function eR(e,t){let n=new eD.qd({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function eL(e,t,n){let i=new eD.VM({courseId:t}).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}var eN=n(648191);async function e$(e,t){let n=new eN.vk().withSession(e);return(null==t?void 0:t.paging)&&n.withPaging(t.paging),(null==t?void 0:t.sort)&&(Array.isArray(t.sort)?n.withSort(...t.sort):n.withSort(t.sort)),(0,w.fetchJsonApiResult)(n)}async function eO(e,t){let n=new eN.dv({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function eG(e,t,n){let i=new eN.B3({courseId:t}).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}class e_ extends P.SB{constructor(e){super("/v1/courses/%courseId%/discussionboards/ai/contents/%contentId%/discussion",e)}}function eM(e,t,n,i){let r=(0,I.D)(i),s=new e_({courseId:t,contentId:n}).withSession(e).withQueryParams(r);return(0,I.a)(s)}n(279145),n(399969),n(857372),n(746166);var eB=n(989014);async function eF(e,t){var n,i,r;let s=new eB.$p({courseId:t.courseId,contentId:t.contentId}).withSession(e),o=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return s.withPaging(o),t.expand&&s.withExpand(t.expand),s.withQueryParams({submissionStatus:null===(i=t.filter)||void 0===i?void 0:i.submissionStatus,gradingStatus:null===(r=t.filter)||void 0===r?void 0:r.gradingStatus,includeCount:!0}),(0,w.fetchJsonApiResult)(s)}async function eU(e,t){var n;let i=new eB.$l({courseId:t.courseId,groupSetId:t.groupSetId}).withSession(e),r=t.paging?{limit:null!==(n=t.paging.limit)&&void 0!==n?n:1e3,offset:t.paging.offset}:{limit:1e3};return i.withPaging(r),t.expand&&i.withExpand(...t.expand),t.sort&&i.withSort(...t.sort),(0,w.fetchJsonApiResult)(i)}var eV=n(375571);n(14796),n(431190),n(848245),n(856136),n(226974);class eH extends P.SB{constructor(e){super("/v1/courses/%courseId%/journals/ai/contents/%contentId%/journal",e)}}function eq(e,t,n,i){let r=(0,I.D)(i),s=new eH({courseId:t,contentId:n}).withSession(e).withQueryParams(r);return(0,I.a)(s)}let ej="/v1/courses/%courseId%/contents",ez=ej+"/%contentId%/hasCourseLinks",eW=ej+"/%contentId%/softLinks",eK=ej+"/%contentId%/canForcedSequenceBeEnabled";class eZ extends P.SB{constructor(e){super(ez,e)}}class eQ extends P.SB{constructor(e){super(eW,e)}}class eJ extends P.SB{constructor(e){super(eK,e)}}function eY(e,t){let n=new eZ(t).withSession(e);return(0,w.fetchJsonApiResult)(n)}function eX(e,t){let n=new eQ(t).withSession(e);return(0,w.fetchJsonApiResult)(n)}function e0(e,t){let n=new eJ(t).withSession(e);return(0,w.fetchJsonApiResult)(n)}(o=f||(f={})).User="user",o.DefaultReconciler="defaultReconciler",(a=b||(b={})).FamilyName="familyName",a.GivenName="givenName",a.UserName="userName",(l=v||(v={})).CourseId="course.courseId",l.DisplayOrder="displayOrder",l.EnrollmentDate="enrollmentDate",l.FamilyName="user.familyName",l.GivenName="user.givenName",l.Id="id",l.LastAccessDate="lastAccessDate",l.Role="role",l.Username="user.userName",l.StudentId="user.studentId",l.IsPreviewStudent="isPreviewStudent",l.Grade="grade",l.LastAttemptDate="lastAttemptDate",l.Post="postStatus",l.Feedback="feedbackStatus",l.SubmissionStatus="submissionStatus",l.GradingStatus="gradingStatus",l.NeedsGrading="needsGrading";class e1 extends P.SB{constructor(e){super("/v1/courses/%courseId%/memberships/counts",e)}}class e2 extends P.Ds{constructor(e){super("/v1/courses/%courseId%/memberships",e)}}class e4 extends P.SB{constructor(e){super("/v1/courses/%courseId%/memberships/%membershipId%",e)}}async function e6(e,t){let n=new e1({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}var e5=n(111519);async function e3(e,t,n){let i=new e5.F({courseId:t,userId:n}).withSession(e).withExpand(...["courseRole","user"]);return(0,w.fetchJsonApiResult)(i)}n(321102);let e8="/v1/courses/%courseId%/assessments/%assessmentId%/questions";class e9 extends P.Ds{constructor(e){super(`${e8}/%questionId%`,e)}}class e7 extends P.Ds{constructor(e){super(e8,e)}}class te extends P.Ds{constructor(e){super("/v1/courses/%courseId%/questions",e)}}class tt extends P.B_{constructor(e){super("/v1/courses/%courseId%/assessments/%assessmentId%/questions/uploadQuestions",e)}}class tn extends P.Ds{constructor(e){super("/v1/courses/%courseId%/questions/tags",e)}}class ti extends P.Ds{constructor(e){super("/v1/courses/%courseId%/questions/types",e)}}function tr(e,t,n,i){let r=new e9({assessmentId:t,courseId:n,questionId:i}).withSession(e);return(0,w.fetchJsonApiResult)(r)}function ts(e,t,n){let i=new tn({courseId:t}).withSession(e).withPaging(n);return(0,w.fetchJsonApiResult)(i)}function to(e,t,n){let i=new ti({courseId:t}).withSession(e).withQueryParams({assessmentIds:n}).withPaging({offset:0});return(0,w.fetchJsonApiResult)(i)}var ta=n(448999),tl=n(954467),tc=n(310242);function td(e,t,n){let i=n.map(e=>(function(e,t){if(!(null==t?void 0:t.id)||!t.attemptId)throw Error("No attempt id or question attempt id available.");let{id:n,attemptId:i}=t;return new tl.RF({courseId:e,attemptId:i,questionAttemptId:n})})(t,e).withBody(e));return(0,ta.p)(e,i).then(e=>Object.values(e).map(e=>{var t;return 200===e.statusCode?{isOk:!0,id:null!==(t=e.body.id)&&void 0!==t?t:"",result:e.body}:{isOk:!1,id:(0,tc.S)(e.relativeUrl,"answers"),error:{status:e.statusCode}}}))}var tu=n(450988),tp=n(245492);async function tm(e,t,n){let i=new tp.oW(t).withBody(n).withSession(e);return(0,w.fetchJsonApiResult)(i)}function th(e,t){let n=new tp.RA(t).withSession(e);return(0,w.fetchJsonApiResult)(n)}function tg(e,t,n){let i=new tp.Oo(t).withBody(n).withSession(e);return(0,w.fetchJsonApiResult)(i)}var tf=n(278883);let tb=(e,t)=>{let n=new tf.nv(t).withSession(e);return(0,w.fetchJsonApiResult)(n)},tv=e=>{let t=new tf.ho().withSession(e);return(0,w.fetchJsonApiResult)(t)},ty=(e,t)=>{let n=new tf.Gm(t).withSession(e);return(0,w.fetchJsonApiResult)(n)};function tS(e,t,n){let i={paper:new Blob([JSON.stringify(n)],{type:"application/json"})},r=new tf.B2(t).withSession(e).withBody(i);return(0,w.fetchApiResult)(r)}function tC(e,t,n){let{file:i,...r}=n,s={paper:new Blob([JSON.stringify(r)],{type:"application/json"}),file:null!=i?i:""},o=new tf.aq(t).withSession(e).withBody(s);return(0,w.fetchApiResult)(o)}(c=y||(y={})).AllTasks="allTasks",c.CxTasks="cxTasks",c.CopyTasks="courseCopyTasks",c.ConvertToUltra="ultraCourseConversionTasks",c.CxImport="CXIMPORT",c.CxExport="CXEXPORT",c.CxArchive="CXARCHIVE",c.CxRestore="CXRESTORE",(d=S||(S={})).AllStatus="All",d.Waiting="WAITING",d.Assigned="ASSIGNED",d.Running="RUNNING",d.Complete="COMPLETE",d.CompleteErrors="COMPLETE_ERRORS",d.Incomplete="INCOMPLETE";class tE extends P.Ds{constructor(e){super("/v1/courses/%courseId%/tasks",e)}}class tI extends P.$v{constructor(e){super("/v1/courses/%courseId%/tasks/%taskId%",e)}}async function tw(e,t,n,i){let r=new tE({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,w.fetchJsonApiResult)(r)}function tA(e,t,n){let i=new tI({courseId:t,taskId:n}).withSession(e);return(0,w.fetchApiResult)(i)}(u=C||(C={})).AllLogs="allLogs",u.CopyLogs="courseCopyLogs",u.ImportLogs="importLogs",u.RestoreLogs="restoreLogs";class tk extends P.Ds{constructor(e){super("/v1/courses/%courseId%/tasks/logs",e)}}class tT extends P.$v{constructor(e){super("/v1/courses/%courseId%/tasks/logs/%logId%",e)}}async function tP(e,t,n,i){let r=new tk({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,w.fetchJsonApiResult)(r)}function tD(e,t,n){let i=new tT({courseId:n,logId:t}).withSession(e);return(0,w.fetchApiResult)(i)}var tx=n(805801);function tR(e,t){let n=new tx.K(e).withSession(t);return(0,w.fetchJsonApiResult)(n)}function tL(e,t,n){let i=new tx.l(e).withSession(t).withBody(n);return(0,w.fetchJsonApiResult)(i)}var tN=n(367991);function t$(e,t,n,i){let r=new tN.NR({courseId:t}).withSession(e).withBaseQueryParams(n).withResizeOptions(null!=i?i:{});return(0,w.fetchJsonApiResult)(r)}async function tO(e,t,n){let i=new tN.LQ({courseId:t}).withSession(e).withQueryParams(n);await (0,w.fetchJsonApiResult)(i)}function tG(e,t){let n=new tN.Wx({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}var t_=n(96823);function tM(e,t,n){let i=new t_.Y0(t).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}function tB(e,t,n,i){let r=new t_.i7(t).withSession(e).withQueryParams({includeCount:!0,...n}).withExpand("author");return i&&(r=r.withSort(...i)),(0,w.fetchJsonApiResult)(r)}function tF(e,t,n){let i=new t_.In(t).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}function tU(e,t){let n=new t_.LX(t).withSession(e);return(0,w.fetchApiResult)(n)}class tV extends A.Ds{constructor(e){super("/v1/courses/%courseId%/users/%userId%/contents/%contentId%/children",e)}}n(65175);var tH=n(406411);n(60519);var tq=n(148591);async function tj(e){let t=new tq.mH().withSession(e);return(0,w.fetchJsonApiResult)(t)}async function tz(e,t){let n=new tq.qh({flagKey:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function tW(e,t,n){let i=new tq.ab({flagKey:t}).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}var tK=n(627482);class tZ extends P.n6{constructor(){super("/v1/files")}}class tQ extends w.XhrRequestError{constructor(e){super(w.XhrRequestErrorType.API),this._apiError=e}get apiError(){return this._apiError}get status(){return this._apiError.body.status}}class tJ extends w.XhrRequestError{constructor(){super(w.XhrRequestErrorType.API)}}class tY extends tZ{xhrFailed(e){if(!e)return new tJ;let t=JSON.parse(e);return new tQ(new tK.H(t))}xhrBody(){return this.getBodyInit()}toXhr(e){let t=new XMLHttpRequest;return t.open(this.method,null!=e?e:this.getUrl()),this.headers.forEach((e,n)=>{t.setRequestHeader(n,e)}),t}}function tX(e,t,n,i){let r=new tZ().withSession(e).withBody(t).withQueryParams(n);return i&&i.length>0&&(r=r.withExpand(...i)),(0,w.fetchJsonApiResult)(r)}function t0(e,t,n,i){let r=new tY().withSession(e).withBody(t).withQueryParams(n);return i&&i.length>0&&(r=r.withExpand(...i)),(0,w.requestJsonApiResultWithProgress)(r)}var t1=n(756344);async function t2(e){let t=new t1.v$().withSession(e);return(0,w.fetchJsonApiResult)(t)}async function t4(e,t){let n=new t1.uM().withSession(e).withBody(t);return(0,w.fetchJsonApiResult)(n)}async function t6(e){let t=new t1.aV().withSession(e);return(0,w.fetchJsonApiResult)(t)}n(163273),n(625506),n(56164),n(721966),n(163273),n(625506),n(56164),n(721966);var t5=n(265915);function t3(e,t,n){var i,r;let s=new t5.j(t).withSession(e);return(null===(i=null==n?void 0:n.filter)||void 0===i?void 0:i.paging)&&s.withPaging(n.filter.paging),(null===(r=null==n?void 0:n.filter)||void 0===r?void 0:r.sort)&&s.withSort(...n.filter.sort),(null==n?void 0:n.query)&&s.withQueryParams(n.query),(0,w.fetchJsonApiResult)(s)}function t8(e,t,n){let i=new t5.S(t).withSession(e).withBody(n);return(0,w.fetchJsonApiResult)(i)}var t9=n(195954);async function t7(e,t){let n=new t9.C().withSession(e).withPaging(t);return(0,w.fetchJsonApiResult)(n)}var ne=n(407619);class nt extends P.SB{constructor(){super("/v1/passwordSettings")}}function nn(e){let t=new nt().withSession(e);return(0,w.fetchJsonApiResult)(t)}var ni=n(178829);async function nr(e,t){let n=new ni.ke({userId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function ns(e,t){let n=new tH.h({courseId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function no(e,t){let n=new ni.ix(t).withSession(e);await (0,w.fetchApiResult)(n)}var na=n(961338);async function nl(e,t){let n=new na.xh({taskId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}async function nc(e,t){let n=new na._x({taskId:t}).withSession(e);return(0,w.fetchJsonApiResult)(n)}class nd extends P.SB{constructor(){super("/v1/utilities/timeUntilBbSessionInactive"),this.headers.set("Suppress-Session-Timestamp-Update","true"),this.headers.set("Include-Session-Last-Access-Time","true")}}class nu extends P.YX{constructor(){super("/v1/utilities/keepBbSessionActive")}async failed(e){if(e.status===w.HttpStatus.Unauthorized)throw new ed.V(e.statusText,e.status,e.url)}}function np(e,t){let n=new nd().withSession(e).withQueryParams(t);return(0,w.fetchJsonApiResult)(n)}async function nm(e){let t=new nu().withSession(e);await (0,w.fetchApiResult)(t)}},826423:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var i=n(675663),r=n(482532);async function s(e,t){let n=new i.d({receiptId:t}).withSession(e);return await (0,r.fetchJsonApiResult)(n)}},851890:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var i=n(238479),r=n(482532);async function s(e){let t=new i.v().withSession(e);return(0,r.fetchJsonApiResult)(t)}},655294:function(e,t,n){"use strict";n.d(t,{Z:function(){return r},q:function(){return s}});var i=n(753031);class r extends i.Ds{constructor(e){super("/public/v1/lti/domains",e)}}class s extends i.B_{constructor(){super("/public/v1/lti/domains")}}},986709:function(e,t,n){"use strict";n.d(t,{Hy0:function(){return nl.H},BnC:function(){return no.BnC},C2s:function(){return nS},h9E:function(){return np.h9},Crd:function(){return nn},TqX:function(){return no.TqX},M6Z:function(){return np.M6},lrm:function(){return np.lr},h0v:function(){return no.h0v},IQK:function(){return np.IQ},O9C:function(){return th},MlJ:function(){return np.Ml},c4$:function(){return te},kH0:function(){return tn},I$9:function(){return e7},JX7:function(){return nA.JX},fKr:function(){return nv},CalculatedFormulaAnswerFormatType:function(){return np.iz},CalculatedFormulaAnswerPrecisionType:function(){return np.hf},cJw:function(){return np.cJ},eNW:function(){return ta},LbX:function(){return tj},hTM:function(){return tW},LVO:function(){return nT.L},DXv:function(){return nm.D},aql:function(){return e0},zcD:function(){return e1},hbA:function(){return eX},aOr:function(){return e6},qMM:function(){return e8},s7b:function(){return tQ},O8v:function(){return tX},S2N:function(){return e5},rC8:function(){return nd.rC},u4M:function(){return nk.u},bSh:function(){return ny.b},aRc:function(){return nt},E4h:function(){return tI},Ueh:function(){return np.Ue},AVG:function(){return eZ},nMD:function(){return nA.nM},L03:function(){return np.L0},nEm:function(){return eY},I_d:function(){return eK},r5d:function(){return eV},R7X:function(){return tm},Y0t:function(){return t3},EyR:function(){return tf},xI1:function(){return tl},cc9:function(){return tC},RjJ:function(){return tS},nMe:function(){return tv},JdL:function(){return ty},qr:function(){return tw},ILv:function(){return tk},e4A:function(){return np.e4},w$A:function(){return nN.HttpMethod},oji:function(){return nN.HttpStatus},WYQ:function(){return nP.W},J6F:function(){return tz},TsU:function(){return tJ},bu3:function(){return tp},LJK:function(){return t1},XF0:function(){return t_},faN:function(){return eJ},RbW:function(){return eB},ovf:function(){return no.ovf},iDW:function(){return no.iDW},Vse:function(){return tq},NAA:function(){return tV},y1d:function(){return np.y1},gdJ:function(){return ts},tdv:function(){return to},yLk:function(){return tr},jf$:function(){return eU},Ius:function(){return eq},SNh:function(){return no.SNh},McV:function(){return no.McV},iRb:function(){return no.iRb},xaz:function(){return tO},kcX:function(){return no.kcX},rfT:function(){return no.rfT},PJt:function(){return no.PJt},hrY:function(){return t$},gQZ:function(){return no.gQZ},VG2:function(){return no.VG2},ngf:function(){return no.ngf},uzw:function(){return tu},dZq:function(){return tc},Wvp:function(){return td},BQp:function(){return no.BQp},SJR:function(){return no.SJR},O98:function(){return no.O98},pHC:function(){return no.pHC},FNw:function(){return no.FNw},R37:function(){return no.R37},Z7d:function(){return no.Z7d},wGc:function(){return no.wGc},ohw:function(){return no.ohw},fmY:function(){return no.fmY},QDg:function(){return no.QDg},raB:function(){return tA},C9B:function(){return eF},LQY:function(){return no.LQY},taJ:function(){return tN},AzN:function(){return no.AzN},t2L:function(){return tL},Hsj:function(){return no.Hsj},rz_:function(){return ns},GN3:function(){return nd.GN},kjH:function(){return nb},JTF:function(){return nd.JT},$hF:function(){return nd.$h},oUU:function(){return nh},i6k:function(){return nu},K0h:function(){return nA.K0},pKH:function(){return nd.pK},_aA:function(){return nd._},ALY:function(){return nd.AL},WTZ:function(){return tg},$eE:function(){return np.$e},E_H:function(){return e9},rh5:function(){return nw},afs:function(){return t7},Vie:function(){return no.Vie},MMO:function(){return nD},xB0:function(){return nx},TK1:function(){return nr},xN_:function(){return ni},y67:function(){return nL.y},dPk:function(){return tT},rn$:function(){return np.rn},QuestionType:function(){return np.ce},hRl:function(){return t2},XmS:function(){return t4},uRv:function(){return nA.uR},HXF:function(){return nA.HX},UBQ:function(){return nA.UB},bS9:function(){return nA.bS},OqY:function(){return nA.Oq},Z3R:function(){return np.Z3},Kp$:function(){return tt},D4J:function(){return tU},Pr_:function(){return tB},VLC:function(){return nc.V},x1x:function(){return e2},hAU:function(){return tD},_1K:function(){return tx},Tgr:function(){return tR},aQo:function(){return nC.a},uXm:function(){return e4},$qS:function(){return ej},SrV:function(){return ez},pDj:function(){return nf.p},nXr:function(){return tE},qOJ:function(){return ti},duL:function(){return ne},uYC:function(){return tM},rWm:function(){return eQ},sez:function(){return np.se},eWt:function(){return np.eW},Vez:function(){return nR},XVx:function(){return t8},VRt:function(){return tK},srx:function(){return no.srx},cwi:function(){return nN.XhrRequestErrorType},Pkm:function(){return no.Pkm},tq_:function(){return no.tq_},mjt:function(){return no.mjt},MGk:function(){return no.MGk},yak:function(){return no.yak},RTV:function(){return no.RTV},KVJ:function(){return no.KVJ},_nM:function(){return no._nM},Q$J:function(){return no.Q$J},HvS:function(){return no.HvS},Wbz:function(){return no.Wbz},KVV:function(){return no.KVV},CGz:function(){return no.CGz},bEJ:function(){return no.bEJ},Bjc:function(){return np.Bj},czX:function(){return no.czX},$CQ:function(){return no.$CQ},kw8:function(){return no.kw8},sHF:function(){return no.sHF},acm:function(){return no.acm},Ysd:function(){return no.Ysd},T0n:function(){return no.T0n},kCM:function(){return no.kCM},Hn7:function(){return no.Hn7},LAV:function(){return nI},Aev:function(){return nE},y2J:function(){return no.y2J},Vwz:function(){return no.Vwz},WVZ:function(){return no.WVZ},ECF:function(){return no.ECF},zOC:function(){return no.zOC},L$6:function(){return no.L$6},D0l:function(){return no.D0l},S9W:function(){return no.S9W},A1x:function(){return no.A1x},pzW:function(){return no.pzW},Ug8:function(){return no.Ug8},x70:function(){return no.x70},WnB:function(){return no.WnB},OgR:function(){return no.OgR},lzM:function(){return no.lzM},E8D:function(){return no.E8D},g7B:function(){return no.g7B},p8Q:function(){return no.p8Q},J2$:function(){return no.J2$},UjU:function(){return no.UjU},oIX:function(){return no.oIX},w6S:function(){return no.w6S},sAK:function(){return no.sAK},yYO:function(){return no.yYO},J_U:function(){return no.J_U},lHP:function(){return no.lHP},TZe:function(){return no.TZe},JXy:function(){return no.JXy},fyg:function(){return no.fyg},hIc:function(){return no.hIc},klr:function(){return no.klr},LU0:function(){return no.LU0},iW6:function(){return no.iW6},MQp:function(){return no.MQp},Im$:function(){return no.Im$},_HO:function(){return no._HO},WRq:function(){return no.WRq},hj4:function(){return no.hj4},qZ4:function(){return no.qZ4},Rok:function(){return no.Rok},ZKY:function(){return no.ZKY},i8y:function(){return no.i8y},uVV:function(){return no.uVV},HQE:function(){return no.HQE},CV7:function(){return no.CV7},j2:function(){return no.j2},FeW:function(){return no.FeW},ZYv:function(){return no.ZYv},YCr:function(){return no.YCr},zpx:function(){return no.zpx},jIs:function(){return nN.fetchJsonApiResult},lMq:function(){return ng},WiT:function(){return no.WiT},GSC:function(){return na.GS},ZX5:function(){return no.ZX5},Yx$:function(){return no.Yx$},yzO:function(){return no.yzO},lLb:function(){return no.lLb},WJ$:function(){return no.WJ$},r9o:function(){return np.r9},C9P:function(){return na.C9},HU8:function(){return no.HU8},S9c:function(){return np.S9},C0A:function(){return no.C0A},OrM:function(){return no.OrM},XPp:function(){return no.XPp},QK1:function(){return na.QK},yZB:function(){return na.yZ},jdu:function(){return no.jdu},SlR:function(){return no.SlR},ziu:function(){return no.ziu},YHn:function(){return no.YHn},KRY:function(){return no.KRY},NDS:function(){return no.NDS},v7Q:function(){return no.v7Q},DN0:function(){return no.DN0},Oqd:function(){return no.Oqd},XDk:function(){return no.XDk},$De:function(){return no.$De},t5N:function(){return no.t5N},k2e:function(){return no.k2e},ts9:function(){return no.ts9},Bi2:function(){return no.Bi2},_xN:function(){return no._xN},cqI:function(){return no.cqI},lZD:function(){return no.lZD},A8I:function(){return no.A8I},wFA:function(){return no.wFA},p6X:function(){return no.p6X},pDv:function(){return no.pDv},hVK:function(){return no.hVK},w64:function(){return no.w64},dYx:function(){return no.dYx},rjU:function(){return na.rj},_Bo:function(){return na._B},w9:function(){return no.w9},GRx:function(){return no.GRx},wZ_:function(){return no.wZ_},sPL:function(){return no.sPL},xTX:function(){return no.xTX},_Nl:function(){return np._N},$_n:function(){return no.$_n},c7z:function(){return no.c7z},sUQ:function(){return no.sUQ},R5$:function(){return no.R5$},FP8:function(){return no.FP8},ZII:function(){return no.ZII},awk:function(){return no.awk},Q5g:function(){return no.Q5g},N02:function(){return no.N02},qUl:function(){return nN.urlManager},xJl:function(){return no.xJl},w0S:function(){return no.w0S},F1$:function(){return no.F1$},RSb:function(){return no.RSb}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k,T,P,D,x,R,L,N,$,O,G,_,M,B,F,U,V,H,q,j,z,W,K,Z,Q,J,Y,X,ee,et,en,ei,er,es,eo,ea,el,ec,ed,eu,ep,em,eh,eg,ef,eb,ev,ey,eS,eC,eE,eI,ew,eA,ek,eT,eP,eD,ex,eR,eL,eN,e$,eO,eG,e_,eM,eB,eF,eU,eV,eH,eq,ej,ez,eW,eK,eZ,eQ,eJ,eY,eX,e0,e1,e2,e4,e6,e5,e3,e8,e9,e7,te,tt,tn,ti,tr,ts,to,ta,tl,tc,td,tu,tp,tm,th,tg,tf,tb,tv,ty,tS,tC,tE,tI,tw,tA,tk,tT,tP,tD,tx,tR,tL,tN,t$,tO,tG,t_,tM,tB,tF,tU,tV,tH,tq,tj,tz,tW,tK,tZ,tQ,tJ,tY,tX,t0,t1,t2,t4,t6,t5,t3,t8,t9,t7,ne,nt,nn,ni,nr,ns,no=n(496120),na=n(867702);n(753031);var nl=n(627482),nc=n(607410);(i=eB||(eB={})).Yes="Yes",i.No="No",i.Originally="Originally",i.Modified="Modified",(r=eF||(eF={})).Factual="Factual",r.Conceptual="Conceptual",r.Procedural="Procedural",r.Metacognitive="Metacognitive",(s=eU||(eU={})).Remember="Remember",s.Understand="Understand",s.Apply="Apply",s.Analyze="Analyze",s.Evaluate="Evaluate",s.Create="Create";var nd=n(386809);(o=eV||(eV={}))[o.Sunday=0]="Sunday",o[o.Monday=1]="Monday",o[o.Tuesday=2]="Tuesday",o[o.Wednesday=3]="Wednesday",o[o.Thursday=4]="Thursday",o[o.Friday=5]="Friday",o[o.Saturday=6]="Saturday",n(513855),(a=eH||(eH={})).Contains="contains",a.Equals="equals",a.NotBlank="notBlank",a.StartsWith="starts",(l=eq||(eq={})).courseContent="courseContentPicker",l.courseLink="courseLinkPicker",(c=ej||(ej={})).TITLE_ASC="title(asc)",c.TITLE_DESC="title(desc)",c.CREATED_DATE_ASC="createdDate(asc)",c.CREATED_DATE_DESC="createdDate(desc)",c.MODIFIED_DATE_ASC="modifiedDate(asc)",c.MODIFIED_DATE_DESC="modifiedDate(desc)",c.STUDENT_COUNT_ASC="studentCount(asc)",c.STUDENT_COUNT_DESC="studentCount(desc)",(d=ez||(ez={})).Ascending="asc",d.Descending="desc",(u=eW||(eW={})).SubmissionStatus="submissionStatus",u.GradingStatus="gradingStatus",(p=eK||(eK={})).Inline="inline",p.InlineOnly="inlineOnly",p.Attachment="attachment",(m=eZ||(eZ={})).Normal="Normal",m.Limited="Limited",m.Unlimited="Unlimited",(h=eQ||(eQ={})).Custom="Custom",h.Unlimited="Unlimited",h.NoAccommodation="Default";let nu=44e5;var np=n(293464);(g=eJ||(eJ={})).ACL="ACL",g.Date="Date_Range",g.ForcedSequence="Pre_Content",g.Grade="Grade_Range",g.GradePercentage="Grade_Range_Percentage";var nm=n(988747);let nh=255;function ng(e){return e!==eY.EmbedOnly}(f=eY||(eY={})).Embed="EMBED",f.EmbedOnly="EMBED_ONLY",f.Link="LINK",(b=eX||(eX={})).Visible="VISIBLE",b.Hidden="HIDDEN",b.Restricted="PARTIALLY_VISIBLE",(v=e0||(e0={})).None="None",v.Started="Started",v.Completed="Completed",v.Unlocked="Unlocked",(y=e1||(e1={})).Assignment="assignment",y.Attendance="attendance",y.Audio="audio",y.Blog="blog",y.CollaborativeCloud="collaborative-cloud",y.CollaborativeGoogleCloud="cloud-collaboration-google",y.Course="course",y.Calculation="calculation",y.Discussion="discussion",y.DocumentBlank="document-blank",y.DocumentCloud="document-cloud",y.DocumentGoogle="document-google",y.Document="document-text",y.Exam="exam",y.Folder="folder",y.FolderOpen="folder-open",y.Homework="homework",y.Journal="journal",y.LearningModule="learning-module",y.Link="link",y.LTI="lti",y.OverallGrade="overall-grade",y.Pdf="pdf",y.Photo="photo",y.Presentation="presentation",y.Quiz="quiz",y.Root="ROOT",y.Scorm="scormengine",y.Spreadsheet="spreadsheet",y.Survey="survey",y.Test="test",y.Textbook="textbook",y.Video="video",y.Zip="zip",(S=e2||(e2={})).Root="ROOT",S.Interactive="INTERACTIVE",S.Indirect="INDIRECT",(C=e4||(e4={})).Score="SCORE",C.Completion="COMPLETION",C.Satisfaction="SATISFACTION";var nf=n(221093);let nb=100,nv="default";(E=e6||(e6={})).Continuous="CONTINUOUS",E.DateRange="DATE_RANGE",E.FixedNumDays="FIXED_NUM_DAYS",E.UseTerm="USE_TERM",(I=e5||(e5={})).Undecided="UNDECIDED",I.Classic="CLASSIC",I.Ultra="ULTRA",I.UltraPreview="ULTRAPREVIEW",(w=e3||(e3={})).Instructor_choice="INSTRUCTOR_CHOICE",w.Choose_ultra="CHOOSE_ULTRA",w.Choose_classic="CHOOSE_CLASSIC",(A=e8||(e8={})).InstructorLed="INSTRUCTOR_LED",A.SelfEnrollment="SELF_ENROLLMENT",A.EmailEnrollment="EMAIL_ENROLLMENT";var ny=n(165402);(k=e9||(e9={})).Published="PUBLISHED",k.Deleted="DELETED",k.Drafted="DRAFT",(T=e7||(e7={})).NotAttempted="NOT_ATTEMPTED",T.Abandoned="ABANDONED",T.InProgress="IN_PROGRESS",T.Suspended="SUSPENDED",T.Canceled="CANCELED",T.NeedsGrading="NEEDS_GRADING",T.Completed="COMPLETED",T.InMoreProgress="IN_MORE_PROGRESS",T.NeedsMoreGrading="NEEDS_MORE_GRADING",T.Saved="SAVED",(P=te||(te={})).NoOverride="NO_OVERRIDE",P.FeedbackOverride="FEEDBACK_OVERRIDE",P.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE",(tt||(tt={})).Custom="CUSTOM",(D=tn||(tn={})).ReceiptAndAttemptExist="ReceiptAndAttemptExist",D.ReceiptExistsButAttemptDoesNot="ReceiptExistsButAttemptDoesNot",D.ReceiptExistsNoAccessToAttempt="ReceiptExistsNoAccessToAttempt",D.ReceiptExistsColumnSoftDeleted="ReceiptExistsColumnSoftDeleted",(x=ti||(ti={})).ManuallySubmitted="MANUALLY_SUBMITTED",x.AutomaticallySubmittedByBrowser="AUTOMATICALLY_SUBMITTED_BY_BROWSER",x.AutomaticallySubmittedByServer="AUTOMATICALLY_SUBMITTED_BY_SERVER",x.Unknown="UNKNOWN";let nS="lti-asset-processor-submission-event-handler";(R=tr||(tr={})).Processed="Processed",R.Processing="Processing",R.Pending="Pending",R.PendingManual="PendingManual",R.Failed="Failed",R.NotReady="NotReady",R.NotProcessed="NotProcessed",(L=ts||(ts={})).PostFailed="PostFailed",L.PostAbandoned="PostAbandoned",L.NotPosted="NotPosted",L.Posted="Posted",(to||(to={})).Originality="Originality",n(257177),(N=ta||(ta={})).NonCalculated="NON_CALCULATED",N.Total="TOTAL",N.Average="AVERAGE",N.WeightedTotal="WEIGHTED_TOTAL",N.MinMax="MINMAX",N.Custom="CUSTOM",($=tl||(tl={})).All="ALL",$.Groups="GROUPS",$.None="NONE",$.Random="RANDOM",(O=tc||(tc={})).Comma="COMMA",O.Tab="TAB",(G=td||(td={})).User="USER",G.QuestionAndUser="QUESTION_AND_USER",(_=tu||(tu={})).AllAttempts="ALL",_.ValidAttempts="VALID",(M=tp||(tp={})).Assignment="Assignment.name",M.Attendance="Attendance.name",M.Blog="Blog.name",M.Calculation="Calculation.name",M.Discussion="Discussion.name",M.Exam="Exam.name",M.Homework="Homework.name",M.Journal="Journal.name",M.LTI="Lti.name",M.Presentation="Presentation.name",M.Quiz="Quiz.name",M.ScormEngine="Scormengine.name",M.Survey="Survey.name",M.Test="Test.name",(B=tm||(tm={})).NonFormative="NOT_FORMATIVE",B.NotVisibleToStudents="FORMATIVE_NOT_VISIBLE_TO_STUDENTS",B.VisibleToStudents="FORMATIVE_VISIBLE_TO_STUDENTS",(F=th||(th={})).Average="AVERAGE",F.First="FIRST",F.Highest="HIGHEST",F.Last="LAST",F.Lowest="LOWEST",(U=tg||(tg={})).GradingInProgress="GRADING_IN_PROGRESS",U.IsPosted="IS_POSTED",U.ReadyToPost="READY_TO_POST",U.NoOverride="NO_OVERRIDE",(V=tf||(tf={})).Graded="GRADED",V.NeedsGrading="NEEDS_GRADING",(H=tb||(tb={})).AttemptScore="a",H.None="-",H.OverrideScore="m",(q=tv||(tv={})).Tab="TAB",q.Comma="COMMA",(j=ty||(ty={})).MyDevice="MYDEVICE",j.ContentCollection="CONTENTCOLLECTION",(z=tS||(tS={})).AllTime="ALLTIME",z.SixMonths="SIXMONTHS",z.ThirtyDays="THIRTYDAYS",z.FourteenDays="FOURTEENDAYS",z.SevenDays="SEVENDAYS",z.OneDay="ONEDAY",(W=tC||(tC={})).All="ALL",W.ByColumns="BYCOLUMNS",W.HistoryLog="HISTORYLOG",W.HistoryLogAll="HISTORYLOGALL";var nC=n(247766);function nE(e){var t;return null!==(t=Object.values(tE).find(t=>t===e))&&void 0!==t?t:tE.AllStatuses}function nI(e){var t;return null!==(t=Object.values(tw).find(t=>t===e))&&void 0!==t?t:tw.AllStatuses}(K=tE||(tE={})).AllStatuses="allStatuses",K.NoAttempt="noAttempt",K.AttemptInProgress="attemptInProgress",K.AttemptSubmitted="attemptSubmitted",K.NoEntry="noEntry",K.EntryMade="entryMade",K.AnyAttemptsSubmitted="anyAttemptsSubmitted",(tI||(tI={})).MyStudentsToGrade="myStudentsToGrade",(Z=tw||(tw={})).AllStatuses="allStatuses",Z.NeedsGrading="needsGrading",Z.GradeNeedsPosting="gradeNeedsPosting",Z.NothingToGrade="nothingToGrade",Z.Completed="completedAttempt",(Q=tA||(tA={})).Groups="groups",Q.Members="members",Q.GroupsAndMembers="groupsandmembers",(J=tk||(tk={})).InvalidFileFormat="bb-group-import-file-is-not-csv",J.EmptyFile="bb-group-import-file-is-empty",J.FileNotFound="bb-group-import-file-not-found-in-given-location",(Y=tT||(tT={})).Complete="Complete",Y.Delete="Delete",Y.Error="Error",Y.InProgress="InProgress",Y.Unknown="Unknown",(X=tP||(tP={})).First="First",X.Last="Last",(tD||(tD={})).SHOW_DESCRIPTION="show.description",(ee=tx||(tx={})).TRUE="true",ee.FALSE="false",(et=tR||(tR={})).PERCENTAGE="PERCENTAGE",et.PERCENTAGE_RANGE="PERCENTAGE_RANGE",et.POINTS="NUMERIC",et.POINTS_RANGE="NUMERIC_RANGE",(en=tL||(tL={})).WhenPackageCompletes="WHEN_PACKAGE_COMPLETES",en.WhenScoCompletesLatestScore="WHEN_SCO_COMPLETES_LATEST_SCORE",(ei=tN||(tN={})).Available="Y",ei.Unavailable="N",ei.Inactive="I",ei.Corrupt="C",(er=t$||(t$={})).CourseCopy="CourseCopy",er.Import="Import",er.Restore="Restore",(es=tO||(tO={})).Import="IMPORT",es.Export="EXPORT",es.Archive="ARCHIVE",es.Restore="RESTORE",(eo=tG||(tG={}))[eo.System=0]="System",eo[eo.Course=1]="Course",eo[eo.Organization=2]="Organization",eo[eo.ContentHander=3]="ContentHander",(ea=t_||(t_={})).CourseRoster="course_roster",ea.Announcements="announcements",ea.Groups="groups",ea.Messages="messages",ea.Collab="bb-collab-ultra",(el=tM||(tM={})).Continuous="CONTINUOUS",el.DateRange="DATE_RANGE",el.FixedNumDays="FIXED_NUM_DAYS",(ec=tB||(tB={})).FileName="fileName",ec.CreationDate="resourceCreationDate",ec.FileSize="fileSize",ec.Location="location",(ed=tF||(tF={})).File="FILE",ed.Folder="FOLDER",(eu=tU||(tU={})).Deleting="DELETING",eu.Error="ERROR",(ep=tV||(tV={})).Course="COURSE",ep.System="SYSTEM",(em=tH||(tH={})).Draft="DRAFT",em.Posted="POSTED",em.Scheduled="SCHEDULED",(eh=tq||(tq={})).Standard="STANDARD",eh.Important="IMPORTANT",eh.Urgent="URGENT",n(22156),(eg=tj||(tj={})).ClassSchedule="C",eg.ExternalCourseSchedule="E",eg.OfficeHours="O";let nw="BYMONTHDAY";(ef=tz||(tz={})).Institution="INSTITUTION",ef.Personal="PERSONAL",(eb=tW||(tW={})).Monthly="MONTHLY",eb.Weekly="WEEKLY",eb.Daily="DAILY",(ev=tK||(tK={})).Sunday="SU",ev.Monday="MO",ev.Tuesday="TU",ev.Wednesday="WE",ev.Thursday="TH",ev.Friday="FR",ev.Saturday="SA",(tZ||(tZ={})).Gregorian="GREGORIAN",(ey=tQ||(tQ={})).ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",ey.MessageAllMembersInCourse="course.conversations.message-all-members.CREATE",ey.MessageAllActAsInstructorInCourse="course.conversations.message-all-act-as-instructor-roles.CREATE",ey.MessageAllStudentsInCourse="course.conversations.message-all-students.CREATE";var nA=n(753463);(eS=tJ||(tJ={})).Student="S",eS.Instructor="P",eS.TeachingAssistant="T",eS.CourseBuilder="B",eS.Grader="G",eS.Guest="U",eS.Facilitator="BB_FACILITATOR",(eC=tY||(tY={})).Course="C",eC.Organization="O",eC.CourseAndOrganization="B",eC.None="N",(eE=tX||(tX={})).Grading="GRADING",eE.Teaching="TEACHING",eE.Supporting="SUPPORTING",eE.Taking="TAKING",eE.Visiting="VISITING",(eI=t0||(t0={})).AccountAdmin="A",eI.CourseCreator="C",eI.CourseSupport="R",eI.Guest="U",eI.Integration="X",eI.Observer="O",eI.Portal="Y",eI.SystemAdmin="Z",eI.SystemSupport="H",eI.User="N",(ew=t1||(t1={})).AccountAdmin="ACCOUNT_ADMIN",ew.CourseCreator="COURSE_CREATOR",ew.CourseSupport="COURSE_SUPPORT",ew.Guest="GUEST",ew.Integration="INTEGRATION",ew.Observer="OBSERVER",ew.Portal="PORTAL",ew.SystemAdmin="SYSTEM_ADMIN",ew.SystemSupport="SYSTEM_SUPPORT",ew.User="USER",ew.Default="USER",ew.None="USER",(eA=t2||(t2={})).Waiting="WAITING",eA.Assigned="ASSIGNED",eA.Running="RUNNING",eA.Complete="COMPLETE",eA.CompleteErrors="COMPLETE_ERRORS",eA.Incomplete="INCOMPLETE",(ek=t4||(t4={})).Copy="C",ek.ContentExchange="X",ek.ConvertToUltra="convertTOUltraQueuedOperation",ek.AssessmentRegrade="ASSESSMENT_REGRADE",ek.QuestionCopy="CopyQuestion",ek.ProgressUpdateContent="courseProgressUpdateContent",ek.Recycle="RecycleTask",ek.DelegatedGraderDistribution="delegatedGraderDistribution",ek.CloudStorageIntegrationDownload="downloadQueuedOperation",ek.AssignmentExport="ExportAssignments",ek.CalendarImport="calendar_import",ek.BulkCopyAndConvertOperation="BulkCopyAndConvertOperation",ek.BulkConvertOperation="BulkConvertOperation",(eT=t6||(t6={})).Given="GIVEN_NAME",eT.Other="OTHER_NAME",eT.Both="BOTH",(eP=t5||(t5={})).K8="K_8",eP.HighSchool="HIGH_SCHOOL",eP.Freshman="FRESHMAN",eP.Sophomore="SOPHOMORE",eP.Junior="JUNIOR",eP.Senior="SENIOR",eP.GraduateSchool="GRADUATE_SCHOOL",eP.PostGraduateSchool="POST_GRADUATE_SCHOOL",eP.Unknown="UNKNOWN",(eD=t3||(t3={})).Female="FEMALE",eD.Male="MALE",eD.Other="OTHER",eD.Unknown="UNKNOWN",(ex=t8||(t8={})).Nobody="NOBODY",ex.Classmates="CLASSMATES",ex.Everyone="EVERYONE",(eR=t9||(t9={})).ActivityStream="ActivityStream",eR.CourseList="CourseList",eR.InstitutionPage="InstitutionPage",(eL=t7||(t7={})).Course="COURSE",eL.Org="ORG",(eN=ne||(ne={})).Yes="Y",eN.No="N",(e$=nt||(nt={})).ActivityStream="ActivityStream",e$.CourseList="CourseList",e$.InstitutionPage="InstitutionPage";var nk=n(993036),nT=n(398411),nP=n(954580);n(725409),(eO=nn||(nn={})).Group="GROUP",eO.User="USER";let nD=",",nx=100,nR="pronounNameXssViolation";(eG=ni||(ni={})).Approved="APPROVED",eG.Pending="PENDING",n(562111),(e_=nr||(nr={})).Application="Application",e_.AssetProcessor="AssetProcessor",e_.ContentHandler="ContentHandler",e_.ContentItemMessage="ContentItemMessage",e_.System="System",e_.Administrator="Administrator",e_.UltraUI="UltraUI",e_.BaseNavigation="BaseNavigation",e_.Proctoring="Proctoring",e_.CloudDocument="CloudDocument",(eM=ns||(ns={})).Embedded="EmbeddedCD",eM.EmbeddedGoogle="EmbeddedGoogleCD",eM.CloudCollaboration="CloudCollaborationCD",eM.CloudCollaborationGoogle="CloudCollaborationGoogleCD";var nL=n(478220),nN=n(482532)},386809:function(e,t,n){"use strict";n.d(t,{$h:function(){return o},AL:function(){return s},GN:function(){return l},JT:function(){return r},_:function(){return i},pK:function(){return a},rC:function(){return c}});let i=1,r=20,s=1,o=10,a=1,l=10,c=7},293464:function(e,t,n){"use strict";n.d(t,{h9:function(){return E},M6:function(){return T},lr:function(){return P},IQ:function(){return A},Ml:function(){return w},iz:function(){return D},hf:function(){return R},cJ:function(){return x},Ue:function(){return I},L0:function(){return L},e4:function(){return N},y1:function(){return k},$e:function(){return $},rn:function(){return O},ce:function(){return G},Z3:function(){return C},se:function(){return M},eW:function(){return _},Bj:function(){return U},r9:function(){return V},S9:function(){return F},_N:function(){return H._}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k,T,P,D,x,R,L,N,$,O,G,_,M,B=n(988747);function F(e){switch(e){case B.D.UltraAssignment:return I.Assignment;case B.D.TestLink:return I.Test;case B.D.SurveyLink:return I.Survey;case B.D.Discussion:return I.Discussion;case B.D.ClassicAssignment:return I.ClassicAssignment;case B.D.RusticiScorm:return I.Scorm}}(i=C||(C={})).Always="ALWAYS",i.Never="NEVER",i.PerQuestion="PER_QUESTION",(r=E||(E={})).Assessment="Assessment",r.Section="Section",r.Item="Item",(s=I||(I={})).Assignment="assignment",s.Survey="survey",s.Test="test",s.Discussion="discussion",s.ClassicAssignment="classicAssignment",s.Scorm="scorm";let U=["bb-assessment-conflict-between-group-and-timelimit","bb-assessment-conflict-between-group-and-secure","bb-assessment-conflict-between-group-and-enforce-due-date","bb-assessment-conflict-between-due-date-and-enforce-due-date","bb-assessment-randomize-answers-cannot-change","bb-assessment-timelimit-cannot-change"];function V(e){switch(e){case B.D.ClassicAssignment:return A.Assignment;case B.D.TestLink:return A.Test;case B.D.UltraAssignment:return A.UltraAssignment;case B.D.SurveyLink:return A.Survey}}(o=w||(w={})).AttemptCompletedOrForceCompletion="bb-rest-attempt-completed-or-force-completion",o.AttemptPastDue="bb-rest-attempt-past-due-exception",n(810910),(a=A||(A={})).Test="Test",a.Quiz="Quiz",a.Survey="Survey",a.Assignment="Assignment",a.UltraAssignment="UltraAssignment",a.Pool="Pool",(l=k||(k={})).AttemptStarted="ATTEMPT_STARTED",l.QuestionSaved="QUESTION_SAVED",l.QuestionSavedMultiple="QUESTION_SAVED_MULTIPLE",l.QuestionSavedBlank="QUESTION_SAVED_BLANK",l.QuestionSavedMultipleBlank="QUESTION_SAVED_MULTIPLE_BLANK",l.AttemptSubmitted="ATTEMPT_SUBMITTED",(c=T||(T={})).NoneSpecified="ns",c.AfterSubmission="as",c.AfterSubmissionHideResults="ashr",c.OnSpecifiedDate="osd",c.AfterDueDate="add",c.AfterAvailEndDate="aaed",c.AfterAttemptGraded="aag",c.AfterIndividualGradeIsPosted="aiag",(d=P||(P={})).IncorrectAnswers="INCORRECT_ANSWERS",d.InstructorFeedback="INSTRUCTOR_FEEDBACK",d.AllAnswers="ALL_ANSWERS",d.CorrectAnswers="CORRECT_ANSWERS",d.UserAnswers="USER_ANSWERS",d.Score="SCORE",n(328694),(u=D||(D={})).Normal="Normal",u.Exponential="Exponential",(p=x||(x={})).Numeric="numeric",p.Percent="percent",(m=R||(R={})).Decimal="Decimal",m.SignificantFigures="SigFig",(h=L||(L={})).Contains="CONTAINS",h.Exact="EXACT",h.Matches="MATCHES",(g=N||(N={})).Rectangle="Rectangle",g.Polygon="Polygon",g.Circle="Circle",(f=$||($={})).None="none",f.Arabic="arabic",f.Roman="roman",f.LetterUpper="letter_upper",f.LetterLower="letter_lower",(b=O||(O={})).CloudFile="CLOUD_FILE",b.Embedded="EMBEDDED",b.File="FILE",b.Text="TEXT",b.Unknown="UNKNOWN",(v=G||(G={})).CalculatedFormula="calculated",v.CalculatedNumeric="numeric",v.Either="eitherOr",v.Essay="essay",v.FIMB="fimb",v.Hotspot="hotspot",v.Matching="matching",v.Multiple="multipleanswer",v.PageBreak="pageBreak",v.PresentationOnly="presentation",v.QuestionBlock="questionBlock",v.OpinionScale="opinionScale",(y=_||(_={})).TrueFalse="true_false",y.AgreeDisagree="agree_disagree",y.RightWrong="right_wrong",y.YesNo="yes_no",y.UserEnteredLabels="user_entered_labels";var H=n(580940);(S=M||(M={})).Continual="CONTINUAL",S.HardStop="HARDSTOP"},165402:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});let i="dueDateHasPassed"},954580:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});let i="bb-rest-input-too-long"},753463:function(e,t,n){"use strict";n.d(t,{HX:function(){return d},JX:function(){return s},K0:function(){return r},Oq:function(){return i},UB:function(){return l},bS:function(){return a},nM:function(){return o},uR:function(){return c}});let i="reusePolicyViolation",r="minimumAgePolicyViolation",s="contentPolicyViolation",o="exposedPasswordProtectionViolation",a="bb-blackboard-core-reuse-policy-violated",l="bb-blackboard-core-min-age-violated",c="bb-blackboard-core-content-policy-violated",d="bb-blackboard-core-exposed-password-protection-violated"},888637:function(e,t,n){"use strict";n.d(t,{K:function(){return c},q:function(){return d}});var i=n(986709),r=n(259197),s=n(748494),o=n(817426),a=n(189390),l=n(690845);function c(e,t,n){var o,c,d,u,p,m,h,g,f;let b=r.AaE.getContentHandler(e),v=s.d;switch(t.size){case"large":v=s.d;break;case"medium":v=a.B;break;case"small":v=l.i}if(r.GQk.File.isEqualTo(b)){let t=null===(d=null===(c=null===(o=e.contentDetail)||void 0===o?void 0:o[i.DXv.File])||void 0===c?void 0:c.file)||void 0===d?void 0:d.mimeType;if(t)return v((0,r.RMg)(t))}if(r.AaE.isFolderContentItem(e)&&"ROOT"===e.title&&null==e.parentId)return v(i.zcD.Course);if(r.GQk.LtiLink.isEqualTo(b)&&(null===(p=null===(u=e.contentDetail)||void 0===u?void 0:u[i.DXv.LtiLink])||void 0===p?void 0:p.itemOrigin)==="CloudDocument"){let t=r.ddT.getCloudDocumentType(e);return v(t===i.rz_.CloudCollaboration?i.zcD.CollaborativeCloud:t===i.rz_.EmbeddedGoogle?i.zcD.DocumentGoogle:t===i.rz_.CloudCollaborationGoogle?i.zcD.CollaborativeGoogleCloud:i.zcD.DocumentCloud)}if(void 0!==t.gradebookColumn&&(b.isEqualTo(r.GQk.TestLink.handle)||b.isEqualTo(r.GQk.Unknown.handle)||b.isEqualTo(r.GQk.RusticiScorm.handle)||b.isEqualTo(r.GQk.LtiLink.handle)||b.isEqualTo(r.GQk.PartnerCloud.handle)||b.startsWith(r.GQk.LtiPlacement.handle))){if(null===(m=t.gradebookColumn.gradebookCategory)||void 0===m?void 0:m.isUserDefined)return v("custom-item");let e=null===(g=null===(h=t.gradebookColumn.gradebookCategory)||void 0===h?void 0:h.title)||void 0===g?void 0:g.substring(0,null===(f=t.gradebookColumn.gradebookCategory)||void 0===f?void 0:f.title.lastIndexOf(".name")).toLowerCase();if(e)return v(e)}return v(r.AaE.isFolderContentItem(e)&&n?i.zcD.FolderOpen:b.iconClass.replace(/^img-icon-/,""))}function d(e,t){var n,s,a,l,c,d;let u=r.AaE.getContentHandler(e);if(null===(n=t.gradebookColumn)||void 0===n||!n.gradebookCategory){if(u.startsWith(r.GQk.LtiPlacement.handle)){let t=null===(l=null===(a=null===(s=e.contentDetail)||void 0===s?void 0:s[`${e.contentHandler}`])||void 0===a?void 0:a.placement)||void 0===l?void 0:l.iconUrl;if(t)return(0,o.uI)(t)}if(r.GQk.LtiLink.isEqualTo(u)){let t=null===(d=null===(c=e.contentDetail)||void 0===c?void 0:c[i.DXv.LtiLink])||void 0===d?void 0:d.customIconUrl;if(t)return(0,o.uI)(t)}}}},904252:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});let i="othername_as_display_name_option"},897570:function(e,t,n){"use strict";n.d(t,{H1:function(){return d},HO:function(){return c},y5:function(){return i.y}});var i=n(584923),r=n(276635),s=n.n(r),o=n(202784),a=n(465139);function l({view:e}){return!e||!e.isValid||e.isLoading}function c(e,t){var n,i,r,c,d,u,p,m,h,g,f,b;let v=null!==(n=null==e?void 0:e.paging)&&void 0!==n?n:{},y="offsetId"in v,{limit:S=25,offsetId:C}=v,E=!y||!!C,I=(0,a.lY)(e?{...e,paging:y?{offsetId:C,limit:S}:{offset:null!==(i=v.offset)&&void 0!==i?i:0,limit:S}}:void 0),[w,A]=(0,o.useState)(0),[k,T]=(0,o.useState)(0),[P,D]=(0,o.useState)(!1),x=E?I:void 0,[R={view:null,results:[]}]=t(x?[x]:[]),L=!E||l(R),N=(0,o.useMemo)(()=>{var e,t,n;if(L||!I)return[];let i=[],r=null!==(n=null===(t=null===(e=R.view)||void 0===e?void 0:e.paging)||void 0===t?void 0:t.offset)&&void 0!==n?n:0;for(let e=0;e<w&&!(r<=0);e++){let e=r;r=Math.max(r-S,0),i.push({...I,paging:{offset:r,limit:e-r}})}return w!==i.length&&A(i.length),i},[L,R,w,S,I]),$=t(N),O=N.length!==w||$.length!==w||!!$.find(l),G=(0,o.useMemo)(()=>{var e,t;if(L||!I)return[];let{offset:n=0,limit:i=S}=null!==(t=null===(e=R.view)||void 0===e?void 0:e.paging)&&void 0!==t?t:{limit:0},r=n+i,s=[];for(let e=0;e<k;e++)s.push({...I,paging:{offset:r+e*S,limit:S}});return s},[L,S,R,k,I]),_=t(G),M=G.length!==k||_.length!==k||!!_.find(l),B=(0,o.useMemo)(()=>$.slice().reverse().concat([R]).concat(_),[R,_,$]),F=null===(d=null===(c=null===(r=B.find(e=>{var t,n;return"number"==typeof(null===(n=null===(t=e.view)||void 0===t?void 0:t.paging)||void 0===n?void 0:n.count)}))||void 0===r?void 0:r.view)||void 0===c?void 0:c.paging)||void 0===d?void 0:d.count,U=null===(m=null===(p=null===(u=B.find(e=>{var t,n;return"number"==typeof(null===(n=null===(t=e.view)||void 0===t?void 0:t.paging)||void 0===n?void 0:n.offset)}))||void 0===u?void 0:u.view)||void 0===p?void 0:p.paging)||void 0===m?void 0:m.offset,V=!!(null===(g=null===(h=B[0].view)||void 0===h?void 0:h.paging)||void 0===g?void 0:g.previousPage),H=!!(null===(b=null===(f=B[B.length-1].view)||void 0===f?void 0:f.paging)||void 0===b?void 0:b.nextPage),q=(0,o.useCallback)(()=>{A(N.length+1)},[N.length]),j=(0,o.useCallback)(()=>{T(G.length+1)},[G]),z=(0,o.useMemo)(()=>P?s().flatMap(B,e=>e.results):[],[P,B]),W=L||O||M,K=(0,a.zX)(()=>W);return(0,o.useEffect)(()=>{D(!1),A(0),T(0),setTimeout(()=>{K()||D(!0)})},[I,K,y]),(0,o.useEffect)(()=>{E&&!W&&D(!0)},[E,W]),{hasPrevious:V,hasNext:H,isLoading:W,isReady:P,loadPreviousPage:P&&!W&&V?q:void 0,loadNextPage:P&&!W&&H?j:void 0,count:F,offset:U,results:z}}function d(e,t){let n=(0,a.EP)(n=>{let i={...n};return t.forEach((t,r)=>{var s,o;let a=JSON.stringify(e[r]),l=n[a];(!l||null===(s=l.view)||void 0===s||!s.isValid||(null===(o=l.view)||void 0===o?void 0:o.isLoading))&&(i[a]=t)}),i},[e,t],{});return(0,o.useMemo)(()=>e.map(e=>n[JSON.stringify(e)]),[e,n])}},35302:function(e,t,n){"use strict";n.d(t,{G8:function(){return tm},HV:function(){return tn.H},j4:function(){return en},JD:function(){return _},VN:function(){return s},CJ:function(){return el},i5:function(){return tg},Ad:function(){return eP},Ux:function(){return eD},TV:function(){return eM},JS:function(){return eF.JS},xu:function(){return eW},K6:function(){return ez},O4:function(){return eK},w:function(){return tt},N0:function(){return eq.N},sN:function(){return tu.s},VH:function(){return e3.V},BH:function(){return td},rO:function(){return eQ},O1:function(){return ti.O},KM:function(){return tr.K},Kb:function(){return tr.q},Wj:function(){return ts.W},dJ:function(){return to.d},gz:function(){return tc.g},iw:function(){return ta.i},qq:function(){return eJ.q},yd:function(){return tp},FO:function(){return tl.F},st:function(){return e4},H1:function(){return tf.H1},R7:function(){return ej},HO:function(){return tf.HO},d4:function(){return eB},Xd:function(){return e5},y5:function(){return tf.y5}});var i,r,s,o,a=n(202784),l=n.n(a),c=n(906277),d=n(755755),u=n(88818),p=n(847969),m=n(592493),h=n(986709),g=n(579633),f=n(303210),b=n(327355),v=n(797580);let y=(0,b.makeStyles)(e=>({wrapper:{display:"flex",width:"100%"},avatar:{borderRadius:"50%",height:"24px",marginRight:"10px",marginTop:"8px",width:"24px"},names:{display:"inline-block",width:"90%"},givenName:{display:"block",marginRight:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},username:{color:e.palette.text.secondary,display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},highlight:{fontWeight:v.vC.fontWeightBold}})),S=e=>{var t;let n=y(e);return a.createElement(f.sN,{...e},a.createElement("div",{className:n.wrapper},a.createElement("img",{className:n.avatar,src:null===(t=e.option.user.avatar)||void 0===t?void 0:t.permanentUrl,alt:e.option.value}),a.createElement("span",{className:n.names},a.createElement("span",{className:n.givenName},e.option.label),a.createElement("span",{className:n.username},e.option.user.userName))))};var C=n(259197);let E=(e,t)=>C.Ys.courseMembership.getCourseMembershipViewStatusByQuery(e,t),I=(e,t)=>{let n=e.getState(),i=E(n,t),r=C.Ys.courseMembership.getCourseMembershipsByQuery(n,t),s=C.Ys.user.getUsersByIds(n,r.reduce((e,t)=>(t.userId&&e.push(t.userId),e),[]));return{memberships:r,users:s,view:i}},w=async(e,t)=>{let n=E(e.getState(),t);return n&&n.isValid&&!n.isLoading?I(e,t):(0,e.dispatch)(C.Nwg.courseMembership.loadCourseMembershipsByQuery(t)).then(()=>I(e,t))};var A=n(999058),k=n.n(A);let T=(e,t,n)=>{let[i,r]=a.useState(e+t+n),s=t+e;return s>i&&r(s+n),i},P=e=>l().createElement(p.AnalyticsCombobox,{...e}),D=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),x=[{field:h.PJt.Role,direction:h.SrV.Descending},{field:h.PJt.FamilyName,direction:h.SrV.Ascending},{field:h.PJt.GivenName,direction:h.SrV.Ascending}],R={membershipAvailable:!0,includeMe:!1},L=(e,t,n,i,r)=>(null==e?void 0:e.length)>=r?[]:t.reduce((e,t)=>{var r;if(!t.userId)return e;let s=n[t.userId];return s.id&&e.push({value:s.id,user:s,label:null!==(r=i(s,g.ILocaleUsernameFormat.Short))&&void 0!==r?r:""}),e},[]),N=(e=[],t)=>e.reduce((e,n)=>{var i;return n.id&&e.push({value:n.id,user:n,label:null!==(i=t(n,g.ILocaleUsernameFormat.Short))&&void 0!==i?i:""}),e},[]),$=(e,t)=>({users:e=(t=t.slice(0,50)).reduce((t,n)=>(n.userId&&(t[n.userId]=e[n.userId]),t),{}),memberships:t}),O=(e,t,n,i,r)=>{let s=(0,m.WT)(),o=(0,a.useCallback)(k()(async i=>{let o=await w(s,{courseId:e,paging:{limit:t},filter:{...R,roleBucket:n,searchString:i},sort:x});return r(o.users,o.memberships)},500),[e,r,t]);return(0,a.useCallback)((e,t)=>{o(e).then(e=>{t(e)})},[o])},G=(e,t,n,i)=>{var r,s;let o=T(50,n.length,10),a=O(e,o,t,n,i),{memberships:l,users:c,view:d}=(0,m.d$)({courseId:e,paging:{limit:o},filter:{...R,roleBucket:t,searchString:""},sort:x});return{...$(c,l),totalUsers:null!==(s=null===(r=null==d?void 0:d.paging)||void 0===r?void 0:r.count)&&void 0!==s?s:0,loadPickerUsersCallback:a}},_=({inputId:e,analyticsId:t,courseId:n,placeholder:i,onMemberSelectionChanged:r,disabled:s,selectedUsers:o,selectionLimit:p,label:m,roleBuckets:g})=>{let{translate:f,formatUsername:b}=(0,d.h)(),v=(0,a.useCallback)((e,t)=>L(o,t,e,b,p),[b,o,p]),{users:y,memberships:C,totalUsers:E,loadPickerUsersCallback:I}=G(n,null!=g?g:[h.O8v.Taking,h.O8v.Supporting],o,v),w={noResults(){return(null==o?void 0:o.length)>=p?f("course.learn-data-components.course-members-picker.noResultsMax"):f("course.learn-data-components.course-members-picker.noResults")}},A=(0,u.Jvq)(w),k=(0,u.Kx9)(w),T=(0,u.rvo)(),x=L(o,C,y,b,p),R=N(o,b),$={id:null!=e?e:"course-memberships-combobox",analyticsId:`${t}.userPicker}`,classes:{root:(0,c.Z)(T.comboboxReset,T.comboboxWidth,"js-individual-members-combobox")},isClearable:!0,label:m,disabled:s,components:{MenuItem:S},value:R,placeholder:i,onChange:e=>{var t;r(null!==(t=null==e?void 0:e.map(e=>e.user))&&void 0!==t?t:[])}};return E>50?l().createElement("div",{className:T.comboboxContainerWidth},l().createElement(D,{isMulti:!0,loadOptions:I,defaultOptions:x,strings:k,...$})):l().createElement("div",{className:T.comboboxContainerWidth},l().createElement(P,{isMulti:!0,options:x,strings:A,...$}))};var M=n(410628);let B=(0,b.makeStyles)(e=>(0,b.createStyles)({groupSize:{background:v.Oq.b9,color:v.yV.primary,borderRadius:"50%",width:"24px",height:"24px",display:"inline-block",marginRight:"10px",textAlign:"center",fontWeight:e.typography.fontWeightBold,lineHeight:"24px"},maxUser:{fontSize:e.typography.fontSizeSmall},highlight:{fontWeight:e.typography.fontWeightBold}})),F=e=>{var t;let{option:n}=e,i=B(e),r=null!==(t=n.group.studentCount)&&void 0!==t?t:100,s=(0,M.q)();return l().createElement(f.sN,{...e},l().createElement("span",{className:(0,c.Z)("js-group-size",i.groupSize,r>99&&i.maxUser)},r>99?s("course.learn-data-components.course-groups-picker.maxUsers"):r),l().createElement("span",null,n.label))};var U=n(675689);let V=(0,b.makeStyles)(e=>(0,b.createStyles)({groupSet:{display:"flex",width:"100%"},label:{flex:1,overflow:"hidden",textOverflow:"ellipsis",paddingRight:"10px"},visibility:{fontWeight:e.typography.fontWeightRegular,color:e.palette.text.hint,display:"flex"},visibilityIcon:{marginRight:"5px",alignSelf:"center"}})),H=e=>{let{group:t}=e,n=(0,M.q)(),i=V(e),r=n(t.groupSet.isAvailable?"course.learn-data-components.course-groups-picker.visible":"course.learn-data-components.course-groups-picker.hidden");return a.createElement(f.lX,{...e},a.createElement("span",{className:i.groupSet},a.createElement("span",{className:i.label},e.children),a.createElement("span",{className:i.visibility},t.groupSet.isAvailable?a.createElement(U.Visible,{className:i.visibilityIcon}):a.createElement(U.Invisible,{className:i.visibilityIcon}),a.createElement("span",null,r))))},q=(e,t)=>C.Ys.group.getCourseGroupViewStatusByQuery(e,t),j=(e,t)=>{let n=e.getState(),i=q(n,t);return{groups:C.Ys.group.getGroupsByQuery(n,t),view:i}},z=async(e,t)=>{let n=q(e.getState(),t);return n&&n.isValid&&!n.isLoading?j(e,t):(0,e.dispatch)(C.Nwg.group.loadGroupsByQuery(t)).then(()=>j(e,t))},W=e=>l().createElement(p.AnalyticsCombobox,{...e}),K=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),Z=e=>{var t,n;return{group:e,label:null!==(t=e.title)&&void 0!==t?t:"",value:null!==(n=e.id)&&void 0!==n?n:""}},Q=(e,t,n)=>{let i=new Map;return!((null==e?void 0:e.length)>=n)&&(null==t?void 0:t.length)?(t.forEach(e=>{var t;if(!(null==e?void 0:e.groupSet)||!(null==e?void 0:e.groupSetId))return;let n=e.groupSet,r=Z(e);if(!n.id)return;let s=i.get(n.id);if(s)s.options.push(r);else{let s={label:null!==(t=n.title)&&void 0!==t?t:"",groupSet:n,options:[]};s.options.push(r),i.set(e.groupSetId,s)}}),Array.from(i.values())):[]},J=(e=[])=>e.map(e=>Z(e)),Y=e=>e.slice(0,50),X=(e,t,n,i)=>{let r=(0,m.WT)(),[s,o]=(0,a.useState)([]),l=(0,a.useMemo)(()=>k()(async n=>{let{groups:s}=await z(r,{courseId:e,filter:{nameOrGroupSetName:n,inGroupSet:!0,groupNameCompare:C.a6B.contains},paging:{limit:t}}),a=i(Y(s));return o(a),a},500),[r,e,t,i]);return{memoizedLoadOptionsCallback:(0,a.useCallback)((e,t)=>{l(e).then(e=>{t(e)})},[l]),optionData:s}},ee=(e,t,n)=>{var i,r;let s=T(50,t.length,10),{memoizedLoadOptionsCallback:o,optionData:a}=X(e,s,t,n),{groups:l,view:c}=(0,m.tp)({courseId:e,filter:{nameOrGroupSetName:"",inGroupSet:!0},paging:{limit:s}});return{groups:Y(l),totalGroups:null!==(r=null===(i=null==c?void 0:c.paging)||void 0===i?void 0:i.count)&&void 0!==r?r:0,optionData:a.length>0?a:n(Y(l)),loadPickerGroupsCallback:o}},et=(e,t)=>{var n,i;return!!(e.label.toLocaleLowerCase().includes(t.toLocaleLowerCase())||(null===(i=null===(n=e.group.groupSet)||void 0===n?void 0:n.title)||void 0===i?void 0:i.toLocaleLowerCase().includes(t.toLocaleLowerCase())))},en=({inputId:e,analyticsId:t,courseId:n,onSelectedGroupsChanged:i,disabled:r,placeholder:s,selectedGroups:o=[],selectionLimit:d,label:p})=>{let m=(0,M.q)(),h=(0,a.useCallback)(e=>Q(o,e,d),[o,d]),{groups:g,totalGroups:f,optionData:b,loadPickerGroupsCallback:v}=ee(n,o,h),y=(0,a.useCallback)(e=>Array.isArray(e)?{visibleGroupCount:e.reduce((e,t)=>{var n;return(null===(n=t.group)||void 0===n?void 0:n.isAvailable)?e+1:e},0),totalGroupCount:e.length}:{visibleGroupCount:e.group.isAvailable?1:0,totalGroupCount:1},[]),S={noResults(){return(null==o?void 0:o.length)>=d?m("course.learn-data-components.course-groups-picker.noResultsMax"):m("course.learn-data-components.course-groups-picker.noResults")}},C=(0,u.Jvq)(S),E=(0,u.Kx9)(S),I=(0,u.rvo)(),w=Q(o,g,d),A=J(o),k={id:null!=e?e:"course-groups-combobox",analyticsId:`${t}.groupsPicker`,classes:{root:(0,c.Z)(I.comboboxReset,I.comboboxWidth,"js-groups-combobox")},isClearable:!0,label:p,searchFilter:et,disabled:r,getOnChangeAnalyticsData:y,components:{MenuItem:F,MenuListSubheader:H},value:A,placeholder:s,onChange:e=>{var t;i(null!==(t=null==e?void 0:e.map(e=>e.group))&&void 0!==t?t:[])}};return f>50?l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(K,{isMulti:!0,loadOptions:v,defaultOptions:w,strings:E,...k})):l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(W,{isMulti:!0,options:w,strings:C,...k}))},ei=(0,b.makeStyles)(e=>({tooltipList:{margin:0},tooltipListItem:{listStyleType:"none",padding:0,margin:0},indicatorButton:{minHeight:0,minWidth:0,margin:e.spacing(-1),padding:e.spacing(1)}}));var er=n(927335),es=n(465139);(i=s||(s={})).Small="small",i.Medium="medium";let eo=({size:e})=>{switch(e){case s.Small:return l().createElement(U.TimeExtra,null);case s.Medium:return l().createElement(er.TimeExtra,null)}},ea="course.learn-data-components.exceptionDetailsIndicator",el=({analyticsId:e,courseId:t,columnId:n,membershipId:i,size:r,tooltipButtonAriaLabel:s})=>{let o=ei(),a=(0,m.Y$)(t,n,i),c={roleBucket:[h.O8v.Taking],groupId:(null==a?void 0:a.groupId)?[a.groupId]:void 0},{memberships:d,view:u}=(0,m.d$)({courseId:t,filter:c}),g=!!(null==a?void 0:a.groupId)&&d.some(e=>e.dueDateExceptionType===h.AVG.Unlimited),f=(0,es.Me)(),b=`exception-details-tooltip-${f}`,v=(0,M.q)(),y=(0,m.tx)();if(!a)return null;let{hasAttemptsException:S,hasDueDateException:C,hasEndException:E,hasStartException:I}=a,w=[];if(!g&&C&&w.push("dueDate"),(I||E)&&w.push("release"),S&&w.push("attempts"),0===w.length||(null==u?void 0:u.isLoading))return null;let A=l().createElement("ul",{className:o.tooltipList},w.map(e=>l().createElement("li",{key:e,className:o.tooltipListItem},v(`${ea}.exception.${e}`))));return l().createElement(p.AnalyticsTooltip,{id:b,analyticsId:`${e}.exceptionDetails`,title:A},l().createElement(p.AnalyticsIconButton,{className:o.indicatorButton,analyticsId:`${e}.exceptionDetails.indicator`,"aria-label":null!=s?s:y(`${ea}.iconAriaLabel`),"aria-describedby":b},l().createElement(eo,{size:r})))};var ec=n(238136);let ed=new Map,eu=new Map,ep=new Map;eu.set(h.bu3.Assignment,er.Assignment),eu.set(h.bu3.Attendance,er.Attendance),eu.set(h.bu3.Calculation,er.Calculation),eu.set(h.bu3.Discussion,er.Discussion),eu.set(h.bu3.Exam,er.Test),eu.set(h.bu3.Homework,er.Home),eu.set(h.bu3.Journal,er.Grades),eu.set(h.bu3.LTI,ec.Lti),eu.set(h.bu3.Presentation,er.PresentationMenu),eu.set(h.bu3.Quiz,er.Test),eu.set(h.bu3.ScormEngine,ec.Scormengine),eu.set(h.bu3.Survey,er.Survey),eu.set(h.bu3.Test,er.Test),(r=o||(o={})).Small="small",r.Medium="medium",r.Large="large";let em=e=>{let{category:t,size:n}=e,i=eu;if(n===o.Small?i=ed:n===o.Large&&(i=ep),(null==t?void 0:t.isUserDefined)||!(null==t?void 0:t.title))return a.createElement(er.DocumentBlank,null);let r=null==t?void 0:t.title,s=i.get(r);return s?a.createElement(s,null):a.createElement(er.DocumentBlank,null)},eh=(0,b.makeStyles)(e=>({wrapper:{display:"flex",alignItems:"center",width:"100%"},iconWrapper:{display:"flex",alignItems:"center",marginRight:"10px",width:"24px"},columnName:{width:"90%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},highlight:{fontWeight:e.typography.fontWeightBold}})),eg=e=>{let t=eh(e);return a.createElement(f.sN,{...e},a.createElement("div",{className:t.wrapper},a.createElement("div",{className:t.iconWrapper},a.createElement(em,{category:e.option.column.gradebookCategory,size:o.Medium})),a.createElement("span",{className:t.columnName},e.option.label)))},ef=e=>l().createElement(p.AnalyticsCombobox,{...e}),eb=e=>l().createElement(p.AnalyticsAsyncCombobox,{...e}),ev=(e,t,n,i)=>{let{id:r,columnName:s,externalGrade:o,anonymousGrading:a,calculationType:l}=e;return!(!r||!s||o&&!t||l!==h.eNW.NonCalculated&&!n||a&&!i)},ey=(e,t,n,i,r)=>(ev(t,n,i,r)&&e.push({value:t.id,column:t,label:t.columnName||""}),e),eS=(e=[],t=!1,n=!1,i=!1)=>e.reduce((e,r)=>ey(e,r,t,n,i),[]),eC=[{field:C.zg8.ColumnName,direction:h.SrV.Ascending}],eE=e=>e.slice(0,50),eI=(e,t)=>C.Ys.gradebookColumn.getGradebookColumnViewStatusByQuery(e,t),ew=(e,t)=>{let n=e.getState(),i=eI(n,t);return{columns:C.Ys.gradebookColumn.getGradebookColumnsByQuery(n,t),view:i}},eA=async(e,t)=>{let n=eI(e.getState(),t);return n&&n.isValid&&!n.isLoading?ew(e,t):(0,e.dispatch)(C.Nwg.gradebookColumn.loadGradebookColumnsByQuery(t)).then(()=>ew(e,t))},ek=(e,t,n)=>{let i=(0,m.WT)(),r=(0,a.useCallback)(k()(async r=>{let{columns:s}=await eA(i,{courseId:e,filter:{name:r},paging:{limit:t},sort:eC});return n(s)},500),[e,t,n]);return(0,a.useCallback)((e,t)=>{r(e).then(e=>{t(e)})},[r])},eT=(e,t,n)=>{var i,r;let s=T(50,t.length,10),o=ek(e,s,n),{gradebookColumns:a,view:l}=(0,m.nh)({courseId:e,paging:{limit:s},sort:eC});return{columns:eE(a),totalColumns:null!==(r=null===(i=null==l?void 0:l.paging)||void 0===i?void 0:i.count)&&void 0!==r?r:0,loadPickerColumnsCallback:o}},eP=({inputId:e,analyticsId:t,courseId:n,placeholder:i,onColumnSelectionChange:r,disabled:s,allowExternalGradeColumns:o,allowCalculatedColumns:d,allowAnonymousGrading:p,selectedColumns:m,selectionLimit:h,label:g})=>{let f=(0,M.q)(),b=(0,a.useCallback)(e=>(null==m?void 0:m.length)>=h?[]:eS(e,o,d,p),[m,h,o,d,p]),{columns:v,totalColumns:y,loadPickerColumnsCallback:S}=eT(n,m,(0,a.useCallback)(e=>b(e),[b])),C={noResults(){return(null==m?void 0:m.length)>=h?f("course.learn-data-components.gradebook-columns-picker.noResultsMax"):f("course.learn-data-components.gradebook-columns-picker.noResults")}},E=(0,u.Jvq)(C),I=(0,u.Kx9)(C),w=(0,u.rvo)(),A=b(v),k=eS(m,o,d,p),T={id:null!=e?e:"course-columns-combobox",analyticsId:`${t}.columnsPicker}`,classes:{root:(0,c.Z)(w.comboboxReset,w.comboboxWidth,"js-columns-combobox")},isClearable:!0,label:g,disabled:s,components:{MenuItem:eg},value:k,placeholder:i,onChange:e=>{var t;r(null!==(t=null==e?void 0:e.map(e=>e.column))&&void 0!==t?t:[])}};return y>50?l().createElement("div",{className:w.comboboxContainerWidth},l().createElement(eb,{isMulti:!0,loadOptions:S,defaultOptions:A,strings:I,...T})):l().createElement("div",{className:w.comboboxContainerWidth},l().createElement(ef,{isMulti:!0,options:A,strings:E,...T}))},eD=({inputId:e,analyticsId:t,courseId:n,placeholder:i,onColumnSelectionChange:r,disabled:s,allowExternalGradeColumns:o,allowCalculatedColumns:d,allowAnonymousGrading:p,selectedColumn:m,label:h})=>{let g=(0,M.q)(),f=(0,a.useCallback)(e=>eS(e,o,d,p),[o,d,p]),{columns:b,totalColumns:v,loadPickerColumnsCallback:y}=eT(n,m?[m]:[],(0,a.useCallback)(e=>f(e),[f])),S={noResults(){return g("course.learn-data-components.gradebook-columns-picker.noResults")}},C=(0,u.Jvq)(S),E=(0,u.Kx9)(S),I=(0,u.rvo)(),w=f(b),A=eS(m?[m]:[],o,d,p),k={id:null!=e?e:"course-columns-combobox",analyticsId:`${t}.columnsPicker}`,classes:{root:(0,c.Z)(I.comboboxReset,I.comboboxWidth,"js-columns-combobox")},isClearable:!1,label:h,disabled:s,components:{MenuItem:eg},value:A,placeholder:i,showSelectedOptions:!1,onChange:e=>{r(e.column)}};return v>50?l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(eb,{loadOptions:y,defaultOptions:w,strings:E,...k})):l().createElement("div",{className:I.comboboxContainerWidth},l().createElement(ef,{options:w,strings:C,...k}))};var ex=n(198022),eR=n(58200),eL=n(89822);let eN=(0,b.makeStyles)(e=>({input:{display:"grid",gridTemplateColumns:"1fr auto",gridTemplateAreas:`
      "title buttons"
      "preview preview"
    `,alignItems:"baseline",gap:"12px"},title:{gridArea:"title"},buttons:{gridArea:"buttons",display:"flex"},button:{border:`1px solid ${e.palette.border.main}`,"&:first-child":{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"},"&:last-child":{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"},"& + &":{borderLeft:"0px"}},preview:{gridArea:"preview",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",borderRadius:"4px",background:e.palette.background.b3},addImagePlaceholder:{background:e.palette.background.default,height:"100%",aspectRatio:"1"},fitContainer:{padding:"12px"}})),e$=({analyticsId:e,onAddImageClicked:t})=>{let n=(0,M.q)(),i=eN();return l().createElement("div",{className:(0,c.Z)(i.preview,i.addImagePlaceholder)},l().createElement(p.AnalyticsLink,{analyticsId:`${e}.placeholder.addImage.link`,component:"button",onClick:t},n("learnDataComponents.imageFileInput.placeholder.addImageButton")))},eO=(0,b.makeStyles)(e=>({previewImage:{height:"100%",width:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat"},fitImage:{backgroundSize:"contain"},fillImage:{backgroundSize:"cover"},message:{margin:"16px",color:e.palette.text.secondary},loadingLabel:{paddingTop:0},error:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},errorIcon:{color:e.palette.brand.main}})),eG=e=>{var t;let{analyticsId:n,placeholder:i,previewStyle:r="fill",readOnly:s,retry:o,uploadProgress:a,uploadStatus:d,value:u,openImagePicker:h}=e,g=(0,M.q)(),f=eO();if(C.udf.isUploadingFile(d)){let e=function(e){if(null==e?void 0:e.lengthComputable)return Math.round(e.loaded/e.total*100)}(a);return l().createElement(p.AnalyticsCircularProgress,{id:"ImageFileInput-CircularProgress",label:g("learnDataComponents.imageFileInput.loading.label"),variant:"number"==typeof e?"static":"indeterminate",showPercent:!0,labelProps:{className:f.loadingLabel,"aria-live":"polite"},value:e,formatPercentage:()=>g("learnDataComponents.imageFileInput.loading.percent",{percentage:e})})}return C.udf.didNotCompleteFileUpload(d)?l().createElement("div",{className:(0,c.Z)(f.error,f.message)},l().createElement(er.Warning,{className:f.errorIcon}),l().createElement(p.AnalyticsTypography,{component:"span","aria-live":"assertive",role:"alert"},g("learnDataComponents.imageFileInput.error.label")),o&&l().createElement(p.AnalyticsLink,{component:"button",analyticsId:`${n}.retry.button`,onClick:o},g("learnDataComponents.imageFileInput.error.retry"))):u?l().createElement(l().Fragment,null,d===C.XXy.Complete&&l().createElement(eL.Z,{"aria-live":"polite",analyticsId:`${n}.upload.success.announcement`},g("learnDataComponents.imageFileInput.uploadSuccess")),l().createElement("div",{className:(0,c.Z)(f.previewImage,"fit"===r?f.fitImage:f.fillImage),style:{backgroundImage:`url("${encodeURI(null!==(t=(0,m.Jn)(u))&&void 0!==t?t:"")}")`}})):i||(s?l().createElement(p.AnalyticsTypography,{className:f.message},g("learnDataComponents.imageFileInput.placeholder.readOnly")):l().createElement(e$,{analyticsId:n,onAddImageClicked:h}))},e_="fakeUploadId",eM=e=>{var t;let{analyticsId:n,aspect:i,classes:r,minimumDimensions:s,onChangeCapture:o,onChange:d,onChangeError:h,onDelete:g,onPickImageCapture:f,placeholder:b,previewStyle:v,readOnly:y=!1,resizeWidth:S,sources:E,title:I,value:w,confirmationDialogProps:A}=e,k=eN(),T=(0,M.q)(),P=e=>`${n}.${e}`,D=(0,es.Me)(),[x,R]=(0,a.useState)(!1),[L,N]=(0,a.useState)(),$=(0,a.useRef)(void 0),O=(0,m.Lx)(),G=(0,m.pJ)(e=>L?C.Ys.fileUpload.getFileUploadById(e,L):void 0),_=null!==(t=null==G?void 0:G.status)&&void 0!==t?t:L===e_?C.XXy.InProgress:void 0,B=C.udf.isUploadingFile(_),F=C.udf.didNotCompleteFileUpload(_),[V,H]=(0,a.useState)(!1),q=(0,es.zX)(()=>{var e;return null===(e=null==G?void 0:G.uploadProgress.aborter)||void 0===e?void 0:e.abort()});(0,a.useEffect)(()=>q,[q]);let j=(0,es.zX)(d);(0,a.useEffect)(()=>{_===C.XXy.Complete&&(null==G?void 0:G.uploadedFile)&&(N(void 0),j(G.uploadedFile),$.current=void 0)},[_,null==G?void 0:G.uploadedFile,j]);let z=(0,es.f0)(h);(0,a.useEffect)(()=>{F&&(null==z||z())},[F,z]);let W=(0,a.useCallback)(e=>{let t=(0,ex.v4)();$.current=e,N(t),H(!1),O(C.Nwg.fileUpload.filesUploadRequest([{correlationId:t,file:e,queryParams:{resizeImageWidth:S}}]))},[O,S]),K=(0,a.useCallback)(()=>{H(!0)},[]),Z=(0,es.zX)(()=>{N(e_),R(!1),null==o||o()}),{displayModal:Q,modal:J}=(0,u.ddY)(u.U6L,{titleText:T("learnDataComponents.imageFileInput.confirmDeleteModal.title"),contentText:T("learnDataComponents.imageFileInput.confirmDeleteModal.header"),confirmationButtonText:T("learnDataComponents.imageFileInput.confirmDeleteModal.confirm"),rootId:D,analyticsId:`${n}.delete.confirm`,exitCallback:()=>{},...A}),Y=(0,a.useCallback)(()=>{R(!1)},[]);return l().createElement(l().Fragment,null,l().createElement("div",{className:k.input},l().createElement("div",{className:k.title},I),l().createElement("div",{className:k.buttons},!y&&l().createElement(p.AnalyticsIconButton,{analyticsId:P("select.button"),className:k.button,disabled:B,onClick:()=>R(!0),onClickCapture:f,"aria-label":T("learnDataComponents.imageFileInput.select")},l().createElement(U.Image,null)),!y&&g&&l().createElement(p.AnalyticsIconButton,{analyticsId:P("remove.button"),className:k.button,onClick:async()=>{let{confirmed:e}=await Q();e&&(null==g||g())},disabled:!w||B||F,"aria-label":T("learnDataComponents.imageFileInput.remove")},l().createElement(U.Trash,null))),l().createElement("div",{className:(0,c.Z)(k.preview,"fit"===v&&k.fitContainer,null==r?void 0:r.preview)},l().createElement(eG,{analyticsId:n,placeholder:b,previewStyle:v,readOnly:y,retry:V?void 0:function(){$.current&&W($.current)},uploadProgress:null==G?void 0:G.uploadProgress.progress,uploadStatus:V?C.XXy.Failed:_,value:w,openImagePicker:()=>R(!0)}))),l().createElement(eR.JS,{open:x,onCancel:Y,onSaveCapture:Z,onSave:W,onSaveError:K,aspect:i,minimumDimensions:s,sources:E,analyticsId:n}),J)},eB=(0,b.makeStyles)(e=>({section:{display:"flex",flexDirection:"column",gap:"8px",padding:"16px 0","& + &":{borderTop:`1px solid ${e.palette.border.main}`},...u.ASH.sidePanelContentMarginFix}}));var eF=n(585485);let eU=(0,b.makeStyles)(e=>(0,b.createStyles)({root:{display:"flex",flexDirection:"column",width:"100%"},baseText:{flip:!1,overflow:"hidden",direction:e.direction,textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"},userFlex:{display:"flex",alignItems:"center"},userAccommodation:{color:e.palette.brand.main,marginInlineEnd:"5px"},userName:{color:"inherit",textDecoration:"none","&:hover, &:focus, &:active":{color:"inherit",textDecoration:"underline"}},userPronunciation:{display:"flex",width:"100%"},userPronunciationAudio:{flexDirection:"row","& $pronunciationAudio":{"& button":{minWidth:0,minHeight:0,padding:"0 5px"}}},pronouns:{"&$pronouns$pronouns":{display:"block",fontWeight:e.typography.fontWeightRegular}},pronunciation:{"&$pronunciation$pronunciation":{display:"flex",alignItems:"center",margin:"0 -5px","& > span":{padding:"0 5px",fontWeight:e.typography.fontWeightRegular}}},pronunciationAudio:{},subtext:{color:e.palette.text.secondary,lineHeight:"18px",fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightRegular}})),eV=e=>{var t,n,i;let{user:r,username:s,ariaHidden:o,showPronouns:l,subtext:d,showPronunciation:p,showAccommodation:m,userNameBdiStyles:h,userNameStyles:g,rootStyles:f}=e,b=(0,M.q)(),v=eU();if(!r)return a.createElement(a.Fragment,null);let y={[v.userFlex]:m||p&&(null===(t=r.pronunciationAudio)||void 0===t?void 0:t.permanentUrl),[v.userPronunciationAudio]:p&&(null===(n=r.pronunciationAudio)||void 0===n?void 0:n.permanentUrl)};return a.createElement("div",{className:(0,c.Z)(v.root,f)},a.createElement("div",{className:(0,c.Z)(v.userPronunciation,y,g)},m&&a.createElement(U.Accommodations,{className:v.userAccommodation,titleAccess:b("cr.components.username.accommodationAriaLabel")}),a.createElement("bdi",{"aria-hidden":o,className:(0,c.Z)(v.baseText,h)},s),p&&(null===(i=r.pronunciationAudio)||void 0===i?void 0:i.permanentUrl)&&a.createElement(u.zi,{className:(0,c.Z)(v.pronunciationAudio),analyticsId:"username.pronunciation",src:r.pronunciationAudio.permanentUrl,ariaLabel:b("cr.components.username.pronunciationAriaLabel")})),p&&r.pronunciation&&a.createElement("bdi",{className:(0,c.Z)(v.baseText,v.pronunciation,e.pronunciationStyles)},a.createElement("span",{"aria-hidden":o},r.pronunciation)),l&&r.pronouns&&a.createElement("bdi",{"aria-hidden":o,className:(0,c.Z)(v.baseText,v.pronouns,e.pronounsStyles)},r.pronouns),d&&a.createElement("span",{"aria-hidden":o,className:(0,c.Z)(v.baseText,v.subtext,e.subtextStyles,"username-subtext")},d))};var eH=n(817426),eq=n(904252);let ej=(e,t)=>{var n,i;let{formatUsername:r}=(0,d.h)(),s=(0,m.Sp)(eq.N),o=t&&s?(0,eH.dT)(t,s):void 0,l=!!t;return(0,a.useMemo)(()=>{var n,i;return l?r({familyName:t.familyName,givenName:t.givenName,email:t.email,id:t.id,otherName:t.otherName,title:t.title,ui:{anonymousStudent:null===(n=t.ui)||void 0===n?void 0:n.anonymousStudent,anonymousStudentId:null===(i=t.ui)||void 0===i?void 0:i.anonymousStudentId},preferredDisplayName:o},e,{noWrap:!0}):""},[e,r,l,o,null==t?void 0:t.email,null==t?void 0:t.familyName,null==t?void 0:t.givenName,null==t?void 0:t.id,null==t?void 0:t.otherName,null==t?void 0:t.title,null===(n=null==t?void 0:t.ui)||void 0===n?void 0:n.anonymousStudent,null===(i=null==t?void 0:t.ui)||void 0===i?void 0:i.anonymousStudentId])},ez=e=>{let{user:t,format:n}=e,i=ej(n,t);return l().createElement(eV,{...e,username:i})},eW=e=>{let{analyticsId:t,user:n,format:i,onClick:r,link:s}=e,o=eU(),a=ej(i,n),d=n&&r?l().createElement(p.AnalyticsLink,{className:(0,c.Z)(o.userName),analyticsId:`${t}.link`,href:null!=s?s:"#",onClick:()=>r(n)},a):a;return l().createElement(eV,{...e,username:d})},eK=e=>{let{users:t,groups:n,format:i=g.ILocaleUsernameFormat.Short,maxUsers:r,canExpand:s=!1,moreKey:o,collapseKey:c}=e,{formatUsername:p}=(0,d.h)(),m=(0,a.useMemo)(()=>{var e;return[...t.map(e=>({user:e,username:p(e,i)})).map(({user:e,username:t})=>{var n,i;if(null===(n=e.ui)||void 0===n?void 0:n.onClick){let n=null===(i=e.ui)||void 0===i?void 0:i.onClick;return l().createElement("a",{href:"#",onClick:()=>n(e)},t)}return t}),...null!==(e=null==n?void 0:n.map(e=>e.title))&&void 0!==e?e:[]]},[t,n,i,p]);return l().createElement(u.Mch,{analyticsId:"localized-usernames",items:m,maxItems:r,canExpand:s,moreKey:o,collapseKey:c})},eZ=(0,b.makeStyles)(e=>(0,b.createStyles)({userCardPreview:{display:"flex",border:`1px solid ${e.palette.border.main}`,borderRadius:"2px",padding:"13px 19px"},avatar:{width:"20%"},userInfo:{width:"80%"},userName:{fontSize:"16px",fontWeight:e.typography.fontWeightSemiBold,"& bdi":{whiteSpace:"initial"}}})),eQ=e=>{let{avatar:t,givenName:n,familyName:i,otherName:r,pronunciation:s,pronunciationAudioUrl:o,preferredDisplayName:l,pronouns:c}=e,u=eZ(),{formatUsername:m}=(0,d.h)(),h={givenName:n,familyName:i,otherName:r,pronunciation:s,pronunciationAudio:{permanentUrl:o},preferredDisplayName:l,pronouns:c},f=m(h,g.ILocaleUsernameFormat.Short);return a.createElement("div",{className:u.userCardPreview},a.createElement("div",{className:u.avatar},a.createElement(p.AnalyticsAvatar,{size:"medium",alt:f,src:null==t?void 0:t.permanentUrl})),a.createElement("div",{className:u.userInfo},a.createElement(ez,{userNameStyles:u.userName,format:g.ILocaleUsernameFormat.Short,ariaHidden:!0,user:h,showPronouns:!0,showPronunciation:!0})))};var eJ=n(920357);let eY=(e,t)=>{let n=[];return t.forEach(t=>{let i=C.Ys.fileUpload.getGroupStatusById(e,t);i&&n.push(i)}),n};var eX=n(44432);function e0(e,t){return e===t||e.length===t.length&&e.every((e,n)=>(0,eX.wU)(t[n],e))}function e1(e,t){return e===t||e.length===t.length&&e.every((e,n)=>{var i;return(i=t[n])===e||i.groupId===e.groupId&&e0(i.pendingUploads,e.pendingUploads)&&e0(i.uploads,e.uploads)})}let e2=e=>(0,m.pJ)(t=>eY(t,e).map(({groupId:e,pendingUploads:n,uploads:i})=>{let r={groupId:e,pendingUploads:n,uploads:[]};return r.uploads=i.reduce((e,n)=>{var i;let r=C.Ys.fileUpload.getFileUploadById(t,n);return r&&e.push({correlationId:n,filename:null!==(i=r.filename)&&void 0!==i?i:"",status:r.status,error:r.error}),e},[]),r}),e1),e4=e=>{let t=e2(e.current),n=function(){let{translate:e,formatItems:t}=(0,d.h)();return{readUploadStarted:(0,a.useCallback)(t=>{let n;n=t.length>1?e("components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",{filesCount:t.length}):e("components.directives.fileUpload.aria.singleFile.uploadStarted"),(0,eH.ul)(n)},[e]),readUploadFinished:(0,a.useCallback)(n=>{let i;if(1===n.length){var r,s;i=(r=n[0]).status===C.XXy.Complete?e("components.directives.fileUpload.aria.singleFile.uploadSuccessful"):r.status!==C.XXy.Failed||(null===(s=r.error)||void 0===s?void 0:s.errorType)?void 0:e("components.directives.fileUpload.aria.singleFile.uploadFailed")}else i=function(e,t,n){let i=[],r=[];n.forEach(e=>{e.status===C.XXy.Failed?i.push(e.filename):e.status===C.XXy.Canceled&&r.push(e.filename)});let s=n.length-r.length;return s<=0?void 0:i.length===s?e("components.directives.fileUpload.aria.multipleFiles.uploadFailed"):0===i.length?e("components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",{filesCount:s}):`${e("components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",{successfulFilesCount:s-i.length,filesCount:s})} ${e("components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",{filesCount:i.length,filenameList:t(i,i.length,void 0)})}`}(e,t,n);i&&(0,eH.ul)(i)},[e,t])}}();return(0,a.useEffect)(()=>{if(0===t.length)return;let i=[];t.forEach(e=>{0===e.pendingUploads.length&&i.push(e)}),i.forEach(e=>{n.readUploadFinished(e.uploads)}),i.forEach(t=>{e.current.delete(t.groupId)})},[t,n.readUploadFinished,n.readUploadStarted]),(0,a.useCallback)((t,i)=>{e.current.add(t),n.readUploadStarted(i)},[n.readUploadStarted])};function e6(e,t){return e===t||e.length===t.length&&e.every((e,n)=>{var i;return(i=t[n])===e||i.groupId===e.groupId&&e0(i.oversizedFiles,e.oversizedFiles)})}let e5=e=>(0,m.pJ)(t=>eY(t,e).reduce((e,{groupId:t,oversizedFiles:n})=>(n.length>0&&e.push({groupId:t,oversizedFiles:n}),e),[]),e6);var e3=n(125282),e8=n(311822);let e9=(0,b.makeStyles)(e=>({dialogContent:{maxHeight:"400px",overflowY:"auto"},fileInfo:{marginBottom:"5px"}})),e7=e=>{var t;let{fileSizeGroup:n,index:i}=e,r=e9(),s=(0,M.q)();return l().createElement(l().Fragment,null,l().createElement(p.AnalyticsDialogContentText,{analyticsId:"components.directives.fileUpload.text",id:`max-file-size-dialog-message-${i}`},s("components.directives.fileUpload.maxFileSizeWarningMessage",{maxFileSize:(t=n.fileSizeLimit,l().createElement(p.AnalyticsTypography,{component:"span",variant:"h4"},s("components.directives.fileUpload.maxFileSize",{maxFileSize:(0,eH.wZ)(t)})))})),l().createElement("ul",null,n.files.map((e,t)=>l().createElement("li",{className:r.fileInfo,key:t},l().createElement(p.AnalyticsTypography,{component:"span",variant:"h4"},e.filename)))))},te=(e,t,n)=>{let i=[];return e.forEach(e=>{var r;let s=null!==(r=e.filename)&&void 0!==r?r:"",{customGroupName:o,fileSizeLimit:a}=C.udf.getCustomFileSizeLimitAndGroupName(s,t,n),l=i.find(e=>e.groupName===o);l?l.files.push(e):i.push({files:[e],groupName:o,fileSizeLimit:a})}),i},tt=e=>{var t,n;let{uploadIds:i,exitCallback:r}=e,s=e9(),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=(0,M.q)(),g=(0,m.c2)(),f=null!==(t=null==g?void 0:g.maxUploadSizeInBytes)&&void 0!==t?t:h.u4M,b=null!==(n=null==g?void 0:g.customFileUploadSettings)&&void 0!==n?n:[],v=(0,m.pJ)(e=>i.map(t=>C.Ys.fileUpload.getFileUploadById(e,t)),eX.wU),y=(e=!1)=>{d(e),l(!0)};if(0===v.length)return null;let S=te(v,b,f);return a.createElement(e8._X,{isAlert:!0,analyticsId:"components.directives.fileUpload.maxSizeWarningPrimary","aria-labelledby":"max-file-size-dialog-heading-id",open:!o,TransitionProps:{onExited:()=>{r(c)}},onClose:()=>y(!0)},a.createElement(p.AnalyticsDialogTitle,{analyticsId:"components.directives.fileUpload.title",onClose:()=>y(!0),id:"max-file-size-dialog-heading-id","aria-describedby":"max-file-size-dialog-message-content"},u("components.directives.fileUpload.maxSizeWarningTitle")),a.createElement(p.AnalyticsDialogContent,{id:"max-file-size-dialog-message-content",analyticsId:"components.directives.fileUpload.content",className:s.dialogContent},S.map((e,t)=>a.createElement(e7,{key:t,fileSizeGroup:e,index:t})),a.createElement(p.AnalyticsDialogContentText,{analyticsId:"components.directives.fileUpload.text"},a.createElement("span",{dangerouslySetInnerHTML:{__html:(null==g?void 0:g.displayRecommendedAlternatives)?u("components.directives.fileUpload.maxSizeWarningAlternateStorage",{alternateStorage:null==g?void 0:g.recommendedAlternatives}):u("components.directives.fileUpload.maxSizeWarningNoAlternateStorage")}}),(null==g?void 0:g.displaySupportLink)&&a.createElement(a.Fragment,null,"\xa0",a.createElement("span",{dangerouslySetInnerHTML:{__html:u("components.directives.fileUpload.maxSizeWarningSupportLinkText",{supportLink:null==g?void 0:g.supportLink})}})))),a.createElement(p.AnalyticsDialogActions,{analyticsId:"components.directives.fileUpload.actions"},a.createElement(p.AnalyticsPrimaryButton,{analyticsId:"components.directives.fileUpload.maxSizeWarningPrimary",onClick:()=>y(!0)},u("components.directives.fileUpload.maxSizeWarningPrimary"))))};var tn=n(458489),ti=n(815964),tr=n(888637),ts=n(468523),to=n(748494);n(189390);var ta=n(690845),tl=n(796222),tc=n(302843);let td=e=>{let{fileCount:t,exitCallback:n}=e,[i,r]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!1),c=(0,M.q)(),d=(e=!1)=>{o(e),r(!0)};return l().createElement(e8._X,{isAlert:!0,analyticsId:"fileUpload.sizeWarningPrimary","aria-labelledby":"upload-size-warning-dialog-heading-id",open:!i,TransitionProps:{onExited:()=>{n(s),r(!1)}}},l().createElement(p.AnalyticsDialogTitle,{analyticsId:"fileUpload.sizeWarning.title",onClose:()=>d(),id:"upload-size-warning-dialog-heading-id","aria-describedby":"upload-size-warning-dialog-message-id"},c("course.learn-data-components.uploadSizeWarning.title",{fileCount:t})),l().createElement(p.AnalyticsDialogContent,{analyticsId:"fileUpload.sizeWarning.content"},l().createElement(p.AnalyticsDialogContentText,{analyticsId:"fileUpload.sizeWarning.text",id:"upload-size-warning-dialog-message-id"},c("course.learn-data-components.uploadSizeWarning.text"))),l().createElement(p.AnalyticsDialogActions,{analyticsId:"fileUpload.sizeWarning.actions"},l().createElement(p.AnalyticsDefaultButton,{analyticsId:"fileUpload.sizeWarning.cancel.button",onClick:()=>d()},c("global.cancel")),l().createElement(p.AnalyticsPrimaryButton,{analyticsId:"fileUpload.sizeWarning.continue.button",onClick:()=>d(!0)},c("global.continue"))))};var tu=n(571385);n(789483);let{useOptions:tp,OptionSelect:tm}=(0,n(290394).U)([{value:h.jf$.Remember,label:"learnDataComponents.cognitiveProcess.remember"},{value:h.jf$.Understand,label:"learnDataComponents.cognitiveProcess.understand"},{value:h.jf$.Apply,label:"learnDataComponents.cognitiveProcess.apply"},{value:h.jf$.Analyze,label:"learnDataComponents.cognitiveProcess.analyze"},{value:h.jf$.Evaluate,label:"learnDataComponents.cognitiveProcess.evaluate"},{value:h.jf$.Create,label:"learnDataComponents.cognitiveProcess.create"}]),th=(0,b.makeStyles)(e=>({container:{display:"flex",flexDirection:"column",gap:e.spacing(1)},info:{color:e.palette.text.secondary}})),tg=({analyticsId:e,className:t,contextItems:n,courseId:i,onClick:r})=>{let{formatNumber:s,translate:o}=(0,d.h)(),a=th(),u=(0,m.$M)(i),h=n?n.contentItems.length+n.announcementItems.length+n.assessmentItems.length+n.rubricItems.length+n.schemaItems.length:0,g=l().createElement(p.AnalyticsBadge,{badgeContent:s(h),"aria-label":o("learnDataComponents.generateContextPickerButton.badgeLabel",{items:h})});return u.contextPickerAvailable?l().createElement("div",{className:(0,c.Z)(a.container,t)},l().createElement(p.AnalyticsOutlineButton,{analyticsId:e,startIcon:l().createElement(U.Document2X,null),onClick:r,"aria-describedby":"generate-context-button-info"},o(h>0?"learnDataComponents.generateContextPickerButton.selectWithBadge":"learnDataComponents.generateContextPickerButton.select",{badge:g})),l().createElement(p.AnalyticsTypography,{variant:"caption",className:a.info,id:"generate-context-button-info"},o("learnDataComponents.generateContextPickerButton.info"))):null};var tf=n(897570);n(249200)},592493:function(e,t,n){"use strict";n.d(t,{oQ:function(){return nP.o},Jn:function(){return nT.J},I_:function(){return nk.I},$M:function(){return d.$},BA:function(){return no},qI:function(){return tl.q},qi:function(){return g},p6:function(){return U},vL:function(){return eP},sM:function(){return eE},$y:function(){return b},Ys:function(){return C},r0:function(){return E.r},iG:function(){return I.i},Gd:function(){return eI.G},zk:function(){return N},gA:function(){return T},U8:function(){return tG},Tn:function(){return $.T},Vp:function(){return G},Mq:function(){return Y},tp:function(){return Z},jU:function(){return eN},eP:function(){return ed},d$:function(){return ec},gh:function(){return eF},gH:function(){return ef.g},yH:function(){return ey},fU:function(){return eC},xw:function(){return eT},F1:function(){return eD},c5:function(){return eG},nW:function(){return eB},Sx:function(){return M},gy:function(){return eg},XY:function(){return tc},xJ:function(){return nf.x},aq:function(){return eu.a},Lx:function(){return s.L},pJ:function(){return o.a},WT:function(){return a.W},MT:function(){return S},cI:function(){return e7},Cp:function(){return eV},ww:function(){return ej},Y$:function(){return eK},ye:function(){return eJ},PV:function(){return eY},c2:function(){return eX.c},A:function(){return tP},RF:function(){return tR},GY:function(){return nA},VP:function(){return tp},yF:function(){return c},qJ:function(){return tZ},SJ:function(){return tJ},PU:function(){return nb},or:function(){return e6},M5:function(){return e3},so:function(){return tr},IP:function(){return tn},nh:function(){return te.n},LI:function(){return tf.L},gu:function(){return ty},vr:function(){return ta},vq:function(){return tg},Yp:function(){return tw.Y},Te:function(){return tk},d_:function(){return et},vD:function(){return q},J1:function(){return H.J},bW:function(){return V},Nh:function(){return v},to:function(){return O.t},cH:function(){return e8},u3:function(){return tS},av:function(){return z},qW:function(){return ng.q},Ej:function(){return t9},SS:function(){return nE},xR:function(){return tI},ID:function(){return nI},Yf:function(){return nw},$f:function(){return tC},Cf:function(){return tT},Kx:function(){return u.K},of:function(){return tX},iz:function(){return t4},UI:function(){return t5},W1:function(){return t0},a6:function(){return t$},h_:function(){return tU},Ze:function(){return tq},DA:function(){return tW},xu:function(){return tL},GD:function(){return tK},c_:function(){return nu},ER:function(){return nl.E},TU:function(){return ex},jp:function(){return P.j},pQ:function(){return em},Sr:function(){return eU},oz:function(){return e_},l:function(){return tx},Sp:function(){return nc},YO:function(){return nm},tx:function(){return eb.t},Uc:function(){return eb.U},cY:function(){return nh.c},Hr:function(){return e9},UF:function(){return tE},UQ:function(){return na},sY:function(){return ny},EL:function(){return eh.E},Iw:function(){return nC}});var i,r,s=n(662594),o=n(11931),a=n(892165);n(741430);var l=n(259197);let c=e=>(0,o.a)(l.Ys.app.getQueryParameterValue(e));var d=n(531093),u=n(397603),p=n(202784);let m=e=>(0,o.a)(t=>{if(e)return l.Ys.assessment.getAssessmentById(t,e)}),h=(e,t)=>(0,o.a)(n=>{var i,r;return!!e&&!!t&&null!==(r=null===(i=l.Ys.assessment.getAssessmentViewStateByQuery(n,{courseId:e,assessmentId:t}))||void 0===i?void 0:i.isLoading)&&void 0!==r&&r}),g=(e,t,{detail:n=!1}={})=>{let i=(0,s.L)(),r=h(e,t),o=m(t),a=!!o&&(!n||"boolean"==typeof o.hasAnswerableQuestions),[c,d]=(0,p.useState)(a?o:void 0);return(0,p.useEffect)(()=>{if(!o||o.id!==t){d(void 0);return}!r&&a&&d(o)},[t,o,a,r]),(0,p.useEffect)(()=>{e&&t&&!r&&!a&&i(l.Nwg.assessment.loadAssessmentById({courseId:e,assessmentId:t}))},[i,e,t,r,a]),c},f=e=>(0,o.a)(t=>l.Ys.columnStatistics.getColumnStatisticsByColumnId(t,e)),b=(e,t)=>{let n=(0,s.L)();return(0,p.useEffect)(()=>{t&&e&&n(l.Nwg.columnStatistics.loadColumnStatistics({courseId:e,columnId:t}))},[n,e,t]),f(t)},v=e=>(0,o.a)(t=>l.Ys.columnStatistics.isColumnStatisticsLoading(t,e)),y=(e,t,n=l.WYE.MyStudents)=>(0,o.a)(e=>{if(t)return l.Ys.columnSummary.getColumnSummaryByColumnId(e,t,n)}),S=()=>"grid"===c("gradebookView")?l.ehY.AllStudents:l.ehY.MyStudentsToGrade,C=(e,t)=>{let n=(0,s.L)(),i=S()===l.ehY.MyStudentsToGrade?l.WYE.MyStudents:l.WYE.Default,r=y(e,t,i);return(0,p.useEffect)(()=>{var s;(!r||(null===(s=null==r?void 0:r.api)||void 0===s?void 0:s.isInvalidated))&&e&&t&&n(l.Nwg.columnSummary.loadColumnSummary({courseId:e,columnId:t,columnSummaryType:i}))},[e,t,r,n,i]),r};n(102381);var E=n(473321),I=n(352367),w=n(44432);let A=e=>(0,o.a)(t=>l.Ys.content.getContentsViewStatusByQuery(t,e),w.wU),k=e=>(0,o.a)(t=>l.Ys.content.getContentsByQuery(t,e),w.wU),T=e=>{let t=(0,s.L)(),n=A(e);return(0,p.useEffect)(()=>{!e.filter.groupId||null!=n&&n.isValid||null!=n&&n.isLoading||t(l.Nwg.content.loadContentsByGroupIdAndQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading,e]),{contents:k(e),view:n}};var P=n(533532),D=n(986709);let x=e=>(0,o.a)(t=>l.Ys.content.getCountBySearchCriteria(t,e)),R=()=>(0,o.a)(e=>{var t,n;return(null===(n=null===(t=e.app.error)||void 0===t?void 0:t.originalException)||void 0===n?void 0:n.type)==="network"}),L=e=>(0,o.a)(t=>l.Ys.content.isLoading(t,e)),N=e=>{let[t,n]=(0,p.useState)({filter:{courseId:e}}),i=k(t),r=x(t),o=L(t),a=R(),c=(0,s.L)();return{contents:i,count:r,isLoading:o,isError:a,search:(0,p.useCallback)((t,i)=>{let r={filter:{courseId:e,title:t},params:{paging:{limit:i},sort:[{field:"modifiedDate",direction:D.SrV.Descending}]}};c(l.Nwg.app.clearError()),c(l.Nwg.content.loadContentsByQuery(r)),n(r)},[e,c])}};var $=n(440943),O=n(748793);let G=(e,t,n)=>{let i=(0,p.useMemo)(()=>({courseId:e,paging:{offset:t,limit:n}}),[e,t,n]),r=(0,o.a)(e=>l.Ys.courseAnnouncements.getCourseAnnouncementsViewByQuery(e,i)),a=(0,s.L)();return(0,p.useEffect)(()=>{(null==r?void 0:r.isValid)||a(l.Nwg.courseAnnouncements.loadCourseAnnouncementsByQuery(i,{forceReload:!1}))},[a,i,null==r?void 0:r.isValid]),(0,o.a)(e=>l.Ys.courseAnnouncements.getCourseAnnouncementsByQuery(e,i))},_=e=>(0,o.a)(t=>l.Ys.courseAnnouncements.getCourseAnnouncementsViewByQuery(t,e)),M=e=>{let t=(0,s.L)(),n=_({courseId:e});return(0,p.useEffect)(()=>{null!=n&&n.isValid||t(l.Nwg.courseAnnouncements.loadAnnouncementsCounts(e))},[t,e,null==n?void 0:n.isValid]),(0,o.a)(t=>l.Ys.courseAnnouncements.getAnnouncementsCounts(t,e))},B=e=>(0,o.a)(t=>l.Ys.assessment.getAssessmentViewStatusByQueries(t,e)),F=e=>(0,o.a)(t=>l.Ys.assessment.getAssessmentsByQueries(t,e)),U=e=>{let t=(0,s.L)(),n=F(e),i=B(e);return(0,p.useEffect)(()=>{i.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(l.Nwg.assessment.loadAssessmentsByQuery(e.query))})},[t,i]),{assessments:n,viewData:i}},V=(e,t)=>{let n=(0,s.L)();return(0,p.useEffect)(()=>{n(l.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[n,e]),(0,o.a)(n=>l.Ys.courseEntitlements.userHasCourseEntitlement(n,e,t))};var H=n(656170);let q=(e,t)=>{let n=(0,s.L)(),i=(0,o.a)(e=>l.Ys.courseEntitlements.isLoadingEntitlements(e)),r=(0,H.J)(e,t);return(0,p.useEffect)(()=>{e&&!i&&void 0===r&&n(l.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[n,e,i,r]),r},j=e=>(0,o.a)(t=>!!e&&l.Ys.courseEntitlements.hasLoadedCourseEntitlements(t,e)),z=e=>{let t=(0,s.L)(),n=j(e);(0,p.useEffect)(()=>{e&&!n&&t(l.Nwg.courseEntitlements.loadUserCourseEntitlements(e))},[t,e,n])},W=e=>(0,o.a)(t=>l.Ys.group.getCourseGroupViewStatusByQuery(t,e)),K=e=>(0,o.a)(t=>l.Ys.group.getGroupsByQuery(t,e)),Z=e=>{let t=(0,s.L)(),n=W(e);return(0,p.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(l.Nwg.group.loadGroupsByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]),{groups:K(e),view:n}},Q=e=>(0,o.a)(t=>l.Ys.groupWorkspace.getGroupsSetsByQuery(t,e)),J=e=>(0,o.a)(t=>l.Ys.groupWorkspace.getCourseGroupSetsViewStatusByQuery(t,e)),Y=e=>{let t=(0,s.L)(),n=J(e),i=Q(e);return(0,p.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(l.Nwg.groupWorkspace.loadGroupSetsByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading,n,e]),{groupSets:i,view:n}},X=e=>(0,o.a)(t=>l.Ys.group.getGroupsByGroupSetIdByQuery(t,e)),ee=e=>(0,o.a)(t=>l.Ys.group.getCourseGroupByGroupSetIdViewStatusByQuery(t,e)),et=e=>{let t=(0,s.L)(),n=ee(e);return(0,p.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(l.Nwg.group.loadByGroupSetIdAndQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading,n,e]),{groups:X(e),view:n}};var en=n(817426);let ei=e=>(0,o.a)(t=>l.Ys.courseMembership.getCourseMembershipViewStatusByQuery(t,e),w.wU),er=e=>(0,o.a)(t=>e.map(e=>l.Ys.courseMembership.getCourseMembershipViewStatusByQuery(t,e)),en.vZ),es=e=>(0,o.a)(t=>l.Ys.courseMembership.getCourseMembershipsByQuery(t,e),w.wU),eo=e=>(0,o.a)(t=>e.map(e=>l.Ys.courseMembership.getCourseMembershipsByQuery(t,e)),en.vZ),ea=e=>(0,o.a)(t=>l.Ys.user.getUsersByIds(t,e),w.wU);var el=n(465139);let ec=e=>{let t=(0,s.L)(),n=ei(e);(0,p.useEffect)(()=>{null!=n&&n.isValid||null!=n&&n.isLoading||!e||t(l.Nwg.courseMembership.loadCourseMembershipsByQuery(e))},[t,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]);let i=es(e),r=ea(i.reduce((e,t)=>(t.userId&&e.push(t.userId),e),[]));return{memberships:i,users:r,view:n}};function ed(e){let t=(0,s.L)(),n=(0,el.lY)(e),i=er(n),r=eo(n);return(0,p.useEffect)(()=>{n.forEach((e,n)=>{let r=i[n];(null==r||!r.isValid)&&(null==r||!r.isLoading)&&((null==r?void 0:r.isValid)||(null==r?void 0:r.isLoading)||t(l.Nwg.courseMembership.loadCourseMembershipsByQuery(e)))})},[t,n,i]),(0,p.useMemo)(()=>r.map((e,t)=>({membership:e,view:i[t]})),[i,r])}var eu=n(298080),ep=n(137841);let em=(e,t)=>(0,o.a)(n=>ep.Ys.getCourseMembershipsByUserIds(n,e,t)).map(e=>e.id);var eh=n(965115);let eg=e=>{let t=(0,s.L)();return(0,p.useEffect)(()=>{t(l.Nwg.courseMessage.loadCourseMessageCount(e))},[t,e]),(0,o.a)(t=>l.Ys.courseMessage.getCourseUnreadMessageCount(t,e))};var ef=n(182596),eb=n(388632);n(66127);let ev=(e,t)=>(0,o.a)(n=>l.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(n,e,t)),ey=(e,t)=>{let n=(0,s.L)(),i=ev(e,t);return(0,p.useEffect)(()=>{i||n(l.Nwg.coursePreference.loadCoursePreference({key:e,courseId:t}))},[n,e,t,i]),i};var eS=n(69027);(i=r||(r={})).ViewConfiguration="course.progress.settings.VIEW",i.ViewInformation="course.progress.information.VIEW";let eC=(e,t=!1)=>{let n=(0,s.L)(),i=(0,eS.g)(e),a=!!(null==i?void 0:i.isLoading),c=!!(null==i?void 0:i.isValid),d=!!(null==i?void 0:i.hasError),u=(0,H.J)(e,[r.ViewConfiguration])||t;return(0,p.useEffect)(()=>{d||a||c||!u||n(l.Nwg.courseProgress.loadCourseProgressConfiguration({courseId:e}))},[e,a,n,u,d,c]),(0,o.a)(t=>l.Ys.courseProgress.getCourseProgressConfiguration(t,e))};function eE(e){let t=eC(e),n=q(e,[r.ViewInformation]);return!!(null==t?void 0:t.progressTrackingEnabled)&&!!n}var eI=n(276393);let ew=e=>(0,o.a)(t=>l.Ys.courseResources.getCourseResourceViewStatusByQuery(t,e)),eA=e=>(0,o.a)(t=>l.Ys.courseResources.getAllCourseResourcesByQuery(t,e)),ek=e=>(0,o.a)(t=>l.Ys.courseResources.getUnusedFilesTotal(t,e)),eT=(e,t)=>{let n=(0,s.L)(),i=ew(e),r=ek(e.courseId);return(0,p.useEffect)(()=>{t&&n(l.Nwg.courseResources.invalidateCourseResourceViews(e.courseId))},[t,n,e.courseId]),(0,p.useEffect)(()=>{null!=i&&i.isValid||null!=i&&i.isLoading||n(l.Nwg.courseResources.loadCourseResourcesByQuery(e))},[n,e,i,null==i?void 0:i.isValid,null==i?void 0:i.isLoading]),{resources:eA(e),view:i,unusedFilesTotal:r}},eP=()=>{let e=(0,s.L)();return{batchDeleteCourseResource:(t,n)=>e(l.Nwg.courseResources.batchDelete(n,t))}};function eD(e,t){let n=(0,s.L)(),{courseId:i,rubricId:r,userId:a}=null!=e?e:{},c=i&&r&&a&&t,d=(0,o.a)(e=>{if(c)return l.Ys.courseRubricsUserPreference.getCourseRubricsUserPreference(e,{courseId:i,userId:a,rubricId:r},t)});if((0,p.useEffect)(()=>{c&&n(l.Nwg.courseRubricsUserPreference.getCourseRubricsUserPreference({courseId:i,userId:a,rubricId:r},t))},[n,i,r,a,t,c]),null==d||!d.isLoading)return null==d?void 0:d.preference}function ex(){let e=(0,s.L)();return{saveCourseRubricsUserPreference:(0,p.useCallback)((t,n)=>e(l.Nwg.courseRubricsUserPreference.saveCourseRubricsUserPreference(t,n)).then(e=>e.data),[e])}}let eR=e=>(0,o.a)(t=>l.Ys.courseLogs.getCourseLogViewStatusByQuery(t,e)),eL=e=>(0,o.a)(t=>l.Ys.courseLogs.getCourseLogsByQuery(t,e)),eN=e=>{let t=(0,s.L)(),n=eR(e);return(0,p.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(l.Nwg.courseLogs.loadCourseLogsByQuery(e))},[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]),{logs:eL(e),view:n}},e$=e=>(0,o.a)(t=>l.Ys.courseTasks.getCourseTaskViewStatusByQuery(t,e)),eO=e=>(0,o.a)(t=>l.Ys.courseTasks.getCourseTasksByQuery(t,e)),eG=e=>{let t=(0,s.L)(),n=e$(e);return(0,p.useEffect)(()=>{n&&(n.isValid||n.isLoading)||t(l.Nwg.courseTasks.loadCourseTasksByQuery(e))},[t,e,null==n?void 0:n.isValid,null==n?void 0:n.isLoading]),{tasks:eO(e),view:n}},e_=(e,t)=>{let n=(0,s.L)();return(0,p.useCallback)(i=>{n(l.Nwg.courseTools.setCourseToolConfiguration(e,t,{toolEnabledSetting:{isAvailable:i}}))},[e,n,t])};var eM=n(87647);let eB=(e,t)=>{let n=(0,o.a)(n=>eM.Ys.getCourseTool(n,e,t)),i=(0,s.L)();return(0,p.useEffect)(()=>{n||i(l.Nwg.courseTools.loadCourseToolConfiguration(e,t))},[i,e,n,t]),n},eF=e=>{let t=(0,o.a)(t=>l.Ys.courseMessage.getCourseMessageOption(t,e)),n=(0,s.L)(),i=(0,eu.a)(e),r=V(e,"course.conversations.message.CREATE");return(0,p.useEffect)(()=>{!t&&(i||r)&&n(l.Nwg.courseMessage.loadCourseMessageOption(e))},[n,e,t,i,r]),t},eU=e=>{let t=(0,s.L)();return(0,p.useCallback)(n=>{t(l.Nwg.courseMessage.setCourseMessageOption(e,{messageOption:n}))},[e,t])};function eV(e){let t=(0,s.L)(),n=(0,o.a)(e=>l.Ys.discussionBoardSettings.isSettingLoading(e)),i=(0,o.a)(t=>e?l.Ys.discussionBoardSettings.getDiscussionboardSettings(t,e):void 0),r=!!i;return(0,p.useEffect)(()=>{!e||n||r||t(l.Nwg.discussionBoardSettings.loadDiscussionboardSetting({courseId:e}))},[e,t,r,n]),i}let eH=(e,t)=>(0,o.a)(n=>{if(e&&t)return l.Ys.exceptionDetails.getExceptionDetailsByColumnId(n,t)}),eq=e=>(0,o.a)(t=>e?l.Ys.exceptionDetails.getExceptionDetailsViewStatusByQuery(t,e):null),ej=(e,t,n)=>{let i=(0,s.L)(),r=eH(e,t),o=eq(e&&t?{courseId:e,columnId:t,fullDetails:!0,...n}:void 0),a=!(o&&(o.isLoading||o.isValid));return(0,p.useEffect)(()=>{(void 0===n.membershipIds||0!==n.membershipIds.length)&&e&&t&&a&&i(l.Nwg.gradableItemUserOption.fetchGradableItemUserOption({courseId:e,columnId:t},{fullDetails:!0,...n}))},[i,e,t,a,n]),r},ez=(e,t)=>(0,o.a)(n=>{if(t)return l.Ys.exceptionDetails.getExceptionDetailsByColumnIdAndMembershipId(n,e,t)}),eW=()=>(0,o.a)(l.Ys.exceptionDetails.isExceptionDetailsLoading),eK=(e,t,n)=>{let i=(0,s.L)(),r=ez(t,n),o=eW(),a=eq({courseId:e,columnId:t,membershipId:n}),c=null===a||!(a.isValid||a.isLoading);return(0,p.useEffect)(()=>{e&&t&&n&&c&&!o&&i(l.Nwg.exceptionDetails.fetchExceptionDetails({courseId:e,membershipId:n},{columnId:[t],offset:0,limit:1}))},[i,e,t,n,c,o]),r};var eZ=n(236932);let eQ=e=>{let t=(0,s.L)(),n=(0,eZ.X)(e);return(0,p.useEffect)(()=>{n||t(l.Nwg.featureFlags.loadFeatureFlagValueByKey({flagKey:e}))},[t,e,n]),n},eJ=e=>{var t;return(null===(t=eQ(e))||void 0===t?void 0:t.flagValue)==="true"},eY=e=>{var t;let n=null!==(t=eQ(e))&&void 0!==t?t:{isLoading:!0};if(!n.isLoading&&void 0!==n.flagValue)return"true"===n.flagValue};var eX=n(142828);let e0=e=>(0,o.a)(t=>l.Ys.gradebookAttempt.getGradebookAttemptByAttemptId(t,e));var e1=n(482532);let e2=e=>(0,o.a)(t=>e?l.Ys.gradebookAttempt.getGradebookAttemptViewStateByQuery(t,e):void 0),e4=105e3,e6=(e,t=e4)=>{let n=(0,s.L)(),i=(0,el.lY)(e),[r,o]=(0,p.useState)(!1),{courseId:a,columnId:c,attemptId:d}=i,u=e0(d),m=e2(i),{lastFetched:h,isValid:g,isLoading:f}=null!=m?m:{},b=(0,p.useCallback)(()=>void 0!==t&&new Date().getTime()-(null!=h?h:0)>t,[t,h]),v=(0,p.useCallback)(()=>{let e=b();return e&&o(!0),!e},[b]);return(0,p.useEffect)(()=>{!f&&(!u||r||!g)&&d&&c&&a&&(n(l.Nwg.gradebookAttempt.loadGradebookAttemptByAttemptId(i,[e1.HttpStatus.NotFound])),o(!1))},[n,u,i,r,g,f,a,c,d]),{attempt:u,isExpired:b,refresh:v}};n(715090);let e5=e=>(0,o.a)(t=>{if(e)return l.Ys.gradebookAttempt.getGradebookAttemptsByGradeId(t,e)},w.wU),e3=(e,t,n,i)=>{let r=(0,s.L)(),a=t&&n?{courseId:e,columnId:t,gradeId:n,expand:i}:void 0,c=(0,o.a)(e=>!!a&&l.Ys.gradebookAttempt.isGradebookAttemptsLoadingByGradeId(e,a)),d=e5(a),u=e2(a);return(0,p.useEffect)(()=>{e&&t&&n&&(c||void 0!==d&&(null==u?void 0:u.isValid)||r(l.Nwg.gradebookAttempt.loadGradebookAttemptsByGradeId({courseId:e,columnId:t,gradeId:n,expand:i})))},[r,d,e,t,c,n,i,null==u?void 0:u.isValid]),d},e8=e=>(0,o.a)(t=>{var n,i,r;return!!e&&null!==(r=null===(i=null===(n=l.Ys.gradebookAttempt.getGradebookAttemptByAttemptId(t,e))||void 0===n?void 0:n.api)||void 0===i?void 0:i.isUpdating)&&void 0!==r&&r}),e9=()=>{let e=(0,s.L)();return(0,p.useCallback)(t=>{t.courseId&&t.attemptId&&e(l.Nwg.gradebookAttempt.updateAttemptById(t))},[e])},e7=()=>{let e=(0,s.L)();return(0,p.useCallback)(async t=>{t.courseId&&t.attemptId&&await e(l.Nwg.gradebookAttempt.deleteAttemptById(t))},[e])};var te=n(326373);let tt=e=>(0,o.a)(t=>l.Ys.gradebookColumn.getGradebookColumnById(t,e)),tn=(e,t)=>{var n;let i=(0,s.L)(),r=tt(t);return(0,p.useEffect)(()=>{var n;e&&t&&(!r||(null===(n=r.api)||void 0===n?void 0:n.isInvalidated))&&i(l.Nwg.gradebookColumn.loadGradebookColumn({courseId:e,columnId:t}))},[i,r,e,t,null===(n=null==r?void 0:r.api)||void 0===n?void 0:n.isInvalidated]),r},ti=e=>(0,o.a)(t=>l.Ys.gradebookColumn.getGradebookColumnByContentId(t,e)),tr=(e,t)=>{let n=(0,s.L)(),i=ti(t);return(0,p.useEffect)(()=>{e&&t&&(i||n(l.Nwg.gradebookColumn.loadGradebookColumnByContentId({courseId:e,contentId:t})))},[n,i,e,t]),i},ts=e=>(0,o.a)(t=>l.Ys.gradebookGrade.getGradebookGradesByColumnId(t,e)),to=e=>e.filter(e=>{var t;return!(null===(t=null==e?void 0:e.api)||void 0===t?void 0:t.isInvalidated)}),ta=(e,t,n,i)=>{let r=(0,s.L)(),o=ts(null!=t?t:""),a={};(o||[]).forEach(e=>{a[e.userId]=e});let c=n.filter(e=>{var t,n;return!a[String(null==e?void 0:e.userId)]||(null===(n=null===(t=a[String(null==e?void 0:e.userId)])||void 0===t?void 0:t.api)||void 0===n?void 0:n.isInvalidated)}).map(e=>String(null==e?void 0:e.id));return(0,p.useEffect)(()=>{e&&c.length&&t&&r(l.Nwg.gradebookGrade.loadBulkView(e,[t],{membershipIds:c},i))},[r,e,t,c.join(",")]),o&&to(o).forEach(e=>{e.userId&&(a[e.userId]=e)}),a};var tl=n(820960);let tc=()=>{let e=(0,s.L)();return(0,p.useCallback)(t=>{let{courseId:n,columnId:i,userId:r,payload:s}=t;n&&i&&r&&e(l.Nwg.gradebookGrade.createGradeByUserId({...s,courseId:n,columnId:i,userId:r}))},[e])};var td=n(366352),tu=n(817486);let tp=e=>{let t="gradeId"in e,n=(0,td.n)(e.columnId,t?e.gradeId:void 0),i=(0,tu.$)(e.columnId,t?void 0:e.userId);return t?n:i},tm=(e,t)=>(0,o.a)(n=>l.Ys.gradebookGrade.getGradebookGradesByColumnIdAndMemberOrGradeIds(n,e,t)),th=(e,t)=>(0,o.a)(n=>l.Ys.gradebookGrade.getMemberOrGradeIdsWithMissingOrInvalidatedGradesInColumn(n,e,t)),tg=(e,t,n,i)=>{let r=(0,s.L)(),o=(0,tl.q)(),a=(0,el.lY)(tm(t,n)),c=(0,el.lY)(th(t,n)),d=(0,el.lY)((0,l.nqI)(n)?n.gradeIds:n.membershipIds),u=(0,el.lY)(i);return(0,p.useEffect)(()=>{e&&t&&!o&&0!==d.length&&((0,l.nqI)(c)?c.gradeIds:c.membershipIds).length>0&&r(l.Nwg.gradebookGrade.loadBulkView(e,[t],c,u))},[r,o,e,t,d,u,a,c]),a};var tf=n(561632);n(354114),n(589821);let tb=e=>(0,o.a)(t=>e.map(e=>l.Ys.gradebookGrade.getGradebookGradeViewByQuery(t,e)),w.wU).map(e=>{var t;return{isLoading:null==e?void 0:e.isLoading,isValid:null==e?void 0:e.isValid,paging:null!==(t=null==e?void 0:e.paging)&&void 0!==t?t:null}}),tv=e=>(0,o.a)(t=>e.map(e=>l.Ys.gradebookGrade.getGradebookGradesByQuery(t,e)),en.vZ);function ty(e){let t=(0,s.L)(),n=(0,el.lY)(e),i=tb(n),r=tv(n);return(0,p.useEffect)(()=>{n.forEach((e,n)=>{let r=i[n];(null==r?void 0:r.isValid)||(null==r?void 0:r.isLoading)||t(l.Nwg.gradebookGrade.loadGradebookGradesByQuery(e))})},[t,n,i]),(0,p.useMemo)(()=>r.map((e,t)=>({grades:e,view:i[t]})),[i,r])}let tS=e=>(0,o.a)(t=>{var n,i,r,s;return!!e&&null!==(s=null===(r=null===(i=null===(n=l.Ys.gradebookGrade.getGradebookGradeById(t,e))||void 0===n?void 0:n[0])||void 0===i?void 0:i.api)||void 0===r?void 0:r.isUpdating)&&void 0!==s&&s}),tC=()=>{let e=(0,s.L)();return{postGrade:(0,p.useCallback)((t,n,i)=>{t&&n&&i&&e(l.Nwg.gradebookGrade.postGradeByGradeId({columnId:n,courseId:t,id:i}))},[e])}},tE=()=>{let e=(0,s.L)();return(0,p.useCallback)(t=>{let{courseId:n,columnId:i,gradeId:r,payload:s}=t;n&&i&&r&&e(l.Nwg.gradebookGrade.updateGradeByGradeId({courseId:n,columnId:i,id:r},{...s,courseId:n,columnId:i,id:r}))},[e])},tI=(e,t)=>{let n=(0,s.L)(),i=S();return{postAllGrades:(0,p.useCallback)(()=>{if(!e||!t)return;let r=i===l.ehY.AllStudents;n(l.Nwg.gradebookColumn.postReadyGradesByColumnId(e,t,r))},[t,e,i,n])}};var tw=n(964908),tA=n(815532);function tk(e,t,n){let i=(0,s.L)(),r=(0,o.a)(e=>l.Ys.group.getGroupsLoadingStatus(e)),a=(0,o.a)(e=>l.Ys.group.getGroupByGroupId(e,t));(0,p.useEffect)(()=>{(!n||(null==a?void 0:a.id))&&(n||(null==a?void 0:a.groupSetId))||r!==tA.S.HasNotStarted||i(l.Nwg.group.loadGroupsByCourse(e))},[e,i,null==a?void 0:a.groupSetId,null==a?void 0:a.id,n,r]);let c=(0,o.a)(e=>!n&&(null==a?void 0:a.groupSetId)?l.Ys.groupWorkspace.getGroupSetById(e,a.groupSetId):null);return{group:a,groupSet:c,loadingStatus:r}}let tT=e=>{let t=(0,s.L)(),n=(0,o.a)(t=>l.Ys.partnerCloud.getProviderSettingsById(t,e));return(0,p.useEffect)(()=>{e&&!n&&t(l.Nwg.partnerCloud.loadProviderSettings(e))},[t,e,n]),n},tP=e=>(0,o.a)(t=>{if(e)return l.Ys.submissionResults.getAssetProcessorSubmissionResultByCourseAndAttemptId(t,e.courseId,e.columnId,e.attemptId)}),tD=e=>(0,o.a)(t=>l.Ys.submissionResults.getSafeAssignSubmissionResultsForAttempt(t,e.courseId,e.columnId,e.attemptId)),tx=e=>{let t=(0,s.L)(),{attemptId:n,courseId:i,columnId:r}=e,o=tD(e);return(0,p.useEffect)(()=>{o||t(l.Nwg.submissionResults.loadAttemptSubmissionResults({attemptId:n,courseId:i,columnId:r}))},[n,i,r,t,o]),o},tR=e=>(0,o.a)(t=>l.Ys.submissionResults.getAverageSafeAssignSubmissionResultsForColumn(t,e.courseId,e.columnId)),tL=e=>(0,o.a)(t=>l.Ys.question.getQuestionViewStatusByQuery(t,e)),tN=e=>(0,o.a)(t=>l.Ys.question.getByQuestionId(t,e)),t$=(e,t,n)=>{let i=(0,s.L)(),r=tN(n),o=tL({courseId:e,assessmentId:t,questionId:n});return(0,p.useEffect)(()=>{n&&(r&&!o||r&&(null==o?void 0:o.isValid)||!e||!t||!n||(null==o?void 0:o.isLoading)||i(l.Nwg.question.loadQuestionById({courseId:e,assessmentId:t,questionId:n})))},[t,e,i,r,n,o,null==o?void 0:o.isLoading,null==o?void 0:o.isValid]),r},tO=(e,t)=>{let n=(0,s.L)();(0,p.useDebugValue)(`Pending Copy Task: ${t}`),(0,en.U0)(()=>{t&&n(l.Nwg.question.updateCopyTaskStatus(e,t))},5e3,!!t)},tG=e=>{let t=(0,o.a)(t=>l.Ys.question.getCopyQuestionsTask(t,e)),n=null;return t&&(n=Object.values(t).filter(e=>e.queueTask.taskStatus!==D.hRl.Complete&&e.queueTask.taskStatus!==D.hRl.CompleteErrors).map(e=>e.queueTask.taskId)[0]),tO(e,n),null!=t?t:null};var t_=n(276635),tM=n.n(t_);let tB=e=>(0,o.a)(t=>l.Ys.question.getQuestionViewStatusByQueries(t,e),tM().isEqual),tF=e=>(0,o.a)(t=>l.Ys.question.getQuestionsByQueries(t,e)),tU=e=>{let t=(0,s.L)(),n=tF(e),i=tB(e);return(0,p.useEffect)(()=>{i.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(l.Nwg.question.loadQuestionsByQuery(e.query))})},[t,i]),{questions:n,viewData:i}},tV=e=>(0,o.a)(t=>l.Ys.questionTag.getQuestionTagViewStatusByQueries(t,e)),tH=e=>(0,o.a)(t=>l.Ys.questionTag.getQuestionTagsByQueries(t,e)),tq=e=>{let t=(0,s.L)(),n=tH(e),i=tV(e);return(0,p.useEffect)(()=>{i.forEach(e=>{var n,i,r;null!==e&&(null===(n=e.query)||void 0===n?void 0:n.courseId)&&(null===(i=e.view)||void 0===i||!i.isLoading)&&(null===(r=e.view)||void 0===r||!r.isValid)&&t(l.Nwg.questionTag.loadQuestionTags(e.query))})},[t,i]),{tags:n,viewData:i}};n(183168);let tj=e=>(0,o.a)(t=>l.Ys.questionType.getQuestionTypesByQuery(t,e)),tz=e=>(0,o.a)(t=>l.Ys.questionType.getQuestionTypeViewStatusByQuery(t,e)),tW=e=>{let t=(0,s.L)(),n=tj(e),i=tz(e);return(0,p.useEffect)(()=>{!e.courseId||null!=i&&i.isLoading||null!=i&&i.isValid||t(l.Nwg.questionType.loadQuestionTypesByQuery(e))},[t,null==i?void 0:i.isLoading,null==i?void 0:i.isValid,e]),{questionTypes:n,view:i}},tK=e=>{let t=(0,s.L)();return(0,p.useCallback)(n=>{e&&t(l.Nwg.question.removeCopyQuestionsTask(e,n))},[t,e])},tZ=e=>(0,o.a)(t=>e?l.Ys.questionAttempt.getQuestionAttemptsByAttemptId(t,e):void 0);var tQ=n(337767);let tJ=e=>(0,o.a)(t=>e.reduce((e,n)=>({...e,[n]:l.Ys.questionAttempt.getQuestionAttemptById(t,n)}),{}),tQ.yZ),tY=e=>(0,o.a)(t=>l.Ys.questionAttempt.getQuestionAttemptById(t,e)),tX=(e,t)=>{let n=(0,s.L)(),i=tY(t);return(0,p.useEffect)(()=>{e&&t&&(i||n(l.Nwg.questionAttempt.loadQuestionAttemptsByAttemptId(t,e)))},[n,i,e,t]),i},t0=(e,t)=>{let n=(0,s.L)(),i=tZ(t);return(0,p.useEffect)(()=>{e&&t&&(i||n(l.Nwg.questionAttempt.loadQuestionAttemptsByAttemptId(t,e)))},[n,i,e,t]),i},t1=e=>(0,o.a)(t=>e?l.Ys.questionAttemptGrade.getQuestionAttemptGradeById(e)(t):void 0),t2=(e,t)=>(0,o.a)(n=>e&&t?l.Ys.questionAttemptGrade.getQuestionAttemptGradeViewStateByQuery(n,{questionId:e,questionAttemptId:t}):void 0),t4=(e,t,n,i,r)=>{let o=(0,s.L)(),a=t2(n,i),c=t1(i);return(0,p.useEffect)(()=>{c&&(null==a?void 0:a.isValid)||(null==a?void 0:a.isLoading)||!t||!i||!n||o(l.Nwg.questionAttemptGrade.loadGradedQuestionAttemptByQuestionAttemptId(e,t,{questionId:n,questionAttemptId:i},r))},[o,e,t,i,c,null==a?void 0:a.isLoading,null==a?void 0:a.isValid,r,n]),c},t6=e=>(0,o.a)(e?l.Ys.questionAttemptGrade.getQuestionAttemptGradesByAttemptId(e):()=>void 0),t5=(e,t,n)=>{let i=(0,s.L)(),r=t6(t);return(0,p.useEffect)(()=>{e&&t&&(r||i(l.Nwg.questionAttemptGrade.loadGradedQuestionAttemptsByAttemptId(e,t,n)))},[i,r,e,t,JSON.stringify(n)]),r},t3=(...e)=>(0,o.a)(t=>l.Ys.questionAttemptGrade.getQuestionAttemptGradesByQuestionIdQuery(...e)(t)),t8=(...e)=>{let t=(0,s.L)(),n=(0,el.lY)(e),i=t3(...n);return(0,p.useEffect)(()=>{i.forEach((e,i)=>{let r=n[i];!(null==e?void 0:e.isValid)&&r&&r.courseId&&r.assessmentId&&r.questionId&&t(l.Nwg.questionAttemptGrade.loadGradedQuestionAttemptsByQuestionIdQuery(r))})},[t,n,i]),i},t9=(e,t,n,i=l.ehY.AllStudents,r=50)=>{let[s,o]=(0,p.useState)(1);(0,p.useEffect)(()=>{o(1)},[e,t,n,r]);let a=i===l.ehY.MyStudentsToGrade?D.E4h.MyStudentsToGrade:void 0,c=(0,p.useMemo)(()=>{if(!e||!t||!n)return[];let i=[];for(let o=0;o<s;o++)i.push({courseId:e,assessmentId:t,questionId:n,filterParams:a,paging:{offset:o*r,limit:r}});return i},[e,t,n,s,a,r]),d=t8(...c),u=(0,p.useMemo)(()=>d.slice().sort((e,t)=>{var n,i,r,s;return(null!==(i=null===(n=null==e?void 0:e.paging)||void 0===n?void 0:n.offset)&&void 0!==i?i:0)-(null!==(s=null===(r=null==t?void 0:t.paging)||void 0===r?void 0:r.offset)&&void 0!==s?s:0)}),[d]),m=c.length!==s||u.length!==s||!!c.find((e,t)=>{var n;return!u[t]||(null===(n=u[t])||void 0===n?void 0:n.isLoading)}),h=!m&&!!u.find(e=>{var t;return!(null===(t=null==e?void 0:e.paging)||void 0===t?void 0:t.nextPage)}),g=(0,p.useCallback)(()=>o(e=>e+1),[]);return{isComplete:h,isLoading:m,loadNextPage:m||h?void 0:g,results:(0,p.useMemo)(()=>tM().flatMap(u,e=>{var t;return null!==(t=null==e?void 0:e.values)&&void 0!==t?t:[]}),[u])}},t7=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.isQuestionGradeStatusesLoadingByAssessmentId(e,t)),ne=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.isQuestionGradeStatusesValidByAssessmentId(e,t)),nt=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.getQuestionGradeStatusesByAssessmentId(e,t)),nn=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.isQuestionGradeStatusesLoadingByQuestionBlockIds(e,t)),ni=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.isQuestionGradeStatusesValidByQuestionBlockIds(e,t)),nr=(e,t)=>(0,o.a)(l.Ys.questionGradeStatus.getQuestionGradeStatusesByQuestionBlockIds(e,t)),ns=(e,t,n,i)=>{let r=(0,s.L)(),o=nn(null!=n?n:[],i),a=ni(null!=n?n:[],i),c=nr(null!=n?n:[],i);return(0,p.useEffect)(()=>{if(e&&t&&n)for(let s of n)!s||(null==c?void 0:c[s])&&a[s]||o[s]||r(l.Nwg.questionGradeStatus.loadQuestionGradingStatusesByQuestionBlockId(e,t,s,i))},[r,e,t,n,o,a,c,i]),(0,p.useMemo)(()=>{if(!n)return;let e={};for(let[t,n]of Object.entries(c)){if(!n)return;e[t]=n}return e},[n,c])},no=(e,t,n)=>{let i=(0,s.L)(),r=t7(t,n),o=ne(t,n),a=nt(t,n),c=ns(e,t,(0,el.lY)((0,p.useMemo)(()=>a?tM().flatMap(a,e=>{var t;return e.isQuestionSet?[null!==(t=e.id)&&void 0!==t?t:""]:[]}):void 0,[a])),n);return(0,p.useEffect)(()=>{e&&t&&(a&&o||r||i(l.Nwg.questionGradeStatus.loadQuestionGradeStatusesByAssessmentId(e,t,n)))},[i,e,t,r,o,a,n]),(0,p.useMemo)(()=>({questionGradeStatuses:a,questionGradeStatusesByQuestionBlockId:c}),[a,c])},na=()=>{let e=(0,s.L)();return(t,n,i,r)=>e(l.Nwg.questionAttemptGrade.updateGradedQuestionAttempt(t,n,i,r))};var nl=n(261136);function nc(e){let t=(0,s.L)(),n=(0,o.a)(t=>l.Ys.systemPreference.getSystemPreferenceByKey(t,e)),i=(0,o.a)(t=>l.Ys.systemPreference.isSystemPreferenceLoading(t,e));return(0,p.useEffect)(()=>{i||(null==n?void 0:n.value)||t(l.Nwg.systemPreference.loadSystemPreference({key:e}))},[t,e,i,null==n?void 0:n.value]),null==n?void 0:n.value}let nd="allow_user_pronoun_request";function nu(){var e;let t=(0,o.a)(e=>l.Ys.systemPreference.getSystemPreferenceByKey(e,nd)),[n,i]=(0,p.useState)((null!==(e=null==t?void 0:t.value)&&void 0!==e?e:D.duL.Yes)===D.duL.Yes),[r,a]=(0,p.useState)(!1),c=(0,s.L)(),d=e=>{e&&e===D.duL.Yes?i(!0):i(!1)};return(0,p.useEffect)(()=>{a(!0),c(l.Nwg.systemPreference.loadSystemPreference({key:nd})).then(({systemPreference:e})=>{d(e.value),a(!1)})},[c]),{enabled:n,loading:r,onToggleChange:(0,p.useCallback)(e=>{let t=e?D.duL.Yes:D.duL.No;return d(t),c(l.Nwg.systemPreference.persistSystemPreference({key:nd,value:t}))},[c])}}let np=async(e,t)=>{let n=(await e(l.Nwg.userPronouns.loadSystemPronouns(t))).paging;(null==n?void 0:n.nextPage)&&await np(e,n)},nm=()=>{let e=(0,s.L)(),[t,n]=(0,p.useState)(!0);return(0,p.useEffect)(()=>{np(e).then(()=>{n(!1)})},[e]),{list:(0,o.a)(e=>l.Ys.userPronouns.getApprovedPronouns(e)),onAddPronoun:(0,p.useCallback)(t=>e(l.Nwg.userPronouns.addSystemPronoun(t)),[e]),onRemovePronoun:(0,p.useCallback)(t=>e(l.Nwg.userPronouns.deleteSystemPronoun(t.id)),[e]),loading:t}};var nh=n(890529),ng=n(771367),nf=n(656717);let nb=e=>{let t=(0,s.L)();return(0,p.useEffect)(()=>{e&&t(l.Nwg.user.loadUser(e))},[t,e]),(0,o.a)(t=>l.Ys.user.getUserById(t,e))},nv=e=>(0,o.a)(t=>{if(e)return l.Ys.user.getUserById(t,e)}),ny=e=>{let t=(0,s.L)(),n=nv(e);return(0,p.useEffect)(()=>{e&&(n||t(l.Nwg.user.loadUser(e)))},[t,n,e]),n},nS=e=>(0,o.a)(t=>l.Ys.userPreference.getUserPreferenceByKey(t,e)),nC=e=>{let t=(0,s.L)(),n=nS(e);return(0,p.useEffect)(()=>{n||t(l.Nwg.userPreference.loadUserPreference({key:e}))},[t,e,n]),n},nE=()=>{let e=(0,s.L)();return(0,p.useCallback)(t=>e(l.Nwg.userPreference.persistUserPreference(t)),[e])},nI=()=>{let e=(0,s.L)();return{postAddSubmission:(0,p.useCallback)((t,n)=>e(l.Nwg.directSubmitAddSubmission.postDirectSubmitAddSubmission({courseId:t},n)),[e])}},nw=()=>{let e=(0,s.L)();return{postUploadSubmission:(0,p.useCallback)((t,n)=>e(l.Nwg.directSubmitUploadSubmission.postDirectSubmitUploadSubmission({courseId:t},n)),[e])}},nA=e=>{let t=(0,s.L)(),n=(0,o.a)(t=>l.Ys.directSubmitResults.loadDirectSubmitResultsByCourseId(t,e.courseId));return(0,p.useEffect)(()=>{n||t(l.Nwg.directSubmitResults.loadDirectSubmitResults(e))},[t,e,n]),n};var nk=n(580318),nT=n(448558),nP=n(928518)},388632:function(e,t,n){"use strict";n.d(t,{U:function(){return a},t:function(){return l}});var i=n(410628),r=n(748793),s=n(817426),o=n(202784);function a(e,t=s.r9.AppendSection,n){let r=(0,i.q)(),a=(0,s.Df)(null!=e&&e,t,n);return(0,o.useCallback)((e,t,n)=>r(a(e),t,n),[r,a])}function l(e=s.r9.AppendSection,t){return a((0,r.t)(),e,t)}},366352:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var i=n(11931),r=n(259197);let s=(e,t)=>(0,i.a)(n=>{var i;return e&&t?null===(i=r.Ys.gradebookGrade.getGradebookGradesByColumnIdAndGradeId(n,e,t))||void 0===i?void 0:i[0]:void 0})},817486:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var i=n(11931),r=n(259197);let s=(e,t)=>(0,i.a)(n=>{var i;return t&&e?null===(i=r.Ys.gradebookGrade.getGradebookGradesByColumnIdAndUserId(n,e,t))||void 0===i?void 0:i[0]:void 0})},820960:function(e,t,n){"use strict";n.d(t,{q:function(){return s}});var i=n(259197),r=n(11931);let s=()=>(0,r.a)(i.Ys.gradebookGrade.areGradebookGradesLoading)},561632:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var i=n(202784),r=n(662594),s=n(259197),o=n(366352),a=n(820960);let l=(e,t,n)=>{let l=(0,r.L)(),c=(0,a.q)(),d=(0,o.n)(t,n);return(0,i.useEffect)(()=>{var i;!c&&((null===(i=null==d?void 0:d.api)||void 0===i?void 0:i.isInvalidated)||!d)&&e&&t&&n&&l(s.Nwg.gradebookGrade.loadGradeDetailByGradeId({columnId:t,courseId:e,gradeId:n}))},[l,c,d,e,t,n]),d}},597691:function(e,t,n){"use strict";n.d(t,{Ed:function(){return r},V5:function(){return s},g7:function(){return i}});let i=10,r=1e4,s={ANNOUNCEMENT_LOAD:"announcement.load",ANNOUNCEMENT_LOAD_MORE:"announcement.load.more",ANNOUNCEMENT_SAVE:"announcement.save",ANNOUNCEMENT_REMOVE:"announcement.remove",ANNOUNCEMENT_SEARCH:"announcement.search",ANNOUNCEMENT_CLEAR:"announcement.clear",UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS:"update.course-announcements.read.status",GET_COURSE_CONTEXT:"get.course.context",CHANGE_SEARCH_INPUT_STATE:"change.search.input.state",GET_AN_ANNOUNCEMENT:"get.an.announcement",REMOVE_FROM_RECENT_UPDATED:"remove.from.recent.updated",CHANGE_ANNOUNCEMENT_PANEL_STATE:"change.announcement.panel.state",SWITCH_SORT_CRITERIA:"switch.sort.criteria"}},1617:function(e,t,n){"use strict";n.d(t,{I6:function(){return a},Nw:function(){return l},Ys:function(){return c}});var i=n(715729),r=n(550161),s=n(664045),o=n(835098);let a=(0,r.Lq)({byCourseId:{},isLoading:!1},{[o.V.COURSE_ENTITLEMENTS_LOAD]:r.K4,[(0,r.ok)(o.V.COURSE_ENTITLEMENTS_LOAD)]:(e,t)=>{let n=t.entitlements,s=e;if(n){let r=n.reduce((e,t)=>(e[t.uid]=t,e),{});s=(0,i.ZP)(e,e=>{e.byCourseId[t.courseId]=r})}return(0,r.f2)(s,t)},[(0,r.bG)(o.V.COURSE_ENTITLEMENTS_LOAD)]:r.sT}),l={loadUserCourseEntitlements:e=>(0,r.PH)(o.V.COURSE_ENTITLEMENTS_LOAD,()=>(0,s.l)(e).catch(e=>{throw{err:e}}))},c={userHasCourseEntitlement:(e,t,n)=>{let i=e.courseEntitlements.byCourseId[t];return!!i&&!!i[n]},hasAnyCourseEntitlement:(e,t,n)=>{let i=e.courseEntitlements.byCourseId[t];if(i)return n.some(e=>!!i[e])},hasLoadedCourseEntitlements:(e,t)=>!!t&&!!e.courseEntitlements.byCourseId[t],isLoadingEntitlements:e=>e.courseEntitlements.isLoading}},613077:function(e,t,n){"use strict";n.d(t,{I6:function(){return A},Nw:function(){return k},Ys:function(){return L}});var i=n(715729),r=n(560985),s=n(550161),o=n(276635),a=n(739982),l=n(986709),c=n(391819),d=n(846935),u=n(53925),p=n(71841),m=n(771117),h=n(86604),g=n(830095),f=n(690260);function b(e){return e.id?e.id:`${e.userId}${e.columnId}`}function v(){return{byUserId:{},byMemberId:{},grades:{}}}function y(e,t,n,i){S(e,t,!1,i),e.permissions=n||e.permissions}function S(e,t,n,i){var r;let s=e.byColumnId;for(let e of t){let t=b(e),o=s[e.columnId]||(s[e.columnId]=v());e.userId&&(o.byUserId[e.userId]=t),e.memberId&&(o.byMemberId[e.memberId]=t);let a=o.grades[t];if(!n&&a&&a.version>e.version)return;o.grades[t]={...i?a:{},...e,displayGrade:{...i?null==a?void 0:a.displayGrade:{},...e.displayGrade},api:{isInvalidated:function(e,t){var i;return!!n&&(!e||(null===(i=null==e?void 0:e.displayGrade)||void 0===i?void 0:i.isOverride)||e.isCalculatedColumnGrade||(null==e?void 0:e.id)===t)}(a,t),isUpdating:!1,isDeleting:!1},ui:null!==(r=null==a?void 0:a.ui)&&void 0!==r?r:{}}}}function C(e,t){S(e,t,!0)}let E=(e,t)=>{let n=e.views.byColumnId[t.columnId]||{},i=Object.keys(n).find(e=>{let i=n[e],r=(0,o.isEqual)(i.query.paging,t.paging),s=(0,o.isEqual)(i.query.sort,t.sort),a=(0,o.isEqual)(i.query.filter,t.filter);return r&&s&&a});return i?{id:i,view:n[i]}:s.LW},I=e=>["views","byColumnId",e.columnId],w=(e,t)=>{let{view:n}=E(e.gradebookGrade,t);return!n||!n.isLoading&&!n.isValid},A=(0,s.Lq)({byColumnId:{},isLoading:!1,paging:{limit:0,offset:0,nextPage:"",previousPage:""},permissions:{},views:{byColumnId:{}}},{[u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY]:(0,s.Li)(E,I),[(0,s.ok)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,s.f2)(e,t);let{paging:r,grades:o,permissions:a}=n;return e=(0,i.ZP)(e,e=>{y(e,o,void 0,!0)}),(0,s.NV)(e,t,{viewResolver:E,viewsPathResolver:I,paging:r,permissions:a,values:o.map(e=>{var t;return null!==(t=e.id)&&void 0!==t?t:""}).filter(e=>e)})},[(0,s.bG)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY)]:(0,s.HT)(E,I),[u.V.GRADEBOOK_BULKVIEW_LOAD]:s.K4,[(0,s.ok)(u.V.GRADEBOOK_BULKVIEW_LOAD)]:(e,t)=>{let{columnIds:n,ids:r,grades:o,permissions:l}=t,c=!(0,a.nq)(r);return e=(0,i.ZP)(e,e=>{c&&function(e,t,n){t.forEach(t=>{e.byColumnId[t]||(e.byColumnId[t]=v());let i=e.byColumnId[t];n.forEach(e=>i.byMemberId[e]=null)})}(e,n,r.membershipIds),y(e,o,l)}),(0,s.f2)(e,t)},[(0,s.bG)(u.V.GRADEBOOK_BULKVIEW_LOAD)]:s.sT,[(0,s.ok)(d.V.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{var n;return(null===(n=t.gradebookColumn)||void 0===n?void 0:n.id)&&(e=(0,i.ZP)(e,e=>{delete e.byColumnId[t.gradebookColumn.id]})),(0,s.f2)(e,t)},[(0,s.ok)(u.V.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{let{grades:n}=t;if(!n)return(0,s.f2)(e,t);let r=(0,i.ZP)(e,e=>{!function(e,t){Object.keys(e.byColumnId).forEach(n=>{t.forEach(t=>{var i,r,s;let o=null===(r=null===(i=e.byColumnId[n])||void 0===i?void 0:i.byUserId)||void 0===r?void 0:r[t];if(!o)return;let a=e.byColumnId[n].grades[o];if(!a.isCalculatedColumnGrade&&!(null===(s=null==a?void 0:a.displayGrade)||void 0===s?void 0:s.isOverride))return;let l=b(a);e.byColumnId[a.columnId].grades[l]&&(e.byColumnId[a.columnId].grades[l].api={...e.byColumnId[a.columnId].grades[l].api,isInvalidated:!0})})})}(e,new Set(n.map(e=>e.userId).filter(e=>!!e))),y(e,n)});return(0,s.f2)(r,t)},[(0,s.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{let{grades:n}=t;if(!n)return(0,s.f2)(e,t);let r=(0,i.ZP)(e,e=>{C(e,n)});return(0,s.f2)(r,t)},[u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID]:(e,t)=>{let{columnId:n,id:r}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[r]={...e.byColumnId[n].grades[r],api:{isUpdating:!0}}})},[(0,s.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{grade:n}=t;return e=(0,i.ZP)(e,e=>{y(e,[n])}),(0,s.f2)(e,t)},[(0,s.bG)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,id:r}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[r]={...e.byColumnId[n].grades[r],api:{isUpdating:!1}}})},[u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID]:(e,t)=>{let{columnId:n,userId:r}=t;return(0,i.ZP)(e,e=>{let t=`${r}${n}`;e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!0}}})},[(0,s.ok)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{grade:n}=t;return e=(0,i.ZP)(e,e=>{y(e,[n]),e.byColumnId[n.columnId].grades[b(n)].ui={isGradePersistByUserId:!0}}),(0,s.f2)(e,t)},[(0,s.bG)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{columnId:n,userId:r}=t;return(0,i.ZP)(e,e=>{let t=`${r}${n}`;e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[t]={...e.byColumnId[n].grades[t],api:{isUpdating:!1}}})},[u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID]:(e,t)=>{let{columnId:n,id:r}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[r]={...e.byColumnId[n].grades[r],api:{isUpdating:!0}}})},[(0,s.ok)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,gradeId:r}=t;return e=(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v());let t={...e.byColumnId[n].grades[r],manualStatus:l.WTZ.IsPosted,hasGradeBeenPosted:!0};y(e,[t])}),(0,s.f2)(e,t)},[(0,s.bG)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let{columnId:n,gradeId:r}=t;return(0,i.ZP)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v()),e.byColumnId[n].grades[r]={...e.byColumnId[n].grades[r],api:{isUpdating:!1}}})},[(0,s.ok)(d.V.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{let{columnId:n}=t;if(n){let t=D(e.byColumnId,n);return T(e,t)}return e},[(0,s.ok)(c.V.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t,{gradeId:i}=null!=n?n:{};if(i){let t=P(e.byColumnId).filter(e=>(null==e?void 0:e.id)===i);return T(e,t)}return e},[(0,s.ok)(c.V.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:{gradeId:n,columnId:r}}=t;return r&&n?(0,i.ZP)(e,e=>{!function(e,t,n){let i=e.byColumnId[n].grades[t],r=b(i);i&&e.byColumnId[i.columnId].grades[r]&&(e.byColumnId[i.columnId].grades[r].api={...e.byColumnId[i.columnId].grades[r].api,isInvalidated:!0})}(e,n,r)}):e},[(0,s.ok)(m.V.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t;return(0,i.ZP)(e,e=>{let t=e.byColumnId[n];t&&C(e,Object.values(t.grades))})},[(0,s.ok)(h.V.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{columnId:n,gradeId:r}=t.data;return n&&r?(0,i.ZP)(e,e=>{var t;let i=null===(t=e.byColumnId[n])||void 0===t?void 0:t.grades[r];i&&C(e,[i])}):e},[u.V.GRADEBOOK_GRADES_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,i.ZP)(e,e=>{let t=e.byColumnId[n];t&&C(e,Object.values(t.grades))})},[u.V.GRADEBOOK_GRADE_DETAIL_LOAD]:s.K4,[(0,s.ok)(u.V.GRADEBOOK_GRADE_DETAIL_LOAD)]:(e,t)=>{let{grade:n}=t;return e=(0,i.ZP)(e,e=>{y(e,[n],void 0,!0)}),(0,s.f2)(e,t)},[(0,s.bG)(u.V.GRADEBOOK_GRADE_DETAIL_LOAD)]:s.sT}),k={loadGradebookGradesByColumnId:({columnId:e,courseId:t,userId:n,includeUnpostedGrade:i})=>(0,s.c3)(r=>r(k.loadGradebookGradesByQuery({columnId:e,courseId:t,...n||i?{filter:{...n?{userId:n}:{},...i?{includeUnpostedGrade:i}:{}}}:{}},!0))),loadGradebookGradesByQuery:(e,t=!1)=>(0,s.c3)(async(n,i)=>{if(t||w(i(),e)){n((0,s.aU)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY,{query:e}));try{let t=await a.Bg(e);n((0,s.aU)((0,s.ok)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY),{data:t,query:e}))}catch(t){throw(0,f.Kn)((0,f.Gt)(t),[l.oji.NotFound])?n((0,s.aU)((0,s.cI)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY),{query:e})):(n((0,s.aU)((0,s.bG)(u.V.GRADEBOOK_GRADE_LOAD_BY_QUERY),{query:e})),n((0,s.aU)((0,s.ok)(g.Z.APP_ERROR),{error:t}))),{error:t}}}}),loadBulkView:(e,t,n,i)=>(0,s.PH)(u.V.GRADEBOOK_BULKVIEW_LOAD,async()=>{try{let r=await a.nT(e,t,{queryParams:i,...n});return{columnIds:t,ids:n,...r}}catch(e){throw{err:e}}}),setGradesInStore:e=>(0,s.aU)((0,s.ok)(u.V.GRADEBOOK_GRADES_LOAD),{grades:e}),setInvalidatedGradesInStore:e=>(0,s.aU)((0,s.ok)(u.V.GRADEBOOK_GRADES_INVALIDATE),{grades:e}),loadAnonymousGradeExemption:(e,t)=>{let{courseId:n,columnId:i,userId:r}=t;return(0,s.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{let s=await a.Fe(t);if(s.isExempt===(null==e?void 0:e.isExempt))return{grade:e};return{grade:{...s,courseId:n,columnId:i,userId:r}}}catch(t){throw{err:t,grade:e}}},{courseId:n,columnId:i,userId:r})},updateAnonymousGradeExemption:(e,t)=>(0,s.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{let n=await a.Q5(t);return{grade:{...e,...n}}}catch(t){throw{err:t,grade:e}}},e),updateGradeByGradeId:(e,t)=>(0,s.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID,async()=>{try{return await a.GI(e,t)}catch(e){throw{err:e,nextGrade:t}}},t),createGradeByUserId:e=>(0,s.PH)(u.V.GRADEBOOK_GRADE_PERSIST_BY_USER_ID,async()=>{try{return await a.mE(e)}catch(t){throw{err:t,grade:e}}},e),postGradeByGradeId:e=>(0,s.PH)(u.V.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID,async()=>{try{return await a.VH(e),{columnId:e.columnId,gradeId:e.id}}catch(t){throw{err:t,grade:e}}},e),invalidateGradebookGradesByColumnId:e=>(0,s.aU)(u.V.GRADEBOOK_GRADES_INVALIDATE_BY_COLUMN_ID,{columnId:e}),loadGradeDetailByGradeId:e=>(0,s.PH)(u.V.GRADEBOOK_GRADE_DETAIL_LOAD,async()=>{try{return await a.RX(e)}catch(e){throw{error:e}}})};function T(e,t){return(0,i.ZP)(e,e=>{C(e,t)})}function P(e={}){let t=[];return Object.keys(e).forEach(n=>{var i;Object.keys((null===(i=e[n])||void 0===i?void 0:i.grades)||{}).forEach(i=>{t.push(e[n].grades[i])})}),t}function D(e,t){return P(e).filter(e=>(null==e?void 0:e.columnId)===t)}let x=e=>e.gradebookGrade.byColumnId,R=(0,r.P1)([x,(e,t)=>t],D),L={getGradebookGradeById:(e,t)=>(0,o.filter)(P(e.gradebookGrade.byColumnId),{id:t}),getGradebookGradesByColumnId:R,getGradebookGradesByCourseId:(0,r.P1)([x,(e,t)=>t],function(e,t){return P(e).filter(e=>e.courseId===t)}),getGradebookGradesByUserId:(0,r.P1)([x,(e,t)=>t],function(e,t){return P(e).filter(e=>e.userId===t)}),getGradebookGradesByColumnIdAndUserId:(e,t,n)=>(0,o.filter)(D(x(e),t),{userId:n}),getGradebookGradesByColumnIdAndGradeId:(e,t,n)=>(0,o.filter)(D(x(e),t),{id:n}),areGradebookGradesLoading:e=>e.gradebookGrade.isLoading,getMemberOrGradeIdsWithMissingOrInvalidatedGradesInColumn:p.K,getGradebookGradesByColumnIdAndMemberOrGradeIds:p.o,getGradebookGradeViewByQuery:(e,t)=>{let{view:n}=E(e.gradebookGrade,t);return n||null},getGradebookGradesByQuery:(e,t)=>{var n;let{view:i}=E(e.gradebookGrade,t);return i?(null!==(n=i.values)&&void 0!==n?n:[]).map(n=>e.gradebookGrade.byColumnId[t.columnId].grades[n]):[]}}},179155:function(e,t,n){"use strict";n.d(t,{$M:function(){return s},Gt:function(){return a}});var i=n(986709),r=n(426368);let s=e=>!!e&&"object"==typeof e&&("status"in e||"message"in e)&&"number"==typeof e.status,o=e=>{if(!e||"object"!=typeof e||!("type"in e)||"string"!=typeof e.type)return!1;let{type:t}=e;return"api"===t||"runtime"===t},a=e=>e?"object"!=typeof e?{type:"runtime",message:String(e),originalException:e}:o(e)?e:e instanceof i.Hy0?{type:"api",message:e.body.message,status:e.body.status,code:e.body.code,originalException:e}:e instanceof i.srx?{type:"api",message:e.apiError.body.message,status:e.status,code:e.apiError.body.code,originalException:e}:e instanceof r.F?{type:"network",message:e.message,originalException:e}:s(e)?{type:"api",message:e.message,status:e.status,code:e.code,originalException:e}:e instanceof Error?{type:"runtime",message:e.message,originalException:e}:"err"in e&&e.err?a(e.err):"error"in e&&e.error?a(e.error):{type:"runtime",message:"message"in e?String(e.message):"",originalException:e}:null},690260:function(e,t,n){"use strict";n.d(t,{$M:function(){return r.$M},A1:function(){return d.A},F7:function(){return l.F},Gt:function(){return r.Gt},IK:function(){return d.I},Kn:function(){return s.K},PG:function(){return o.PG},QK:function(){return o.QK},RF:function(){return i.RF},S6:function(){return o.S6},UP:function(){return o.UP},WE:function(){return a.WE},e9:function(){return o.e9},hm:function(){return o.hm},hq:function(){return o.hq},jM:function(){return i.jM},xh:function(){return c.xh}});var i=n(785613),r=n(179155),s=n(702028),o=n(839248),a=n(912225),l=n(426368),c=n(828270),d=n(954135)},912225:function(e,t,n){"use strict";n.d(t,{WE:function(){return a}});var i=n(230267);class r extends i.Y{constructor(e,t,n){super(n,e),this.ident=t}}class s extends r{constructor(e,t){super("InvalidMathMLError",e,t),this.error=t}}class o extends r{constructor(e,t){super("MissingVariableError",e,t),this.error=t}}function a(e,t){switch(e.error.message){case"Invalid MathML":return new s(t,e.error);case"Invalid Variable":return new o(t,e.error);default:return e}}},259197:function(e,t,n){"use strict";n.d(t,{EdL:function(){return eF.Ed},LPT:function(){return eX.LP},VfA:function(){return e1.VfA},Wb7:function(){return e1.Wb7},jMP:function(){return eY.jM},PQc:function(){return e1.PQc},oVk:function(){return e1.oVk},wNO:function(){return ej.w},WYE:function(){return ez.WY},lzL:function(){return eX.lz},GQk:function(){return eX.GQ},AaE:function(){return eX.A},y0Z:function(){return eX.y0},Sey:function(){return eU.S},a6B:function(){return e1.a6B},DL$:function(){return e1.DL$},C0f:function(){return e1.C0f},o6I:function(){return eX.o6},Fce:function(){return eX.Fc},yY6:function(){return e1.yY6},tiF:function(){return e1.tiF},ehY:function(){return eV.e},TRC:function(){return eX.TR},x40:function(){return e4.x},eu1:function(){return eX.eu},I_d:function(){return eX.I_},udf:function(){return eX.ud},XXy:function(){return eH.XX},UAK:function(){return eX.UA},HTE:function(){return e1.HTE},W6_:function(){return e1.W6_},f_:function(){return eX.f_},zg8:function(){return e1.zg8},S6o:function(){return eY.S6},hqK:function(){return eY.hq},HVT:function(){return eX.HV},ZNX:function(){return e1.ZNX},Xgx:function(){return eX.Xg},ddT:function(){return eX.dd},fq8:function(){return eX.fq},$Gc:function(){return e1.$Gc},eQC:function(){return e1.eQC},FSJ:function(){return e1.FSJ},t9O:function(){return e1.t9O},ubP:function(){return e1.ubP},o5e:function(){return e1.o5e},bTV:function(){return e1.bTV},HDV:function(){return e1.HDV},tG9:function(){return e1.tG9},SsS:function(){return e1.SsS},FSD:function(){return e1.FSD},Kwj:function(){return e1.Kwj},VqL:function(){return e1.VqL},URo:function(){return e1.URo},iLJ:function(){return e1.iLJ},Gq1:function(){return e1.Gq1},JCs:function(){return e1.JCs},ch$:function(){return e1.ch$},j$z:function(){return e1.j$z},bP:function(){return e1.bP},$zP:function(){return e1.$zP},RoV:function(){return e1.RoV},rL4:function(){return eX.rL},dcz:function(){return eX.dc},LJ1:function(){return e1.LJ1},Q0L:function(){return e1.Q0L},a4B:function(){return e1.a4B},lJA:function(){return eX.lJ},s6P:function(){return eq.s6},GwB:function(){return eX.Gw},jrO:function(){return eX.jr},u$1:function(){return eX.u$},c4l:function(){return eX.c4},PG6:function(){return eY.PG},e9A:function(){return eY.e9},lL$:function(){return r},UP6:function(){return eY.UP},hm3:function(){return eY.hm},TeC:function(){return eH.Te},IK:function(){return eY.IK},Nwg:function(){return eZ},Sb3:function(){return eX.Sb},api:function(){return e1.api},QGs:function(){return eX.QG},C4U:function(){return e1.C4U},Q2d:function(){return e1.Q2d},aBo:function(){return eX.aB},N1L:function(){return eX.N1},I7o:function(){return eX.I7},bbE:function(){return e1.bbE},MAI:function(){return eX.MA},l_$:function(){return eX.l_},gUR:function(){return e1.gUR},oHG:function(){return e1.oHG},s9I:function(){return e1.s9I},us4:function(){return e1.us4},vc:function(){return s.vc},jQV:function(){return s.jQ},Gtp:function(){return eY.Gt},uIm:function(){return e1.uIm},_v9:function(){return e1._v9},Vbk:function(){return e1.Vbk},CBS:function(){return e1.CBS},GNH:function(){return e1.GNH},YUt:function(){return e1.YUt},iBu:function(){return e1.iBu},_Ae:function(){return e1._Ae},JYP:function(){return e1.JYP},FAX:function(){return e1.FAX},cUf:function(){return e1.cUf},WFQ:function(){return e1.WFQ},EPI:function(){return e1.EPI},TS8:function(){return e1.TS8},uHV:function(){return e1.uHV},IqD:function(){return e1.IqD},V$w:function(){return e1.V$w},jC5:function(){return e1.jC5},G3z:function(){return e1.G3z},VFg:function(){return e1.VFg},Fix:function(){return e1.Fix},OYP:function(){return eH.V5},Hgv:function(){return e1.Hgv},PZi:function(){return e1.PZi},kyU:function(){return e1.kyU},LrM:function(){return e1.LrM},DgF:function(){return e1.DgF},xne:function(){return e1.xne},EUc:function(){return e1.EUc},Y$o:function(){return e1.Y$o},fPq:function(){return eX.fP},uZ9:function(){return e1.uZ9},Tj0:function(){return e1.Tj0},nMx:function(){return e1.nMx},rQK:function(){return e1.rQK},oek:function(){return e1.oek},pzE:function(){return e1.pzE},RMg:function(){return eX.RM},kfU:function(){return eX.kf},Uc6:function(){return e1.Uc6},_pB:function(){return e1._pB},B22:function(){return eX.B2},Ffc:function(){return e1.Ffc},jdu:function(){return e1.jdu},C8y:function(){return eX.C8},Roc:function(){return e1.Roc},Si$:function(){return eX.Si},Ybd:function(){return eX.Yb},nqI:function(){return e1.nqI},$ME:function(){return eY.$M},uVn:function(){return eX.uV},M5E:function(){return e1.M5E},MOU:function(){return eX.MO},Csr:function(){return e1.Csr},hQS:function(){return e1.hQS},KIW:function(){return e1.KIW},azG:function(){return e1.azG},RAR:function(){return e1.RAR},dep:function(){return e1.dep},qDZ:function(){return e1.qDZ},OuV:function(){return e1.OuV},PR8:function(){return e1.PR8},fBj:function(){return e1.fBj},ltB:function(){return e1.ltB},I5k:function(){return e1.I5k},GjL:function(){return e1.GjL},FaB:function(){return e1.FaB},QWy:function(){return eJ},vQg:function(){return e0},L36:function(){return e1.L36},Ys:function(){return eQ},f6z:function(){return e1.f6z},$_n:function(){return e1.$_n},nPi:function(){return s.nP},W8C:function(){return e1.W8C},_X4:function(){return eW._X},M4H:function(){return eX.M4},Hfm:function(){return e1.Hfm},yLp:function(){return e1.yLp},OmG:function(){return e1.OmG},OgF:function(){return e2.O}});var i,r,s=n(491288),o=n(276635),a=n(715729),l=n(693010),c=n(809347),d=n(728214),u=n(99017),p=n(16529),m=n(232154),h=n(380556),g=n(491791),f=n(961978),b=n(989609),v=n(505548),y=n(552728),S=n(137841),C=n(517721),E=n(696124),I=n(929488),w=n(41205),A=n(613573),k=n(433770),T=n(422890),P=n(64818),D=n(1617),x=n(279020),R=n(732305),L=n(703011),N=n(257724),$=n(654448),O=n(762572),G=n(563164),_=n(7702),M=n(87647),B=n(502309),F=n(591526),U=n(251291),V=n(105232),H=n(779055),q=n(25383),j=n(281533),z=n(864370),W=n(161219),K=n(347057),Z=n(45216),Q=n(960369),J=n(933410),Y=n(156765),X=n(438202),ee=n(847880),et=n(502448),en=n(444112),ei=n(613077),er=n(36011),es=n(76701),eo=n(585999),ea=n(610239),el=n(303062),ec=n(796143),ed=n(928659),eu=n(586750),ep=n(149631),em=n(611734),eh=n(220854),eg=n(788652),ef=n(237368),eb=n(955370),ev=n(843376),ey=n(127613),eS=n(676285),eC=n(677105),eE=n(489785),eI=n(58405),ew=n(60049),eA=n(620698),ek=n(225707),eT=n(967589),eP=n(333734),eD=n(816785),ex=n(749505),eR=n(316279),eL=n(402619),eN=n(653729),e$=n(685573),eO=n(139158),eG=n(843979),e_=n(619281),eM=n(891637),eB=n(333189),eF=n(597691);n(417548);var eU=n(815532),eV=n(846935),eH=n(125107),eq=n(234166),ej=n(17393),ez=n(99298),eW=n(550161);let eK={adaptiveRelease:l.I6,ai:c.I6,announcement:d.I6,assessment:p.I6,attemptReceipt:m.I6,attemptLog:h.I6,blog:{blogs:g.I6,comments:f.I6,entries:b.I6,participants:v.I6,summary:y.I6},calendar:C.I6,columnStatistics:E.I6,columnSummary:I.I6,contentReviewState:T.I6,course:w.I6,courseAnnouncements:k.I6,courseChildren:e_.I6,courseConversion:P.I6,courseEntitlements:D.I6,courseTasks:x.I6,courseLogs:R.I6,courseMembership:S.I6,courseMessage:L.I6,coursePreference:N.I6,courseProgress:$.I6,courseResources:O.I6,courseTools:M.I6,courseMessageSummary:B.I6,courseRubricsUserPreference:_.I6,courseUserNotes:F.I6,content:A.I6,delegatedAttemptGrade:U.I6,discussionBoardSettings:V.I6,directSubmitResults:j.I6,directSubmitPluginStatus:z.I6,directSubmitCourseSettings:W.I6,exceptionDetails:K.I6,featureFlags:Z.I6,fileUploadSettings:Q.I6,fileUpload:J.I6,ftue:Y.I6,gradableItemUserOption:X.I6,gradebookAttempt:ee.I6,gradebookCategory:et.I6,gradebookColumn:en.I6,gradebookGrade:ei.I6,gradebookSchema:er.I6,group:ec.I6,groupSetImport:eo.I6,groupMembersImport:ea.I6,groupSetExport:el.I6,groupWorkspace:ed.I6,institutionBrand:eu.I6,institutionRole:ep.I6,locale:em.I6,ltiDomain:eh.I6,ltiPlacement:eg.I6,notificationMethodSetting:ef.I6,partnerCloud:eb.I6,proctoringServices:ev.I6,question:eC.I6,questionAnalysis:{questionDetails:eS.I6,reports:ey.I6},questionAttempt:eE.I6,questionAttemptGrade:eI.I6,questionGradeStatus:ew.I6,questionTag:eA.I6,questionType:ek.I6,sessionDebug:eT.I6,submissionResults:eM.I6,submissionServices:eD.I6,studentPreview:eP.I6,systemPreference:ex.I6,theme:eR.I6,user:eL.I6,userPreference:eN.I6,userPronouns:e$.I6,app:u.I6,contentIndicators:eO.I6,ultraSettings:eG.I6,unsplash:eB.I6},eZ={adaptiveRelease:l.Nw,ai:c.Nw,announcement:d.Nw,assessment:p.Nw,attemptReceipt:m.Nw,attemptLog:h.Nw,blog:{blogs:g.Nw,comments:f.Nw,entries:b.Nw,participants:v.Nw,summary:y.Nw},calendar:C.Nw,columnStatistics:E.Nw,columnSummary:I.Nw,contentReviewState:T.Nw,course:w.Nw,courseAnnouncements:k.Nw,courseChildren:e_.Nw,courseConversion:P.Nw,courseEntitlements:D.Nw,courseTasks:x.Nw,courseLogs:R.Nw,courseMembership:S.Nw,courseMessage:L.Nw,coursePreference:N.Nw,courseProgress:$.Nw,courseResources:O.Nw,courseRubrics:G.N,courseRubricsUserPreference:_.Nw,courseTools:M.Nw,courseMessageSummary:B.Nw,courseUserNotes:F.Nw,content:A.Nw,delegatedAttemptGrade:U.Nw,discussionBoardSettings:V.Nw,directSubmitAddSubmission:H.N,directSubmitUploadSubmission:q.N,directSubmitResults:j.Nw,directSubmitPluginStatus:z.Nw,directSubmitCourseSettings:W.Nw,exceptionDetails:K.Nw,featureFlags:Z.Nw,fileUpload:J.Nw,fileUploadSettings:Q.Nw,ftue:Y.Nw,gradableItemUserOption:X.Nw,gradebookAttempt:ee.Nw,gradebookCategory:et.Nw,gradebookColumn:en.Nw,gradebookGrade:ei.Nw,gradebookSchema:er.Nw,granularContentCopy:es.N,group:ec.Nw,groupSetImport:eo.Nw,groupMembersImport:ea.Nw,groupSetExport:el.Nw,groupWorkspace:ed.Nw,institutionBrand:eu.Nw,institutionRole:ep.Nw,locale:em.Nw,ltiDomain:eh.Nw,ltiPlacement:eg.Nw,notificationMethodSetting:ef.Nw,partnerCloud:eb.Nw,proctoringServices:ev.Nw,question:eC.Nw,questionAnalysis:{questionDetails:eS.Nw,reports:ey.Nw},questionAttempt:eE.Nw,questionAttemptGrade:eI.Nw,questionGradeStatus:ew.Nw,questionTag:eA.Nw,questionType:ek.Nw,sessionDebug:eT.Nw,studentPreview:eP.Nw,submissionResults:eM.Nw,submissionServices:eD.Nw,systemPreference:ex.Nw,theme:eR.Nw,user:eL.Nw,userPreference:eN.Nw,userPronouns:e$.Nw,app:u.Nw,contentIndicators:eO.Nw,ultraSettings:eG.Nw,unsplash:eB.Nw},eQ={adaptiveRelease:l.Ys,ai:c.Ys,assessment:p.Ys,attemptReceipt:m.Ys,attemptLog:h.Ys,blog:{blogs:g.Ys,comments:f.Ys,entries:b.Ys,participants:v.Ys,summary:y.Ys},calendar:C.Ys,columnStatistics:E.Ys,columnSummary:I.Ys,contentReviewState:T.Ys,course:w.Ys,courseChildren:e_.Ys,courseConversion:P.Ys,courseEntitlements:D.Ys,courseAnnouncements:k.Ys,courseTasks:x.Ys,courseLogs:R.Ys,courseMembership:S.Ys,courseMessage:L.Ys,coursePreference:N.Ys,courseProgress:$.Ys,courseResources:O.Ys,courseRubricsUserPreference:_.Ys,courseTools:M.Ys,courseMessageSummary:B.Ys,courseUserNotes:F.Ys,content:A.Ys,delegatedAttemptGrade:U.Ys,discussionBoardSettings:V.Ys,directSubmitResults:j.Ys,directSubmitPluginStatus:z.Ys,directSubmitCourseSettings:W.Ys,exceptionDetails:K.Ys,featureFlags:Z.Ys,fileUploadSettings:Q.Ys,fileUpload:J.Ys,ftue:Y.Ys,gradableItemUserOption:X.Ys,gradebookAttempt:ee.Ys,gradebookCategory:et.Ys,gradebookColumn:en.Ys,gradebookGrade:ei.Ys,gradebookSchema:er.Ys,group:ec.Ys,groupSetImport:eo.Ys,groupMembersImport:ea.Ys,groupSetExport:el.Ys,groupWorkspace:ed.Ys,institutionBrand:eu.Ys,institutionRole:ep.Ys,locale:em.Ys,ltiDomain:eh.Ys,ltiPlacement:eg.Ys,notificationMethodSetting:ef.Ys,partnerCloud:eb.Ys,proctoringServices:ev.Ys,question:eC.Ys,questionAnalysis:{questionDetails:eS.Ys,reports:ey.Ys},questionAttempt:eE.Ys,questionAttemptGrade:eI.Ys,questionGradeStatus:ew.Ys,questionTag:eA.Ys,questionType:ek.Ys,sessionDebug:eT.Ys,submissionResults:eM.Ys,submissionServices:eD.Ys,studentPreview:eP.Ys,systemPreference:ex.Ys,user:eL.Ys,userPreference:eN.Ys,userPronouns:e$.Ys,app:u.Ys,contentIndicators:eO.Ys,ultraSettings:eG.Ys,unsplash:eB.Ys};function eJ(e,t){return function e(t,n,i){let r=Object.keys(i),s=arguments.length<=0||void 0===t?{}:t,l=s;return r.forEach(t=>{let r=o.get(i,t),c=o.get(s,t);"object"==typeof r?l=(0,a.ZP)(l,i=>{o.set(i,t,e(c,n,r))}):"function"==typeof r&&(l=(0,a.ZP)(l,e=>{o.set(e,t,r(c,n))}))}),l}(e,t,eK)}var eY=n(690260),eX=n(554024),e0={uploadRequestWatcherSaga:J.LD},e1=n(493107),e2=n(504072),e4=n(704434);(i=r||(r={})).StudentMessageReadOnlyMode="student_messages_readonly_mode",i.StudentCourseMessagingAvailabilityMode="student_messaging_availability_mode",i.ParticipantOrgMessagingAvailabilityMode="participant_messaging_availability_mode",i.CourseMessagingForceEmailMode="course_messaging_force_email_mode",i.OrgMessagingForceEmailMode="org_messaging_force_email_mode"},23938:function(e,t,n){"use strict";n.d(t,{Qi:function(){return C},_z:function(){return p},cM:function(){return v},iA:function(){return S},rD:function(){return u},xP:function(){return c}});var i=n(5196),r=n(26451),s=n(986709),o=n(406392);let a=e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.edit},l=/\/([^\/]*)_.*\..*$/,c=e=>{var t;let n=null===(t=e.iconUrl)||void 0===t?void 0:t.match(l);if(!n)return s.DXv.Unknown;switch(n[1]){case"assignment":return s.DXv.UltraAssignment;case"discussion":return s.DXv.Discussion;case"file":return s.DXv.File;case"folder":return s.DXv.Folder;case"link":return s.DXv.ExternalLink;case"test":return s.DXv.TestLink;case"survey":return s.DXv.SurveyLink;default:return s.DXv.Unknown}},d=e=>!e.isAvailable&&!e.isPartiallyVisible,u=e=>{if(!e.contentDetail)return!1;let t=e.contentDetail[i.GQ.Folder.toString()];return!!i.GQ.Folder.isEqualTo(e.contentHandler)&&null!=t&&!!t.isBbPage||!!i.GQ.Unknown.isEqualTo(e.contentHandler)&&void 0},p=e=>i.GQ.Folder.isEqualTo(e.contentHandler)&&!u(e),m=e=>i.GQ.ExternalLink.isEqualTo(e.contentHandler),h=e=>i.GQ.LtiLink.isEqualTo(e.contentHandler),g=e=>i.GQ.CourseLink.isEqualTo(e.contentHandler),f=e=>i.GQ.LtiPlacement.startsWith(e.contentHandler),b=e=>i.GQ.PartnerCloud.isEqualTo(e.contentHandler),v=e=>i.GQ.RusticiScorm.isEqualTo(e.contentHandler),y=e=>c(e)===s.DXv.Discussion;function S(e){switch(e){case s.nEm.Embed:return s.I_d.Inline;case s.nEm.EmbedOnly:return s.I_d.InlineOnly;case s.nEm.Link:return s.I_d.Attachment}}function C(e){switch(e){case s.I_d.Inline:return s.nEm.Embed;case s.I_d.InlineOnly:return s.nEm.EmbedOnly;case s.I_d.Attachment:return s.nEm.Link}}t.ZP={canCreate:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.create},canDelete:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.delete},canEdit:a,canEditAvailability:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.modifyAvailability)},canHaveAttempts:function(e){return i.GQ.UltraAssignment.isEqualTo(e.contentHandler)||i.GQ.TestLink.isEqualTo(e.contentHandler)||i.GQ.SurveyLink.isEqualTo(e.contentHandler)||i.GQ.LtiLink.isEqualTo(e.contentHandler)||i.GQ.LtiPlacement.startsWith(e.contentHandler)||i.GQ.PartnerCloud.isEqualTo(e.contentHandler)||i.GQ.Discussion.isEqualTo(e.contentHandler)||i.GQ.CourseLink.isEqualTo(e.contentHandler)||i.GQ.Journal.isEqualTo(e.contentHandler)||i.GQ.RusticiScorm.isEqualTo(e.contentHandler)},canOpenConditionalRelease:e=>{var t,n;return null===(n=null===(t=null==e?void 0:e.permissions)||void 0===t?void 0:t.adaptiveRelease)||void 0===n?void 0:n.view},canUpdateReviewState:e=>{var t;return null===(t=e.permissions)||void 0===t?void 0:t.canUpdateReviewState},canHaveReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState},canViewReviewState:function(e){var t;return null===(t=e.permissions)||void 0===t?void 0:t.canViewReviewState},canViewAsInstructor:e=>{var t;return a(e)||(null===(t=e.permissions)||void 0===t?void 0:t.viewDesigner)},fileAssociationModeToFileRenderType:S,fileRenderTypeToFileAssociationMode:C,getContentHandlerByIconUrl:c,getLaunchInNewWindow:function(e){return!!e.launchInNewWindow},hasConversation:e=>!!e.attachedForumLink,isBbPage:u,isFolderContentItem:p,isDocument:e=>i.GQ.Folder.isEqualTo(e.contentHandler)&&!!u(e),isRootFolder:e=>p(e)&&e.title===s.x1x.Root&&null==e.parentId,isDiscussion:e=>!!i.GQ.Discussion.isEqualTo(e.contentHandler)||i.GQ.CourseLink.isEqualTo(e.contentHandler)&&i.GQ.Discussion.isEqualTo(c(e)),isLink:m,isLtiLink:h,isLtiPlacement:f,isPartnerCloud:b,isFile:e=>i.GQ.File.isEqualTo(e.contentHandler),isDiscussionCourseLink:y,isNonDiscussionCourseLink:e=>!y(e)&&g(e),isPlaceHolderContent:e=>m(e)||h(e)||f(e)||b(e),isCourseLink:g,getCourseLinkSourceId:e=>{var t;if(g(e))return null===(t=e.contentDetail)||void 0===t?void 0:t[i.GQ.CourseLink.toString()].linkSourceId},isTest:e=>i.GQ.TestLink.isEqualTo(e.contentHandler),isSurvey:e=>i.GQ.SurveyLink.isEqualTo(e.contentHandler),isScorm:v,isUnknownContentItem:e=>i.GQ.Unknown.isEqualTo(e.contentHandler),isExternalSubmissionsAssessment:function(e){var t,n;if(!e)return!1;if(i.GQ.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){let r=e.contentDetail[i.GQ.TestLink.handle];return!!(null===(n=null===(t=null==r?void 0:r.test)||void 0===t?void 0:t.deploymentSettings)||void 0===n?void 0:n.isCollectExternalSubmissions)}return!1},isHiddenFromStudents:d,isVisibleToStudents:e=>!!e.isAvailable&&!e.isPartiallyVisible&&!(0,r.V1)(e),isReviewableItemLocked:e=>(0,r.X)(e),isNotAccessibleButVisibleForcedSequenceItem:e=>(0,r.mb)(e)||!d(e)&&!a(e),isQuestionAnalysisAvailable:function(e){return!!i.GQ.UltraAssignment.isEqualTo(e.contentHandler)||i.GQ.TestLink.isEqualTo(e.contentHandler)},getContentHandler:function(e){if(!e.contentHandler)return i.GQ.Unknown;let t=i.GQ.parse(e.contentHandler.toString());return e.contentHandler.toString().indexOf(i.GQ.LtiPlacement.handle)>=0&&(t=i.GQ.LtiPlacement),u(e)&&(t=i.GQ.Page),t},requiresManualMarking:function(e){var t,n,r,s;return!((0,o.ab)(e)||(0,o.lG)(e)||i.GQ.UltraAssignment.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())||i.GQ.ClassicAssignment.isEqualTo(null===(n=e.contentHandler)||void 0===n?void 0:n.toString())||i.GQ.TestLink.isEqualTo(null===(r=e.contentHandler)||void 0===r?void 0:r.toString())||i.GQ.SurveyLink.isEqualTo(null===(s=e.contentHandler)||void 0===s?void 0:s.toString()))},isAssessmentLink:function(e){var t,n;return i.GQ.TestLink.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())||i.GQ.SurveyLink.isEqualTo(null===(n=e.contentHandler)||void 0===n?void 0:n.toString())}}},5196:function(e,t,n){"use strict";n.d(t,{GQ:function(){return o},I_:function(){return s.I_d},UA:function(){return r}});var i,r,s=n(986709);class o{static parse(e){if(!e)return null;let t=Object.values(o);for(let n=0;n<t.length;n++)if(t[n].toString().toLowerCase()===e.toLowerCase())return t[n]}constructor(e,t){this.handle=e,this.iconClass=t}isEqualTo(e){return this.handle===(e||"").toString()}startsWith(e){return 0===(e||"").toString().indexOf(this.toString())}toString(){return this.handle}toJSON(){return this.handle}}o.ClassicAssignment=new o(s.DXv.ClassicAssignment,"img-icon-assignment"),o.UltraAssignment=new o(s.DXv.UltraAssignment,"img-icon-assignment"),o.Attendance=new o(s.DXv.Attendance,"img-icon-attendance"),o.Audio=new o(s.DXv.Audio,"img-icon-audio"),o.Blog=new o(s.DXv.Blog,"img-icon-blog"),o.Discussion=new o(s.DXv.Discussion,"img-icon-discussion"),o.Document=new o(s.DXv.Document,"img-icon-document-text"),o.ExternalLink=new o(s.DXv.ExternalLink,"img-icon-link"),o.LtiLink=new o(s.DXv.LtiLink,"img-icon-lti"),o.PartnerCloud=new o(s.DXv.PartnerCloud,"img-icon-link"),o.LtiPlacement=new o(s.DXv.LtiPlacement,"img-icon-lti"),o.CloudDocumentPlacement=new o(s.DXv.LtiLink,"img-icon-document-cloud"),o.GoogleDocumentPlacement=new o(s.DXv.LtiLink,"img-icon-document-google"),o.CollaborativeCloudDocumentPlacement=new o(s.DXv.LtiLink,"img-icon-collaborative-cloud"),o.CollaborativeGoogleCloudDocumentPlacement=new o(s.DXv.LtiLink,"img-icon-cloud-collaboration-google"),o.File=new o(s.DXv.File,"img-icon-document-blank"),o.Folder=new o(s.DXv.Folder,"img-icon-folder"),o.LearningModule=new o(s.DXv.LearningModule,"img-icon-learning-module"),o.Image=new o(s.DXv.Image,"img-icon-photo"),o.Journal=new o(s.DXv.Journal,"img-icon-journal"),o.Kaltura=new o(s.DXv.Kaltura,"img-icon-video"),o.Page=new o(s.DXv.Page,"img-icon-document-text"),o.RusticiScorm=new o(s.DXv.RusticiScorm,"img-icon-scormengine"),o.SurveyLink=new o(s.DXv.SurveyLink,"img-icon-survey"),o.TestLink=new o(s.DXv.TestLink,"img-icon-test"),o.Video=new o(s.DXv.Video,"img-icon-video"),o.Wiki=new o(s.DXv.Wiki,"img-icon-wiki"),o.CourseLink=new o(s.DXv.CourseLink,"img-icon-document-blank"),o.Unknown=new o(s.DXv.Unknown,"img-icon-document-blank"),(i=r||(r={})).Add="ADD",i.Delete="DELETE"},455217:function(e,t,n){"use strict";n.d(t,{A_:function(){return s}});var i=n(125107);let r=e=>{let t=e.toLowerCase().split(".").pop();return t?`.${t}`:""},s=(e,t,n)=>{var i;let s=r(e),o=t.find(e=>e.fileExtensions.includes(s));return null!==(i=null==o?void 0:o.uploadSizeLimitInBytes)&&void 0!==i?i:n},o=(e,t,n)=>{var i,s;let o=r(e),a=t.find(e=>e.fileExtensions.includes(o));return{customGroupName:null!==(i=null==a?void 0:a.groupName)&&void 0!==i?i:"default",fileSizeLimit:null!==(s=null==a?void 0:a.uploadSizeLimitInBytes)&&void 0!==s?s:n}};t.ZP={didNotCompleteFileUpload:function(e){return e===i.XX.Failed||e===i.XX.Canceled},isUploadingFile:function(e){return e===i.XX.Queued||e===i.XX.InProgress},getMaxUploadSizeForFile:s,getCustomFileSizeLimitAndGroupName:o,groupExceedingUploadLimitFiles:(e,t,n)=>{let i=[];return e.forEach(e=>{var r;let{customGroupName:s,fileSizeLimit:a}=o(null!==(r=e.name)&&void 0!==r?r:"",t,n),l=i.find(e=>e.groupName===s);l?l.files.push(e):i.push({files:[e],groupName:s,fileSizeLimit:a})}),i},filterOversizedFiles:(e,t,n)=>e.filter(e=>{var i;return e.size>s(null!==(i=e.name)&&void 0!==i?i:"",t,n)}),filterValidSizedFiles:(e,t,n)=>e.filter(e=>{var i;return e.size<=s(null!==(i=e.name)&&void 0!==i?i:"",t,n)})}},554024:function(e,t,n){"use strict";n.d(t,{LP:function(){return d},lz:function(){return h.ZP},GQ:function(){return s.GQ},A:function(){return m.ZP},y0:function(){return M},o6:function(){return W},Fc:function(){return g.ZP},TR:function(){return f.Z},eu:function(){return p},I_:function(){return s.I_},ud:function(){return b.ZP},UA:function(){return s.UA},f_:function(){return C},HV:function(){return E.ZP},Xg:function(){return A.ZP},dd:function(){return I.ZP},fq:function(){return Q.f},rL:function(){return _},dc:function(){return c.dc},lJ:function(){return u.lJ},Gw:function(){return u.ZP},jr:function(){return Z.jr},u$:function(){return l},c4:function(){return w.Z},Sb:function(){return J.S},QG:function(){return Y.Q},aB:function(){return H},N1:function(){return z},I7:function(){return j},MA:function(){return V},l_:function(){return q},fP:function(){return J.f},RM:function(){return K.RM},kf:function(){return K.kf},B2:function(){return Z.B2},C8:function(){return u.C8},Si:function(){return F},Yb:function(){return B},uV:function(){return Z.uV},MO:function(){return c.MO},M4:function(){return o}});var i,r,s=n(5196);let o={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"};var a=n(986709);class l{constructor(e,t,n,i="grades",r="grades"){this.name=e,this.iconClass=t,this.contentHandlers=n,this.needsGradingIcon=i,this.needsReconcilingIcon=r}getContentHandlers(){return this.contentHandlers.map(e=>s.GQ.parse(e))}toString(){return this.name}isEqualTo(e){return this.name===(null==e?void 0:e.toString())}static parse(e){return l.ScoreProviderList.find(t=>e===t.toString())}static parseByContentHandler(e){return e===l.Test.contentHandlers[0]?l.Test:l.ScoreProviderList.find(t=>t.contentHandlers.some(t=>t===e))}}l.UltraAssignment=new l("resource/x-bb-assessment-ultraassignment","assignment",[a.DXv.UltraAssignment.toString()]),l.ClassicAssignment=new l("resource/x-bb-assignment","assignment",[a.DXv.ClassicAssignment.toString()]),l.Attendance=new l("resource/x-bb-attendance","attendance",[a.DXv.Attendance.toString()]),l.Blog=new l("resource/x-bb-bloglink","blog",[a.DXv.Blog.toString()]),l.Discussion=new l("resource/x-bb-forumlink","discussion",[a.DXv.Discussion.toString()]),l.Wiki=new l("resource/x-bb-wiki","wiki",[a.DXv.Wiki.toString()]),l.Survey=new l("resource/x-bb-assessment-survey","survey",[a.DXv.SurveyLink.toString()]),l.Test=new l("resource/x-bb-assessment","test",[a.DXv.TestLink.toString()]),l.PeerSubmissionsTest=new l("resource/x-bb-peer-submission","test",[a.DXv.TestLink.toString()]),l.PeerEvaluationTest=new l("resource/x-bb-peer-eval","test",[a.DXv.TestLink.toString()]),l.LTILink=new l("resource/x-bb-blti-link","lti",[a.DXv.LtiLink.toString(),a.DXv.LtiPlacement.toString()]),l.PartnerCloud=new l("resource/x-bbgs-partner-cloud","link",[a.DXv.PartnerCloud.toString()]),l.Scorm=new l("resource/x-plugin-scormengine","scormengine",[a.DXv.RusticiScorm.toString()]),l.Journal=new l("resource/x-bb-journallink","journal",[a.DXv.Journal.toString()]),l.ScoreProviderList=[l.UltraAssignment,l.ClassicAssignment,l.Attendance,l.Blog,l.Discussion,l.Wiki,l.Survey,l.Test,l.PeerSubmissionsTest,l.PeerEvaluationTest,l.LTILink,l.PartnerCloud,l.Scorm,l.Journal];var c=n(758219),d={hasAccommodations:(e,t)=>{let{viewDueDateException:n,viewTimeLimitException:i}=t,{isAvailable:r,dueDateExceptionType:s,timeLimitExceptionType:o}=e;if(!r||!n&&!i)return!1;let l=!!(s&&s!==a.AVG.Normal),c=!!(o&&o!==a.rWm.NoAccommodation);return l&&n||c&&i}},u=n(304415),p={getFeedbackModeByOption:(e,t)=>{let n=null,i=null;if(t){let r=Object.keys(t);for(let s=0;s<r.length;s++){let o=r[s],a=t[o];if(null==a?void 0:a.options.some(t=>e.toString()===t)){n=o,(null==a?void 0:a.associatedDate)&&(i=new Date(a.associatedDate));break}}}return{mode:n,associatedDate:i}}},m=n(23938),h=n(26451),g=n(393950),f=n(210909),b=n(455217);let v=e=>{if(!e.contentDetail||!e.contentHandler)return;let t=(0,a.S9c)(e.contentHandler.toString());if(t){let n=e.contentDetail[e.contentHandler.toString()];return n.gradingColumn?n:n[t]}},y=e=>{var t,n;if(!(null==e?void 0:e.contentHandler))return[];let i=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()];return null!==(n=null==i?void 0:i.gradebookItems)&&void 0!==n?n:[]},S=(e,t)=>{let n=y(e),i=null;if(0!==n.length)return null==(i=t?n.find(e=>e.columnId===t):n.find(e=>e.root)||n[0])?void 0:i.gradingColumn};var C={getDeployedAssessment:v,getScormGradebookItems:y,getScormAssociatedGradingColumn:S,getAssociatedGradingColumn:(e,t)=>{var n;if((0,m.cM)(e))return S(e,t);if(!e.contentHandler)return;let i=null===(n=e.contentDetail)||void 0===n?void 0:n[e.contentHandler.toString()];if(!i)return;if(i.gradingColumn)return i.gradingColumn;let r=v(e);if(r)return r.gradingColumn},isGradedSurveyWithMultipleAttempts:function(e){var t;let n=l.Survey.isEqualTo(null==e?void 0:e.scoreProviderHandle),i=null!==(t=null==e?void 0:e.scorable)&&void 0!==t&&t;return(null==e?void 0:e.multipleAttempts)!==1&&n&&i}},E=n(116502),I=n(39154),w=n(558002),A=n(406392);(i=r||(r={})).AllCourseMembers="allCourseMembers",i.AllCourseInstructors="allCourseInstructors",i.AllCourseStudents="allCourseStudents",i.CourseGroup="courseGroup";let k={[r.AllCourseMembers]:"all",[r.AllCourseInstructors]:"rolebucket:TEACHING",[r.AllCourseStudents]:"rolebucket:TAKING",[r.CourseGroup]:"group"},T={all:r.AllCourseMembers,"rolebucket:TEACHING":r.AllCourseInstructors,"rolebucket:TAKING":r.AllCourseStudents,group:r.CourseGroup},P=Array.from(Object.keys(k).filter(e=>!G(e)));function D(){return k[r.AllCourseMembers]}function x(){return k[r.AllCourseInstructors]}function R(){return k[r.AllCourseStudents]}function L(e,t){var n;let i="",r="";return e&&(r=null!==(n=k[e])&&void 0!==n?n:e,i=t),{id:r,givenName:i,familyName:"",userName:void 0}}function N(e){return(null==e?void 0:e.id)===D()}function $(e){return(null==e?void 0:e.id)===x()}function O(e){return(null==e?void 0:e.id)===R()}function G(e){return e.includes(k[r.CourseGroup])||e===r.CourseGroup}var _={MultiUserKey:r,specialMembersNames:P,getAllMembersFakeUserId:D,getAllInstructorsFakeUserId:x,getAllStudentsFakeUserId:R,getSpecialFakeMemberUser:L,resolveSpecialIdStringToUser:function(e){let t=[];return e.forEach(e=>{e.localizationKeys&&t.push(L(e.localizationKeys,e.category))}),t},getAllMembersFakeUser:function(){return{id:D(),givenName:"",familyName:"",userName:void 0}},isAllMembers:N,isAllInstructors:$,isAllStudents:O,isMultiUserId:function(e){return N(e)||$(e)||O(e)},isCourseGroup:G,isSpecialMember:function(e){return Object.values(r).includes(e)},getKeyFromRecipientCategory:function(e){return T[e]},getKeyFromGroupId:function(e){return`${k[r.CourseGroup]}:${e}`},getGroupIdFromKey:function(e){return e.replace("group:","")}},M={isParticipantUser:e=>"givenName"in e,isParticipantGroup:e=>"groupSetId"in e,isParticipantGroupSet:e=>"groupCount"in e};let B=e=>!0===e.isAvailable&&!0===e.isClosed,F=e=>a.S2N.Undecided===e.ultraStatus||a.S2N.Classic===e.ultraStatus,U=e=>a.S2N.UltraPreview===e.ultraStatus,V=e=>e.permissions.export&&!U(e),H=e=>e.permissions.archive&&!U(e),q=e=>e.permissions.import,j=e=>e.permissions.copy,z=e=>e.permissions.convert;var W={isCourseComplete:B,isCourseClassic:F,isUltraPreview:U,canExportCourse:V,canArchiveCourse:H,canEditCourse:e=>e.permissions.edit,canImportCourse:q,canCopyCourse:j,canConvertCourse:z,canEditCourseBanner:e=>{let t=e.permissions.editBanner||e.permissions.editBannerVisibility;return F(e)&&(t=e.permissions.editBanner),!e.isClosed&&t}},K=n(415787),Z=n(821954),Q=n(667338),J=n(689190),Y=n(942894)},116502:function(e,t,n){"use strict";n.d(t,{PI:function(){return r},nP:function(){return s}});var i=n(5196);function r(e){return i.GQ.Journal.isEqualTo(null==e?void 0:e.contentHandler)}function s(e){var t,n;if(e&&e.contentDetail&&e.contentHandler){let i=null===(n=null==e?void 0:e.contentDetail[null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString()])||void 0===n?void 0:n.blog;return null==i?void 0:i.gradeColumnId}}t.ZP={isJournal:r,getGradingColumnId:s}},39154:function(e,t,n){"use strict";var i=n(986709),r=n(5196),s=n(667338);function o(e){return e.startsWith(i.DXv.LtiPlacement)}function a(e){var t;let n=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!n&&(r.GQ.LtiLink.isEqualTo(n)||o(n)||r.GQ.PartnerCloud.isEqualTo(n))}function l(e){var t,n;if(!r.GQ.LtiLink.isEqualTo(e.contentHandler)||!e.contentHandler)return!1;let i=null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.url;return!!(null==i?void 0:i.includes("://xplor"))}function c(e){var t,n,i;let r=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(r)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.existsPlacement}function d(e){var t,n,i;let r=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();if(r)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.launchLink}t.ZP={isLtiPlacement:o,isLtiLink:a,isXplorLtiLink:l,ltiPlacementExists:c,ltiToolProviderExists:function(e){var t,n,i;let r=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(r)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.existsLTIProvider},isGroupLaunchAllowed:function(e){var t,n,i;let r=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();return!!r&&!!(null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.allowGroupLaunch)},getLaunchLinkFromContent:d,isUnlaunchableLtiLink:function(e){let t=!!e.id&&a(e),n=l(e),i=!!d(e),r=!1===c(e);return t&&(!n&&!i||r)},getCloudDocumentType:function(e){var t,n,i;let r=null===(t=null==e?void 0:e.contentHandler)||void 0===t?void 0:t.toString();if(r)return null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.cloudDocumentType},isCloudDocument:function(e){var t,n,i;let r=null===(t=e.contentHandler)||void 0===t?void 0:t.toString();return!!r&&(null===(i=null===(n=e.contentDetail)||void 0===n?void 0:n[r])||void 0===i?void 0:i.itemOrigin)===s.f.CloudDocument},getCloudDocumentAttrsByType:function(e,t){let n=e.filter(e=>e.customParameters.typeCloudDocument===t)[0];return{showButton:!!n,...(null==n?void 0:n.id)&&{placementId:n.id}}},getGradingSchemaIdFromCourseContent:function(e){var t,n,i;return(null==e?void 0:e.contentHandler)?null===(i=null===(n=null===(t=null==e?void 0:e.contentDetail)||void 0===t?void 0:t[e.contentHandler.toString()])||void 0===n?void 0:n.gradingColumn)||void 0===i?void 0:i.gradingSchemaId:void 0},isAssociatedDeploymentApproved:function(e){var t;let n=!!e.contentDetail&&!!e.contentHandler&&(null===(t=e.contentDetail[e.contentHandler.toString()])||void 0===t?void 0:t.isDeploymentApproved);return null==n||n}}},667338:function(e,t,n){"use strict";var i,r;n.d(t,{f:function(){return i}}),(r=i||(i={})).CloudDocument="CloudDocument",r.ContentItemMessage="CIM"},304415:function(e,t,n){"use strict";n.d(t,{C8:function(){return p},O5:function(){return u},lJ:function(){return d}});var i=n(198022),r=n(986709),s=n(758219);let o=e=>void 0!==e.subType&&r.QuestionType.PresentationOnly===e.questionType,a=(e,t)=>{if(0===t)return 0;let n=Math.floor(1e4/t)/100;return e===t-1?Math.round((100-n*e)*100)/100:n},l=e=>e.filter(e=>e.correctAnswer).length;t.ZP={isPresentationOnly:o,isPageBreak:e=>r.QuestionType.PageBreak===e.questionType,isFileAttachment:e=>o(e)&&r.rn$.File===e.subType,isQuestionBlock:e=>r.QuestionType.QuestionBlock===e.questionType,calculatePartialCredit:a,createMatchingPrompt:e=>({id:s.dc+i.v4(),matchingAnswerIndex:e,promptText:{rawText:"",displayText:""},reusesAnswer:!1,partialCredit:void 0,negativeCredit:void 0}),createMatchingAnswer:(e=!1)=>({answerText:{rawText:"",displayText:""},isDistractor:e,ui:{id:i.v4()}}),createMultipleAnswerAnswer:e=>{let t={id:s.dc+i.v4(),answerText:{rawText:"",displayText:""},correctAnswer:!1};if(e&&e.allowPartialCredit){let n=l(e.answers);if(n>0){let i=a(e.answers.length,n);t.partialCredit=-1*i}}return t},countCorrectMultipleAnswerAnswers:l};let c=[r.QuestionType.PresentationOnly,r.QuestionType.QuestionBlock,r.QuestionType.PageBreak,r.QuestionType.OpinionScale],d=Object.values(r.QuestionType).filter(e=>!c.includes(e)),u=d.map(e=>e.toString()),p=e=>e.filter(e=>u.includes(e))},689190:function(e,t,n){"use strict";n.d(t,{S:function(){return s},f:function(){return r}});var i=n(986709);let r=e=>{var t;return null===(t=null==e?void 0:e.scores)||void 0===t?void 0:t.find(e=>e.scoreType===i.tdv.Originality)},s=e=>e.every(e=>{var t;let{postStatus:n,reportLink:s}=null!=e?e:{},{scoreGiven:o,status:a}=null!==(t=r(e))&&void 0!==t?t:{};return(o||0===o)&&s||a===i.yLk.Failed||a===i.yLk.NotProcessed||n===i.gdJ.PostAbandoned||n===i.gdJ.PostFailed})},942894:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});let i=e=>({id:e,givenName:"",familyName:"",ui:{anonymousStudent:!0,anonymousStudentId:null!=e?e:""}})},777339:function(e,t,n){"use strict";n.d(t,{I8:function(){return a},RZ:function(){return o},Zl:function(){return c},cU:function(){return d},fX:function(){return l}});var i=n(986709),r=n(491288),s=n(199275);let o="newContent",a=e=>(0,i.CGz)(r.nP,e);function l(e){return(0,i.bEJ)(r.nP,e)}function c(e){return(0,i.sHF)(r.nP,e)}let d=async(e,t,n)=>{let o=await (0,i.MGk)(r.nP,e,t);return new s.b(o,l,n,c).promise}},879844:function(e,t,n){"use strict";n.d(t,{Be:function(){return u},DA:function(){return c},nO:function(){return p},oH:function(){return g},s9:function(){return m},sn:function(){return d},us:function(){return h}});var i=n(554024),r=n(986709),s=n(846409),o=n(491288);let a="/v1/courses/%courseId%/assessments",l=`${a}/%assessmentId%`;async function c(e){let t=new r.O98({courseId:e.courseId}).withSession(o.nP);e.paging&&t.withPaging(e.paging),e.sort&&t.withSort(...e.sort),e.filter&&t.withQueryParams({types:e.filter.types,textSearch:e.filter.textSearch||void 0}),e.expand&&t.withExpand(e.expand);let{results:n,paging:s,permissions:a}=await (0,r.jIs)(t);return{assessmentIds:n.map(e=>e.id),byAssessmentId:(0,i.MO)(n.map(t=>({...t,courseId:e.courseId}))),paging:s,permissions:a}}async function d({courseId:e,assessmentId:t}){return{...await (0,r.pzW)(o.nP,e,t),courseId:e}}async function u({courseId:e,title:t,type:n}){return{...await (0,r.S9W)(o.nP,e,{title:t,type:n}),courseId:e}}async function p(e,{assessmentId:t,courseId:n}){return{...await (0,r.Ug8)(o.nP,n,t,e),courseId:n}}function m(e,t,n){let i=(0,s.Q2)(`${a}/%assessmentId%/checkPattern`,{courseId:e,assessmentId:t});return(0,s.v_)(i,{strPattern:n})}function h(e,t,n,i){let r=(0,s.Q2)(`${a}/%assessmentId%/checkPattern/isCorrect`,{courseId:e,assessmentId:t});return(0,s.v_)(r,{strPattern:n,answerText:i})}function g(e,t,n){let i=(0,s.Q2)(`${l}/checkpassword`,{courseId:e,assessmentId:t});return(0,s.v_)(i,{password:n})}},332011:function(e,t,n){"use strict";n.d(t,{NE:function(){return a},PZ:function(){return d},Ro:function(){return c},_F:function(){return l},jX:function(){return o}});var i=n(846409),r=n(758219);let s="/v1/calendars";async function o(e=1e3){let{results:t}=await (0,i.U2)((0,i.Q2)(s,{limit:e}));return{byId:(0,r.MO)(t)}}async function a(e,t){return await (0,i.r$)(`${s}/${e}`,{...t})}async function l(e){(0,i.Zt)();let t=await Promise.all(e.map(e=>(0,i.r$)(`${s}/${e.id}`,e)));return{byId:(0,r.MO)(t)}}function c(e,t){return(0,i.v_)(`${s}/importIcs`,{fileLocation:e,fileName:t})}function d(e=!1){return e?(0,i.v_)(`${s}/prepareExport`,{}):(0,i.U2)(`${s}/prepareExport`)}},463380:function(e,t,n){"use strict";n.d(t,{BE:function(){return G},En:function(){return P},FA:function(){return F},Ff:function(){return q},Hl:function(){return O},ID:function(){return B},JY:function(){return U},K1:function(){return R},M9:function(){return M},RF:function(){return Y},Vf:function(){return o},Wb:function(){return s},YU:function(){return L},_b:function(){return N},bb:function(){return j},dU:function(){return T},d_:function(){return A},dc:function(){return z},gU:function(){return H},rQ:function(){return Z}});var i,r,s,o,a=n(276635),l=n(715729),c=n(846409),d=n(5196),u=n(758219),p=n(986709),m=n(253275),h=n(491288),g=n(487783),f=n(116502),b=n(554024);let v="/v1/courses/%courseId%/contents",y=v+"/%contentId%",S=v+"/%contentId%/children",C=v+"/%contentId%/adaptiveReleaseRules",E=C+"/rules/%ruleId%/conditions/%criteriaId%",I=E+"/acl/users",w=E+"/acl/groups";async function A(e){(0,c.Zt)();let{courseId:t,contentId:n}=e,i=e.eagerFetchChildren?T({filter:{courseId:t,contentId:n,resolveLinks:!1,fetchDiscussionGradeColumn:!1,contentSearchMode:e.contentSearchMode,title:e.title}}):Promise.resolve({}),r=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&r.push("gradebookCategory"),e.hasProgressed&&r.push("hasProgressed");let s=(0,c.U2)((0,c.Q2)(y,{courseId:t,contentId:n,expand:r})).then(e=>z([e])),o=e.fetchAssociatedCourseLinks&&await H(e.courseId,e.contentId)?x({courseId:t,contentId:n}):Promise.resolve({}),[a,l,d]=await Promise.all([s,i,o]),u=await D(e,{...a.contents,...l.contents,...d.contents}),p={...a.contents,...l.contents,...d.contents,...u.contents},m={};return(e.fetchDiscussionGradeColumn||e.fetchJournalGradeColumn)&&(m=await k(e.courseId,p)),{contents:p,assessments:{...a.assessments,...l.assessments,...d.assessments,...u.assessments},groups:{...a.groups,...l.groups,...d.groups,...u.groups},columns:{...a.columns,...l.columns,...d.columns,...u.columns,...m},adaptiveRelease:{...a.adaptiveRelease,...l.adaptiveRelease,...d.adaptiveRelease,...u.adaptiveRelease},blogs:{...a.blogs,...l.blogs,...d.blogs,...u.blogs},paging:{...a.paging,...l.paging,...d.paging},permissions:{...a.permissions,...l.permissions,...d.permissions}}}async function k(e,t){(0,c.Zt)();let n=Object.keys(t).map(e=>t[e]).filter(e=>{var t;return e&&e.contentHandler&&(Y(e)||(0,f.PI)(e))&&(null===(t=e.genericReadOnlyData)||void 0===t?void 0:t.hasGradeColumn)}).filter(u.QN).map(t=>(0,m.Vh)({courseId:e,contentId:t.id}).then(e=>e&&e.results[0])).filter(e=>!!e);return(0,u.MO)(await Promise.all(n))}async function T({filter:e,params:t}){let n=["assignedGroups,selfEnrollmentGroups.group"];e.expandGradebookCategory&&n.push("gradebookCategory");let{courseId:i,contentId:r,contentSearchMode:s,title:o}=e,a=(0,c.C4)(null==t?void 0:t.sort),l=null==t?void 0:t.paging,d=await (0,c.U2)((0,c.Q2)(S,{courseId:i,contentId:r,expand:n,...s?{contentSearchMode:s,title:o}:{},...l,sort:a})).then(e=>W(e)),u=await D(e,{...d.contents});return{contents:{...d.contents,...u.contents},assessments:{...d.assessments,...u.assessments},groups:{...d.groups,...u.groups},columns:{...d.columns,...u.columns},adaptiveRelease:{...d.adaptiveRelease,...u.adaptiveRelease},blogs:{...d.blogs,...u.blogs},paging:{...d.paging},permissions:{...d.permissions}}}async function P({filter:e,params:t}){var n,i,r,s;let{courseId:o,groupId:a}=e;if(!a)return{contents:{},assessments:{},groups:{}};let l={paging:{limit:null!==(i=null===(n=null==t?void 0:t.paging)||void 0===n?void 0:n.limit)&&void 0!==i?i:1e3,offset:null!==(s=null===(r=null==t?void 0:t.paging)||void 0===r?void 0:r.offset)&&void 0!==s?s:0},sort:(null==t?void 0:t.sort)||[]};return W(await (0,p.OgR)(h.nP,{courseId:o,groupId:a},l))}async function D(e,t){if(!e.resolveLinks)return{contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}};(0,c.Zt)();let n=await Promise.all(Object.keys(t).map(e=>t[e]).map(e=>e&&e.contentDetail&&e.contentDetail["resource/x-bb-courselink"]&&e.contentDetail["resource/x-bb-courselink"].linkSourceId).filter(e=>"string"==typeof e).filter(e=>!t.hasOwnProperty(e)).map(t=>A({...e,contentId:t,eagerFetchChildren:!1})));return{contents:Object.assign({},...n.map(e=>e.contents)),assessments:Object.assign({},...n.map(e=>e.assessments)),groups:Object.assign({},...n.map(e=>e.groups)),columns:Object.assign({},...n.map(e=>e.columns)),adaptiveRelease:Object.assign({},...n.map(e=>e.adaptiveRelease)),blogs:Object.assign({},...n.map(e=>e.blogs))}}async function x(e){let{courseId:t,contentId:n}=e;if(!n)return{contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}};(0,c.Zt)();let i=await (0,p.SlR)(h.nP,{courseId:t,contentId:n}),r=await Promise.all(i.results.filter(e=>e.courseContent).map(t=>A({...e,contentId:t.courseContent,eagerFetchChildren:!1})));return{contents:Object.assign({},...r.map(e=>e.contents)),assessments:Object.assign({},...r.map(e=>e.assessments)),groups:Object.assign({},...r.map(e=>e.groups)),columns:Object.assign({},...r.map(e=>e.columns)),adaptiveRelease:Object.assign({},...r.map(e=>e.adaptiveRelease)),blogs:Object.assign({},...r.map(e=>e.blogs))}}async function R(e){let t=(0,c.Q2)(v,{courseId:e.courseId});return z([await (0,c.v_)(t,e)])}async function L(e,t){let n;let i=(0,c.Q2)(y,{contentId:t.id,courseId:t.courseId});if(null==e||null==e.id||0===e.id.indexOf(u.dc))n=await (0,c.gz)(i,t);else{let r=(0,c.T8)(V(e),V(t));n=a.isEmpty(r)?e:await (0,c.r$)(i,{...r,id:t.id})}return z([n])}async function N(e){(0,c.Zt)();let t={contents:{},assessments:{},groups:{},blogs:{},columns:{}};for(let n of e){let e=n.content.id;try{let e=await L(n.previousContent,n.content);a.assignWith(t,e,(e,t,n)=>{if("contents"===n){let n={};return Object.keys(t).map(e=>n[e]={isOk:!0,id:e,result:t[e]}),{...e,...n}}return{...e,...t}})}catch(n){if(e){let i={isOk:!1,id:e,error:n};t.contents[e]=i}}}return t}async function $(e,t){let n=!t||t.shouldDeleteGrades?"true":"false",i=(0,c.Q2)(y,{contentId:e.id,courseId:e.courseId,deleteGrades:n,deleteGroups:!0});return(0,c.Od)(i)}async function O(e,t){let n=[];return(0,c.Zt)(),a.forEach(e,e=>{let i=$(e,t).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));n.push(i)}),{results:(0,u.MO)(await Promise.all(n))}}async function G(e){(0,c.Zt)();let t=e.map(e=>_(e).then(t=>({isOk:!0,id:e.id,contentId:e.contentId,result:t})).catch(t=>({isOk:!1,id:e.id,contentId:e.contentId,...t})));return{results:(0,u.MO)(await Promise.all(t))}}async function _(e){return(0,c.r$)((0,c.Q2)(E,{contentId:e.contentId,courseId:e.courseId,ruleId:e.ruleId,criteriaId:e.id}),e)}function M(e){return(0,c.Od)((0,c.Q2)(E,{contentId:e.contentId,courseId:e.courseId,ruleId:e.ruleId,criteriaId:e.id}))}async function B(e){let t=[];return(0,c.Zt)(),a.forEach(e,e=>{let n=(0,c.Od)((0,c.Q2)(C,{contentId:e.id,courseId:e.courseId})).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));t.push(n)}),{results:(0,u.MO)(await Promise.all(t))}}async function F(e){let{sort:t,...n}=e,i=(0,c.Q2)(I,{...n,sort:(0,c.C4)(t)}),{paging:r,permissions:s,results:o}=await (0,c.U2)(i);return{paging:r,permissions:s,userPredicates:o}}async function U(e){let{sort:t,...n}=e,i=(0,c.Q2)(w,{...n,sort:(0,c.C4)(t)}),{paging:r,permissions:s,results:o}=await (0,c.U2)(i);return{paging:r,permissions:s,groupPredicates:o}}function V(e){return b.A.isAssessmentLink(e)?function(e){var t;let{deploymentSettings:n}=e,i=(0,l.ZP)(e,e=>{delete e.deploymentSettings});if(e.contentDetail)return i;let r={deploymentSettings:n,deployedAssessmentType:d.GQ.SurveyLink.isEqualTo(e.contentHandler)?p.Ueh.Survey:p.Ueh.Test},s={};return d.GQ.SurveyLink.isEqualTo(null===(t=e.contentHandler)||void 0===t?void 0:t.toString())?s[p.DXv.SurveyLink]={survey:r}:s[p.DXv.TestLink]={test:r},{...i,contentDetail:s}}(e):e}async function H(e,t){return e&&t?(await (0,p.cqI)(h.nP,{courseId:e,contentId:t})).result:Promise.resolve(!1)}(i=s||(s={})).FamilyName="user.familyName",i.GivenName="user.givenName",i.Username="user.userName",i.UserId="user.id",(r=o||(o={})).Title="group.title",r.GroupId="group.id";let q=(0,g.W)(p.Hn7,h.nP);async function j(e,t){return(await (0,p.kw8)(h.nP,{courseId:e,contentId:t})).result}function z(e){return{contents:(0,u.MO)(e.map(ee)),assessments:(0,u.MO)(K(e)),groups:(0,u.MO)(et(e)),columns:(0,u.MO)(Q(e)),adaptiveRelease:(0,u.MO)(J(e)),blogs:(0,u.MO)(X(e))}}function W(e){let{paging:t,permissions:n,results:i}=e,r=K(i),s=et(i),o=Q(i),l=a.map(i,e=>({...ee(e)})),c=J(i),d=X(i);return{contents:{...(0,u.MO)(l)},assessments:{...(0,u.MO)(r)},groups:{...(0,u.MO)(s)},columns:{...(0,u.MO)(o)},adaptiveRelease:{...(0,u.MO)(c)},blogs:{...(0,u.MO)(d)},paging:t,permissions:n}}function K(e){return e.filter(e=>{var t,n,i,r;return d.GQ.TestLink.isEqualTo(e.contentHandler)&&(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.TestLink.toString()])||void 0===n?void 0:n.test.assessment)||d.GQ.SurveyLink.isEqualTo(e.contentHandler)&&(null===(r=null===(i=e.contentDetail)||void 0===i?void 0:i[d.GQ.SurveyLink.toString()])||void 0===r?void 0:r.survey.assessment)}).map(e=>{var t,n,i,r;let s=d.GQ.SurveyLink.isEqualTo(e.contentHandler)?null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[p.DXv.SurveyLink])||void 0===n?void 0:n.survey:null===(r=null===(i=e.contentDetail)||void 0===i?void 0:i[p.DXv.TestLink])||void 0===r?void 0:r.test;if(s)return{...s.assessment,permissions:s.permissions,courseId:e.courseId,contentId:e.id}}).filter(e=>!!e)}function Z(e){return e===p.IQK.Survey?d.GQ.SurveyLink:d.GQ.TestLink}function Q(e){return e.reduce((e,t)=>[...e,...function(e){if(!e||!e.contentDetail)return[];let t=e.contentDetail[d.GQ.TestLink.handle];if(t&&t.test)return[t.test.gradingColumn];let n=e.contentDetail[d.GQ.SurveyLink.handle];if(n&&n.survey)return[n.survey.gradingColumn];let i=e.contentDetail[d.GQ.LtiLink.handle];if(i&&i.gradingColumn)return[i.gradingColumn];let r=e.contentDetail[d.GQ.PartnerCloud.handle];if(r&&r.gradingColumn)return r.gradingColumn.contentId=e.id,[r.gradingColumn];let s=e.contentHandler,o=s&&e.contentDetail[s.toString()];if(o&&o.gradingColumn&&s.toString().includes(d.GQ.LtiPlacement.handle))return[o.gradingColumn];let a=e.contentDetail[d.GQ.RusticiScorm.handle];return a&&a.gradebookItems&&a.gradebookItems.length>0?a.gradebookItems.map(e=>e.gradingColumn):[]}(t)],[]).filter(e=>!!e)}function J(e){return e.reduce((e,t)=>t&&t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules?[...e,...t.adaptiveReleaseRules.rules.reduce((e,n)=>{var i,r,s;let o=null===(r=null===(i=t.contentDetail)||void 0===i?void 0:i[p.DXv.CourseLink])||void 0===r?void 0:r.linkSourceId,a=null===(s=n.criteria)||void 0===s?void 0:s.map(e=>({...e,contentId:null!=o?o:t.id,courseId:t.courseId,ruleId:n.id}));return a?[...e,...a]:e},[])]:e,[])}function Y(e){return d.GQ.Discussion.isEqualTo(e.contentHandler)}function X(e){return e.filter(e=>(0,f.PI)(e)&&e.contentDetail).map(e=>{var t,n;return null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.Journal.toString()])||void 0===n?void 0:n.blog}).filter(e=>!!e)}function ee(e){var t,n,i,r,s,o,a;let l={...e,adaptiveReleaseRules:void 0};if(b.A.isAssessmentLink(e)){let c=d.GQ.SurveyLink.isEqualTo(e.contentHandler)?null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[d.GQ.SurveyLink.toString()])||void 0===n?void 0:n.survey:null===(r=null===(i=e.contentDetail)||void 0===i?void 0:i[d.GQ.TestLink.toString()])||void 0===r?void 0:r.test,u=null===(o=null===(s=null==e?void 0:e.contentDetail)||void 0===s?void 0:s[d.GQ.TestLink.toString()])||void 0===o?void 0:o.safeAssignOptions;l={...l,assessmentId:null===(a=null==c?void 0:c.assessment)||void 0===a?void 0:a.id,deploymentSettings:null==c?void 0:c.deploymentSettings,peerSettings:null==c?void 0:c.peerSettings,safeAssignOptions:u,gradingColumn:null==c?void 0:c.gradingColumn,contentDetail:void 0}}return l}function et(e){return a.flatten(a.map(e,e=>a.map(e.assignedGroups,t=>({id:t.groupId,courseId:e.courseId,contentId:e.id,title:t.groupTitle}))))}},207490:function(e,t,n){"use strict";n.d(t,{Cv:function(){return m},Ep:function(){return l},Gs:function(){return p},MG:function(){return c},Pb:function(){return d},Wm:function(){return u},ZN:function(){return r}});var i,r,s=n(846409),o=n(986709),a=n(491288);let l="me";async function c(e){let t={courseId:e.courseId,contentId:e.contentId,userId:e.userId};return{contentStates:await (0,s.r$)((0,s.Q2)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%",t),{state:e.state})}}async function d(e){let t={...e,userId:l},{results:n}=await (0,s.U2)((0,s.Q2)("/v1/courses/%courseId%/contents/%contentId%/states/%userId%?includeRelated=%includeRelated%",t));return{contentStates:n}}async function u(e){let t;let{paging:n,sort:i}=e;void 0!==e.fields&&e.fields.length>0&&(t=e.fields);let r={includeCount:!0,fields:t};e.filter&&(r.q=e.filter.searchString,r.state=e.filter.state);let s=new o.iRb({courseId:e.courseId,contentId:e.contentId}).withExpand("courseMembership.user","status").withSession(a.nP).withQueryParams(r);return n&&s.withPaging(n),i&&s.withSort(...i),await (0,o.jIs)(s)}async function p(e){let t=new o.McV({courseId:e.courseId,contentId:e.contentId}).withSession(a.nP);return await (0,o.jIs)(t)}async function m(e){var t;let{paging:n}=e,i={includeCount:!0};(null===(t=e.filter)||void 0===t?void 0:t.searchString)&&(i.q=e.filter.searchString);let r=new o.ngf({courseId:e.courseId,contentId:e.contentId,userId:e.userId}).withExpand("content","status").withSession(a.nP).withQueryParams(i);return n&&r.withPaging(n),await (0,o.jIs)(r)}(i=r||(r={})).FamilyName="courseMembership.user.familyName",i.LastStateChange="contentStatusLastStateChange"},304239:function(e,t,n){"use strict";n.d(t,{C0:function(){return s},DV:function(){return E},EL:function(){return w},G3:function(){return v},SP:function(){return S},TS:function(){return A},Y:function(){return b},a6:function(){return r},d3:function(){return y},iJ:function(){return C},zW:function(){return k}});var i,r,s,o=n(276635),a=n(846409),l=n(690260),c=n(554024),d=n(986709),u=n(491288);let p="/v1/courses/%courseId%/groups",m=`${p}/batchUpdate`,h=`${p}?limit=%limit%&expand=studentCount,memberships,permissions,signUpSheet,hasSubmittedGroupAttempt,hasGrades`,g=`${p}?limit=%limit%&expand=studentCount,permissions,groupSet,memberships,assignedContents`,f=`${p}/%groupId%?expand=memberships`;async function b(e,t){let n=(0,a.Q2)(m,{courseId:e}),i=o.map(t,e=>({method:a.yY,relativeUrl:e.id}));return(0,a.gz)(n,i)}async function v(e){let t=(0,a.Q2)("/v1/courses/%courseId%/contents/%contentId%/assignedGroups",e),n=(await (0,a.U2)(t)).results;return{contentId:e.contentId,groups:(0,c.MO)(n)}}async function y(e){let{results:t,paging:n,permissions:i}=await (0,d.OrM)(u.nP,e);return{groups:(0,c.MO)(t),groupIds:t.map(e=>e.id).filter(e=>!!e),paging:n,permissions:i}}async function S(e){let{results:t,paging:n,permissions:i}=await (0,d.XPp)(u.nP,e);return{groups:(0,c.MO)(t),groupIds:t.map(e=>e.id).filter(e=>!!e),paging:n,permissions:i}}async function C(e){try{let t=(0,a.Q2)("/public/v2/courses/%courseId%/groups/%groupId%/users/%userId%",{courseId:e.courseId,groupId:e.groupId,userId:e.userId});await (0,a.gz)(t,{})}catch(e){throw(0,l.QK)(e)}return{userId:e.userId,groupId:e.groupId}}async function E(e,t=1e3){let{results:n,paging:i,permissions:r}=await (0,a.U2)((0,a.Q2)(h,{courseId:e,limit:t}));return{groups:(0,c.MO)(n),paging:i,permissions:r}}function I(e){var t;let{courseId:n,paging:i,filter:r,sort:s}=e,o=i?{limit:null!==(t=i.limit)&&void 0!==t?t:1e3,offset:i.offset}:{limit:1e3},l=r?{...r.groupName?{name:r.groupName}:{},...r.nameOrGroupSetName?{nameOrGroupSetName:r.nameOrGroupSetName}:{},...r.groupNameCompare?{nameCompare:r.groupNameCompare}:{},...null!=r.inGroupSet?{inGroupSet:r.inGroupSet.toString()}:{},...r.setId?{setId:r.setId}:{},...null!=r.nonEmptyGroups?{nonEmptyGroups:r.nonEmptyGroups.toString()}:{},...null!=r.onlyAvailableGroups?{onlyAvailableGroups:r.onlyAvailableGroups.toString()}:{}}:{},c=s&&s.length?{sort:(0,a.C4)(s)}:{};return{...o,...l,...c,courseId:n,includeCount:"true"}}async function w(e){let t=I(e),{results:n,paging:i,permissions:r}=await (0,a.U2)((0,a.Q2)(g,t));return{groups:(0,c.MO)(n),groupIds:n.map(e=>e.id),paging:i,permissions:r}}async function A(e){var t,n;let i;let r=[],s=0;do{let o=I({...e,paging:{limit:1e3,offset:s}}),{results:l,paging:c}=await (0,a.U2)((0,a.Q2)(g,o));r=r.concat(l),i=null!==(t=null==c?void 0:c.nextPage)&&void 0!==t?t:"",s=(null!==(n=null==c?void 0:c.offset)&&void 0!==n?n:0)+1e3}while(i);let o=[];return r.forEach(e=>{e.id&&o.push(e.id)}),{groups:(0,c.MO)(r),groupIds:o}}function k(e,t){return(0,a.U2)((0,a.Q2)(f,{courseId:e,groupId:t}))}(i=r||(r={})).equals="equals",i.notEquals="notEquals",i.contains="contains",i.notContains="notContains",i.startsWith="startsWith",(s||(s={})).Title="title"},139366:function(e,t,n){"use strict";n.d(t,{AG:function(){return E},DL:function(){return i},Fh:function(){return k},K0:function(){return C},RD:function(){return S},VF:function(){return b},W$:function(){return A},W6:function(){return f},at:function(){return w},fG:function(){return v},jC:function(){return y},wI:function(){return I}});var i,r=n(846409),s=n(758219),o=n(986709);let a="/v1/courses/%courseId%/groupsets",l=`${a}?expand=studentCount,groupCount,permissions,signUpSheet,hasAssociatedContent&sort=%sort%,id(desc)&limit=%limit%&offset=%offset%`,c=`${a}?expand=groupCount&fields=groupCount&limit=%limit%`,d=`${a}/%groupSetId%`,u=`${d}?expand=permissions,signUpSheet,hasAssociatedContent`,p=`${d}/groups?sort=%sort%&limit=%limit%`,m=`${d}/groups?expand=memberships&fields=memberships,id&limit=%limit%`,h=`${a}?fields=id,title,isAvailable&limit=%limit%`,g=`${d}/groups?expand=studentCount&fields=id,studentCount&limit=%limit%`,f=1e3;async function b(e,t=1e3){let{results:n,paging:i,permissions:o}=await (0,r.U2)((0,r.Q2)(h,{courseId:e,limit:t}));return{groupSets:(0,s.MO)(n),paging:i,permissions:o}}async function v(e){let t=function(e){var t;let{courseId:n,paging:i,filter:r}=e,s=i?{limit:null!==(t=i.limit)&&void 0!==t?t:1e3,offset:0}:{limit:1e3,offset:0},a=r?{...r.name?{name:r.name}:{},...r.nameCompare?{nameCompare:r.nameCompare}:{},...null!=r.nonEmptyGroupSets?{nonEmptyGroupSets:r.nonEmptyGroupSets.toString()}:{},...null!=r.onlyAvailableGroupSets?{onlyAvailableGroupSets:r.onlyAvailableGroupSets.toString()}:{}}:{};return{sort:o.$qS.TITLE_ASC,...s,...a,courseId:n,includeCount:"true"}}(e),{results:n,paging:i,permissions:a}=await (0,r.U2)((0,r.Q2)(l,t));return{groupSets:{byId:(0,s.MO)(n)},paging:i,permissions:a}}async function y(e,t={}){let{sort:n=o.$qS.TITLE_ASC,limit:i=f,offset:a=0}=t,{results:c,paging:d,permissions:u}=await (0,r.U2)((0,r.Q2)(l,{courseId:e,sort:n,limit:i,offset:a}));return{groupSets:{byId:(0,s.MO)(c)},paging:d,permissions:u}}async function S(e,t){return{groupSet:await (0,r.U2)((0,r.Q2)(u,{courseId:e,groupSetId:t}))}}async function C(e,t,n={}){let{sort:i=o.$qS.MODIFIED_DATE_DESC,limit:a=1e3,expand:l="studentCount,permissions"}=n||{},{results:c,paging:d,permissions:u}=await (0,r.U2)((0,r.Q2)(p,{courseId:e,groupSetId:t,sort:i,limit:a,expand:l}));return{groups:(0,s.MO)(c),paging:d,permissions:u}}async function E(e,t,n="permissions"){return t.id?await (0,r.r$)((0,r.Q2)(`${d}?expand=%expand%`,{courseId:e,groupSetId:t.id,expand:n}),t):await (0,r.v_)((0,r.Q2)(`${a}?expand=%expand%`,{courseId:e,expand:n}),t)}(i||(i={})).Title="title";let I=(e,t)=>(0,r.Od)((0,r.Q2)(d,{courseId:e,groupSetId:t}));async function w(e,t=1e3){let{results:n,paging:i,permissions:s}=await (0,r.U2)((0,r.Q2)(c,{courseId:e,limit:t}));return{results:n,paging:i,permissions:s}}async function A(e,t,n=1e3){let{results:i,paging:o,permissions:a}=await (0,r.U2)((0,r.Q2)(m,{courseId:e,groupSetId:t,limit:n}));return{memberships:(0,s.MO)(i),paging:o,permissions:a}}async function k(e,t,n=1e3){let{results:i}=await (0,r.U2)((0,r.Q2)(g,{courseId:e,groupSetId:t,limit:n}));return{groups:(0,s.MO)(i)}}},843730:function(e,t,n){"use strict";n.d(t,{$z:function(){return P},D8:function(){return S},Dv:function(){return C},FS:function(){return L},Gq:function(){return _},HD:function(){return A},JC:function(){return M},Kw:function(){return D},Nv:function(){return v},RA:function(){return m},Rc:function(){return f},Ss:function(){return R},UR:function(){return I},Vq:function(){return x},ZJ:function(){return h},bP:function(){return T},bT:function(){return G},ch:function(){return N},iL:function(){return w},j$:function(){return $},jQ:function(){return b},o5:function(){return O},qD:function(){return u},tG:function(){return k},ub:function(){return E},zJ:function(){return g}});var i,r,s=n(491288),o=n(758219),a=n(986709);(i||(i={})).PotentialGraders="potentialGraders",(r||(r={})).DefaultReconciler="defaultReconciler";let l=/[()]/;function c(e){return!e||""===e||"true"===e.toLowerCase()}let d=/\/v1\/users\/(_\d+_\d+)\/memberships/;function u(e){let t=(d.exec(e)||[])[1];return t?{userId:t}:null}let p=/\/v1\/courses\/(_\d+_\d+)\/memberships/;function m(e){let t=(p.exec(e)||[])[1];if(!t)return null;let n={courseId:t},i={},r={};return new URL(e,"https://foo.bar").searchParams.forEach((e,t)=>{switch(t){case"excludePreviewUser":i.excludePreviewUser=c(e);break;case"hasDueDateExceptionOnly":i.hasDueDateExceptionOnly=c(e);break;case"hasTimeLimitExceptionOnly":i.hasTimeLimitExceptionOnly=c(e);break;case"includeMe":i.includeMe=c(e);break;case"membershipAvailable":i.membershipAvailable=c(e);break;case"roleBucket":i.roleBucket=e.split(",").map(e=>e.toUpperCase());break;case"groupId":i.groupId=e.split(",");break;case"membershipId":i.membershipId=e.split(",");break;case"childCourseId":i.childCourseId=e.split(",");break;case"limit":r.limit=parseInt(e,10);break;case"offset":r.offset=parseInt(e,10);break;case"sort":n.sort=function(e){let t=[];return e.split(",").forEach(e=>{let n=e.split(l);t.push({field:n[0],direction:n[1]})}),t}(e);break;case"isExcludedFromCourseUserActivity":i.isExcludedFromCourseUserActivity=c(e);break;case"expand":case"includeCount":case"fields":break;case"filterMessageParticipants":i.filterMessageParticipants=c(e);break;default:console.warn(`unhandeled query parameter ${t}`)}}),Object.keys(i).length>0&&(n.filter=i),"limit"in r&&(n.paging={limit:r.limit,offset:r.offset}),n}async function h(e,t,n=!0){let i=["courseRole"];n&&i.push("user");let r=new a.FNw({courseId:e,membershipId:t}).withSession(s.nP).withExpand(...i);return(0,a.jIs)(r)}async function g(e,t){return(0,a.g7B)(s.nP,e,t)}function f(e,t){let{results:n,paging:i}=e,r=n.map(e=>e.user).filter(e=>!!e),s=n.map(e=>e.course).filter(e=>!!e),a=n.map(e=>{let{user:t,...n}=e;return{...n}}),l=n.map(e=>e.id);return{users:(null==r?void 0:r.length)?(0,o.MO)(r):void 0,courses:(null==s?void 0:s.length)?(0,o.MO)(s):void 0,byMembershipId:(0,o.MO)(a),membershipIds:l,paging:i,userId:t.userId}}function b(e,t){let{results:n,paging:i,permissions:r}=e,s=n.map(e=>e.user).filter(e=>!!e),a=n.map(e=>{let{user:n,...i}=e;return{...i,courseId:t.courseId}}),l=n.map(e=>e.id);return{users:(null==s?void 0:s.length)?(0,o.MO)(s):void 0,byCourseMembershipId:(0,o.MO)(a),membershipIds:l,paging:i,permissions:r,courseId:t.courseId}}function v(e,t){let n=[];return e.forEach(e=>{e.results.forEach(e=>{(null==e?void 0:e.userId)&&n.push(e.userId)})}),{byCourseMembershipId:{},membershipIds:[],paging:void 0,permissions:void 0,users:{},courseId:t.courseId,userIds:n}}function y(e,t){var n,i,r,s,o,a,l;let{paging:c,sort:d}=e,u=e.filter,p=e.filter,m=e.filter,h=e.filter;c&&t.withPaging("offsetId"in c?{offsetId:c.offsetId,limit:c.limit}:{offset:c.offset,limit:c.limit});let g=null!==(n=null==u?void 0:u.groupId)&&void 0!==n?n:[],f=null!==(i=null==u?void 0:u.membershipId)&&void 0!==i?i:[],b=null!==(r=null==u?void 0:u.childCourseId)&&void 0!==r?r:[],v=null!==(s=null==u?void 0:u.roleBucket)&&void 0!==s?s:[],y=[null===(o=null==h?void 0:h.studentStatusFilter)||void 0===o?void 0:o.toString(),null===(a=null==h?void 0:h.gradingStatusFilter)||void 0===a?void 0:a.toString(),null===(l=null==h?void 0:h.delegatedGradingFilter)||void 0===l?void 0:l.toString()].filter(e=>!!e),S={hasDueDateExceptionOnly:null==u?void 0:u.hasDueDateExceptionOnly,hasTimeLimitExceptionOnly:null==u?void 0:u.hasTimeLimitExceptionOnly,excludePreviewUser:null==u?void 0:u.excludePreviewUser,groupId:g.length>0?g.join(","):void 0,membershipId:f.length>0?f.join(","):void 0,childCourseId:b.length>0?b.join(","):void 0,classicSearchCompare:(null==p?void 0:p.searchField)&&(null==p?void 0:p.searchComparison)?p.searchComparison:void 0,classicSearchField:(null==p?void 0:p.searchField)?p.searchField:void 0,classicSearchText:(null==p?void 0:p.searchField)&&(null==p?void 0:p.searchString)?p.searchString:void 0,includeCount:!0,includeMe:null==u?void 0:u.includeMe,membershipAvailable:null==u?void 0:u.membershipAvailable,roleBucket:v.length>0?v.join(","):void 0,filterMessageParticipants:null==u?void 0:u.filterMessageParticipants,q:!(null==p?void 0:p.searchField)&&(null==p?void 0:p.searchString)?p.searchString:void 0,columnId:e.columnId,fields:null==m?void 0:m.fields,filter:y.length>0?y.toString():void 0};t.withQueryParams(S),d&&t.withSort(...d)}async function S(e){let t=new a.R37({courseId:e.courseId}).withSession(s.nP).withExpand("user","courseRole");return y(e,t),b(await (0,a.jIs)(t),e)}function C(e){let t=new a.R37({courseId:e.courseId}).withSession(s.nP);return y(e,t),(0,a.jIs)(t)}let E=[{field:a.PJt.IsPreviewStudent,direction:a.SrV.Ascending},{field:a.PJt.FamilyName,direction:a.SrV.Ascending},{field:a.PJt.GivenName,direction:a.SrV.Ascending}],I=[{field:a.PJt.FamilyName,direction:a.SrV.Ascending},{field:a.PJt.GivenName,direction:a.SrV.Ascending},{field:a.PJt.Username,direction:a.SrV.Ascending}],w=[{field:a.PJt.FamilyName,direction:a.SrV.Descending},{field:a.PJt.GivenName,direction:a.SrV.Descending},{field:a.PJt.Username,direction:a.SrV.Descending}],A=[{field:a.PJt.GivenName,direction:a.SrV.Ascending},{field:a.PJt.FamilyName,direction:a.SrV.Ascending},{field:a.PJt.Username,direction:a.SrV.Ascending}],k=[{field:a.PJt.GivenName,direction:a.SrV.Descending},{field:a.PJt.FamilyName,direction:a.SrV.Descending},{field:a.PJt.Username,direction:a.SrV.Descending}],T=[{field:a.PJt.SubmissionStatus,direction:a.SrV.Ascending},...E],P=[{field:a.PJt.SubmissionStatus,direction:a.SrV.Descending},...E],D=[{field:a.PJt.GradingStatus,direction:a.SrV.Ascending},...E],x=[{field:a.PJt.GradingStatus,direction:a.SrV.Descending},...E],R=[{field:a.PJt.Grade,direction:a.SrV.Ascending},...E],L=[{field:a.PJt.Grade,direction:a.SrV.Descending},...E],N=[{field:a.PJt.Post,direction:a.SrV.Ascending},...E],$=[{field:a.PJt.Post,direction:a.SrV.Descending},...E],O=[{field:a.PJt.Feedback,direction:a.SrV.Ascending},...E],G=[{field:a.PJt.Feedback,direction:a.SrV.Descending},...E],_=[{field:a.PJt.NeedsGrading,direction:a.SrV.Ascending},...E],M=[{field:a.PJt.NeedsGrading,direction:a.SrV.Descending},...E]},253275:function(e,t,n){"use strict";n.d(t,{$J:function(){return N},AV:function(){return k},HA:function(){return I},Mq:function(){return P},PQ:function(){return s},QI:function(){return R},Rc:function(){return T},Vh:function(){return A},XS:function(){return L},YM:function(){return w},gI:function(){return C},lt:function(){return D},mo:function(){return x},zg:function(){return o}});var i,r,s,o,a=n(276635),l=n(846409),c=n(758219),d=n(986709),u=n(491288),p=n(487783);let m="/v1/courses/%courseId%/gradebook/columns",h=`${m}?expand=gradebookCategory`,g=`${m}/%columnId%`,f=`${g}?expand=gradebookCategory,associatedRubrics`,b=`${g}?expand=externalGrade,gradebookCategory,columnSummary`,v=`${m}?contentId=%contentId%`,y=`${g}/reconcileRemainingAttempts`,S=`${g}/postReadyGrades`;async function C(e,t,n){let i=(0,l.Q2)(f,{courseId:e,columnId:t});return(0,l.U2)(i,n)}(i=s||(s={})).HIGHEST="HIGHEST",i.LOWEST="LOWEST",i.AVERAGE="AVERAGE",(r=o||(o={})).ColumnName="columnName",r.DueDate="dueDate";let E="fetchColumns";async function I(e,t){(0,l.Zt)(E);let n=[];for(let i of t)n.push(C(e,i,{batchKey:E}));return{gradebookColumns:(0,c.MO)(await Promise.all(n))}}async function w(e){let{results:t}=await (0,l.U2)((0,l.Q2)(m,{courseId:e}));return{gradebookColumns:(0,c.MO)(t)}}function A(e){let{courseId:t,contentId:n}=e,i=(0,l.Q2)(v,{courseId:t,contentId:n});return(0,l.U2)(i)}let k=(0,p.W)(d.k2e,u.nP);async function T(e,t,n={}){let i=(0,l.Q2)(f,{courseId:t.courseId,columnId:t.id,...n}),r=(0,l.T8)(e,t);return a.isEmpty(r)?e:(0,l.r$)(i,r)}async function P(e,t){(0,l.Zt)();let n=e.map(e=>T(e.prevColumn,e.nextColumn,t).then(e=>({isOk:!0,id:null==e?void 0:e.id,result:e}),t=>{var n;return{isOk:!1,id:null===(n=e.prevColumn)||void 0===n?void 0:n.id,error:t,previous:e.prevColumn}}));return{columns:(0,c.MO)(await Promise.all(n))}}function D(e,t,n){let i=(0,l.Q2)(y,{courseId:e,columnId:t});return(0,l.v_)(i,{reconciliationMode:n})}async function x(e,t,n=!1){return{postedCount:await (0,l.v_)((0,l.Q2)(S,{courseId:e,columnId:t,allStudents:n}),{}),columnId:t}}function R(e,t){let n=(0,l.Q2)(b,{courseId:e,columnId:t});return(0,l.r$)(n,{rubricAssociations:[]})}function L(e,t){let n=(0,l.Q2)(g,{courseId:e,columnId:t,onlyIfEmpty:"false"});return(0,l.Od)(n)}async function N(e){let t=function(e){let{courseId:t,paging:n,sort:i,filter:r}=e,s=n?{limit:n.limit,offset:n.offset}:{},o=i&&i.length?{sort:(0,l.C4)(i)}:{};return{...s,...o,...r,courseId:t}}(e);return(0,l.U2)((0,l.Q2)(h,t))}},739982:function(e,t,n){"use strict";n.d(t,{$_:function(){return S},Bg:function(){return p},Fe:function(){return b},GI:function(){return y},Q5:function(){return v},RX:function(){return m},VH:function(){return g},mE:function(){return f},nT:function(){return h},nq:function(){return u}});var i=n(846409),r=n(276635),s=n(986709),o=n(655470),a=n(491288);let l="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades",c=`${l}/%gradeId%/postReadyGrades`,d=`${l}/%gradeId%`;function u(e){return"gradeIds"in e}async function p(e){var t,n;let{paging:i,sort:r,columnId:l,courseId:c,filter:d}=e,u=(0,o.J)(d)?d:void 0,p=(0,o.W)(d)?d:void 0,m=[null===(t=null==p?void 0:p.gradingStatusFilter)||void 0===t?void 0:t.toString(),null===(n=null==p?void 0:p.delegatedGradingFilter)||void 0===n?void 0:n.toString()].filter(e=>!!e),h=new s.fmY({courseId:c,columnId:l}).withSession(a.nP);i&&h.withPaging("offsetId"in i?{offsetId:i.offsetId,limit:i.limit}:{offset:i.offset,limit:i.limit}),r&&h.withSort(...r),h.withQueryParams({userId:null==u?void 0:u.userId,includeUnpostedGrade:null==u?void 0:u.includeUnpostedGrade,filter:m.length>0?m.toString():void 0});let{paging:g,permissions:f,results:b}=await (0,s.jIs)(h);return{grades:b,paging:g,permissions:f}}async function m(e){let{columnId:t,courseId:n,gradeId:i}=e,r=new s.ohw({courseId:n,columnId:t,gradeId:i}).withSession(a.nP);return{grade:await (0,s.jIs)(r)}}async function h(e,t,{queryParams:n={},...r}){var s;let o=null===(s=n.expand)||void 0===s?void 0:s.join(),a=n.includeInProgress,{permissions:l,bulkViewUsers:c}=await (0,i.v_)((0,i.Q2)("/v1/courses/%courseId%/gradebook/grades/bulkView",{courseId:e,expand:o,includeInProgress:a}),{columnIds:t,...r}),d=[];return c.forEach(e=>{d.push(...e.grades.map(e=>{var t;let n=null===(t=e.attempts)||void 0===t?void 0:t.find(t=>(null==t?void 0:t.attemptDate)&&new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime()),i=e.lastAttemptDate;return{...e.grade,lastAttemptId:null==n?void 0:n.id,lastAttemptDate:i}}))}),{grades:d,permissions:l}}async function g(e){let{columnId:t,courseId:n,id:r}=e;return await (0,i.v_)((0,i.Q2)(c,{columnId:t,courseId:n,gradeId:r}),{})}async function f(e){let{courseId:t,columnId:n,userId:r}=e;return{grade:await (0,i.v_)((0,i.Q2)(l,{clearCommentsIfRevertOverrides:"false",courseId:t,columnId:n,userId:r}),e)}}async function b(e){var t;let n=await (0,s.FeW)(a.nP,e);return{isExempt:null!==(t=null==n?void 0:n.isExempt)&&void 0!==t&&t}}async function v(e){let{courseId:t,columnId:n,userId:i,isExempt:r}=e,o=await (0,s.Q5g)(a.nP,{courseId:t,columnId:n,userId:i},{isExempt:r});return{...e,isExempt:!!(null==o?void 0:o.isExempt)}}async function y(e,t){let{courseId:n,columnId:s,id:o}=t,a=(0,i.T8)(e,t);if((0,r.isEmpty)(a))return{grade:e};let l=(0,i.Q2)(d,{clearCommentsIfRevertOverrides:"false",includeUnpostedGrade:"true",courseId:n,columnId:s,gradeId:o});return{grade:await (0,i.r$)(l,a)}}async function S(e,t){return await (0,s.$_n)(a.nP,{courseId:e,columnId:t})}},846409:function(e,t,n){"use strict";let i;n.d(t,{C4:function(){return P},HT:function(){return c},M5:function(){return N},Od:function(){return C},Q0:function(){return d},Q2:function(){return T},SV:function(){return L},T8:function(){return k},U2:function(){return b},Y$:function(){return D},YU:function(){return w},Zt:function(){return f},a4:function(){return u},gz:function(){return v},mg:function(){return R},r$:function(){return S},uI:function(){return x},v_:function(){return y},yY:function(){return l}});var r=n(276635),s=n(491288),o=n(758219),a=n(99035);let l="DELETE",c="GET",d="PATCH",u="POST",p=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3})?Z$/,m={},h="defaultBatch";async function g(e){if(!m[e])return;let t=m[e];if(delete m[e],!t.operations.length)return;let n=t.operations.map((e,t)=>({method:e.method,body:e.body,relativeUrl:T(e.relativeUrl,{"bbds-xb":t})}));try{(await v("/v1/utilities/batch",n,{noBatch:!0,method:"PUT"})).forEach(e=>{let n=e.relativeUrl.match(/bbds-xb=(\d+)/);if(!n||n.length<2)throw Error("Did not find correlation ID in response URL");let i=+n[1],r=t.operations[i];if(!r)throw Error("Did not find operation specified by response");let{statusCode:s,body:o}=e,a=new Headers;Object.keys(e.headers).forEach(t=>{a.append(t,e.headers[t][0])}),new Response(o,{status:s,headers:a}).ok?r.resolve(o):r.reject({error:{...o,url:e.relativeUrl}})})}catch(e){t.operations.forEach(t=>{t.reject(e)})}}function f(e=h){m[e]||(m[e]={operations:[],immediateId:setTimeout(()=>g(e),0)})}function b(e,t,n){return I(c,e,null,t,n)}function v(e,t,n,i){return I("PUT",e,t,n,i)}function y(e,t,n,i){return I(u,e,t,n,i)}function S(e,t,n,i){return I(d,e,t,n,i)}function C(e,t,n){return I(l,e,null,t,n)}function E(e){let t=r.cloneDeep(e);return delete t.api,delete t.ui,t.id&&t.id.includes(o.dc)&&delete t.id,t}function I(e,t,n,i,o){let l=i&&i.batchKey||h;if(m[l]&&(!i||!i.noBatch)){let r={method:e,...i};return n&&(r.body=E(n)),new Promise((e,n)=>{m[l].operations.push({method:r&&r.method||c,relativeUrl:t,body:r&&r.body,resolve:e,reject:n})})}return function(e,t,n,i,o=!0){let l=s.vc.apiBasePath+t;l=x(l);let c={credentials:"same-origin",method:e},d={"X-Blackboard-XSRF":s.vc.xsrf};(null==i?void 0:i.suppressTimestampUpdate)&&(d["Suppress-Session-Timestamp-Update"]="true",delete i.suppressTimestampUpdate);let u=null;return n&&(n instanceof FormData?u=n:(d["Content-Type"]="application/json;charset=UTF-8",u=JSON.stringify(E(n)))),c.headers=d,u&&(c.body=u),r.merge(c,i),new Promise((e,n)=>{fetch(l,c).then(t=>(a.gQ.logResponse(t),t.ok)?!1!==o?e(204===t.status?null:A(t)):e(t):t.json().then(e=>{n({error:{...e,url:t.url}})}),e=>{var i;n(e),a.gQ.logResponse({ts:Date.now(),status:-1,path:s.vc.apiBasePath+t,host:R(),response:null!==(i=null==e?void 0:e.toString())&&void 0!==i?i:"(unknown)"})})})}(e,t,n,i,o)}function w(e){return"string"==typeof e&&p.test(e)?new Date(e):e}async function A(e){return JSON.parse(await e.text(),(e,t)=>w(t))}function k(e,t){return r.transform(t,function(t,n,i){r.isEqual(n,e[i])||(t[i]=n)})}function T(e,t){return Object.keys(t).sort().forEach(n=>{let i=t[n];if(r.isArray(i)&&(i=i.join(",")),e.indexOf(`%${n}%`)>0)e=e.replace("%"+n+"%",i);else if(r.isNumber(i)||r.isBoolean(i)||!r.isEmpty(i)){let t=0>e.indexOf("?")?"?":"&";e+=`${t}${n}=${encodeURIComponent(i)}`}}),e}function P(e){return e?e.map(e=>`${e.field}(${e.direction})`).join(","):""}function D(){return x(s.vc.apiBasePath)}function x(e,t){return e&&0>e.indexOf("://")&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:R()+e),e}function R(){return i||void 0===globalThis.location||(i=L(globalThis.location.href)),i}function L(e){let t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function N(e){return e.startsWith("https://")}},493107:function(e,t,n){"use strict";n.d(t,{VfA:function(){return A.Vf},Wb7:function(){return A.Wb},PQc:function(){return O.PQ},oVk:function(){return ec.oV},a6B:function(){return x.a6},DL$:function(){return B.DL},C0f:function(){return x.C0},yY6:function(){return y.yY},tiF:function(){return $.ti},HTE:function(){return y.HT},W6_:function(){return B.W6},zg8:function(){return O.zg},ZNX:function(){return T.ZN},$Gc:function(){return ec.$G},eQC:function(){return ec.eQ},FSJ:function(){return ec.FS},t9O:function(){return ec.t9},ubP:function(){return D.ub},o5e:function(){return D.o5},bTV:function(){return D.bT},HDV:function(){return D.HD},tG9:function(){return D.tG},SsS:function(){return D.Ss},FSD:function(){return D.FS},Kwj:function(){return D.Kw},VqL:function(){return D.Vq},URo:function(){return D.UR},iLJ:function(){return D.iL},Gq1:function(){return D.Gq},JCs:function(){return D.JC},ch$:function(){return D.ch},j$z:function(){return D.j$},bP:function(){return D.bP},$zP:function(){return D.$z},RoV:function(){return ec.Ro},LJ1:function(){return ec.LJ},Q0L:function(){return y.Q0},a4B:function(){return y.a4},qvt:function(){return R.q},api:function(){return q},C4U:function(){return y.C4},Q2d:function(){return y.Q2},bbE:function(){return A.bb},gUR:function(){return A.gU},oHG:function(){return v.oH},s9I:function(){return v.s9},us4:function(){return v.us},uIm:function(){return y.uI},_v9:function(){return ec._v},Vbk:function(){return F.Vb},CBS:function(){return ec.CB},GNH:function(){return F.GN},YUt:function(){return y.YU},iBu:function(){return H},_Ae:function(){return j},JYP:function(){return A.JY},FAX:function(){return A.FA},cUf:function(){return a.cU},WFQ:function(){return d},EPI:function(){return u},$t6:function(){return R.$},TS8:function(){return x.TS},Nfh:function(){return b.Nf},tHn:function(){return b.tH},Qqg:function(){return w.Q},Q6z:function(){return w.g},uHV:function(){return P.uH},IqD:function(){return k.I},V$w:function(){return er},$dN:function(){return el.$d},_pd:function(){return el._p},jC5:function(){return B.jC},G3z:function(){return x.G3},KFz:function(){return ei},iyb:function(){return z.i},ks9:function(){return el.ks},OH6:function(){return et},RC3:function(){return ee},VFg:function(){return B.VF},Fix:function(){return ey},Hgv:function(){return m},PZi:function(){return E.PZ},kyU:function(){return g.k},LrM:function(){return c},DgF:function(){return h},xne:function(){return f},EUc:function(){return p},OEz:function(){return es},Y$o:function(){return y.Y$},uZ9:function(){return I.uZ},Tj0:function(){return I.Tj},nMx:function(){return I.nM},rQK:function(){return A.rQ},oek:function(){return s},pzE:function(){return o.p},Uc6:function(){return ec.Uc},_pB:function(){return W},Ffc:function(){return A.Ff},jdu:function(){return eS.j},Roc:function(){return E.Ro},nqI:function(){return G.nq},M5E:function(){return y.M5},Csr:function(){return K},hQS:function(){return eC.hQ},KIW:function(){return em},azG:function(){return eu},RAR:function(){return D.RA},dep:function(){return ec.de},qDZ:function(){return D.qD},OuV:function(){return ep},XEK:function(){return el.XE},PR8:function(){return ec.PR},fBj:function(){return ev},ltB:function(){return O.lt},I5k:function(){return _},GjL:function(){return S},vWI:function(){return M.vW},FaB:function(){return L},siz:function(){return M.si},GTb:function(){return M.GT},i7$:function(){return M.i7},L36:function(){return eC.L3},f6z:function(){return C},$_n:function(){return G.$_},W8C:function(){return I.W8},mTj:function(){return ed.m},Hfm:function(){return P.Hf},yLp:function(){return F.yL},$wA:function(){return b.$w},OmG:function(){return N.O}}),n(630705);var i=n(986709),r=n(491288);let s=(0,n(487783).W)(i.tq_,r.nP);var o=n(26483),a=n(777339),l=n(199275);let c=async(e,t,n,s)=>{let o=await (0,i.KVV)(r.nP,e,t,n);return new l.b(o,a.fX,s).promise},d=async(e,t,n)=>{let s=await (0,i.RTV)(r.nP,e,t);return new l.b(s,a.fX,n,a.Zl).promise},u=async(e,t,n,s)=>{let o=await (0,i.yak)(r.nP,e,t,n);return new l.b(o,a.fX,s,a.Zl).promise},p=async(e,t,n,s)=>{let o=await (0,i.Wbz)(r.nP,e,t,n);return new l.b(o,a.fX,s,a.Zl).promise},m=async(e,t,n,s)=>{let o=await (0,i.KVJ)(r.nP,e,t,n);return new l.b(o,a.fX,s).promise},h=async(e,t,n,s)=>{let o=null!=t?t:a.RZ,c=await (0,i.Q$J)(r.nP,e,o,n);return new l.b(c,a.fX,s).promise};var g=n(680049);let f=async(e,t,n,s)=>{let o=null!=t?t:a.RZ,c=await (0,i.HvS)(r.nP,e,o,n);return new l.b(c,a.fX,s).promise};var b=n(877802),v=n(879844),y=n(846409);async function S(e){let t=(0,y.Q2)("/v1/courses/%course%/gradebook/columns/%column%/export",{course:e.course,column:e.column});return(0,y.v_)(t,e.studentIds,void 0,!1)}function C(e){return(0,i.pDv)(r.nP,e)}n(348231),n(972519);var E=n(332011),I=n(384257),w=n(822907),A=n(463380);n(227982);var k=n(804542),T=n(207490),P=n(438929);n(939737),n(989399);var D=n(843730),x=n(304239);n(768033),n(25439);var R=n(341535);async function L(e,t,n){return(0,i.ZKY)(r.nP,e,t,n)}n(994036),n(553387),n(305641),n(830288);var N=n(624859),$=n(334538);n(765371),n(150713),n(413952);var O=n(253275),G=n(739982);n(201600);let _=async(e,t)=>(0,i.w9)(r.nP,{courseId:e},t);var M=n(742165),B=n(139366),F=n(916225);n(425750);var U=n(690260);let V="evaluateMathML";async function H(e,t,n,i){try{return await (0,y.v_)((0,y.Q2)("/v1/courses/%courseId%/mathEditor/v3/evaluateMathML",{courseId:e}),{mathML:t,variables:n,ident:i},{batchKey:V})}catch(e){throw(0,U.WE)(e,i)}}async function q(e,t){(0,y.Zt)(V);let n=t.map(({mathML:t,variables:n,ident:i})=>H(e,t,n,i));return(await Promise.allSettled(n)).map(e=>"rejected"===e.status?e.reason:e.value)}async function j(e){let t=await (0,y.U2)((0,y.Q2)("/public/v1/oauth2/tokeninfo",{access_token:e}));return{userId:t.user_id,applicationId:t.application_id,scope:t.scope}}var z=n(325570);function W(){return(0,i.w64)(r.nP)}async function K(e){return(0,N.O)({fileType:"audio",fileName:"audio_file",file:e})}var Z=n(554024);let Q="/v1/courses/%courseId%/questionAnalysis",J=Q+"/assessments/%assessmentId%",Y=Q+"/assessments/%assessmentId%",X=Q+"/%analysisId%/prepareDownload";function ee(e,t){let n={courseId:e,...t};return(0,y.U2)((0,y.Q2)(Q,n)).then(t=>{var n;let i=[],r=[];for(let s of t.results)null!=s.analysisReportDetails&&r.push(eo(s,e)),null!=s.questionDetailsList&&i.push(...null!==(n=ea(s))&&void 0!==n?n:[]);return{reports:(0,Z.MO)(r),questionDetails:(0,Z.MO)(i)}})}function et(e,t,n){return(0,y.U2)((0,y.Q2)(Y,{courseId:e,assessmentId:t}),n).then(t=>{if(null==t.analysisReportDetails)return null;let n=eo(t,e),i=null!=t.questionDetailsList?ea(t):[];return{reports:(0,Z.MO)([n]),questionDetails:(0,Z.MO)(null!=i?i:[])}})}let en="fetchMultipleReports";async function ei(e,t){(0,y.Zt)(en);let n=[];for(let i of t)n.push(et(e,i,{batchKey:en}));return(await Promise.all(n)).reduce((e,t)=>null!=t?{reports:{...e.reports,...t.reports},questionDetails:{...e.questionDetails,...t.questionDetails}}:e,{reports:{},questionDetails:{}})}let er=(e,t)=>(0,y.v_)((0,y.Q2)(X,{courseId:e,analysisId:t}),{});async function es(e,t){let n=await (0,y.v_)((0,y.Q2)(J,{courseId:e,assessmentId:t}),{});return{report:{id:n.analysisId,assessmentId:t,analysisReportDetails:n,courseId:e}}}function eo(e,t){var n,i;return{analysisReportDetails:e.analysisReportDetails,assessmentId:null===(n=e.analysisReportDetails)||void 0===n?void 0:n.assessmentId,courseId:t,id:null===(i=e.analysisReportDetails)||void 0===i?void 0:i.analysisId,summaryStatsDetails:e.summaryStatsDetails}}function ea(e){var t;return null===(t=e.questionDetailsList)||void 0===t?void 0:t.map(e=>({...e,id:e.questionId}))}var el=n(642768),ec=n(474755);n(424851),n(900860);var ed=n(258032);let eu=()=>(0,i.ziu)(r.nP,{forceLogout:!1}),ep=()=>(0,i.A8I)(r.nP),em=()=>(0,i.ziu)(r.nP,{forceLogout:!0});var eh=n(619034),eg=n.n(eh),ef=n(780687);let eb=/bbcswebdav/;async function ev(e="<body></body>",t,n={}){let i=new FormData,r=(0,ef.T$)((0,ef.qC)(e)),s=new Blob([r],{type:"text/html"});return i.append("file",s,t||`UNSAFE_HTML_${eg()().utc().format("YYYYMMDDHHmmss")}.html`),(0,y.v_)((0,y.Q2)("/v1/files?expand=mimeType",n),i)}async function ey(e){let t;if(!((0,y.SV)(e)===(0,y.mg)()&&eb.test(e)))throw Error(`Unsafe HTML URL ${e} is invalid.`);try{t=await fetch(e,{credentials:"include",method:"GET"})}catch(t){throw Error(`Failed to get unsafe HTML at ${e} with error: ${t}`)}if(t.status!==i.oji.Ok)throw Error(`Failed to get unsafe HTML at ${e} with status ${t.status}.`);return(0,ef.X6)(await t.text())}var eS=n(299380);n(347229),n(147781),n(277313),n(4281);var eC=n(815006);n(789061),n(801674),n(114174),n(108380),n(581072)},474755:function(e,t,n){"use strict";n.d(t,{$G:function(){return C},CB:function(){return U},DF:function(){return _},EX:function(){return j},FS:function(){return y},HC:function(){return k},Hy:function(){return T},Km:function(){return N},LJ:function(){return I},PR:function(){return D},Ri:function(){return O},Ro:function(){return E},Uc:function(){return F},_v:function(){return M},ad:function(){return P},de:function(){return q},eQ:function(){return S},jG:function(){return R},jh:function(){return G},oV:function(){return b},qE:function(){return x},t9:function(){return v}});var i=n(276635),r=n(198022),s=n(846409),o=n(758219),a=n(986709),l=n(304415),c=n(491288);let d="/v1/courses/%courseId%/assessments/%assessmentId%/questions",u=d+"/%questionId%",p="sourceInfo,usageCount",m=d+"/%questionBlockId%/questions",h=m+"/%questionId%",g=`${d}/copy`,f=`${g}/queued`,b=1,v=1,y=2,S=100,C=10,E=2,I={scale:3,scaleBeginsAt:"",scaleEndsAt:"",showNotApplicable:!1};async function w(e,t){let{paging:n,permissions:i,results:r}=await (0,a.jIs)(e);return{paging:n,permissions:i,questions:(0,o.MO)(r.map(e=>({...e,assessmentId:t.assessmentId,courseId:t.courseId}))),results:r}}async function A(e,t){if(t.paging&&e.withPaging(t.paging),t.filter){let n={},{assessmentIds:i,categoryIds:r,excludeAssessmentIds:s,keywords:o,questionTypes:a}=t.filter;i&&i.length>0&&(n.assessmentIds=i),r&&r.length>0&&(n.categoryIds=r),s&&s.length>0&&(n.excludeAssessmentIds=s),o&&o.length>0&&(n.q=F(o)),a&&a.length>0&&(n.questionTypes=a),Object.keys(n).length>0&&e.withQueryParams(n)}let{paging:n,permissions:i,results:r}=await (0,a.jIs)(e);return{paging:n,permissions:i,questions:(0,o.MO)(r.map(e=>({...e.question,assessmentId:e.assessmentId,courseId:t.courseId}))),results:r}}async function k(e){let t;let n={};return e.useSearch?(t=new a.wGc({courseId:e.courseId}).withExpand("question.alignedGoals","question.usageCount").withSession(c.nP),await A(t,e).then(e=>n={...e})):e.assessmentId&&(t=new a.Z7d({assessmentId:e.assessmentId,courseId:e.courseId}).withSession(c.nP),await w(t,e).then(e=>n={...e})),{paging:n.paging,permissions:n.permissions,questionIds:Object.keys(n.questions),questions:n.questions}}async function T({assessmentId:e,courseId:t,questionId:n}){return{...await (0,a.oIX)(c.nP,e,t,n),assessmentId:e,courseId:t}}function P(e){let t=(0,s.Q2)(m,{...e,expand:p,sort:"id(ASC)"});return(0,s.U2)(t).then(t=>{let{results:n,paging:i,permissions:r}=t;return{questions:function(e,t,n){let i=e.map(e=>H(e,t,void 0));return(0,o.MO)(i)}(n,e.courseId),paging:i,permissions:r,questionBlockId:e.questionBlockId}})}async function D(e,t,n){let r=(0,s.Q2)(u,{...n,questionId:t.id});if(null==e||null==e.id||0===e.id.indexOf(o.dc))return r=(0,s.Q2)(d,n),delete t.position,await (0,s.v_)(r,t);let a=(0,s.T8)(e,t);return i.isEmpty(a)?e:await (0,s.r$)(r,{...a,id:t.id,questionType:t.questionType})}async function x(e,t){let n=[];return(0,s.Zt)(),e.forEach(e=>{let i=(function(e,t){let n=(0,s.Q2)(h,{...t,questionId:e,expand:p});return(0,s.gz)(n,{}).then(e=>H(e,t.courseId))})(e,t).then(t=>({isOk:!0,id:e,result:t})).catch(t=>({isOk:!1,id:e,error:{status:t.status}}));n.push(i)}),{results:await Promise.all(n),questionBlockId:t.questionBlockId}}function R(e,t,n,r){let o=(0,s.Q2)(m,{courseId:e,assessmentId:t,questionBlockId:n,expand:p});return(0,s.v_)(o,function(e,t){let n=L(null==t?void 0:t.searchCriteria,e);return{...!i.isEmpty(t.questionIds)&&{questionIds:t.questionIds},...!i.isEmpty(t.excludeIds)&&{excludeIds:t.excludeIds},...null!=t.selectAll&&{selectAll:t.selectAll},searchCriteria:n}}(t,r))}function L(e,t){let n=!e||i.isEmpty(e.questionTypes);return{...e,excludeAssessmentIds:[t],...n?{questionTypes:l.O5}:{}}}async function N(e,t){var n;let i=(0,s.Q2)(u,{...t,questionId:e.id});return(null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.indexOf(o.dc))===0?e:(0,s.Od)(i)}let $=async(e,t)=>N(e,t).then(()=>({isOk:!0,id:e.id})).catch(t=>({isOk:!1,id:e.id,...t}));async function O(e,t){(0,s.Zt)();let n=e.map(async e=>await $(e,t));return{results:(0,o.MO)(await Promise.all(n))}}async function G(e,t){let n=(0,s.Q2)(h,{...t,questionId:e.id});return(0,s.Od)(n)}function _(e){let t=(0,s.Q2)(g,{courseId:e.courseId,assessmentId:e.assessmentId});return(0,s.v_)(t,B(e))}function M(e){let t=(0,s.Q2)(f,{courseId:e.courseId,assessmentId:e.assessmentId});return(0,s.v_)(t,B(e))}function B(e){return{questionSelectionDetails:{...!i.isEmpty(e.questionIds)&&{questionIds:e.questionIds},...!i.isEmpty(e.excludeIds)&&{excludeIds:e.excludeIds},...null!=e.selectAll&&{selectAll:e.selectAll},...e.searchCriteria&&{searchCriteria:[{field:"assessmentIds",value:e.searchCriteria.assessmentIds},{field:"excludeAssessmentIds",value:e.searchCriteria.excludeAssessmentIds},{field:"questionTypes",value:e.searchCriteria.questionTypes},{field:"categoryIds",value:e.searchCriteria.categoryIds},...e.searchCriteria.keywords?[{field:"q",value:F(e.searchCriteria.keywords)}]:[]].reduce((e,{field:t,value:n})=>i.isEmpty(n)?e:{...e,[t]:n},{})}},positionAfter:e.positionAfter,usePointsFromSource:!0,defaultPointValue:10}}let F=e=>e.map(e=>`"${e}"`).join(" OR ");function U(e,t,n,i,r,s){let o={courseId:t};switch(i){case a.QuestionType.Either:o={...o,...{...V(e,r,n,i),answer:r!==a.IQK.Survey||null,answerType:a.eWt.TrueFalse},...s,isAutoGraded:!0};break;case a.QuestionType.Essay:o={...o,...V(e,r,n,i),...s,isAutoGraded:!1};break;case a.QuestionType.FIMB:o={...o,...{...V(e,r,n,i),answers:[],setPointsOnAnswers:!1},...s,isAutoGraded:!0};break;case a.QuestionType.Matching:o={...o,...function(e,t,n,i){let r=V(e,t,n,i),{answers:s,prompts:o}=function(){let e=[l.ZP.createMatchingAnswer(),l.ZP.createMatchingAnswer(),l.ZP.createMatchingAnswer()];return{prompts:[{...l.ZP.createMatchingPrompt(0),partialCredit:l.ZP.calculatePartialCredit(0,3)},{...l.ZP.createMatchingPrompt(1),partialCredit:l.ZP.calculatePartialCredit(1,3)},{...l.ZP.createMatchingPrompt(2),partialCredit:l.ZP.calculatePartialCredit(2,3)}],answers:e}}();return{...r,answers:s,numberType:a.$eE.LetterUpper,prompts:o,showAnswersInRandomOrder:!0}}(e,r,n,i),...s,allowPartialCredit:!0,allowNegativeScoreForIncorrectAnswers:!0,allowNegativeOverallScore:!1,isAutoGraded:!0};break;case a.QuestionType.Multiple:o={...o,...function(e,t,n,i){let r=V(e,t,n,i),s=[l.ZP.createMultipleAnswerAnswer(),l.ZP.createMultipleAnswerAnswer(),l.ZP.createMultipleAnswerAnswer()];return{...r,answers:s,answersCount:s.length,singleCorrectAnswer:!0}}(e,r,n,i),...s,isAutoGraded:!0};break;case a.QuestionType.PresentationOnly:o={...o,...V(e,r,n,i,0),...s,isAutoGraded:!0};break;case a.QuestionType.CalculatedFormula:o={...o,...{...V(e,r,n,i),answerFormula:"",answerScale:0,correctAnswerFormat:a.CalculatedFormulaAnswerFormatType.Normal,correctAnswerTolerance:{type:a.cJw.Numeric,value:0},correctAnswerPrecision:a.CalculatedFormulaAnswerPrecisionType.Decimal,displayFormulaToStudent:!1,displayRoundingSettingsToStudent:!1,mathMLImageAltText:"",mathMLImageURL:"",partialCreditPointsPercent:0,partialCreditTolerance:{type:a.cJw.Numeric,value:0},units:{unitPointsPercent:0,unitsCaseSensitive:!1,unitsRequired:!1,unitValue:""},variableDefinitions:[],variableSets:[],variableSetCount:10},allowPartialCredit:!1,isAutoGraded:!0};break;case a.QuestionType.CalculatedNumeric:o={...o,...{...V(e,r,n,i),answerValue:0,toleranceValue:0},isAutoGraded:!0};break;case a.QuestionType.Hotspot:o={...V(e,r,n,i),...s};break;case a.QuestionType.QuestionBlock:o={...o,...function(e,t,n,i,r){let s=V(e,t,n,i),o=r&&r.questionIds?r.questionIds:void 0,a=r&&r.questionCount,l=r&&r.selectAll,c=r&&r.searchCriteria,d=r&&r.excludeIds?r.excludeIds:void 0;return{...s,numOfAvailableQuestions:a,numOfQuestionsToChoose:a,pointsPerQuestion:10,questionSelectionDetails:{questionIds:o,selectAll:l,searchCriteria:L(c,e),excludeIds:d}}}(e,r,n,i,s)};break;case a.QuestionType.PageBreak:o={...o,...V(e,r,n,i),...s,questionText:{rawText:"pageBreak"}};break;case a.QuestionType.OpinionScale:o={...o,...{...V(e,r,n,i),opinionScale:I},...s,isAutoGraded:!0};break;default:throw Error(`Unsupported questionType: ${i}`)}return Promise.resolve(o)}function V(e,t,n,i,s=10){let l={id:o.dc+r.v4(),assessmentId:e,questionType:i,position:1,positionAfter:n,api:{isUpdating:!1,isDeleting:!1}};return i!==a.QuestionType.QuestionBlock?{...l,correctResponseFeedback:{rawText:""},incorrectResponseFeedback:{rawText:""},points:t===a.IQK.Survey?0:s,questionText:{rawText:""}}:l}function H(e,t,n){var i;return e.assessmentId=n||(null===(i=e.sourceInfo)||void 0===i?void 0:i.id),e.courseId=t,e}async function q(e,t){let n=(0,s.Q2)(`${d}/parseFIBQuestion`,t);return(0,s.v_)(n,{questionText:e})}async function j(e){let{fileDir:t,overridePointValue:n,positionAfter:i,courseId:r,assessmentId:s}=e;if(!t.fileLocation||!t.fileName)throw Error("File upload data is corrupted or has no values.");let o=new a.Hsj({courseId:r,assessmentId:s}).withBody({overridePointValue:n,positionAfter:i}).withQueryParams({fileName:t.fileName,fileLocation:t.fileLocation}).withSession(c.nP);return(0,a.jIs)(o)}},245706:function(e,t,n){"use strict";n.d(t,{J:function(){return b}});var i=n(202784),r=n(817426),s=n(144958),o=n(847969),a=n(906277),l=n(410628),c=n(745257),d=n(675689),u=n(259197),p=n(592493),m=n(563060),h=n(789598),g=n(619139);let f=[s.N6],b=e=>{var t,n,b,v,y,S;let C="lti.launchFrame",[E,I]=(0,i.useState)(!1),w=null!==(t=e.iframeHeight)&&void 0!==t?t:window.innerHeight,[A,k]=(0,i.useState)(!0),[T,P]=(0,i.useState)(0),D=(0,i.useRef)(null),x=(0,c.y)(),R=(0,l.q)(),[L,N]=(0,g.f)((0,r.uI)(e.url)),$=(0,p.pJ)(e=>u.Ys.app.getRoute(e).params),O=$.courseId,G=null!==(n=$.contentId)&&void 0!==n?n:"",_=(0,p.r0)(O,G),M=!E||A?x.loadingIframeContainer:"",B=null!==(v=null===(b=null==_?void 0:_.permissions)||void 0===b?void 0:b.edit)&&void 0!==v&&v,F=!!(null===(y=null==_?void 0:_.selfEnrollmentGroups)||void 0===y?void 0:y.some(({group:e})=>!!(null==e?void 0:e.isSelfEnrolledAllowed))),U=_&&F&&!B&&!(null===(S=null==_?void 0:_.assignedGroups)||void 0===S?void 0:S.length),V=(0,i.useCallback)(()=>{P(e=>e+1),k(!0)},[k,P]),H=(0,i.useCallback)(e=>{N("group_id",e)},[N]),q=(0,i.useCallback)(()=>{m.Nd.goPeekState((0,m.YO)({courseId:O,contentId:G}))},[O,G]);return(0,i.useEffect)(()=>{V()},[L,V]),i.createElement("div",null,E&&_&&(e.showAssignToGroups||e.showRefreshFrameButton)&&i.createElement("section",{className:x.ltiBanner},e.showAssignToGroups&&i.createElement(h.H,{courseId:O,content:_,url:L,analyticsId:C,isInstructor:B,handleEditGroups:e.assignToGroups,handleUpdateUrlIFrame:H,showGroupMembers:e.showGroupMembers}),e.showRefreshFrameButton&&i.createElement(o.AnalyticsPrimaryButton,{className:x.refreshButton,disabled:A,onClick:V,endIcon:i.createElement(d.Refresh,null),analyticsId:`${C}.refreshButton`},R(!E||A?"global.loading":"lti.launchFrame.refreshLabel"))),U?i.createElement(o.AnalyticsTypography,{align:"center",className:x.needsToEnrollParagraph},R("cloudDocument.groups.mustJoinGroupBeforeOpenContent"),i.createElement(o.AnalyticsLink,{className:"group-enroll-link",analyticsId:`${C}.link.groupEnroll`,href:"#",onClick:q},R("cloudDocument.groups.mustJoinGroupBeforeOpenContentLink"))):i.createElement("div",{style:{height:`${w}px`},className:(0,a.Z)(x.modalContent,{[x.isLoading]:!E})},(!E||A)&&i.createElement("div",null,i.createElement(o.AnalyticsCircularProgress,{id:"lti.launchFrame.loading",label:R("lti.launchFrame.loading"),ariaLabel:"lti.launchFrame.loading",size:"small"}),i.createElement("div",{className:"sr-only",role:"status","aria-live":"polite"},R("lti.launchFrame.loading"))),i.createElement("iframe",{ref:D,onLoad:()=>{var t,n,i,s;I(!0),k(!1);try{let o=null===(n=null===(t=D.current)||void 0===t?void 0:t.contentWindow)||void 0===n?void 0:n.location;if(f.some(e=>{var t;return e.test(null!==(t=null==o?void 0:o.pathname)&&void 0!==t?t:"")})){let t=(0,r.hi)(null!==(i=null==o?void 0:o.href)&&void 0!==i?i:"");null===(s=null==e?void 0:e.onLtiReturned)||void 0===s||s.call(e,t)}}catch(e){}},key:T,id:"lti-launch-iframe",name:"lti-launch-iframe",allow:s.sq,src:L,title:e.iframeTitle,style:{height:`${w}px`},className:(0,a.Z)(e.className,x.iframeContainer,M)})))}},745257:function(e,t,n){"use strict";n.d(t,{y:function(){return r}});var i=n(327355);let r=(0,i.makeStyles)(e=>(0,i.createStyles)({modalContent:{textAlign:"center",alignItems:"center",justifyContent:"center",display:"flex"},isLoading:{display:"inline-flex",width:"100%",alignItems:"center",justifyContent:"center"},iframeContainer:{display:"block",margin:"0 16px",[e.breakpoints.up("md")]:{margin:"0 20px"}},ltiBanner:{display:"flex",alignItems:"center",padding:"8px 24px",gap:"24px",borderBottom:`1px solid ${e.palette.border.main}`,minHeight:"86px"},ltiGroupsBanner:{display:"flex",flex:1,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},refreshButton:{marginLeft:"auto"},bannerActions:{display:"flex",gap:"12px"},loadingIframeContainer:{display:"none"},needsToEnrollParagraph:{paddingTop:"32px"},documentName:{fontSize:"1rem",fontWeight:e.typography.fontWeightSemiBold,lineHeight:"1.5"},groupSelector:{minWidth:"208px"}}))},789598:function(e,t,n){"use strict";n.d(t,{H:function(){return p}});var i=n(202784),r=n.n(i),s=n(410628),o=n(847969),a=n(592493),l=n(745257),c=n(327355),d=n(675689),u=n(341898);let p=e=>{var t;let n=(0,l.y)(),p=(0,s.q)(),{content:m,analyticsId:h,isInstructor:g,handleUpdateUrlIFrame:f,url:b,courseId:v}=e,y=null==m?void 0:m.assignedGroups,S=!!y&&y.length>0,C=(0,a.ye)("feature.content.cloudDocument.groups"),E=y&&y.length?y[0].groupId:"",[I,w]=(0,i.useState)(E),A=(null==y?void 0:y.length)===0&&m.isGroupContent?p("cloudDocument.groups.groupsNumber.plural",{number:y.length}):p("cloudDocument.parentDocument"),k="";(null==m?void 0:m.isGroupContent)&&!k&&S&&(k=S&&(null===(t=y[0].group)||void 0===t?void 0:t.title)||"");let T=(0,u.M)(v,I),P=!!(null==T?void 0:T.memberships)&&T.memberships.length>0;(0,i.useEffect)(()=>{S?w(y[0].groupId):w("")},[null==m?void 0:m.assignedGroups,y,S]),(0,i.useEffect)(()=>{f(I)},[f,I]);let D=!g&&!!(null==T?void 0:T.signUpSheet)&&!T.signUpSheet.isShowGroupMembers;return r().createElement("div",{className:n.ltiGroupsBanner},S&&g?r().createElement(o.AnalyticsTextField,{id:"lti.launchFrame.groups",className:n.groupSelector,analyticsId:`${h}.groups`,select:!0,value:I,onChange:e=>{w(e.target.value)},label:p("cloudDocument.documentSelector")},y.map(e=>r().createElement(c.MenuItem,{button:!0,key:e.groupId,value:e.groupId},e.groupTitle))):r().createElement(r().Fragment,null,g?r().createElement(o.AnalyticsTypography,{component:"span",className:n.documentName},A):r().createElement(o.AnalyticsTypography,{component:"span",className:n.documentName},k)),!(null==m?void 0:m.isGroupContent)&&g&&C&&!S&&r().createElement(o.AnalyticsIconButton,{onClick:()=>e.handleEditGroups(),analyticsId:`${h}.addToGroups`},r().createElement(d.Add,null),r().createElement(o.AnalyticsTypography,{component:"span",variant:"inherit"},p("cloudDocument.groups.assignToGroups"))),S&&P&&!D&&r().createElement(o.AnalyticsLink,{"aria-label":p("cloudDocument.groups.showMembersForGroup",{groupName:k}),analyticsId:`${h}.link.showMembers`,href:"#",onClick:()=>{e.showGroupMembers(I)},className:"show-group-members"},p("cloudDocument.groups.showMembers")))}},436103:function(e,t,n){"use strict";n.d(t,{R:function(){return b}});var i=n(202784),r=n.n(i),s=n(410628),o=n(158550),a=n(11897),l=n(847969),c=n(608555),d=n(592493),u=n(927335),p=n(675689),m=n(906277),h=n(563060),g=n(259197),f=n(776013);let b=(0,o.withAnalytics)(e=>{var t,n,b,v;let{analyticsId:y,analyticsEventAugmentor:S,courseId:C,addGoals:E,alignedGoalsCount:I,showGoals:w,contentId:A,onClose:k,allowConversations:T,assignToGroups:P,showAssignToGroups:D,groupContentStarted:x}=e,R=(0,a.y)(),L=(0,s.q)(),N=(0,d.Lx)(),$="CloudDocumentAllowClassConversations",O=(0,d.Tn)(C),G=(0,d.r0)(C,A),[_,M]=(0,i.useState)(T),[B,F]=(0,i.useState)(null==G?void 0:G.description),[U,V]=(0,i.useState)(null!=G&&!!G.assignedGroups&&(null==G?void 0:G.assignedGroups.length)>0),[H,q]=(0,i.useState)(!1),[j,z]=(0,i.useState)(!1),W=(0,d.gH)("cloudDocument","organization"),K=(0,i.useCallback)(e=>{M(e.currentTarget.checked)},[]),Z=(0,i.useCallback)(e=>{F(e.currentTarget.value)},[]),Q=S(o.AnalyticsEventTypes.CHANGE_EVENT,Z,`${y}.description`),J=(0,i.useCallback)(()=>{if(G){let e={...G,description:B};N(g.Nwg.content.persistContent(G,e)).then(e=>{k(e.contents[A],_,!1)})}},[G,B,_,k]),Y=(0,i.useCallback)(e=>{q(!1),e&&G&&N(g.Nwg.group.deleteByContentId(A)).then(()=>{k({...G,assignedGroups:[],isGroupContent:!1},_,!0),V(!1)})},[_,G,A,N,k]),X=(0,i.useCallback)(()=>{h.Nd.leavePeekState()},[]);r().useEffect(()=>{z(!!B&&(null==B?void 0:B.length)>750)},[B]);let ee={analyticsId:`${y}.header`,title:L("cloudDocument.settings"),smallHeaderTitle:null!==(t=null==O?void 0:O.name)&&void 0!==t?t:"",type:c.BbPanelType.peek,hideNavMenu:!1,navMenuAriaLabel:L("global.navigationMenu")},et={primaryButtonProps:{text:L("cloudDocument.footer.save"),id:"cloud-document-next-button",disabled:j,onClick:J},secondaryButtonProps:{text:L("cloudDocument.footer.cancel"),id:"cloud-document-cancel-button",onClick:X}},en=(0,i.useRef)(null);(0,i.useLayoutEffect)(()=>{if(en.current){let e=en.current.querySelector("h1.ms-Panel-headerText");e&&(e.tabIndex=0)}},[]);let ei=(0,d.ye)("feature.content.cloudDocument.groups"),er=(null==G?void 0:G.isGroupContent)&&(null==G?void 0:G.assignedGroups)&&(null===(n=null==G?void 0:G.assignedGroups)||void 0===n?void 0:n.length)===0;return r().createElement("div",null,r().createElement("div",{className:R.containerPeekPanel},r().createElement("div",{ref:en,className:R.header},r().createElement(c.BbPanelHeader,{...ee})),r().createElement("div",{className:R.containerBody},r().createElement("section",null,r().createElement(l.AnalyticsFormControlLabel,{analyticsId:`${y}.allowClassConversations`,label:r().createElement(l.AnalyticsTypography,null,L("cloudDocument.detailsAndInfoSection.conversationChoice")),htmlFor:$,control:r().createElement(l.AnalyticsCheckbox,{id:$,analyticsId:`${y}.checkAllowClassConversation`,checked:_,inputProps:{"aria-checked":_?"true":"false","aria-describedby":"conversationChoiceDescription"},onChange:K})}),r().createElement(l.AnalyticsTypography,{id:"conversationChoiceDescription",className:R.description},L(W("cloudDocument.detailsAndInfoSection.conversationChoiceDescription")))),r().createElement("section",null,r().createElement("h2",{className:R.additionalTools},L("cloudDocument.additionalTools")),r().createElement("div",{className:R.additionalToolsItemContainer},r().createElement("div",{className:R.additionalToolIcon},r().createElement(u.Goal,null)),r().createElement("div",{className:R.additionalToolTextContainer},r().createElement("span",{className:R.additionalToolText},L("cloudDocument.goals.goalsAndStandards")),void 0!==I&&r().createElement("span",null,0===I?r().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.addGoals`,href:"#",onClick:E,className:R.additionalToolLink},L("cloudDocument.goals.alignWithGoals")):r().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.showGoals`,href:"#",onClick:w,className:R.additionalToolLink},L("cloudDocument.goals.alignedGoals.plural",{number:I})))))),ei&&D&&r().createElement("section",{className:R.groupsSection},r().createElement("div",{className:(0,m.Z)(U?R.additionalToolsItemContainerTrashCanIcon:"")},r().createElement("div",{className:R.additionalToolsItemContainer},r().createElement("div",{className:R.additionalToolIcon},r().createElement(u.Groups,null)),r().createElement("div",{className:R.additionalToolTextContainer},r().createElement("span",{className:R.additionalToolText},L("cloudDocument.groups.assignedGroups")),r().createElement("span",null,(null===(b=null==G?void 0:G.assignedGroups)||void 0===b?void 0:b.length)&&(null===(v=null==G?void 0:G.assignedGroups)||void 0===v?void 0:v.length)>0||er&&(null==G?void 0:G.assignedGroups)?r().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.showGroups`,href:"#",onClick:P,className:R.additionalToolLink},L("cloudDocument.groups.groupsNumber.plural",{number:G.assignedGroups.length})):r().createElement(l.AnalyticsLink,{analyticsId:`${y}.link.assignToGroups`,href:"#",onClick:P,className:R.additionalToolLink},L("cloudDocument.groups.assignToGroups"))),x&&r().createElement(l.AnalyticsTypography,{className:R.groupsSectionHint},L(W("cloudDocument.groups.unassignGroupHint"))))),U&&r().createElement("div",{className:"styles.unassignGroupButton"},r().createElement(l.AnalyticsIconButton,{disabled:x,"aria-label":L("cloudDocument.groups.unassignButtonAriaLabel"),analyticsId:`${y}.button.unassignGroups`,onClick:()=>q(!0)},r().createElement(p.Trash,null)),H&&r().createElement(f.U,{titleText:"cloudDocument.groups.unassignGroupsModal.title",contentText:W("cloudDocument.groups.unassignGroupsModal.content"),analyticsId:`${y}.unassignGroups`,rootId:"cloudDocument.settings.unassignGroups",confirmationText:"cloudDocument.groups.unassignGroupsModal.confirmation",exitCallback:Y})))),r().createElement("section",null,r().createElement(l.AnalyticsTextField,{classes:{root:R.descriptionBox},analyticsId:`${y}.description`,id:"cloud-document-description",label:L("cloudDocument.descriptionLabel"),placeholder:L("cloudDocument.placeholderDescription"),multiline:!0,fullWidth:!0,rows:4,value:B,onChange:Q,error:j,helperText:L("cloudDocument.descriptionMaxCharactersLabel")})))),r().createElement("div",{className:R.footer},r().createElement(c.BbPanelFooter,{analyticsId:`${y}.footer`,...et})))})},351124:function(e,t,n){"use strict";n.d(t,{P:function(){return l}});var i=n(847969),r=n(311822),s=n(202784),o=n.n(s),a=n(410628);let l=({email:e,exitCallback:t})=>{let n=!!e,l=(0,a.q)(),[c,d]=(0,s.useState)(!0),u=()=>{d(!1)};return o().createElement(r._X,{analyticsId:"course.content.ltiNeedsApproval",className:"react-container",open:c,onClose:u,TransitionProps:{onExited:()=>{t(),d(!0)}}},o().createElement(i.AnalyticsDialogTitle,{analyticsId:"lti.modal.needs-approval.title"},l("course.content.ltiNeedsApprovalTitle")),o().createElement(i.AnalyticsDialogContent,{analyticsId:"lti.modal.needs-approval.content"},n?o().createElement(o().Fragment,null,o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.description"},l("course.content.ltiNeedsApprovalDescription")),o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.email"},o().createElement(i.AnalyticsLink,{href:`mailto:${e}`,analyticsId:"components.services.lti.needsApproval.email.link"},e))):o().createElement(i.AnalyticsDialogContentText,{analyticsId:"lti.modal.needs-approval.content.no-email"},l("course.content.ltiNeedsApprovalDescriptionNoEmail"))),o().createElement(i.AnalyticsDialogActions,{analyticsId:"lti.modal.needs-approval.actions"},o().createElement(i.AnalyticsPrimaryButton,{analyticsId:"global.ok",onClick:u},l("global.ok"))))}},341898:function(e,t,n){"use strict";n.d(t,{M:function(){return o}});var i=n(259197),r=n(202784),s=n(592493);function o(e,t){let n=(0,s.Lx)(),o=(0,s.pJ)(e=>i.Ys.group.getGroupsLoadingStatus(e)),a=(0,s.pJ)(e=>i.Ys.group.getGroupByGroupId(e,t));return(0,r.useEffect)(()=>{""===t||(null==a?void 0:a.memberships)||o!==i.Sey.HasNotStarted||n(i.Nwg.group.loadGroupById(e,t))},[e,t,n,null==a?void 0:a.memberships,o]),a}},619139:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(202784);let r=e=>{let[t,n]=i.useState(e);return[t,(0,i.useCallback)((e,t)=>{n(n=>{let i=new URL(n);return t?i.searchParams.set(e,t):i.searchParams.delete(e),i.toString()})},[n])]}},144958:function(e,t,n){"use strict";n.d(t,{Ic:function(){return r.Ic},J6:function(){return l.J},Mo:function(){return r.Mo},N6:function(){return r.N6},P7:function(){return o.P},PH:function(){return a.P},Qk:function(){return r.Qk},RZ:function(){return c.R},Rl:function(){return r.Rl},SM:function(){return i.S},Xl:function(){return i.X},iW:function(){return s.iW},ku:function(){return s.ku},sq:function(){return r.sq}});var i=n(64347),r=n(417206),s=n(71744),o=n(569555),a=n(351124),l=n(245706),c=n(436103)},64347:function(e,t,n){"use strict";n.d(t,{S:function(){return r},X:function(){return i}});let i="launch_attempt",r="assessment"},71744:function(e,t,n){"use strict";n.d(t,{iW:function(){return s},ku:function(){return o}});var i=n(563060),r=n(144958);let s="ultra_return_loc";class o{static getLTILaunchReturnLocation(e){switch(e){case r.Xl:return new a;case r.SM:return new l;default:throw Error("No valid return locations found")}}}class a{getRouteName(){return i.eJ.ASSESSMENT_ATTEMPT_IMS_PROCTORING}getRouteParams(e){let{content_id:t,course_id:n,returnToProctoringToolOnEndAssessment:i,password:r}=e;return{courseId:n,contentId:t,returnToProctoringToolOnEndAssessment:i,password:r}}}class l{getRouteName(){return i.eJ.ASSESSMENT_OVERVIEW}getRouteParams(e){return{contentId:e.content_id}}}},417206:function(e,t,n){"use strict";n.d(t,{Ic:function(){return a},Mo:function(){return d},N6:function(){return o},Qk:function(){return l},Rl:function(){return c},sq:function(){return s}});var i=n(259197),r=n(150885);let s="geolocation *; microphone *; display-capture *; camera *; midi *; encrypted-media *; fullscreen *; clipboard-read *; clipboard-write *;",o=/^\/webapps\/blackboard\/execute\/blti\/launchReturn/;function a(e){let{bbFileData:t,courseId:n,contentId:s,handle:o}=e,a="string"==typeof t?JSON.parse((0,r.fixDoubleQuotesInJSONValues)(t)):t,l={courseId:n,parentContentId:s,linkType:i.GQk.parse(a.linkType),linkRefId:a.linkRefId,handle:o};return a.deploymentId&&(l.deploymentId=a.deploymentId),i.GQk.LtiLink.isEqualTo(a.linkType)&&(l.url=a.url,l.launchInNewWindow=a.launchInNewWindow,a.customParameters&&(l.customParameters=JSON.stringify(a.customParameters))),i.GQk.LtiLink.isEqualTo(a.linkType)&&("IFRAME"===a.target||"embedded-app"===a.bbtype)&&(l.renderAsEmbed=!0),(i.GQk.LtiPlacement.isEqualTo(a.linkType)||i.GQk.LtiLink.isEqualTo(a.linkType))&&a.linkRefUuid&&(l.linkRefUuid=a.linkRefUuid),l}function l({contentDetail:e,contentHandler:t,launchInNewWindow:n}){var r,s,o;let a;if(!t)return null;let l=null===(r=null==e?void 0:e[t.toString()])||void 0===r?void 0:r.launchLink;if(!l)return null;let c=null;return i.GQk.LtiPlacement.startsWith(t)?c=null===(s=null==e?void 0:e[t.toString()])||void 0===s?void 0:s.placement.url:i.GQk.LtiLink.isEqualTo(t)&&(c=null===(o=null==e?void 0:e[t.toString()])||void 0===o?void 0:o.url),c&&(0,i.M5E)(c)?a=null!=n&&n:(a=!0,l=(0,i.Q2d)(l,{target_override:"window"})),{link:l,launchNewWindow:a}}function c(e){if(!e)return null;let t=e.split("-")[0];return t.includes(":")?t.split(":")[1]:t}function d(e){return i.GQk.PartnerCloud.isEqualTo(e.linkType)?function({courseId:e,linkRefId:t}){let n=c(t),r=`/launch/content?provider_id=${encodeURIComponent(null!=n?n:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}&link_ref_id=${encodeURIComponent(null!=t?t:"null")}`;return(0,i.uIm)(i.vc.partnerCloudBasePath+r)}(e):i.GQk.LtiLink.isEqualTo(e.linkType)?function({linkRefId:e,linkRefUuid:t,launchInNewWindow:n,courseId:r,url:s,customParameters:o,parentContentId:a,deploymentId:l}){let c=`/webapps/blackboard/execute/blti/launchLink?cim_placement_id=${encodeURIComponent(null!=e?e:"null")}&course_id=${encodeURIComponent(null!=r?r:"null")}&url=${encodeURIComponent(null!=s?s:"null")}`;l&&(c=`${c}&deploymentId=${encodeURIComponent(l)}`);let d=null;o&&(d={custom_parameters:o}),a&&(d={...d,parent_id:a}),d&&(c=(0,i.Q2d)(c,d));let u=(0,i.uIm)(c);return t&&(u=(0,i.Q2d)(u,{blti_placement_uuid:t})),!n&&s&&(0,i.M5E)(s)||(u=(0,i.Q2d)(u,{target_override:"window"})),u}(e):i.GQk.LtiPlacement.isEqualTo(e.linkType)?(null==e?void 0:e.handle)?function({handle:e,courseId:t,customParameters:n}){let r=(0,i.Q2d)("/webapps/blackboard/execute/blti/launchPlacement",{handle:e,course_id:t,custom_parameters:n});return(0,i.uIm)(r)}(e):function({courseId:e,linkRefId:t,parentContentId:n,linkRefUuid:r,deploymentId:s}){let o=`/webapps/blackboard/execute/blti/launchPlacement?blti_placement_id=${encodeURIComponent(null!=t?t:"null")}&course_id=${encodeURIComponent(null!=e?e:"null")}`;s&&(o=`${o}&deploymentId=${encodeURIComponent(s)}`),n&&(o=(0,i.Q2d)(o,{parent_id:n}));let a=(0,i.uIm)(o);return r&&(a=(0,i.Q2d)(a,{blti_placement_uuid:r})),a}(e):""}},569555:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});let i=new class{constructor(){this.capabilitiesMessageListener=e=>{"org.imsglobal.lti.capabilities"===e.data.subject&&this.handleCapabilities(e)}}handleCapabilities(e){let t="lti_storage_frame",n={message_id:e.data.message_id,subject:"org.imsglobal.lti.capabilities.response",supported_messages:[{subject:"org.imsglobal.lti.capabilities"},{subject:"org.imsglobal.lti.get_data",frame:t},{subject:"org.imsglobal.lti.put_data",frame:t}]};!e.source||e.source instanceof MessagePort||e.source instanceof ServiceWorker||e.source.postMessage(n,e.origin)}init(e){e.addEventListener("message",this.capabilitiesMessageListener,!1)}}},288853:function(e,t,n){"use strict";n.d(t,{K3:function(){return l},Cm:function(){return g},q7:function(){return h.q}});var i={};n.r(i),n.d(i,{DEFAULT_RESERVED_WORDS:function(){return d},attachContentChangeListener:function(){return c},enableReservedWords:function(){return p},setReservedWords:function(){return m}});var r=n(202784),s=n(597901),o=n(484514),a=n(228357);let l=({apiBasePath:e,className:t,locale:n,initialMathML:i,isRtl:l,onError:c,onLoad:d})=>{let u=r.useRef(null),{initError:p,isReady:m,wirisEditorInstance:h}=(0,s.t)(u,e,i,n),g=(0,o.y)();return r.useEffect(()=>{h&&m&&d(h)},[h]),r.useEffect(()=>{p&&c(p)},[p]),r.createElement(a.Q,{theme:"light",isRtl:l},r.createElement("div",{className:`${g.mathEditor} math-editor ${t||""}`,ref:u}))};function c(e,t){let n={caretPositionChanged:e=>{},clipboardChanged:e=>{},contentChanged:e=>{t(e.getMathML())},styleChanged:e=>{},transformationReceived:e=>{}};return e.getEditorModel().addEditorListener(n),n}l.displayName="MathEditor";let d=["sin","cos","tan","asin","acos","atan","csc","sec","cot","log","exp","ln","round","e","&#960;"],u={reservedWordsColor:"#006fcb",forceReservedWords:"true",grammarResource:"grammar_eval_content.txt",reservedWords:d.join(",")};function p(e){e.setParams(u)}function m(e,t){e.setParams({reservedWords:[...d,...t].join(",")})}var h=n(9957);let g=i},553493:function(e,t,n){"use strict";var i,r;n.d(t,{e$:function(){return s},or:function(){return l}});let s="audio/webm; codecs=opus";(r=i||(i={})).Inactive="inactive",r.Recording="recording",r.Paused="paused";class o{constructor(){this.currentRecordingSession=null,this.mediaRecorder=null,this.mediaStream=null,this.autoStop=null}static getInstance(){return o.instance||(o.instance=new o),this.instance}static getBlobOptionsFromRecorderOptions(e){return{type:null==e?void 0:e.mimeType}}get recordingState(){var e;return(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)||i.Inactive}get isRecording(){return this.recordingState===i.Recording}isCurrentRecordingSession(e){return null!==this.currentRecordingSession&&this.currentRecordingSession===e}async enableRecording(e){if(this.isRecording)throw Error("Recording in progress");try{this.mediaStream=await navigator.mediaDevices.getUserMedia(e.streamConstraints),this.currentRecordingSession=e}catch(e){throw Error("Unable to start recording")}}async startRecording(e){if(this.isRecording)throw Error("Recording in progress");return this.mediaStream&&this.isCurrentRecordingSession(e)||await this.enableRecording(e),this.mediaRecorder=new MediaRecorder(this.mediaStream,this.currentRecordingSession.recorderOptions),this.mediaRecorder.start(),this.configureAutoStop(e),this.recordingState}async stopRecording(e){if(!this.isRecording)throw Error("No recording in progress");if(!this.isCurrentRecordingSession(e))throw Error("Cannot stop non-respective recording");let{currentRecordingSession:t,mediaRecorder:n}=this,{onRecordingComplete:i,recorderOptions:r}=t,s=new Promise(e=>{let t=o.getBlobOptionsFromRecorderOptions(r);n.ondataavailable=({data:n})=>{e(new Blob([n],t))}}),a=new Promise(e=>{n.onstop=()=>{this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{e.stop()}),e()}});return n.stop(),await Promise.all([s,a]).then(([e])=>{i(e),this.currentRecordingSession=null}),this.autoStop&&clearTimeout(this.autoStop),this.recordingState}async toggleRecording(e){return this.isRecording?this.stopRecording(e):this.startRecording(e)}configureAutoStop(e){var t,n;let i=null===(n=null===(t=this.currentRecordingSession)||void 0===t?void 0:t.recordingOptions)||void 0===n?void 0:n.maxDuration;i&&(this.autoStop=setTimeout(()=>{this.isCurrentRecordingSession(e)&&this.stopRecording(this.currentRecordingSession)},i))}}class a{constructor(e,t,n,i){this.recorder=o.getInstance(),this.onRecordingComplete=e,this.recorderOptions=t,this.streamConstraints=n,this.recordingOptions=i||{},this.onRecordToggle=this.onRecordToggle.bind(this),this.onRecordStart=this.onRecordStart.bind(this),this.onRecordStop=this.onRecordStop.bind(this)}async onEnableRecording(){return this.recorder.enableRecording(this)}async onRecordStart(){return this.recorder.startRecording(this)}async onRecordStop(){return this.recorder.stopRecording(this)}async onRecordToggle(){return this.recorder.toggleRecording(this)}}class l extends a{constructor(e){super(e,{mimeType:s},{audio:!0,video:!1},{maxDuration:2e4})}}},776517:function(e,t,n){"use strict";n.d(t,{tw:function(){return m},rJ:function(){return h},Cs:function(){return u},I8:function(){return d},Pl:function(){return p},GS:function(){return D},Nw:function(){return N},zb:function(){return w},qK:function(){return $},YO:function(){return O},Dd:function(){return I},sA:function(){return x},ku:function(){return G},Rw:function(){return P},Db:function(){return A}});var i,r,s,o,a,l,c,d,u,p,m,h,g=n(313330),f=n(198022);(i=c||(c={})).QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",i.AssessmentSubmissionFeedback="assessment-submission-feedback",i.AssessmentSubmissionFeedbackTab="assessment-submission-feedback-tab",i.RubricEvaluation="rubric-evaluation",i.RubricView="rubric-view",i.Collab="collab",i.DiscussionParticipants="discussion-participants",i.SubmissionList="submission-list",i.DiscussionFeedback="discussion-feedback",i.JournalSetting="journal-settings",i.JournalDetail="journal-details",i.JournalParticipationDetail="journal-participation-detail",i.Roster="roster",i.EnrolUsers="enroll-users",i.EditEnrollment="edit-enrollment",i.Description="description",i.GroupSetList="group-set-list",i.GroupSetDetail="group-set-detail",i.CourseEditBanner="course-edit-banner",i.Attendance="attendance",i.AttendanceSettings="attendance-settings",i.AttendanceStudentRecords="attendance-student-records",i.AnnouncementDetail="announcement-detail",i.AnnouncementList="announcement-list",i.BooksAndTools="books-and-tools",i.ContentMarket="content-market",i.QuestionBanks="question-banks",i.ClassSchedule="class-schedule",i.CourseMessages="course.messages",i.CreateMessage="create-message",i.CourseCalendar="course.calendar",i.CourseCalendarCreateEvent="event-create",i.CourseCalendarEditEvent="event-edit",i.CourseCalendarOfficeHours="office-hours",i.DiscussionsSettings="discussions-settings",i.DiscussionSettings="discussion-settings",i.DiscussionTelemetry="telemetryDiscussionForumInsights",i.NewMessage="message",i.CreateFolder="content-manage.create.folder",i.CreateContent="content-manage.create",i.CourseGroup="course-group",i.AdminAnnouncement="announcement",i.PerAssessmentSettings="per-assessment-settings",i.PerAssessmentGroupSettings="per-assessment-group-settings",i.AssessmentSettings="assessment-settings",i.SubmissionGrading="submission-grading",i.AssessmentSubmissionGradingFeedbackTab="submission-grading.assessment-submission-feedback-tab",i.GradesBulkDownload="grades-bulk-download",i.QuestionGoalAlignmentForInstructor="question-goal-alignment",i.GoalPickerLegacy="goal-picker-legacy",i.CourseGradesAccommodations="accommodation",i.ContentCopy="content-manage.copy",i.BulkEditContent="bulk-edit-content",i.ImportContent="content-manage.import",i.Exports="exports",i.ContentCollection="content-collection",i.ContentCollectionSettings="content-collection-settings",i.ContentCollectionPicker="content-collection-picker",i.CourseGradesAddItem="grade-item.create",i.CourseGradesAddItemCalculation="gradebook-item.calculation",i.CourseGradesViewIndividualGrade="view-individual-grades",i.QuestionAnalysisReport="question-analysis.report",i.QuestionAnalysis="course.analytics.question-analysis",i.QuestionAnalyticsScorm="course.analytics.scorm-reports",i.CourseQuestionAnalysisReport="course.analytics.question-analysis.peek.question-analysis.report",i.EventEdit="event-edit",i.ActivityStream="base.recentActivity",i.CourseTimeline="base.courses",i.Document="content-manage.edit.document",i.CourseOutline="course.outline",i.CourseGrades="course.grades",i.Journal="journal.view.with-participation",i.AssessmentInst="gradebook-item.assessment",i.Discussion="discussion.view.with-grading",i.GradedScormInst="gradebook-item.scorm-submissions",i.CourseMessageList="course.messages",i.CourseMessage="edit-message",i.StudentActivity="telemetryContentActivityInDetail",i.CreateLink="content-manage.create.link",i.LTILaunchLink="lti.launch-frame",i.CreateLTI="content-manage.create.lti",i.ScormSettings="scorm-settings",i.PreviewScorm="scorm-launch-frame",i.DiscussionBoard="course.engagement",i.ScormAnalysisReport="scorm-analytics-report",i.PartnerTool="partner-tool.tool",i.EditFolder="content-manage.edit.folder",i.EditLTI="content-manage.edit.lti",i.EditPlacement="content-manage.edit.placement",i.DocumentSettings="document-settings",i.Tools="base.tools",i.Messages="base.messages",i.ReleaseCondition="conditional-release",i.GradeBookOverAllGrade="gradebook-item.overall-grade",i.CourseGroupEnroll="course-group-enroll",i.AttendanceStudentView="attendance-student-view",i.StudentScormOverview="scorm-overview.student",i.AssessmentOverview="assessment.overview",i.AssessmentOverviewAttempt="assessment.overview.attempt",i.AssessmentDetails="assessment-details",i.AssessmentAttemptSubmissionFeedback="assessment.overview.attempt.review.assessment-submission-feedback-tab",i.AssessmentOverviewAttemptReviewInlineRubrics="assessment.overview.attempt.review.inline-rubric",i.GradeAndFeedback="grade-and-feedback",i.OverallGradeSettings="overall-grade-settings",i.TotalCalculationSettings="total-calculation-settings",i.InstitutionAdminPage="base.institution-page-admin",i.InstitutionPage="base.institution-page",i.BrandDetail="brand-detail",i.CreateModule="createModule",i.EditModule="editModule",i.BrowserSettings="browserSettings",i.IpContentCollection="contentCollection",i.GradeSettings="grade-setting",i.EditIpLinkImage="linkImage",i.IpViewLinks="allLinks",i.IpColorSelection="colorSelection",i.GradeDownloadSettings="grade-download-setting",i.MultipleAttemptGrading="multiple-attempt-grading",i.EditFileSettings="edit-file-settings",i.ContentManageCreateDocument="content-manage.create.document",i.DownloadTestResults="download-test-results",i.AssessmentOverviewMultipleAttempt="assessment.overview.multiple-attempt",i.AssessmentOverviewAttemptReview="assessment.overview.attempt.review",i.DiscussionDetails="discussion-details",i.OverallGrade="overall-grade-student",i.GradeUpload="grade-upload-setting",i.GradeSubmissionReceipt="attempt-receipt-search",i.CourseSettings="course-settings",i.FileManagement="file-management",i.CourseActivityAnalytics="course.analytics.course-activity",i.TelemetryAlertSettings="telemetry-settings",i.CourseGroups="course.groups",i.CourseGroupsStudent="course.groups-student",i.GroupSpace="group-space",i.AttemptLog="open-attempt-log",(r=d||(d={})).OpenAttempt="OPEN_ATTEMPT",r.OpenDocument="OPEN_DOCUMENT",r.ReviewAttempt="REVIEW_ATTEMPT",r.ReviewFeedback="REVIEW_FEEDBACK",r.PreviewAssessment="PREVIEW_ASSESSMENT",r.CollabRecordingPreview="COLLAB_RECORDING_PREVIEW",r.CollabManageSession="COLLAB_MANAGE_SESSION",r.OpenCourse="OPEN_COURSE",r.OpenDiscussion="OPEN_DISCUSSION",r.OpenGroupDiscussion="OPEN_GROUP_DISCUSSION",r.OpenJournal="OPEN_JOURNAL",r.OpenAssessment="OPEN_ASSESSMENT",r.OpenAssessmentInstView="OPEN_ASSESSMENT_INST_VIEW",r.OpenAssessmentSubmissionView="OPEN_ASSESSMENT_SUBMISSION_VIEW",r.OpenCourseAnnouncement="OPEN_COURSE_ANNOUNCEMENT",r.OpenAdminAnnouncement="OPEN_ADMIN_ANNOUNCEMENT",r.OpenCourseMessage="OPEN_COURSE_MESSAGE",r.OpenGradeBook="OPEN_GRADEBOOK",r.OpenCalendar="OPEN_CALENDAR",r.OpenGradedSCORM="OPEN_GRADED_SCORM",r.OpenInstViewGradedSCORM="OPEN_GRADED_SCORM_INST_VIEW",r.OpenTimeline="OPEN_TIMELINE",r.OpenPersonalEvent="OPEN_PERSONAL_EVENT",r.OpenCalendarEvent="OPEN_CALENDAR_EVENT",r.OpenTools="OPEN_TOOLS",r.OpenCreateMessages="OPEN_CREATE_MESSAGES",r.OpenCourseMessagesList="OPEN_MESSAGES_LIST",r.OpenInstitutionPage="OPEN_INSTITUTION_PAGE",r.OpenAdminInstitutionPage="OPEN_ADMIN_INSTITUTION_PAGE",r.OpenJournalParticipantsGrades="OPEN_JOURNAL_GRADE_PARTICIPANTS",r.OpenViewGradesOfflinePage="OPEN_VIEW_GRADES_OFFLINE_PAGE",r.OpenViewGradesAssessmentsPage="OPEN_VIEW_GRADES_ASSESSMENT_PAGE",r.OpenScormGradesPage="OPEN_SCORM_GRADES_PAGE",r.OpenDiscussionGradePage="OPEN_DISCUSSION_GRADE_PAGE",r.OpenAttendancePage="OPEN_ATTENDANCE_PAGE",r.OpenCalendarAssessmentPage="OPEN_CALENDAR_ASSESSMENT_PAGE",r.OpenCalendarDiscussionPage="OPEN_CALENDAR_DISCUSSION_PAGE",r.OpenCalendarJournalPage="OPEN_CALENDAR_JOURNAL_PAGE",r.OpenCalendarScormPage="OPEN_CALENDAR_SCORM_PAGE",r.OpenStudentCalendarAssessmentPage="OPEN_STUDENT_CALENDAR_ASSESSMENT_PAGE",r.OpenStudentCalendarScormPage="OPEN_STUDENT_CALENDAR_SCORM_PAGE",r.OpenStudentDiscusssionPage="OPEN_STUDENT_DISCUSSION_PAGE",(s=u||(u={})).AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",s.AttemptSubmitted="ATTEMPT_SUBMITTED",s.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",s.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",s.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",s.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",s.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",s.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",s.AttemptOpened="ATTEMPT_OPENED",s.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",s.DocumentOpened="DOCUMENT_OPENED",s.DocumentClosed="DOCUMENT_CLOSED",s.LoadDocument="LOAD_DOCUMENT",s.AssessementPreviewOpened="ASSESSMENT_PREVIEW_OPENED",s.CollabClosed="COLLAB_CLOSED",s.CollabRoomSettingsOpened="COLLAB_ROOM_SETTINGS_OPENED",s.CollabRoomSettingsClosed="COLLAB_ROOM_SETTINGS_CLOSED",s.CollabViewRoomReportOpened="COLLAB_ROOM_VIEW_REPORT_OPENED",s.CollabViewRoomReportClosed="COLLAB_ROOM_VIEW_REPORT_CLOSED",s.CollabManageSessionOpened="COLLAB_MANAGE_SESSION_OPENED",s.CollabSessionOpened="COLLAB_SESSION_OPENED",s.CollabSessionClosed="COLLAB_SESSION_CLOSED",s.CollabRecordingsOpened="COLLAB_RECORDING_OPENED",s.CourseSettingsPanelOpened="COURSE_SETTINGS_PANEL_OPENED",s.CourseSettingsPanelClosed="COURSE_SETTINGS_PANEL_CLOSED",s.FileManagementPanelOpened="FILE_MANAGEMENT_PANEL_OPENED",s.FileManagementPanelClosed="FILE_MANAGEMENT_PANEL_CLOSED",s.CourseActivityAnalyticsOpened="COURSE_ACTIVITY_ANALYTICS_OPENED",s.CourseAnalyticsPremiumReportsOpened="COURSE_ANALYTICS_PREMIUM_REPORTS_OPENED",s.DiscussionOpened="DISCUSSION_OPENED",s.DiscussionClosed="DISCUSSION_CLOSED",s.DiscussionParticipantsOpened="DISCUSSION_PARTICIPANTS_OPENED",s.DiscussionParticipantsClosed="DISCUSSION_PARTICIPANTS_CLOSED",s.DiscussionGradesParticipationOpened="DISCUSSION_GRADES_PARTICIPATION_OPENED",s.DiscussionGradesParticipationClosed="DISCUSSION_GRADES_PARTICIPATION_CLOSED",s.SubmissionListOpened="SUBMISSION_LIST_OPENED",s.SubmissionListClosed="SUBMISSION_LIST_CLOSED",s.DiscussionFeedbackOpened="DISCUSSION_FEEDBACK_OPENED",s.DiscussionFeedbackClosed="DISCUSSION_FEEDBACK_CLOSED",s.JournalOpened="JOURNAL_OPENED",s.JournalClosed="JOURNAL_CLOSED",s.JournalSettingsOpened="JOURNAL_SETTINGS_OPENED",s.JournalSettingsClosed="JOURNAL_SETTINGS_CLOSED",s.JournalDetailsOpened="JOURNAL_DETAILS_OPENED",s.JournalDetailsClosed="JORNRAL_DETAILS_CLOSED",s.JournalParticipationDetailOpened="JOURNAL_PARTICIPATION_DETAIL_OPENED",s.JournalParticipationDetailClosed="JOURNAL_PARTICIPATION_DETAIL_CLOSED",s.AssessmentOpened="ASSESSMENT_OPENED",s.AssessmentClosed="ASSESSMENT_CLOSED",s.EditAssignmentOpened="EDIT_ASSIGNMENT_OPENED",s.EditTestOpened="EDIT_TEST_OPENED",s.EditSurveyOpened="EDIT_SURVEY_OPENED",s.EditExamOpened="EDIT_EXAM_OPENED",s.EditHomeworkOpened="EDIT_HOMEWORK_OPENED",s.EditPresentationOpened="EDIT_PRESENTATION_OPENED",s.EditQuizOpened="EDIT_QUIZ_OPENED",s.CreateAssignmentOpened="CREATE_ASSIGNMENT_OPENED",s.CreateTestOpened="CREATE_TEST_OPENED",s.CreateSurveyOpened="CREATE_SURVEY_OPENED",s.AssessmentOverviewOpened="ASSESSMENT_OVERVIEW_OPENED",s.AssessmentDetailOpened="ASSESSMENT_DETAIL_OPENED",s.FolderOpened="FOLDER_OPENED",s.LearningModuleOpened="LEARNING_MODULE_OPENED",s.CourseContentOpened="COURSE_CONTENT_OPENED",s.CourseContentClosed="COURSE_CONTENT_CLOSED",s.DiscussionBoardOpened="DISCUSSION_BOARD_OPENED",s.DiscussionBoardClosed="DISCUSSION_BOARD_CLOSED",s.RosterOpened="ROSTER_OPENED",s.RosterClosed="ROSTER_CLOSED",s.EnrollUsersOpened="ENROL_USERS_OPENED",s.EnrollUsersClosed="ENROL_USERS_CLOSED",s.EditEnrollmentOpened="EDIT_ENROLLMENT_OPENED",s.EditEnrollmentClosed="EDIT_ENROLLMENT_CLOSED",s.DescriptionOpened="DESCRIPTION_OPENED",s.DescriptionClosed="DESCRIPTION_CLOSED",s.GroupSetDetailOpened="GROUP_SET_DETAIL_OPENED",s.GroupSetDetailClosed="GROUP_SET_DETAIL_CLOSED",s.GroupSetListOpened="GROUP_SET_LIST_OPENED",s.GroupSetListClosed="GROUP_SET_LIST_CLOSED",s.CourseEditBannerOpened="COURSE_EDIT_BANNER_OPENED",s.CourseEditBannerClosed="COURSE_EDIT_BANNER_CLOSED",s.AttendanceOpened="ATTENDANCE_OPENED",s.AttendanceClosed="ATTENDANCE_CLOSED",s.AttendanceSettingsOpened="ATTENDANCE_SETTINGS_OPENED",s.AttendanceSettingsClosed="ATTENDANCE_SETTINGS_CLOSED",s.AttendanceStudentRecordsOpened="ATTENDANCE_STUDENT_RECORDS_OPENED",s.AttendanceStudentRecordsClosed="ATTENDANCE_STUDENT_RECORDS_CLOSED",s.AnnouncementDetailOpened="ANNOUNCEMENT_DETAIL_OPENED",s.AnnouncementDetailClosed="ANNOUNCEMENT_DETAIL_CLOSED",s.AnnouncementListOpened="ANNOUNCEMENT_LIST_OPENED",s.AnnouncementListClosed="ANNOUNCEMENT_LIST_CLOSED",s.BooksAndToolsOpened="BOOKS_AND_TOOLS_OPENED",s.BooksAndToolsClosed="BOOKS_AND_TOOLS_CLOSED",s.ContentMarketOpened="CONTENT_MARKET_OPENED",s.ContentMarketClosed="CONTENT_MARKET_CLOSED",s.QuestionBanksOpened="QUESTION_BANKS_OPENED",s.QuestionBanksClosed="QUESTION_BANKS_CLOSED",s.ClassScheduleOpened="CLASS_SCHEDULE_OPENED",s.ClassScheduleClosed="CLASS_SCHEDULE_CLOSED",s.TimelineOpened="TIMELINE_OPENED",s.CourseMessageOpened="COURSE_MESSAGE_OPENED",s.CourseMessageListOpened="COURSE_MESSAGE_LIST_OPENED",s.CourseMessageListClosed="COURSE_MESSAGE_LIST_CLOSED",s.CreateMessageOpened="CREATE_MESSAGE_OPENED",s.CreateMessageClosed="CREATE_MESSAGE_CLOSED",s.CourseActivityAnalyticsClosed="COURSE_ACTIVITY_ANALYTICS_CLOSED",s.AlertSettingsOpened="ANALYTICS_ALERT_SETTINGS_OPENED",s.AlertSettingsClosed="ANALYTICS_ALERT_SETTINGS_CLOSED",s.CourseCalendarOpened="COURSE_CALENDAR_OPENED",s.CourseCalendarClosed="COURSE_CALENDAR_CLOSED",s.CourseCalendarCreateNewEventOpened="COURSE_CALENDAR_CREATE_NEW_EVENT_OPENED",s.CourseCalendarCreateNewEventClosed="COURSE_CALENDAR_CREATE_NEW_EVENT_CLOSED",s.CourseCalendarOfficeHoursOpened="COURSE_CALENDAR_ADD_OFFICE_HOURS_OPENED",s.CourseCalendarOfficeHoursClosed="COURSE_CALENDAR_ADD_OFFICE_HOURS_CLOSED",s.CourseCalendarEditEventOpened="COURSE_CALENDAR_EDIT_EVENT_OPENED",s.CourseCalendarEditEventClosed="COURSE_CALENDAR_EDIT_EVENT_CLOSED",s.DiscussionsSettingsOpened="DISCUSSIONS_SETTINGS_OPENED",s.DiscussionsSettingsClosed="DISCUSSIONS_SETTINGS_CLOSED",s.DiscussionSettingsOpened="DISCUSSION_SETTINGS_OPENED",s.DiscussionSettingsClosed="DISCUSSION_SETTINGS_CLOSED",s.DiscussionTelemetryOpened="DISCUSSION_TELEMETRY_OPENED",s.DiscussionTelemetryClosed="DISCUSSION_TELEMETRY_CLOSED",s.NewMessagePanelOpened="NEW_MESSAGE_PANEL_OPENED",s.NewMessagePanelClosed="NEW_MESSAGE_PANEL_CLOSED",s.NewFolderPanelOpened="NEW_FOLDER_PANEL_OPENED",s.NewFolderPanelClosed="NEW_FOLDER_PANEL_CLOSED",s.NewDiscussionCreationPanelOpened="NEW_DISCUSSION_CREATION_PANEL_OPENED",s.NewDiscussionCreationPanelClosed="NEW_DISCUSSION_CREATION_PANEL_CLOSED",s.NewDiscussionCreated="NEW_DISCUSSION_CREATED",s.NewContentItemPanelOpened="NEW_CONTENT_ITEM_PANEL_OPENED",s.NewContentItemPanelClosed="NEW_CONTENT_ITEM_PANEL_CLOSED",s.CourseGroupOpened="COURSE_GROUP_OPENED",s.CourseGroupClosed="COURSE_GROUP_CLOSED",s.CreateJournalContentOpened="CREATE_JOURNAL_CONTENT_OPENED",s.JournalSavePrompt="JOURNAL_SAVE_PROMPT",s.AdminAnnouncementOpened="ADMIN_ANNOUNCEMENT_OPENED",s.AdminAnnouncementClosed="ADMIN_ANNOUNCEMENT_CLOSED",s.PerAssessmentSettingsOpened="PER_ASSESSMENT_SETTINGS_OPENED",s.PerAssessmentSettingsClosed="PER_ASSESSMENT_SETTINGS_CLOSED",s.PerAssessmentGroupSettingsOpened="PER_ASSESSMENT_GROUP_SETTINGS_OPENED",s.PerAssessmentGroupSettingsClosed="PER_ASSESSMENT_GROUP_SETTINGS_CLOSED",s.AssessmentSettingsOpened="ASSESSMENT_SETTINGS_OPENED",s.AssessmentSettingsClosed="ASSESSMENT_SETTINGS_CLOSED",s.SubmissionGradingOpened="SUBMISSION_GRADING_OPENED",s.SubmissionGradingClosed="SUBMISSION_GRADING_CLOSED",s.SubmissionGradingFeedbackTabOpened="SUBMISSION_GRADING_FEEDBACK_TAB_OPENED",s.SubmissionGradingFeedbackTabClosed="SUBMISSION_GRADING_FEEDBACK_TAB_CLOSED",s.GradesBulkDownloadOpened="GRADES_BULK_DOWNLOAD_OPENED",s.GradesBulkDownloadClosed="GRADES_BULK_DOWNLOAD_CLOSED",s.QuestionGoalAlignmentForInstructorOpened="QUESTION_GOAL_ALIGNMENT_INST_OPENED",s.QuestionGoalAlignmentForInstructorClosed="QUESTION_GOAL_ALIGNMENT_INST_CLOSED",s.GoalPickerLegacyOpened="GOAL_PICKER_LEGACY_OPENED",s.GoalPickerLegacyClosed="GOAL_PICKER_LEGACY_CLOSED",s.CourseGradeOpened="COURSE_GRADE_OPENED",s.CourseGradeClosed="COURSE_GRADE_CLOSED",s.CourseGradeAccommodationOpened="COURSE_GRADE_ACCOMMODATION_OPENED",s.CourseGradeAccommodationClosed="COURSE_GRADE_ACCOMMODATION_CLOSED",s.CourseGradesOverallGradeSetupOpened="COURSE_GRADE_OVERALL_GRADE_SETUP_OPENED",s.CourseGradesOverallGradeSetupClosed="COURSE_GRADE_OVERALL_GRADE_SETUP_CLOSED",s.CourseGradesAddItemOpened="COURSE_GRADE_ADD_ITEM_OPENED",s.CourseGradesAddItemClosed="COURSE_GRADE_ADD_ITEM_CLOSES",s.CourseGradesAddItemCalculationOpened="COURSE_GRADE_ADD_ITEM_CALCULATION_OPENED",s.CourseGradesAddItemCalculationClosed="COURSE_GRADE_ADD_ITEM_CALCULATION_CLOSED",s.TotalCalculationGradeOpened="TOTAL_CALCULATION_GRADE_OPENED",s.TotalCalculationGradeClosed="TOTAL_CALCULATION_GRADE_CLOSED",s.TotalCalculationGradeDetailOpened="TOTAL_CALCULATION_GRADE_DETAIL_OPENED",s.TotalCalculationGradeDetailClosed="TOTAL_CALCULATION_GRADE_DETAIL_CLOSED",s.CourseGradesIndividualGradeOpened="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_OPENED",s.CourseGradesIndividualGradeClosed="COURSE_GRADE_VIEW_INDIVIDUAL_GRADE_CLOSED",s.ContentCopyPanelOpened="CONTENT_COPY_PANEL_OPENED",s.ContentCopyPanelClosed="CONTENT_COPY_PANEL_CLOSED",s.BulkEditContentPanelOpened="BULK_EDIT_CONTENT_PANEL_OPENED",s.BulkEditContentPanelClosed="BULK_EDIT_CONTENT_PANEL_CLOSED",s.ImportContentPanelOpened="IMPORT_CONTENT_PANEL_OPENED",s.ImportContentPanelClosed="IMPORT_CONTENT_PANEL_CLOSED",s.ExportsPanelOpened="EXPORTS_PANEL_OPENED",s.ExportsPanelClosed="EXPORTS_PANEL_CLOSED",s.ContentCollectionPanelOpened="CONTENT_COLLECTION_PANEL_OPENED",s.ContentCollectionSettingOpened="CONTENT_COLLECTION_SETTINGS_OPENED",s.ContentCollectionSettingClosed="CONTENT_COLLECTION_SETTINGS_CLOSED",s.ContentCollectionPickerOpened="CONTENT_COLLECTION_PICKER_OPENED",s.ContentCollectionPickerClosed="CONTENT_COLLECTION_PICKER_CLOSED",s.FileOpened="FILE_OPENED",s.LinkOpened="LINK_OPENED",s.LTILaunched="LTI_LAUNCHED",s.QuestionAnalysisReportOpened="QUESTION_ANALYSIS_REPORT_OPENED",s.QuestionAnalysisReportClosed="QUESTION_ANALYSIS_REPORT_CLOSED",s.QuestionAnalysisOpened="QUESTION_ANALYSIS_OPENED",s.QuestionAnalysisClosed="QUESTION_ANALYSIS_CLOSED",s.QuestionAnalyticsScormReportOpened="QUESTION_ANALYTICS_SCORM_REPORT_OPENED",s.QuestionAnalyticsScormReportClosed="QUESTION_ANALYTICS_SCORM_REPORT_CLOSED",s.CourseQuestionAnalysisReportOpened="COURSE_QUESTION_ANALYSIS_REPORT_OPENED",s.CourseQuestionAnalysisReportClosed="COURSE_QUESTION_ANALYSIS_REPORT_CLOSED",s.PersonalEventOpened="PERSONAL_EVENT_OPENED",s.PersonalEventClosed="PERSONAL_EVENT_CLOSED",s.StudentActivityOpened="STUDENT_ACTIVITY_OPENED",s.StudentActivityClosed="STUDENT_ACTIVITY_CLOSED",s.ProgressTrackerOpened="PROGRESS_TRACKER_OPENED",s.ProgressTrackerClosed="PROGRESS_TRACKER_CLOSED",s.CancelClicked="CANCEL_CLICKED",s.ModelDismissed="MODEL_DISMISSED",s.CreateLinkPanelOpened="CREATE_LINK_PANEL_OPENED",s.CreateLinkPanelClosed="CREATE_LINK_PANEL_CLOSED",s.LTILinkOpened="LTI_LINK_OPENED",s.CreateLTIPanelOpened="CREATE_LTI_PANEL_OPENED",s.CreateLTIPanelClosed="CREATE_LTI_PANEL_CLOSED",s.ScormSettingsOpened="SCORM_SETTINGS_OPENED",s.ScormSettingsClosed="SCORM_SETTINGS_CLOSED",s.ScormFileUploaderOpened="SCORM_FILE_UPLOADED_OPENED",s.ScormSettingsOrFileUploaderOpened="SCORM_SETTINGS_OR_FILE_UPLOADER_OPENED",s.PreviewScormOpened="PREVIEW_SCORM_OPENED",s.PreviewScormClosed="PREVIEW_SCORM_CLOSED",s.GradedScormInstOpened="SCORM_SUBMISSIONS_OPENED",s.GradedScormInstClosed="SCORM_SUBMISSIONS_CLOSED",s.OfflineGradeOpened="OFFLINE_GRADES_OPENED",s.EditGradeItemOpened="EDIT_GRADE_ITEM_OPENED",s.AddGradeItemOpened="ADD_GRADE_ITEM_OPENED",s.ScormAnalysisReportOpened="SCORM_ANALYSIS_REPORT_OPENED",s.ScormAnalysisReportClosed="SCORM_ANALYSIS_REPORT_CLOSED",s.DownloadLinkClicked="DOWNLOAD_LINK_CLICKED",s.PartnerToolOpened="PARTNER_TOOL_OPENED",s.PartnerToolClosed="PARTNER_TOOL_CLOSED",s.EditFolderOpened="EDIT_FOLDER_OPENED",s.EditFolderClosed="EDTI_FOLDER_CLOSED",s.EditLinkOpened="EDIT_LINK_OPENED",s.EditFileOpened="EDIT_FILE_OPENED",s.EditLTIOpened="EDIT_LTI_OPENED",s.EditLTIClosed="EDIT_LTI_CLOSED",s.EditPlacementOpened="EDIT_PLACEMENT_OPENED",s.EditPlacementClosed="EDIT_PLACEMENT_CLOSED",s.CreateDocument="CREATE_DOCUMENT",s.ReleaseConditionPanelOpened="RELEASE_CONDITION_PANEL_OPENED",s.ReleaseConditionPanleClosed="RELEASE_CONDITION_PANEL_CLOSED",s.ToolsOpened="TOOLS_OPENED",s.ToolsClosed="TOOLS_CLOSED",s.MessagesOpened="MESSAGES_OPENED",s.MessageClosed="MESSAGE_CLOSED",s.GradableItemTabOpened="GRADABLE_ITEM_TAB_OPENED",s.StudentsTabOpened="STUDENTS_TAB_OPENED",s.QuestionPickerPanelOpened="QUESTION_PICKER_PANEL_OPENED",s.QuestionPickerPanelClosed="QUESTION_PICKER_PANEL_CLOSED",s.QuestionPoolPanelOpened="QUESTION_POOL_PANEL_OPENED",s.QuestionPoolPanelClosed="QUESTION_POOL_PANEL_CLOSED",s.ToolLinkOpened="TOOL_LINK_OPENED",s.CourseGroupEnrollOpened="COURSE_GROUP_ENROLL_OPENED",s.AttendanceStudentViewOpened="ATTENDANCE_STUDENT_VIEW_OPENED",s.StudentScormOverviewOpened="STUDENT_SCORM_OVERVIEW_OPENED",s.AssessmentDetailsClosed="ASSESSMENT_DETAILS_CLOSED",s.AssessmentAttemptSubmissionFeedbackOpened="ASSESSMENT_SUBMISSION_FEEDBACK_OPENED",s.AssessmentAttemptSubmissionFeedbackClosed="ASSESSMENT_SUBMISSION_FEEDBACK_CLOSED",s.DocumentSettingsOpened="DOCUMENT_SETTINGS_OPENED",s.DocumentSettingsClosed="DOCUMENT_SETTINGS_CLOSED",s.GradeAndFeedbackOpened="GRADE_AND_FEEDBACK_OPENED",s.GradeAndFeedbackClosed="GRADE_AND_FEEDBACK_CLOSED",s.AssessmentOverviewAttemptClosed="ASSESSMENT_OVERVIEW_ATTEMPT_CLOSED",s.AssessmentOverviewClosed="ASSESSMENT_OVERVIEW_CLOSED",s.MultipleAttemptGradingOpened="MULTIPLE_ATTEMPT_GRADING_OPENED",s.MultipleAttemptGradingClosed="MULTIPLE_ATTEMPT_GRADING_CLOSED",s.StudentSubmisionOpened="STUDENT_SUBMISSION_OPENED",s.TestSubmissionOpened="TEST_SUBMISSION_OPENED",s.AssignmentSubmissionOpened="ASSIGNMENT_SUBMISSION_OPENED",s.ExamSubmissionOpened="EXAM_SUBMISSION_OPENED",s.HomeworkSubmissionOpened="HOMEWORK_SUBMISSION_OPENED",s.PresentationSubmissionOpened="PRESENTATION_SUBMISSION_OPENED",s.QuizSubmissionOpened="QUIZ_SUBMISSION_OPENED",s.OverallGradeSettingsOpened="OVERALL_GRADE_SETTINGS_OPENED",s.OverallGradeSettingsClosed="OVERALL_GRADE_SETTINGS_CLOSED",s.TotalCalculationSettingsOpened="TOTAL_CALCULATION_SETTINGS_OPENED",s.TotalCalculationSettingsClosed="TOTAL_CALCULATION_SETTINGS_CLOSED",s.InstitutionAdminPageOpened="INSTITUTION_ADMIN_PAGE_OPENED",s.InstitutionAdminPageClosed="INSTITUTION_ADMIN_PAGE_CLOSED",s.InstitutionPageOpened="INSTITUTION_PAGE_OPENED",s.InstitutionPageClosed="INSTITUTION_PAGE_CLOSED",s.BrandDetailOpened="INSTITUTION_BRAND_DETAIL_OPENED",s.BrandDetailClosed="INSTITUTION_BRAND_DETAIL_CLOSED",s.CreateModuleOpened="CREATE_MODULE_OPENED",s.CreateModuleClosed="CREATE_MODULE_CLOSED",s.EditBannerOpened="EDIT_BANNER_OPENED",s.EditBannerClosed="EDIT_BANNER_CLOSED",s.EditBannerLogoOpened="EDIT_BANNER_LOGO_OPENED",s.EditBannerLogoClosed="EDIT_BANNER_LOGO_CLOSED",s.BrowserSettingOpened="BROWSER_SETTING_OPENED",s.BrowserSettingClosed="BROWSER_SETTINGS_CLOSED",s.ContentCollectionOpened="IP_CONTENT_COLLECTION_OPENED",s.ContentCollectionClosed="IP_CONTENT_COLLECTION_CLOSED",s.GradeSettingsOpened="GRADE_SETTINGS_OPENED",s.GradeSettingsClosed="GRADE_SETTINGS_CLOSED",s.EditLinkImageOpened="EDIT_LINK_IMAGE_OPENED",s.EditLinkImageClosed="EDIT_LINK_IMAGE_CLOSED",s.IpViewLinksOpened="INSTITUTION_VIEW_LINKED_OPENED",s.IpViewLinksClosed="INSTITUTION_VIEW_LINKED_CLOSED",s.IpColorSelectionOpened="INSTITUTION_COLOR_SELECTION_OPENED",s.IpColorSelectionClosed="INSTITUTION_COLOR_SELECTION_CLOSED",s.GradesAndParticipantsOpened="GRADES_AND_PARTICIPANTS_OPENED",s.GradeBookDownloadButtonClicked="GRADEBOOK_DOWNLOAD_BUTTON_CLICKED",s.GradeDownloadSettingsOpened="GRADEBOOK_DOWNLOAD_SETTINGS_OPENED",s.GradeDownloadSettingsClosed="GRADEBOOK_DOWNLOAD_SETTINGS_CLOSED",s.EditFileSettingsOpened="EDIT_FILE_SETTINGS_OPENED",s.EditFileSettingsClosed="EDIT_FILE_SETTINGS_CLOSED",s.ContentManageCreateDocumentClosed="CREATE_DOCUMENT_CLOSED",s.NewJournalTitleUpdated="NEW_JOURNAL_TITLE_UPDATED",s.DownloadTestResultsOpened="DOWNLOAD_TEST_RESULTS_OPENED",s.DownloadTestResultsClosed="DOWNLOAD_TEST_RESULTS_CLOSED",s.NewMessageCreated="NEW_MESSAGE_CREATED",s.MessageSent="MESSAGE_SENT",s.AssessmentOverviewMultipleAttemptOpened="ASSESSMENT_MULTIPLE_ATTEMPT_OPENED",s.AssessmentOverviewMultipleAttemptClosed="ASSESSMENT_MULTIPLE_ATTEMPT_CLOSED",s.AssessmentOverviewAttemptReviewOpened="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_OPENED",s.AssessmentOverviewAttemptReviewClosed="ASSESSMENT_OVERVIEW_ATTEMPT_REVIEW_CLOSED",s.DiscussionDetailsOpened="DISCUSSION_DETAILS_OPENED",s.DiscussionDetailsClosed="DISCUSSION_DETAILS_CLOSED",s.EventViewOpened="EVENT_VIEW_OPENED",s.EventViewClosed="EVENT_VIEW_CLOSED",s.OverallGradeOpened="OVERALL_GRADE_OPENED",s.OverallGradeClosed="OVERALL_GRADE_CLOSED",s.AssessmentOverviewAttemptReviewInlineRubricsOpened="ASSESSMENT_INLINE_RUBRICS_OPENED",s.AssessmentOverviewAttemptReviewInlineRubricsClosed="ASSESSMENT_INLINE_RUBRICS_CLOSED",s.AssessmentStudentRubricOpened="ASSESSMENT_STUDENT_RUBRIC_OPENED",s.AssessmentStudentRubricClosed="ASSESSMENT_STUDENT_RUBRIC_CLOSED",s.GradeCalculationDetailOpened="GRADE_CALCULATION_DETAIL_OPENED",s.GradeCalculationDetailClosed="GRADE_CALCULATION_DETAIL_CLOSED",s.GradeUploadOpened="GRADEBOOK_UPLOAD_OPENED",s.GradeUploadClosed="GRADEBOOK_UPLOAD_CLOSED",s.GradeSubmissionReceiptOpened="GRADEBOOK_SUBMISSION_RECEIPT_OPENED",s.GradeSubmissionReceiptClosed="GRADEBOOK_SUBMISSION_RECEIPT_CLOSED",s.CloudStorageOpened="CLOUD_STORAGE_OPENED",s.CloudStorageClosed="CLOUD_STORAGE_CLOSED",s.BlackboardSupportOpened="BLACKBOARD_SUPPORT_OPENED",s.SessionDebugOpened="SESSION_DEBUG_OPENED",s.ImportGroupSetPanelOpened="IMPORT_GROUP_SET_PANEL_OPENED",s.ImportGroupSetPanelClosed="IMPORT_GROUP_SET_PANEL_CLOSED",s.ImportGroupMembersPanelOpened="IMPORT_GROUP_MEMBERS_PANEL_OPENED",s.ImportGroupMembersPanelClosed="IMPORT_GROUP_MEMBERS_PANEL_CLOSED",s.ExportGroupSetPanelOpened="EXPORT_GROUP_SET_PANEL_OPENED",s.ExportGroupSetPanelClosed="EXPORT_GROUP_SET_PANEL_CLOSED",s.OfflineGradesAndFeedbacksPanelOpened="OFFLINE_GRADES_AND_FEEDBACK_PANEL_OPENED",s.StudentPreviewOpened="STUDENT_PREVIEW_OPENED",s.StudentPreviewClosed="STUDENT_PREVIEW_CLOSED",s.CourseGroupsOpened="COURSE_GROUPS_OPENED",s.CourseGroupsClosed="COURSE_GROUPS_CLOSED",s.CourseGroupsStudentOpened="COURSE_GROUPS_STUDENT_OPENED",s.CourseGroupsStudentClosed="COURSE_GROUPS_STUDENT_CLOSED",s.GroupMembersListOpened="GROUP_MEMBERS_LIST_OPENED",s.GroupMembersListClosed="GROUP_MEMBERS_LIST_CLOSED",s.GroupSpaceOpened="GROUP_SPACE_OPENED",s.GroupSpaceClosed="GROUP_SPACE_CLOSED",s.LogoutClicked="LOGOUT_CLICKED",s.AttemptLogOpened="ATTEMPT_LOG_OPENED",s.ColumnStatisticsOpened="COLUMN_STATISTICS_OPENED",(o=p||(p={}))[o.Document=0]="Document",o[o.Test=1]="Test",o[o.Assignment=2]="Assignment",o[o.Link=3]="Link",o[o.Folder=4]="Folder",o[o.Discussion=5]="Discussion",o[o.GradedDiscussion=6]="GradedDiscussion",o[o.Journal=10]="Journal",o[o.DiscussionGroup=13]="DiscussionGroup",o[o.GradedDiscussionGroup=14]="GradedDiscussionGroup",o[o.LTIConnection=25]="LTIConnection",o[o.Scorm=36]="Scorm",(a=m||(m={})).GotoParticipants="GOTO_PARTICIPANTS",a.GotoSettings="GOTO_SETTINGS",a.GotoDetail="GOTO_DETAIL",a.GotoDownload="GOTO_DOWNLOAD",a.Delete="DELETE",a.Next="NEXT",a.Prev="PREV",a.Enroll="ENROLL",a.Search="SEARCH",a.GotoUpload="GOTO_UPLOAD",a.GotoSubmissionReceipt="GOTO_SUBMISSION_RECEIPT",a.OpenCourseSettings="OPEN_COURSE_SETTINGS",(l=h||(h={})).Success="Success",l.Fail="Fail";let b="fromPeekName",v={[d.OpenCalendar]:c.CourseCalendar,[d.OpenGradeBook]:c.CourseGrades,[d.OpenJournal]:c.Journal,[d.OpenDiscussion]:c.Discussion,[d.OpenGroupDiscussion]:c.Discussion,[d.OpenAssessmentInstView]:c.AssessmentInst,[d.OpenAssessmentSubmissionView]:c.AssessmentInst,[d.OpenInstViewGradedSCORM]:c.GradedScormInst,[d.OpenCourse]:c.CourseOutline,[d.OpenDocument]:c.Document,[d.OpenCourseAnnouncement]:c.AnnouncementDetail,[d.OpenAdminAnnouncement]:c.AdminAnnouncement,[d.OpenCourseMessage]:c.CourseMessage,[d.OpenTimeline]:c.CourseTimeline,[d.OpenPersonalEvent]:c.EventEdit,[d.OpenCalendarEvent]:c.EventEdit,[d.OpenCourseMessagesList]:c.CourseMessageList,[d.OpenCreateMessages]:c.CreateMessage,[d.OpenInstitutionPage]:c.InstitutionPage,[d.OpenAdminInstitutionPage]:c.InstitutionAdminPage,[d.OpenTools]:c.Tools,[d.OpenAssessment]:c.AssessmentOverview,[d.OpenStudentDiscusssionPage]:c.Discussion,[d.OpenGradedSCORM]:c.StudentScormOverview},y={[c.QuestionGoalAlignmentForStudent]:{type:u.AttemptGoalAlignmentOpened},[c.RubricEvaluation]:{type:u.AttemptRubricOpened,prevState:b},[c.RubricView]:{type:u.AttemptRubricOpened,prevState:b},[c.AssessmentSubmissionFeedbackTab]:{type:u.AttemptFeedbackOpened},[c.AssessmentSubmissionFeedback]:{type:u.AttemptFeedbackOpened},[c.DiscussionParticipants]:{type:u.DiscussionParticipantsOpened},[c.SubmissionList]:{type:u.SubmissionListOpened},[c.DiscussionFeedback]:{type:u.DiscussionFeedbackOpened},[c.JournalSetting]:{type:u.JournalSettingsOpened},[c.JournalDetail]:{type:u.JournalDetailsOpened},[c.JournalParticipationDetail]:{type:u.JournalParticipationDetailOpened},[c.EnrolUsers]:{type:u.EnrollUsersOpened},[c.EditEnrollment]:{type:u.EditEnrollmentOpened},[c.Description]:{type:u.DescriptionOpened},[c.GroupSetList]:{type:u.GroupSetListOpened},[c.GroupSetDetail]:{type:u.GroupSetDetailOpened,prevState:b},[c.CourseEditBanner]:{type:u.CourseEditBannerOpened},[c.AttendanceSettings]:{type:u.AttendanceSettingsOpened},[c.BooksAndTools]:{type:u.BooksAndToolsOpened},[c.ContentMarket]:{type:u.ContentMarketOpened,prevState:b},[c.QuestionBanks]:{type:u.QuestionBanksOpened},[c.ClassSchedule]:{type:u.ClassScheduleOpened},[c.CourseMessages]:{type:u.CourseMessageListOpened},[c.CreateMessage]:{type:u.CreateMessageOpened},[c.CourseCalendar]:{type:u.CourseCalendarOpened},[c.CourseCalendarCreateEvent]:{type:u.CourseCalendarCreateNewEventOpened},[c.CourseCalendarOfficeHours]:{type:u.CourseCalendarOfficeHoursOpened},[c.DiscussionSettings]:{type:u.DiscussionSettingsOpened},[c.DiscussionsSettings]:{type:u.DiscussionsSettingsOpened},[c.NewMessage]:{type:u.NewMessagePanelOpened,prevState:b},[c.CreateContent]:{type:u.NewContentItemPanelOpened},[c.CourseGroup]:{type:u.CourseGroupOpened},[c.AdminAnnouncement]:{type:u.AdminAnnouncementOpened},[c.PerAssessmentSettings]:{type:u.PerAssessmentSettingsOpened},[c.PerAssessmentGroupSettings]:{type:u.PerAssessmentGroupSettingsOpened},[c.SubmissionGrading]:{type:u.SubmissionGradingOpened},[c.AssessmentSubmissionGradingFeedbackTab]:{type:u.SubmissionGradingFeedbackTabOpened},[c.GradesBulkDownload]:{type:u.GradesBulkDownloadOpened},[c.QuestionGoalAlignmentForInstructor]:{type:u.QuestionGoalAlignmentForInstructorOpened},[c.GoalPickerLegacy]:{type:u.GoalPickerLegacyOpened},[c.CourseGradesAccommodations]:{type:u.CourseGradeAccommodationOpened,prevState:b},[c.ContentCopy]:{type:u.ContentCopyPanelOpened},[c.BulkEditContent]:{type:u.BulkEditContentPanelOpened},[c.ImportContent]:{type:u.ImportContentPanelOpened},[c.Exports]:{type:u.ExportsPanelOpened},[c.ContentCollection]:{type:u.ContentCollectionPanelOpened},[c.ContentCollectionSettings]:{type:u.ContentCollectionSettingOpened},[c.ContentCollectionPicker]:{type:u.ContentCollectionPickerOpened,prevState:b},[c.CourseGradesAddItem]:{type:u.CourseGradesAddItemOpened},[c.CourseGradesAddItemCalculation]:{type:u.CourseGradesAddItemCalculationOpened},[c.CourseGradesViewIndividualGrade]:{type:u.CourseGradesIndividualGradeOpened},[c.QuestionAnalysis]:{type:u.QuestionAnalysisOpened},[c.QuestionAnalyticsScorm]:{type:u.QuestionAnalyticsScormReportOpened},[c.CourseQuestionAnalysisReport]:{type:u.CourseQuestionAnalysisReportOpened},[c.EventEdit]:{type:u.PersonalEventOpened},[c.CreateLink]:{type:u.CreateLinkPanelOpened},[c.CreateLTI]:{type:u.CreateLTIPanelOpened},[c.ScormSettings]:{type:u.ScormSettingsOrFileUploaderOpened},[c.PreviewScorm]:{type:u.PreviewScormOpened},[c.DiscussionBoard]:{type:u.DiscussionBoardOpened},[c.CourseGrades]:{type:u.CourseGradeOpened},[c.ScormAnalysisReport]:{type:u.ScormAnalysisReportOpened},[c.PartnerTool]:{type:u.PartnerToolOpened},[c.EditFolder]:{type:u.EditFolderOpened,prevState:b},[c.EditLTI]:{type:u.EditLTIOpened,prevState:b},[c.EditPlacement]:{type:u.EditPlacementOpened,prevState:b},[c.Tools]:{type:u.ToolsOpened},[c.Messages]:{type:u.MessagesOpened},[c.CourseGroupEnroll]:{type:u.CourseGroupEnrollOpened},[c.AttendanceStudentView]:{type:u.AttendanceStudentViewOpened},[c.StudentScormOverview]:{type:u.StudentScormOverviewOpened},[c.AssessmentAttemptSubmissionFeedback]:{type:u.AssessmentAttemptSubmissionFeedbackOpened},[c.DocumentSettings]:{type:u.DocumentSettingsOpened},[c.OverallGradeSettings]:{type:u.OverallGradeSettingsOpened},[c.TotalCalculationSettings]:{type:u.TotalCalculationSettingsOpened},[c.InstitutionAdminPage]:{type:u.InstitutionAdminPageOpened},[c.InstitutionPage]:{type:u.InstitutionPageOpened},[c.BrandDetail]:{type:u.BrandDetailOpened},[c.CreateModule]:{type:u.CreateModuleOpened},[c.EditModule]:{type:u.CreateModuleOpened},[c.IpContentCollection]:{type:u.ContentCollectionOpened},[c.GradeSettings]:{type:u.GradeSettingsOpened},[c.BrowserSettings]:{type:u.BrowserSettingOpened},[c.IpViewLinks]:{type:u.IpViewLinksOpened},[c.IpColorSelection]:{type:u.IpColorSelectionOpened},[c.GradeDownloadSettings]:{type:u.GradeDownloadSettingsOpened},[c.CourseOutline]:{type:u.CourseContentOpened},[c.DownloadTestResults]:{type:u.DownloadTestResultsOpened},[c.AssessmentOverviewMultipleAttempt]:{type:u.AssessmentOverviewMultipleAttemptOpened},[c.AssessmentOverviewAttemptReview]:{type:u.AssessmentOverviewAttemptReviewOpened},[c.DiscussionDetails]:{type:u.DiscussionDetailsOpened,prevState:b},[c.OverallGrade]:{type:u.OverallGradeOpened},[c.AssessmentOverviewAttemptReviewInlineRubrics]:{type:u.AssessmentOverviewAttemptReviewInlineRubricsOpened},[c.GradeUpload]:{type:u.GradeUploadOpened},[c.GradeSubmissionReceipt]:{type:u.GradeSubmissionReceiptOpened},[c.CourseSettings]:{type:u.CourseSettingsPanelOpened},[c.FileManagement]:{type:u.FileManagementPanelOpened},[c.CourseActivityAnalytics]:{type:u.CourseActivityAnalyticsOpened},[c.TelemetryAlertSettings]:{type:u.AlertSettingsOpened},[c.CourseGroups]:{type:u.CourseGroupsOpened},[c.CourseGroupsStudent]:{type:u.CourseGroupsStudentOpened},[c.GroupSpace]:{type:u.GroupSpaceOpened}},S={[c.QuestionGoalAlignmentForStudent]:{type:u.AttemptGoalAlignmentClosed},[c.RubricEvaluation]:{type:u.AttemptRubricClosed},[c.RubricView]:{type:u.AttemptRubricClosed},[c.AssessmentSubmissionFeedbackTab]:{type:u.AttemptFeedbackClosed},[c.AssessmentSubmissionFeedback]:{type:u.AttemptFeedbackClosed},[c.DiscussionParticipants]:{type:u.DiscussionParticipantsClosed},[c.SubmissionList]:{type:u.SubmissionListClosed},[c.DiscussionFeedback]:{type:u.DiscussionFeedbackClosed},[c.JournalSetting]:{type:u.JournalSettingsClosed},[c.JournalDetail]:{type:u.JournalDetailsClosed},[c.JournalParticipationDetail]:{type:u.JournalParticipationDetailClosed},[c.EnrolUsers]:{type:u.EnrollUsersClosed},[c.EditEnrollment]:{type:u.EditEnrollmentClosed},[c.Description]:{type:u.DescriptionClosed},[c.GroupSetList]:{type:u.GroupSetListClosed},[c.GroupSetDetail]:{type:u.GroupSetDetailClosed},[c.CourseEditBanner]:{type:u.CourseEditBannerClosed},[c.CourseSettings]:{type:u.CourseSettingsPanelClosed},[c.FileManagement]:{type:u.FileManagementPanelClosed},[c.Attendance]:{type:u.AttendanceClosed},[c.AttendanceSettings]:{type:u.AttendanceSettingsClosed},[c.AttendanceStudentRecords]:{type:u.AttendanceStudentRecordsClosed},[c.AnnouncementDetail]:{type:u.AnnouncementDetailClosed},[c.AnnouncementList]:{type:u.AnnouncementListClosed},[c.BooksAndTools]:{type:u.BooksAndToolsClosed},[c.ContentMarket]:{type:u.ContentMarketClosed},[c.QuestionBanks]:{type:u.QuestionBanksClosed},[c.ClassSchedule]:{type:u.ClassScheduleClosed},[c.CourseMessages]:{type:u.CourseMessageListClosed},[c.CreateMessage]:{type:u.CreateMessageClosed},[c.CourseCalendar]:{type:u.CourseCalendarClosed},[c.CourseCalendarCreateEvent]:{type:u.CourseCalendarCreateNewEventClosed},[c.CourseCalendarOfficeHours]:{type:u.CourseCalendarOfficeHoursClosed},[c.DiscussionSettings]:{type:u.DiscussionSettingsClosed},[c.DiscussionsSettings]:{type:u.DiscussionsSettingsClosed},[c.DiscussionTelemetry]:{type:u.DiscussionTelemetryClosed},[c.NewMessage]:{type:u.NewMessagePanelClosed},[c.CreateFolder]:{type:u.NewFolderPanelClosed},[c.CreateContent]:{type:u.NewContentItemPanelClosed},[c.CourseGroup]:{type:u.CourseGroupClosed},[c.AdminAnnouncement]:{type:u.AdminAnnouncementClosed},[c.AssessmentSettings]:{type:u.AssessmentSettingsClosed},[c.PerAssessmentSettings]:{type:u.PerAssessmentSettingsClosed},[c.PerAssessmentGroupSettings]:{type:u.PerAssessmentGroupSettingsClosed},[c.SubmissionGrading]:{type:u.SubmissionGradingClosed},[c.AssessmentSubmissionGradingFeedbackTab]:{type:u.SubmissionGradingFeedbackTabClosed},[c.GradesBulkDownload]:{type:u.GradesBulkDownloadClosed},[c.QuestionGoalAlignmentForInstructor]:{type:u.QuestionGoalAlignmentForInstructorClosed},[c.GoalPickerLegacy]:{type:u.GoalPickerLegacyClosed},[c.CourseGradesAccommodations]:{type:u.CourseGradeAccommodationClosed},[c.ContentCopy]:{type:u.ContentCopyPanelClosed},[c.BulkEditContent]:{type:u.BulkEditContentPanelClosed},[c.ImportContent]:{type:u.ImportContentPanelClosed},[c.Exports]:{type:u.ExportsPanelClosed},[c.ContentCollectionSettings]:{type:u.ContentCollectionSettingClosed},[c.ContentCollectionPicker]:{type:u.ContentCollectionPickerClosed},[c.CourseGradesAddItem]:{type:u.CourseGradesAddItemClosed},[c.CourseGradesAddItemCalculation]:{type:u.CourseGradesAddItemCalculationClosed},[c.CourseGradesViewIndividualGrade]:{type:u.CourseGradesIndividualGradeClosed},[c.QuestionAnalysisReport]:{type:u.QuestionAnalysisReportClosed},[c.QuestionAnalysis]:{type:u.QuestionAnalysisClosed},[c.QuestionAnalyticsScorm]:{type:u.QuestionAnalyticsScormReportClosed},[c.CourseQuestionAnalysisReport]:{type:u.CourseQuestionAnalysisReportClosed},[c.EventEdit]:{type:u.PersonalEventClosed},[c.StudentActivity]:{type:u.StudentActivityClosed},[c.Roster]:{type:u.RosterClosed},[c.Journal]:{type:u.JournalClosed},[c.Discussion]:{type:u.DiscussionClosed},[c.Document]:{type:u.DocumentClosed},[c.AssessmentInst]:{type:u.AssessmentClosed},[c.CreateLink]:{type:u.CreateLinkPanelClosed},[c.CreateLTI]:{type:u.CreateLTIPanelClosed},[c.ScormSettings]:{type:u.ScormSettingsClosed},[c.Collab]:{type:u.CollabClosed},[c.PreviewScorm]:{type:u.PreviewScormClosed},[c.GradedScormInst]:{type:u.GradedScormInstClosed},[c.CourseOutline]:{type:u.CourseContentClosed},[c.CourseGrades]:{type:u.CourseGradeClosed},[c.ScormAnalysisReport]:{type:u.ScormAnalysisReportClosed},[c.PartnerTool]:{type:u.PartnerToolClosed},[c.EditFolder]:{type:u.EditFolderClosed},[c.EditLTI]:{type:u.EditLTIClosed},[c.EditPlacement]:{type:u.EditPlacementClosed},[c.Tools]:{type:u.ToolsClosed},[c.Messages]:{type:u.MessageClosed},[c.ReleaseCondition]:{type:u.ReleaseConditionPanleClosed},[c.GradeBookOverAllGrade]:{type:u.CourseGradesOverallGradeSetupClosed},[c.AssessmentDetails]:{type:u.AssessmentDetailsClosed},[c.AssessmentAttemptSubmissionFeedback]:{type:u.AssessmentAttemptSubmissionFeedbackClosed},[c.DocumentSettings]:{type:u.DocumentSettingsClosed},[c.GradeAndFeedback]:{type:u.GradeAndFeedbackClosed},[c.AssessmentOverview]:{type:u.AssessmentOverviewClosed},[c.AssessmentOverviewAttempt]:{type:u.AssessmentOverviewAttemptClosed},[c.OverallGradeSettings]:{type:u.OverallGradeSettingsClosed},[c.TotalCalculationSettings]:{type:u.TotalCalculationSettingsClosed},[c.InstitutionAdminPage]:{type:u.InstitutionAdminPageClosed},[c.InstitutionPage]:{type:u.InstitutionPageClosed},[c.BrandDetail]:{type:u.BrandDetailClosed},[c.CreateModule]:{type:u.CreateModuleClosed},[c.EditModule]:{type:u.CreateModuleClosed},[c.BrowserSettings]:{type:u.BrowserSettingClosed},[c.IpContentCollection]:{type:u.ContentCollectionClosed},[c.GradeSettings]:{type:u.GradeSettingsClosed},[c.EditIpLinkImage]:{type:u.EditLinkImageClosed},[c.IpViewLinks]:{type:u.IpViewLinksClosed},[c.IpColorSelection]:{type:u.IpColorSelectionClosed},[c.GradeDownloadSettings]:{type:u.GradeDownloadSettingsClosed},[c.MultipleAttemptGrading]:{type:u.MultipleAttemptGradingClosed},[c.EditFileSettings]:{type:u.EditFileSettingsClosed},[c.DownloadTestResults]:{type:u.DownloadTestResultsClosed},[c.AssessmentOverviewMultipleAttempt]:{type:u.AssessmentOverviewMultipleAttemptClosed},[c.AssessmentOverviewAttemptReview]:{type:u.AssessmentOverviewAttemptReviewClosed},[c.DiscussionDetails]:{type:u.DiscussionDetailsClosed},[c.OverallGrade]:{type:u.OverallGradeClosed},[c.AssessmentOverviewAttemptReviewInlineRubrics]:{type:u.AssessmentOverviewAttemptReviewInlineRubricsClosed},[c.GradeUpload]:{type:u.GradeUploadClosed},[c.GradeSubmissionReceipt]:{type:u.GradeSubmissionReceiptClosed},[c.CourseActivityAnalytics]:{type:u.CourseActivityAnalyticsClosed},[c.TelemetryAlertSettings]:{type:u.AlertSettingsClosed},[c.CourseGroups]:{type:u.CourseGroupsClosed},[c.CourseGroupsStudent]:{type:u.CourseGroupsStudentClosed},[c.GroupSpace]:{type:u.GroupSpaceClosed}};function C(){let e=window.webkit;return!!e&&!!e.messageHandlers&&!!e.messageHandlers.MobileApp}function E(){return!!window.MobileApp}function I(){return C()||E()}function w(e){return null==e?void 0:e.split(".peek.").pop()}function A(e){try{if(C()&&window.webkit.messageHandlers.MobileApp.postMessage(e),E()){let t=JSON.stringify(e);window.MobileApp.sendMessageToMobile(t)}}catch(e){console.error(e)}}let k=new Map;function T(e){var t;if(!e)return;let n=document.querySelector("#preview-iframe");if(n&&n.contentWindow){null===(t=n.contentWindow.mobileAPI)||void 0===t||t.onMobileEventHandler(e);return}let i=JSON.parse(e);if(!i||!i.correlationId)return;let r=k.get(i.correlationId);r&&(i.status===h.Fail?r.error(i):r.next(i))}function P(e){window.mobileAPI.onMobileEventHandler=T;let t=(0,f.v4)();return{response:new g.y(n=>{k.set(t,n),A({...e,correlationId:t})}),correlationId:t}}function D(e){let t=k.get(e);t&&(t.complete(),k.delete(e))}function x(e){A({type:e,status:h.Success})}function R(e,t,n){e===d.OpenCourseMessage||e===d.OpenCreateMessages?n.goPeekState(c.CourseMessageList,t).then(()=>{n.goPeekState(v[e],t)}):n.goPeekState(v[e],t)}function L(e,t,n){n.goPeekState(c.CourseOutline,t).then(()=>{R(e,t,n)})}function N(e){window.mobileAPI.dismissPanel=e}function $(e){window.mobileAPI.goToPeekState=(t,n)=>{var i,r;if(!t)return;let s=function(e,t){let n={};switch(e){case d.OpenDocument:n.courseId=t.courseId,n.id=t.contentId;break;case d.OpenAdminAnnouncement:n.streamEntryId=t.contentId;break;case d.OpenCourseAnnouncement:n.courseId=t.courseId,n.announcementId=t.contentId;break;case d.OpenCourseMessage:n.courseId=t.courseId,n.conversationId=t.contentId,n.offset=0,n.count=5;break;case d.OpenAssessmentInstView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="details";break;case d.OpenAssessmentSubmissionView:n.courseId=t.courseId,n.contentId=t.contentId,n.gradeitemView="students";break;default:n=t}return n}(t,n),o=null===(i=e.current.name)||void 0===i?void 0:i.split(".peek.").pop();t===d.OpenPersonalEvent||t===d.OpenCalendarEvent||t===d.OpenAdminAnnouncement?e.goToRoute(c.ActivityStream).then(()=>{R(t,s,e)}):t===d.OpenAdminInstitutionPage||t===d.OpenInstitutionPage||t===d.OpenTools?o===c.EventEdit||o===c.AdminAnnouncement?e.leavePeekState().then(()=>{e.goToRoute(v[t])}):e.goToRoute(v[t]):o===c.EventEdit||o===c.AdminAnnouncement?e.leavePeekState().then(()=>{e.goToRoute(c.CourseTimeline).then(()=>{L(t,s,e)})}):s&&s.courseId&&s.courseId!==(null===(r=e.params)||void 0===r?void 0:r.courseId)?o===c.CourseTimeline?t!==d.OpenCourse?L(t,s,e):e.goPeekState(c.CourseOutline,s):o!==c.CourseTimeline&&(t!==d.OpenCourse?e.goToRoute(c.CourseTimeline).then(()=>{L(t,s,e)}):e.goToRoute(c.CourseTimeline).then(()=>{e.goPeekState(c.CourseOutline,s)})):o===c.CourseTimeline?R(t,s,e):o===c.Discussion?e.leavePeekState().then(()=>{L(t,s,e)}):L(t,s,e)}}function O(e){I()?(document.body.classList.add("is-in-mobile-app"),window.mobileAPI={onMobileEventHandler:T,closeCurrentPanel:()=>(function(e){var t;let n=document.querySelector("#preview-iframe");n&&n.contentWindow?null===(t=n.contentWindow.mobileAPI)||void 0===t||t.closeCurrentPanel():e.leavePeekState()})(e),goToPeekState:()=>$(e)}):window.mobileAPI={onMobileEventHandler:()=>{},closeCurrentPanel:()=>{},goToPeekState:()=>{}}}function G(e,t){if(I())try{let n;e&&y[e]?(n=y[e],A({...n,prevState:n.prevState?t:void 0,status:h.Success})):t&&S[t]&&(n=S[t],A({...n,status:h.Success}))}catch(e){console.error(e)}}},311822:function(e,t,n){"use strict";n.d(t,{Dy:function(){return s.D},P2:function(){return r.P},_X:function(){return i._},gk:function(){return o.g}});var i=n(812809);n(820488);var r=n(180665),s=n(332170),o=n(34625)},936472:function(e,t,n){"use strict";n.d(t,{sF:function(){return P},ju:function(){return m},uZ:function(){return D},zt:function(){return tJ},xZ:function(){return k},Qn:function(){return t0},oj:function(){return tX},a6:function(){return tY}});var i,r,s,o,a,l,c,d,u,p,m,h,g=n(847969),f=n(202784),b=n(174897),v=n(928316),y=n(44432),S=n(50635),C=n(236351),E=n(327355),I=n(986709),w=n(609582);let A=["StudentActivityAvailable","StudentGradeDataAvailable","StudentsMissedDueDates","StudentsFallingBehindAbsent","StudentsFallingBehindFailing","NoRecentActivity","GradeAtRisk_GradeInLowest","GradeAtRisk_GradeBelowThreshold","GradeLowered","LowActivity","PerformanceIncreased_GradeIncreased","PerformanceIncreased_ActivityIncreased","HighActivity","HighGrade","Calendar","BlogEntryPosted","BlogEntryEdited","BlogEntryComment","JournalEntryPosted","JournalEntryEdited","JournalEntryComment","WikiEntryPosted","WikiEntryEdited","WikiEntryComment"],k={version:1,settings:A.map(e=>({id:e,isEnabled:!0,isEditable:!0}))};var T=n(715729);let P="NN",D="ultraui.stream.admin.settings";(i=c||(c={})).Email="EM",i.Mobile="MO",i.Stream="DA",(r=d||(d={})).DefaultOn="defaultOn",r.DefaultOff="defaultOff",r.AlwaysOn="alwaysOn",r.AlwaysOff="alwaysOff",r.NotApplicable="notApplicable";let x=e=>R(e&&e.value?function(e,t){let n={version:e.version,settings:[...e.settings]};return t.forEach(t=>{-1===(null==e?void 0:e.settings.findIndex(e=>e.id===t))&&(null==n||n.settings.push({id:t,isEnabled:!0,isEditable:!0}))}),n}(JSON.parse(e.value),A):F()),R=e=>{let t=[];return e.settings.forEach(e=>{t.push({context:I.afs.Course,source:P,event:e.id,method:c.Stream,isEnabled:e.isEnabled,isEditable:e.isEditable})}),L(t)},L=e=>{let t={};return e.forEach(e=>{let n=$(e),i="ns.admin.description."+n.toLowerCase().replace(/_/g,".");if(Object.prototype.hasOwnProperty.call(t,n))t[n].modalities[e.method]={...e,isDirty:!1};else{let r={};r[e.method]={...e,isDirty:!1},t[n]={key:n,title:i,modalities:r}}}),t},N=(e,t)=>Object.values(e).filter(t),$=e=>e.context.toString()+"_"+e.source+"_"+e.event,O=(e,t,n)=>void 0===t?e:e.sort((e,i)=>{let r=n(e.title),s=n(i.title);return t===w.SortDirection.Ascending?r.localeCompare(s):s.localeCompare(r)}),G=(e,t,n,i,r)=>{let s={...e},o=(0,T.ZP)(s[t].modalities[n.toString()],e=>{e.isEnabled=i,e.isEditable=r,e.isDirty=!0});if(s[t].modalities[n.toString()]=o,U(t)){let o=t.split("_");o[0]="ORG";let a=o.join("_"),l=(0,T.ZP)(e[a].modalities[n.toString()],e=>{e.isEditable=r,e.isEnabled=i,e.isDirty=!0});s[a].modalities[n.toString()]=l}return s},_=e=>Object.keys(e).some(t=>Object.keys(e[t].modalities).some(n=>e[t].modalities[n].isDirty)),M=e=>Object.keys(e).reduce((t,n)=>(U(n)&&Object.keys(e[n].modalities).forEach(i=>{let r=e[n].modalities[i];!0===r.isDirty&&t.push((0,T.ZP)(r,e=>{delete e.isDirty}))}),t),[]),B=e=>({key:D,value:JSON.stringify({version:1,settings:Object.keys(e).reduce((t,n)=>{if(!U(n)){let i=n.split(`_${P}_`).pop(),r=e[n].modalities[c.Stream];t.push({id:i,isEnabled:r.isEnabled,isEditable:r.isEditable})}return t},[])})}),F=()=>{let e={version:1,settings:[]};return A.forEach(t=>{e.settings.push({id:t,isEnabled:!0,isEditable:!0})}),e},U=e=>{let t=e.split(`_${P}_`).pop();return void 0===t||0>A.indexOf(t)};class V extends f.PureComponent{render(){let{localize:e,defaultSetting:t,modality:n,onChange:i,analyticsId:r,classes:s}=this.props,{translate:o}=e;return t===d.NotApplicable?f.createElement("div",{className:s.notApplicable},o("ns.admin.modality.option.notApplicable")):f.createElement(w.Dropdown,{defaultSelectedKey:t,options:[{key:d.DefaultOn,text:o("ns.admin.modality.option.defaultOn"),className:"js-default-on"},{key:d.DefaultOff,text:o("ns.admin.modality.option.defaultOff"),className:"js-default-off"},{key:d.AlwaysOn,text:o("ns.admin.modality.option.alwaysOn"),className:"js-always-on"},{key:d.AlwaysOff,text:o("ns.admin.modality.option.alwaysOff"),className:"js-always-off"}],onChanged:e=>{let t,r;switch(e.key.toString()){case"defaultOff":t=!1,r=!0;break;case"alwaysOn":t=!0,r=!1;break;case"alwaysOff":t=!1,r=!1;break;default:t=!0,r=!0}i(n,t,r)},label:o("ns.admin.dropdownLabel"),analyticsId:`${r}`})}}let H=(0,C.X)((0,E.withStyles)(e=>(0,E.createStyles)({notApplicable:{color:e.palette.text.secondary,fontStyle:"italic"}}),{name:"NotificationMenu"})(V));class q extends f.PureComponent{render(){let{localize:e,key:t,modalityList:n,onChange:i,analyticsId:r,classes:s}=this.props,{translate:o}=e;return f.createElement("table",{className:s.accordionSetting},f.createElement("tbody",null,f.createElement("tr",{className:s.accordionModality},f.createElement("td",{className:s.accordionModalityName},o("ns.admin.modality.type.stream")),f.createElement("td",{className:s.accordionModalityOption},f.createElement(H,{key:t,modality:c.Stream,defaultSetting:n[0],onChange:i,analyticsId:`${r}.streamMenu`}))),f.createElement("tr",{className:s.accordionModality},f.createElement("td",{className:s.accordionModalityName},o("ns.admin.modality.type.email")),f.createElement("td",{className:s.accordionModalityOption},f.createElement(H,{key:t,modality:c.Email,defaultSetting:n[1],onChange:i,analyticsId:`${r}.emailMenu`}))),f.createElement("tr",{className:s.accordionModality},f.createElement("td",{className:s.accordionModalityName},o("ns.admin.modality.type.mobile")),f.createElement("td",{className:s.accordionModalityOption},f.createElement(H,{key:t,modality:c.Mobile,defaultSetting:n[2],onChange:i,analyticsId:`${r}.mobileMenu`})))))}}let j=(0,C.X)((0,E.withStyles)(e=>(0,E.createStyles)({accordionSetting:{width:"100%"},accordionModality:{height:"62px",borderBottom:`1px solid ${e.palette.secondary.light}`,"&:last-child":{borderBottom:"none"}},accordionModalityName:{paddingLeft:"20px"},accordionModalityOption:{width:"180px",paddingRight:"20px"}}),{name:"AccordionTabContent"})(q));var z=n(188505),W=n(927335),K=n(958299);class Z extends f.PureComponent{render(){let{analyticsId:e,ariaLabel:t,content:n,classes:i}=this.props,r="notificationSettingsTooltip";return f.createElement(z.AnalyticsTooltip,{title:n,id:r,analyticsId:`${e}.tooltip`},f.createElement("div",{className:i.iconButtonWrapper},f.createElement(K.AnalyticsIconButton,{className:"tooltip-button","aria-label":t,"aria-describedby":r,"data-is-visible":!0,analyticsId:`${e}.tooltipButton`},f.createElement(W.Information,null))))}}let Q=(0,E.withStyles)(e=>(0,E.createStyles)({iconButtonWrapper:{"& .tooltip-button":{color:e.palette.secondary.main,[e.breakpoints.up("md")]:{color:e.palette.text.secondary}}}}),{name:"NotificationSettingsTooltipBase"})(Z);var J=n(120506);let Y=f.createContext({});var X=n(259197),ee=n(267345),et=n(906277);let en=new Set(["COURSE_NN_PerformanceIncreased_ActivityIncreased","COURSE_NN_NoRecentActivity","COURSE_NN_GradeAtRisk_GradeInLowest","COURSE_NN_GradeAtRisk_GradeBelowThreshold","COURSE_NN_GradeLowered","COURSE_NN_LowActivity","COURSE_NN_PerformanceIncreased_GradeIncreased","COURSE_NN_HighActivity","COURSE_NN_HighGrade"]),ei=new Set(["COURSE_NN_StudentsMissedDueDates"]),er=e=>{let{howAmIDoingFeatureFlagData:t,missedDueDatesFeatureFlagData:n}=e;return{isHowAmIDoingFeatureFlagEnabled:(null==t?void 0:t.flagValue)==="true",isMissedDueDatesFeatureFlagEnabled:(null==n?void 0:n.flagValue)==="true",filterByCoursePrefix:!0}},es=e=>!en.has(e.key),eo=e=>!ei.has(e.key),ea=e=>e.key.startsWith("COURSE_"),el=()=>!0,ec=e=>{let{filterByCoursePrefix:t,isHowAmIDoingFeatureFlagEnabled:n,isMissedDueDatesFeatureFlagEnabled:i}=e,r=[];return t&&r.push(ea),n||r.push(es),i||r.push(eo),r.length>0?r:[el]},ed=e=>t=>ec(e).every(e=>e(t)),eu="notificationSetttings.adminPanel";class ep extends f.Component{constructor(e){super(e),this.onSettingChange=(e,t,n,i)=>{let r=G(this.state.notificationSettingsMap,n,i,e,t);this.setState(()=>({notificationSettingsMap:r}),()=>{this.props.onSettingChange()})},this.getModalitySetting=e=>e?e.isEditable?e.isEnabled?d.DefaultOn:d.DefaultOff:e.isEnabled?d.AlwaysOn:d.AlwaysOff:d.NotApplicable,this.createTableRows=e=>{let{t}=this.props;return e.map(e=>({key:e.key,cells:[f.createElement("span",null,t(e.title)),f.createElement(H,{key:e.key,modality:c.Stream,defaultSetting:this.getModalitySetting(e.modalities[c.Stream]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${eu}.streamMenu`}),f.createElement(H,{key:e.key,modality:c.Email,defaultSetting:this.getModalitySetting(e.modalities[c.Email]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${eu}.emailMenu`}),f.createElement(H,{key:e.key,modality:c.Mobile,defaultSetting:this.getModalitySetting(e.modalities[c.Mobile]),onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),analyticsId:`${eu}.mobileMenu`})]}))},this.createAccordionTabs=e=>{let{t}=this.props;return e.map(e=>f.createElement(w.AccordionTab,{key:e.key,title:t(e.title),expanded:!1,showExpander:!0,borderSize:ee.Separator.Thin,className:this.props.classes.accordionNotificationTab,contents:f.createElement(j,{key:e.key,onChange:(t,n,i)=>this.onSettingChange(n,i,e.key,t),modalityList:[this.getModalitySetting(e.modalities[c.Stream]),this.getModalitySetting(e.modalities[c.Email]),this.getModalitySetting(e.modalities[c.Mobile])],analyticsId:`${eu}.accordionTabContent`}),analyticsId:`${eu}.accordianTab`}))},this.handleTitleSort=e=>{this.setState(()=>({sortDirection:e}))},this.saveChanges=e=>{_(e)&&(this.props.persistAdminNotificationMethodSettings(M(e)),this.props.persistAdminRegistrySettings(B(e))),this.props.closePanel()},this.onSpinner=()=>f.createElement("div",{className:this.props.classes.spinnerWrapper},f.createElement(w.Spinner,{size:w.SpinnerSize.xLarge})),this.footer=()=>{let{t:e}=this.props;return f.createElement(w.BbPanelFooter,{primaryButtonProps:{text:e("ns.admin.save"),onClick:()=>this.saveChanges(this.state.notificationSettingsMap)},secondaryButtonProps:{text:e("ns.admin.cancel"),onClick:this.props.closePanel},analyticsId:`${eu}.panelFooter`})},this.state={sortDirection:w.SortDirection.Ascending,isLoading:!0,notificationSettingsMap:{}}}onRender(){var e;let{t,classes:n}=this.props,i=[{key:"notification",name:t("ns.admin.notification"),onSort:this.handleTitleSort},{key:"stream",name:t("ns.admin.modality.type.stream")},{key:"email",name:t("ns.admin.modality.type.email")},{key:"mobile",name:t("ns.admin.modality.type.mobile")}],r=N(this.state.notificationSettingsMap,ed(er(this.props)));r=O(r,this.state.sortDirection,t);let s=this.createTableRows(r),o=this.createAccordionTabs(r);return(null===(e=this.props.UltraWindowSize)||void 0===e?void 0:e.isLargeBreakpoint())?f.createElement(w.SortableTable,{hasActionableCells:!0,headers:i,rows:s,tableName:t("ns.admin.title"),analyticsId:`${eu}.sortableTable`}):f.createElement("ul",{className:n.accordionTabList},o)}render(){let{t:e,classes:t}=this.props,{isLoading:n}=this.state,i=n?this.onSpinner():this.onRender(),r=n?null:this.footer(),s=e("ns.admin.pageHelpUrl");return f.createElement(Y.Provider,{value:{}},f.createElement("div",{className:(0,et.Z)("react-container",t.adminPanelWrapper)},f.createElement("div",{className:t.headerWrapper},f.createElement(w.BbPanelHeader,{type:w.BbPanelType.full,title:e("ns.admin.title"),panelContentRight:f.createElement(Q,{content:e("ns.admin.tooltipContent"),ariaLabel:e("ns.admin.tooltipAriaLabel"),analyticsId:eu}),analyticsId:`${eu}.panelHeader`,navMenuAriaLabel:e("global.navigationMenu")})),i,f.createElement("div",{className:t.pageHelpWrapper},f.createElement(w.PageHelp,{url:s,className:"notification-admin-page-help",analyticsId:`${eu}.pageHelp`})),r))}componentDidMount(){let{loadAdminNotificationSettings:e,loadAdminRegistrySettings:t,loadFeatureFlag:n}=this.props;n({flagKey:X.x40.HowAmIDoingReport}),n({flagKey:X.x40.MissedDueDates}),e(),t({key:D})}static getDerivedStateFromProps(e,t){var n,i;if(!e.isSystemPreferenceLoading&&!(null===(n=e.howAmIDoingFeatureFlagData)||void 0===n?void 0:n.isLoading)&&!(null===(i=e.missedDueDatesFeatureFlagData)||void 0===i?void 0:i.isLoading)&&t.isLoading&&e.adminNotificationSettings.length>0){let t=L(e.adminNotificationSettings),n=x(e.adminRegistrySettings);return{notificationSettingsMap:{...t,...n},isLoading:!1}}return null}}let em=(0,y.$j)(e=>({adminNotificationSettings:X.Ys.notificationMethodSetting.getAdminNotificationMethodSettings(e),adminRegistrySettings:X.Ys.systemPreference.getSystemPreferenceByKey(e,D),isSystemPreferenceLoading:X.Ys.systemPreference.isSystemPreferenceLoading(e,D),howAmIDoingFeatureFlagData:X.Ys.featureFlags.getFeatureFlagValue(e,X.x40.HowAmIDoingReport),missedDueDatesFeatureFlagData:X.Ys.featureFlags.getFeatureFlagValue(e,X.x40.MissedDueDates)}),{loadAdminNotificationSettings:X.Nwg.notificationMethodSetting.loadAdminNotificationMethodSettings,persistAdminNotificationMethodSettings:X.Nwg.notificationMethodSetting.persistAdminNotificationMethodSettings,loadAdminRegistrySettings:X.Nwg.systemPreference.loadSystemPreference,persistAdminRegistrySettings:X.Nwg.systemPreference.persistSystemPreference,loadFeatureFlag:X.Nwg.featureFlags.loadFeatureFlagValueByKey})((0,S.H)((0,J.windowResizingResponsiveComponentWrapper)((0,E.withStyles)(e=>(0,E.createStyles)({accordionNotificationTab:{backgroundColor:e.palette.background.default,marginBottom:"12px"},accordionTabList:{overflow:"auto",listStyle:"none",margin:"0",padding:"20px"},adminPanelWrapper:{position:"absolute",left:0,right:0,top:0,bottom:0,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.b3,"& .ms-Panel-header":{[e.breakpoints.up("md")]:{padding:"0 30px"}},"& .bb-AccordionTab-Title-Container":{fontWeight:e.typography.fontWeightSemiBold,padding:"12px 20px"},"& .bb-SortableTable":{padding:"30px"},"& .bb-SortableTableHeaderCell":{borderTop:"none"},"& .ms-Dropdown-label":{position:"absolute",width:"1px",height:"1px",margin:"-1px",padding:"0",overflow:"hidden",border:"0"}},headerWrapper:{backgroundColor:e.palette.background.default},spinnerWrapper:{position:"absolute",left:"50%",top:"50%",marginLeft:"-25px"},pageHelpWrapper:{transition:"top 250ms cubic-bezier(0.55, 0, 0.1, 1)","text-align":"right","z-index":"9999","margin-top":"-38px","pointer-events":"none","& .notification-admin-page-help":{position:"relative",right:"32px",top:"-10px",a:{"pointer-events":"auto"}}}}),{name:"NotificationAdminPanel"})(ep)))),eh=e=>class extends f.PureComponent{render(){return f.createElement(eg.Consumer,null,t=>f.createElement(e,{...t,...this.props}))}},eg=f.createContext({});(s=u||(u={})).Guest="GUEST",s.Instructor="INSTRUCTOR",s.Student="STUDENT",s.Dual="DUAL",s.None="NONE";var ef=u;let eb={InstitutionAnnouncements:{id:"InstitutionAnnouncements",displayKey:"ns.streams.category.InstitutionAnnouncements"},CourseAnnouncements:{id:"CourseAnnouncements",displayKey:"ns.streams.category.CourseAnnouncements"},GradedItemDue:{id:"GradedItemDue",displayKey:"ns.streams.category.GradedItemDue"},NewMessages:{id:"NewMessages",displayKey:"ns.streams.category.NewMessages"},NewContent:{id:"NewContent",displayKey:"ns.streams.category.NewContent"},GradesPosted:{id:"GradesPosted",displayKey:"ns.streams.category.GradesPosted"},NewGradeableItems:{id:"NewGradeableItems",displayKey:"ns.streams.category.NewGradeableItems"},GradesNeedReconciling:{id:"GradesNeedReconciling",displayKey:"ns.streams.category.GradesNeedReconciling"},StudentPerformanceAlert:{id:"StudentPerformanceAlert",displayKey:"ns.streams.category.StudentPerformanceAlert"},Discussion:{id:"Discussion",displayKey:"ns.streams.category.Discussion"},GradesAndActivity:{id:"GradesAndActivity",displayKey:"ns.streams.category.GradesAndActivity"},Calendar:{id:"Calendar",displayKey:"ns.streams.category.Calendar"},CourseAvailable:{id:"CourseAvailable",displayKey:"ns.streams.category.CourseAvailable"},Blog:{id:"Blog",displayKey:"ns.streams.category.Blog"},Journal:{id:"Journal",displayKey:"ns.streams.category.Journal"},Wiki:{id:"Wiki",displayKey:"ns.streams.category.Wiki"}};var ev=n(568076),ey=n(675689);let eS=e=>(0,E.createStyles)({accordionTitleContainer:{display:"flex",alignItems:"center",boxShadow:`0 -1px 0 0 ${e.palette.background.b9} inset`},accordionTitleContents:{flex:"1 1 auto"},accordionContents:{borderBottom:`1px solid ${e.palette.border.main}`},accordionIconButton:{height:"58px"},styledAccordionList:{listStyle:"none",margin:0}}),eC=0;class eE extends f.Component{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation(),e.preventDefault(),this.props.onToggle()}}render(){return f.createElement(K.AnalyticsIconButton,{className:(0,et.Z)("js-accordion-expander",this.props.classes.accordionIconButton),onClick:this.onClick,"aria-label":this.props.expanderAriaLabel,"aria-expanded":this.props.open,analyticsId:`${this.props.analyticsId}.${this.props.open?"close":"open"}.items.button`},this.props.open?f.createElement(ey.ArrowUp,null):f.createElement(ey.ArrowDown,null))}}let eI=(0,E.withStyles)(eS,{name:"AccordionExpander"})(eE);class ew extends f.PureComponent{constructor(e){super(e),this.state={id:"accordion_"+eC},eC+=1}render(){let{contents:e,expanded:t,onToggle:n,showExpander:i,className:r,title:s,expanderAriaLabelledBy:o,analyticsId:a,expanderAriaLabel:l,classes:c}=this.props,{id:d}=this.state;return f.createElement("li",{className:`js-${r}`},f.createElement("div",{className:c.accordionTitleContainer},f.createElement("div",{className:c.accordionTitleContents},s),i&&f.createElement(eI,{open:t,onToggle:n,analyticsId:a,expanderAriaLabel:l})),t&&f.createElement("div",{className:c.accordionContents,id:`${d}_content`,"aria-labelledby":o},e))}}let eA=(0,E.withStyles)(eS,{name:"AccordionTab"})(ew),ek=e=>(0,E.createStyles)({categoryCheckbox:{margin:"8px 0",width:"100%"},categoryTriStateCheckboxStyles:{margin:"0"},categoryLabelStyles:{"& span:nth-of-type(2)":{fontSize:"16px",fontWeight:e.typography.fontWeightSemiBold,fontFamily:e.typography.fontFamily,paddingRight:"26px"}},categoryCheckboxStyles:{margin:"12px 0"},categoryList:{listStyle:"none"},categoryListItem:{display:"flex",alignItems:"center",":not(:last-child)":{boxShadow:`0 -1px 0 0 ${e.palette.border.main} inset`}}});class eT extends f.PureComponent{constructor(){super(...arguments),this.onToggle=(e,t)=>{let{definition:n,onSettingsUpdated:i}=this.props;if(i){let e={...this.props.currentSettings};e[n.id]={...e[n.id],isEnabled:t},i(e)}}}render(){var e;let{definition:t,localize:n,currentSettings:i,analyticsId:r,classes:s}=this.props,{translate:o}=n,a=null===(e=t.displayKey.split(".").pop())||void 0===e?void 0:e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l=!!(i&&i[t.id]&&i[t.id].isEnabled);return f.createElement("li",{className:s.categoryListItem,key:t.id},f.createElement(g.AnalyticsFormControlLabel,{label:o(t.displayKey),className:(0,et.Z)(`js-${a}-checkbox`,s.categoryCheckbox),htmlFor:`stream-settings-item-${t.id}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-settings-item-${t.id}`,onChange:this.onToggle,checked:l,analyticsId:`${r}.${l?"disable":"enable"}.checkbox`}),analyticsId:`${r}.${l?"disable":"enable"}.label`}))}}let eP=(0,C.X)(eh((0,E.withStyles)(ek,{name:"StreamSettingsItem"})(eT)));class eD extends f.PureComponent{constructor(e){super(e),this.onAccordionToggle=()=>{1!==this.props.availableNotifications.length&&this.setState(e=>({isOpen:!e.isOpen}))},this.onCategoryToggle=()=>{let e=this.getTriStateCheckboxState(),t={...this.props.currentSettings};this.props.availableNotifications.forEach(n=>{t[n.id]={...t[n.id],isEnabled:e===ev.CheckStateTypesEnum.PARTIAL||e===ev.CheckStateTypesEnum.UNCHECKED}}),this.props.onSettingsUpdated(t)},this.getTriStateCheckboxState=()=>{let e=this.props.availableNotifications.reduce((e,t)=>e+(this.props.currentSettings&&this.props.currentSettings[t.id]&&this.props.currentSettings[t.id].isEnabled?1:0),0);return e===this.props.availableNotifications.length?ev.CheckStateTypesEnum.CHECKED:e?ev.CheckStateTypesEnum.PARTIAL:ev.CheckStateTypesEnum.UNCHECKED},this.state={isOpen:!1}}getAccordionId(){return this.props.category.id.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}renderCheckbox(){let{localize:e,analyticsId:t,classes:n}=this.props,{translate:i}=e,r=this.getTriStateCheckboxState()===ev.CheckStateTypesEnum.CHECKED,s=this.getAccordionId();return f.createElement(g.AnalyticsFormControlLabel,{label:i(this.props.category.displayKey),className:(0,et.Z)(`js-${s}-category`,n.categoryCheckboxStyles,n.categoryLabelStyles),htmlFor:`stream-setting-label-${s}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-setting-label-${s}`,onChange:this.onCategoryToggle,checked:r,analyticsId:`${t}.item.${r?"disable":"enable"}.checkbox`}),analyticsId:`${t}.item.${r?"disable":"enable"}.label`})}renderTristateCheckbox(e){let{localize:t,analyticsId:n,classes:i}=this.props,{translate:r}=t,s=this.getTriStateCheckboxState(),o=this.getAccordionId(),a=s!==ev.CheckStateTypesEnum.CHECKED?"enable":"disable";return f.createElement(g.AnalyticsFormControlLabel,{label:r("ns.streams.category.itemWithMultipleContent",{categoryName:r(this.props.category.displayKey),numContents:e}),className:(0,et.Z)(`js-${o}-category`,i.categoryTriStateCheckboxStyles,i.categoryLabelStyles),htmlFor:`stream-setting-id-${o}`,control:f.createElement(g.AnalyticsCheckbox,{id:`stream-setting-id-${o}`,checked:this.getTriStateCheckboxState()===ev.CheckStateTypesEnum.CHECKED,indeterminate:this.getTriStateCheckboxState()===ev.CheckStateTypesEnum.PARTIAL,onChange:this.onCategoryToggle,analyticsId:`${n}.category.${a}.checkbox`}),analyticsId:`${n}.category.${a}.label`})}renderTitle(){let{availableNotifications:e}=this.props,t=e.length;return t>1?this.renderTristateCheckbox(t):this.renderCheckbox()}renderContents(){return f.createElement("ul",{className:this.props.classes.categoryList},this.props.availableNotifications.map(e=>f.createElement(eP,{definition:e,key:e.id,analyticsId:`${this.props.analyticsId}.${e.displayKey.replace(" ","")}`})))}render(){let e=this.props.availableNotifications.length>0,t=this.props.availableNotifications.length>1;if(!e)return null;let{translate:n}=this.props.localize;return f.createElement(eA,{title:this.renderTitle(),contents:this.renderContents(),className:this.getAccordionId(),expanded:this.state.isOpen,onToggle:this.onAccordionToggle,showExpander:t,expanderAriaLabel:n(this.props.category.displayKey),analyticsId:`${this.props.analyticsId}.category.tab`})}}let ex=(0,C.X)(eh((0,E.withStyles)(ek,{name:"StreamSettingsCategory"})(eD)));class eR extends f.PureComponent{constructor(){super(...arguments),this.filterSettings=e=>{let t={membership:this.getCurrentMembership(),settingsMap:this.props.notificationSettingsMap};return tJ.filter(n=>n.category===e&&n.isStreamSettingVisible(t))}}render(){return f.createElement("ul",{className:this.props.classes.styledAccordionList},Object.values(eb).map(e=>f.createElement(ex,{key:e.id,category:e,availableNotifications:this.filterSettings(e),analyticsId:`notificationSettings.stream.panel.categoryList.item.${e.displayKey.replace(" ","")}`})))}getCurrentMembership(){return this.props.userEnrolledInCourse?this.props.isInstructor&&!this.props.isStudent?ef.Instructor:!this.props.isInstructor&&this.props.isStudent?ef.Student:this.props.isGuest?ef.Guest:ef.Dual:ef.None}}let eL=(0,C.X)(eh((0,E.withStyles)(eS,{name:"StreamSettingsList"})(eR)));class eN extends f.PureComponent{constructor(e){super(e),this.onSettingsUpdated=e=>{this.setState({currentSettings:e}),this.props.onSettingsUpdated(e)};let t=L(e.adminNotificationSettings);this.state={currentSettings:e.currentSettings,notificationSettingsMap:t}}componentDidMount(){let{loadAdminRegistrySettings:e}=this.props;e({key:D})}static getDerivedStateFromProps(e,t){if(!e.isSystemPreferenceLoading&&e.adminNotificationSettings.length>0){let n=L(e.adminNotificationSettings),i=x(e.adminRegistrySettings),r={...n,...i};return{currentSettings:t.currentSettings,notificationSettingsMap:r}}return null}getHelpMessage(){let{t:e,userEnrolledInCourse:t,isInstructor:n,isGuest:i,isStudent:r}=this.props;return e(t?!i||r||n?n?"ns.panel.helpMessage.instructor":"ns.panel.helpMessage.student":"ns.panel.helpMessage.guest":"ns.panel.helpMessage.noEnrollment")}render(){let{t:e}=this.props;return f.createElement(eg.Provider,{value:{currentSettings:this.state.currentSettings,onSettingsUpdated:this.onSettingsUpdated,isInstructor:this.props.isInstructor,isStudent:this.props.isStudent,isGuest:this.props.isGuest,userEnrolledInCourse:this.props.userEnrolledInCourse}},f.createElement("h2",{className:this.props.classes.panelTitle},e("ns.panel.title")),f.createElement("div",null,this.getHelpMessage()),!this.props.isSystemPreferenceLoading&&this.state.notificationSettingsMap?f.createElement(eL,{notificationSettingsMap:this.state.notificationSettingsMap}):f.createElement("div",{className:this.props.classes.spinnerWrapper},f.createElement(w.Spinner,{size:w.SpinnerSize.xLarge})))}}let e$=(0,y.$j)(e=>({adminRegistrySettings:X.Ys.systemPreference.getSystemPreferenceByKey(e,D),isSystemPreferenceLoading:X.Ys.systemPreference.isSystemPreferenceLoading(e,D)}),{loadAdminRegistrySettings:X.Nwg.systemPreference.loadSystemPreference})((0,S.H)((0,E.withStyles)(e=>(0,E.createStyles)({panelTitle:{fontSize:"20px !important",fontWeight:e.typography.fontWeightSemiBold,fontFamily:e.typography.fontFamily+" !important",marginBottom:"17px !important",lineHeight:"28px !important"},spinnerWrapper:{position:"absolute",left:"50%",top:"50%",marginLeft:"-25px"}}),{name:"StreamSettingsPanel"})(eN)));(o=p||(p={})).BlogEntryComment="NN:BlogEntryComment",o.BlogEntryEdited="NN:BlogEntryEdited",o.BlogEntryPosted="NN:BlogEntryPosted",o.Calendar="NN:Calendar",o.GradeAtRisk_GradeBelowThreshold="NN:GradeAtRisk_GradeBelowThreshold",o.GradeAtRisk_GradeInLowest="NN:GradeAtRisk_GradeInLowest",o.GradeLowered="NN:GradeLowered",o.HighActivity="NN:HighActivity",o.HighGrade="NN:HighGrade",o.JournalEntryComment="NN:JournalEntryComment",o.JournalEntryEdited="NN:JournalEntryEdited",o.JournalEntryPosted="NN:JournalEntryPosted",o.LowActivity="NN:LowActivity",o.NoRecentActivity="NN:NoRecentActivity",o.PerformanceIncreased_ActivityIncreased="NN:PerformanceIncreased_ActivityIncreased",o.PerformanceIncreased_GradeIncreased="NN:PerformanceIncreased_GradeIncreased",o.StudentActivityAvailable="NN:StudentActivityAvailable",o.StudentGradeDataAvailable="NN:StudentGradeDataAvailable",o.StudentsMissedDueDates="NN:StudentsMissedDueDates",o.StudentsFallingBehindAbsent="NN:StudentsFallingBehindAbsent",o.StudentsFallingBehindFailing="NN:StudentsFallingBehindFailing",o.WikiEntryComment="NN:WikiEntryComment",o.WikiEntryEdited="NN:WikiEntryEdited",o.WikiEntryPosted="NN:WikiEntryPosted",(a=m||(m={})).AssessmentAttemptAvailableResent="TE:TE_AVAIL_RESEND",a.AssessmentAvailable="TE:TE_AVAIL",a.AssessmentDue="TE:DUE",a.AssessmentNeedsGrading="TE:TE_SUBMIT",a.AssesmentOverdue="TE:OVERDUE",a.GroupAssessmentNeedsGrading="TE:TE_GT_SUBMIT",a.LateAssessmentNeedsGrading="TE:TE_SUBMIT_LATE",a.LateGroupAssessmentNeedsGrading="TE:TE_GT_SUBMIT_LATE",a.PeerSubmissionAttemptAvailableResent="PS:PS_AVAIL_RESEND",a.PeerSubmissionAvailable="PS:PS_AVAIL",a.PeerSubmissionDue="PS:DUE",a.PeerSubmissionNeedsGrading="PS:PS_SUBMIT",a.PeerSubmissionOverdue="PS:OVERDUE",a.LatePeerSubmissionNeedsGrading="PS:PS_SUBMIT_LATE",a.PeerEvaluationAttemptAvailableResent="PE:PE_AVAIL_RESEND",a.PeerEvaluationAvailable="PE:PE_AVAIL",a.PeerEvaluationDue="PE:DUE",a.PeerEvaluationNeedsGrading="PE:PE_SUBMIT",a.PeerEvaluationOverdue="PE:OVERDUE",a.LatePeerEvaluationNeedsGrading="PE:PE_SUBMIT_LATE",a.AssignmentAvailable="AS:AS_AVAIL",a.AssignmentAvailableResend="AS:AS_AVAIL_RESEND",a.AssignmentDue="AS:DUE",a.AssignmentNeedsGrading="AS:AS_ATTEMPT",a.AssignmentOverdue="AS:OVERDUE",a.GroupAssignmentAvailable="AS:AS_GA_AVAIL",a.GroupAssignmentAvailableResend="AS:AS_GA_AVAIL_RESEND",a.GroupAssignmentNeedsGrading="AS:AS_GA_ATTEMPT",a.LateAssignmentNeedsGrading="AS:AS_LATE_ATTEMPT",a.LateGroupAssignmentNeedsGrading="AS:AS_GA_LATE_ATTEMPT",a.BlogNeedsGrading="BL:BL_ATTEMPT",a.GroupBlogNeedsGrading="BL:BL_GR_ATTEMPT",a.ForumNeedsGrading="DF:DF_ATTEMPT",a.GroupForumNeedsGrading="DF:DF_GR_ATTEMPT",a.GroupThreadNeedsGrading="DT:DT_GR_ATTEMPT",a.ThreadNeedsGrading="DT:DT_ATTEMPT",a.GradebookAttemptUpdate="GB:GB_ATT_UPDATED",a.GradebookItemDue="GB:DUE",a.GradebookItemOverdue="GB:OVERDUE",a.GradebookNeedsReconciliation="GB:GB_NEEDS_RECON",a.ManualGradeCleared="GB:GB_GRA_CLEARED",a.ManualGradeUpdated="GB:GB_GRA_UPDATED",a.GroupJournalNeedsGrading="JN:JN_GR_ATTEMPT",a.JournalNeedsGrading="JN:JN_ATTEMPT",a.LateScormItemNeedsGrading="SC:SC_SUBMIT_LATE",a.ScormItemAvailable="SC:SC_AVAIL",a.ScormItemDue="SC:DUE",a.ScormItemOverdue="SC:OVERDUE",a.ScormItemNeedsGrading="SC:SC_SUBMIT",a.ScormItemGradeUpdated="SC:SC_GRA_UPDATED",a.SurveyAvailable="SU:SU_AVAIL",a.SurveyDue="SU:DUE",a.SurveyOverdue="SU:OVERDUE",a.SurveySubmitted="SU:SU_SUBMIT",a.GroupWikiNeedsGrading="WK:WK_GR_ATTEMPT",a.WikiNeedsGrading="WK:WK_ATTEMPT",a.AnnouncementAvailable="AN:AN_AVAIL",a.ContentAvailable="CO:CO_AVAIL",a.CourseAvailable="CR:CR_AVAIL",a.CourseMessageReceived="CM:CM_RCVD",a.QuotaAvailable="QU:QU_AVAIL";let eO=e=>t=>eV(e,t.settingsMap)&&(t.membership===ef.Dual||t.membership===ef.Student),eG=e=>t=>eV(e,t.settingsMap)&&(t.membership===ef.Dual||t.membership===ef.Instructor),e_=e=>t=>eV(e,t.settingsMap)&&t.membership!==ef.None&&t.membership!==ef.Guest,eM=e=>t=>eV(e,t.settingsMap),eB=e=>t=>eH(e,t),eF=e=>(t,n,i)=>eq(e,t,n);(l=h||(h={})).Announcement="bb-announcement",l.Blog="bb_blog",l.Calendar="bb_calendar",l.Grades="bb_mygrades",l.Message="bb_message",l.Nautilus="bb-nautilus",l.Wiki="bb_Wiki",l.Telemetry="bb_tel";let eU=(e,t)=>t.some(t=>t.includes(e)),eV=(e,t)=>{if(!e||0===e.length)return!0;for(let n=0;n<e.length;n+=1){let i=t[ej(e[n])];if(i){let e=i.modalities[c.Stream];if(e&&e.isEditable)return!0}}return!1},eH=(e,t)=>{if(!e)return!1;for(let n of e){let e=t.find(e=>n===`${e.source}:${e.event}`&&c.Stream===e.method);if(e&&e.isEnabled)return!0}return!1},eq=(e,t,n)=>{if(!e||0===e.length)return t;let i=e.reduce((e,t)=>{let i=n.find(e=>t===`${e.source}:${e.event}`&&c.Stream===e.method);return i&&e.push(i),e},[]);return i.length&&i.every(e=>!e.isEditable)?i.some(e=>e.isEnabled):t},ej=e=>"COURSE_"+e.replace(":","_"),ez=[m.AnnouncementAvailable],eW={id:"InstitutionAnnouncements",category:eb.InstitutionAnnouncements,displayKey:"",canHandle:e=>eU(e.type,[m.AnnouncementAvailable])&&e.providerId===h.Announcement,defaultSetting:eB(ez),isStreamEntryVisible:eF(ez),isStreamSettingVisible:eM(ez)},eK=[m.AssessmentDue,m.AssignmentDue,m.ScormItemDue,m.SurveyDue,m.GradebookItemDue,m.PeerSubmissionDue,m.PeerEvaluationDue],eZ=[m.AssesmentOverdue,m.AssignmentOverdue,m.ScormItemOverdue,m.SurveyOverdue,m.GradebookItemOverdue,m.PeerSubmissionOverdue,m.PeerEvaluationOverdue],eQ={id:"GradedItemDue",category:eb.GradedItemDue,displayKey:"ns.streams.definition.GradedItemDue.GradedItemDue",canHandle:e=>eU(e.type,eK),defaultSetting:eB(eK),isStreamEntryVisible:eF(eK),isStreamSettingVisible:eO(eK)},eJ={id:"GradedItemOverdue",category:eb.GradedItemDue,displayKey:"ns.streams.definition.GradedItemDue.GradedItemOverdue",canHandle:e=>eU(e.type,eZ),defaultSetting:eB(eZ),isStreamEntryVisible:eF(eZ),isStreamSettingVisible:eO(eZ)},eY=[m.AssessmentAvailable,m.AssignmentAvailable,m.AssessmentAttemptAvailableResent,m.AssignmentAvailableResend,m.GroupAssignmentAvailable,m.GroupAssignmentAvailableResend,m.PeerSubmissionAvailable,m.PeerSubmissionAttemptAvailableResent,m.PeerEvaluationAvailable,m.PeerEvaluationAttemptAvailableResent],eX=[m.SurveyAvailable,m.QuotaAvailable,m.ContentAvailable,m.ScormItemAvailable],e0={id:"NewAssessmentsAdded",category:eb.NewContent,displayKey:"ns.streams.definition.NewContent.NewAssessmentsAdded",canHandle:e=>eU(e.type,eY),defaultSetting:eB(eY),isStreamEntryVisible:eF(eY),isStreamSettingVisible:e_(eY)},e1={id:"NewContentAdded",category:eb.NewContent,displayKey:"ns.streams.definition.NewContent.NewContentAdded",canHandle:e=>eU(e.type,eX)&&"resource/x-bb-forumlink"!==e.contentHandler,defaultSetting:eB(eX),isStreamEntryVisible:eF(eX),isStreamSettingVisible:e_(eX)},e2=[m.GradebookAttemptUpdate,m.ManualGradeUpdated,m.ManualGradeCleared,m.ScormItemGradeUpdated],e4={id:"GradesPosted",category:eb.GradesPosted,displayKey:"",canHandle:e=>eU(e.type,[m.GradebookAttemptUpdate,m.ManualGradeUpdated,m.ManualGradeCleared,m.ScormItemGradeUpdated])||h.Grades===e.type,defaultSetting:eB(e2),isStreamEntryVisible:eF(e2),isStreamSettingVisible:eO(e2)},e6=[m.GroupAssignmentNeedsGrading,m.GroupBlogNeedsGrading,m.GroupForumNeedsGrading,m.GroupJournalNeedsGrading,m.GroupThreadNeedsGrading,m.GroupWikiNeedsGrading,m.AssessmentNeedsGrading,m.AssignmentNeedsGrading,m.GroupAssessmentNeedsGrading,m.LateGroupAssessmentNeedsGrading,m.BlogNeedsGrading,m.ForumNeedsGrading,m.JournalNeedsGrading,m.LateAssessmentNeedsGrading,m.LateAssignmentNeedsGrading,m.LateGroupAssignmentNeedsGrading,m.LateScormItemNeedsGrading,m.ScormItemNeedsGrading,m.ThreadNeedsGrading,m.WikiNeedsGrading,m.PeerSubmissionNeedsGrading,m.LatePeerSubmissionNeedsGrading,m.PeerEvaluationNeedsGrading,m.LatePeerEvaluationNeedsGrading],e5={id:"NewGradeableItems",category:eb.NewGradeableItems,displayKey:"",canHandle:e=>eU(e.type,e6),defaultSetting:eB(e6),isStreamEntryVisible:eF(e6),isStreamSettingVisible:eG(e6)},e3=[p.StudentActivityAvailable],e8=[p.StudentGradeDataAvailable],e9=[p.StudentsFallingBehindAbsent],e7=[p.StudentsFallingBehindFailing],te=[p.StudentsMissedDueDates],tt=[p.StudentsFallingBehindAbsent,p.StudentsFallingBehindFailing,p.StudentsMissedDueDates],tn=e=>e.type.includes(h.Telemetry)&&"StudentsInTrouble"===e.telemetryNotificationType&&!!e.hasStudentsInTrouble,ti=e=>void 0!==e.title&&null!==e.title&&""!==e.title,tr=e=>{let t=eF(e);return(e,n,i)=>t(e,n,i)&&ti(i)},ts={id:"StudentActivityAvailable",category:eb.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentActivityAvailable",isStreamEntryVisible:eF(e3),isStreamSettingVisible:eG(e3),canHandle:e=>e.type.includes(h.Telemetry)&&"SufficientActivityData"===e.telemetryNotificationType,defaultSetting:eB(e3)},to={id:"StudentGradeDataAvailable",category:eb.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentGradeDataAvailable",isStreamEntryVisible:eF(e8),isStreamSettingVisible:eG(e8),canHandle:e=>e.type.includes(h.Telemetry)&&"SufficientGradeData"===e.telemetryNotificationType,defaultSetting:eB(e8)},ta={id:"StudentsMissedDueDates",category:eb.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsMissedDueDates",isStreamEntryVisible:tr(tt),isStreamSettingVisible:eG(te),canHandle:tn,defaultSetting:eB(te)},tl={id:"StudentsFallingBehindAbsent",category:eb.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehindAbsent",isStreamEntryVisible:tr(tt),isStreamSettingVisible:eG(e9),canHandle:tn,defaultSetting:eB(e9)},tc={id:"StudentsFallingBehindFailing",category:eb.StudentPerformanceAlert,displayKey:"ns.streams.definition.StudentPerformanceAlert.StudentsFallingBehindFailing",isStreamEntryVisible:tr(tt),isStreamSettingVisible:eG(e7),canHandle:tn,defaultSetting:eB(e7)},td=[p.NoRecentActivity],tu=[p.GradeAtRisk_GradeBelowThreshold,p.GradeAtRisk_GradeInLowest],tp=[p.GradeLowered],tm=[p.LowActivity],th=[p.PerformanceIncreased_ActivityIncreased,p.PerformanceIncreased_GradeIncreased],tg=[p.HighActivity],tf=[p.HighGrade],tb={id:"NoRecentActivity",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.NoRecentActivity",isStreamEntryVisible:eF(td),isStreamSettingVisible:eO(td),canHandle:e=>!!e.type.includes(h.Telemetry)&&"NoRecentActivity"===e.telemetryNotificationType,defaultSetting:eB(td)},tv={id:"GradeAtRisk",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.GradeAtRisk",isStreamEntryVisible:eF(tu),isStreamSettingVisible:eO(tu),canHandle:e=>!!e.type.includes(h.Telemetry)&&("GradeInLowest"===e.telemetryNotificationType||"GradeBelowThreshold"===e.telemetryNotificationType),defaultSetting:eB(tu)},ty={id:"GradeLowered",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.GradeLowered",isStreamEntryVisible:eF(tp),isStreamSettingVisible:eO(tp),canHandle:e=>!!e.type.includes(h.Telemetry)&&"GradeDropped"===e.telemetryNotificationType,defaultSetting:eB(tp)},tS={id:"LowActivity",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.LowActivity",isStreamEntryVisible:eF(tm),isStreamSettingVisible:eO(tm),canHandle:e=>!!e.type.includes(h.Telemetry)&&"ActivityInLowest"===e.telemetryNotificationType,defaultSetting:eB(tm)},tC={id:"PerformanceIncreased",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.PerformanceIncreased",isStreamEntryVisible:eF(th),isStreamSettingVisible:eO(th),canHandle:e=>!!e.type.includes(h.Telemetry)&&("GradeIncreased"===e.telemetryNotificationType||"ActivityIncreased"===e.telemetryNotificationType),defaultSetting:eB(th)},tE={id:"HighActivity",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.HighActivity",isStreamEntryVisible:eF(tg),isStreamSettingVisible:eO(tg),canHandle:e=>!!e.type.includes(h.Telemetry)&&"ActivityInHighest"===e.telemetryNotificationType,defaultSetting:eB(tg)},tI={id:"HighGrade",category:eb.GradesAndActivity,displayKey:"ns.streams.definition.GradesAndActivity.HighGrade",isStreamEntryVisible:eF(tf),isStreamSettingVisible:eO(tf),canHandle:e=>!!e.type.includes(h.Telemetry)&&"GradeInHighest"===e.telemetryNotificationType,defaultSetting:eB(tf)},tw=[p.Calendar],tA={id:"Calendar",category:eb.Calendar,displayKey:"",isStreamEntryVisible:eF(tw),isStreamSettingVisible:eM(tw),canHandle:e=>h.Calendar===e.type,defaultSetting:eB(tw)},tk=[m.CourseAvailable],tT={id:"CourseAvailable",category:eb.CourseAvailable,displayKey:"",canHandle:e=>eU(e.type,tk),defaultSetting:eB(tk),isStreamEntryVisible:eF(tk),isStreamSettingVisible:eM(tk)},tP=[p.BlogEntryPosted],tD=[p.BlogEntryEdited],tx=[p.BlogEntryComment],tR={id:"BlogEntryPosted",category:eb.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryPosted",isStreamEntryVisible:eF(tP),isStreamSettingVisible:e_(tP),canHandle:e=>h.Blog===e.type&&"BL_EP"===e.eventType,defaultSetting:eB(tP)},tL={id:"BlogEntryEdited",category:eb.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryEdited",isStreamEntryVisible:eF(tD),isStreamSettingVisible:e_(tD),canHandle:e=>h.Blog===e.type&&"BL_EE"===e.eventType,defaultSetting:eB(tD)},tN={id:"BlogEntryComment",category:eb.Blog,displayKey:"ns.streams.definition.Blog.BlogEntryComment",isStreamEntryVisible:eF(tx),isStreamSettingVisible:eG(tx),canHandle:e=>h.Blog===e.type&&"BL_CP"===e.eventType,defaultSetting:eB(tx)},t$=[p.JournalEntryPosted],tO=[p.JournalEntryEdited],tG=[p.JournalEntryComment],t_={id:"JournalEntryPosted",category:eb.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryPosted",isStreamEntryVisible:eF(t$),isStreamSettingVisible:e_(t$),canHandle:e=>h.Blog===e.type&&"JR_EP"===e.eventType,defaultSetting:eB(t$)},tM={id:"JournalEntryEdited",category:eb.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryEdited",isStreamEntryVisible:eF(tO),isStreamSettingVisible:e_(tO),canHandle:e=>h.Blog===e.type&&"JR_EE"===e.eventType,defaultSetting:eB(tO)},tB={id:"JournalEntryComment",category:eb.Journal,displayKey:"ns.streams.definition.Journal.JournalEntryComment",isStreamEntryVisible:eF(tG),isStreamSettingVisible:eG(tG),canHandle:e=>h.Blog===e.type&&"JR_CP"===e.eventType,defaultSetting:eB(tG)},tF=[p.WikiEntryPosted],tU=[p.WikiEntryEdited],tV=[p.WikiEntryComment],tH={id:"WikiEntryPosted",category:eb.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryPosted",isStreamEntryVisible:eF(tF),isStreamSettingVisible:e_(tF),canHandle:e=>h.Wiki===e.type&&"EP"===e.eventType,defaultSetting:eB(tF)},tq={id:"WikiEntryEdited",category:eb.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryEdited",isStreamEntryVisible:eF(tU),isStreamSettingVisible:e_(tU),canHandle:e=>h.Wiki===e.type&&"EE"===e.eventType,defaultSetting:eB(tU)},tj={id:"WikiEntryComment",category:eb.Wiki,displayKey:"ns.streams.definition.Wiki.WikiEntryComment",isStreamEntryVisible:eF(tV),isStreamSettingVisible:e_(tV),canHandle:e=>h.Wiki===e.type&&"CP"===e.eventType,defaultSetting:eB(tV)},tz=[m.GradebookNeedsReconciliation],tW={id:"GradesNeedReconciling",category:eb.GradesNeedReconciling,displayKey:"",canHandle:e=>eU(e.type,tz),defaultSetting:eB(tz),isStreamEntryVisible:eF(tz),isStreamSettingVisible:eG(tz)},tK=[m.ContentAvailable],tZ={id:"NewDiscussionForum",category:eb.Discussion,displayKey:"ns.streams.definition.Discussion.NewDiscussionForum",canHandle:e=>eU(e.type,tK)&&"resource/x-bb-forumlink"===e.contentHandler,defaultSetting:eB(tK),isStreamEntryVisible:eF(tK),isStreamSettingVisible:e_(tK)},tQ=[m.AnnouncementAvailable],tJ=Object.values({InstitutionAnnouncements:eW,CourseAnnouncements:{id:"CourseAnnouncements",category:eb.CourseAnnouncements,displayKey:"",canHandle:e=>eU(e.type,tQ)&&e.providerId===h.Nautilus,defaultSetting:eB(tQ),isStreamEntryVisible:eF(tQ),isStreamSettingVisible:eM(tQ)},GradedItemDue:eQ,GradedItemOverdue:eJ,NewAssessmentsAdded:e0,NewContentAdded:e1,GradesPosted:e4,NewGradeableItems:e5,GradesNeedReconciling:tW,StudentActivityAvailable:ts,StudentGradeDataAvailable:to,StudentsFallingBehindFailing:tc,StudentsMissedDueDates:ta,StudentsFallingBehindAbsent:tl,NewDiscussionForum:tZ,NoRecentActivity:tb,GradeAtRisk:tv,GradeLowered:ty,LowActivity:tS,PerformanceIncreased:tC,HighActivity:tE,HighGrade:tI,Calendar:tA,CourseAvailable:tT,BlogEntryPosted:tR,BlogEntryEdited:tL,BlogEntryComment:tN,JournalEntryPosted:t_,JournalEntryEdited:tM,JournalEntryComment:tB,WikiEntryPosted:tH,WikiEntryEdited:tq,WikiEntryComment:tj}),tY=(e,t,n)=>{let i=f.createElement(b.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["notification-settings/locales/[locale]/ns.json"],isRtl:n.isRtl},f.createElement(y.zt,{store:t},f.createElement(g.AnalyticsJssThemeProvider,{theme:"light",isRtl:n.isRtl},f.createElement(e$,{adminNotificationSettings:n.adminNotificationSettings,currentSettings:n.currentSettings,onSettingsUpdated:n.onSettingsUpdated,isGuest:n.isGuest,isInstructor:n.isInstructor,isStudent:n.isStudent,userEnrolledInCourse:n.userEnrolledInCourse}))));v.render(i,e)},tX=(e,t,n)=>{let i=f.createElement(b.g,{locale:n.locale,babelfishInstance:n.babelfishInstance,babelfishFormatInstance:n.babelfishFormatInstance,bundlesToLoad:["notification-settings/locales/[locale]/ns.json"],isRtl:n.isRtl},f.createElement(y.zt,{store:t},f.createElement(g.AnalyticsJssThemeProvider,{theme:"light",isRtl:n.isRtl},f.createElement(em,{closePanel:n.closePanel,onSettingChange:n.onSettingChange}))));v.render(i,e)},t0=e=>{v.unmountComponentAtNode(e)}},563060:function(e,t,n){"use strict";n.d(t,{Fq:function(){return u.Fq},e5:function(){return es},eJ:function(){return u.eJ},Zo:function(){return u.Zo},f8:function(){return c.f},Lj:function(){return u.Lj},zo:function(){return ed},xh:function(){return u.xh},cw:function(){return u.cw},SS:function(){return eu.S},XO:function(){return u.XO},nb:function(){return ep.n},fI:function(){return eh},C7:function(){return eg},BQ:function(){return u.BQ},Ty:function(){return eT},Jf:function(){return u.Jf},yf:function(){return ef.y},Jy:function(){return u.Jy},Be:function(){return eb.B},rJ:function(){return u.rJ},xN:function(){return ev.x},Re:function(){return u.Re},mL:function(){return u.mL},RK:function(){return u.RK},xp:function(){return u.xp},BJ:function(){return u.BJ},OH:function(){return eo.O},Eg:function(){return u.Eg},MS:function(){return ey.M},UM:function(){return u.UM},ti:function(){return eR.t},qN:function(){return u.qN},M0:function(){return u.M0},Hx:function(){return eE.H},Hk:function(){return eI},Jp:function(){return u.Jp},mF:function(){return eC},Fc:function(){return u.Fc},Z5:function(){return u.Z5},Wd:function(){return el},mg:function(){return u.mg},Kb:function(){return u.Kb},lF:function(){return ew.l},Gv:function(){return eA.G},vs:function(){return u.vs},s6:function(){return u.s6},pR:function(){return em},tk:function(){return m.t},el:function(){return p.e},Lb:function(){return f},l3:function(){return y},a9:function(){return ex.a},l6:function(){return A},Vp:function(){return P},Rj:function(){return x},BF:function(){return R.B},sn:function(){return L.s},jZ:function(){return O},oc:function(){return N.o},Pj:function(){return G.P},em:function(){return _.e},p$:function(){return B},h4:function(){return U},ee:function(){return H},nd:function(){return j},EX:function(){return eD},Nd:function(){return i.N},k9:function(){return z.k},wj:function(){return r.w},OO:function(){return o},YK:function(){return l},Ls:function(){return d.L},xB:function(){return K},YO:function(){return J.Y},_Y:function(){return en},gO:function(){return Q},Vl:function(){return er},IN:function(){return X}});var i=n(167013),r=n(562134),s=n(202784);let o=(e,t)=>{let n=(0,s.useCallback)(n=>{e&&(n.preventRouteChange(),t())},[e,t]);(0,r.w)(n)};var a=n(905418);let l=e=>{let t=(0,a.N)(),[n,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(),p=(0,s.useCallback)(n=>{var i;let r=void 0!==t&&(null===(i=n.toState.name)||void 0===i?void 0:i.indexOf(t))!==0;!l&&e&&r&&(n.preventRouteChange(),o(!0),u(n))},[l,e,t]);return(0,r.w)(p),(0,s.useMemo)(()=>({isCloseInterrupted:n,cancelClose:()=>o(!1),doClose:()=>{var e,t;c(!0),i.N.goRoute(null!==(e=null==d?void 0:d.toState.name)&&void 0!==e?e:"",null!==(t=null==d?void 0:d.toParams)&&void 0!==t?t:{})}}),[n,d])};var c=n(366377),d=n(722764),u=n(730948),p=n(510219),m=n(807057),h=n(345397);class g{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return h.e.ASSESSMENT_SETTINGS}}let f=e=>new g(e);n(930878);var b=n(897127);class v{constructor(e,t){this.contextItems=e,this.exclude=t}getArgs(){return{...this.contextItems,exclude:this.exclude}}get routeName(){return b.X.CONTENT_PICKER}}let y=(e,t)=>new v(e,t);n(290622),n(414622),n(529513);var S=n(241248);class C{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return S.B.EDIT_ENROLLMENT}}let E=e=>new C(e);var I=n(608566);class w{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return I.J.EDIT_QUESTION_BANK}}let A=e=>new w(e);var k=n(775333);class T{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return k.R.PER_ASSESSMENT_SETTINGS}}let P=e=>new T(e);class D{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return k.R.PER_GRADABLE_ITEM_SETTINGS}}let x=e=>new D(e);var R=n(556539),L=n(571160),N=n(807999);class ${constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return k.R.PER_ASSESSMENT_GROUP_SETTING}}let O=e=>new $(e);var G=n(906790),_=n(807347);class M{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return k.R.OFFLINE_GRADE_AND_FEEDBACK}}let B=e=>new M(e);class F{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return h.e.ASSESSMENT_OPEN_ATTEMPT_LOG}}let U=e=>new F(e);class V{get routeName(){return k.R.GRADE_ITEM_OVERALL_GRADE}getArgs(){return{isExternalGrade:!0}}}let H=()=>new V;class q{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return I.J.IMPORT_DETAILS}}let j=e=>new q(e);var z=n(721825);class W{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return S.B.ACCOMMODATION}}let K=e=>new W(e);n(730591);class Z{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return S.B.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}let Q=e=>new Z(e);var J=n(366811);class Y{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return k.R.SUBMISSION_DEEP_LINK}}let X=e=>new Y(e);var ee=n(652398);class et{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return ee.v.INSTRUCTOR_DETAILS}}let en=e=>new et(e);class ei{constructor(e){this.args=e}getArgs(){return this.args}get routeName(){return S.B.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES}}let er=e=>new ei(e),es={AssessmentSettings:e=>({routeName:h.e.ASSESSMENT_SETTINGS,getArgs:()=>e}),RubricSettings:e=>({routeName:h.e.ASSESSMENT_SETTINGS_RUBRIC_SETTINGS,getArgs:()=>e}),GradeBookItemAssessment:e=>({routeName:k.R.GRADEBOOK_ITEM_ASSESSMENT,getArgs:()=>({gradeitemView:"details",...e})}),AutoGenerateQuestion:e=>({routeName:h.e.ASSESSMENT_AUTO_GENERATE_QUESTION,getArgs:()=>e}),AutoGenerateAssessment:e=>({routeName:h.e.ASSESSMENT_AUTO_GENERATE,getArgs:()=>e})};var eo=n(383147),ea=n(345109);let el={RubricEvaluation:e=>({routeName:ea.m.RUBRIC_EVALUATION,getArgs:()=>e}),RubricMode:e=>({routeName:ea.m.RUBRIC_MODE,getArgs:()=>e}),RubricView:e=>({routeName:ea.m.RUBRIC_VIEW,getArgs:()=>e})};var ec=n(447670);let ed={ContentCollection:e=>({routeName:ec.x.CONTENT_COLLECTION,getArgs:()=>e})};var eu=n(967688),ep=n(760871);function em(e){return!!e.memberId||!!e.courseGroupId||!!e.childCourseId}let eh=["gradebookView","listViewType","memberId","courseGroupId","gradebookAssessmentType","gradebookCategoryId","gradebookColumnId","childCourseId"],eg={GradeDownload:()=>({routeName:k.R.GRADE_DOWNLOAD_SETTINGS,getArgs:()=>{}}),GradeUpload:()=>({routeName:k.R.GRADE_UPLOAD,getArgs:()=>{}}),GradeSettings:()=>({routeName:k.R.GRADE_SETTING,getArgs:()=>{}}),AttemptReceiptSearch:()=>({routeName:k.R.ATTEMPT_RECEIPT_SEARCH,getArgs:()=>{}})};var ef=n(478858),eb=n(903653),ev=n(220321),ey=n(706172),eS=n(413150);let eC={AlignGoalsForInstructors:e=>({routeName:eS.F.ALIGN_GOALS_FOR_INSTRUCTOR,getArgs:()=>e}),AlignGoalsForStudent:e=>({routeName:eS.F.ALIGN_GOALS_FOR_STUDENT,getArgs:()=>e})};var eE=n(897486);let eI={CourseQuestionBanks:e=>({routeName:I.J.QUESTION_BANKS,getArgs:()=>e}),CourseQuestionBankImport:e=>({routeName:I.J.IMPORT_DETAILS,getArgs:()=>e}),CourseQuestionBankEdit:e=>({routeName:I.J.EDIT_QUESTION_BANK,getArgs:()=>e})};var ew=n(440329),eA=n(161191),ek=n(897293);let eT={Tasks:(e={})=>({routeName:ek.J.COURSE_TASKS_PANEL,getArgs:()=>e}),Logs:(e={})=>({routeName:ek.J.COURSE_LOGS_PANEL,getArgs:()=>e})};var eP=n(986709);function eD(e,t,n){var i;let r=n.id;return(null===(i=n.courseRole)||void 0===i?void 0:i.roleBucket)===eP.O8v.Taking?Q({courseId:e,membershipId:r,userId:t}):E({membershipId:r})}var ex=n(127942),eR=n(591241)},366377:function(e,t,n){"use strict";n.d(t,{f:function(){return o},q:function(){return s}});var i=n(202784),r=n.n(i);let s=(0,i.createContext)(void 0),o=({children:e})=>{let t=(0,i.useRef)(null),[n,o]=(0,i.useState)();return(0,i.useEffect)(()=>{var e,n,i;o(null===(i=null===(n=null===(e=t.current)||void 0===e?void 0:e.closest("[data-base-state-name]"))||void 0===n?void 0:n.dataset)||void 0===i?void 0:i.baseStateName)},[]),r().createElement(s.Provider,{value:n},r().createElement("div",{ref:t},e))}},730948:function(e,t,n){"use strict";n.d(t,{BJ:function(){return p.B},BQ:function(){return l.B},Eg:function(){return m.E},Fc:function(){return y.F},Fq:function(){return r.F},Jf:function(){return D.J},Jp:function(){return S.J},Jy:function(){return c.J},Kb:function(){return C.K},Lj:function(){return v.L},M0:function(){return h.M},RK:function(){return d.R},Re:function(){return T.R},UM:function(){return E.U},XO:function(){return b.X},Z5:function(){return R},Zo:function(){return o.Z},cw:function(){return a.c},eJ:function(){return s.e},mL:function(){return P.m},mg:function(){return g.m},qN:function(){return x.q},rJ:function(){return w.r},s6:function(){return f.s},vs:function(){return f.v},xh:function(){return I.x},xp:function(){return u.x}});var i=n(428346),r=n(989106),s=n(345397),o=n(69609),a=n(693929),l=n(241248),c=n(430552),d=n(775333),u=n(663646),p=n(412499),m=n(961641),h=n(402316),g=n(345109),f=n(652398),b=n(897127),v=n(345393),y=n(413150),S=n(608566),C=n(597961),E=n(733003),I=n(447670),w=n(251871),A=n(412152),k=n(713845),T=n(37150),P=n(958417),D=n(897293),x=n(743712);let R={Admin:i.i,Announcement:r.F,Assessment:s.e,Base:o.Z,Calendar:v.L,ContentCollection:I.x,ContentMarket:a.c,Course:l.B,CourseTasks:D.J,Content:b.X,Engagement:c.J,ExternalLink:w.r,File:T.R,Goals:P.m,Grade:d.R,Group:u.x,Integration:p.B,Journal:m.E,Lti:E.U,PartnerCloud:x.q,Profile:h.M,Question:y.F,QuestionAnalysis:k.$,QuestionBanks:S.J,SafeAssign:C.K,Rubric:g.m,Scorm:A.v,Telemetry:f.v}},652398:function(e,t,n){"use strict";var i,r;n.d(t,{s:function(){return i},v:function(){return s}}),(r=i||(i={})).CONTENT_ACTIVITY_IN_DETAIL="telemetryContentActivityInDetail",r.DIRECT_TO_COURSE="directToCourse",r.DISCUSSION_FORUM_INSIGHTS="telemetryDiscussionForumInsights",r.INSTRUCTOR_CLASS="telemetryInstructorClass",r.INSTRUCTOR_DETAILS="telemetryInstructorDetails",r.INSTRUCTOR_DYNAMIC="instructorDynamic",r.STUDENT_FIND_A_STUDY_PARTNER="telemetryStudentFindAStudyPartner",r.STUDENT_HIGH_PERFORMANCE="telemetryStudentHighPerformance",r.STUDENT_LOW_ACTIVITY="telemetryStudentLowActivity",r.STUDENT_LOW_GRADES="telemetryStudentLowGrades",r.STUDENT_PROGRESS="telemetryStudentProgress";let s={INSTRUCTOR_DYNAMIC:i.INSTRUCTOR_DYNAMIC.toString(),DIRECT_TO_COURSE:i.DIRECT_TO_COURSE.toString(),CONTENT_ACTIVITY_IN_DETAIL:i.CONTENT_ACTIVITY_IN_DETAIL.toString(),DISCUSSION_FORUM_INSIGHTS:i.DISCUSSION_FORUM_INSIGHTS.toString(),INSTRUCTOR_DETAILS:i.INSTRUCTOR_DETAILS.toString(),INSTRUCTOR_CLASS:i.INSTRUCTOR_CLASS.toString(),STUDENT_HIGH_PERFORMANCE:i.STUDENT_HIGH_PERFORMANCE.toString(),STUDENT_LOW_ACTIVITY:i.STUDENT_LOW_ACTIVITY.toString(),STUDENT_LOW_GRADES:i.STUDENT_LOW_GRADES.toString(),STUDENT_FIND_A_STUDY_PARTNER:i.STUDENT_FIND_A_STUDY_PARTNER.toString(),STUDENT_PROGRESS:i.STUDENT_PROGRESS.toString(),TELEMETRY_SETTINGS:"telemetry-settings"}},127942:function(e,t,n){"use strict";function i(e){return{calendarId:e.calendarId,itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId,recurRules:{repeatRuleType:e.repeatRuleType,repeatRuleCourseId:e.repeatRuleCourseId,repeatRuleUserId:e.repeatRuleUserId}}}n.d(t,{a:function(){return i}})},166099:function(e,t,n){"use strict";n.d(t,{Ae:function(){return b},Be:function(){return R},Bu:function(){return O},Cl:function(){return x},E3:function(){return v},ET:function(){return E},FG:function(){return S},KD:function(){return y},Nd:function(){return D},O4:function(){return _},T1:function(){return L},ZD:function(){return w},bC:function(){return a},bl:function(){return M},fi:function(){return k},k0:function(){return G},lR:function(){return g},lb:function(){return U},nI:function(){return F},pj:function(){return I},uL:function(){return C},wg:function(){return P},xu:function(){return A}});var i=n(202784),r=n(276635),s=n(986709),o=n(83991);let a=i.createContext({}),l=(e,t)=>{if("number"==typeof e)return e/t*100},c=(e,t,n,i,r,o)=>{let a=0;switch(i){case s.Tgr.PERCENTAGE:a=n*r/100;break;case s.Tgr.POINTS:a=r;break;case s.Tgr.PERCENTAGE_RANGE:a=n*r/100,t.score=a*o/100,t.rangeScoreValue=o;break;case s.Tgr.POINTS_RANGE:a=r,t.score=o,t.rangeScoreValue=o}e.scoreValue=t.score,t.colorPercentage=l(e.scoreValue,a),e.colorPercentage=t.colorPercentage},d=(e,t,n)=>e.map(e=>(e.achievements.map(i=>(i.isSelected&&c(e,i,t,n,e.value,i.rangeScoreValue),i)),e)),u=(e,t)=>""!==e?l(Number(e),t):void 0,p=e=>{let{criteria:t,maxScore:n,grade:i,rubricType:r}=e;return{...e,gradeColorPercentage:u(i,n),criteria:t?d(t,n,r):[]}},m=e=>{e.scoreValue=null,e.colorPercentage=null,e.achievements.map(e=>(e.isSelected=!1,"number"==typeof e.colorPercentage&&delete e.colorPercentage,e.rangeScore&&(e.score=null,e.rangeScoreValue=null),e))},h=e=>{e.feedback="",e.hasUnsavedFeedback=!1,e.lastFeedbackSaveDate=void 0,e.lastSaveFailed=!1},g=e=>e===s.Tgr.POINTS||e===s.Tgr.POINTS_RANGE,f=e=>{let t=(0,r.cloneDeep)(e);return t.forEach(e=>{m(e),h(e)}),t},b=(e,t)=>{let n=(0,r.cloneDeep)(t);return e.forEach(e=>{var t;let i=null===(t=n.rubricCriteria)||void 0===t?void 0:t.find(t=>t.id===e.id);i&&(i.lastFeedbackSaveDate=e.lastFeedbackSaveDate,i.hasUnsavedFeedback=!1)}),n},v=e=>"number"!=typeof e.scoreValue&&!!e.hasUnsavedFeedback,y=e=>{let t=(0,r.cloneDeep)(e);t.criteria=[];let n=e.criteria.filter(e=>(e.scoreValue||0===e.scoreValue)&&e.hasUnsavedFeedback),i=e.criteria.filter(e=>(e.scoreValue||0===e.scoreValue)&&!e.hasUnsavedFeedback);return n.length>0&&(t.criteria=[...n,...i]),t},S=({rubricCriteria:e,rubricMaxScore:t,gradeIsAnonymous:n},i)=>{if(!e||"number"!=typeof t)return{};let r=n?G(e):i,s=l(Number(i),t),o={grade:i,rubricGrade:r,gradeColorPercentage:s,isGradeOverridden:!0};return n&&(o.criteria=e),o},C=({rubricCriteria:e,rubricMaxScore:t,rubricType:n})=>{if(!e||"number"!=typeof t)return{};let i=G(e);return{grade:i,rubricGrade:i,gradeColorPercentage:l(i,t),isGradeOverridden:!1,criteria:e,isGradingInProgress:!1,isGroupGradeMultiple:!1,rubricType:n,shouldUndoOverride:!0}},E=({rubricCriteria:e})=>e?{grade:"",criteria:f(e),isGradeOverridden:!1}:{},I=(e,t,{success:n=!0,isUpdatingFeedback:i=!1}={})=>{var r,s,o;let a=t.criterionFeedbackWasUpdated&&n,l={};return l.shouldUpdateCriterionFeedback=a,a&&(l.criteria=null===(r=t.criteria)||void 0===r?void 0:r.map(e=>e.hasUnsavedFeedback?{...e,lastFeedbackSaveDate:new Date,hasUnsavedFeedback:!1}:e)),""===t.grade&&(l.criteria=null===(o=null!==(s=l.criteria)&&void 0!==s?s:t.criteria)||void 0===o?void 0:o.map(e=>({...e,scoreValue:void 0}))),i||(l.grade=t.rubricGrade,l.shouldUndoOverride=t.shouldUndoOverride),l},w=(e,t,n)=>{if(e.hasMultipleAttempts)return e;let i=(0,r.cloneDeep)(e);return i.studentGrade=t,i.gradePercentageColor=u(t,n),i},A=e=>(0,r.isNumber)(e)&&(0,r.isFinite)(e)?e:(0,r.toNumber)(e),k=(e,t)=>0===t?100:e/t*100,T=e=>!!e.criteria&&e.criteria.filter(e=>null!=e.scoreValue).length===e.criteria.length,P=()=>!window.navigator.onLine,D=(e,t=!0)=>{var n;let i=e;return t&&(i=p(e)),{rubricCriteria:null!==(n=i.criteria)&&void 0!==n?n:[],studentGrade:i.grade,gradePercentageColor:i.gradeColorPercentage,rubricMaxScore:i.maxScore,gradeIsOverridden:i.isGradeOverridden,gradeIsAnonymous:i.isAnonymousGrading,hasMultipleAttempts:i.isMultipleAttempts,rubricIsEditable:i.isEditable,isStudent:i.isStudent,canOverride:i.isOverrideAvailable,isGroupGradeMultiple:i.isGroupGradeMultiple,isGradingInProgress:i.isGradingInProgress,rubricIsFullyGraded:T(i),okConfirmationClicked:i.okConfirmationClicked,confirmationHandledForCriterionId:i.confirmationHandledForCriterionId,decimalsLength:i.decimalsLength,isSavingRubric:i.isSavingRubric,rubricType:i.rubricType,onGradeInputUpdate:i.onGradeInputUpdate}},x=e=>({criteria:e.rubricCriteria,isEditable:e.rubricIsEditable,grade:e.studentGrade,isGradeOverridden:e.gradeIsOverridden,isMultipleAttempts:e.hasMultipleAttempts,isGroupGradeMultiple:e.isGroupGradeMultiple,isGradingInProgress:e.isGradingInProgress,isAnonymousGrading:e.gradeIsAnonymous,rubricType:e.rubricType,onGradeInputUpdate:e.onGradeInputUpdate}),R=e=>{let t=(0,r.omitBy)(D(e,!1),r.isNil);return(0,r.omitBy)(t,e=>(0,r.isArray)(e)&&(0,r.isEmpty)(e))},L=(e,t)=>{let n=(0,r.cloneDeep)(e);return n.criteria.forEach(e=>{e.lastSaveFailed=t}),n},N=(e,t,n,i,r,s)=>{let o=e.achievements.find(e=>e.id===n);o.isSelected=!0,c(e,o,t,i,r,s)},$=e=>{let t=Math.floor(Math.log(Math.trunc(e))*Math.LOG10E+1);return t<=3?(0,r.floor)(e,2):4===t?(0,r.floor)(e,1):(0,r.floor)(e)},O=(e,t)=>{var n;let i=(0,r.cloneDeep)(t),s=null===(n=i.rubricCriteria)||void 0===n?void 0:n.find(t=>t.id===e);return s&&(s.feedback=void 0,s.hasUnsavedFeedback=!1),i},G=e=>{let t=o.cQ.sumFloatValues(e.map(e=>{var t;return null===(t=e.achievements.find(({isSelected:e})=>e))||void 0===t?void 0:t.score}).filter(e=>"number"==typeof e));return"number"==typeof t?$(t):""},_=e=>{var t,n;return e.rubricType&&g(e.rubricType)?null!==(n=o.cQ.sumFloatValues((null!==(t=e.rows)&&void 0!==t?t:[]).map(e=>{var t;return null!==(t=e.rowPoints)&&void 0!==t?t:0})))&&void 0!==n?n:0:100},M=e=>"number"==typeof e.scoreValue,B=e=>!!e.find(M),F=e=>{let t=(0,r.cloneDeep)(e);return t.studentGrade="",t.gradeIsOverridden=!1,B(t.rubricCriteria)&&(t.rubricCriteria=f(t.rubricCriteria)),t};function U(e){let t={calculateCompletion:l,updateCriteria:(e,t,n,i,s,o,a)=>{let l=(0,r.cloneDeep)(e),c=l.find(e=>e.id===n);return(m(c),void 0===i)?h(c):N(c,t,i,s,o,a),l}},n=n=>i.createElement(a.Consumer,null,r=>i.createElement(e,{...n,...r,...t}));return n.displayName=`withContext(${e.displayName||e.name||"Component"})`,n}},749444:function(e,t,n){"use strict";n.d(t,{Fv:function(){return eG},a3:function(){return eq},g6:function(){return eB},b5:function(){return e_},ix:function(){return ev},nS:function(){return eL},Jm:function(){return eD},IO:function(){return e$},yN:function(){return D},m5:function(){return _},O4:function(){return S.O4},Nd:function(){return S.Nd}});var i=n(202784),r=n.n(i),s=n(342291),o=n(158550),a=n(755755),l=n(998426),c=n(797580);let d=()=>(0,l.kc)({styles:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),u=e=>(0,l.kc)({gradePill:{background:e.palette.background.b4,borderRadius:"30px",display:"flex",justifyContent:"center",alignItems:"center"}}),p=e=>({padding:"10px",paddingLeft:"14px",backgroundColor:e.palette.background.b2,borderRadius:"2px",border:`1px solid ${e.palette.border.main}`,marginBottom:"10px","& $titleAchievement":{fontSize:e.typography.fontSizeDefault,fontWeight:e.typography.fontWeightSemiBold},"& $paragraph":{margin:0,fontWeight:e.typography.fontWeightLight},"& $label":{margin:"5px",whiteSpace:"nowrap",fontWeight:e.typography.fontWeightSemiBold},"& $descriptionAchievement":{wordBreak:"break-word",marginRight:"5px",textAlign:"left"}}),m=e=>({width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}),h=e=>({"& $titleCriterion$titleCriterion":{margin:0,fontSize:e.typography.fontSizeMedium,fontWeight:e.typography.fontWeightSemiBold,wordBreak:"break-word"},"& $percentageCriterion":{margin:0,fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary}}),g={paddingLeft:0,margin:0,"& li":{listStyleType:"none"},"& .bb-AccordionTab-Icon-Button-Class":{flexShrink:0}},f=e=>(0,l.kc)({styles:{"& $header":{[e.breakpoints.up("sm")]:{"& .ms-Panel-commands":{backgroundColor:e.palette.common.white}},"& .ms-Panel-header":{boxShadow:"none",[e.breakpoints.up("sm")]:{alignItems:"flex-end",minHeight:0,"& .header-actions":{margin:0,flex:0}},"& .ms-Panel-titles-container":{maxWidth:"100%",[e.breakpoints.up("sm")]:{position:"static"},"& .ms-Panel-subTitle":{display:"block",...d().styles},"& .ms-Panel-headerText":{...d().styles,textAlign:"center",[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeXXLarge,fontFamily:e.typography.fontFamilySerif,color:e.palette.text.primary,textAlign:"initial"}}}}},"& $body":{paddingBottom:"0 !important",paddingTop:0}}}),b=e=>({marginTop:"24px",marginBottom:"3px",height:"62px",backgroundColor:e.palette.background.b2,display:"flex",justifyContent:"space-between",border:`1px solid ${e.palette.border.main}`,"& $description":{display:"flex",alignItems:"center"},"& $icon":{margin:"0 10px"}}),v=()=>({"& .green":{backgroundColor:c.fx.green},"& .yellowgreen":{backgroundColor:c.fx.yellowGreen},"& .yellow":{backgroundColor:c.fx.yellow},"& .orange":{backgroundColor:c.fx.brightOrange},"& .red":{backgroundColor:c.fx.red},"& .color-disabled":{backgroundColor:c.W1.black,color:c.W1.white}}),y=(0,l.ZL)(e=>(0,l.kc)({criterionOverview:{cursor:"pointer",paddingTop:"16px",paddingBottom:"8px",...h(e)},titleCriterion:{},percentageCriterion:{}}));var S=n(166099);let C=(0,o.withAnalytics)(({analyticsId:e,analyticsEventAugmentor:t,criterionId:n,title:r,value:s,decimalsLength:l,rubricType:c,rubricMaxScore:d,maxScore:u,onClick:p})=>{let{formatNumber:m,translate:h}=(0,a.h)(),g=m(s,{maximumFractionDigits:l}),f=m((0,S.fi)(s,d||u),{maximumFractionDigits:l}),b=y(),v=`${e}.criterionOverview.button`,C=t(o.AnalyticsEventTypes.CLICK_EVENT,p,v);return i.createElement("div",{className:b.criterionOverview,"data-analytics-id":v,onClick:C},i.createElement("h2",{className:b.titleCriterion,id:n},r),i.createElement("p",{className:b.percentageCriterion},!(0,S.lR)(c)&&h("rubrics.criterion.percentage",{percentage:g}),(0,S.lR)(c)&&h("rubrics.criterion.possiblePoints",{points:g,percentage:f})))});var E=n(906277);let I=(0,l.ZL)(e=>(0,l.kc)({criterionAchievement:{...p(e)},criterionAchievementContent:{...m(e)},titleAchievement:{},paragraph:{},label:{},descriptionAchievement:{},scoreAchievement:{height:"30px",minWidth:"50px",...u(e).gradePill},scoreIsRange:{minWidth:"80px"}})),w=({title:e,description:t,score:n,rangeScore:r,decimalsLength:s,rubricType:o})=>{let l=I(),{translate:c,formatNumber:d,parseNumber:u}=(0,a.h)(),p=null!=n,m="";r&&(m=c((0,S.lR)(o)?"rubrics.criterion.pointsRangeScore":"rubrics.criterion.percentageRangeScore",{minValue:u(d(r.minValue,{maximumFractionDigits:s})),maxValue:u(d(r.maxValue,{maximumFractionDigits:s}))}));let h=p?d(n,{maximumFractionDigits:s}):m;return i.createElement("div",{className:l.criterionAchievement},i.createElement("button",{className:l.criterionAchievementContent,"aria-label":`${e} ${h}`,tabIndex:0},i.createElement("div",{className:l.descriptionAchievement},i.createElement("span",{className:l.titleAchievement},e),i.createElement("p",{className:l.paragraph},t)),i.createElement("div",{className:(0,E.Z)("js-rubric-view-achievement-score",l.scoreAchievement,{[l.scoreIsRange]:!p})},i.createElement("div",{className:l.label},h))))},A=(0,l.ZL)(()=>(0,l.kc)({criterionContent:{margin:"12px 0"}})),k=({achievements:e,decimalsLength:t,rubricType:n})=>{let r=A(),s=e=>i.createElement(w,{title:e.title,description:e.description,score:e.score,rangeScore:e.rangeScore,decimalsLength:t,rubricType:n});return i.createElement("div",{className:r.criterionContent},e.map(e=>i.createElement("div",{key:e.id},s(e))))};class T extends i.Component{constructor(e){var t;super(e),this.onToggleCallBack=()=>{let{shouldOpenAccordion:e}=this.state;this.setState({shouldOpenAccordion:!e})},this.state={shouldOpenAccordion:null!==(t=e.initialOpen)&&void 0!==t&&t}}render(){let{title:e,value:t,achievements:n,analyticsId:r,decimalsLength:o,rubricType:a,maxScore:l,criterionId:c}=this.props,{shouldOpenAccordion:d}=this.state,u=`${r}.accordionTab`,p=`criterion${c}`;return i.createElement(s.AccordionTab,{showExpander:!0,expanded:d,ariaLabelledby:p,contents:i.createElement(k,{achievements:n,decimalsLength:o,rubricType:a}),analyticsId:u,title:i.createElement(C,{criterionId:p,analyticsId:u,title:e,value:t,onClick:this.onToggleCallBack,rubricType:a,decimalsLength:o,maxScore:l})})}}let P=(0,l.ZL)(()=>(0,l.kc)({rubricViewRubric:{...g}})),D=({analyticsId:e,criteria:t,isUsingAnalyticContext:n,decimalsLength:r,rubricType:s,maxScore:o,initialOpen:a})=>{let l=P(),c=n?`${e}.rubricView`:`${e}.rubrics.components.rubricView`;return i.createElement("ul",{className:l.rubricViewRubric},t.map(e=>i.createElement(T,{key:e.id,title:e.title,value:e.value,achievements:e.achievements,decimalsLength:r,analyticsId:c,rubricType:s,maxScore:o,criterionId:e.id,initialOpen:a})))},x=(0,l.ZL)(e=>(0,l.kc)({rubricViewScore:{...b(e)},description:{},icon:{},maximumScore:{fontWeight:e.typography.fontWeightBold},points:{padding:"0 15px",borderLeft:`1px solid ${e.palette.border.main}`,display:"flex",alignItems:"center"}}));var R=n(238136);let L=({iconName:e})=>{let t=R.DocumentBlank;switch(e){case"assignment":t=R.Assignments;break;case"attendance":t=R.Attendance;break;case"audio":t=R.Audio;break;case"blog":t=R.Blog;break;case"calculation":t=R.Calculation;break;case"discussion":t=R.Discussion;break;case"document-blank":t=R.DocumentBlank;break;case"document-text":t=R.DocumentText;break;case"folder":case"folder-open":t=R.Folder;break;case"homework":t=R.Homework;break;case"journal":t=R.Journal;break;case"learning-module":t=R.LearningModule;break;case"link":t=R.Link;break;case"lti":t=R.Lti;break;case"overall-grade":t=R.OverallGrade;break;case"pdf":t=R.Pdf;break;case"photo":t=R.Photo;break;case"presentation":t=R.Presentation;break;case"scormengine":t=R.Scormengine;break;case"spreadsheet":t=R.Spreadsheet;break;case"survey":t=R.Survey;break;case"test":case"quiz":case"exam":t=R.Test;break;case"textbook":t=R.Textbook;break;case"video":t=R.Video;break;case"zip":t=R.Zip}return i.createElement(t,{color:"primary"})},N=({maxScore:e,contentIconName:t,shouldShowIcon:n})=>{let r=x(),{translate:s,formatNumber:o}=(0,a.h)(),l=s("rubrics.score.maxScoreLabel"),c=s("rubrics.score.maxScorePoints",{maxScore:o(e)});return i.createElement("div",{className:r.rubricViewScore},i.createElement("div",{className:r.description},i.createElement("span",{className:r.icon},n&&i.createElement(L,{iconName:t})),i.createElement("span",{className:r.maximumScore},l)),i.createElement("div",{className:r.points},i.createElement("span",{className:"js-rubric-view-score-value"},c)))};var $=n(410628),O=n(608555);let G=(0,l.ZL)(e=>(0,l.kc)({rubricViewPanel:{...f(e).styles},header:{},body:{}})),_=({analyticsId:e,smallTitle:t,contentIconName:n,maxScore:r,criteria:s,decimalsLength:o,rubricType:a,hideNavMenu:c})=>{let d=G(),u=`${e}.rubrics.components.rubricViewPanel`,p=(0,l.ac)((0,l.Fg)().breakpoints.down("xs")),m=(0,$.q)();return i.createElement("div",{className:(0,E.Z)("panel-wrap",d.rubricViewPanel)},i.createElement("div",{className:(0,E.Z)("panel-header","simple-header",d.header)},i.createElement(O.BbPanelHeader,{analyticsId:`${u}.header`,title:m("rubrics.title"),smallHeaderTitle:p?void 0:t,type:O.BbPanelType.full,hideNavMenu:!!c,navMenuAriaLabel:m("global.navigationMenu")})),i.createElement("div",{className:(0,E.Z)("panel-body","panel-content",d.body)},i.createElement(N,{contentIconName:n,maxScore:r,shouldShowIcon:!0}),i.createElement(D,{isUsingAnalyticContext:!0,analyticsId:u,criteria:s,decimalsLength:o,maxScore:r,rubricType:a})))};var M=n(50635),B=n(986709);let F=(0,l.ZL)(e=>(0,l.kc)({evaluationCriterionOverview:{cursor:"pointer",paddingTop:"16px",paddingBottom:"8px",display:"flex",justifyContent:"space-between",alignItems:"center",...h(e),...v()},titleCriterion:{},percentageCriterion:{},description:{display:"flex",flexDirection:"column",alignItems:"flex-start",marginRight:"5px"},pill:{height:"25px",minWidth:"50px",...u(e).gradePill},pillLabel:{margin:"5px",fontWeight:e.typography.fontWeightSemiBold},pillAndFeedback:{display:"inline-flex",alignItems:"center",justifyContent:"flex-end"},feedbackIcon:{height:"16px",marginLeft:"11px"}}));var U=n(675689),V=n(847969),H=n(327355);let q=(0,S.lb)((0,o.withAnalytics)(({analyticsId:e,analyticsEventAugmentor:t,title:n,feedback:r,value:s,scoreValue:l,colorPercentage:d,isStudent:u,gradingPillColor:p,decimalsLength:m,rubricType:h,rubricMaxScore:g,onClick:f,onOpenFeedback:b,ariaCriterionId:v,rubricIsEditable:y,gradeIsOverridden:C})=>{let I=l||0===l,{formatNumber:w,translate:A}=(0,a.h)(),k=r?"rubrics.criterion.viewFeedback":"rubrics.criterion.addFeedback",T=i.useMemo(()=>r?i.createElement(U.Feedback,{htmlColor:c.W1.purpleDark}):u?null:i.createElement(U.AddFeedback,{color:"primary"}),[r,u]),P=w(s,{maximumFractionDigits:m}),D=w((0,S.fi)(s,g),{maximumFractionDigits:m}),x=F(),R=`${e}.criterionOverview.button`,L=`${e}.criterionOverview.feedback.button`,N=t(o.AnalyticsEventTypes.CLICK_EVENT,f,R);return i.createElement("div",{"data-analytics-id":R,onClick:N,className:x.evaluationCriterionOverview},i.createElement("div",{className:x.description},i.createElement("h2",{className:x.titleCriterion,id:v},n),i.createElement("p",{className:x.percentageCriterion},!(0,S.lR)(h)&&A("rubrics.criterion.percentage",{percentage:P}),(0,S.lR)(h)&&A("rubrics.criterion.possiblePoints",{points:P,percentage:D}))),i.createElement("div",{className:x.pillAndFeedback},i.createElement("div",{className:(0,E.Z)("js-rubric-evaluation-criterion-score",x.pill,I&&void 0!==p?p(d):"")},i.createElement("span",{className:x.pillLabel},I?w(l,{round:"truncate",maximumFractionDigits:m}):"-")),T&&i.createElement(i.Fragment,null,i.createElement(H.HideOffScreen,null,A(r?"rubrics.criterion.criterionHasFeedback":"rubrics.criterion.criterionDoesNotHaveFeedback",{title:n})),i.createElement("div",{"aria-hidden":!0},i.createElement(V.AnalyticsIconButton,{analyticsId:L,className:x.feedbackIcon,disabled:!y||!!C,onClick:e=>{e.preventDefault(),e.stopPropagation(),b()},tabIndex:-1,title:A(k)},T)))))})),j=(0,l.ZL)(e=>(0,l.kc)({achievement:{cursor:"pointer",...p(e),...m(e),...v(),"& .color-disabled":{backgroundColor:c.W1.white}},achievementSelected:{backgroundColor:e.palette.background.b9},titleAchievement:{},paragraph:{},label:{},descriptionAchievement:{},descriptionSelected:{color:e.palette.primary.contrastText},scoreAchievement:{height:"30px",minWidth:"50px",...u(e).gradePill},scoreIsRange:{minWidth:"80px"},scoreContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})),z=i.memo(({rangeScoreValue:e,score:t,rangeScore:n,rubricType:r,title:s,isSelected:o,description:l,colorPercentage:c,gradingPillColor:d,children:u,showDescription:p})=>{let m=j(),{translate:h,formatNumber:g}=(0,a.h)();return i.createElement("div",{className:(0,E.Z)("js-rubric-evaluation-achievement",m.achievement,{[m.achievementSelected]:o})},i.createElement("div",{className:(0,E.Z)(m.descriptionAchievement,{[m.descriptionSelected]:o})},i.createElement("span",{className:m.titleAchievement},s),p?i.createElement("p",{className:(0,E.Z)("js-rubric-view-achievement-description",m.paragraph)},l):null),i.createElement("div",{className:(0,E.Z)("js-rubric-evaluation-achievement-score",m.scoreContainer)},u||i.createElement("div",{className:(0,E.Z)(m.scoreAchievement,void 0!==d&&null!=c?d(c):"",{[m.scoreIsRange]:n})},i.createElement("div",{className:m.label},null!=e?g(e):null!=t?g(t):n?h((0,S.lR)(r)?"rubrics.criterion.pointsRangeScore":"rubrics.criterion.percentageRangeScore",{minValue:n.minValue,maxValue:n.maxValue}):""))))});var W=n(276635),K=n(692475);class Z extends i.Component{constructor(e){super(e),this.handleChange=e=>{let t;let{onChange:n,allowDecimals:i,localize:{parseNumber:r}}=this.props,s=e.target.value,o=s;if(""!==s&&(t=i?r(s):(0,W.toInteger)(r(s)),o=(0,W.toString)(r(s))),this.setState({inputValue:s,grade:t}),!(i?/^(\d{0,5}(\.\d{0,2})?)$/:/^(\d{0,5})$/).test(o)){this.setState({hasError:!0}),this.handleError();return}this.setState({hasError:!1}),n&&n(t)},this.handleKeyDown=e=>{13===e.keyCode&&(e.preventDefault(),this.submit())},this.handleBlur=()=>{this.submit()},this.submit=()=>{let{grade:e,inputValue:t}=this.state,{onSubmit:n,allowEmptyValue:i}=this.props;if(""!==t||i){if(this.isValidInput()){n(e);return}this.handleError()}};let{initialValue:t}=e;this.state={inputValue:(null!=t?t:"").toString(),grade:t?this.parseInitialValue(t):void 0,hasError:!1},this.inputRef=i.createRef()}componentDidMount(){var e;null===(e=this.inputRef.current)||void 0===e||e.focus()}parseInitialValue(e){let{localize:{parseNumber:t}}=this.props;if((0,W.isString)(e)){let n=t(e);if((0,W.isFinite)(n))return n}return e}inputSize(e){let{isExpandable:t}=this.props;return t?0===e?1:e>8?8:e:5}isValidInput(){let{grade:e,inputValue:t,hasError:n}=this.state,{minValue:i=0,maxValue:r,allowEmptyValue:s}=this.props;if(n)return!1;if(s&&!e&&""===t)return!0;if(void 0===e||""===t)return!1;let o=Number(e);return r?i<=o&&o<=r:i<=o}handleError(){let{onError:e}=this.props;e&&e()}render(){let{inputValue:e}=this.state,{analyticsId:t,analyticsEventAugmentor:n,ariaLabel:r,onClick:s,classes:{pillInput:a},placeholder:l="--",tabIndex:c}=this.props,d=`${t}.input.text`,u=n(o.AnalyticsEventTypes.CLICK_EVENT,s||o.defaultOnClick,d),p=n(o.AnalyticsEventTypes.CLICK_EVENT,this.handleKeyDown||o.defaultOnClick,d),m=n(o.AnalyticsEventTypes.CLICK_EVENT,this.handleBlur||o.defaultOnClick,d);return i.createElement("input",{tabIndex:c,"data-analytics-id":d,className:a,value:e,placeholder:l,ref:this.inputRef,onChange:this.handleChange,onKeyDown:p,onBlur:m,onClick:u,size:this.inputSize(e.length),"aria-label":r})}}let Q=(0,o.withAnalytics)((0,K.h)((0,l.D2)(e=>(0,l.kc)({pillInput:{textAlign:"center",border:"none",fontWeight:e.typography.fontWeightSemiBold,boxSizing:"border-box",lineHeight:1.2,backgroundColor:"inherit",width:"100%","&:focus":{outline:"none",boxShadow:"none"},"&::placeholder":{fontWeight:e.typography.fontWeightRegular}}}),{name:"GradingInput"})(Z)));var J=n(88818);let Y=({analyticsId:e,isVisible:t,onComplete:n,target:i})=>{let s=(0,$.q)();return r().createElement(J.y2h,{analyticsId:`${e}.deselectConfirmationDialog`,calloutProps:{role:"dialog"},isVisible:t,onSuccess:()=>n(!0),target:i,textContent:{body:s("rubrics.criterion.deleteFeedbackConfirmation.body"),primaryButtonText:s("rubrics.criterion.deleteFeedbackConfirmation.continue"),secondaryButtonText:s("rubrics.criterion.deleteFeedbackConfirmation.cancel"),title:s("rubrics.criterion.deleteFeedbackConfirmation.title")},onDismiss:()=>n(!1)})};class X extends i.Component{constructor(e){super(e),this.achievementRef=i.createRef(),this.handleClick=e=>{e.preventDefault(),this.select()},this.handleKeyDown=e=>{switch(e.key){case" ":e.preventDefault(),document.body.classList.remove("hide-focus-outline"),this.select();break;case"Escape":e.preventDefault(),this.updateRangeGrade(this.props.rangeScoreValue)}},this.handleGradingInputError=()=>{this.setState({hasError:!0})},this.handleGradingInputChange=e=>{let{rangeScore:{minValue:t,maxValue:n}}=this.props;if(!e&&0!==e){this.setState({hasError:!1});return}let i=Number(e);if(i<t||i>n){this.setState({hasError:!0});return}i>=t&&i<=n&&this.setState({hasError:!1})},this.handleConfirmDeselect=e=>{e&&this.updateRangeGrade(void 0,!0),this.setState({showConfirmDeselectDialog:!1})},this.updateRangeGrade=(e,t=!1)=>{let{rangeScoreValue:n,reserveInput:i}=this.props;if(i(null),n===e){this.setState({showInput:!1});return}let{updateCriteria:r,criterionId:s,achievementId:o,criterionPercentage:a,updateRubric:l,rubricCriteria:c,rubricMaxScore:d,rubricType:u,calculateCompletion:p,feedback:m,hasUnsavedFeedback:h}=this.props,g=h||!!(null==m?void 0:m.trim());if("number"!=typeof e&&g&&!t){this.setState({showConfirmDeselectDialog:!0});return}let f=r(c,d,s,"number"==typeof e?o:void 0,u,a,e),b=(0,S.k0)(f),v=p(b,d);this.setState({showInput:!1},()=>{l({grade:b,gradeColorPercentage:v,rubricGrade:b,rubricType:u,criteria:f,criterionFeedbackWasUpdated:h})})},this.state={showInput:!1,hasError:!1,showConfirmDeselectDialog:!1}}componentDidUpdate(e,t){let{achievementId:n,achievementIdUnderEdit:i}=this.props;e.achievementId===e.achievementIdUnderEdit&&n!==i&&this.setState({hasError:!1}),t.showInput&&!this.state.showInput?(this.props.ariaGridCell.uncapture(),this.props.ariaGrid.focus()):!t.showInput&&this.state.showInput&&this.props.ariaGridCell.activate(!0),!e.ariaGridCell.cell.captured&&this.props.ariaGridCell.cell.captured&&this.select()}select(){let{achievementId:e,reserveInput:t}=this.props;t(e),this.setState({showInput:!0})}gradingInputCanBeDisplayed(){let{showInput:e}=this.state,{achievementId:t,achievementIdUnderEdit:n}=this.props;return e&&t===n}isActiveOrSelected(){let{achievementId:e,achievementIdUnderEdit:t,isSelected:n}=this.props;return e===t||n&&null==t}render(){var e;let{hasError:t}=this.state,{analyticsId:n,analyticsEventAugmentor:r,rangeScore:s,title:a,description:l,rangeScoreValue:c,colorPercentage:d,t:u,classes:{pill:p,pillSelected:m,pillError:h,rangeLabel:g,error:f,errorLabel:b},showDescription:v,ariaGridCell:y,rubricType:C,gradingPillColor:I}=this.props,w=`${n}.range`,A=r(o.AnalyticsEventTypes.CLICK_EVENT,this.handleClick,w),k=r(o.AnalyticsEventTypes.CLICK_EVENT,this.handleKeyDown,w);function T(){return u("rubrics.criterion.rangeScoreLabel",{minValue:s.minValue,maxValue:s.maxValue})}return i.createElement("div",null,i.createElement("div",{ref:this.achievementRef,onClick:A,onKeyDown:k},i.createElement(z,{rangeScore:s,title:a,isSelected:this.isActiveOrSelected(),rangeScoreValue:c,description:l,colorPercentage:d,showDescription:v,rubricType:C,gradingPillColor:I},this.gradingInputCanBeDisplayed()&&i.createElement(i.Fragment,null,i.createElement("div",{id:"rubric-evaluation-editable-achievement-range-pill",className:(0,E.Z)(p,{[m]:this.isActiveOrSelected()},{[h]:this.gradingInputCanBeDisplayed()&&t})},i.createElement(Q,{allowEmptyValue:!0,ariaLabel:u("rubrics.criterion.inputRange"),analyticsId:w,initialValue:c,minValue:s.minValue,maxValue:s.maxValue,placeholder:T(),onSubmit:this.updateRangeGrade,onError:this.handleGradingInputError,onChange:this.handleGradingInputChange,allowDecimals:(0,S.lR)(this.props.rubricType),tabIndex:y.cell.captured?0:-1})),i.createElement(H.HideOffScreen,{id:"rubric-evaluation-editable-achievement-range-label",className:g},T())))),t&&this.gradingInputCanBeDisplayed()&&i.createElement("div",{id:"rubric-evaluation-editable-achievement-range-error",className:f},i.createElement(U.Attention,{color:"inherit"}),i.createElement("span",{className:b},u("rubrics.criterion.valueOutOfRange",{minValue:s.minValue,maxValue:s.maxValue}))),i.createElement(Y,{analyticsId:w,isVisible:this.state.showConfirmDeselectDialog,onComplete:this.handleConfirmDeselect,target:null!==(e=this.achievementRef.current)&&void 0!==e?e:void 0}))}}let ee=(0,S.lb)((0,J.xSz)((0,o.withAnalytics)((0,M.H)((0,l.D2)(e=>(0,l.kc)({rangeLabel:{color:e.palette.primary.contrastText},error:{margin:"-3px 0 5px 11px",display:"flex",justifyContent:"flex-start",alignItems:"center",color:e.palette.error.main},errorLabel:{paddingLeft:"4px",fontSize:e.typography.fontSizeSmall},pill:{height:"30px",minWidth:"80px",padding:"0 10px",...u(e).gradePill},pillError:{border:`1px solid ${e.palette.border.main}`,boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${l.r8.fade(e.palette.error.main,.1)}`},pillSelected:{background:e.palette.background.b1}}),{name:"EditableRangeAchievement"})(X))))),et=(0,S.lb)((0,o.withAnalytics)(({analyticsId:e,analyticsEventAugmentor:t,score:n,rangeScore:r,title:s,isSelected:a,rangeScoreValue:l,description:c,criterionPercentage:d,criterionId:u,value:p,achievementId:m,achievementIdUnderEdit:h,reserveInput:g,updateCriteria:f,updateRubric:b,calculateCompletion:v,rubricCriteria:y,rubricMaxScore:C,rubricType:E,colorPercentage:I,feedback:w,hasUnsavedFeedback:A,showDescription:k,gradingPillColor:T})=>{var P;let D=i.useRef(null),[x,R]=i.useState(!1),{focus:L}=(0,J.Wf6)(),N=A||!!(null==w?void 0:w.trim()),$=(e=!1)=>{if(a&&N&&!e){R(!0);return}let t=f(y,C,u,a?void 0:m,E,d),n=(0,S.k0)(t),i=v(n,C);b({grade:n,gradeColorPercentage:i,rubricGrade:n,criteria:t,criterionFeedbackWasUpdated:A})};(0,J.ogI)({onSelect:()=>{r||$()}});let O=`${e}.percentage`,G=t(o.AnalyticsEventTypes.CLICK_EVENT,e=>{e.preventDefault(),$()},O);return i.createElement(i.Fragment,null,r?i.createElement(J.Tgj,{capture:!0,index:1},i.createElement(ee,{analyticsId:O,rangeScore:r,criterionPercentage:d,value:p,title:s,isSelected:a,colorPercentage:I,rangeScoreValue:l,description:c,criterionId:u,feedback:w,hasUnsavedFeedback:A,achievementId:m,achievementIdUnderEdit:h,reserveInput:g,showDescription:k})):i.createElement(i.Fragment,null,i.createElement(J.Tgj,{index:1},i.createElement("div",{ref:D,onMouseDown:G},i.createElement(z,{score:n,title:s,isSelected:a,rangeScoreValue:l,description:c,colorPercentage:I,showDescription:k,rubricType:E,gradingPillColor:T}))),i.createElement(Y,{analyticsId:O,isVisible:x,onComplete:e=>{e&&$(!0),R(!1),L()},target:null!==(P=D.current)&&void 0!==P?P:void 0})))}));class en extends i.Component{constructor(e){super(e),this.reserveInput=e=>{if(!e){this.setState({achievementIdUnderEdit:void 0});return}this.setState({achievementIdUnderEdit:e})},this.state={achievementIdUnderEdit:void 0}}render(){var e;let{achievementIdUnderEdit:t}=this.state,{analyticsId:n,achievements:r,criterionPercentage:s,criterionId:o,ariaCriterionId:a,classes:l,feedback:c,hasMultipleAttempts:d,rubricIsEditable:u,gradeIsOverridden:p,hasUnsavedFeedback:m,decimalsLength:h,rubricType:g,gradingPillColor:f,localize:{formatNumber:b,parseNumber:v},showAchievementDescriptions:y}=this.props,S=`${n}.achievement`,C=e=>e?{minValue:v(b(e.minValue,{maximumFractionDigits:h})),maxValue:v(b(e.maxValue,{maximumFractionDigits:h}))}:e,E=e=>null!=e?v(b(e,{maximumFractionDigits:h})):e,I=e=>"number"==typeof e?v(b(e,{maximumFractionDigits:h})):e,w=e=>i.createElement(et,{analyticsId:S,score:I(e.score),rangeScoreValue:E(e.rangeScoreValue),rangeScore:C(e.rangeScore),title:e.title,isSelected:e.isSelected,description:e.description,criterionPercentage:s,criterionId:o,feedback:c,hasUnsavedFeedback:m,value:e.value,achievementId:e.id,colorPercentage:e.colorPercentage,achievementIdUnderEdit:t,reserveInput:this.reserveInput,showDescription:y}),A=e=>i.createElement(J.Tgj,{index:1},i.createElement(z,{score:I(e.score),rangeScoreValue:E(e.rangeScoreValue),rangeScore:C(e.rangeScore),title:e.title,isSelected:e.isSelected,description:e.description,colorPercentage:e.colorPercentage,showDescription:y,rubricType:g,gradingPillColor:f})),k=u&&(!p||d);return i.createElement(J._c5,{key:String(!!k),htmlProps:{"aria-labelledby":a,"aria-readonly":!k,className:l.evaluationCriterionAchievement},select:!(null===(e=r[0])||void 0===e?void 0:e.rangeScore)},r.map((e,t)=>{var n;return i.createElement(J.dHq,{key:e.id,index:t+1,selected:null!==(n=e.isSelected)&&void 0!==n&&n},k?w(e):A(e))}))}}let ei=(0,S.lb)((0,K.h)((0,l.D2)(()=>(0,l.kc)({evaluationCriterionAchievement:{margin:"12px 0"}}),{name:"CriterionAchievement"})(en)));var er=n(150885),es=n(303109),eo=n(958299),ea=n(945209),el=n(579633),ec=n(817426);class ed extends i.Component{constructor(e){super(e),this.MemoizedBbEditor=i.memo(({autoSaveMilliseconds:e,bbml:t,isReadOnly:n,placeholder:r,autoSaveCallback:s,onBlur:o,onChange:a,isDisabled:l,ariaLabelledBy:c})=>i.createElement(er.BbEditor,{bbml:t,onChange:a,autoSaveCallback:s,autoSaveMilliseconds:e,isReadOnly:n,placeholder:r,onBlur:o,isDisabled:l,disablePasteFormat:!0,isToolbarHidden:!0,ariaLabelledBy:c}),(e,t)=>{let n=e.isReadOnly!==t.isReadOnly,i=(""===t.studentGrade||null==t.studentGrade)&&""===t.bbml,r=e.isDisabled!==t.isDisabled;return!n&&!i&&!r}),this.saveFeedback=()=>{let{updateRubric:e,rubricCriteria:t,studentGrade:n,rubricType:i,criterionId:r,feedback:s,scoreValue:o}=this.props;null==e||e({grade:n,rubricGrade:n,criterionFeedbackWasUpdated:!0,criteria:null==t?void 0:t.map(e=>e.id===r?{...e,hasUnsavedFeedback:!("number"!=typeof o&&!s),feedback:s}:e),rubricType:i})},this.onSave=()=>{let{updateIsSavingFeedback:e,hasUnsavedFeedback:t}=this.props;t&&(e(),this.saveFeedback())},this.bbmlOnChange=e=>{let{updateFeedback:t}=this.props;t(e.toBbML())},this.toggleExpandFeedback=()=>{this.setState(({expandFeedback:e})=>({expandFeedback:!e}))},this.shouldHideBbml=()=>{let{feedback:e}=this.props;return!e&&!this.state.wasPencilSelected},this.shouldShowBbmlPreview=()=>!this.shouldHideBbml()&&!this.state.expandFeedback&&!this.state.wasPencilSelected&&!!this.props.rubricIsEditable,this.shouldShowBbmlEditor=()=>!this.shouldHideBbml()&&!this.shouldShowBbmlPreview(),this.getBbmlStyleClass=()=>{let{feedback:e,rubricIsEditable:t,classes:n,lastSaveFailed:i}=this.props,{wasPencilSelected:r}=this.state;return e&&!r?n.bbmlReadOnly:t&&i?`${n.bbmlEditable} ${n.bbmlSmallMargin}`:t&&!i?`${n.bbmlEditable} ${n.bbmlLargeMargin}`:""},this.getPencilStyleClass=()=>"",this.getTitleStyleClass=()=>{let{classes:e}=this.props;return`${e.feedbackTitle} ${e.titleSmallMargin}`},this.getHeaderStyleClass=()=>{let{classes:e}=this.props;return this.shouldShowSavingMessage()?`${e.feedbackHeader} ${e.feedbackHeaderSmallHeight}`:`${e.feedbackHeader} ${e.feedbackHeaderLargeHeight}`},this.getBbmlText=()=>{let{feedback:e}=this.props;return e||""},this.isBbmlReadOnly=()=>{let{feedback:e}=this.props,{wasPencilSelected:t}=this.state;return!!(e&&!t)},this.isBbmlDisabled=()=>{let{gradeIsOverridden:e,rubricIsEditable:t}=this.props;return!!(e&&t)},this.shouldShowAddFeedback=()=>{let{rubricIsEditable:e,gradeIsOverridden:t,feedback:n}=this.props,{wasPencilSelected:i}=this.state;return!!(e&&!i&&!n&&!t)},this.shouldShowPencil=()=>{let{rubricIsEditable:e,gradeIsOverridden:t}=this.props,{wasPencilSelected:n}=this.state;return!!(e&&!n&&!t)},this.shouldShowSavingMessage=()=>{let{isSavingFeedback:e,lastFeedbackSaveDate:t,hasUnsavedFeedback:n,rubricIsEditable:i}=this.props;return i&&(e&&n||t)},this.unsetBbmlEditMode=()=>{this.setState({wasPencilSelected:!1,shouldFocusBbml:!1})},this.setBbmlEditMode=()=>{this.setState({wasPencilSelected:!0,shouldFocusBbml:!0,isPreviewTruncated:!1})},this.getSavingMessage=()=>{let{localize:{translate:e,formatTime:t},lastFeedbackSaveDate:n}=this.props;return n?e("rubrics.criterion.savedMessage",{time:t(n,el.ILocaleTimeFormat.Short)}):e("rubrics.criterion.savingMessage")},this.getShowMoreMessage=()=>this.props.localize.translate("rubrics.criterion.showMore"),this.getShowLessMessage=()=>this.props.localize.translate("rubrics.criterion.showLess"),this.handleFeedbackLineClamp=e=>{this.setState({isPreviewTruncated:e})},this.handleAddFeedback=e=>{e.preventDefault(),this.setBbmlEditMode()},this.state={isPreviewTruncated:!1,wasPencilSelected:!1,shouldFocusBbml:!1,expandFeedback:!1},this.editorReference=i.createRef(),this.containerReference=i.createRef()}componentDidUpdate(e,t){var n;let{shouldFocusBbml:i}=this.state;if(i&&i!==t.shouldFocusBbml){let e=this.editorReference.current,t=null!==(n=null==e?void 0:e.querySelector('.bb-editor[contenteditable="true"]'))&&void 0!==n?n:this.containerReference.current;null==t||t.focus(),document.body.classList.remove("hide-focus-outline"),this.setState({shouldFocusBbml:!1})}!this.props.achievementId&&e.achievementId&&this.unsetBbmlEditMode(),!e.highlightFeedback&&this.props.highlightFeedback&&(this.props.feedback?this.setState({expandFeedback:!0},()=>{this.setState({shouldFocusBbml:!0})}):this.setBbmlEditMode())}render(){let{localize:{translate:e},analyticsId:t,classes:n,studentGrade:r,lastSaveFailed:s,showLoader:o,criterionId:a,criterionTitle:l}=this.props,c=`feedback-expand-${a}`,d=`feedback-region-${a}`,u=`rubrics-criterion${a}-feedback-title`;return i.createElement(i.Fragment,null,this.shouldShowAddFeedback()&&i.createElement(V.AnalyticsLink,{analyticsId:`${t}.feedback.tabStop.link`,"aria-label":e("rubrics.criterion.addFeedbackAriaLabel",{title:l}),className:n.addFeedbackTabStop,component:"button",onClick:this.handleAddFeedback},e("rubrics.criterion.addFeedback")),!this.shouldHideBbml()&&i.createElement("div",{tabIndex:-1,ref:this.containerReference,className:n.feedbackContainer},i.createElement("div",{className:this.getHeaderStyleClass()},i.createElement("h3",{id:u,className:this.getTitleStyleClass()},e("rubrics.criterion.feedbackTitle")),this.shouldShowPencil()&&i.createElement(eo.AnalyticsIconButton,{onClick:this.setBbmlEditMode,"aria-label":e("rubrics.criterion.pencilAriaLabel",{title:l}),analyticsId:`${t}.feedback.edit`,className:this.getPencilStyleClass()},i.createElement(es.I,{color:"primary","aria-hidden":"true"}))),this.shouldShowSavingMessage()&&i.createElement("div",{className:(0,E.Z)("js-feedback-time",n.savingMessage),role:"status","aria-live":"polite"},this.getSavingMessage()),o&&i.createElement(V.AnalyticsCircularProgress,{ariaLabel:e("rubrics.criterion.loadingAriaLabel"),size:"small",id:"rubrics-criterion-feedback-loader"}),this.shouldShowBbmlPreview()&&i.createElement("div",{className:n.feedbackPreviewContainer},i.createElement("div",{className:n.feedbackPreviewContent},i.createElement(J.x$h,{lines:1,onClampChange:this.handleFeedbackLineClamp,text:(0,ec.BD)(this.getBbmlText())})),this.state.isPreviewTruncated&&i.createElement("div",{className:n.feedbackPreviewShowMore},i.createElement(V.AnalyticsLink,{id:c,"aria-expanded":!1,component:"button",analyticsId:`${t}.feedback.showMore.button`,onClick:()=>this.toggleExpandFeedback()},this.getShowMoreMessage()))),this.shouldShowBbmlEditor()&&i.createElement(i.Fragment,null,i.createElement("div",{id:d,className:(0,E.Z)(this.getBbmlStyleClass(),"js-feedback-editor"),ref:this.editorReference,tabIndex:-1,...this.isBbmlReadOnly()&&this.state.isPreviewTruncated?{"aria-labelledby":c,role:"region"}:void 0},i.createElement(this.MemoizedBbEditor,{bbml:this.getBbmlText(),studentGrade:r,onChange:this.bbmlOnChange,autoSaveCallback:this.onSave,autoSaveMilliseconds:5e3,isReadOnly:this.isBbmlReadOnly(),placeholder:e("rubrics.criterion.feedbackPlaceHolder"),onBlur:this.onSave,isDisabled:this.isBbmlDisabled(),ariaLabelledBy:u})),this.state.isPreviewTruncated&&i.createElement("div",{className:n.feedbackPreviewShowLess},i.createElement(V.AnalyticsLink,{id:c,"aria-controls":d,"aria-expanded":!0,component:"button",analyticsId:`${t}.feedback.showLess.button`,onClick:()=>this.toggleExpandFeedback()},this.getShowLessMessage()))),s&&i.createElement("p",{className:n.errorMessage},e("rubrics.criterion.connectionMessage"))))}}let eu=(0,K.h)((0,S.lb)((0,l.D2)(e=>(0,H.createStyles)({bbmlEditable:{"& .bb-editor-root":{"& .ql-container":{boxShadow:"none",borderTop:`1px solid ${e.palette.border.dark}`,borderColor:e.palette.border.dark,"& .ql-editor":{height:"132px"}},"& .has-focus":{boxShadow:"none",borderTop:`1px solid ${e.palette.focus.light}`,borderColor:e.palette.focus.light},"& .has-keyboard-focus":{boxShadow:"none",border:`2px solid ${e.palette.focus.light}`}}},bbmlSmallMargin:{marginBottom:"12px"},bbmlLargeMargin:{marginBottom:"20px"},bbmlReadOnly:{"& .bb-editor-root":{"& .ql-container":{"& .ql-editor":{padding:0,minHeight:"0px"}}}},titleSmallMargin:{marginBottom:"0"},titleLargeMargin:{marginBottom:"12px"},feedbackContainer:{padding:"10px",paddingLeft:"14px",backgroundColor:e.palette.background.b2,borderRadius:"2px",border:`1px solid ${e.palette.border.main}`,marginTop:e.spacing(1)},feedbackTitle:{fontSize:e.typography.fontSizeDefault,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightSemiBold,marginTop:"2px"},savingMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary,margin:"2px 0 12px 0"},addFeedbackTabStop:{marginTop:e.spacing(1),"&:not(:focus)":{...ea.BbMixins.srOnly}},feedbackPreviewContainer:{display:"flex",flexDirection:"row",gap:e.spacing(1)},feedbackPreviewContent:{boxOrient:"vertical",display:"-webkit-box",flexGrow:1,lineClamp:1,overflow:"hidden"},feedbackPreviewShowMore:{flexShrink:0},feedbackPreviewShowLess:{flexShrink:0,textAlign:"right"},feedbackHeader:{display:"flex",alignItems:"center",justifyContent:"space-between"},feedbackHeaderSmallHeight:{height:"21px"},feedbackHeaderLargeHeight:{height:"33px"},errorMessage:{fontSize:e.typography.fontSizeSmall,color:e.palette.error.main,marginBottom:"20px"}}))(ed))),ep=(0,H.makeStyles)(e=>(0,H.createStyles)({root:{marginBottom:e.spacing(2)}})),em=({highlightFeedback:e,feedback:t,criterionId:n,hasUnsavedFeedback:r,analyticsId:s,achievements:o,criterionPercentage:a,ariaCriterionId:l,lastFeedbackSaveDate:c,lastSaveFailed:d,showAchievementDescriptions:u,showLoader:p,title:m,updateIsSavingFeedback:h,updateFeedback:g,isSavingFeedback:f,scoreValue:b})=>{var v;let y=ep(),S=`${s}.criterionContent`;return i.createElement("div",{className:y.root},i.createElement(eu,{updateIsSavingFeedback:h,updateFeedback:g,achievementId:null===(v=o.find(e=>e.isSelected))||void 0===v?void 0:v.id,highlightFeedback:e,feedback:t,lastSaveFailed:d,lastFeedbackSaveDate:c,criterionId:n,criterionTitle:m,analyticsId:S,showLoader:p,hasUnsavedFeedback:r,isSavingFeedback:f,scoreValue:b}),i.createElement(ei,{analyticsId:S,achievements:o,criterionPercentage:a,criterionId:n,ariaCriterionId:l,feedback:t,hasUnsavedFeedback:r,showAchievementDescriptions:u}))};class eh extends i.Component{constructor(e){super(e),this.scoreIsSelected=()=>"number"==typeof this.props.scoreValue,this.updateIsSavingFeedback=()=>{this.setState({isSavingFeedback:this.scoreIsSelected()})},this.updateFeedback=e=>{this.setState({localFeedback:e})},this.onToggleCallBack=()=>{let{showConfirmationModal:e,criterionId:t}=this.props;if(this.shouldShowConfirmationModal()){e(t,!0);return}if(this.state.isFeedbackDirty&&this.scoreIsSelected()){this.setState({showLoader:!0,isSavingFeedback:!0});return}let{shouldOpenAccordion:n}=this.state;this.setState({shouldOpenAccordion:!n})},this.onOpenFeedback=()=>{let{shouldOpenAccordion:e}=this.state;e?this.sendFocusToFeedback():this.setState({shouldOpenAccordion:!0},()=>{this.sendFocusToFeedback()})},this.sendFocusToFeedback=()=>{this.setState({shouldHighlightFeedback:!1},()=>{this.setState({shouldHighlightFeedback:!0})})};let{isExpanded:t,feedback:n}=this.props;this.state={shouldHighlightFeedback:!1,shouldOpenAccordion:t||!1,showLoader:!1,isFeedbackDirty:!1,localFeedback:n,isSavingFeedback:!1}}componentDidUpdate(e){let{showLoader:t}=this.state,{isExpanded:n,studentGrade:i,okConfirmationClicked:r,criterionId:s,hasUnsavedFeedback:o,removeFeedbackOnCriterion:a,confirmationHandledForCriterionId:l,feedback:c,scoreValue:d,lastFeedbackSaveDate:u}=this.props,{shouldOpenAccordion:p,localFeedback:m,isFeedbackDirty:h}=this.state,g=(null!=c?c:"")===(null!=m?m:""),f=e.studentGrade!==i,b=p!==n;(null==i||""===i)&&f&&b&&this.setState({shouldOpenAccordion:n}),g||h||typeof e.scoreValue!=typeof d||this.setState({isFeedbackDirty:!0}),(!this.scoreIsSelected()||!g||e.hasUnsavedFeedback)&&(this.scoreIsSelected()||m)||!h||o||this.setState({isFeedbackDirty:!1}),e.feedback!==c&&this.setState({localFeedback:c}),!u&&"number"!=typeof e.scoreValue&&this.scoreIsSelected()&&c&&this.setState({isSavingFeedback:!0});let v=e.okConfirmationClicked!==r&&r,y=this.shouldShowConfirmationModal()&&l===s;if(v&&y){let{shouldOpenAccordion:e}=this.state;this.setState({shouldOpenAccordion:!e},()=>{a(s)})}e.hasUnsavedFeedback&&!o&&(this.setState({isFeedbackDirty:!1,isSavingFeedback:!1}),t&&this.setState({showLoader:!1,shouldOpenAccordion:!1}))}shouldShowConfirmationModal(){let{isFeedbackDirty:e,localFeedback:t}=this.state;return!this.scoreIsSelected()&&e&&!!t}render(){let{showLoader:e}=this.state,{analyticsId:t,title:n,value:r,criterionId:o,scoreValue:a,colorPercentage:l,achievements:c,lastFeedbackSaveDate:d,lastSaveFailed:u,showAchievementDescriptions:p}=this.props,{shouldOpenAccordion:m,isFeedbackDirty:h,shouldHighlightFeedback:g,localFeedback:f,isSavingFeedback:b}=this.state,v=`${t}.criterion.accordionTab`,y=`criterion${o}`;return i.createElement(s.AccordionTab,{showExpander:!0,delegateToggleAction:!0,expanded:m,onToggle:this.onToggleCallBack,analyticsId:v,ariaLabelledby:y,contents:i.createElement(em,{updateIsSavingFeedback:this.updateIsSavingFeedback,updateFeedback:this.updateFeedback,analyticsId:t,highlightFeedback:g,feedback:f,lastSaveFailed:u,lastFeedbackSaveDate:d,achievements:c,criterionPercentage:r,criterionId:o,ariaCriterionId:y,hasUnsavedFeedback:h,showLoader:e,showAchievementDescriptions:p,title:n,isSavingFeedback:b,scoreValue:a}),title:i.createElement(q,{ariaCriterionId:y,analyticsId:v,title:n,feedback:f,value:r,scoreValue:a,colorPercentage:l,onClick:this.onToggleCallBack,onOpenFeedback:this.onOpenFeedback})})}}let eg=(0,S.lb)(eh),ef=(0,l.ZL)(e=>(0,l.kc)({rubricEvaluation:{...g},saveMessage:{marginTop:e.spacing(1.5),marginBottom:e.spacing(.5),fontSize:e.typography.fontSizeSmall},showAchievmentDescriptionsLabel:{display:"block",marginTop:e.spacing(1.5)}})),eb=e=>((null==e?void 0:e.length)?e.length*e[0].achievements.length:0)>300,ev=(0,S.lb)(({analyticsId:e,rubricCriteria:t,rubricIsEditable:n,showAchievementDescriptionsUserPreference:i,updateRubricUserPreference:s})=>{let o=ef(),a=(0,$.q)(),[l,c]=r().useState(void 0),d=`${e}.rubricEvaluation.rubric`,u=eb(t),p=null!=l?l:!n;return void 0===l&&void 0!==i&&c(i===B._1K.TRUE),r().createElement(r().Fragment,null,n?r().createElement(V.AnalyticsFormControlLabel,{analyticsId:`${d}.showAchievementDescriptions.label`,className:o.showAchievmentDescriptionsLabel,control:r().createElement(V.AnalyticsSwitch,{analyticsId:`${d}.showAchievementDescriptions.switch`,checked:p,onChange:()=>{let e=!l;c(e),null==s||s({key:B.hAU.SHOW_DESCRIPTION,value:e?B._1K.TRUE:B._1K.FALSE})}}),label:a("rubrics.showAchievementDescriptions")}):void 0,r().createElement("ul",{className:o.rubricEvaluation},null==t?void 0:t.map(e=>r().createElement(eg,{key:e.id,lastSaveFailed:e.lastSaveFailed,isExpanded:!u&&!!n&&!(0,S.bl)(e),criterionId:e.id,lastFeedbackSaveDate:e.lastFeedbackSaveDate,title:e.title,value:e.value,scoreValue:e.scoreValue,feedback:e.feedback,hasUnsavedFeedback:e.hasUnsavedFeedback,achievements:e.achievements,analyticsId:d,colorPercentage:e.colorPercentage,showAchievementDescriptions:p}))))});var ey=n(42196),eS=n(188505);class eC extends i.Component{constructor(e){super(e),this.scoreRef=i.createRef()}componentDidMount(){this.focusScore()}getGradingPillColorClass(){let{studentGrade:e,gradePercentageColor:t,isGroupGradeMultiple:n,gradingPillColor:i,showInput:r,classes:s}=this.props;return""===e||"number"!=typeof t||r||!i||n?s.pillEmpty:i(t)}focusScore(){var e;let{shouldFocusScore:t,showInput:n,hasMultipleAttempts:i}=this.props;(!n||i)&&t&&(null===(e=this.scoreRef.current)||void 0===e||e.focus())}getInfoMessage(){let{classes:e,localize:{translate:t}}=this.props;return i.createElement("div",null,i.createElement("p",{className:e.infoTitle},t("rubrics.score.info.title")),i.createElement("p",null,t("rubrics.score.info.message")))}handleClick(e){e.stopPropagation()}renderPillContent(){let{children:e,rubricMaxScore:t,isGroupGradeMultiple:n,isGradingInProgress:r,classes:s,localize:{translate:o,formatNumber:a}}=this.props;return r?i.createElement("span",null,o("rubrics.score.inProgress")):n?i.createElement("span",null,o("rubrics.score.multiple")):i.createElement(i.Fragment,null,e,i.createElement("span",{className:s.gradeLabel},o("rubrics.score.maxScore",{maxScore:a(t)})))}render(){let{contentIconName:e,hasError:t,showInput:n,submissionLabel:r,submissionDetail:s,classes:o,shouldShowIcon:a,hasMultipleAttempts:l,rubricMaxScore:c}=this.props;return i.createElement("button",{disabled:l,tabIndex:0,"aria-label":r,className:(0,E.Z)(o.rubricEvaluationScore,l&&o.rubricIsMultiple),ref:this.scoreRef},i.createElement("div",{className:o.gradepillWrapper},i.createElement("div",{className:o.description},i.createElement("span",{className:o.icon},a&&i.createElement(L,{iconName:e})),i.createElement("div",{className:o.maximumScore},i.createElement("span",{className:o.maximumScoreTitle},r),i.createElement("span",{className:(0,E.Z)(o.maximumScorePercentage,{[o.maximumScorePercentageEllipsis]:n})},s))),i.createElement("div",{id:"rubric-pill-container",className:(0,E.Z)(o.pill,{[o.pillError]:t,[o.pillBigPoint]:!!c&&c.toString().length>4},this.getGradingPillColorClass())},this.renderPillContent())),i.createElement("div",{onClick:this.handleClick},i.createElement(eS.AnalyticsTooltip,{id:"grade-discrepancy-info-rubric",placement:"top",title:this.getInfoMessage(),analyticsId:"components.rubrics.score.base.discrepancy.info.tooltip"},i.createElement(ey.d,{className:o.infoIcon}))))}}let eE=(0,S.lb)((0,K.h)((0,l.D2)(e=>(0,l.kc)({rubricEvaluationScore:{width:"100%",alignItems:"center",...b(e),...v()},rubricIsMultiple:{cursor:"default"},description:{},icon:{},maximumScore:{display:"flex",justifyContent:"center",alignItems:"flex-start",flexDirection:"column"},maximumScoreTitle:{fontWeight:e.typography.fontWeightBold},maximumScorePercentage:{margin:0,fontSize:e.typography.fontSizeSmall,color:e.palette.text.secondary,lineHeight:1.4,textAlign:"left"},maximumScorePercentageEllipsis:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"122px"},pill:{height:"30px",minWidth:"80px",marginRight:"9px",boxSizing:"border-box",padding:"0 10px",...u(e).gradePill},pillBigPoint:{minWidth:"max-content"},pillEmpty:{border:`1px solid ${e.palette.common.black}`,background:e.palette.primary.contrastText},pillError:{border:"none",boxShadow:`inset 0 0 0 1px ${e.palette.error.main}, inset 0 0 0 4px ${l.r8.fade(e.palette.error.main,.1)}`},gradeLabel:{lineHeight:1.2,whiteSpace:"nowrap",fontWeight:e.typography.fontWeightSemiBold},infoIcon:{verticalAlign:"middle",marginRight:"8px"},infoTitle:{fontWeight:e.typography.fontWeightBold,fontSize:e.typography.fontSizeMedium},gradepillWrapper:{justifyContent:"space-between",display:"flex",flex:"auto"}}),{name:"Score"})(eC)));var eI=n(609582);class ew extends i.Component{constructor(){super(...arguments),this.executeRegrade=()=>{let{updateRubric:e}=this.props;null==e||e((0,S.uL)(this.props))}}render(){let{analyticsId:e,classes:t,t:n}=this.props;return i.createElement(i.Fragment,null,i.createElement("span",{className:t.overrideWrapText},n("rubrics.score.overriddenScore")),i.createElement("br",null),i.createElement(V.AnalyticsLink,{analyticsId:`${e}.regrader.link`,className:t.regrader,onClick:this.executeRegrade},n("rubrics.score.regradeScore")))}}let eA=(0,S.lb)((0,l.D2)(e=>(0,l.kc)({regrader:{margin:"10px 0",fontStyle:"italic",flexWrap:"wrap",cursor:"pointer"},link:{color:e.palette.link.active,textDecoration:`underline ${e.palette.link.active}`,textAlign:"left",lineHeight:"1.5"},overrideWrapText:{overflowWrap:"break-word",textAlign:"left",marginRight:"4px",lineHeight:"1.5"}}))((0,M.H)(ew))),ek=e=>(0,l.kc)({gradeLabel:{minWidth:"max-content",lineHeight:1.2,textAlign:"center",marginRight:"4px",fontWeight:e.typography.fontWeightSemiBold},gradingInputCallout:{maxWidth:"200px"},overrideBlocked:{marginTop:"12px",marginBottom:"10px",fontStyle:"italic"},errorMessage:{color:e.palette.error.main,margin:"8px 12px 8px 12px"}});class eT extends i.Component{constructor(e){super(e),this.handleSelect=()=>{this.setState({showInput:!0})},this.handleGradingInputSubmit=e=>{var t,n;let i=this.props.studentGrade?Number(this.props.studentGrade):null,r=e?Number(e):null;if(i===r){this.setState({showInput:!1});return}if(null===(n=(t=this.props).onGradeInputUpdate)||void 0===n||n.call(t,e),null===r){this.setState({clearConfirmationIsVisible:!0});return}this.setState({hasError:!1,showInput:!1},()=>{this.updateRubricValue(e)})},this.handleGradingInputError=()=>{this.setState({hasError:!0})},this.handleGradingInputChange=()=>{this.setState({hasError:!1})},this.onClearRubricSuccess=()=>{let{updateRubric:e}=this.props;this.setState({showInput:!1,clearConfirmationIsVisible:!1}),e((0,S.ET)(this.props))},this.onClearRubricDismiss=()=>{this.setState({showInput:!1,clearConfirmationIsVisible:!1})},this.state={showInput:!1,hasError:!1,clearConfirmationIsVisible:!1},this.gradingInputErrorRef=i.createRef()}updateRubricValue(e){let{updateRubric:t}=this.props;t((0,S.FG)(this.props,e))}render(){let{showInput:e,hasError:t,clearConfirmationIsVisible:n}=this.state,{analyticsId:r,contentIconName:s,rubricMaxScore:o,studentGrade:a,isExternalSubmission:l,gradeIsOverridden:c,children:d,hasMultipleAttempts:u,shouldFocusScore:p,shouldShowIcon:m,localize:{translate:h,formatNumber:g},classes:{overrideBlocked:f,gradingInputCallout:b,errorMessage:v}}=this.props,y={label:h(l?"rubrics.score.externalSubmission":"rubrics.score.submission"),detail:`${h("rubrics.score.maxScoreLabel")}: ${h("rubrics.score.maxScorePoints",{maxScore:g(o)})}`},C={title:h("rubrics.score.clearRubricConfirmationCallout.title"),body:h("rubrics.score.clearRubricConfirmationCallout.body"),primaryButtonText:h("rubrics.score.clearRubricConfirmationCallout.primaryButtonText"),secondaryButtonText:h("rubrics.score.clearRubricConfirmationCallout.secondaryButtonText")},E=a?h("rubrics.score.inputLabelGraded",{grade:a,total:g(o)}):h("rubrics.score.inputLabelEmpty"),I=`${r}.editableScore`,w=a||0===a?g((0,S.xu)(a)):a;return i.createElement(i.Fragment,null,i.createElement("div",{onClick:()=>!u&&this.handleSelect(),ref:this.gradingInputErrorRef},i.createElement(eE,{contentIconName:s,hasError:t,submissionLabel:y.label,submissionDetail:y.detail,showInput:e,shouldFocusScore:p,shouldShowIcon:m,hasMultipleAttempts:u},e&&!u?i.createElement(Q,{ariaLabel:E,analyticsId:I,allowEmptyValue:!0,allowDecimals:!0,isExpandable:!0,initialValue:w,onSubmit:this.handleGradingInputSubmit,onError:this.handleGradingInputError,onChange:this.handleGradingInputChange}):d)),i.createElement(J.y2h,{target:"#rubric-pill-container",onSuccess:this.onClearRubricSuccess,onDismiss:this.onClearRubricDismiss,calloutProps:{role:"dialog"},textContent:C,analyticsId:`${I}.clearRubricConfirmation`,isVisible:n}),c&&!u&&i.createElement(eA,{analyticsId:r}),u&&i.createElement("p",{className:f},h("rubrics.score.overrideBlocked")),t&&i.createElement(eI.Callout,{className:b,target:this.gradingInputErrorRef.current},i.createElement("div",{className:v},h("rubrics.criterion.scoreInputError"))))}}let eP=(0,S.lb)((0,K.h)((0,l.D2)(ek,{name:"EditableScore"})(eT))),eD=(0,S.lb)((0,l.D2)(ek,{name:"RubricEvaluationscore"})(({analyticsId:e,contentIconName:t,canOverride:n,studentGrade:r,isExternalSubmission:s,classes:o,rubricIsFullyGraded:l,shouldShowIcon:c,onGradeInputUpdate:d,shouldFocusScore:u})=>{let{translate:p,formatNumber:m}=(0,a.h)(),h=()=>i.createElement("span",{id:"rubric-evaluation-score-value",className:o.gradeLabel},r||0===r?m((0,S.xu)(r)):"--");return i.createElement(i.Fragment,null,n?i.createElement(eP,{analyticsId:e,contentIconName:t,isExternalSubmission:s,shouldFocusScore:null!=u?u:l,shouldShowIcon:c,onGradeInputUpdate:d},i.createElement(h,null)):i.createElement(eE,{contentIconName:t,submissionLabel:p("rubrics.score.yourScore"),shouldFocusScore:null!=u?u:l,shouldShowIcon:c},i.createElement(h,null)))}));var ex=n(91020);class eR extends i.Component{constructor(e){super(e),this.updateRubric=e=>{let{contextData:t}=this.state,{onRubricUpdate:n}=this.props;if(e.criterionFeedbackWasUpdated&&"criteria"in e){this.updateRubricWithFeedback(e);return}this.setState({contextData:{...t,...(0,S.Be)(e)}}),n(e)},this.removeFeedbackOnCriterion=e=>{let{contextData:t}=this.state;this.setState({contextData:{...t,...(0,S.Bu)(e,t)}},()=>{this.updateRubricDataInUltra(!0)})};let{getGradingPillColor:t,showConfirmationModal:n}=e;this.state={contextData:{showConfirmationModal:n,...(0,S.Nd)(e),updateRubric:this.updateRubric,removeFeedbackOnCriterion:this.removeFeedbackOnCriterion,gradingPillColor:t}}}componentDidUpdate(e){let{contextData:t}=this.state,{shouldUndoOverride:n,maxScore:i,okConfirmationClicked:r,confirmationHandledForCriterionId:s,shouldUpdateCriterionFeedback:o,criteria:a,isSavingRubric:l}=this.props;if(l!==e.isSavingRubric){this.setState({contextData:{...t,isSavingRubric:l}});return}if(t.okConfirmationClicked!==r){this.setState({contextData:{...t,okConfirmationClicked:r,confirmationHandledForCriterionId:s}});return}if(n&&t.gradeIsOverridden){let e=(0,S.k0)(t.rubricCriteria);this.setState({contextData:{...(0,S.ZD)(t,e,i),gradeIsOverridden:!1}},()=>{this.updateRubricDataInUltra()});return}o&&!e.shouldUpdateCriterionFeedback&&this.setState({contextData:{...(0,S.Ae)(a,t),currentlySavingFeedback:!1}},()=>{this.updateRubricDataInUltra()})}getSmallHeaderTitle(){let{smallTitle:e,UltraWindowSize:t}=this.props;return(null==t?void 0:t.isSmallBreakpoint())?void 0:e}updateRubricWithFeedback(e){var t;let{contextData:n}=this.state,{onRubricUpdate:i}=this.props;if((0,S.wg)()){let t=(0,S.T1)(e,!0);this.setState({contextData:{...n,...(0,S.Be)(t)}});return}let r=(0,S.T1)(e,!1),s=(0,S.KD)(r);if((null===(t=s.criteria)||void 0===t?void 0:t.length)===0){this.setState({contextData:{...n,...(0,S.Be)(r)}});return}this.setState({contextData:{...n,...(0,S.Be)(r),currentlySavingFeedback:!0}}),i(s)}updateRubricDataInUltra(e){let{contextData:t}=this.state,{onRubricPostUpdate:n}=this.props;n((0,S.Cl)(t),{isUpdatingFeedback:e})}render(){let{contextData:e}=this.state,{analyticsId:t,t:n,contentIconName:r,courseColorClass:s,classes:o,isExternalSubmission:a}=this.props,l=`${t}.rubrics.components.rubricEvaluationPanel`;return i.createElement("div",{className:(0,E.Z)("panel-wrap",o.rubricEvaluationPanel,s)},i.createElement("div",{className:(0,E.Z)("panel-header","simple-header",o.header)},i.createElement(O.BbPanelHeader,{analyticsId:`${l}.header`,title:n("rubrics.title"),type:O.BbPanelType.full,smallHeaderTitle:this.getSmallHeaderTitle(),navMenuAriaLabel:n("global.navigationMenu")})),i.createElement(S.bC.Provider,{value:{...e}},i.createElement("div",{className:(0,E.Z)("panel-body","panel-content",o.body)},i.createElement(eD,{analyticsId:l,contentIconName:r,isExternalSubmission:a,shouldShowIcon:!0}),i.createElement(ev,{analyticsId:l}))))}}let eL=(0,ex.windowResizingResponsiveComponentWrapper)((0,M.H)((0,l.D2)(e=>(0,l.kc)({rubricEvaluationPanel:{"&::before":{content:'""',display:"block",position:"absolute",height:"5px",left:"-1px",right:"-1px",top:"-1px"},...f(e).styles},header:{},body:{}}),{name:"RubricEvaluationPanel"})(eR)));class eN extends i.Component{constructor(e){super(e),this.updateRubric=e=>{let{contextData:t}=this.state,{onRubricUpdate:n}=this.props;if(e.criterionFeedbackWasUpdated&&"criteria"in e){this.updateRubricWithFeedback(e);return}this.setState({contextData:{...t,...(0,S.Be)(e)}}),null==n||n(e)},this.removeFeedbackOnCriterion=e=>{let{contextData:t}=this.state;this.setState({contextData:{...t,...(0,S.Bu)(e,t)}},()=>{this.updateRubricDataInUltra(!0)})};let{getGradingPillColor:t,showConfirmationModal:n}=e;this.state={contextData:{showConfirmationModal:n,...(0,S.Nd)(e),updateRubric:this.updateRubric,removeFeedbackOnCriterion:this.removeFeedbackOnCriterion,gradingPillColor:t}}}componentDidUpdate(e){let{contextData:t}=this.state,{shouldUndoOverride:n,grade:i,maxScore:r,shouldEmptyRubric:s,shouldPerformOverride:o,okConfirmationClicked:a,confirmationHandledForCriterionId:l,shouldUpdateCriterionFeedback:c,criteria:d,isSavingRubric:u,isGroupGradeMultiple:p,isGradeOverridden:m}=this.props;if(u!==e.isSavingRubric){this.setState({contextData:{...t,isSavingRubric:u}});return}if(t.okConfirmationClicked!==a){this.setState({contextData:{...t,okConfirmationClicked:a,confirmationHandledForCriterionId:l}});return}if(n&&!o&&t.gradeIsOverridden){let e=(0,S.k0)(t.rubricCriteria);this.setState({contextData:{...(0,S.ZD)(t,e,r),gradeIsOverridden:!1,isGroupGradeMultiple:p}},()=>{this.updateRubricDataInUltra()});return}if(o&&!n&&!t.gradeIsOverridden){this.setState({contextData:{...(0,S.ZD)(t,i,r),gradeIsOverridden:!0}},()=>{this.updateRubricDataInUltra()});return}if(s&&null!=t.studentGrade&&""!==t.studentGrade){this.setState({contextData:(0,S.nI)(t)},()=>{this.updateRubricDataInUltra()});return}if(t.gradeIsOverridden&&o&&i&&t.studentGrade!==i){this.setState({contextData:{...(0,S.ZD)(t,i,r),isGroupGradeMultiple:p}},()=>{this.updateRubricDataInUltra()});return}m!==e.isGradeOverridden&&this.setState({contextData:{...t,gradeIsOverridden:m}}),c&&!e.shouldUpdateCriterionFeedback&&this.setState({contextData:{...(0,S.Ae)(d,t),currentlySavingFeedback:!1}},()=>{this.updateRubricDataInUltra()})}updateRubricWithFeedback(e){var t;let{contextData:n}=this.state,{onRubricUpdate:i}=this.props;if((0,S.wg)()){let t=(0,S.T1)(e,!0);this.setState({contextData:{...n,...(0,S.Be)(t)}});return}let r=(0,S.T1)(e,!1),s=(0,S.KD)(r);if(0===(null!==(t=s.criteria)&&void 0!==t?t:[]).length){this.setState({contextData:{...n,...(0,S.Be)(r)}});return}this.setState({contextData:{...n,...(0,S.Be)(r),currentlySavingFeedback:!0}}),null==i||i(s)}updateRubricDataInUltra(e){let{contextData:t}=this.state,{onRubricPostUpdate:n}=this.props,i=(0,S.Cl)(t);null==n||n(i,{isUpdatingFeedback:e})}render(){let{contextData:e}=this.state,{analyticsId:t,criteria:n,shouldRenderRubricEvaluation:r,contentIconName:s,maxScore:o,isExternalSubmission:a,decimalsLength:l,rubricType:c,classes:d,onGradeInputUpdate:u}=this.props,p=`${t}.rubrics.components.rubricInline`;return i.createElement(i.Fragment,null,r&&i.createElement("div",{className:d.rubricEvaluationInline},i.createElement(S.bC.Provider,{value:{...e}},i.createElement(eD,{analyticsId:p,contentIconName:s,isExternalSubmission:a,onGradeInputUpdate:u}),i.createElement(ev,{analyticsId:p}))),!r&&n&&i.createElement(i.Fragment,null,i.createElement(N,{contentIconName:s,maxScore:o}),i.createElement(D,{analyticsId:p,criteria:n,decimalsLength:l,maxScore:o,rubricType:c})))}}let e$=(0,l.D2)(()=>(0,H.createStyles)({rubricEvaluationInline:{}}),{name:"rubricEvaluationInline"})(eN);var eO=n(664626);let eG=()=>{let e=(0,$.q)();return r().createElement(eO.m,{severity:"error",icon:r().createElement(U.Attention,null)},e("rubrics.generate.error"))},e_=()=>{let e=(0,$.q)();return r().createElement(eO.m,{severity:"info",icon:r().createElement(U.Information,null)},e("rubrics.generate.warning"))};var eM=n(465139);let eB=({isGenerating:e,onGenerate:t})=>{let n=(0,J.pHO)(),s="rubric.generate.panel",{formatNumber:o,translate:l}=(0,a.h)(),[c,d]=(0,i.useState)(B.iDW.Percentage),[u,p]=(0,i.useState)(5),[m,h]=(0,i.useState)(4),[g,f]=(0,i.useState)(4),[b,v]=(0,i.useState)(),[y,S]=(0,i.useState)(),C=(0,i.useMemo)(()=>{let e=y&&{columns:y.columns,rows:y.rows,type:y.type,academicLevel:y.academicLevel,description:y.description};return(0,W.isEqual)(e,{columns:g,rows:m,type:c,academicLevel:u,description:b})},[y,m,g,c,u,b]),I=(0,i.useMemo)(()=>[{value:B.iDW.Percentage,label:l("rubrics.generate.rubricType.percentage")},{value:B.iDW.PercentageRange,label:l("rubrics.generate.rubricType.percentageRange")},{value:B.iDW.Points,label:l("rubrics.generate.rubricType.points")},{value:B.iDW.PointsRange,label:l("rubrics.generate.rubricType.pointsRange")}],[l]),w=(0,eM.zX)(()=>{let e={columns:g,rows:m,type:c,academicLevel:u,description:b,viewId:Math.random().toString()};S(e),t(e)});return(0,i.useEffect)(()=>{w()},[w]),r().createElement("section",{className:n.inputPanelRoot},r().createElement(V.AnalyticsTypography,{variant:"h2"},l("rubrics.generate.title")),r().createElement(V.AnalyticsTextField,{analyticsId:`${s}.description`,id:"rubric-generate-description",label:l("rubrics.generate.descriptionLabel"),placeholder:l("rubrics.generate.descriptionHelperText"),multiline:!0,onChange:e=>v(e.target.value),rows:6}),r().createElement(V.AnalyticsTextField,{select:!0,analyticsId:`${s}.rubricType`,id:"rubric-generate-type",label:l("rubrics.generate.rubricTypeLabel"),value:c,onChange:e=>d(e.target.value),className:n.generateInputRow},I.map(e=>r().createElement(V.AnalyticsMenuItem,{analyticsId:`${s}.rubricType.${e.value}`,button:!0,onChange:()=>d(e.value),key:e.value,value:e.value},e.label))),r().createElement(J.avz,{analyticsId:`${s}.complexity`,className:n.generateInputRow,label:l("rubrics.generate.complexity"),minLabel:l("rubrics.generate.complexityLow"),maxLabel:l("rubrics.generate.complexityHigh"),step:1,min:B.pKH,max:B.GN3,valueLabelDisplay:"off",value:u,onValueChange:e=>p(e)}),r().createElement(J.avz,{analyticsId:`${s}.columns`,className:n.generateInputRow,label:l("rubrics.generate.columnsLabel"),minLabel:o(2),maxLabel:o(5),step:1,min:2,max:5,valueLabelDisplay:"auto",value:g,onValueChange:e=>f(e)}),r().createElement(J.avz,{analyticsId:`${s}.rows`,className:n.generateInputRow,label:l("rubrics.generate.rowsLabel"),minLabel:o(2),maxLabel:o(7),step:1,min:2,max:7,valueLabelDisplay:"auto",value:m,onValueChange:e=>h(e)}),r().createElement(V.AnalyticsPrimaryButton,{analyticsId:`${s}.generate`,disabled:e&&C,className:(0,E.Z)(n.submitGenerate,n.generateInputRow),startIcon:r().createElement(U.AutoGenerate,null),onClick:()=>w()},l("rubrics.generate.generate")))};var eF=n(35302),eU=n(563060),eV=n(259197),eH=n(592493);let eq=({courseId:e,contentId:t,options:n,onLoading:s,onGeneratedSuccess:o,onGeneratedError:a,onContinue:l})=>{let c=(0,$.q)(),d=(0,eH.tx)(),{generateRubric:u}=function(e){let t=(0,eH.jp)(e);return(0,i.useMemo)(()=>{if(!(null==t?void 0:t.id))return{generateRubric:eV.WFQ};let e=null==t?void 0:t.assessmentId,n=eV.AaE.getContentHandler(t);return eV.GQk.TestLink.isEqualTo(n)&&e?{generateRubric:async(t,n,i)=>await (0,eV.EPI)(t,e,n,i)}:{generateRubric:eV.WFQ}},[t])}(t),p=null!=n?n:{},{status:m,fetchStatus:h,data:g,error:f}=(0,eF.y5)({keepPreviousData:!1,queryKey:[e,{...p,contentId:t}],queryFn:({signal:n})=>u(e,{columns:p.columns,rows:p.rows,type:p.type,academicLevel:p.academicLevel,description:p.description,contentId:t},n),enabled:!!n}),{isCloseInterrupted:b,cancelClose:v,doClose:y}=(0,eU.YK)("success"===m);(0,i.useEffect)(()=>{"loading"===m||"fetching"===h?s():"success"===m?o(g):"error"===m&&a(f)},[m,h,g,f,s,o,a]);let S="rubric.generate.footer";return r().createElement(r().Fragment,null,r().createElement(J.jHD,null,r().createElement(V.AnalyticsDefaultButton,{analyticsId:`${S}.cancel.button`,onClick:async()=>{await eU.Nd.leavePeekState()}},c("global.cancel")),r().createElement(V.AnalyticsPrimaryButton,{analyticsId:`${S}.save.button`,disabled:!g,onClick:()=>{g&&l({...g,title:c("rubrics.generate.generatedTitle",{date:new Date})})}},c("global.continue"))),r().createElement(J.U6L,{analyticsId:`${S}.discard-dialog`,open:b,titleText:c("rubrics.generate.discardModal.title"),contentText:d("rubrics.generate.discardModal.description"),rootId:"rubrics-generate-discard-modal",cancelButtonText:c("rubrics.generate.discardModal.cancel"),confirmationButtonText:c("rubrics.generate.discardModal.confirm"),exitCallback:e=>{e?y():v()}}))}},217347:function(e,t,n){"use strict";n.d(t,{I:function(){return I}});var i=n(202784),r=n.n(i),s=n(410628),o=n(423704),a=n(958299),l=n(137444),c=n(188505),d=n(327355);let u=(0,d.makeStyles)(e=>(0,d.createStyles)({sessionDebugButton:{width:"100%","& input":{borderWidth:"0px",marginBottom:"0px"},"& .copyButton":{minWidth:"0px",paddingLeft:"10px"}},errorText:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,textAlign:"left"}}));var p=n(259197),m=n(592493);let h=()=>{let e=(0,m.Lx)();(0,i.useEffect)(()=>{e(p.Nwg.sessionDebug.resetSessionDebugState())},[e]);let t=(0,m.pJ)(p.Ys.sessionDebug.isUpdating),n=(0,m.pJ)(p.Ys.sessionDebug.getLogCode),r=(0,m.pJ)(p.Ys.sessionDebug.getSubmissionErrorCode);return{submitSessionDebug:(0,i.useCallback)(t=>{e(p.Nwg.sessionDebug.submitSessionDebug(t))},[e]),isUpdating:t,logCode:n,submissionErrorCode:r}};var g=n(47230);let f=()=>{let[e,t]=(0,i.useState)(!1);return[e,(0,i.useCallback)(e=>{(0,g.nx)(e),t(!0)},[]),(0,i.useCallback)(()=>{t(!1)},[])]};var b=n(327688),v=n(457706);let y=(0,d.makeStyles)(e=>(0,d.createStyles)({checkmark:{color:e.palette.success.main}})),S=e=>{let{isTextCopied:t}=e,n=y().checkmark;return t?i.createElement(b.Check,{className:n}):i.createElement(v.F,null)};var C=n(906277),E=n(986709);let I=e=>{let{ariaDescribedby:t,sessionDebug:n}=e,i=(0,s.q)(),{sessionDebugButton:d,errorText:p}=u(),{submitSessionDebug:m,isUpdating:g,logCode:b,submissionErrorCode:v}=h(),[y,I]=f(),w=r().createElement(c.AnalyticsTooltip,{analyticsId:"supportPanel.sessionDebug.codeCopied.tooltip",title:i("supportPanel.sessionDebug.codeCopiedTooltipText"),placement:"top-end",PopperProps:{style:{zIndex:1000100},open:y}},r().createElement(a.AnalyticsIconButton,{className:"copyButton",analyticsId:"supportPanel.sessionDebug.copyLogCode.button",onClick:()=>I(b),"aria-label":i(y?"supportPanel.sessionDebug.codeCopiedButtonAriaLabel":"supportPanel.sessionDebug.copyCodeButtonAriaLabel",{logCode:b})},r().createElement(S,{isTextCopied:y})));return b?r().createElement(l.L,{className:d,analyticsId:"supportPanel.sessionDebug.logCode.textDisplay",disabled:!0,InputProps:{endAdornment:w},value:b}):r().createElement(r().Fragment,null,r().createElement(o.x,{"aria-describedby":t,className:d,analyticsId:"supportPanel.sessionDebug.submit.button",onClick:()=>m(n),disabled:g||v>0},i("supportPanel.sessionDebug.submissionButtonText")),v>0&&r().createElement("p",{className:(0,C.Z)(p,"js-error-text")},i(v===E.oji.TooManyRequests?"supportPanel.sessionDebug.submissionQuotaText":"supportPanel.sessionDebug.submissionErrorText")))}},99035:function(e,t,n){"use strict";n.d(t,{in:function(){return r},gQ:function(){return d.g},HE:function(){return a},xj:function(){return c},WS:function(){return d.W}}),(i=r||(r={})).Error="Error",i.Warning="Warning",i.Information="Information",i.Debug="Debug";var i,r,s=n(722012);class o extends s.z{error(e,t,n){this.notifySink({ts:Date.now(),level:r.Error,topic:e,context:n,..."string"==typeof t?{message:t}:{exception:t}})}warn(e,t,n){this.notifySink({ts:Date.now(),level:r.Warning,topic:e,context:n,message:t})}info(e,t,n){this.notifySink({ts:Date.now(),level:r.Information,topic:e,context:n,message:t})}debug(e,t,n){this.notifySink({ts:Date.now(),level:r.Debug,topic:e,context:n,message:t})}}let a=new o,l=e=>[`[${e.topic}] ${e.message}`,e.exception,e.context].filter(e=>void 0!==e),c=e=>{switch(e.level){case r.Debug:return console.debug(...l(e));case r.Error:return console.error(...l(e));case r.Warning:return console.warn(...l(e));case r.Information:default:return console.log(...l(e))}};var d=n(262678)},825986:function(e,t,n){"use strict";n.d(t,{Z:function(){return m.Z},i7:function(){return r},ir:function(){return s.i},fz:function(){return m.f},ko:function(){return f},gM:function(){return g},cm:function(){return o.c},dn:function(){return c},wI:function(){return u},JE:function(){return p}}),(i=r||(r={})).ContentUpdate="content-update",i.CloseFolderById="close-folder-immediately-by-id",i.UpdateReviewState="update-state",i.RouterStateChangeStart="$stateChangeStart";var i,r,s=n(260435),o=n(612979),a=n(202784),l=n(917590);function c(e,t=[]){let n=(0,l.L)(),[{watchedValue:i},r]=(0,a.useState)(()=>({watchedValue:e(n)}));return(0,a.useEffect)(()=>n.$watchCollection(e,e=>{r({watchedValue:e})}),t),i}var d=n(465139);function u(e,t){let n=(0,l.L)(),i=(0,d.zX)(t);(0,a.useEffect)(()=>n.$on(e,(e,...t)=>{i(e,...t)}),[e,n,i])}function p(e,t=[]){let n=(0,l.L)(),[{watchedValue:i},r]=(0,a.useState)(()=>({watchedValue:e(n)}));return(0,a.useEffect)(()=>n.$watch(e,e=>{r({watchedValue:e})},!0),t),i}var m=n(998217);let h=new Map,g=e=>{h.set(e.key,e)};function f(e){let t=h.get(e);if(!t)throw Error(`No service found with key: ${e}
Did you forget to register a service with that key?`);return t}},260435:function(e,t,n){"use strict";n.d(t,{i:function(){return r},m:function(){return i}});let i=(0,n(202784).createContext)(void 0),r=i.Provider},396277:function(e,t,n){"use strict";n.d(t,{Mg:function(){return E},xP:function(){return y},TZ:function(){return S}});var i=n(202784),r=n.n(i),s=n(592493),o=n(847969),a=n(410628),l=n(88818),c=n(327355);let d=(0,c.makeStyles)(e=>(0,c.createStyles)({container:{"& > div":{width:"100%"}},comboboxWidth:{width:"100%"},comboboxReset:{"& input":{border:0,margin:"0px",minHeight:"auto",height:"auto"},"& input:focus":{boxShadow:"none"}},description:{color:e.palette.text.hint,marginTop:"10px"}}));var u=n(72779),p=n.n(u);let m="user-profile-pronouns-description",h=({analyticsId:e,selectedPronouns:t,approvedPronouns:n,onPronounsChanged:s})=>{var c,u;let h=(0,a.q)(),g=d(),f=(0,i.useCallback)(e=>{s(e)},[s]);return r().createElement("div",{className:g.container},r().createElement(o.AnalyticsCombobox,{strings:(0,l.Jvq)({announceSearchResults:(e,t)=>h("userProfile.pronouns.combobox.comboboxSuggestion.pronounsAvailableAlertText",{count:e,searchString:t}),noResults:e=>h("userProfile.pronouns.combobox.comboboxSuggestion.noPronounsFound",{searchString:e})}),classes:{root:p()(g.comboboxReset,g.comboboxWidth)},isMulti:!0,analyticsId:e,isClearable:!0,id:"user-profile-pronouns-control",label:h("userProfile.pronouns.combobox.label"),placeholder:h("userProfile.pronouns.combobox.placeholder"),value:null!==(c=null==t?void 0:t.map(e=>({value:e,label:e})))&&void 0!==c?c:[],options:null!==(u=null==n?void 0:n.map(e=>({value:e.name,label:e.name})))&&void 0!==u?u:[],onChange:f,"aria-describedby":m}),r().createElement(o.AnalyticsTypography,{id:m,className:g.description,component:"p"},h("userProfile.pronouns.description")))};var g=n(259197),f=n(986709);let b=(0,c.makeStyles)(e=>(0,c.createStyles)({requestPronounDescriptionRoot:{marginTop:"10px"},requestPronounFormRoot:{width:"100%",marginTop:"15px"},requestPronounsFormInputRoot:{"&$requestPronounsFormInputRoot":{paddingRight:0}},requestPronounsFormInputLabel:{fontWeight:e.typography.fontWeightBold},requestPronounsFormInputSendButton:{borderRadius:0}})),v=({analyticsId:e,approvedPronouns:t})=>{let n=(0,a.q)(),r=b(),[l,c]=i.useState(""),[d,u]=i.useState(""),[p,m]=i.useState(!1),[h,v]=i.useState(!1),y=(0,s.Lx)(),S=i.useCallback(e=>{let i=e.target.value;if(c(i),null==t?void 0:t.find(e=>{var t;return(null===(t=null==e?void 0:e.name)||void 0===t?void 0:t.localeCompare(i))===0})){u(n("userProfile.pronouns.request.pronounExists"));return}""!==d&&u("")},[t,d,n]),C=i.useCallback(()=>{y(g.Nwg.userPronouns.addSystemPronoun({name:l,status:f.xN_.Pending})).then(()=>{u(""),v(!0)}).catch(e=>{e instanceof g.IK&&u(n("admin-pages.approved-pronouns.list.add-option-xss-violation"))})},[l,y,n]),E=p&&h,I=p&&!h,w=!p,A={};return""!==d&&(A.error=!0,A.helperText=d),i.createElement(i.Fragment,null,E&&i.createElement(o.AnalyticsTypography,{className:r.requestPronounDescriptionRoot,"aria-live":"polite",role:"status"},n("userProfile.pronouns.request.sent")),I&&i.createElement(o.AnalyticsTextField,{classes:{root:r.requestPronounFormRoot},analyticsId:`${e}.request.inputField`,id:"request-new-pronouns",label:n("userProfile.pronouns.request.label"),placeholder:n("userProfile.pronouns.request.placeholder"),value:l,onChange:S,...A,InputLabelProps:{classes:{root:r.requestPronounsFormInputLabel}},InputProps:{endAdornment:i.createElement(o.AnalyticsInputAdornment,{analyticsId:`${e}.input.adornment`,id:"send-pronoun-request",position:"end",disableTypography:!0},i.createElement(o.AnalyticsPrimaryButton,{classes:{root:r.requestPronounsFormInputSendButton},onClick:C,analyticsId:`${e}.request.send`,disabled:""!==d||""===l},n("userProfile.pronouns.request.sendLabel"))),classes:{root:r.requestPronounsFormInputRoot}}}),w&&i.createElement(o.AnalyticsTypography,{className:r.requestPronounDescriptionRoot},n("userProfile.pronouns.request.description")+" ",i.createElement(o.AnalyticsLink,{analyticsId:`${e}.pronouns.request.show.inputField`,"aria-label":n("userProfile.pronouns.request.makeRequestAriaLabel"),component:"button",onClick:()=>m(!0)},n("userProfile.pronouns.request.makeRequest"))))},y=e=>{let t=(0,a.q)(),n=(0,s.c_)(),r=(0,s.YO)(),l=n.loading||r.loading;return i.createElement("div",null,l&&i.createElement(o.AnalyticsCircularProgress,{ariaLabel:t("userProfile.pronouns.loadingAriaLabel"),size:"small"}),!l&&i.createElement(i.Fragment,null,i.createElement(h,{...e,analyticsId:"userProfile.pronouns.TagPicker",approvedPronouns:r.list}),n.enabled&&i.createElement(v,{approvedPronouns:r.list,analyticsId:"userProfile.pronouns"})))};function S(e){return(e.pronouns||"").split(",").map(e=>e.trim()).join(", ")}var C=n(553493);let E=e=>{let{onAudioRecorded:t,onAudioDeleted:n,src:r}=e,s=(0,a.q)(),o=new C.or(e=>t(e));return i.createElement(l.G0o,{recordLabel:s("userProfile.pronunciation.recordButtonLabel"),playLabel:s("userProfile.pronunciation.playButtonLabel"),onAudioDeleted:n,analyticsId:"userProfile.pronunciation",recordingSession:o,src:r})}},520675:function(e,t,n){"use strict";function i(e,t){return(null!=t?t:[{tag:"table",replacementText:""},{tag:"math",replacementText:"",replacementTextPlural:""}]).forEach(t=>{if(t.replacementTextPlural&&e.body.querySelectorAll(`body > p > ${t.tag}`).forEach(e=>{var t;if((null===(t=e.parentElement)||void 0===t?void 0:t.nodeName)==="P"){let t=[];e.parentElement.childNodes.forEach(e=>{t.push(e)}),e.parentElement.replaceWith(...t)}}),t.tagQuery&&t.replacementAttribute){let n=t.replacementAttribute;e.body.querySelectorAll(t.tagQuery).forEach(e=>{e.hasAttribute(n)&&e.replaceWith(e.getAttribute(n))})}let n=!1;(t.tag?Array.from(e.body.querySelectorAll(t.tag)):[]).forEach(i=>{var r,s,o,a,l;let c=i.previousSibling,d=function(e){var t,n,i;let r=!0,s=!0,o=e;for(;r&&s;)r=(null==(o=null!==(t=null==o?void 0:o.nextSibling)&&void 0!==t?t:null)?void 0:o.nodeName)==="SPAN"||(null==o?void 0:o.nodeName)==="#text",s=(null===(n=null==o?void 0:o.textContent)||void 0===n?void 0:n.trim())===""||(null===(i=null==o?void 0:o.textContent)||void 0===i?void 0:i.trim())==="\n";return o}(i);if((null==c?void 0:c.nodeName)==="BR"&&(null===(r=i.parentElement)||void 0===r||r.removeChild(c)),(null==d?void 0:d.nodeName)==="BR"&&(null===(s=i.parentElement)||void 0===s||s.removeChild(d)),i.nodeName===(null==d?void 0:d.nodeName)&&t.replacementTextPlural)n=!0,i.remove();else{let r=e.createElement("p");r.innerHTML=n?null!==(o=t.replacementTextPlural)&&void 0!==o?o:"":null!==(a=t.replacementText)&&void 0!==a?a:"",null===(l=i.parentElement)||void 0===l||l.replaceChild(r,i),n=!1}})}),e}function r(e){return new DOMParser().parseFromString(e,"text/html")}n.d(t,{BD:function(){return o},KJ:function(){return i},fY:function(){return r},tW:function(){return s}});let s=(e,t)=>{var n;3===e.nodeType&&(null===(n=e.textContent)||void 0===n?void 0:n.trim())?t.push(e.textContent.trim()):e.firstChild&&!e.hasAttribute("data-bbtype")&&s(e.firstChild,t),e.nextSibling&&s(e.nextSibling,t)};function o(e,t){return function(e,t){let n=i(e,t),r=[];return s(n.body,r),r.join(" ")}(r(e),t)}},610466:function(e,t,n){"use strict";function i(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){let t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw Error('Cannot convert "'+e+'" to boolean')}n.d(t,{F:function(){return i}})},393257:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var i=n(882236),r=n(332772),s=n(108722),o=n(136722);function a(e,t){let n=new Date;if(n>e)return"";if((0,i.Z)(e))return t("global.timeSpan.today");if((0,r.Z)(e))return t("global.timeSpan.tomorrow");let a=(0,s.Z)(e,n);if(a<7)return t("global.timeSpan.day.plural",{days:a});if(a>7&&a<14)return t("global.timeSpan.weekDays.plural",{days:a-7});let l=(0,o.Z)(e,n);return l>0?t("global.timeSpan.month.plural",{months:l}):t("global.timeSpan.week.plural",{weeks:Math.floor(a/7)})}},739295:function(e,t,n){"use strict";n.d(t,{m:function(){return r},t:function(){return i}});let i=e=>2>Math.abs(e.scrollHeight-e.clientHeight-e.scrollTop),r=e=>{let t=document.createElement("textarea");return t.innerHTML=e,t.value}},678943:function(e,t,n){"use strict";n.d(t,{Gg:function(){return p},yZ:function(){return function e(t){return t.reduce((t,n)=>"directory"===n.type?t+e(n.children):t+1,0)}},fQ:function(){return function e(t){let n=[];return t.forEach(t=>{"file"===t.type?i.includes(t.file.name.toLowerCase())||n.push(t):"directory"===t.type&&n.push({...t,children:e(t.children)})}),n}},L2:function(){return u}});let i=[".ds_store","thumbs.db","desktop.ini"];function r(e){return!!e&&"file"in e}function s(e){return!!e&&"createReader"in e}function o(e){return new Promise((t,n)=>{e.readEntries(t,n)})}async function*a(e){let t=e.createReader(),n=await o(t);for(;n.length>0;)yield*n.values(),n=await o(t)}async function l(e,t){let n=null;if((null==t?void 0:t.getAsFile)?n=null==t?void 0:t.getAsFile():r(e)&&(n=await new Promise((t,n)=>{e.file(t,n)})),n&&!(null==e?void 0:e.isDirectory))return{type:"file",name:n.name,file:n}}async function c(e){return{type:"directory",name:e.name,children:await d(e)}}async function d(e){if(!s(e))return[];let t=[];for await(let n of a(e))r(n)?t.push(l(n)):s(n)&&t.push(c(n));return Promise.all(t)}async function u(e){var t;if(!(null===(t=e.dataTransfer)||void 0===t?void 0:t.items))return[];let n=e.dataTransfer.items,i=[];for(let e=0;e<n.length;e++)n[e]&&i.push(n[e]);return(await Promise.all(i.map(e=>{let t=e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry();return t?t.isDirectory?c(t):l(t,e):void 0}))).filter(e=>!!e)}let p=25},359655:function(e,t,n){"use strict";n.d(t,{o:function(){return s},s:function(){return r}});let i=null,r=(e,t)=>(null!==i&&(i.remove(),i=null),new Promise((n,r)=>{(i=document.createElement("input")).setAttribute("id","id_file_upload"),i.setAttribute("type","file"),i.setAttribute("accept",e),i.setAttribute("multiple",`${t}`),i.style.display="none",document.body.appendChild(i),i.addEventListener("change",()=>{i&&null!==i.files?n(i.files):r(Error("File selection failed")),null==i||i.remove(),i=null}),i.click()})),s=(e,t)=>{let n=t.map(e=>e.toLowerCase());return Array.from(e).map(e=>`.${e.name.toLowerCase().split(".").pop()}`).every(e=>n.includes(e))}},817426:function(e,t,n){"use strict";n.d(t,{r9:function(){return S.r},Gg:function(){return E.Gg},xx:function(){return A.xx},cY:function(){return C.c},Ou:function(){return c.Ou},HD:function(){return g},hi:function(){return c.hi},QG:function(){return T},oG:function(){return R.o},j:function(){return R.j},uI:function(){return c.uI},F8:function(){return k.F},wZ:function(){return P},yZ:function(){return E.yZ},Bi:function(){return A.Bi},m9:function(){return s.m},vZ:function(){return o.v},Sv:function(){return D.S},qR:function(){return l.q},tW:function(){return v.tW},_Y:function(){return c._Y},fQ:function(){return E.fQ},Bb:function(){return y.B},_G:function(){return c.xx},SV:function(){return c.SV},Df:function(){return S.D},mg:function(){return c.mg},L2:function(){return E.L2},AH:function(){return c.AH},BD:function(){return v.BD},dT:function(){return u},gj:function(){return c.gj},Rx:function(){return A.Rx},Rh:function(){return A.Rh},re:function(){return c.re},t0:function(){return s.t},_m:function(){return A._m},eY:function(){return c.eY},s6:function(){return a.s},Yo:function(){return c.Yo},fY:function(){return v.fY},ul:function(){return b},hm:function(){return f},fL:function(){return c.fL},KJ:function(){return v.KJ},rB:function(){return h},G1:function(){return c.G1},ih:function(){return c.ih},zs:function(){return x.z},RR:function(){return c.RR},U0:function(){return w},ox:function(){return a.o}});var i,r,s=n(739295),o=n(73245),a=n(359655),l=n(144942),c=n(747182),d=n(579633);function u(e,t){var n;return"Y"===t&&null!==(n=e.preferredDisplayName)&&void 0!==n?n:d.PreferredDisplayName.Given}var p=n(399882);function m(e,t){let n=setTimeout(t,36e5);return e=>{clearTimeout(n),e&&e()}}function h(e){let t={...e,legacySetup:m};return(0,p.I$)(t)}let g=new class{constructor(){this.readPolite=()=>{},this.readAssertive=()=>{}}},f=e=>{g.readPolite(e)},b=e=>{g.readAssertive(e)};var v=n(520675),y=n(393257),S=n(500231),C=n(74270),E=n(678943),I=n(202784);let w=(e,t,n)=>{(0,I.useDebugValue)(`Interval: ${t}ms, ${n?"enabled":"disabled"}`);let i=(0,I.useRef)(e);i.current=e,(0,I.useEffect)(()=>{if(!n)return;let e=setInterval(()=>i.current(),t);return()=>clearInterval(e)},[t,n])};var A=n(820251),k=n(610466);(i=r||(r={})).bytes="bytes",i.GB="GB",i.KB="KB",i.MB="MB";let T=e=>{let t=r.bytes;return e>1e3&&(e/=1e3,t=r.KB,e>1e3&&(e/=1e3,t=r.MB,e>1e3&&(e/=1e3,t=r.GB))),{size:e,sizeMetric:t}},P=e=>e/1048576;var D=n(199824),x=n(473554),R=n(316329)},180399:function(e,t,n){"use strict";n.d(t,{fi:function(){return r.fi},PH:function(){return i.P},y1:function(){return l},zX:function(){return c.z},Me:function(){return d.M},EP:function(){return u},f0:function(){return c.f},eX:function(){return p},lY:function(){return m},Il:function(){return h}});var i=n(672948),r=n(913866),s=n(202784),o=n(276635),a=n.n(o);let l=(e,t)=>{let n=(0,s.useRef)(e);n.current=e;let i=(0,s.useRef)((0,o.debounce)((...e)=>{var t;return null===(t=n.current)||void 0===t?void 0:t.call(n,...e)},t)).current;return(0,s.useEffect)(()=>()=>{i.cancel()},[i]),i};var c=n(582288),d=n(15155);function u(e,t,n){let i=(0,s.useRef)(n);return(0,s.useMemo)(()=>i.current=e(i.current),t)}function p(e,t){return u(n=>t(e,n)?n:e,[e,t],e)}function m(e){return p(e,a().isEqual)}function h(e,t=a().isEqual){return u(n=>{if(!n||!e)return e;let i=[],r=e.length!==n.length;for(let s=0;s<n.length&&!(s>=e.length);s++)t(e[s],n[s])?i.push(n[s]):(r=!0,i.push(e[s]));return r?(i.push(...e.slice(n.length)),i):n},[e,t],e)}},672948:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});let i=(e,t,n,i,r)=>{let s=`calc(${n} / 2)`,o=`calc(2 * (${n} + ${r}) / 1.4142)`,a=[e,`${t} ${s}`,`${i} 0`,`${i} calc(50% - ${s})`,`${t} 0`,`${t} calc(50% + ${s})`,`${i} 0`,`${i} calc(100% - ${s})`,`${t} 0`];return{background:`linear-gradient(${a.join()})`,backgroundSize:`${o} ${o}`}}},74270:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});class i{static reset(){this.maxCourseFolderDepth=void 0,this.concurrentSessionLimit=void 0}static getMaxCourseFolderDepth(){var e,t;return this.maxCourseFolderDepth||(this.maxCourseFolderDepth=null!==(t=null===(e=window.__initialContext)||void 0===e?void 0:e.maxCourseFolderDepth)&&void 0!==t?t:2),this.maxCourseFolderDepth}static concurrentSessionLimitForAlert(){var e;return(null===(e=window.__initialContext)||void 0===e?void 0:e.concurrentSessionLimit)?window.__initialContext.concurrentSessionLimit:0}}},747182:function(e,t,n){"use strict";let i;n.d(t,{AH:function(){return E},G1:function(){return b},Ou:function(){return S},RR:function(){return c},SV:function(){return s},Yo:function(){return m},_Y:function(){return v},eY:function(){return a},fL:function(){return h},gj:function(){return f},hi:function(){return y},ih:function(){return p},mg:function(){return o},re:function(){return k},uI:function(){return d},xx:function(){return C}});let r=/^[^\/]*\/\/[^\/]+/;function s(e){var t;let n=r.exec(e);return null!==(t=null==n?void 0:n[0])&&void 0!==t?t:e}function o(){return i||void 0===window.location||(i=s(window.location.href)),i}function a(e){return 0===e.indexOf("https://")}let l=/^[a-zA-Z]*:?\/\//;function c(e){return l.test(e)}function d(e,t){return e&&0>e.indexOf("://")&&0!==e.indexOf("//")&&("/"!==e[0]&&(e="/"+e),e=t?t+e:o()+e),e}let u=/[^\?#]*/;function p(e){var t,n;return e&&null!==(n=null===(t=u.exec(e))||void 0===t?void 0:t[0])&&void 0!==n?n:e}function m(e){c(e)||(e="http://"+e);let t=window.open(e,"_blank");return t&&(t.opener=null),t}function h(e){window.location.replace(e)}let g=/^https?:/;function f(e){return e?e.replace(g,""):""}function b(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function v(e){return(0,(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split("?")[0]).split(":")[0]}function y(e){let t=e.indexOf("?");if(t<0)return{};let n=e.substring(t+1).split("&"),i={};return n.forEach(e=>{let t=e.split("=");i[t[0]]=decodeURIComponent(t[1])}),i}function S(e,t,n){return 0>e.indexOf(t+"=")?e+(0>e.indexOf("?")?"?":"&")+t+"="+n:e}function C(e,t){let n=S(e,"isForcedDownload","true");return S(n,"downloadFileName",encodeURIComponent(t))}function E(e){let t=e.split("/");return t[t.length-1]}let I=/[\[]/,w=/[\]]/,A=/\+/g;function k(e,t){let n=RegExp("[\\?&]"+(e=e.replace(I,"\\[").replace(w,"\\]"))+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(A," "))}},465139:function(e,t,n){"use strict";n.d(t,{EP:function(){return i.EP},Il:function(){return i.Il},Me:function(){return i.Me},PH:function(){return i.PH},eX:function(){return i.eX},f0:function(){return i.f0},fi:function(){return i.fi},lY:function(){return i.lY},y1:function(){return i.y1},zX:function(){return i.zX}});var i=n(180399)},456133:function(e){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},418540:function(e){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},51179:function(e){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},706624:function(e){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    <!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'-->\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},5865:function(e){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          <!-- TODO: will update the above must-show-delete-confirmation after PR #818 (update confirmation needed) is merged -->\n    </bb-save-buttons>\n</ng-form>\n'},412971:function(e){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="[avatarsClasses, {\'alert-outline\': isWarningRender}]"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      <!-- If no user is set -->\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If first user is set and has avatar image -->\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      <!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default-->\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      <!-- If first user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-users></bb-ui-icon-large-users>\n      </div>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If second user is set and has avatar image -->\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      <!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default -->\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      <!-- If second user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      <!-- If more than 2 participants involved, show `+3` type of avatar for right side -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      <!-- If no user is set -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <!-- If first user is set and has avatar image -->\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      <!-- If first user is set, but does not have avatar image, but has non-CJK name -->\n      <!-- Show default image -->\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      <!-- If first user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!first.isMultiUser)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.firstAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(first.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <!-- If second user is set and has avatar image -->\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      <!-- If second user is set, but does not have avatar image, but has non-CJK name -->\n      <!-- Show default image -->\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      <!-- If second user is set, but does not have avatar image and name contains CJK characters -->\n      <!-- Show default avatar image -->\n      <img ng-if="::(!second.isMultiUser)" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.secondAvatarImg : null">\n      <div class="multi-user-id" ng-if="::(second.isMultiUser)">\n        <bb-ui-icon-large-avatar-multiple></bb-ui-icon-large-avatar-multiple>\n      </div>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      <!-- If more than 2 participants involved, show `+3` type of avatar for right side -->\n      <!-- htmlhint:analytics-id:disable -->\n      <div class="initials" analytics-id="analyticsIdTagPrefix ? {{::analyticsIdTagPrefix}}.twoPlusAvatar : null">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n      <!-- htmlhint:analytics-id:enable -->\n    </div>\n  </div>\n</div>\n'},641343:function(e){e.exports='<div ng-switch="$ctrl.icon">\n  <bb-ui-icon-large-assignments ng-switch-when="assignment" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-assignments>\n  <bb-ui-icon-large-attendance ng-switch-when="attendance" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-attendance>\n  <bb-ui-icon-large-blog ng-switch-when="blog" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-blog>\n  <bb-ui-icon-large-calculation ng-switch-when="calculation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-calculation>\n  <bb-ui-icon-large-discussion ng-switch-when="discussion" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-discussion>\n  <bb-ui-icon-large-document-blank ng-switch-when="document-blank" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-blank>\n  <bb-ui-icon-large-document-cloud ng-switch-when="document-cloud" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-cloud>\n  <bb-ui-icon-large-document-text ng-switch-when="document-text" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-text>\n  <bb-ui-icon-large-folder ng-switch-when="folder|folder-open" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-folder>\n  <bb-ui-icon-large-homework ng-switch-when="homework" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-homework>\n  <bb-ui-icon-large-photo ng-switch-when="photo" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-photo>\n  <bb-ui-icon-large-journal ng-switch-when="journal" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-journal>\n  <bb-ui-icon-large-learning-module ng-switch-when="learning-module" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-learning-module>\n  <bb-ui-icon-large-link ng-switch-when="link" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-link>\n  <bb-ui-icon-large-lti ng-switch-when="lti" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-lti>\n  <bb-ui-icon-large-overall-grade ng-switch-when="overall-grade" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-overall-grade>\n  <bb-ui-icon-large-pdf ng-switch-when="pdf" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-pdf>\n  <bb-ui-icon-large-presentation ng-switch-when="presentation" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-presentation>\n  <bb-ui-icon-large-scormengine ng-switch-when="scormengine" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-scormengine>\n  <bb-ui-icon-large-spreadsheet ng-switch-when="spreadsheet" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-spreadsheet>\n  <bb-ui-icon-large-survey ng-switch-when="survey" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-survey>\n  <bb-ui-icon-large-test ng-switch-when="test|quiz|exam" ng-switch-when-separator="|" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-test>\n  <bb-ui-icon-large-textbook ng-switch-when="textbook" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-textbook>\n  <bb-ui-icon-large-video ng-switch-when="video" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-video>\n  <bb-ui-icon-large-audio ng-switch-when="audio" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-audio>\n  <bb-ui-icon-large-zip ng-switch-when="zip" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-zip>\n  <bb-ui-icon-large-collaborative-cloud ng-switch-when="collaborative-cloud" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-collaborative-cloud>\n  <bb-ui-icon-large-document-google ng-switch-when="document-google" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-google>\n  <bb-ui-icon-large-cloud-collaboration-google ng-switch-when="cloud-collaboration-google" color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-cloud-collaboration-google>\n  <bb-ui-icon-large-document-blank ng-switch-default color="{{$ctrl.color}}" title-access="{{$ctrl.titleAccess}}"></bb-ui-icon-large-document-blank>\n</div>\n'},486324:function(e){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon ng-if="$ctrl.runningSessionFlag" size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon ng-if="!$ctrl.runningSessionFlag" size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},554669:function(e){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},872653:function(e){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options" data-show-add-options ng-click="addContentButton.toggleMenu()"\n     ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n     aria-expanded="{{addContentButton.isMenuVisible}}" aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n     aria-label="{{addContentButton.addButtonAriaLabel}}"\n     ng-focus="addContentButton.showButton()" ng-blur="addContentButton.hideButton()"\n     analytics-id="components.directives.add-content-button.assignment.button">\n  </button>\n  <!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost -->\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        allow-multiple="true"\n        monitor-leave="true"\n        disable-drag="disableDrag && disableDrag()"\n        target-div="{{\'#\' + fileListViewId}}"\n        hide-transclude-during-upload="false"\n        is-third-party-upload="false"\n        disallow-folder-uploads="true"\n        skip-zip-file-check="true"\n        ignored-states="::ignoredStates()"\n        position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.fileUpload.link" >\n          <bb-svg-icon size="small" icon="upload"></bb-svg-icon><span bb-translate analytics-id="course.content.buildContentArea.addFiles">course.content.buildContentArea.addFiles</span>\n        </a>\n      </bb-file-upload>\n    </li>\n    <li ng-if="!addContentButton.isMobile">\n      <!-- Skip zip file check, assignment does not support unzip file(LRN-101238) -->\n      <bb-file-upload allow-multiple="true" monitor-leave="true" is-third-party-upload="true"  hide-transclude-during-upload="false" skip-zip-file-check="true"\n                      click-enabled="false" primary-key="fileListViewId" disable-drag="disableDrag && disableDrag()"\n                      third-party-download-handler="addContentButton.downloadFile" target-div="{{\'#\' + fileListViewId}}"\n                      position="positionBefore ? positionBefore() : positionAfter && positionAfter() + 1">\n        <a href="javascript:void(0);"\n           role="menuitem"\n           primary-key="fileListViewId"\n           is-flatten="false"\n           attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n           ignored-states="::ignoredStates()"\n           bb-translate-attrs="{\'aria-label\':\'components.directives.add-content-button.aria-label.content.oneDrive\'}"\n           ng-click="addContentButton.toggleMenu()"\n           analytics-id="components.directives.add-content-button.assignment.oneDrive.link">\n          <div>\n            <i class="icon-cloud"></i><span bb-translate>components.directives.add-content-button.oneDrive</span>\n          </div>\n        </a>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},784787:function(e){e.exports='<div class="discussion-assignment">\n  <button class="button-add-content js-show-add-options"\n          data-show-add-options ng-click="addContentButton.toggleMenu()"\n          ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n          aria-expanded="{{addContentButton.isMenuVisible}}"\n          aria-controls="{{::\'add-content-menu-\' + addMenuId}}"\n          aria-label="{{addContentButton.addButtonAriaLabel}}"\n          ng-focus="addContentButton.showButton()"\n          ng-blur="addContentButton.hideButton()"\n          analytics-id="components.directives.add-content-button.attempts.button">\n  </button>\n  <!-- use ng-show to keep the element when close add buttons, make sure the upload directive handlers will not be lost -->\n  <ul role="menu" class="element-list-add-menu outline-menu angular-animate"\n      aria-expanded="{{addContentButton.isMenuVisible}}"\n      ng-attr-id="{{::\'add-content-menu-\' + addMenuId}}"\n      ng-if="::addContentButton.isMenuVisible || undefined"\n      ng-show="addContentButton.isMenuVisible">\n    <li>\n      <bb-file-upload\n        url="/v1/files"\n        data="{}"\n        monitor-leave="true"\n        allow-multiple="true"\n        target-div="{{\'#\' + fileListViewId}}"\n        disable-drag="disableDrag && disableDrag()"\n        hide-transclude-during-upload="false"  is-third-party-upload="false"\n        third-party-download-handler="addContentButton.downloadFile"\n        skip-zip-file-check="true">\n        <div class="columns medium-12" ng-class="{\'medium-center\': attempt.isMobile}">\n          <a href="javascript:void(0);"\n             role="menuitem"\n             bb-translate-attrs="{\'aria-label\':\'course.content.buildContentArea.addFiles\'}"\n             ng-click="addContentButton.toggleMenu()"\n             analytics-id="components.directives.add-content-button.attempts.fileUpload.link">\n            <bb-svg-icon size="small" icon="upload"></bb-svg-icon>\n            <span bb-translate>course.content.fileUpload.addFiles</span>\n          </a>\n        </div>\n      </bb-file-upload>\n    </li>\n  </ul>\n</div>\n'},530026:function(e){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    class="button-add-content js-show-add-options"\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.editor.button">\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="::addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>\n<!--\n  The elements are kept around to trigger download actions.\n  The \'ng-hide\' class is added to prevent the buttons from interfering with AX (tab order, screen readers)\n-->\n<ul class="element-list-add-menu angular-animate ng-hide">\n  <li>\n    <button type="button"\n            class="js-add-text-block"\n            ng-click="addContentButton.addTextBlock()"\n            analytics-id="components.directives.add-content-button.editor.addText.button">\n      <div>\n        <i class="icon-doc-pencil-2"></i>\n        <span bb-translate>components.directives.add-content-button.addContent</span>\n      </div>\n    </button>\n  </li>\n  <li ng-if="addContentButton.canEditUnsafeHtml">\n    <button type="button"\n            ng-click="addContentButton.addHtmlBlock()"\n            analytics-id="components.directives.add-content-button.editor.addHtml.button">\n      <div>\n        <bb-svg-icon size="small" icon="code"></bb-svg-icon>\n        <span bb-translate>components.directives.add-content-button.addHtml</span>\n      </div>\n    </button>\n  </li>\n  <li>\n    <bb-file-upload\n      url="/v1/files"\n      data="{}"\n      monitor-leave="true"\n      allow-multiple="true"\n      hide-transclude-during-upload="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      click-enabled="true"\n      disable-drag="false"\n      class="js-file-upload"\n      web-location="{{webLocation}}"\n      file-location="{{fileLocation}}"\n      target-div="{{\'#\' + fileListViewId}}"\n      disallow-folder-uploads="true"\n      is-third-party-upload="false"\n      ignored-states="::ignoredStates()">\n        <button\n          type="button"\n          class="file-upload-button"\n          ng-click="addContentButton.assignPosition()"\n          aria-label="{{addContentButton.uploadAriaLabel}}"\n          analytics-id="components.directives.add-content-button.editor.fileUpload.button">\n          <div ng-if="!addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromComputer</span>\n          </div>\n          <div ng-if="addContentButton.isMobile">\n            <i class="icon-arrow-upload"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromDevice</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li ng-if="addContentButton.isCloudServiceAvailable">\n    <bb-file-upload\n      allow-multiple="false"\n      monitor-leave="true"\n      target-div="{{\'#\' + fileListViewId}}"\n      hide-transclude-during-upload="false"\n      click-enabled="false"\n      primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n      skip-zip-file-check="true"\n      disable-drag="true"\n      is-third-party-upload="true"\n      third-party-download-handler="addContentButton.downloadFile"\n      ignored-states="::ignoredStates()">\n      <button\n        type="button"\n        class="js-upload-from-cloud-storage-integration"\n        ng-click="addContentButton.assignPosition()"\n        bb-cloud-storage-integration\n        primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n        attach-handler="attachHandler || addContentButton.defaultAttachHandler"\n        web-location="{{webLocation}}"\n        file-location="{{fileLocation}}"\n        allow-multiple="false"\n        on-cancel-focus="!initialUpload ? addContentButton.focusAddButton : null"\n        analytics-id="components.directives.add-content-button.editor.uploadFromCloudStorage.button">\n          <div>\n            <i class="icon-cloud"></i>\n            <span bb-translate>components.directives.add-content-button.uploadFromCloudStorage</span>\n          </div>\n        </button>\n    </bb-file-upload>\n  </li>\n  <li>\n    <button type="button"\n            class="js-browse-content-collection-block"\n            ng-click="addContentButton.browseContentCollection()"\n            analytics-id="components.directives.add-content-collection-button.editor.addText.button">\n      <div>\n        <span bb-translate>course.contentCollection.browseContentCollection</span>\n      </div>\n    </button>\n  </li>\n</ul>\n'},371833:function(e){e.exports='<bb-svg-icon size="small" icon="add" class="js-add-plus add-circle-default"></bb-svg-icon>\n<bb-svg-icon size="small" icon="add" status="active" class="js-add-plus add-circle-active"></bb-svg-icon>'},968668:function(e){e.exports='<div ng-if="addContentButton.isCloudServiceAvailable">\n  <bb-file-upload\n    allow-multiple="true"\n    monitor-leave="true"\n    target-div="{{\'#\' + fileListViewId}}"\n    hide-transclude-during-upload="false"\n    click-enabled="false"\n    primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n    skip-zip-file-check="true"\n    disable-drag="true"\n    is-third-party-upload="true"\n    third-party-download-handler="addContentButton.downloadFile"\n    ignored-states="::ignoredStates()">\n    <button ng-click="addContentButton.assignPosition()"\n            class="doc-add-media clear ng-scope"\n            bb-cloud-storage-integration\n            primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId"\n            attach-handler="addContentButton.cloudUploadAttachHandler"\n            web-location="{{webLocation}}"\n            file-location="{{fileLocation}}"\n            allow-multiple="true"\n            on-files-selected="addContentButton.onFilesSelectedHandler"\n            analytics-id="components.directives.add-content-button.cloud-upload.button">\n      <div class="import-action-header">\n        <i class="icon-cloud add-content-cloud-upload-icon"></i>\n        <span bb-translate>components.directives.add-content-button.importContentFromCloudStorage.title</span>\n        <div class="action-details" bb-translate="components.directives.add-content-button.importContentFromCloudStorage.description"></div>\n      </div>\n    </button>\n  </bb-file-upload>\n</div>\n'},883547:function(e){e.exports='<div bb-load-bundle="components/directives/add-content-button">\n  <div class="add-element no-select js-add-content-button {{::contextArea + \'-add-button\'}}"\n       ng-class="{\n         \'force-show-add-button\': addContentButton.isForceShowAddButton && addContentButton.isForceShowAddButton(),\n         \'is-active\': addContentButton.isMenuVisible,\n         \'button-visible\': addContentButton.isButtonVisible,\n         hide: hideDividerLines() && !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)\n       }"\n       ng-keydown="addContentButton.onKeydown($event)">\n    <template></template>\n  </div>\n  <div id="{{::fileListViewId}}">\n    <bb-progress display-results="false" primary-key="primaryKey && primaryKey() ? primaryKey() : fileListViewLocalId" target-div="{{::\'#\' + fileListViewId}}"></bb-progress>\n  </div>\n</div>'},773297:function(e){e.exports='<button class="button-add-content js-show-add-options"\n        data-show-add-options\n        ng-click="addContentButton.addGroup()"\n        ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n        aria-label="{{addContentButton.addButtonAriaLabel}}"\n        ng-focus="addContentButton.showButton()"\n        ng-blur="addContentButton.hideButton()"\n        analytics-id="components.directives.add-content-button.course-group.button">\n</button>\n'},370267:function(e){e.exports='<div tabindex="-1" id="{{::addContentButton.getButtonWrapperId()}}">\n  <button\n    aria-expanded="{{addContentButton.isMenuVisible}}"\n    aria-label="{{addContentButton.addButtonAriaLabel}}"\n    ng-class="{hide: !(addContentButton.isButtonVisible || addContentButton.alwaysShow || addContentButton.isMenuVisible)}"\n    ng-focus="addContentButton.showButton()"\n    ng-blur="addContentButton.hideButton()"\n    class="button-add-content"\n    id="{{::addContentButton.getTargetId()}}"\n    ng-click="addContentButton.toggleAddContentMenu()"\n    analytics-id="components.directives.add-content-button.grades.button"\n  >\n  </button>\n</div>\n<bb-ui-contextual-menu\n  items="addContentButton.items"\n  target-id="::addContentButton.getTargetId()"\n  show="addContentButton.isMenuVisible"\n  directional-hint="::addContentButton.getDirectionalHint()"\n  dismiss="addContentButton.hideAddContentMenu"\n  analytics-id="components.directives.add-content-button.contextualMenu"\n>\n</bb-ui-contextual-menu>'},917800:function(e){e.exports='<div class="content-item-icon" bb-load-bundle="components/directives/element-image/element-image-accessibility">\n  <div ng-if= "!contentItemIcon.customLtiIcon">\n    <bb-ui-content-icon icon="contentItemIcon.iconName" color="{{contentItemIcon.iconColor}}" not-decorative="true" ng-if="!isMediumContentItemIcon"></bb-ui-content-icon>\n    <content-icon-medium icon="contentItemIcon.iconName" color="contentItemIcon.iconColor" ng-if="isMediumContentItemIcon" class="js-{{contentItemIcon.iconName}}-icon"></content-icon-medium>\n  </div>\n  <div class="image-wrapper" ng-if="contentItemIcon.customLtiIcon">\n    <img bb-translate-attrs="{\'alt\': \'components.directives.element-image.element-image-accessibility.img-icon-\' + contentItemIcon.iconName }" ng-src="{{ ::contentItemIcon.customLtiIcon }}" />\n  </div>\n</div>\n'},591537:function(e){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-forumlink" class="content-title"\n     bb-peek-sref="discussion.view.with-grading({contentId:\'{{targetContent.id}}\'})"\n     bb-prevent-click-if="targetContent.isConditionalReleaseLocked()"\n     aria-describedby="{{ariaDescribedBy}}"\n     analytics-id="course.link.item.forumLink.link"\n     aria-hidden="{{ aria }}"\n     tabindex="{{ tabbable ? -1 : 0 }}"><span>{{ content.title }}</span></a>\n  <div ng-switch-default class="content-title">{{ content.title }}</div>\n</ng-switch>\n'},168869:function(e){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility" dev-suppress-hide="true">\n  <div class="panel-block restricted-form content-visibility-rules-container">\n    <div class="row collapse">\n      <div class="columns small-12 js-from-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.startDateSelect"\n               class="from-check"\n               id="from-check-{{contentVisibilityRulesOptions.id}}"\n               name="fromCheck"\n               ng-change="contentVisibilityRulesOptions.handleCheckClick(\'from-check\')"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.startDateSelect.input.checkbox"/>\n        <label class="date-time-label" for="from-check-{{contentVisibilityRulesOptions.id}}" ng-show="!isReadOnlyMode()"\n          bb-translate>components.directives.content-visibility.startDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.startDateSelect || isAllowedEmpty)"\n          bb-translate>\n          components.directives.content-visibility.startDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.startDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateFromContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateFromDisabled}">\n            <!-- htmlhint:analytics-id:disable -->\n            <input id="date-from"\n                   bb-date-picker\n                   orientation="auto left"\n                   container=".{{contentVisibilityRulesOptions.dateFromContainer}}"\n                   ng-model="startDate" name="dateFrom" aria-describedby="date-from-error"\n                   ng-model-options="{ allowInvalid: true }"\n                   first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n                   bb-validate-date\n                   ng-class="{\'read-only-field\': isReadOnlyMode()}"\n                   ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'start-date\')"\n                   ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-required="contentVisibilityRulesOptions.isDateRequired(true)"\n                   ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-disabled="contentVisibilityRulesOptions.timeDateFromDisabled"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startDateAria\',\n                       \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n                   analytics-id="content.visibility.rules.options.startDate.input.text"/>\n              <!-- htmlhint:analytics-id:enable -->\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateFromDisabled}">\n            <bb-time-picker name="timeFrom"\n                            id="time-from"\n                            aria-describedby="time-from-error"\n                            invalid-validation-key="time"\n                            analytics-id="content.visibility.rules.options.startDate.input.text"\n                            ng-model="startTime"\n                            disabled="contentVisibilityRulesOptions.timeDateFromDisabled"\n                            bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.startTimeAria\',\n                                \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n            ></bb-time-picker>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateFrom" class="row collapse" id="date-from-error">\n            <span ng-message="required">\n                <bb-translate>components.directives.content-visibility.startDateError</bb-translate>\n              </span>\n          <span ng-message="date" bb-translate>\n            {{::contentVisibilityRulesOptions.setErrorString(true, true)}}\n          </span>\n          <span ng-message="startAndOrEndDate">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startAndOrEndDateOnsubmit">\n            <bb-translate>components.directives.content-visibility.startAndOrEndDateError</bb-translate>\n          </span>\n          <span ng-message="startBeforeDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateBeforeError</bb-translate>\n          </span>\n          <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeFrom" class="row collapse" id="time-from-error">\n          <span ng-message="required">\n              <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n          </span>\n        <span ng-message="time">\n            {{::contentVisibilityRulesOptions.setErrorString(false, true)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.startTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customStartDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12 js-until-checkbox">\n        <input type="checkbox"\n               ng-model="contentVisibilityRulesOptions.untilDateSelect"\n               class="until-check"\n               id="until-check-{{contentVisibilityRulesOptions.id}}"\n               name="untilCheck"\n               ng-change="contentVisibilityRulesOptions.handleCheckClick(\'until-check\')"\n               ng-show="!isReadOnlyMode()"\n               analytics-id="content.visibility.rules.options.untilDate.input.checkbox"/>\n        <label class="date-time-label" for="until-check-{{contentVisibilityRulesOptions.id}}"\n          ng-show="!isReadOnlyMode()" bb-translate>components.directives.content-visibility.endDate</label>\n        <label class="date-time-label"\n          ng-show="isReadOnlyMode() && (contentVisibilityRulesOptions.untilDateSelect || isAllowedEmpty)" bb-translate>\n          components.directives.content-visibility.endDate\n        </label>\n      </div>\n      <div\n        ng-show="contentVisibilityRulesOptions.untilDateSelect || !isReadOnlyMode() || (isAllowedEmpty && isReadOnlyMode())"\n        class="columns small-12">\n        <div class="row collapse date-time-inputs" ng-class="{\'read-only-fields\': isReadOnlyMode()}">\n          <div class="columns small-6 js-date-input-container {{contentVisibilityRulesOptions.dateUntilContainer}}"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateUntilDisabled}">\n            <!-- htmlhint:analytics-id:disable -->\n            <input id="date-until"\n                   bb-date-picker\n                   orientation="auto left"\n                   container=".{{contentVisibilityRulesOptions.dateUntilContainer}}"\n                   ng-model="endDate"\n                   ng-model-options="{ allowInvalid: true }"\n                   first-day-of-week="contentVisibilityRulesOptions.localeSettings.calendar.firstDayOfWeek"\n                   bb-validate-date\n                   name="dateUntil"\n                   aria-describedby="date-until-error" ng-class="{\'read-only-field\': isReadOnlyMode()}"\n                   ng-attr-bb-focus="contentVisibilityRulesOptions.shouldFocus(\'end-date\')"\n                   ng-blur="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-change="contentVisibilityRulesOptions.updateStartAndEndTime()"\n                   ng-required="contentVisibilityRulesOptions.isDateRequired(false)"\n                   ng-disabled="contentVisibilityRulesOptions.timeDateUntilDisabled"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endDateAria\',\n                       \'placeholder\': \'components.directives.content-visibility.datePlaceholder\'}"\n                   analytics-id="content.visiblity.rules.options.endDate.input.input.text"/>\n            <!-- htmlhint:analytics-id:enable -->\n          </div>\n          <div class="columns small-6 input group"\n            ng-class="{\'read-only-form-field\': isReadOnlyMode(), \'form-field-disabled\': contentVisibilityRulesOptions.timeDateUntilDisabled}">\n            <bb-time-picker name="timeUntil"\n                            id="time-until"\n                            aria-describedby="time-until-error"\n                            analytics-id="content.visibility.rules.options.endDate.input.text"\n                            ng-model="endTime"\n                            disabled="contentVisibilityRulesOptions.timeDateUntilDisabled"\n                            invalid-validation-key="time"\n                            bb-translate-attrs="{\'aria-label\': \'components.directives.content-visibility.endTimeAria\',\n                                \'placeholder\': \'components.directives.content-visibility.timePlaceholder\'}"\n            ></bb-time-picker>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="row collapse">\n      <div class="columns small-12">\n        <div bb-validation-messages for="dateUntil" class="row collapse" id="date-until-error">\n          <span ng-message="required">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="date">\n            {{::contentVisibilityRulesOptions.setErrorString(true, false)}}\n          </span>\n          <span ng-message="requiredOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStart">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilAfterStartOnsubmit">\n            <bb-translate>components.directives.content-visibility.endDateBeforeError</bb-translate>\n          </span>\n          <span ng-message="untilDueDate">\n            <bb-translate>components.directives.content-visibility.dueDateAfterError</bb-translate>\n          </span>\n          <span ng-message="subsequentDueDate">\n            <bb-translate>components.directives.content-visibility.subsequentDueDateAfterError</bb-translate>\n          </span>\n          <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n        </div>\n      </div>\n      <div bb-validation-messages for="timeUntil" class="row collapse" id="time-until-error">\n        <span ng-message="time">\n           {{::contentVisibilityRulesOptions.setErrorString(false, false)}}\n        </span>\n        <span ng-message="required">\n          <bb-translate>components.directives.content-visibility.endTimeError</bb-translate>\n        </span>\n        <span ng-transclude="customEndDateAndTimeValidationMessages"></span>\n      </div>\n    </div>\n  </div>\n</div>\n'},486930:function(e){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <a bb-focus\n             href="javascript:void(0);"\n             class="not-copied-details"\n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm"\n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      <!-- POST v1 -->\n      <!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">-->\n      <!--<span>Undo Import</span>-->\n      <!--</button>-->\n    </div>\n  </div>\n</div>\n'},484501:function(e){e.exports='<ng-switch on="targetContent.contentHandler.toString()">\n  <a ng-switch-when="resource/x-bb-blti-link" \n     bb-component-sref="{{prefix}}.engagement.edit({contentId:\'{{targetContent.id}}\'})"\n     class="content-title"\n     analytics-id="course.content.lti.link"><span>{{ content.title }}</span></a>\n</ng-switch>\n'},8208:function(e){e.exports='<div class="panel-header persistent-white-header mode-{{mode}} panel-header-directive"\n  bb-load-bundle="components/directives/panel-header"\n  ng-class="{\'is-editable\' : panelHeader.editMode,\n   \'has-slider\': hasSlider(),\n   \'can-edit\': canEdit,\n   \'has-controls\': showConversations() || showDelete() || showParticipants() || showSettings(),\n   \'has-visibility-toggle\': showVisibility()}">\n  <div class="panel-titles-container">\n    <div ng-if="showCourse()">\n      <div class="panel-sub-title js-vr-remove-random">\n        <span ng-if="::!panelHeaderTitleTranslateKey">{{panelHeader.panelHeaderTitle}}</span>\n        <span ng-if="::panelHeaderTitleTranslateKey" bb-translate>{{::panelHeaderTitleTranslateKey}}</span>\n      </div>\n    </div>\n    <div class="panel-title-texteditor">\n      <div class="editable-title-container" ng-show="!panelHeader.editMode">\n        <!-- ULTRA-13692 Since there\'s already an "Edit" button, we don\'t want keyboard users to be able to focus on the title to edit it,\n             otherwise there would be two ways to edit the title, which is confusing. However, since this title has an event listener, it\'s\n             announced as "clickable" by screenreaders, so let\'s hide it with aria-hidden and add another instance of the header just for\n             screenreaders instead. -->\n        <h1 class="sr-only" tabindex="-1" aria-hidden="true">{{panelTitle}}</h1>\n        <h1 class="panel-title secondary-title" ng-click="panelHeader.onEditMode()"\n            ng-keydown="panelHeader.titlePressKey($event)" bb-focus\n            ng-blur="panelHeader.blurTitle($event)"\n            ng-class="{\'student\' : !canEdit, \'is-hovered\': panelHeader.isEditButtonHovering}" title="{{panelTitle}}"\n            analytics-id="components.directives.content.panelHeader.secondaryTitle.header">{{panelTitle}}\n        </h1>\n        <button ng-if="canEdit" class="button super-clear edit-title" type="button"\n                ng-click="panelHeader.onEditMode()"\n                ng-mouseover="panelHeader.onEditButtonMouseOver()"\n                ng-mouseleave="panelHeader.onEditButtonMouseLeave()"\n                aria-label="{{ panelHeader.getAriaLabel() }}"\n                analytics-id="course.content.panelHeader.edit.button">\n          <bb-svg-icon size="small" icon="draw" aria-hidden="true"></bb-svg-icon>\n        </button>\n      </div>\n      <div class="panel-title-input-container" ng-show="panelHeader.editMode" bb-click-outside="panelHeader.onBlurTitle()">\n        <input\n          name="panel-title"\n          class="panel-header-title panel-title secondary-title"\n          type="text"\n          autocapitalize="off"\n          ng-keydown="panelHeader.pressKey($event)"\n          maxlength="{{maxLength}}"\n          ng-model ="panelTitle"\n          ng-model-options="{ getterSetter: true }"\n          ng-blur="panelHeader.onBlurTitle($event)"\n          ng-change="panelHeader.onChangeTitle()"\n          bb-translate-attrs="{\'aria-label\':\'{{::panelHeader.panelAriaLocalizationKey}}\'}"\n          bb-placeholder="{{::panelHeader.translatedPlaceholder}}"\n          translate-attrs-values="{{::localizationAttrsValues}}"\n          analytics-id="course.content.panelHeader.title.input.text"\n          >\n      </div>\n    </div>\n  </div>\n\n  <div\n    class="header-actions-menu button-group header-group"\n    ng-class="panelHeader.getButtonGroupClass()">\n\n    <ng-transclude ng-transclude-slot="panelHeaderActions"></ng-transclude>\n\n    <div ng-if="showVisibility()"\n         class="action-item item-visibility"\n         ng-class="{\'visibility-selector-disabled\': !panelHeader.isVisibilitySelectorEnabled()}">\n\n      <bb-content-visibility-selector ng-if="content" content="content"\n                                      is-visibility-selector-enabled="panelHeader.isVisibilitySelectorEnabled()"\n                                      onchange-func="panelHeader.onChangeVisibility()"\n                                      open-panel-on-restricted="openPanelOnRestricted()"\n                                      on-restricted-selected-func="panelHeader.onRestrictedSelected()"\n                                      validation-func="panelHeader.validateVisibilityChange(visibility)"\n                                      onblur-func="panelHeader.onBlurVisibility()"\n                                      disable-restricted="disableRestricted()"\n                                      has-medium-icon="false"></bb-content-visibility-selector>\n    </div>\n\n    <div class="ally-icons" ng-if="showAllyIcon() && panelHeader.canShowAlly">\n      <div class="small-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true"\n          class="ally-icon"></bb-ally-show>\n      </div>\n      <div class="medium-ally-icon">\n        <bb-ally-show content-id="{{::content.id}}" show-alternative-formats-link="true" show-icon="true" icon-size="medium"\n          class="ally-icon"></bb-ally-show>\n      </div>\n    </div>\n\n    <div ng-if="showConversations() && content.ui.hasConversationAttached && content.attachedForumLink"\n         class="action-item conversation"\n         ui-sref-active="active">\n      <button ng-click="panelHeader.gotoConversation()"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.conversationAriaLabel\', \'title\':\'components.directives.header.conversation\'}"\n         translate-attrs-values="{itemTitle: panelTitle}"\n         class="button super-clear icon open-conversation"\n         type="button"\n         analytics-id="panel.header.conversation.visibility.button">\n        <bb-svg-icon size="medium" icon="conversation"></bb-svg-icon>\n      </button>\n    </div>\n    <div ng-if="showDelete()"\n         class="action-item delete"\n         ng-class="{\'delete-button\': showDelete() && showSettings()}"\n         ui-sref-active="active">\n      <ng-switch on="panelHeader.getDeleteDirectiveArgumentType()">\n        <bb-delete ng-switch-when="ContentOnly" extra-class="standard-button" content="content" choices="choices" analytics-id="panel.header.content.only.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDelete" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" choices="choices" analytics-id="panel.header.content.delete.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndHandler" extra-class="standard-button" content="content" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.header.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="ContentAndDeleteAndHandler" extra-class="standard-button" content="content" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.content.delete.handler.button.switch"></bb-delete>\n        <bb-delete ng-switch-when="DeleteAndHandler" extra-class="standard-button" delete-function="ondeleteFunc()" confirmation-handler="{{ondeleteConfirmHandler}}" choices="choices" analytics-id="panel.header.delete.handler.button.switch"></bb-delete>\n      </ng-switch>\n    </div>\n    <div ng-if="showParticipants()"\n         class="action-item participants"\n         ui-sref-active="active">\n      <!--TODO: need add real route here -->\n      <a bb-peek-sref="discussion-participants"\n         bb-translate-attrs="{\'aria-label\':\'components.directives.header.participants\'}"\n         class="button super-clear icon"\n         analytics-id="components.directives.discussion.participants.link">\n        <bb-svg-icon ng-if="!content.isGroupContent" size="medium" icon="people"></bb-svg-icon>\n        <bb-svg-icon ng-if="content.isGroupContent" size="medium" icon="groups"></bb-svg-icon>\n      </a>\n    </div>\n\n    <div ng-if="showSettings() && !!settingsPeekRef"\n         class="action-item settings"\n         ui-sref-active="active">\n      <a class="button super-clear icon assessment-settings-button"\n         href="javascript:void(0);"\n         ng-class="{\'disabled\': settingsDisabled()}"\n         ng-click="panelHeader.openSettingsPanel()"\n         bb-translate-attrs="{\'aria-label\':\'{{settingsLabel}}\'}"\n         analytics-id="panel.header.open.settings.panel.link">\n        <bb-svg-icon size="medium" icon="{{::panelHeader.getSettingsIcon()}}"></bb-svg-icon>\n      </a>\n    </div>\n    <ng-transclude ng-transclude-slot="panelHeaderCustomIcons" />\n  </div>\n  <div class="graded-count-wrap" ng-if="showSubmissionsGrading()">\n    <div class="graded-count-wrap-col col-numbers">\n      <div class="graded-numbers"\n      ng-if="showSubmissionsGrading() && summary.$resolved"\n      bb-translate="components.directives.header.submissions-grading.gradedCount.numbers"\n      translate-values="{gradedCount: summary.numStudentsGraded(), totalCount: summary.numEligibleToBeGraded}"\n      >\n      </div>\n      <div class="filtered-numbers" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.numbers"\n      translate-values="{filteredCount}">\n      </div>\n    </div>\n    <div class="graded-count-wrap-col">\n      <p class="graded-label" ng-if="showSubmissionsGrading() && summary.$resolved" bb-translate="components.directives.header.submissions-grading.gradedCount.plural"></p>\n      <p class="graded-label" ng-if="showSubmissionsGrading() && isFiltered" bb-translate="components.directives.header.submissions-grading.filteredCount.plural"></p>\n    </div>\n  </div>\n</div>\n'},226666:function(e){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only"\n        bb-translate="course.conversion.statusBar.moreInfoLink" bb-translate-attrs="{ \'href\': \'course.conversion.statusBar.moreInfoLinkUrl\' }"\n        target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>\n'},449268:function(e){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},783497:function(e){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.studentPreview.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},562693:function(e){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);"\n     class="catalog-anchor-tag"\n     ng-if="!isExternalCatalog"\n     ng-click="handleCatalogLink()"\n     course-org-token-resolver\n     aria-label="{{ariaLabel}}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag"\n     ng-if="isExternalCatalog"\n     href="{{ ::externalCatalogUrl }}"\n     target="_blank"\n     rel="noopener noreferrer"\n     course-org-token-resolver\n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="medium" icon="programs" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_default" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>\n'},253776:function(e){e.exports='<ng-switch on="displayMode" bb-load-bundle="components/directives/delete">\n  <a href="javascript:void(0);"\n    ng-switch-when="controls"\n    ng-if="delete.requiredArgumentsSupplied"\n    bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n    choices="{{choices}}"\n    show-type="{{ delete.modalShowType }}"\n    ng-click="delete.deleteElement()"\n    bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\'}"\n    ng-disabled="savingInProgress"\n    class="{{extraClass}}" role="button"\n    analytics-id="components.directives.delete.deleteElement.link" \n  >\n    <span class="valign">\n      <span class="valign-content">\n        <bb-svg-icon size="small" icon="trash" class="icon-fw replaced"></bb-svg-icon>\n        <span class="ellipse" bb-translate="components.directives.delete.control-delete-label"></span>\n      </span>\n    </span>\n  </a>\n  <button ng-if="delete.requiredArgumentsSupplied"\n          bb-confirmation-needed get-confirmation-key-and-show-type="delete.getConfirmationKeyAndShowType()"\n          choices="{{choices}}"\n          ng-click="delete.deleteElement()"\n          ng-disabled="delete.isDeleteDisabled"\n          bb-translate-attrs="{\'aria-label\': \'{{attrTranslateKey}}\', \'title\': \'{{attrTranslateKey}}\'}"\n          ng-switch-default\n          class="button clear icon {{extraClass}}" type="button"\n          analytics-id="components.directives.delete.deleteElement.button"\n  >\n    <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n  </button>\n</ng-switch>'},800684:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.authorizationRequiredTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration.authorizationRequired">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.authorizationRequiredMessage</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="global.close">\n    <bb-translate>global.close</bb-translate>\n  </button>\n</bb-modal>\n'},446472:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.cloudStorageIntegration.modal.errorTitle"\n          analytics-id-tag-prefix="components.directives.cloudStorageIntegration">\n  <div name="modal-contents">\n    <p bb-translate>components.directives.cloudStorageIntegration.modal.errorFull</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button dismiss-button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.cloudStorageIntegration.modal.cancelUploadText">\n    <bb-translate>components.directives.cloudStorageIntegration.modal.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},963849:function(e){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem()" analytics-id="directives.dropdown.item.select">\n    <!--for the listkind=group, ios mobile will show a blank option-->\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);"\n         role="option"\n         aria-selected="{{selectedItem === item}}"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}"\n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);"\n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short" show-pronouns="true" show-pronunciation="true"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);"\n         role="option"\n         aria-setsize="{{itemList.length}}"\n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}"\n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},357323:function(e){e.exports='<div class="timestamp" bb-load-bundle="components/directives/duration" ng-cloak bb-cache-compilation="duration-directive">\n  <div ng-if="!duration.needAgo()">\n    <div class="js-split-datetime" ng-if="duration.separateDatetime()">\n      <span class="date" ng-bind="duration.date"></span>\n      <span class="time" ng-bind="duration.time"></span>\n    </div>\n    <bb-datetime ng-if="!duration.separateDatetime()" ng-class="{\'date\':duration.date}" value="date" format="Short"></bb-datetime>\n  </div>\n  <div ng-if="duration.needAgo()"\n       class="js-duration-ago"\n       bb-translate="components.directives.duration.agoText"\n       translate-values="{durationDate: duration.date, durationTime: duration.time}"></div>\n</div>'},59603:function(e){e.exports='<div class="text-editor" tabindex="-1" bb-load-bundle="components/directives/text-editor" bb-cache-compilation="basic-text-editor">\n  <label ng-if="inputLabelKey" class="text-editor-label" for="{{::elementId}}" bb-translate>{{::inputLabelKey}}</label>\n  <textarea id="{{::elementId}}"\n         class="read-mode editor-element"\n         name="{{::elementId}}"\n         tabindex="0"\n         type="text"\n         bb-validate-maxlength="{{::getInputMaxLength()}}"\n         ng-model="ngModel"\n         maxlength="{{::(getInputMaxLength() || \'\')}}"\n         ng-model-options="{ getterSetter: true }"\n         ng-disabled="readonly()"\n         fng-blur="textEditor.onBlur()"\n         fng-focus="textEditor.onFocus()"\n         fng-keyup="textEditor.onChange($event)"\n         fng-keydown="textEditor.onKeydown($event)"\n         bb-translate-attrs="{ \'placeholder\': \'{{placeholderKey}}\' }"\n         aria-label="{{textEditor.getContentLabel()}}"\n         translate-attrs-values="{{::placeholderAttrsValues}}"\n         bb-focus-on="{{::focusOn}}"\n         ng-required="::fieldRequired()"\n         analytics-id="components.textEditor.basicEditor.textarea"></textarea>\n  <div bb-validation-messages\n       ng-if="::!noValidationMessage()"\n       for="{{::elementId}}" immediate="true">\n    <span ng-message="maxlengthImmediate">\n      <span bb-translate translate-values="{ diff: element.$errorImmediate.maxlengthImmediate.diff }">\n        components.directives.validation.messages.errors.maxlength.plural\n      </span>\n    </span>\n  </div>\n</div>\n'},794815:function(e){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},690874:function(e){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},866010:function(e){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},893581:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},97288:function(e){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},305608:function(e){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},490620:function(e){e.exports='<bb-modal id="max-size-warning-modal" class="notification max-size-warning-modal"\n         modal-title-key="components.directives.fileUpload.maxSizeWarningTitle"\n         analytics-id-tag-prefix="max-size-warning-modal"\n         modal-aria-type="alertdialog"\n         >\n  <div class="files-content" name="modal-contents">\n    <div ng-repeat="group in filesGroupedByUploadLimit track by $index">\n      <p class="warning-message" bb-translate="components.directives.fileUpload.maxSizeWarningMessage" translate-values="{maxFileSize: calculateSizeInMib(group.fileSizeLimit)}"></p>\n      <ul class="files-info-list">\n        <li ng-repeat="file in group.files">\n          <p class="file-info">{{file.name}}</p>\n        </li>\n      </ul>\n    </div>\n    <p class="alternate-storage-info">\n      <span ng-bind-html="::getAlternateStorageInfo()">\n      </span>\n      <span ng-if="shouldIncludeSupportLink" ng-bind-html="supportLink"></span>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="closeModal()" analytics-id="components.directives.fileUpload.maxSizeWarningPrimary">\n      <bb-translate>components.directives.fileUpload.maxSizeWarningPrimary</bb-translate>\n  </button>\n</bb-modal>\n'},5207:function(e){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},395577:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},92589:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},901411:function(e){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select\n         ng-if="fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         multiple class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select\n         ng-if="!fileUpload.allowMultiple"\n         type="file"\n         ngf-change="fileUpload.onFileSelect($files)"\n         class="hide fileUploadInput"\n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},40801:function(e){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="{{::progress.getProgressIdAttr(file)}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <bb-ui-icon-large-zip ng-switch-when="application/zip" color="primary" class-name="element-image"></bb-ui-icon-large-zip>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id, file.identifier)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},230758:function(e){e.exports='<div ng-if="::foundationOffcanvas.wiredup || undefined"\n      class="bb-foundation-offcanvas"\n      ng-transclude\n      bb-click-outside="foundationOffcanvas.handleClickOutside()"\n      is-active="foundationOffcanvas.isPanelOpen"\n      aria-hidden="{{!foundationOffcanvas.isPanelOpen}}"\n      current-panel-only>\n</div>'},184108:function(e){e.exports='<button bb-complex-tooltip=""\n  enhanced-tooltip="true"\n  tooltip-position="top-center"\n  tooltip-disable-on-mouse-over="false"\n  tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n  tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n  tooltip-scope="buttonComplexTooltip.$scope"\n  tooltip-template="{{ buttonComplexTooltip.getToolTipTemplate() }}"\n  tooltip-open-on-activation="true"\n  tooltip-auto-update="true"\n  tooltip-always-underline="false"\n  analytics-id="components.directives.content-item-base.conditionalRelease.date.link"\n  tooltip-center-content="true"\n  title="components.directives.grade.grader-column.statuses.restricted">\n  <bb-svg-icon size="small" icon="information" status="default"></bb-svg-icon>\n</button>\n'},161223:function(e){e.exports='<div bb-intersection-observer-root root-options class="grades-list instructor-wrapper">\n  <div class="row tabular-list-header course-grades-column-headers" ng-if="courseGradesGraderList.columns.length > 0">\n    <div class="columns small-6 medium-4 large-4 tabular-list-header-offset">\n      <div ng-click="courseGradesGraderList.onClickSort(\'item\')" analytics-id="components.directives.grade.course-grades-grader-list.sortNameColumn" class="sorting-header-column" role="button" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'item\')}}\'}" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.name</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'item\')" class="sort-icon js-{{courseGradesGraderList.getSortTypeValue(\'item\')}}-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-2 large-2">\n      <div ng-click="courseGradesGraderList.onClickSort(\'category\')" analytics-id="components.directives.grade.course-grades-grader-list.sortCategoryColumn" class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'category\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.category</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'category\')" class="sort-icon js-{{courseGradesGraderList.getSortTypeValue(\'category\')}}-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-2 large-2">\n      <div ng-click="courseGradesGraderList.onClickSort(\'dueDate\')" analytics-id="components.directives.grade.course-grades-grader-list.sortDueDateColumn" class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'dueDate\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.dueDate</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'dueDate\')" class="sort-icon js-{{courseGradesGraderList.getSortTypeValue(\'dueDate\')}}-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-2 large-2">\n      <div ng-click="courseGradesGraderList.onClickSort(\'gradingStatus\')"\n           analytics-id="components.directives.grade.course-grades-grader-list.sortStatusColumn"\n           class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'gradingStatus\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.progress</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'gradingStatus\')" class="sort-icon" />\n      </div>\n    </div>\n    <div class="columns hide-for-small-only medium-2 large-2 end">\n      <div ng-click="courseGradesGraderList.onClickSort(\'post\')" analytics-id="components.directives.grade.course-grades-grader-list.sortPostColumn" class="sorting-header-column" bb-translate-attrs="{\'aria-label\': \'{{courseGradesGraderList.getAriaLabelString(\'post\')}}\'}" role="button" tabindex="0">\n        <span bb-translate>components.directives.grade.course-grades-grader-list.headers.post</span>\n        <bb-arrow-sort-indicator sortable="true" sort="courseGradesGraderList.getSortTypeValue(\'post\')" class="sort-icon" />\n      </div>\n    </div>\n  </div>\n\n  <div bb-mouse-leave-enter="course-gradebook">\n    <bb-add-content-button position-before="\'start\'" item-name="courseGradesGraderList.columns[0].columnName"\n                           context-area="courseGradesGraderList.contextArea"\n                           show-menu-override="!courseGradesGraderList.hasColumns"\n                           always-show="isFirst"\n                           show-add-attendance="attendanceIsAvailable() && !courseGradesGraderList.attendanceColumnExists"\n                           ng-if="courseGradesGraderList.contextArea && !course().isComplete() && courseGradesGraderList.canModify"></bb-add-content-button>\n\n    <div class="grade-list-columns">\n      <div class="drag-element" ng-class="{\'no-hover\': (course().isComplete() || (column.isAttendance() && !attendanceIsAvailable)), \'last-tabular-row-container\': $last}"\n        ng-repeat="column in courseGradesGraderList.columns track by column.id" bb-content-item-mouseover>\n        <div bb-drop-handler on-move-handler="courseGradesGraderList.onMoveGraderItem" content="column"\n          next-content-id="courseGradesGraderList.columns[$index+1].id"\n          previous-content-id="courseGradesGraderList.columns[$index-1].id">\n          <div bb-intersection-observer-target intersection-observer-target-id="course-grades-intersection-observer-span"\n            in-callback="courseGradesGraderList.renderMoreColumns()">\n            <bb-grader-column column="column" course="course()" is-course-view="true"\n              category-map="courseGradesGraderList.categoryMap"\n              attendance-column-exists="courseGradesGraderList.attendanceColumnExists"\n              attendance-is-available="attendanceIsAvailable()">\n            </bb-grader-column>\n          </div>\n        </div>\n      </div>\n    </div>\n    <bb-setup-overall-grade ng-if="courseGradesGraderList.showSetupOverallGradeMessage && courseGradesGraderList.canModify"\n                            course-id="courseGradesGraderList.course.id"\n                            setup-overall-grade-hide-message-callback="courseGradesGraderList.setupOverallGradeHideMessageCallback()">\n    </bb-setup-overall-grade>\n  </div>\n</div>\n'},260911:function(e){e.exports='<div class="base-grades course-grades-instructor" ng-class="{\'grades-list-view\': courseGradesGrader.isGradableItemsListView}">\n  <div ng-if="courseGradesGrader.isDesktop && !courseGradesGrader.isSmallScreen">\n\n    <div class="row collapse course-grades-header-buttons-wrapper js-course-skip-link-target" tabindex="-1">\n      <div class="gradebook-toolbar group-filters">\n        <bb-square-toggle one-icon-class="toggle-table"\n                          one-aria-label="components.directives.grade.course-grades-grader.views.list-button"\n                          one-view-value="list"\n                          two-icon-class="toggle-grid"\n                          two-aria-label="components.directives.grade.course-grades-grader.views.grid-button"\n                          two-view-value="grid"\n                          property="courseGradesGrader.squareToggleValue"\n                          analytics-id-tag-prefix="components.directives.grade.view.courseGrader"\n                          class="toggle-group-filters-enabled">\n        </bb-square-toggle>\n\n        <div class="gradebook-options">\n          <div class="grade-grid-search-box group-filters" ng-if="courseGradesGrader.isGridView">\n            <bb-typeahead-search-box id="student-search-box"\n                                    item-selected="courseGradesGrader.itemSelected(item)"\n                                    type-ahead-search="courseGradesGrader.typeAheadSearch(searchText)"\n                                    clear-search="courseGradesGrader.clearSelection()"\n                                    input-placeholder="components.directives.grade.search-box.placeholder"\n                                    sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                    sr-results-found="components.directives.grade.search-box.resultsFound"\n                                    sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                    sr-label="components.directives.grade.search-box.placeholder"\n                                    clear-aria-label="components.directives.grade.search-box.clear"\n                                    icon="search">\n\n                  <ng-switch on="item.type">\n                    <div ng-switch-when="user" class="element-card">\n                      <bb-user-avatar class="typeahead-user-avatar" user="::item.data.user"></bb-user-avatar>\n                      <div class="typeahead-student-name-id">\n                        <bb-username class="typeahead-name ellipse" user="item.data.user"></bb-username>\n                        <div class="typeahead-id ellipse">{{::item.data.user.userName}}</div>\n                      </div>\n                    </div>\n                    <div ng-switch-when="column" class="element-card">\n                      <div bb-content-item-icon content-column="item.data.getMetadata()" show-alert-icon="item.data.getMetadata().getNumMissingIfLate() > 0" class="element-image" ng-if="item.data.getMetadata()"></div>\n                      <div class="typehead-title column-title ellipse">\n                        <div class="ellipse grade-title">{{::item.data.getMetadata().columnName}}</div>\n                        <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.columnName</div>\n                      </div>\n                    </div>\n                    <div ng-switch-when="category" class="element-card">\n                        <bb-ui-icon-large-document-multiple color="primary"></bb-ui-icon-large-document-multiple>\n                        <div class="typehead-title category-title ellipse">\n                          <div bb-translate class="ellipse grade-title" ng-if="::!item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.localizableTitle.languageKey}}</div>\n                          <div bb-translate class="ellipse grade-title" ng-if="::item.data.getMetadata().gradebookCategory.isUserDefined">{{::item.data.getMetadata().gradebookCategory.title.split(\'.\')[0]}}</div>\n                          <div class="ellipse grade-type" bb-translate>components.directives.grade.search-box.category</div>\n                        </div>\n                    </div>\n                    <div ng-switch-default="noResult" class="element-card">\n                      <div class="no-result" bb-translate>components.directives.grade.search-box.noResultsFound</div>\n                  </div>\n                </ng-switch>\n            </bb-typeahead-search-box>\n          </div>\n          <div ng-if="courseGradesGrader.isGridView && courseGradesGrader.showGradeListContainer()">\n            <a class="filter-panel-button super-clear button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openAdvancedFilters\'}"\n              bb-peek-sref="gradebook-grid-advanced-filters" analytics-id="components.directives.grade.search.filter.button">\n              <bb-ui-icon-small-filter-options class="group-filters-icon"></bb-ui-icon-small-filter-options>\n              <span bb-translate>components.directives.grade.course-grades-grader.actions.filter</span>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.userHasViewGradebookPermission">\n            <a class="open-attempt-receipt-search button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.attemptReceiptSearch\', \'title\':\'components.directives.grade.course-grades-grader.actions.attemptReceiptSearch\'}"\n              bb-peek-sref="attempt-receipt-search"\n              analytics-id="components.directives.grade.actions.openAttemptReceiptSearch.link">\n              <bb-ui-icon-medium-content-view></bb-ui-icon-medium-content-view>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.canUploadGradebook">\n            <a class="open-upload-settings button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.upload\', \'title\': \'components.directives.grade.course-grades-grader.actions.upload\'}"\n              bb-peek-sref="grade-upload-setting"\n              ng-if="!courseGradesGrader.course.isComplete()"\n              analytics-id="components.directives.grade.actions.upload.link">\n              <bb-ui-icon-small-upload></bb-ui-icon-small-upload>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.canDownloadGradebook">\n            <a class="open-downLoad-settings button super-clear"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.download\', \'title\': \'components.directives.grade.course-grades-grader.actions.download\'}"\n              bb-peek-sref="grade-download-setting"\n              ng-if="!courseGradesGrader.course.isComplete()"\n              analytics-id="components.directives.grade.actions.download.link">\n              <bb-ui-icon-small-download></bb-ui-icon-small-download>\n            </a>\n          </div>\n\n          <div ng-if="courseGradesGrader.userHasViewGradebookPermission" course-id="course.model.id">\n            <a class="open-gradebook-settings button super-clear js-open-settings"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.actions.openSettings\', \'title\': \'components.directives.grade.course-grades-grader.actions.openSettings\'}"\n              bb-peek-sref="grade-setting"\n              analytics-id="components.directives.grade.actions.openSettings.link">\n              <bb-ui-icon-medium-settings></bb-ui-icon-medium-settings>\n            </a>\n          </div>\n        </div>\n      </div>\n      <bb-filter-chips\n        ng-if="courseGradesGrader.isGridView && courseGradesGrader.hasUrlFilters"\n        analytics-id="gradebook.grid.filters">\n      </bb-filter-chips>\n    </div>\n\n  </div>\n  <bb-gradebook-list-view-tabs\n    on-tab-changed="courseGradesGrader.changeListViewType"\n    selected-tab="courseGradesGrader.currentTabId"\n    ng-if="!courseGradesGrader.isGridView"\n  ></bb-gradebook-list-view-tabs>\n\n  <div ng-if="courseGradesGrader.isGridView || courseGradesGrader.isGradableItemsListView">\n    <!-- Empty state template: this section of the page will be displayed when there is no content, and will invite users to create content -->\n    <div class="is-empty-page js-course-skip-link-target"\n         ng-if="courseGradesGrader.columns.$resolved && courseGradesGrader.columns.length === 0 && !courseGradesGrader.hasUrlFilters">\n      <div class="is-empty-wrapper">\n        <div class="is-empty-explanation">\n          <img src="./static/images/ftue/course-grades-instructor.svg" bb-translate-attrs="{alt: \'components.directives.grade.course-grades-grader.empty.addItems\'}" />\n          <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.header</h1>\n          <p bb-translate>components.directives.grade.course-grades-grader.empty.description</p>\n        </div>\n        <div class="add-element">\n          <ul role="menu" class="element-list-add-menu small-block-grid-1 medium-block-grid-3 large-block-grid-4">\n            <li>\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addCalculation\'}"\n                 bb-peek-sref="gradebook-item.calculation" analytics-id="components.directives.grade.addCalculation.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addCalculation</span>\n                </div>\n              </a>\n            </li>\n            <li>\n              <a role="menuitem" class="js-empty-add-item" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addItem\'}"\n                 bb-peek-sref="grade-item.create" analytics-id="components.directives.addItem.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addItem</span>\n                </div>\n              </a>\n            </li>\n            <li ng-if="courseGradesGrader.attendanceIsAvailable">\n              <a role="menuitem" bb-translate-attrs="{\'aria-label\': \'components.directives.grade.course-grades-grader.empty.addAttendance\'}"\n                 bb-peek-sref="attendance" analytics-id="components.directives.grade.addAttendance.link">\n                <div>\n                  <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n                  <span bb-translate>components.directives.grade.course-grades-grader.empty.addAttendance</span>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n\n\n    <div class="grade-list-container"\n         ng-if="courseGradesGrader.isGradableItemsListView && courseGradesGrader.showGradeListContainer()">\n      <div class="spinner bb-secondary-color-2" ng-if="!courseGradesGrader.columns" aria-hidden="true"></div>\n      <div bb-infinite-scroll infinite-scroll-tray-id="course-grades-grader" infinite-scroll-localization-keys-prefix="components.directives.grade.course-grades-grader.infiniteScroll">\n        <bb-course-grades-grader-list course="courseGrades.course"\n                                      is-first="true"\n                                      add-more-columns="courseGradesGrader.renderMoreColumns()"\n                                      columns="courseGradesGrader.columns"\n                                      show-setup-overall-column="courseGradesGrader.showSetupOverallColumn"\n                                      attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                                      on-click-sort-icon="courseGradesGrader.onClickSortIcon(headerName)"\n                                      sort-attributes="courseGradesGrader.sortAttributes">\n        </bb-course-grades-grader-list>\n    </div>\n  </div>\n\n    <div class="grade-grid-content"\n         ng-if="courseGradesGrader.isGridView && courseGradesGrader.showGradeListContainer()">\n      <div>\n        <bb-grade-grid-reborn course="courseGrades.course"\n                              columns="courseGradesGrader.visibleColumns"\n                              attendance-is-available="courseGradesGrader.attendanceIsAvailable"\n                              merged-courses="courseGradesGrader.mergedCourses"\n                              ng-show="!courseGradesGrader.areFilterResultsEmpty">\n        </bb-grade-grid-reborn>\n        <div class="is-empty-page advanced-filters"\n            ng-if="courseGradesGrader.areFilterResultsEmpty">\n          <div class="is-empty-wrapper">\n            <div class="is-empty-explanation">\n              <h1 class="is-empty-heading" bb-translate>components.directives.grade.course-grades-grader.empty.advancedFilters.header</h1>\n              <p bb-translate>components.directives.grade.course-grades-grader.empty.advancedFilters.description</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Student List View handles its own loading indicator and empty state -->\n  <div ng-if="courseGradesGrader.isStudentListView" class="student-list-view-container">\n    <bb-student-list-view class="react-container"\n                          course-id="courseGrades.course.id">\n    </bb-student-list-view>\n  </div>\n</div>\n'},15910:function(e){e.exports='<ng-switch on="displayGrade.shouldShowPointsPossible()">\n  <span ng-switch-when="true" ng-bind-html="displayGrade.fullDisplayGrade"></span>\n  <span ng-switch-default><strong>{{displayGrade.fullDisplayGrade}}</strong></span>\n</ng-switch>'},415689:function(e){e.exports='<div class="grade-callout-wrapper">\n  <div class="grade-callout readonly {{displayGrade.getCourseColorClass()}}"\n       ng-class="{ \'pending\': displayGrade.attempt.isNeedsGrading() }"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target">\n    <span class="value" bb-translate>{{displayGrade.attemptStatus}}</span>\n  </div>\n</div>\n'},754883:function(e){e.exports='<div class="grade-callout-wrapper" ng-if="!displayGrade.isSchemaTypeComplete()">\n  <div class="grade-callout readonly {{displayGrade.colorClass || \'na\'}} overall-grade"\n       bb-load-bundle="components/directives/grade/display-grade"\n       bb-click-to-invoke-child="a.bb-click-grade-target"\n       ng-class="{\'defaultCursor\': displayGrade.cursorDefault}">\n    <span ng-if="!displayGrade.noGradeToDisplay()" class="sr-only" bb-translate>{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}</span>\n    <span ng-if="!overallGradePeekSref" class="value">{{displayGrade.fullDisplayGrade}}</span>\n    <a class="overall-grade value"\n       ng-if="overallGradePeekSref"\n       bb-peek-sref="{{overallGradePeekSref}}"\n       analytics-id="components.directives.grade.display-grade.overallGrade.link">\n      {{displayGrade.fullDisplayGrade}}\n    </a>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  ng-if="displayGrade.isSchemaTypeComplete()"\n  is-complete="displayGrade.isStatusComplete()"\n  grade-value="displayGrade.schemaGradeValue">\n</bb-complete-incomplete-grade-pill>\n'},442568:function(e){e.exports='<span class="schema-grade">{{displayGrade.fullDisplayGrade}}</span>\n'},89120:function(e){e.exports='<div class="grade-color" ng-if="!displayGrade.isSchemaTypeComplete()">\n  <div ng-if="!displayGrade.shouldShowRubricButton() && !displayGrade.shouldShowRubricDiv()">\n    <div ng-if="!(isGroupGradeMultiple() && !showNotGraded())"\n         ng-class="{ \'show-total\': displayGrade.gradeDisplayItem.shouldShowTotalPoints(),\n                     \'final-grade\': finalGrade(),\n                     \'na\': displayGrade.gradeDisplayItem.displayValue == null,\n                     \'cursor-pointer\': displayGrade.cursorPointer,\n                     \'defaultCursor\': displayGrade.cursorDefault}"\n         class="wrapping-input-style {{displayGrade.colorClass}}"\n         ready="{{::displayGrade.fullDisplayGrade && !displayGrade.noGradeToDisplay() || undefined}}">\n      <ng-switch on="displayGrade.schema.scaleType">\n        <span ng-switch-default>\n          <span ng-if="displayGrade.fullDisplayGrade != null && !overallGradePeekSref" class="grade-input-display ready" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{displayGrade.fullDisplayGrade}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade != null && overallGradePeekSref"\n             class="grade-input-display ready"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.fullDisplayGrade.link">\n            {{displayGrade.fullDisplayGrade}}\n          </a>\n          <span ng-if="displayGrade.fullDisplayGrade == null && !overallGradePeekSref" class="grade-input-display" bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.fullDisplayGrade == null && overallGradePeekSref"\n             class="grade-input-display"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             bb-translate-attrs="{ title: \'{{displayGrade.gradeDisplayItem.perfCodeDesc || translateKey}}\'}"\n             analytics-id="components.directives.grade.display-grade.scale.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n        </span>\n        <span ng-switch-when="SCORE">\n          <!-- Accommodate for hiding of points possible in small format -->\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue != null && !overallGradePeekSref" class="grade-input-display ready">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue != null && overallGradePeekSref"\n             class="grade-input-display ready"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.fullDisplayGrade.link">\n            {{displayGrade.gradeDisplayItem.displayValue}}\n          </a>\n          <span ng-if="displayGrade.gradeDisplayItem.displayValue == null && !overallGradePeekSref" class="grade-input-display">{{::displayGrade.getNoGradeDisplay()}}</span>\n          <a ng-if="displayGrade.gradeDisplayItem.displayValue == null && overallGradePeekSref"\n             class="grade-input-display"\n             bb-peek-sref="{{overallGradePeekSref}}"\n             analytics-id="components.directives.grade.display-grade.score.getNoGradeDisplay.link">\n            {{::displayGrade.getNoGradeDisplay()}}\n          </a>\n          <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n        </span>\n      </ng-switch>\n    </div>\n    <div ng-if="isGroupGradeMultiple() && !showNotGraded()" class="wrapping-input-style is-multiple">\n      <div ng-if="overallGradePeekSref" class="group-multiple" bb-peek-sref="{{overallGradePeekSref}}" bb-translate>components.directives.grade.display-grade.multiple</div>\n      <div ng-if="!overallGradePeekSref" class="group-multiple" bb-translate>components.directives.grade.display-grade.multiple</div>\n    </div>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricButton()">\n    <a ng-if="!displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-view"\n       class="js-rubric-view wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubric.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n    <a ng-if="displayGrade.shouldShowRubricEvaluation()"\n       bb-peek-sref="rubric-evaluation({groupId: displayGrade.attempt.groupId})"\n       class="js-rubric-evaluation wrapping-input-style clear cursor-pointer"\n       ng-class="displayGrade.colorClass"\n       analytics-id="components.directives.grade.display-grade.rubricEvaluation.link">\n      <span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}&nbsp</span>\n        <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}&nbsp</span>&nbsp;\n        <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n      </span>\n    </a>\n  </div>\n  <div ng-if="displayGrade.shouldShowRubricDiv() && displayGrade.shouldShowRubricEvaluation()"\n       class="wrapping-input-style clear"\n       ng-class="displayGrade.colorClass">\n    <span>\n      <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue != null">{{displayGrade.gradeDisplayItem.displayValue}}</span>\n      <span class="grade-input-display ready" ng-if="displayGrade.gradeDisplayItem.displayValue == null">{{::displayGrade.getNoGradeDisplay()}}</span>&nbsp;\n      <span ng-if="displayGrade.shouldShowPointsPossible()" class="points-text" bb-translate translate-values="{total: gradeDetail.pointsPossible || column.possible}">components.directives.grade.display-grade.points</span>\n    </span>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  class="js-complete-pill"\n  ng-if="displayGrade.isSchemaTypeComplete()"\n  is-rubric-enabled="displayGrade.shouldShowRubricButton()"\n  is-complete="displayGrade.isStatusComplete()"\n>\n</bb-complete-incomplete-grade-pill>\n'},900966:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li role=presentation>\n        <button role="menuitem" \n                class="js-view-submission button clear" \n                ng-click="cell.view()" \n                ng-disabled="!cell.canBeView"\n                analytics-id="components.directives.grade.grid.viewItemRecord" >\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  course-org-token-resolver class="ellipse">components.directives.grade.grid.viewItemRecord</bb-translate>\n        </button>\n    </li>\n  </ul>\n</div>'},722181:function(e){e.exports='<div class="input-wrapper" ng-if="!gradeGridCellEditorReborn.isSchemaTypeComplete()">\n  <input translate-attrs-values="{userName: gradeGridCellEditorReborn.userName}"\n        bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grid.scoreInputAriaLabel\'}"\n        ng-blur="gradeGridCellEditorReborn.onInputBlur($event)"\n        placeholder="--" ng-model="gradeGridCellEditorReborn.score"\n        ng-click="gradeGridCellEditorReborn.stopPropagation($event)"\n        ng-change="gradeGridCellEditorReborn.onChange()"\n        aria-describedby="totalPoints"\n        ng-keydown="gradeGridCellEditorReborn.onKeydown($event)" spellcheck="false" autocomplete="off"\n        analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text" />\n</div>\n<div class="possible-wrapper" ng-mousedown="gradeGridCellEditorReborn.mousedown()" ng-if="!gradeGridCellEditorReborn.isSchemaTypeComplete()">\n  <span id="totalPoints" class="possible" bb-translate translate-values="{total: col.data.possible}">\n      components.directives.grade.grade-input.points\n  </span>\n</div>\n  <bb-complete-incomplete-grade-pill\n      ng-keydown="gradeGridCellEditorReborn.onKeydown($event)"\n      ng-if="gradeGridCellEditorReborn.isSchemaTypeComplete()"\n      class="js-completeScore"\n      grade-value="gradeGridCellEditorReborn.score"\n      is-complete="gradeGridCellEditorReborn.isStatusComplete()"\n      on-blur="gradeGridCellEditorReborn.onCompleteIncompleteBlur"\n      total-points="col.data.possible"\n      aria-complete-incomplete-label="gradeGridCellEditorReborn.getAriaLabel()"\n      analytics-id="components.directives.grade.gradeGridCellEditorReborn.input.text"\n      initial-has-focus="true"\n  ></bb-complete-incomplete-grade-pill>\n'},558853:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <!-- TODO : remove this div when removing feature flag key (\'feature.course.gradebook.gridview.sorting\') -->\n  <div class="content content-header-bg content-header"\n       ng-click="gradeGridColumnHeaderOverallReborn.popupMenu($event)"\n       tabindex="0"\n       role="columnheader"\n       aria-describedby="summary-points-{{::columnMetadata.id}}"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.popupMenu"\n       ng-if="!gradeGridColumnHeaderOverallReborn.gradeGridRebornController.isGridSortingEnabled"\n       aria-label="{{columnMetadata.columnName}}"\n  >\n    <div bb-content-item-icon content-column="columnMetadata" is-medium-content-item-icon="true" class="element-image" role="presentation"></div>\n    <div class="grade-grid-header-title grade-name">\n      <bb-svg-icon class="visibility-icon"\n                   ng-if="!columnMetadata.visible"\n                   size="small"\n                   icon="invisible"\n                   role="img"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n      ></bb-svg-icon>\n      <span class="ellipse" title="{{::columnMetadata.columnName}}">{{::columnMetadata.columnName}}</span>\n    </div>\n  </div>\n  <!-- TODO : remove ng-if when removing feature flag key (\'feature.course.gradebook.gridview.sorting\') -->\n  <div class="content content-header-bg" ng-if="gradeGridColumnHeaderOverallReborn.gradeGridRebornController.isGridSortingEnabled">\n    <div bb-content-item-icon\n         ng-click="gradeGridColumnHeaderOverallReborn.popupMenu($event)"\n         content-column="columnMetadata"\n         is-medium-content-item-icon="true"\n         class="element-image content-icon content-item-icon-bg-{{columnMetadata.id}}" role="presentation"\n         tabindex="0"\n         aria-describedby="summary-points-{{::columnMetadata.id}}"\n         analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.popupMenu"\n         aria-label="{{columnMetadata.columnName}}"\n    ></div>\n    <div class="grade-grid-header-title grade-name">\n      <div class="sorting-header-column content-item-name-bg-{{columnMetadata.id}} js-column-sorting"\n           ng-click="gradeGridColumnHeaderOverallReborn.gradeGridRebornController.onClickSortIcon(\'overall grade\',columnMetadata)"\n           analytics-id="components.directives.grade.grid.gradeGridColumnHeaderOverallReborn.columnSorting" bb-translate-attrs="{\'aria-label\': \'{{gradeGridColumnHeaderOverallReborn.gradeGridRebornController.getAriaLabelString(\'overall grade\')}}\'}"\n           tabindex="0"\n           role="button">\n      <bb-svg-icon class="visibility-icon"\n                   ng-if="!columnMetadata.visible"\n                   size="small"\n                   icon="invisible"\n                   role="img"\n                   bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n      ></bb-svg-icon>\n      <span class="ellipse" title="{{::columnMetadata.columnName}}" >{{::columnMetadata.columnName}}</span>\n      <div class="ellipse left-bold location" bb-foundation-defer>\n         <bb-arrow-sort-indicator sortable="true"\n                                 sort="gradeGridColumnHeaderOverallReborn.gradeGridRebornController.getSortTypeValue(\'overall grade\')"\n                                 class="sort-icon sorted-{{gradeGridColumnHeaderOverallReborn.gradeGridRebornController.getSortTypeValue(\'overall grade\')}} js-{{gradeGridColumnHeaderOverallReborn.gradeGridRebornController.getSortTypeValue(\'overall grade\')}}-icon">\n         </bb-arrow-sort-indicator>\n      </div>\n      </div>\n    </div>\n  </div>\n  <div class="grade-grid-header-summary" tabindex="1" id="summary-points-{{columnMetadata.id}}">\n    <span class="ellipse points" ng-if="gradeGridColumnHeaderOverallReborn.shouldShowPoints()"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.points.plural\'}" translate-attrs-values="{count: gradeGridColumnHeaderOverallReborn.possible}"\n          bb-translate translate-values="{count: gradeGridColumnHeaderOverallReborn.possible}">components.directives.grade.grid.points.plural</span>\n    <span class="sr-only"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="1" ng-if="columnMetadata.isCalculated()" id="summary-info-{{columnMetadata.id}}">\n    <span class="ellipse items-count"\n          bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}" translate-attrs-values="{count: columnMetadata.itemsCount}"\n          bb-translate translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n  </div>\n</div>\n'},985606:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <div class="content content-header-bg content-header cursor-pointer" tabindex="0" role="columnheader"\n       ng-class="{\'is-restricted\': columnMetadata.isHiddenFromStudents(), \'is-unavailable\': !gradeGridColumnHeaderReborn.toolAvailable || !col.hasContextMenuOptions()}"\n       ng-click="gradeGridColumnHeaderReborn.popupMenu($event)"\n       analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.popupMenu"\n       ng-if="!gradeGridColumnHeaderReborn.gradeGridRebornController.gridData.shouldAllowSorting(columnMetadata)">\n      <div bb-content-item-icon content-column="columnMetadata" show-alert-icon="showAlertIcon()" is-medium-content-item-icon="true" class="element-image" role="presentation"></div>\n      <div class="ellipse grade-name" \n           aria-labelledby="summary-info-{{columnMetadata.id}}" aria-label="{{columnMetadata.columnName}}">{{columnMetadata.columnName}}</div>\n      <div bb-feature-toggle="feature.course.content.formative.assessments"\n      remove-from-dom="true">\n        <span ng-if="columnMetadata.isFormative" class="formative-label"\n              id="summary-formative-{{columnMetadata.id}}"\n              aria-hidden="true"\n              bb-translate>\n              components.directives.grade.grid.formative\n        </span>\n      </div>\n  </div>\n  <!-- TODO : remove ng-if when removing feature flag key (\'feature.course.gradebook.gridview.sorting\') -->\n  <div class="content content-header-bg content-header"\n       ng-class="{\'is-restricted\': columnMetadata.isHiddenFromStudents()}"\n       ng-if="gradeGridColumnHeaderReborn.gradeGridRebornController.gridData.shouldAllowSorting(columnMetadata)">\n    <div bb-content-item-icon content-column="columnMetadata" show-alert-icon="showAlertIcon()" is-medium-content-item-icon="true" class="element-image content-icon content-item-icon-bg-{{columnMetadata.id}}" role="button"\n         ng-click="gradeGridColumnHeaderReborn.popupMenu($event)"\n         analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.popupMenu"\n         ng-class="{\'is-unavailable\': !gradeGridColumnHeaderReborn.toolAvailable || !col.hasContextMenuOptions()}"\n         aria-haspopup="true" aria-expanded="{{gradeGridColumnHeaderReborn.isPopupOpen}}"\n         aria-describedby="summary-info-{{columnMetadata.id}}"\n         tabindex="0" aria-label="{{columnMetadata.columnName}}"></div>\n    <div class="grade-name">\n      <div class="sorting-header-column content-item-name-bg-{{columnMetadata.id}} js-column-sorting"\n           ng-click="gradeGridColumnHeaderReborn.gradeGridRebornController.onClickSortIcon(columnMetadata.id,columnMetadata)"\n           bb-translate-attrs="{\'aria-label\': \'{{gradeGridColumnHeaderReborn.getAriaLabelStringForColumnHeader(columnMetadata)}}\'}"\n           translate-attrs-values="{columnName:columnMetadata.columnName}"\n           analytics-id="components.directives.grade.grid.gradeGridColumnHeaderReborn.columnSorting"\n           tabindex="0"\n           role="button">\n        <span class="ellipse grade-header-name" title="{{columnMetadata.columnName}}">{{columnMetadata.columnName}}</span>\n        <bb-arrow-sort-indicator bb-foundation-defer sortable="true"\n                                 sort="gradeGridColumnHeaderReborn.gradeGridRebornController.getSortTypeValue(columnMetadata.id)"\n                                 class="sort-icon sorted-{{gradeGridColumnHeaderReborn.gradeGridRebornController.getSortTypeValue(columnMetadata.id)}} js-{{gradeGridColumnHeaderReborn.gradeGridRebornController.getSortTypeValue(columnMetadata.id)}}-icon">\n        </bb-arrow-sort-indicator>\n      </div>\n    </div>\n    <div bb-feature-toggle="feature.course.content.formative.assessments"\n         remove-from-dom="true">\n      <span ng-if="columnMetadata.isFormative" class="formative-label"\n          id="summary-formative-{{columnMetadata.id}}"\n          aria-hidden="true"\n          bb-translate>\n          components.directives.grade.grid.formative\n      </span>\n    </div>\n  </div>\n\n  <div ng-if="gradeGridColumnHeaderReborn.col.data.summary.numStudentsSubmitted > 0">\n    <anonymous-submission-bulk-download open="gradeGridColumnHeaderReborn.shouldShowAnonymousBulkDownloadModal"\n                                        on-close-dialog="gradeGridColumnHeaderReborn.hideAnonymousDownloadModal"\n                                        course-id="gradeGridColumnHeaderReborn.col.data.courseId"\n                                        column-id="gradeGridColumnHeaderReborn.col.id"\n                                        num-students-submitted="gradeGridColumnHeaderReborn.col.data.summary.numStudentsSubmitted"\n    ></anonymous-submission-bulk-download>\n  </div>\n  <div ng-if="gradeGridColumnHeaderReborn.col.data.summary.numStudentsSubmitted === 0">\n    <anonymous-no-submission-bulk-download open="gradeGridColumnHeaderReborn.shouldShowAnonymousBulkDownloadModal"\n                                           on-close-dialog="gradeGridColumnHeaderReborn.hideAnonymousDownloadModal"\n    ></anonymous-no-submission-bulk-download>\n  </div>\n\n  <div class="grade-grid-header-summary" tabindex="0"\n    id="summary-points-{{columnMetadata.id}}">\n    <span class="ellipse points" title="{{gradeGridColumnHeaderReborn.getSchemaText()}}">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n  </div>\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && !columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n    class="grade-grid-header-summary"\n    tabindex="0"\n    id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" class="grade-and-post" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-count" ng-if="gradeGridColumnHeaderReborn.gradeGridRebornController.gridData.isSummaryLoaded && gradeGridColumnHeaderReborn.isScorable()"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.gradedTip\'}" translate-attrs-values="{count: gradeGridColumnHeaderReborn.getGradeCount()}"\n            bb-translate translate-values="{count: gradeGridColumnHeaderReborn.getGradeCount()}">components.directives.grade.grid.graded</span>\n      <span class="grade-pipe" ng-if="gradeGridColumnHeaderReborn.gradeGridRebornController.gridData.isSummaryLoaded && gradeGridColumnHeaderReborn.isScorable()"></span>\n      <span class="ellipse grade-posted-count" ng-if="gradeGridColumnHeaderReborn.gradeGridRebornController.gridData.isSummaryLoaded && gradeGridColumnHeaderReborn.isScorable()"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.postedTip\'}" translate-attrs-values="{count: gradeGridColumnHeaderReborn.getPostedCount()}"\n            bb-translate translate-values="{count: gradeGridColumnHeaderReborn.getPostedCount()}">components.directives.grade.grid.posted</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       ng-class="{\'grade-complete-status\': !gradeGridColumnHeaderReborn.isRestricted()}"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()" class="grade-grid-header-summary"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grader-column.statuses.restricted\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="col.isShowSummary() && columnMetadata.isVisibleToStudents() && columnMetadata.summary.isAllGradedAndPosted() && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       bb-translate-attrs="{\'title\': \'components.directives.grade.grid.completeLabel\'}"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-svg-icon size="small" icon="complete" status="success"></bb-svg-icon>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grid.completeLabel</span>\n    </div>\n  </div>\n\n  <div ng-if="(!col.isShowSummary() || !columnMetadata.isVisibleToStudents()) && !columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grid.groupAriaLabel</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse grade-status"></span>\n    </div>\n  </div>\n\n  <div ng-if="columnMetadata.isCalculated()"\n       class="grade-grid-header-summary"\n       tabindex="0"\n       id="summary-info-{{columnMetadata.id}}">\n    <div ng-if="gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span ng-if="isGroupTest" class="sr-only" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <bb-button-complex-tooltip></bb-button-complex-tooltip>\n      <span class="ellipse grade-status" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n    </div>\n\n    <div ng-if="!gradeGridColumnHeaderReborn.isRestricted()" >\n      <span ng-if="columnMetadata.isFormative" class="sr-only"\n            bb-translate-attrs="{\'title\': \'components.directives.grade.grid.formative\'}"\n            id="summary-formative-{{columnMetadata.id}}"\n            bb-translate>\n            components.directives.grade.grid.formative\n      </span>\n      <span class="sr-only">{{gradeGridColumnHeaderReborn.getSchemaText()}}</span>\n      <span class="ellipse items-count" ng-if="columnMetadata.itemsCount !== undefined"\n        bb-translate-attrs="{\'title\': \'components.directives.grade.grid.itemsTip\'}"\n        translate-attrs-values="{count: columnMetadata.itemsCount}" bb-translate\n        translate-values="{count: columnMetadata.itemsCount}">components.directives.grade.grid.items.plural</span>\n    </div>\n  </div>\n</div>\n'},236577:function(e){e.exports='<div class="grade-grid-cell grade-grid-header-cell">\n  <!-- TODO : remove this div when removing feature flag key (\'feature.course.gradebook.gridview.sorting\')-->\n    <div ng-if="!gradeGridColumnHeaderStudentReborn.gradeGridRebornController.isGridSortingEnabled"\n         class="content student-content student-column" role="columnheader" tabindex="0">\n      <div class="ellipse left-bold location" course-org-token-resolver bb-translate>components.directives.grade.grid.students</div>\n  </div>\n  <!-- TODO : remove `ng-if` when removing feature flag key (\'feature.course.gradebook.gridview.sorting\')-->\n  <div ng-if="gradeGridColumnHeaderStudentReborn.gradeGridRebornController.isGridSortingEnabled"\n       class="content student-content student-column">\n    <div class="ellipse left-bold location sorting-header-column js-column-sorting" course-org-token-resolver id="studentName" ng-click="gradeGridColumnHeaderStudentReborn.gradeGridRebornController.onClickSortIcon(\'students\')" analytics-id="components.directives.grade.grid.student-name" role="button"\n         bb-translate-attrs="{\'aria-label\': \'{{gradeGridColumnHeaderStudentReborn.gradeGridRebornController.getAriaLabelString(\'students\')}}\'}" tabindex="0">\n        <span course-org-token-resolver bb-translate>components.directives.grade.grid.students</span>\n        <bb-arrow-sort-indicator ng-if="gradeGridColumnHeaderStudentReborn.gradeGridRebornController.isGridSortingEnabled" sortable="true"\n                                 sort="gradeGridColumnHeaderStudentReborn.gradeGridRebornController.getSortTypeValue(\'students\')"\n                                 class="sort-icon sorted-{{gradeGridColumnHeaderStudentReborn.gradeGridRebornController.getSortTypeValue(\'students\')}} js-{{gradeGridColumnHeaderStudentReborn.gradeGridRebornController.getSortTypeValue(\'students\')}}-icon">\n        </bb-arrow-sort-indicator>\n    </div>\n  </div>\n  <div class="summary student-column"></div>\n  <div class="summary student-column">\n    <span bb-translate course-org-token-resolver translate-values="{count: studentsTotal}">components.directives.grade.grid.studentsSummary.plural</span>\n  </div>\n</div>\n'},519:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n     tabindex="0"\n     ng-click="gradeGridColumnOverallReborn.enterEditor($event)"\n     analytics-id="components.directives.grade.grid.gradeGridColumnOverallReborn.enterEdit"\n>\n  <div class="overall-display-grade" ng-class="{\'editor-disable\': gradeGridColumnOverallReborn.disabledEditor}"\n       aria-label="{{gradeGridColumnOverallReborn.ariaLabelContent}}">\n    <!--<bb-display-grade column="col.data" display-type="GradeColor" grade-detail="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade>-->\n    <bb-display-grade-pill\n      column="col.data"\n      grade="gradeGridColumnOverallReborn.gradeDetail"></bb-display-grade-pill>\n  </div>\n</div>\n'},935135:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell"\n  ng-click="!isDisabled && gradeGridColumnReborn.enterEditor($event)"\n  analytics-id="components.directives.grade.grid.gradeGridColumnReborn.enterEdit"\n>\n  <div class="exception-icon" ng-if="gradeGridColumnReborn.showExceptionIcon">\n    <button\n      bb-complex-tooltip\n      enhanced-tooltip="true"\n      bb-translate-attrs="{\'aria-label\': \'components.directives.grade.submission-list-row.exception.tooltipButtonAriaLabel\'}"\n      translate-attrs-values="{name: gradeGridColumnReborn.getShortFormatUsername()}"\n      tooltip-position="top-center"\n      tooltip-center-content="true"\n      tooltip-enable-on-mouse-over-for-all-breakpoints="true"\n      tooltip-enable-on-mouse-leave-for-all-breakpoints="true"\n      tooltip-scope="gradeGridColumnReborn.tooltipScope"\n      tooltip-template="{{gradeGridColumnReborn.getTooltipTemplate()}}"\n      analytics-id="components.directives.grade.grid.gradeGridColumnReborn.exception.button">\n      <bb-ui-icon-small-time-extra></bb-ui-icon-small-time-extra>\n    </button>\n  </div>\n  <div class="score hide" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <bb-complete-incomplete-grade-pill\n        ng-if="gradeGridColumnReborn.isSchemaTypeComplete() && gradeGridColumnReborn.showCompletePill() && gradeGridColumnReborn.isScorable()"\n        class="complete-pill"\n        is-complete="gradeGridColumnReborn.isStatusComplete()"\n        grade-value="gradeGridColumnReborn.score"\n        on-blur="gradeGridColumnReborn.onCompleteInputBlur"\n        total-points="col.data.possible">\n      </bb-complete-incomplete-grade-pill>\n    <div id="displayedScore" class="hide" ng-show="gradeGridColumnReborn.isScorable()">\n      <span id="display" class="ellipse hide" ng-show="!gradeGridColumnReborn.isSchemaTypeComplete()"></span>\n      <span id="posted"  class="grade-posted-symbol hide" bb-translate>components.directives.grade.grid.postedLabel</span>\n      <span id="pastDueZero" class="past-due-zero-symbol hide" bb-translate>components.directives.grade.grid.pastDueZero</span>\n      <span id="slash" class="slash hide"></span>\n      <span id="pointsPossible" class="pointsPossible hide"></span>\n      <span id="exempt" class="item-exempt-symbol hide" bb-translate>components.directives.grade.grid.exemptLabel</span>\n    </div>\n\n    <div id="noSubmission" class="hide" ng-show="gradeGridColumnReborn.isScorable()" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <span\n         analytics-id="components.directives.grade.grid.noSubmission">-</span>\n    </div>\n\n    <div id="newSubmission" class="hide" ng-show="gradeGridColumnReborn.isScorable()" aria-label="{{gradeGridColumnReborn.ariaLabelContent}}">\n      <span class="new-submission" bb-translate>components.directives.grade.grid.newSubmissionLabel</span>\n    </div>\n\n    <div id="displayedStatus" ng-show="!gradeGridColumnReborn.isScorable()">\n      <span id="display-non-scorable" class="ellipse" bb-translate>{{gradeGridColumnReborn.latestAttemptStatus()}}</span>\n    </div>\n\n    <span id="blank" class="sr-only">\n      {{gradeGridColumnReborn.ariaLabelContent}}\n    </span>\n  </div>\n  <div id="group" class="group-label" ng-if="!gradeGridColumnReborn.isRestrictedGroupContent && gradeGridColumnReborn.isScorable()">{{gradeGridColumnReborn.group.groupTitle}}</div>\n  <div id="ungraded" class="ungraded hide" ng-show="gradeGridColumnReborn.isScorable()">\n    <span class="ellipse">{{gradeGridColumnReborn.ungraded}}</span>\n  </div>\n  <div class="anonymous hide">\n    <button\n      bb-tooltip\n      enhanced-tooltip="true"\n      tooltip-position="bottom-center"\n      class="anonymous-button"\n      analytics-id="components.directives.grade.grid.anonymous.button"\n      bb-translate-attrs="{ title: \'components.directives.grade.grid.anonymous.tooltip\' }">\n      <span bb-translate>components.directives.grade.grid.anonymous.label</span>\n    </button>\n  </div>\n</div>\n'},294675:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu student-card" tabindex="-1">\n  <div class="student-info">\n    <bb-user-avatar class="avatar" user="user"></bb-user-avatar>\n    <div class="info">\n      <bb-username class="ellipse username" user="user" auto-update="true" title="{{fullName}}" ng-class="{ inactive: !isUserCourseAvailable }"></bb-username>\n      <div class="profile ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n      <div class="profile ellipse" ng-if="!user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n      <div class="profile ellipse" ng-if="user.userName && user.studentId" title="{{user.studentId}}" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n      <div class="profile" ng-bind="courseRole"></div>\n    </div>\n  </div>\n</div>\n'},23332:function(e){e.exports='<div class="grade-grid-cell grade-grid-body-cell student-column">\n  <div class="student-info">\n    <bb-user-avatar class="avatar"\n      user="user"\n      ng-click="!isDisabled && gradeGridColumnStudentReborn.viewIndividualGrades(user.id, membershipId)"\n      analytics-id="components.directives.grade.grid.studentAvatar.link"\n    >\n    </bb-user-avatar>\n    <div class="name-and-groups">\n      <a ng-if="!isDisabled" class="username-link" bb-peek-sref="view-individual-grades({ userId: user.id, membershipId: membershipId })"\n        analytics-id="components.directives.grade.grid.studentUsername.link"\n        aria-label={{fullName}}>\n        <student-name-tooltip full-name="fullName" membership-id="membershipId" user-id="user.id">\n        </student-name-tooltip>\n      </a>\n      <student-name-tooltip ng-if="isDisabled" full-name="fullName" membership-id="membershipId" user-id="user.id">\n      </student-name-tooltip>\n      <div ng-if="user.studentId" class="ellipse student-id" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n      <bb-filtered-users-groups\n        class="group-names"\n        user-id="user.id">\n      </bb-filtered-users-groups>\n    </div>\n  </div>\n</div>\n'},673336:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="grade-grid-group-confirm-dialog" aria-haspopup="true" role="dialog">\n  <div class="message-wrapper">\n    <div class="message">\n      <span bb-translate>components.directives.grade.grid.confirmContent</span>\n    </div>\n    <div class="buttons">\n      <button class="button" \n              ng-click="saveGroup()" \n              bb-translate  \n              analytics-id="components.directives.grade.grid.yes">components.directives.grade.grid.yes</button>\n      <button class="button button--secondary" \n              ng-click="saveOne()" \n              ng-disabled="isSaveOneDisabled" \n              analytics-id="components.directives.grade.grid.no"\n              bb-translate>components.directives.grade.grid.no</button>\n    </div>\n  </div>\n</div>'},730020:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-item"\n         bb-peek-sref="grade-item.create({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addItem">\n        <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addItem</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-calculation"\n         bb-peek-sref="gradebook-item.calculation({positionAfter: positionAfter})"\n         analytics-id="components.directives.grade.grid.addCalculation">\n        <bb-svg-icon size="small" icon="calculation"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addCalculation</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation">\n      <a role="menuitem"\n         class="js-add-total-calculation"\n         bb-peek-sref="gradebook-item.total-calculation({positionAfter: positionAfter, isExternalGrade: false})"\n         analytics-id="components.directives.grade.grid.addTotalCalculation">\n        <bb-svg-icon size="small" icon="calculation"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addTotalCalculation</bb-translate>\n      </a>\n    </li>\n\n    <li role="presentation" ng-if="!attendanceColumnExists && attendanceIsAvailable">\n      <a role="menuitem"\n         bb-peek-sref="attendance"\n         analytics-id="components.directives.grade.grid.addAttendance">\n        <bb-svg-icon size="small" icon="attendance" ></bb-svg-icon>\n        <bb-translate>components.directives.grade.grid.addAttendance</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>\n'},712359:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown cell-dropdown" role="menu">\n    <li ng-if="cell.canBeView"\n        role="presentation">\n        <button role="menuitem"\n                class="js-view-submission button clear"\n                ng-click="cell.view()"\n                analytics-id="components.directives.grade.grid.viewItem">\n          <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n          <bb-translate  class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n        </button>\n    </li>\n    <li ng-if="cell.viewFeedback"\n        role="presentation">\n      <button role="menuitem"\n              class="js-add-feedback button clear"\n              ng-click="cell.openGradeAndFeedbackPanel()"\n              analytics-id="components.directives.grade.grid.feedback">\n        <bb-svg-icon size="small" icon="add-feedback"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.feedback</bb-translate>\n      </button>\n    </li>\n    <li ng-class="{disable: !isReadyToPost()}"\n        ng-if="cell.canPost()"\n        role="presentation">\n        <button role="menuitem"\n                class="js-post-grade button clear"\n                ng-click="post()"\n                ng-disabled="!isReadyToPost()"\n                analytics-id="components.directives.grade.grid.post">\n          <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n          <bb-translate class="ellipse" bb-translate>components.directives.grade.grid.post</bb-translate>\n        </button>\n    </li>\n    <li ng-if="cell.shouldAllowUserToAddExceptions()"\n          role="presentation">\n          <button role="menuitem"\n                  class="exception-grade button clear"\n                  ng-click="cell.openExceptionPanel()"\n                  analytics-id="components.directives.grade.grid.exceptions">\n            <bb-ui-icon-small-time-extra class="exception-small-icon"></bb-ui-icon-small-time-extra>\n            <bb-translate class="ellipse">components.directives.grade.submission-list-row.per-assessment.exceptions</bb-translate>\n          </button>\n    </li>\n    <div bb-feature-toggle="feature.gradebook.exempt.gradable.item" remove-from-dom="true">\n      <li ng-if="cell.canExempt()"\n          role="presentation">\n          <button role="menuitem"\n                  class="exempt-grade button clear"\n                  ng-click="cell.exempt()"\n                  analytics-id="components.directives.grade.grid.exempt">\n            <bb-ui-icon-small-exempt class="exempt-small-icon"></bb-ui-icon-small-exempt>\n            <bb-translate class="ellipse" bb-translate>components.directives.grade.course-grades-student.exemption.exemption</bb-translate>\n          </button>\n      </li>\n    </div>\n  </ul>\n</div>\n'},385006:function(e){e.exports='<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul class="f-dropdown f-dropdown-overflow-menu reborn-dropdown" role="menu">\n    <li role="presentation" ng-if="col.canShowReminderOption()">\n      <!-- class="react-component-menu-item" for pointing out that the child is react-component -->\n      <a role="menuitem"\n         href="javascript:void(0);"\n         class="react-component-menu-item"\n         analytics-id="course.grades.gradebook.sendReminders.link">\n        <send-reminders-menu-item\n          analytics-id="::course.grades.gradebook.sendReminders"\n          course-id="::col.data.courseId"\n          column-id="col.data.id"\n          is-group="col.data.groupContent"\n          num-students-not-submitted="col.getStudentsNoSubmissionCount()">\n        </send-reminders-menu-item>\n      </a>\n    </li>\n    <li ng-if="col.isScorm()" role="presentation">\n      <a role="menuitem"\n         ng-click="col.previewScorm()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.viewScorm">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewScorm</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canView() && !col.canEdit() && !col.isScorm()" role="presentation">\n      <a role="menuitem"\n          ng-click="col.viewOrEdit()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.viewItem">\n        <bb-svg-icon size="small" icon="visible"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.viewItem</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canEdit()" role="presentation">\n      <a  role="menuitem"\n          class="js-edit-column"\n          ng-click="col.viewOrEdit()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.edit">\n        <bb-svg-icon size="small" icon="draw"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.edit</bb-translate>\n      </a>\n    </li>\n    <li ng-if="canPostGrades" role="presentation">\n      <a  role="menuitem"\n          class="js-post-column"\n          ng-click="col.postGrades()"\n          href="javascript:void(0);"\n          bb-confirmation-needed="{{grade.getPostAllGradeConfirmationNeededStringsKey(col.data)}}"\n          modal-aria-type="alertdialog"\n          show-type="always"\n          analytics-id="components.directives.grade.grid.post">\n        <bb-svg-icon size="small" icon="post"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.post</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.data.isQuestionAnalysisAvailable() && col.canViewQuestionAnalysis()"\n        remove-from-dom="true"\n        role="presentation">\n      <a  role="menuitem"\n          class="js-open-question-analysis"\n          ng-click="col.openQuestionAnalysisOverview()"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.grid.openQuestionAnalysis">\n        <bb-svg-icon size="small" icon="question-analysis"></bb-svg-icon>\n        <bb-translate class="ellipse">components.directives.grade.grid.openQuestionAnalysis</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.showDownloadResults()" role="presentation">\n      <a role="menuitem"\n          class="js-download-results"\n          ng-click="col.openDownloadTestResultsPanel()"\n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadResults">\n        <bb-ui-icon-small-download></bb-ui-icon-small-download>\n        <bb-translate class="ellipse">components.directives.grade.grader-column.downloadResults.overflowMenuLabel</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.hasDownloads() && col.canDownloadAll()" role="presentation">\n      <a role="menuitem"\n          class="js-download-all"\n          ng-click="col.openDownloadAll()"\n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.downloadAll">\n        <bb-ui-icon-small-download-file></bb-ui-icon-small-download-file>\n        <bb-translate class="ellipse">components.directives.grade.grid.downloadSubmissions</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.shouldShowStatistics()" role="presentation">\n      <a role="menuitem"\n          class="js-column-statistics"\n          ng-click="col.openColumnStatisticsPanel()"\n          href="javascript:void(0)"\n          analytics-id="components.directives.grade.grid.column-statistics.link">\n        <bb-ui-icon-small-report></bb-ui-icon-small-report>\n        <bb-translate class="ellipse">components.directives.grade.grid.statisticsMenuLabel</bb-translate>\n      </a>\n    </li>\n    <li ng-if="col.canDelete()" role="presentation">\n      <a class="js-delete-column"\n         href="javascript:void(0);"\n         ng-click="col.triggerDelete($event)"\n         ng-switch="!!col.data.contentId"\n         analytics-id="components.directives.grade.grid.deleteColumn.link"\n         role="button">\n        <!-- Content column -->\n        <bb-delete callback-function="col.deleteColumn()"\n                   class="ellipse"\n                   content-id="col.data.contentId"\n                   course-id="col.data.courseId"\n                   display-mode="controls"\n                   ng-switch-when="true"\n                   role="menuitem">\n        </bb-delete>\n        <!-- Grading column -->\n        <bb-delete class="ellipse"\n                   confirmation-handler="{{col.getConfirmationMessage()}}"\n                   delete-function="col.deleteColumn()"\n                   display-mode="controls"\n                   ng-switch-when="false"\n                   role="menuitem">\n        </bb-delete>\n      </a>\n    </li>\n  </ul>\n</div>\n'},280071:function(e){e.exports='\n<div bb-grade-grid-menu-reborn id="{{id}}" class="reborn-dropdown-menu">\n  <ul ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride || col.gradeNotations.length" class="f-dropdown f-dropdown-overflow-menu reborn-dropdown performance-code-options show notation-no-border notation-max-height " role="menu">\n\n    <li ng-if="col.gradeNotations.length" class="performance-option-header">\n        <span bb-translate>components.directives.grade.grade-input.selectPerformanceCode</span>\n    </li>\n    <li ng-repeat="notation in col.gradeNotations" class="performance-code-option">\n      <a role="menuitem"\n         ng-click="gradeGridColumnOverallReborn.selectNotation(notation)"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grid.notation.link">\n        <span class="code" aria-label="{{notation.code}}">{{notation.code}}</span>\n        <span class="description notation-description-max-width" aria-label="{{notation.description}}">{{notation.description}}</span>\n      </a>\n    </li>\n    <li ng-if="gradeGridColumnOverallReborn.gradeDetail.displayGrade.isOverride" class="undo-override">\n      <a role="menuitem"\n         ng-click="gradeGridColumnOverallReborn.undoOverride()"\n         href="javascript:void(0);"\n         analytics-id="components.directives.grade.grade-input.undoOverride">\n        <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n        <bb-translate>components.directives.grade.grade-input.undoOverride</bb-translate>\n      </a>\n    </li>\n  </ul>\n</div>\n'},849628:function(e){e.exports="<div ng-transclude></div>"},801321:function(e){e.exports='<div role="alertdialog" aria-live="assertive">\n  <div class="validation-message-wrapper" tabindex="0">\n    <span bb-ax-alert="2000" class="validation-message" id="sr-message" bb-translate >components.directives.grade.validation.default</span>\n  </div>\n</div>'},125025:function(e){e.exports='<div ng-if="!gradeGridOverallEditorReborn.isSchemaTypeComplete()" class="wrapping-input-style no-hover">\n  <div>\n    <input autocomplete="off" pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px" pu-elastic-input-width-delta="8"\n           ng-blur="gradeGridOverallEditorReborn.onInputBlur()"\n           placeholder="--" ng-model="gradeGridOverallEditorReborn.score"\n           ng-mousedown="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-click="gradeGridOverallEditorReborn.stopPropagation($event)"\n           ng-change="gradeGridOverallEditorReborn.onChange()"\n           ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)" spellcheck="false"\n           analytics-id="components.directives.grade.grid.overAll.input.text"/>\n  </div>\n  <div ng-mousedown="gradeGridOverallEditorReborn.mousedown()" ng-class="{hidden: gradeGridOverallEditorReborn.isHiddenPointsPossible}">\n    <span class="slash"></span><span class="possible" ng-bind="gradeGridColumnOverallReborn.pointsPossibleToDisplay"></span>\n  </div>\n</div>\n<bb-complete-incomplete-grade-pill\n  class="js-completeScore"\n  ng-keydown="gradeGridOverallEditorReborn.onKeydown($event)"\n  ng-if="gradeGridOverallEditorReborn.isSchemaTypeComplete()"\n  grade-value="gradeGridOverallEditorReborn.score"\n  is-complete="gradeGridOverallEditorReborn.isStatusComplete()"\n  on-blur="gradeGridOverallEditorReborn.onCompleteIncompleteBlur"\n  analytics-id="components.directives.grade.grid.overAll.input.text"\n  total-points="gradeGridOverallEditorReborn.scope.gradeGridColumnOverallReborn.pointsPossible"\n  initial-has-focus="true"\n></bb-complete-incomplete-grade-pill>\n'},904714:function(e){e.exports='<div class="spinner bb-secondary-color-2" ng-if="!gg.initialized" aria-hidden="true"></div>\n<div id="grade-grid-container" class="grade-grid-container" ng-class="{\'membership-loading\': !gg.initialized}">\n  <div class="overall-grade-setup grade-search-filter-panel student-column" ng-if="gg.showFilterCriteria">\n      <bb-grade-grid-search-filter-reborn merged-courses="::gg.mergedCourses"></bb-grade-grid-search-filter-reborn>\n  </div>\n\n  <div id="grade-grid" bb-grid-reborn="gg.gridOptions"></div>\n  <div class="overall-grade-setup text-center" ng-if="gg.isOverallPanelShown && gg.canViewOverallPanel">\n    <bb-setup-overall-grade show-fixed-view="gg.canViewOverallPanel" course-id="course().id" setup-overall-grade-hide-message-callback="gg.setupOverallGradeHideMessageCallback()"></bb-setup-overall-grade>\n  </div>\n</div>\n'},680883:function(e){e.exports='\n<div class="filter-list-content">\n  <div class="filter-panel-container">\n    <div class="filter-panel-header">\n      <div class="filter-panel-title-wrapper">\n        <h3 class="filter-panel-title" bb-translate>components.directives.grade.filter-panel.title</h3>\n        <button type="button"\n          class="filter-panel-close-button"\n          data-is-visible="true"\n          bb-translate-attrs="{\'aria-label\': \'components.directives.grade.filter-panel.closeFilterPanel\'}"\n          ng-click="gradeGridSearchFilterReborn.closeFilterCriteria()"\n          analytics-id="components.directives.grade.filterPanel.close.button"\n        >\n          <div>\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </div>\n        </button>\n      </div>\n      <button class="filter-panel-clear-all is-disabled"\n              ng-disabled= "!gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0"\n              ng-class="{\'filter-panel-clear-all-active\': gradeGridSearchFilterReborn.getCheckedMergedCourse() > 0}"\n              ng-click="gradeGridSearchFilterReborn.clearAll()"\n              analytics-id="components.directives.grade.filter-panel.clearAll"\n              bb-translate>\n              components.directives.grade.filter-panel.clearAll\n      </button>\n    </div>\n    <!-- TODO Container(style protoType) for search-box, enable in furture\n    <div class="filter-panel-block" id="keyword-block">\n        <div class="filter-panel-block-header">\n          <h4 class="filter-panel-block-title">Keyword Search</h4>\n          <button type="button filter-panel-toggle-button">\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n          </button>\n        </div>\n        <div class="filter-panel-search-box">\n            <bb-typeahead-search-box id="student-search-box"\n                                     input-placeholder="components.directives.grade.search-box.placeholder"\n                                     sr-empty-results="components.directives.grade.search-box.emptyResults"\n                                     sr-results-found="components.directives.grade.search-box.resultsFound"\n                                     sr-no-results-found="components.directives.grade.search-box.noResultsFound"\n                                     sr-label="components.directives.grade.search-box.placeholder"\n                                     clear-aria-label="components.directives.grade.search-box.clear"\n                                     icon="search">\n            </bb-typeahead-search-box>\n        </div>\n    </div>\n    -->\n    <div class="filter-panel-block" id="sources-block" ng-repeat="criteriaBlock in gradeGridSearchFilterReborn.criteriaBlocks ">\n        <div class="filter-panel-block-header" id ={{::criteriaBlock.id}}>\n            <h4 class="filter-panel-block-title" course-org-token-resolver bb-translate>components.directives.grade.filter-panel.mergedCourseTitle</h4>\n            <button type="button" class="filter-panel-toggle-button"\n                    ng-class="{\'filter-panel-block-toggle-close\': !criteriaBlock.expanded }"\n                    ng-click="gradeGridSearchFilterReborn.collapseMergedCourse(criteriaBlock)"\n                    aria-label="{{gradeGridSearchFilterReborn.getToggleButtonLabel(criteriaBlock)}}"\n                    analytics-id="components.directives.grade.filterPanel.mergedCourse.collapse.button"\n            >\n            <bb-svg-icon size="small" icon="arrow-down"></bb-svg-icon>\n            </button>\n          </div>\n        <div class="filter-panel-groups" ng-show="criteriaBlock.expanded">\n          <div class="filter-panel-group">\n            <div class="filter-panel-item" ng-repeat="criteriaDetail in criteriaBlock.criteriaDetails track by $index" >\n              <div class="is-enabled filter-panel-item-checkbox" ng-show="!criteriaDetail.ui.hidden">\n                <input type="checkbox" id={{::criteriaDetail.id}}\n                  class="bb-Checkbox-checkboxInput foundation-overrides"\n                  ng-model="criteriaDetail.ui.checked"\n                  ng-change="gradeGridSearchFilterReborn.filterMergedCourse(criteriaDetail)"\n                  analytics-id="components.directives.grade.filterPanel.mergedCourse.input.checkbox">\n                  <label class="foundation-overrides" for={{::criteriaDetail.id}}>\n                    <div class="check-box-label">\n                      <span>{{::criteriaDetail.childCourse.name}}</span>\n                      <bb-svg-icon icon="check" size="inline"></bb-svg-icon>\n                    </div>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n  </div>\n</div>'},681725:function(e){e.exports='<ul class="complex-tooltip-list conditional-release-tooltip">\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.isUserHasDueDateException()">components.directives.grade.submission-list-row.exception.date</li>\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.isUserHasReleaseConditions()">components.directives.grade.submission-list-row.exception.release</li>\n  <li bb-translate class="complex-tooltip-list__bullet" ng-if="gradeGridColumnReborn.cell.exceptions.hasAttemptsException">components.directives.grade.submission-list-row.exception.attempts</li>\n</ul>\n'},905120:function(e){e.exports='<div class="grade-input-wrapper" ng-class="{\'has-validation-error\': !!gradeInput.form[gradeInput.id].$invalid}">\n  <div ng-show="!gradeInput.isSchemaTypeComplete()" class="grade-pill-container" ng-attr-id="{{hasRubricClearConfirmationCallout ? \'grade-input-container-callout\' : \'\'}}">\n    <div>\n      <bb-inline-validation\n        show-error="!!gradeInput.form[gradeInput.id].$invalid"\n        bb-translate-attrs="{ \'error-message\': errorMessageKey }"\n        ng-show="gradeInput.shouldShowInput()">\n        <div\n          ng-class="{\'not-graded-exempt\': !gradeInput.colorClass && gradeDetail.isExempt, \'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown() && !gradeDetail.isExempt,\n                      \'is-in-progress\': gradeInput.isInProgressShown() && !gradeDetail.isExempt, \'group-grade-input\': !!forGroup, \'disable-click\': !individualAttemptIndicator && gradeDetail.isExempt && !editGradeWhenExemptWithParticipation }"\n          class="wrapping-input-style {{gradeInput.colorClass}}" data-dropdown="performanceCodes-{{gradeInput.id}}">\n          <div bb-foundation-defer>\n            <div class="wrapping-editable-input">\n              <bb-svg-icon size="small" icon="rubric"\n                           ng-if="gradeInput.isRubricEvalMode() && gradeInput.shouldShowInput()"></bb-svg-icon>\n\n              <input name="{{gradeInput.id}}" autocomplete="off"\n                     ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}"\n                     pu-elastic-input pu-elastic-input-minwidth="10px" pu-elastic-input-maxwidth="180px"\n                     pu-elastic-input-width-delta="8"\n                     type="text" placeholder="--"\n                     bb-translate-attrs="{ \'aria-label\': gradeInput.getGradeInputAriaLabelKey() }"\n                     translate-attrs-values="{ user: forUser, group_name: forGroup && forGroup.title, grade: gradeInput.gradeDisplayItem.displayValue, total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}"\n                     ng-model="gradeInput.gradeDisplayItem.displayValue" ng-readonly="gradeInput.isReadOnly()"\n                     title="{{gradeInput.gradeDisplayItem.perfCodeDesc}}"\n                     ng-blur="gradeInput.onBlur($event)" ng-change="gradeInput.gradeValueOnChange()"\n                     ng-focus="gradeInput.onFocus()"\n                     class="js-grade-input" analytics-id="directives.grade-input.grade.display.item.input"\n                     aria-invalid="{{!!gradeInput.form[gradeInput.id].$invalid ? \'true\' : \'false\'}}"\n                     aria-describedby="{{!!gradeInput.form[gradeInput.id].$invalid ? gradeInput.getAriaDescribeById(): undefined}}">\n\n              <bb-confirmation-callout-dialog\n                ng-if="hasRubricClearConfirmationCallout"\n                analytics-id="directives.grade-input.grade.clearRubricConfirmation"\n                target="\'#grade-input-container-callout\'"\n                is-visible="gradeInput.gradeDialog.isVisible"\n                text-content="gradeInput.gradeDialog.textContent"\n                on-dismiss="gradeInput.gradeDialog.onDismiss"\n                on-success="gradeInput.gradeDialog.onSuccess"\n              >\n              </bb-confirmation-callout-dialog>\n            </div>\n\n          </div>\n\n          <!--TOTAL POINTS-->\n          <!-- Fix ULTRA-15280.\n          If there is gradeDetail, we should use its pointsPossible as the total.\n          If there is no gradeDetail, which means it is not graded yet, there are tow cases:\n           for overall grade (and calculations), we use the default value 100, unless the overall grade schema is ScoreBased\n           for common column, assignment, etc. we use column.possible. -->\n          <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n                translate-values="{total: gradeInput.getTruncatedPointsPossible()}">\n        components.directives.grade.grade-input.points\n        </span>\n        </div>\n        <div class="alert-icon" ng-if="!!gradeInput.form[gradeInput.id].$invalid">\n          <bb-svg-icon size="small" icon="attention" status="alert"></bb-svg-icon>\n        </div>\n      </bb-inline-validation>\n      <a ng-show="!gradeInput.shouldShowInput()" class="button super-clear has-rubric wrapping-input-style {{gradeInput.colorClass}}"\n         ng-class="{\'show-total\': gradeInput.shouldShowTotalPoints(), \'is-multiple\': gradeInput.isMultipleShown(), \'is-in-progress\': gradeInput.isInProgressShown(), \'group-grade-input\': !!forGroup, \'disable-click\': disableRubricEvalClick()}"\n         ng-click="gradeInput.openRubricEvaluation()"\n         aria-disabled="{{disableRubricEvalClick()}}"\n         href="javascript:void(0);" analytics-id="directives.grade-input.rubric.evaluation.link">\n        <span class="sr-only" bb-translate translate-values="{user: forUser}">components.directives.grade.grade-input.rubricButtonAlt</span>\n        <bb-svg-icon size="small" icon="rubric"></bb-svg-icon>\n        <span name="{{gradeInput.id}}" class="grade-point-value"\n              ng-class="{\'group-multiple\': gradeInput.isMultipleShown(), \'group-in-progress\': gradeInput.isInProgressShown()}">\n        {{gradeInput.gradeDisplayItem.displayValue || \'--\'}}&nbsp;\n      </span>\n\n        <!--TOTAL POINTS-->\n        <span ng-if="gradeInput.shouldShowTotalPoints()" class="points-text" bb-translate\n              translate-values="{total: gradeDetail.pointsPossible || (column.isCalculated() ? 100 : column.possible)}">\n        components.directives.grade.grade-input.points\n      </span>\n      </a>\n    </div>\n  </div>\n\n  <a class="js-complete-pill-wrapper complete-pill-link" tabindex="-1" analytics-id="directives.grade-input.grade.display.item.link" href="javascript:void(0);">\n    <bb-complete-incomplete-grade-pill\n      class="js-complete-pill"\n      ng-if="gradeInput.isSchemaTypeComplete()"\n      ng-model="gradeInput.gradeDisplayItem.displayValue"\n      name="{{gradeInput.id}}"\n      aria-complete-incomplete-label="gradeInput.getAriaLabel()"\n      analytics-id="directives.grade-input.grade.display.item.input"\n      grade-value="gradeInput.gradeDisplayItem.parsedValue"\n      is-complete="gradeInput.isStatusComplete()"\n      on-blur="gradeInput.onCompleteIncompleteBlur"\n      total-points="gradeInput.getTruncatedPointsPossible()"\n      is-editable="gradeInput.shouldShowInput() && gradeInput.isScorable()"\n      is-rubric-enabled="gradeInput.isRubricEvalMode()"\n      can-open-rubric-eval="gradeInput.openRubricEvaluation"\n      >\n    </bb-complete-incomplete-grade-pill>\n  </a>\n  <div ng-if="gradeInput.shouldShowExempt()" class="grade-input-align left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.exempt</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowOverrideIndicator()" class="left">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.overrideIndicator</span>\n  </div>\n\n  <div ng-if="gradeInput.shouldShowPastDueZeroIndicator()"\n       ng-class="{\'grade-input-align left\': gradeInput.shouldShowPastDueZeroIndicator(), \'left\': !gradeInput.shouldShowPastDueZeroIndicator()}">\n    <span class="override-indicator" bb-translate>components.directives.grade.grade-input.pastDueZero</span>\n  </div>\n\n  <div ng-if="gradeInput.alertScreenReaderNewGrade"\n       bb-ax-alert\n       id="gradeInput.getAriaDescribeById()"\n       class="sr-only"\n       bb-translate translate-values="{grade: gradeInput.gradeDisplayItem.displayValue}">\n    components.directives.grade.grade-input.screenReaderEnteredGrade\n  </div>\n</div>\n'},472364:function(e){e.exports='<ul id="performanceCodes-{{gradeInput.id}}" class="f-dropdown performance-code-options bb-foundation-dropdown-close-esc-override" data-dropdown-content>\n  <li class="performance-option-header" bb-translate>components.directives.grade.grade-input.selectPerformanceCode</li>\n  <li ng-repeat="perfCode in gradeNotations()" bb-click-to-invoke-child="a.performance-code-option">\n    <a href="javascript:void(0);"\n       tabindex="0"\n       role="menuitem"\n       ng-click="gradeInput.clickGradeNotation(perfCode,$event)"\n       class="performance-code-option"\n       analytics-id="directives.gradeInput.selectPerformanceCode.item.link">\n      <span class="code" title="{{perfCode.code}}">{{perfCode.code}}</span>\n      <span class="description" title="{{perfCode.description}}">{{perfCode.description}}</span>\n    </a>\n  </li>\n  <li ng-if="gradeDetail.displayGrade.isOverride" class="undo-override" bb-click-to-invoke-child="button.js-undo-override">\n    <a href="javascript:void(0);"\n       tabindex="0"\n       role="menuitem"\n       class="js-undo-override performance-code-option"\n       ng-click="gradeInput.undoOverride()"\n       analytics-id="directives.grade-input.undoOverride.link">\n      <bb-svg-icon size="small" icon="undo"></bb-svg-icon>\n      <span bb-translate>components.directives.grade.grade-input.undoOverride</span>\n    </a>\n  </li>\n</ul>\n\n'},516322:function(e){e.exports='<bb-modal id="dialog-override-warning-modal" class="notification dialog-override-warning-modal"\n         modal-title-key="components.directives.grade.grade-input.overrideDialogWarning.title"\n         analytics-id-tag-prefix="components.directives.grade.grade-input.overrideDialogWarning"\n         >\n  <div name="modal-contents">\n    <p class="warning-message" bb-translate="components.directives.grade.grade-input.overrideDialogWarning.message" translate-values="{grade}">\n    </p>\n  </div>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button js-cancel" ng-click="closeModal(false)" analytics-id="components.directives.grade.grade-input.overrideDialogWarning.secondaryButtonText">\n      <bb-translate>components.directives.grade.grade-input.overrideDialogWarning.secondaryButtonText</bb-translate>\n  </button>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="closeModal(true)" analytics-id="components.directives.grade.grade-input.overrideDialogWarning.primaryButtonText">\n      <bb-translate>components.directives.grade.grade-input.overrideDialogWarning.primaryButtonText</bb-translate>\n  </button>\n</bb-modal>\n'},743807:function(e){e.exports='<div ng-class="{\'is-restricted\': graderColumn.column.isHidden() && !graderColumn.column.externalGrade, \'grader-column\': true}">\n  <div class="row tabular-row js-row grader-column-item">\n    <div ng-class="{\'medium-5\': !graderColumn.isCourseView, \'medium-4\': graderColumn.isCourseView}" class="columns">\n      <div class="element-card">\n        <div bb-content-item-icon\n          show-alert-icon="graderColumn.showAlertIcon()"\n          content-column="graderColumn.column"\n          class="element-image"\n          ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n          ng-if="graderColumn.column"\n          ng-click="graderColumn.handleColumnClick(\'icon\')"\n          analytics-id="components.directives.grade.graderColumn.icon.link">\n        </div>\n        <div class="element-details">\n          <div ng-class="{\'gradebook-overall-grade-title\': graderColumn.column.externalGrade}">\n            <bb-svg-icon\n              id="{{graderColumn.column.id + \'grade-not-visible-icon\'}}"\n              size="small"\n              ng-if="graderColumn.column.externalGrade && !graderColumn.column.visible"\n              icon="invisible"\n              class="visibility-icon"\n              role="img"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.gradeNotVisible\'}"\n            ></bb-svg-icon>\n            <span class="name ellipse" ng-if="graderColumn.itemLinkIsClickable">\n              <a  class="submission-nav-link"\n                  ng-click="graderColumn.handleColumnClick(\'title\')"\n                  href="javascript:void(0);"\n                  id="{{\'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index}}"\n                  analytics-id="components.directives.grade.graderColumn.name.link"\n                  aria-label="{{graderColumn.attendanceAriaLabel}}"\n                  ng-attr-aria-describedby="{{graderColumn.column.externalGrade && !graderColumn.column.visible ? graderColumn.column.id + \'grade-not-visible-icon\' : undefined}}">\n                  {{graderColumn.column.columnName}}\n              </a>\n            </span>\n          </div>\n          <span class="name ellipsis" ng-if="!graderColumn.itemLinkIsClickable">\n            <span id="{{ \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index }}">{{graderColumn.column.columnName}}</span>\n          </span>\n          <div class="name-controls" ng-if="::!graderColumn.column.isOffline()">\n            <span ng-if="graderColumn.isFormative" bb-feature-toggle="feature.course.content.formative.assessments">\n              <span class="formative-label" bb-translate>components.directives.grade.grader-column.statuses.formative</span>\n              <span class="secondary-text" ng-if="graderColumn.column.summary.numEligibleToBeGraded > 0">|</span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.seemsAttemptBased()">\n              <span ng-if="graderColumn.column.dueDate && graderColumn.numMissingStudents">\n                <span class="items-missing" bb-translate translate-values="{missingCount: graderColumn.numMissingStudents}">components.directives.grade.grader-column.studentsMissing.plural</span>\n                <span ng-if="!graderColumn.column.isOffline()">|</span>\n              </span>\n              <span ng-if="graderColumn.column.summary.numStudentSubmissions && graderColumn.column.summary.numEligibleToBeGraded">\n                <bb-translate ng-if="graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{participatedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsParticipated.plural</bb-translate>\n                <bb-translate ng-if="!graderColumn.column.isDiscussion()" class="submittedCount" translate-values="{submittedCount: graderColumn.column.summary.numStudentSubmissions(), totalCount: graderColumn.column.summary.numEligibleToBeGraded}">components.directives.grade.grader-column.studentsSubmitted.plural</bb-translate>\n              </span>\n            </span>\n            <span class="secondary-text" ng-if="::graderColumn.column.isAttendance() && graderColumn.column.summary.averageGradeForStudents">\n                <span bb-translate translate-values="{percentage: graderColumn.column.summary.averageGradeForStudents}">components.directives.grade.grader-column.attendance.average</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="medium-2 hide-for-small-only">\n      <span ng-if="!!graderColumn.column.gradebookCategory && !graderColumn.column.gradebookCategory.isUserDefined" bb-translate title="{{graderColumn.column.gradebookCategory.localizableTitle.languageKey}}">{{graderColumn.column.gradebookCategory.localizableTitle.languageKey}}</span>\n      <span ng-if="!graderColumn.column.gradebookCategory" bb-translate>NoCategory.name</span>\n      <span class="ellipsis" ng-if="graderColumn.column.gradebookCategory.isUserDefined" bb-translate title="{{graderColumn.column.gradebookCategory.localizableTitle.languageKey}}">{{graderColumn.column.gradebookCategory.title}}</span>\n    </div>\n    <div ng-if="graderColumn.isCourseView" class="date columns medium-2 large-2 hide-for-small-only">\n      <bb-datetime ng-if="!graderColumn.column.isAttendance()" format="Short" value="graderColumn.column.dueDate">\n      </bb-datetime>\n      <span ng-if="graderColumn.column.isAttendance()" bb-translate>components.directives.grade.grader-column.attendance.ongoing</span>\n    </div>\n\n    <div ng-class="{\'grade-status-container columns medium-7\': !graderColumn.isCourseView, \'columns medium-3 course-only-grade-status-container\': graderColumn.isCourseView}">\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="!graderColumn.column.isAttendance()">\n        <div ng-switch="graderColumn.column.isCollectExternalSubmissions()">\n          <!-- External submission statuses are calculated differently from others since the instructor is initiating the attempt\n          when they go to grade the user. Therefore, we want to include people who have no submission as ready to be graded //-->\n          <div ng-switch-when="true">\n            <a ng-switch="graderColumn.column.summary.getStatus().toString()"\n                ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n                ng-click="graderColumn.handleColumnClick(\'status\')"\n                href="javascript:void(0);"\n                analytics-id="components.directives.grade.graderColumn.status.link"\n                tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n                aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' + \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}">\n              <div class="grade-count" ng-switch-when="NEEDS_GRADING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0">\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0"\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <span ng-switch-when="ALL_GRADED">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.allGraded\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon class="grade-progress-icon" size="small" icon="complete" status="success"></bb-svg-icon>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span ng-switch-when="NOTHING_TO_GRADE">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() === 0" bb-translate>\n                  components.directives.grade.grader-column.statuses.nothingToGrade\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="graderColumn.getNumberEligibleToBeGradedExternalSubmissions() > 0" bb-translate\n                      translate-values="{count: graderColumn.getNumberEligibleToBeGradedExternalSubmissions()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </a>\n          </div>\n          <div ng-switch-default>\n            <a ng-if="::!graderColumn.isScorable()"\n               ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n               ng-click="graderColumn.handleColumnClick(\'status\')"\n               href="javascript:void(0);"\n               analytics-id="components.directives.grade.graderColumn.status.link"\n               tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n               aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id_\' + graderColumn.index + \' \' +  \'graderColumn_\' + graderColumn.course.courseId_ + graderColumn.index : undefined}}">\n              <span id="{{ \'grading-status-id_\' + graderColumn.index }}" bb-translate>\n                {{graderColumn.getStatus()}}\n              </span>\n            </a>\n            <a ng-switch="graderColumn.column.summary.getStatus().toString()"\n                ng-if="::graderColumn.showGradeStatusForNonCalculated()"\n                ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n                ng-click="graderColumn.handleColumnClick(\'status\')"\n                href="javascript:void(0);"\n                analytics-id="components.directives.grade.graderColumn.status.link"\n                tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n                aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' +  \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}">\n              <div class="grade-count js-grade-progress-needs-grading" ng-switch-when="NEEDS_GRADING">\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="::graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.column.summary.numStudentsNeedsGrading}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" ng-if="::!graderColumn.column.isOffline()"\n                      bb-translate translate-values="{count: graderColumn.getNumberOfSubmissionsNeedsGrading()}">\n                  components.directives.grade.grader-column.statuses.numToGrade.plural\n                </span>\n              </div>\n              <span ng-switch-when="NEEDS_POSTING" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <span class="js-grade-progress-all-graded" ng-switch-when="ALL_GRADED" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allGraded</span>\n              <div class="grade-progress-complete" ng-switch-when="ALL_POSTED">\n                <bb-svg-icon class="grade-progress-icon" size="small" icon="complete" status="success"></bb-svg-icon>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.allPosted</span>\n              </div>\n              <span class="js-grade-progress-nothing-to-show" ng-switch-when="NOTHING_TO_GRADE" id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.nothingToGrade</span>\n              <div class="grade-progress-restricted" ng-switch-when="RESTRICTED">\n                <bb-button-complex-tooltip></bb-button-complex-tooltip>\n                <span id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}" bb-translate>components.directives.grade.grader-column.statuses.restricted</span>\n              </div>\n            </a>\n            <div ng-if="::graderColumn.column.isCalculated()"><!-- Needed for spacing --></div>\n          </div>\n        </div>\n      </div>\n      <div class="grade-progress" ng-class="{\'columns medium-7 course-only-grade-status\': graderColumn.isCourseView}" ng-if="graderColumn.column.isAttendance()">\n        <a ng-class="{\'submission-nav-link\': graderColumn.itemLinkIsClickable}"\n          ng-click="graderColumn.handleColumnClick(\'status\')"\n          href="javascript:void(0);"\n          analytics-id="components.directives.grade.graderColumn.status.link"\n          tabindex="{{ graderColumn.itemLinkIsClickable ? 0 : -1 }}"\n          aria-labelledby="{{ graderColumn.itemLinkIsClickable ? \'grading-status-id\' + \'_\' + graderColumn.index + \' \' + \'graderColumn_\' + graderColumn.course.courseId + \'_\' + graderColumn.index : undefined}}"\n          id="{{ \'grading-status-id\' + \'_\' + graderColumn.index }}"\n          bb-translate>\n            components.directives.grade.grader-column.attendance.markAttendance\n        </a>\n      </div>\n      <div class="grade-status" ng-class="{\'columns medium-5 course-only-grade-status\': graderColumn.isCourseView}">\n        <div ng-if="::!graderColumn.column.isCalculated()">\n          <div ng-if="!graderColumn.course.isComplete() && graderColumn.column.summary.hasGradesToPost() && graderColumn.canPostGrades" class="post">\n            <button class="button button--secondary send-grade" bb-confirmation-needed="{{graderColumn.grade.getPostAllGradeConfirmationNeededStringsKey(graderColumn.column)}}"\n                    modal-aria-type="alertdialog" show-type="always" ng-click="graderColumn.postGrades()"\n                    bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.postGrades\'}"\n                    translate-attrs-values="{courseName: graderColumn.course.name, columnName: graderColumn.column.columnName}"\n                    bb-translate="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGradesWithLocalizedCount\' : \'components.directives.grade.grader-column.actions.basePostGradesWithLocalizedCount\'}}"\n                    translate-values="{count : graderColumn.column.summary.totalNumberOfGradesToPost()}"\n                    analytics-id="{{graderColumn.isCourseView ? \'components.directives.grade.grader-column.actions.postGradesWithLocalizedCount\' : \'components.directives.grade.grader-column.actions.basePostGradesWithLocalizedCount\'}}" >\n            </button>\n          </div>\n        </div>\n        <div ng-if="::graderColumn.column.isCalculated()"><!-- Needed for spacing --></div>\n      </div>\n    </div>\n    <div ng-if="(graderColumn.showOverflowMenu || graderColumn.showDragControls) && !graderColumn.isRestrictedGroupContent"\n        class="columns medium-1 large-1 last-row-item item-controls dots" bb-foundation-defer>\n\n      <!-- disable if its a group and has user is not entitled -->\n      <button bb-drag-handle ng-if="graderColumn.showDragControls"\n              drag-item-id="{{::graderColumn.column.id}}"\n              drag-item-name="{{graderColumn.column.columnName}}"\n              class="super-clear small button icon js-drag-handle drag-drop-button"\n              bb-translate-attrs="{\'aria-label\': \'components.directives.grade.grader-column.aria-label.reorder-grader-item\', \'title\': \'components.directives.grade.grader-column.aria-label.move-tip\'}"\n              translate-attrs-values="{columnName: graderColumn.column.columnName}"\n              analytics-id="components.directives.grade.graderColumn.reorderItem.button" >\n        <bb-svg-icon size="small" icon="move-item-up-down"></bb-svg-icon>\n      </button>\n\n      <!-- disable if its a group and has user is not entitled -->\n      <div ng-if="graderColumn.showOverflowMenu" class="overflow-menu-container right">\n        <bb-overflow-menu element-id="{{graderColumn.overflowMenuId}}"\n                          element-name="{{graderColumn.column.columnName}}"\n                          menu-items="graderColumn.getOverflowMenuItems()"\n                          analytics-id-tag-prefix="components.directives.grade.grader-column.overflowMenu">\n        </bb-overflow-menu>\n         <send-reminders-dialog show-dialog="graderColumn.showReminderModal"\n                                course-id="graderColumn.course.id"\n                                column-id="graderColumn.column.id"\n                                dialog-callback="graderColumn.resetShowModal"\n                                is-group="graderColumn.column.groupContent"\n                                num-students-not-submitted="graderColumn.getStudentsNoSubmissionCount()"\n         ></send-reminders-dialog>\n      </div>\n    </div>\n  </div>\n\n  <div ng-if="graderColumn.showConversionMessage">\n    <bb-course-access-alert course="course"\n                            alert-type="graderColumn.getAlertType()"\n                            confirm-callback="graderColumn.closeConversionTooltip()"\n                            timeout-callback="graderColumn.closeConversionTooltip()">\n    </bb-course-access-alert>\n  </div>\n</div>\n<bb-add-content-button\n                      position-after="graderColumn.column.id" item-name="graderColumn.column.columnName"\n                      context-area="graderColumn.contextArea"\n                      ng-if="graderColumn.isCourseView && !graderColumn.course.isComplete() && graderColumn.canModify"\n                      show-add-attendance="attendanceIsAvailable() && !attendanceColumnExists()">\n</bb-add-content-button>\n'},71486:function(e){e.exports="<div\n  ng-class=\"{'validation-error' : showError()}\"\n  ng-transclude>\n</div>\n"},138138:function(e){e.exports='<bb-modal class="notification automatic-zero-setting-confirmation"\n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZeroSettings">\n  <div name="modal-contents">\n    <!-- Instructions -->\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n    <!-- Past due zero: Unassign zero -->\n    <div ng-if="!pastDueZero.isPastZeroAssigned">\n      <fieldset ng-if="modalTranslateOptions.choices && modalTranslateOptions.choices.length > 0"\n                class="fieldset-options">\n        <legend class="sr-only" bb-translate="{{ modalTranslateOptions.title.key }}"></legend>\n        <div class="option-item" ng-repeat="option in modalTranslateOptions.choices">\n          <input type="radio" \n                 name="{{ ::option.name }}" \n                 id="{{ ::option.id }}"\n                 ng-model="modalTranslateOptions.choiceModal"\n                 ng-value="option.value"\n                 analytics-id="components.directives.grade.pastDueZero.option.input.radio">\n          <label for="{{ ::option.id }}" bb-translate>{{ ::option.localizedKey }}</label>\n          <p ng-if="!!option.descriptionKey"\n             class="past-due-unassign-description"\n             bb-translate>\n            {{ ::option.descriptionKey }}\n          </p>\n        </div>\n      </fieldset>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="{{modalTranslateOptions.confirm.key}}"\n          bb-translate>\n    {{modalTranslateOptions.confirm.key}}\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="{{modalTranslateOptions.cancel.key}}"\n          bb-translate>\n    {{modalTranslateOptions.cancel.key}}\n  </button>\n</bb-modal>'},753811:function(e){e.exports='<bb-modal class="notification automatic-zero-confirmation" \n          modal-translate-options="modalTranslateOptions"\n          modal-aria-type="alertdialog"\n          analytics-id-tag-prefix="components.directives.pastDueZero">\n  <div name="modal-contents">\n    <!-- Instructions -->\n    <p bb-translate>{{ modalTranslateOptions.instructions.key }}</p>\n  </div>\n  <button name="modal-footer-button-primary" \n          type="button" \n          class="button confirm-ok js-primary-button" \n          ng-click="okAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.confirm"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.confirm\n  </button>\n  <button name="modal-footer-button-secondary" \n          type="button" \n          class="button button--secondary confirm-cancel js-secondary-button" \n          ng-click="cancelAction()" \n          analytics-id="course.grades.pastDue.confirmationNeeded.cancel"\n          bb-translate>\n          course.grades.pastDue.confirmationNeeded.cancel\n  </button>\n</bb-modal>'},632991:function(e){e.exports='<div class="rb-grid-container" ng-style="container.getContainerStyle()" role="grid">\n  <div class="rb-ax-focus-placeholder sr-only" tabindex="-1"></div>\n  <div class="rb-grid-header-wrapper">\n    <div class="rb-grid-header">\n      <div class="rb-grid-canvas" ng-style="container.getHeaderCanvasStyle()" role="rowgroup">\n        <div class="rb-row rb-header-row" ng-class="::container && {\'rb-row-border\': container.headerBorder} || undefined" role="row">\n          <div rb-grid-cell="col.headerTemplate"\n               class="rb-cell rb-header-cell"\n               ng-class="[\'rb-col-\' + col.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n               role="columnheader"\n               ng-repeat="col in container.renderedColumns track by col.id"\n               ng-click="container.callbacks.header($event)"\n               analytics-id="components.directives.gridContainer.header.{{::col.id}}.button">\n            <div class="rb-add-column-placeholder" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event, col)"></div>\n          </div>\n          <div class="rb-add-column-placeholder first" ng-if="::container.canAddColumn()" ng-mouseenter="container.columnAdder.enter($event)"></div>\n        </div>\n      </div>\n    </div>\n    <div ng-if="container.hasVScrollbar" class="rb-grid-scrollbar-placeholder-y"></div>\n  </div>\n  <div class="rb-grid-body" ng-style="container.getBodyStyle()">\n    <div class="rb-grid-canvas" ng-style="container.getBodyCanvasStyle()" role="rowgroup">\n      <div class="rb-row rb-cell-row" ng-repeat="row in container.renderedRows track by $index" role="row"\n          ng-class="[\'rb-row-position-\' + row.id, container && {\'rb-row-border\': container.rowBorder} || undefined]">\n        <div rb-grid-cell="col.cellTemplate"\n             class="rb-cell"\n             ng-class="[\'rb-col-\' + col.id, \'rb-row-\' + row.id, \'rb-column-position-\' + col.id, {\'rb-cell-border\': col.border}]"\n             role="gridcell"\n             ng-repeat="col in container.renderedColumns track by $index"\n             ng-click="container.callbacks.cell($event)"\n             analytics-id="components.directives.gridContainer.callback"\n        ></div>\n      </div>\n    </div>\n  </div>\n  <div ng-if="!container.hasHScrollbar" class="rb-grid-scrollbar-placeholder-x"></div>\n  <div class="rb-add-column" ng-if="::container && container.canAddColumn()">\n    <div class="column-header-button-wrapper" ng-mouseleave="container.columnAdder.leave()">\n      <a class="small button clear icon button-add-content hide"\n         href="javascript:void(0);"\n         ng-click="container.columnAdder.onClick($event)"\n         role="button"\n         aria-haspopup="true"\n         analytics-id="components.directives.grade.grid.addBtuAriaLabel.link">\n        <span class="sr-only" bb-translate>components.directives.grade.grid.addBtuAriaLabel</span>\n      </a>\n    </div>\n  </div>\n</div>\n'},455385:function(e){e.exports='<div class="rb-grid">\n  <style scoped id="rb-grid"></style>\n  <style scoped id="rb-grid-rows-initial-position"></style>\n\n  <div ng-if="grid.containers.left" rb-grid-container="left" id="rb-grid-container-left"></div>\n\n  <div rb-grid-container="center"></div>\n\n  <div ng-if="grid.containers.right" rb-grid-container="right"></div>\n\n  <div ng-transclude></div>\n\n</div>\n'},401418:function(e){e.exports='<span class="group-count-directive" bb-load-bundle="components/directives/group/group-count">\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="!$ctrl.isSelfEnrollment()">components.directives.group-count.groups.plural</bb-translate>\n  <bb-translate translate-values="{number: $ctrl.content.assignedGroups.length}"\n                ng-if="$ctrl.isSelfEnrollment()">components.directives.group-count.groups.selfEnroll.plural</bb-translate>\n</span>\n'},443367:function(e){e.exports='<div class="group-student-self-enroll-directive" bb-load-bundle="components/directives/group/group-student-enrollment">\n  <div ng-if="$ctrl.content.assignedGroups.length > 0">\n    <span ng-if="!$ctrl.isOpenEnrollment()" class="ellipse title">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </span>\n    <a ng-if="$ctrl.isSelfEnrollment && $ctrl.isOpenEnrollment()" class="self-enroll-link js-self-enroll-link"\n       href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()"\n       analytics-id="components.directives.group-student-enrollment.groupTitle.link">\n      {{$ctrl.content.assignedGroups[0].groupTitle}}\n    </a>\n  </div>\n  <span ng-if="!($ctrl.content.assignedGroups.length > 0) && !$ctrl.isSelfEnrollment" class="ellipse title" bb-translate\n        translate-values="{title: components.directives.group-student-enrollment.unknown}">\n    components.directives.group-student-enrollment.unknown\n  </span>\n  <div ng-if="!($ctrl.content.assignedGroups.length > 0) && $ctrl.isSelfEnrollment">\n    <div ng-if="$ctrl.isOpenEnrollment()">\n      <a href="javascript:void(0);" ng-click="$ctrl.openContentEnrollPanel()" class="self-enroll-link js-self-enroll-link"\n         bb-translate analytics-id="components.directives.group-student-enrollment.self-enroll-to-participate">components.directives.group-student-enrollment.self-enroll-to-participate</a>\n    </div>\n    <div ng-if="$ctrl.isBeforeEnrollment()" class="self-enroll-date" translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-starts</div>\n    <div ng-if="$ctrl.isOpenEnrollmentWithEnding()" class="self-enroll-date"\n         ng-class="{\'is-important\': $ctrl.selfEnrollGroupInfo.isEnrollmentDateImportant}"\n         translate-values="{time: $ctrl.selfEnrollGroupInfo.relativeDate}"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closes</div>\n    <div ng-if="$ctrl.isAfterEnrollment()" class="self-enroll-date"\n         bb-translate>components.directives.group-student-enrollment.enrollment-closed</div>\n  </div>\n</div>\n'},915996:function(e){e.exports='<!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded -->\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        tabindex="-1"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},788815:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  <!-- htmlhint:analytics-id:enable -->\n</bb-modal>'},705665:function(e){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},443331:function(e){e.exports='<span ng-switch on="$ctrl.iconName" class="overflow-menu-icon">\n  <bb-ui-icon-small-course-complete ng-switch-when="course-complete"></bb-ui-icon-small-course-complete>\n  <bb-ui-icon-small-notes ng-switch-when="notes"></bb-ui-icon-small-notes>\n  <bb-ui-icon-small-safe-assign ng-switch-when="safe-assign"></bb-ui-icon-small-safe-assign>\n  <bb-ui-icon-small-numbered-list ng-switch-when="numbered-list"></bb-ui-icon-small-numbered-list>\n  <bb-ui-icon-small-exempt ng-switch-when="exempt"></bb-ui-icon-small-exempt>\n  <bb-svg-icon ng-switch-default size="small" icon="{{::$ctrl.iconName}}" status="{{::$ctrl.status}}"></bb-svg-icon>\n</span>\n'},948806:function(e){e.exports='<button ng-if="!overflowMenu.isSingleMode() && overflowMenu.menuItems.length > 0"\n        ng-show="overflowMenu.show()"\n        ng-disabled="isDisabled()"\n        class="overflow-menu-button"\n        data-dropdown="{{elementId}}-menu-icon-dropdown"\n        data-options="{{::overflowMenu.menuDirection}}"\n        aria-haspopup="true"\n        title="{{overflowMenu.getButtonAriaLabel()}}"\n        ng-click="overflowMenu.showMenu=true"\n        aria-label="{{overflowMenu.getButtonAriaLabel()}}"\n        analytics-id="{{analyticsIdTagPrefix}}.showMenu.button">\n  <bb-svg-icon size="small" icon="menu"></bb-svg-icon>\n</button>\n\n<!--Single mode toggle button-->\n<button ng-if="overflowMenu.isSingleMode() && overflowMenu.menuItems.length > 0"\n        ng-show="overflowMenu.singleMenuItem.show()"\n        ng-click="overflowMenu.showMenu=true; overflowMenu.singleMenuItem.onClick()"\n        ng-disabled="isDisabled()"\n        class="overflow-menu-button"\n        bb-click-focus="{{overflowMenu.singleMenuItem.hasConfirmation() ? \'\' : overflowMenu.singleMenuItem.bbClickFocus}}"\n        data-dropdown="{{elementId}}-menu-icon-dropdown"\n        data-options="{{::overflowMenu.menuDirection}}"\n        aria-haspopup="true"\n        title="{{overflowMenu.singleMenuItem.ariaLabel()}}"\n        aria-label="{{overflowMenu.singleMenuItem.ariaLabel()}}"\n        analytics-id="{{analyticsIdTagPrefix}}.showSingleMenu.button">\n  <bb-svg-icon size="small" icon="{{overflowMenu.singleMenuItem.icon}}" status="{{overflowMenu.singleMenuItem.status}}"></bb-svg-icon>\n</button>\n\n<!--Menu -->\n<div id="{{::elementId}}-menu-icon-dropdown" ng-if="overflowMenu.showMenu" ng-show="overflowMenu.show()" class="f-dropdown f-dropdown-overflow-menu"\n     data-dropdown-content aria-autoclose="false">\n  <!--Menu item list-->\n  <ul ng-show="!overflowMenu.isSingleMode()"\n      class="js-menu-item-list"\n      ng-class="{\'with-option-text\': overflowMenu.hasOptionText(), \'ignore-accordion\': overflowMenu.ignoreAccordion()}"\n      role="menu">\n    <li ng-repeat="menuItem in overflowMenu.menuItems | filter:overflowMenu.visibleMenuItemsFilter track by menuItem.id"\n      bb-click-to-invoke-child="a.js-menu-item-link"\n      custom-attributes="{{ ::menuItem.addAdditionalAttributes() }}"\n      id="{{ ::menuItem.id + \'_li\' }}"\n      role="menuitem">\n      <a href="javascript:void(0);"\n         ng-if="!menuItem.disable()"\n         class="js-menu-item-link"\n         id="{{::menuItem.id}}"\n         ng-click="menuItem.onClick()"\n         bb-click-focus="{{menuItem.hasConfirmation() ? \'\' : menuItem.bbClickFocus}}"\n         aria-label="{{menuItem.ariaLabel()}}"\n         ng-keydown="overflowMenu.onOptionKeydown($event)"\n         analytics-id="{{::overflowMenu.buildAnalyticsId(menuItem)}}">\n        <!-- Icon -->\n        <bb-overflow-menu-icon icon-name="{{menuItem.icon}}" status="{{menuItem.status}}"></bb-overflow-menu-icon>\n        <!-- Label -->\n        <span bb-translate>{{::menuItem.labelKey}}</span>\n        <p ng-if="::menuItem.textKey" class="option-text" bb-translate>{{::menuItem.textKey}}</p>\n      </a>\n      <a href="javascript:void(0);"\n         ng-if="menuItem.disable()"\n         class="js-menu-item-link disable"\n         ng-click="menuItem.onClick()"\n         aria-disabled="true"\n         tabindex="-1"\n         bb-tooltip\n         enhanced-tooltip="true"\n         tooltip-position="bottom"\n         title="{{menuItem.disableInfo}}"\n         analytics-id="{{analyticsIdTagPrefix}}.{{::menuItem.labelKey}}.disabled.link">\n        <!-- Icon -->\n        <bb-overflow-menu-icon icon-name="{{menuItem.icon}}" status="{{menuItem.status}}"></bb-overflow-menu-icon>\n        <!-- Label -->\n        <span bb-translate>{{::menuItem.labelKey}}</span>\n        <p ng-if="::menuItem.textKey" class="option-text" bb-translate>{{::menuItem.textKey}}</p>\n        <span class="sr-only">{{menuItem.disableInfo}}</span>\n      </a>\n    </li>\n  </ul>\n\n  <!-- Confirmation - shows when the corresponding button is pressed from the menu -->\n  <div role="alertdialog"\n       aria-label="{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.titleKey)}}"\n       ng-repeat="menuItem in overflowMenu.confirmationNeededMenuItems"\n       ng-show="menuItem.show()" id="{{::menuItem.confirmationId}}"\n       class="menu-icon-confirmation"\n       ng-class="{\'menu-icon-confirmation-single-mode\': overflowMenu.isSingleMode()}">\n    <h1 aria-describedby="{{::(\'overflow-confirmation-instructions\' + menuItem.confirmationId)}}"\n        bb-focus="menuItem.isConfirmationMenuVisible()"\n        ng-blur="menuItem.blur()"\n        keep-trigger-focus="true">{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.titleKey)}}</h1>\n    <p id="{{\'overflow-confirmation-instructions\' + menuItem.confirmationId}}">{{overflowMenu.getTextByKey(menuItem.options.confirmationOptions.instructionsKey)}}</p>\n    <div class="choice" ng-show="menuItem.hasChoices()" ng-repeat="choice in menuItem.options.confirmationOptions.choices">\n      <input id="{{choice.key + elementId}}"\n             ng-disabled="choice.isDisable"\n             ng-model="choice.value"\n             type="checkbox"\n             ng-keydown="overflowMenu.onOptionKeydown($event)"\n             analytics-id="{{analyticsIdTagPrefix}}.isDisabled.input.checkbox"/>\n      <label for="{{choice.key + elementId}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n    <hr>\n    <div class="menu-icon-confirmation-footer">\n      <button class="button button--secondary"\n              ng-click="menuItem.onCancel()"\n              analytics-id="{{analyticsIdTagPrefix}}.cancel.button">\n        <span bb-translate>global.cancel</span>\n      </button>\n      <button class="button js-delete-confirm"\n              ng-click="menuItem.onConfirm($event)"\n              bb-click-focus="{{::menuItem.bbClickFocus}}"\n              analytics-id="{{analyticsIdTagPrefix}}.confirm.button">\n        <span bb-translate>{{::menuItem.options.comfirmLabelKey || menuItem.labelKey}}</span>\n      </button>\n    </div>\n  </div>\n</div>\n'},257549:function(e){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},322648:function(e){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},752436:function(e){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},356604:function(e){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.radioGroupName }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>\n'},248713:function(e){e.exports='<div class="complex-statistic-contents"></div>'},435776:function(e){e.exports='<div class="simple-statistic-contents" ng-class="::item().cssClass">\n  <div bb-tooltip enhanced-tooltip="true" data-tooltip-on-overflow-only="true" title="{{ ::item().data }}">\n    <div class="stat-data"\n         ng-attr-aria-label="{{ item().aria ? item().aria : undefined }}"\n         data-ng-bind-html="::item().trusted"\n         data-ellipsis></div>\n  </div>\n  <div ng-if="::item().subtext" class="stat-sub-text" bb-translate>{{ ::item().subtext }}</div>\n  <div ng-if="::!item().subtext && item().reserveSubtextSpace" class="stat-sub-text" aria-hidden="true">&nbsp;</div>\n</div>'},341010:function(e){e.exports='<div class="bb-statistics">\n  <ul class="statistics-list total-items-{{::statistics.total}} small-per-row-{{::statistics.smallPerRow}} large-per-row-{{::statistics.largePerRow}}">\n    <li ng-repeat="item in statistics.config">\n      <div class="statistics-item-container" ng-class="{\'no-default-padding\': item.noDefaultPadding, \'full-height\': !item.complexScope}">\n        <div class="stat-title" ng-attr-title="{{ item.hover ? item.hover : undefined }}" bb-translate>{{::item.title}}</div>\n        <div ng-if="::!item.complexScope" bb-simple-statistic item="::item"></div>\n        <div ng-if="::item.complexScope" bb-complex-statistic item="::item"></div>\n      </div>\n    </li>\n  </ul>\n</div>'},666137:function(e){e.exports='<div class="submission-card" ng-class="{\'is-late\': isLate, \'inline\': inline}" bb-load-bundle="components/directives/submission-card">\n  <div class="panel" ng-class="{\'clickable-panel\': clickable}">\n    <bb-ui-icon-large-assignments class="submission-card__icon" ng-if="!inline" color="{{::submissionCard.showLateIcon ? \'error\' : \'inherit\'}}"></bb-ui-icon-large-assignments>\n    <div class="info" ng-class="{\'completed\': submissionCard.attempt.isCompleted(), \'rubric-icon-spacing\': submissionCard.shouldExpandForRubricIcon()}">\n      <span class="name ellipsis" bb-translate ng-if="!inline">{{title}}</span>\n      <span class="detail">\n        <span class="test-status ellipsis" ng-show="!!status">\n          <span class="inline-status" ng-if="inline && !hasAttempt && showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.late\n          </span>\n          <span class="inline-status" ng-if="inline && !hasAttempt && !showLate" bb-translate>\n            components.directives.submission-card.outlineStatus.new\n          </span>\n          <span ng-if="inline && !hasAttempt"> - </span>\n          <span bb-translate class="status">{{status}}</span>\n          <bb-datetime class="date" format="Short" ng-if="submissionCard.attempt" value="::submissionCard.attempt.attemptDate"></bb-datetime>\n          <bb-datetime class="date" format="Short" ng-if="!submissionCard.attempt && gradingColumn.dueDate" value="::gradingColumn.dueDate"></bb-datetime>\n        </span>\n      </span>\n    </div>\n    <div class="grade-container">\n      <ng-switch on="gradeDetail.isPosted()">\n        <bb-display-grade ng-switch-when="true"\n                          grade-detail="gradeDetail"\n                          column="gradingColumn"\n                          display-type="GradeColor"\n                          show-rubric-button="showRubricButton()"\n                          show-rubric-div="showRubricDiv()"></bb-display-grade>\n        <bb-display-grade ng-switch-default\n                          attempt="submissionCard.attempt"\n                          display-type="AttemptStatus"></bb-display-grade>\n      </ng-switch>\n    </div>\n  </div>\n</div>\n'},541103:function(e){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},753861:function(e){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},953471:function(e){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},83652:function(e){e.exports='<div class="telemetry-panel">\n\n  <div id="discussion-insights" class="panel-content discussion-insights" bb-foundation-defer>\n\n    <div class="insights">\n      <div class="insight-summary row collapse summary-box">\n        <div class="column small-12">\n          <bb-statistics\n            config="statisticsConfig"\n            ng-if="isLoaded"\n            small-per-row="1"\n            large-per-row="4"></bb-statistics>\n        </div>\n      </div>\n\n      <div class="participation-chart-container">\n        <div class="bar-chart">\n          <span class="participated"\n                aria-label="{{barchartParticipants}}"\n                title="{{barchartParticipants}}"></span>\n          <span class="opened"\n                aria-label="{{barchartOpenedNonParticipants}}"\n                title="{{barchartOpenedNonParticipants}}"></span>\n          <span class="unopened"\n                aria-label="{{barchartNonParticipants}}"\n                title="{{barchartNonParticipants}}"></span>\n        </div>\n        <div class="legend">\n          <div class="participatedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentParticipatedCaption)"></div>\n          <div class="openedCaption" data-ng-bind-html="discussionInsights.getSafeHtml(percentOpenedCaption)"></div>\n        </div>\n      </div>\n\n      <div class="non-participant-groups row" ng-if="displayNonParticipantGroups">\n        <div class="column small-12 non-participant-box clearfix" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title"\n              bb-translate="components.directives.discussion.insights.groupNonParticipants"\n              translate-values="{count: totalNonParticipants}"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n\n          <div class="group-nonparticipants" ng-repeat="nonParticipantGroup in nonParticipantGroups track by nonParticipantGroup.id">\n            <div class="group-heading child-is-invokable" bb-click-to-invoke-child="a.group-link">\n              <a class="group-link"\n                 href="javascript:void(0);"\n                 ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 analytics-id="components.directives.discussion.insights.nonParticipantGroup.link">\n                {{nonParticipantGroup.name}}\n              </a>\n            </div>\n            <div class="nonparticipant-in-group-container"\n                 ng-class="nonParticipantGroup.total > 3 ? \'space-evenly\' : \'set-margin\' ">\n              <div class="nonparticipant-in-group child-is-invokable"\n                   bb-click-to-invoke-child="a.group-non-participant-link"\n                   ng-repeat="nonParticipant in nonParticipantGroup.nonParticipants | limitTo: 4 track by nonParticipant.id">\n                <bb-avatar class="nonparticipant-in-group-avatar" user="nonParticipant"></bb-avatar>\n                <a class="group-non-participant-link"\n                   href="javascript:void(0);"\n                   aria-label="{{nonParticipant.localizedName}}"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipant.link">\n                  {{nonParticipant.localizedName}}\n                </a>\n              </div>\n            </div>\n            <div class="count-link">\n              <a ng-click="discussionInsights.goToDiscussion(nonParticipantGroup.id)"\n                 ng-show="nonParticipantGroup.hidden > 0"\n                 href="javascript:void(0);"\n                 bb-translate="components.directives.discussion.insights.moreLink"\n                 translate-values="{count: nonParticipantGroup.hidden}"\n                 analytics-id="components.directives.discussion.insights.moreLink">\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="non-participants row" ng-show="(displayNonParticipants || displayNonParticipantGroup)">\n        <div class="column small-12 non-participant-box clearfix" ng-if="showLargeNonparticipantPanel" bb-foundation-defer>\n          <h3 class="stat-title large-non-participants-title" bb-translate="components.directives.discussion.insights.nonParticipants"></h3>\n          <div class="float-right">\n            <button class="button super-clear message-all-non-participants-button"\n                type="button"\n                ng-click="discussionInsights.goToMessageAll()"\n                bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageNonParticipants\'}"\n                translate-attrs-values="{count: totalNonParticipants}"\n                analytics-id="components.directives.discussion.insights.messageNonParticipants.button">\n              <bb-ui-icon-medium-messages></bb-ui-icon-medium-messages>\n            </button>\n          </div>\n          <ul class="non-participant-list clearfix">\n            <li class="non-participant child-is-invokable"\n                bb-click-to-invoke-child="a.non-participant-link"\n                tabindex="-1"\n                ng-show="showNonparticipant[$index]"\n                ng-repeat="nonParticipant in nonParticipants | limitTo: 18 track by nonParticipant.id">\n              <div class="non-participant-cell"\n                   ng-class="{\'show-focus-outline\': discussionInsights.isFocusedNonparticipant(nonParticipant.id)}">\n                <a class="non-participant-link hide-focus-outline"\n                   bb-translate-attrs="{\'aria-label\': nonParticipant.localizedNameWithoutWrap}"\n                   id="non-participant-link-{{nonParticipant.id}}"\n                   tabindex="0"\n                   href="javascript:void(0);"\n                   ng-focus="true"\n                   ng-blur="true"\n                   ng-click="discussionInsights.goToMessage(nonParticipant.id)"\n                   analytics-id="components.directives.discussion.insights.nonParticipantLink.link">\n                  <bb-avatar class="non-participant-avatar" user="nonParticipant.avatarData"></bb-avatar>\n                </a>\n                <span ng-if="!discussionInsights.isPreferedNameBoth(nonParticipant)" class="byline stacked" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.localizedName)"></span>\n\n                <div ng-if="discussionInsights.isPreferedNameBoth(nonParticipant)">\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.otherName)"></span>\n                  <span class="byline stacked stacked-other-name" ng-bind-html="discussionInsights.getSafeHtml(nonParticipant.fullName)"></span>\n                </div>\n              </div>\n            </li>\n          </ul>\n          <label class="summary-line">{{nonParticipationSummary}}</label>\n        </div>\n        <div class="column small-12 non-participant-box clearfix" ng-if="!showLargeNonparticipantPanel">\n          <h3 class="stat-title subheader">{{barchartNonParticipants}}</h3>\n          <button class="messageAllButton button"\n                  bb-translate="components.directives.discussion.insights.messageAll"\n                  bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.messageAll\'}"\n                  ng-click="discussionInsights.goToMessageAll()"\n                  analytics-id="components.directives.discussion.insights.messageAll">\n          </button>\n        </div>\n      </div>\n\n      <div class="row equal-height" ng-if="displayTopComments || displayTopParticipants">\n        <div class="top-comments column {{topCommentsColumns}} student-list-box" ng-if="displayTopComments">\n          <h3 class="stat-title subheader"\n              id="most-replies-heading"\n              bb-translate="components.directives.discussion.insights.mostReplies"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-comment-row child-is-invokable"\n                 bb-click-to-invoke-child="a.discussion-link"\n                 ng-class="{\'last\':$last}"\n                 ng-repeat="comment in topComments | limitTo: numberOfCommentsToDisplay | orderBy: \'-numReplies\'">\n              <a href="javascript:void(0);"\n                 class="discussion-link"\n                 ng-click="discussionInsights.goToDiscussion(comment.user.group.id)"\n                 aria-labelledby="comment-user-{{comment.user.id}} most-replies-heading"\n                 aria-describedby="comment-message-{{comment.user.id}}\n                 comment-replies-{{comment.user.id}}"\n                 analytics-id="components.directives.discussion.insights.goToDiscussion.link">\n                <bb-avatar class="top-participant-avatar" user="comment.user.avatarData"></bb-avatar>\n                <div class="comment-info">\n                  <div class="comment-message ellipsis" id="comment-message-{{comment.user.id}}">{{comment.message}}</div>\n                  <div class="byline ellipsis">\n                    <span id="comment-user-{{comment.user.id}}">\n                      <bb-translate>components.directives.discussion.insights.by</bb-translate> {{comment.user.localizedName}}\n                      <span ng-show="isGroupDiscussion"><bb-translate>components.directives.discussion.insights.inGroup</bb-translate> {{comment.user.group.name}}</span>\n                    </span> |\n                    <span id="comment-replies-{{comment.user.id}}"> {{comment.numReplies}} <bb-translate>components.directives.discussion.insights.replies</bb-translate></span>\n                  </div>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="top-participants column {{topParticipantColumns}} student-list-box" ng-if="displayTopParticipants">\n          <h3 id="top-heading" class="stat-title subheader" bb-translate="components.directives.discussion.insights.topParticipants"></h3>\n          <div class="tabular-list-container">\n            <div class="tabular-row top-participants-row child-is-invokable"\n                 bb-click-to-invoke-child="a.grading-panel-link"\n                 ng-class="{\'last\':$last, \'not-graded\': (!isGradable || isGroupDiscussion), \'group-row\':isGroupDiscussion}"\n                 ng-repeat="participant in topParticipants | limitTo: numberOfCommentsToDisplay | orderBy: \'-numComments\'">\n              <a href="javascript:void(0);"\n                 class="grading-panel-link"\n                 aria-labelledby="user-{{participant.user.id}} top-heading"\n                 aria-describedby="span-replies-{{participant.user.id}} span-feedback-{{participant.user.id}}"\n                 ng-class="{\'not-graded\': (!isGradable || isGroupDiscussion)}"\n                 ng-click="discussionInsights.goToGrade(participant.user.id)"\n                 analytics-id="components.directives.discussion.insights.goToGrade.link">\n                <bb-avatar class="comment-avatar" user="participant.user.avatarData"></bb-avatar>\n                <div class="top-participant-info ellipsis" ng-class="{\'not-graded\': !isGradable}">\n                  <span class="discussion-insights-heading" id="user-{{participant.user.id}}">{{participant.user.localizedName}}</span><br>\n                  <span class="ellipsis" ng-show="isGroupDiscussion">{{participant.user.group.name}}</span><br ng-show="isGroupDiscussion">\n                  <span class="byline" id="span-feedback-{{participant.user.id}}">\n                    <bb-svg-icon class="top-participant-icon" size="small" icon="feedback" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.feedback\'}"></bb-svg-icon>\n                    {{participant.numComments}}\n                  </span>\n                  <span class="byline" id="span-replies-{{participant.user.id}}">\n                  <bb-svg-icon class="top-participant-icon" size="small" icon="replies" bb-translate-attrs="{\'aria-label\': \'components.directives.discussion.insights.replies\'}"></bb-svg-icon>\n                    {{participant.numReplies}}\n                  </span>\n                </div>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div ui-view="telemetry-discussion-forum-insights-base@"></div>\n  </div>\n</div>\n'},334136:function(e){e.exports='<div>\n  <!-- Display a loading spinner if page is rendering -->\n  <div class="telemetry-loading-anim" ng-if="telemetryPanelHeader.showSpinner">\n    <div class="spinner bb-secondary-color-2"/>\n  </div>\n  <header class="panel-header simple-header">\n    <div class="panel-titles-container">\n      <div class="panel-sub-title">{{ ::course().name }}</div>\n      <div class="black-header-contents">\n        <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                type="button"\n                analytics-id="components.directives.telemetry.panel.menu.button">\n          <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n          <span class="sr-only" bb-translate>components.directives.telemetry.panel.menu</span>\n        </button>\n        <h1 class="panel-title" ng-if="::titleKey" bb-translate>{{::titleKey}}</h1>\n        <h1 class="panel-title" ng-if="title">{{::title}}</h1>\n        <!-- BUTTON 2 (displayed to the left of Button 1) -->\n        <button ng-if="buttonTwoIcon" id="button-two"\n                aria-haspopup="true"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonTwoAriaLabel,\'title\': buttonTwoTitle}"\n                ng-click="buttonTwoCallback()"\n                ng-class="{ \'active\': mobileStudentListVisible }"\n                analytics-id="components.directives.telemetry.panel.buttonwTwo.button">\n          <i class="{{ ::buttonTwoIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonTwoTitle</span>\n        </button>\n        <!-- BUTTON 1 (displayed on the far right) -->\n        <button ng-if="buttonOneIcon"\n                id="button-one"\n                class="standard-button dark-background hide-for-large-up"\n                bb-translate-attrs="{\'aria-label\': buttonOneAriaLabel,\'title\': buttonOneTitle}"\n                ng-click="buttonOneCallback()"\n                analytics-id="components.directives.telemetry.panel.buttonOne.button">\n          <i class="{{ ::buttonOneIcon }}"></i>\n          <span class="sr-only" bb-translate>buttonOneTitle</span>\n        </button>\n      </div>\n    </div>\n  </header>\n</div>\n'},17233:function(e){e.exports='<div class="typeahead-search" bb-click-outside="typeaheadSearchBox.onClickOutside()" is-active="true" bb-load-bundle="components/directives/typeahead">\n  <label for="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}">\n    <bb-svg-icon ng-if="::typeaheadSearchBox.icon" icon="{{::typeaheadSearchBox.icon}}" size="small" class="magnifying-glass"></bb-svg-icon>\n    <span ng-if="::typeaheadSearchBox.srLabel" class="sr-only" bb-translate="{{::typeaheadSearchBox.srLabel}}"></span>\n  </label>\n  <input aria-describedby="requiredPrompt" type="text" id="typeahead-search-box-{{::typeaheadSearchBox.randomElementId}}"\n         ng-model="typeaheadSearchBox.searchValue"\n         ng-model-options="{ debounce: 250 }"\n         role="combobox"\n         aria-activedescendant="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-0"\n         aria-autocomplete="list"\n         aria-owns="typeahead-search-autocomplete"\n         name="typeaheadSearchBox"\n         autocomplete="off"\n         ng-keydown="typeaheadSearchBox.onInputBoxKeyDown($event)"\n         ng-click="typeaheadSearchBox.onInputBoxClick($event)"\n         ng-change="typeaheadSearchBox.onSearchValueChange()"\n         ng-focus="typeaheadSearchBox.onFocusInputBox($event)"\n         bb-translate-attrs="{\'placeholder\': \'{{typeaheadSearchBox.inputPlaceholder}}\'}"\n         class="truncated"\n         ng-class="{\'not-empty with-clear-btn\': typeaheadSearchBox.searchValue, \'empty\': !typeaheadSearchBox.searchValue,\n                    \'with-icon\': typeaheadSearchBox.icon, \'is-active\': typeaheadSearchBox.isFocus}"\n         analytics-id="components.directives.typeheadSearchBox.input.text"/>\n    <button class="typeahead-clear-button" bb-translate-attrs="{\'aria-label\': \'{{typeaheadSearchBox.clearAriaLabel}}\'}"\n            tabindex="0"\n            ng-show="typeaheadSearchBox.searchValue"\n            ng-click="typeaheadSearchBox.clear()"\n            ng-focus="typeaheadSearchBox.onFocusClearBtn($event)"\n            ng-blur="typeaheadSearchBox.onBlurClearBtn($event)"\n            analytics-id="components.directives.typeheadSearchBox.clearAriaLabel.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  <span id="requiredPrompt" class="sr-only" bb-translate="{{::typeaheadSearchBox.srEmptyResults}}"></span>\n  <div id="typeahead-search-autocomplete" class="typeahead-search-autocomplete adding"\n       ng-if="typeaheadSearchBox.showResults"\n       role="listbox"\n       tabindex="-1">\n    <div class="typeahead-search-entry" ng-repeat="item in typeaheadSearchBox.searchResults"\n         role="option"\n         tabindex="-1"\n         id="typeahead-result-{{::typeaheadSearchBox.randomElementId}}-{{$index}}"\n         ng-keydown="typeaheadSearchBox.onResultEntryKeyDown($event, item)"\n         ng-click="typeaheadSearchBox.onResultEntryClick($event, item)"\n         analytics-id="components.directives.typeheadSearchBox.onResultEntryClick">\n      <typeahead-inject></typeahead-inject>\n    </div>\n  </div>\n</div>'},88782:function(e){e.exports='<div class="typeahead-selected-options" ng-class="{\'empty\': selectedOptions.length === 0}" bb-load-bundle="components/directives/typeahead">\n  <ul bb-translate-attrs="{ \'aria-label\': selectedOptionsListLabel }">\n    <li ng-repeat="option in selectedOptions">\n      <span>{{::option.displayName}}</span>\n      <button class="button button--text"\n              ng-click="typeaheadSelectedOptions.removeOption(option)"\n              bb-translate-attrs="{ \'aria-label\': \'typeahead.typeahead-options.remove\' }"\n              translate-attrs-values="{ displayName: option.displayName }"\n              analytics-id="components.directives.typeaheadSelectedOptions.removeOption.button">\n        <bb-svg-icon size="small" icon="clear" />\n      </button>\n    </li>\n  </ul>\n</div>'},334890:function(e){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},3149:function(e){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},44417:function(e){e.exports='<bb-ui-username\n  ng-if="un.user"\n  class="bb-ui-username"\n  user="un.user"\n  format="un.format"\n  show-pronouns="un.showPronouns"\n  show-pronunciation="un.showPronunciation"\n  subtext="{{ un.showInlineUsername ? user.userName : undefined }}"\n  on-username-click="onUsernameClick"\n></bb-ui-username>\n<span\n  ng-if="un.user"\n  class="sr-only username-accommodation-content"\n>\n  <span class="username-has-accommodation">{{ un.textAccommodation }}</span>\n</span>\n'},248171:function(e){e.exports='<!-- Onsubmit Errors first -->\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n</script>\n\n<!-- Errors -->\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span class="js-error-date" bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n</script>\n\n<!-- Immediate Errors -->\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span role="status" aria-live="polite" bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n</script>\n\n<!-- Warnings -->\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span role="status" aria-live="polite" bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n</script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude class="js-error-message"></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},57218:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},499574:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-aria-type="alertdialog"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-enough-submissions">\n  <div name="modal-contents">\n    <p bb-translate>{{::descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},956065:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},919191:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},980311:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-discussion-due-date.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-discussion-due-date">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-discussion-due-date.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.error-discussion-due-date.ok"\n          bb-translate>global.ok</button>\n</bb-modal>\n'},2491:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},445178:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.information</p>\n    </div>\n    <div>\n      <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n    </div>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},768188:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},207274:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},411886:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>\n'},491146:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-too-long.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-too-long">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-too-long.description</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},511403:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},677993:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n    <bb-session-debug-modal-button></bb-session-debug-modal-button>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>\n'},860870:function(e){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},371607:function(e){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},687102:function(e){e.exports="<div ng-transclude></div>"},900805:function(e){e.exports='<bb-modal class="notification proctoring-modal" analytics-id-tag-prefix="components.services.proctoring">\n  <div name="modal-contents">\n    <p bb-translate>{{::requirementsText}}</p>\n    <p ng-bind-html="::downloadText"></p>\n    <p bb-translate>{{::browserText}}</p>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          role="button"\n          class="button js-primary-button proctoring-modal-button"\n          ng-click="$parent.$dismiss()"\n          bb-translate-attrs="{\'aria-label\':\'components.services.proctoring.modal.continue\'}"\n          analytics-id="components.services.proctoring.modal.continue.button"\n  >\n  <!-- htmlhint:analytics-id:enable -->\n    <bb-translate>components.services.proctoring.modal.continue</bb-translate>\n  </button>\n</bb-modal>\n'},909588:function(e){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},780012:function(e){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},79743:function(e){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},222994:function(e){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},212374:function(e){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <!-- htmlhint:analytics-id:disable -->\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  <!-- htmlhint:analytics-id:enable -->\n</bb-modal>'},16797:function(e){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},540229:function(e){e.exports='<bb-modal class="notification" modal-title-key="course.content.assessment.alreadySubmitted.title"\n  analytics-id-tag-prefix="course.content.assessment.alreadySubmitted">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.alreadySubmitted.backend</p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); customClose();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},292352:function(e){e.exports='<bb-modal class="notification"\n  modal-title-key="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.label"\n  analytics-id-tag-prefix="course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed">\n  <div name="modal-contents">\n    <p bb-translate>course.content.assessment.settings.dueDate.isLateAttemptCreationDisallowed.restriction.description\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(); assessmentOverview.navigateAttemptReview();"\n    class="button confirm-ok js-primary-button ng-scope" bb-translate\n    analytics-id="course.content.groupAttempt.edit.alreadySubmitted.dismiss">\n    course.content.groupAttempt.edit.alreadySubmitted.dismiss\n  </button>\n</bb-modal>\n'},643014:function(e){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},487741:function(e){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.grades.settings.categorySettings.deleteAlert.title\'}"\n          modal-title-key="course.grades.settings.categorySettings.deleteAlert.title"\n          analytics-id-tag-prefix="course.grades.settings.categorySettings.deleteAlert">\n  <div name="modal-contents">\n    <bb-translate>course.grades.settings.categorySettings.deleteAlert.content</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$dismiss()" \n          class="button js-primary-button"\n          analytics-id="course.grades.settings.categorySettings.deleteAlert.ok.button">\n    <span bb-translate="course.grades.settings.categorySettings.deleteAlert.ok-button"></span>\n  </button>\n</bb-modal>'},253429:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': {{::gradesUploadSettings.completedModalTitleKey}}}"\n          modal-title-key="{{::gradesUploadSettings.completedModalTitleKey}}" aria-describedby="course-is-complete"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n    <div name="modal-contents">\n        <p id="course-is-complete" bb-translate="course.grades.grades-upload-settings.courseComplete.content" course-org-token-resolver></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkCourseComplete\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettings.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},657995:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.failedToUpload.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.failedToUpload.title" aria-describedby="failed-to-upload"\n          analytics-id-tag-prefix="course.grades.gradesUploadSettingsFailed">\n<div name="modal-contents">\n    <p id="failed-to-upload" translate-values="{ count: failedItemsCount, errorItems: failedItems }"\n       bb-translate="course.grades.grades-upload-settings.failedToUpload.content.plural"></p>\n</div>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button failed-to-upload-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsFailed.closeButton.button">\n      <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},472690:function(e){e.exports='<bb-modal role="alertdialog" class="notification gradebook-upload-failed-modal upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.wrongDelimiter.title\'}" \n    modal-title-key="course.grades.grades-upload-settings.wrongFormat.title" aria-describedby="wrong-format-content"\n    analytics-id-tag-prefix="course.grades.gradesUploadSettingsWrongFormat">\n    <div name="modal-contents">\n        <p id="wrong-format-content" bb-translate="course.grades.grades-upload-settings.wrongFormat.content"></p>\n    </div>\n    <a name="modal-footer-help-link" \n       href="" \n       bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n       target="_blank" \n       bb-translate="course.grades.grades-upload-settings.helpButton" \n       rel="noopener noreferrer"\n       analytics-id="course.grades.grades-upload-settings.helpButton">\n    </a>\n    <button name="modal-footer-button-primary" \n            class="button js-discard-changes js-primary-button" \n            ng-click="$dismiss()"\n            analytics-id="course.grades.gradesUploadSettingsWrongFormat.closeButton.button">\n        <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n    </button>\n</bb-modal>'},842461:function(e){e.exports='<bb-modal role="alertdialog" class="notification upload-disallowed-file-type upload-failed-button" bb-translate-attrs="{\'aria-label\': \'course.grades.grades-upload-settings.fileTypeError.title\'}" \n          modal-title-key="course.grades.grades-upload-settings.fileTypeError.title" aria-describedby="gradebook-upload-failed"\n          analytics-id-tag-prefix="course.grades.grades-upload-settings">\n  <div name="modal-contents">\n    <p id="gradebook-upload-failed" bb-translate="course.grades.grades-upload-settings.fileTypeError.content"></p>\n  </div>\n  <a name="modal-footer-help-link" \n     href="" \n     bb-translate-attrs="{\'href\': \'course.grades.grades-upload-settings.helpLinkUpload\'}" \n     target="_blank" \n     bb-translate="course.grades.grades-upload-settings.helpButton" \n     rel="noopener noreferrer"\n     analytics-id="course.grades.grades-upload-settings.helpButton">\n  </a>\n  <button name="modal-footer-button-primary" \n          class="button js-discard-changes js-primary-button" \n          ng-click="$dismiss()"\n          analytics-id="course.grades.gradesUploadSettingsError.closeButton.button">\n    <span bb-translate="course.grades.grades-upload-settings.closeButton"></span>\n  </button>\n</bb-modal>'},54647:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-custom-preview-user-avatar",use:"icon-custom-preview-user-avatar-usage",viewBox:"0 0 32 32",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="icon-custom-preview-user-avatar"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 32c8.8366 0 16-7.1634 16-16S24.8366 0 16 0 0 7.1634 0 16s7.1634 16 16 16z" fill="#262626" /><mask id="icon-custom-preview-user-avatar_a" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="32" height="32"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 32c8.8366 0 16-7.1634 16-16S24.8366 0 16 0 0 7.1634 0 16s7.1634 16 16 16z" fill="#fff" /></mask><g mask="url(#icon-custom-preview-user-avatar_a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M29.4646 30.5387c-3.0097-1.5321-7.4116-3.3031-7.4116-3.3031s-2.623-.9978-2.4683-3.4905a.1503.1503 0 01.055-.1062c1.4104-1.1554 2.3973-2.9592 2.6358-5.0377a.1383.1383 0 01.0154-.0493 3.2863 3.2863 0 00.0424-.0821c.0045-.0088.0087-.0182.0131-.0271.5819.0993 1.2652-.7788 1.614-1.9925.3603-1.254.3187-2.2582-.3563-2.2582a1.387 1.387 0 00-.0498.0009c-.091.0035-.1631-.0756-.1537-.1661.1532-1.4719.1515-2.6399.1514-2.6457v-.0003c0-4.1815-3.3917-7.5712-7.5756-7.5712-4.1839 0-7.5756 3.3897-7.5756 7.5712 0 0-.0022 1.1699.1513 2.6451.0095.0908-.0633.1662-.1547.1661h-.0017c-.675 0-.7167 1.0043-.3563 2.2582.3401 1.1836.9986 2.0499 1.5707 2.0001.0033.0065.0063.0131.0096.0197.014.0278.028.0548.0422.0814a.1388.1388 0 01.0156.0505c.2415 2.1016 1.2473 3.9228 2.683 5.0765a.1506.1506 0 01.0565.1092c.1223 2.4613-2.47 3.4481-2.47 3.4481s-4.402 1.771-7.4116 3.3031C-.1307 31.896-.0376 34.985.0183 35.6724a.1496.1496 0 00.1496.1372h31.6643a.1494.1494 0 00.1495-.1373c.056-.6874.149-3.7764-2.5171-5.1336" fill="#666" /></g></symbol>'});r.add(s),e.exports=s},798245:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-custom-toggle-grid",use:"icon-custom-toggle-grid-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-grid"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12M1 12V0M6 12V0M11 12V0" /></symbol>'});r.add(s),e.exports=s},42745:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-custom-toggle-table",use:"icon-custom-toggle-table-usage",viewBox:"0 0 12 12",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12" id="icon-custom-toggle-table"><path fill="none" stroke-width="2" stroke-miterlimit="10" d="M0 1h12M0 6h12M0 11h12" /></symbol>'});r.add(s),e.exports=s},290108:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-add-feedback",use:"icon-medium-add-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-add-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM12 6v10M7 11h10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},619066:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},373055:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-conversation",use:"icon-medium-conversation-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-conversation"><path d="M4.5 18C6.433 18 8 16.433 8 14.5S6.433 11 4.5 11 1 12.567 1 14.5 2.567 18 4.5 18zM9 23c.2624-2.4862-1.873-5-4.5-5M23 7.5c0 3.5899-2.9101 6.5-6.5 6.5-1.0821 0-2.1025-.2644-3-.7322L11 15l.5-3.3464C10.5633 10.5273 10 9.0794 10 7.5 10 3.9101 12.9101 1 16.5 1S23 3.9101 23 7.5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},782803:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});r.add(s),e.exports=s},334284:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-download",use:"icon-medium-download-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-download"><path d="M12 15V1M8 11l4 4 4-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 7v16h22V7h-4M1 7h4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},691385:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-feedback",use:"icon-medium-feedback-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-feedback"><path d="M1 1h22v19h-8l-3 3-3-3H1V1zM6 6h12M6 9h12M6 12h12M6 15h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},530644:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-groups",use:"icon-medium-groups-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-groups"><g clip-path="url(#icon-medium-groups_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 23.0644C17.3246 21.1155 14.8704 20 12 20s-5.3246 1.1155-7 3.0644M12 20c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8z" /><path d="M23 11s-1-3-4.5-3c-2.1456 0-3.3517 1.1274-3.9639 2M5.5 8C3.567 8 2 6.433 2 4.5S3.567 1 5.5 1 9 2.567 9 4.5 7.433 8 5.5 8zM1 11s1-3 4.5-3c2.1456 0 3.3517 1.1274 3.9639 2" /></g><defs><clipPath id="icon-medium-groups_clip0"><path d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});r.add(s),e.exports=s},577421:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-information",use:"icon-medium-information-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-information"><path d="M12 23c6.0751 0 11-4.9249 11-11S18.0751 1 12 1 1 5.9249 1 12s4.9249 11 11 11z" stroke-width="2" /><path d="M12 6.5a.5.5 0 100-1 .5.5 0 000 1z" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 9h2v9M10 18h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},555873:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-people",use:"icon-medium-people-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-people"><path d="M1 23c1.096-4.3157 4.5473-7 9-7s7.904 2.6843 9 7M10 16c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8zM23 12c-.2345-1.9862-2.5-4-4.5-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},248952:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-programs",use:"icon-medium-programs-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-programs"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 3h6v20h-6zM9 7h8v16H9zM1 1h8v22H1zM1 19h8M1 5h8M12 11h2M12 19h2M17 19h6M20 7v3" /></symbol>'});r.add(s),e.exports=s},236259:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-settings",use:"icon-medium-settings-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-settings"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4277 6.2062l-2.779.674a8.3399 8.3399 0 00-1.7651-1.7008l.5771-2.8038a.4939.4939 0 00-.3024-.5594l-1.9855-.7817a.4933.4933 0 00-.6028.2026l-1.4904 2.444a8.2935 8.2935 0 00-2.4509.0405L9.0563 1.333a.4956.4956 0 00-.6098-.1818l-1.9568.8509a.4934.4934 0 00-.2827.5703l.674 2.778a8.3417 8.3417 0 00-1.7018 1.7651l-2.8038-.5761a.4946.4946 0 00-.5594.3024l-.7817 1.9855a.495.495 0 00.2026.6028l2.444 1.4894a8.3611 8.3611 0 00.0406 2.4509l-2.3887 1.5734a.4952.4952 0 00-.1809.6098l.851 1.9568a.4938.4938 0 00.5692.2827l2.779-.6741a8.3178 8.3178 0 001.7652 1.7019l-.5772 2.8028a.4936.4936 0 00.3034.5594l1.9845.7827a.4946.4946 0 00.6029-.2026l1.4903-2.4441a8.3594 8.3594 0 002.451-.0405l1.5724 2.3877a.4943.4943 0 00.6097.1819l1.9569-.8509a.4953.4953 0 00.2836-.5703l-.674-2.7791a8.3321 8.3321 0 001.7008-1.7641l2.8038.5772a.4948.4948 0 00.5594-.3034l.7817-1.9855a.4938.4938 0 00-.2026-.6029l-2.444-1.4893a8.298 8.298 0 00-.0405-2.451l2.3887-1.5733a.4936.4936 0 00.1808-.6098l-.8509-1.9559a.4944.4944 0 00-.5693-.2836z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 16c-2.2057 0-4-1.7943-4-4s1.7943-4 4-4 4 1.7943 4 4-1.7943 4-4 4z" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},803420:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-upload",use:"icon-medium-upload-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-upload"><path d="M12 1v14M1 7v16h22V7h-4M1 7h4-4zM8 5l4-4 4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},507110:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-accessibility",use:"icon-small-accessibility-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accessibility"><path d="M8 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM3 6l5 1 5-1M3 15l5-5 5 5M8 7v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},85677:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},754811:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-add-feedback",use:"icon-small-add-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM8 4v6M11 7H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},411463:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},691249:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-ally-alt-formats",use:"icon-small-ally-alt-formats-usage",viewBox:"0 0 16 17",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" id="icon-small-ally-alt-formats"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 16.5l8-13 8 13h-4s-.5-3-4-3-4 3-4 3H0zm8-4c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" fill="#262626" /><path d="M16 3.5l-3 5-3-5h2v-3h2v3h2z" fill="#262626" /></symbol>'});r.add(s),e.exports=s},961209:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-ally-indicator-unscored",use:"icon-small-ally-indicator-unscored-usage",viewBox:"0 0 16 17",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 17" id="icon-small-ally-indicator-unscored"><path d="M7 11.6667c0 .4602.4477.8333 1 .8333s1-.3731 1-.8333L8 7.5l-1 4.1667z" stroke-width="2" stroke-linejoin="round" /><path d="M2 11.5H1v-1c0-3.866 3.134-7 7-7s7 3.134 7 7v1h-1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 3.5v1M13.25 6l-1 1M3.75 7l-1-1" stroke-width="2" stroke-linecap="round" /></symbol>'});r.add(s),e.exports=s},131476:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-arrow-down",use:"icon-small-arrow-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-arrow-down"><path d="M1 4l7 7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},751410:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-attendance",use:"icon-small-attendance-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attendance"><path d="M15 15V2H1v13h14zM4.5 1v1h7V1h-7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 9l2 2 4-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},134059:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});r.add(s),e.exports=s},547648:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-calculation",use:"icon-small-calculation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calculation"><path d="M4 2v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="10" cy="10" r=".5" /><circle cx="14" cy="14" r=".5" /><path d="M2 10l4 4M2 14l4-4M14 10l-4 4M14 4h-4M6 4H2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},996987:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},900189:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-chat",use:"icon-small-chat-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-chat"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},267749:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-clear",use:"icon-small-clear-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-clear"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM10 6l-4 4M6 6l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},388634:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},104981:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},473611:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-complete",use:"icon-small-complete-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-complete"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 8l2 3 4-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},789029:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-conversation",use:"icon-small-conversation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-conversation"><path d="M15 4.5C15 6.433 13.433 8 11.5 8c-.4457 0-.872-.0833-1.264-.2352L8 8l.25-2.1985A3.4905 3.4905 0 018 4.5C8 2.567 9.567 1 11.5 1S15 2.567 15 4.5zM7 15c0-2-2-4-4-4M3 11c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},706288:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},424651:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-discussion",use:"icon-small-discussion-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-discussion"><path d="M15 8c0 3.866-3.134 7-7 7a6.983 6.983 0 01-2.528-.4704L1 15l.5-4.3969C1.1775 9.7984 1 8.9199 1 8c0-3.866 3.134-7 7-7s7 3.134 7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="5" cy="8" r=".5" /><circle cx="8" cy="8" r=".5" /><circle cx="11" cy="8" r=".5" /></symbol>'});r.add(s),e.exports=s},60499:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-documents",use:"icon-small-documents-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-documents"><path d="M1 4h7.0084L11 7v8H1V4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8.0005 4v3h3.0015M4 8h1M4 11h3.9722" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 1h11v12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},322766:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-download",use:"icon-small-download-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-download"><path d="M4 4H1v11h14V4h-3M8 1v11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 10l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},196407:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-draw",use:"icon-small-draw-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-draw"><path d="M15 4l-3-3L2 11l-1 4 4-1L15 4zM12 6l-2-2M6 12l-2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},377192:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-export",use:"icon-small-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-export"><path d="M7 9l8-8M12 1h3v3M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},670848:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-feedback",use:"icon-small-feedback-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-feedback"><path d="M1 1h14v12h-4l-3 2-3-2H1V1zM4 4h8M4 7h8M4 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},77073:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-filter-options",use:"icon-small-filter-options-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-filter-options"><path d="M1 1h8M1 5h8M1 9h8M1 13h5M13 1v14M11 13l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},422866:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-groups",use:"icon-small-groups-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-groups"><path d="M12 15s-1-2-4-2M4 15s1-2 4-2M8 13c1.6569 0 3-1.3431 3-3S9.6569 7 8 7s-3 1.3431-3 3 1.3431 3 3 3zM12 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2zM1 7s1-2 3-2 3 2 3 2M9 7s1-2 3-2 3 2 3 2M4 5c1.1046 0 2-.8954 2-2s-.8954-2-2-2-2 .8954-2 2 .8954 2 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},503359:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-import-export",use:"icon-small-import-export-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-import-export"><path d="M15 9.091V15H1V1h5.909" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 7v3h3M12 1h3v3M6 10l9-9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},491393:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-information",use:"icon-small-information-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-information"><circle cx="8" cy="8" r="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M7 7h1v4M6 11h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="4" r=".5" /></symbol>'});r.add(s),e.exports=s},538966:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-invisible",use:"icon-small-invisible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-invisible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5zM1 13L15 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},312488:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},11908:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-main-menu",use:"icon-small-main-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-main-menu"><path d="M1 3h14M15 8H1M1 13h14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},610091:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-menu",use:"icon-small-menu-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-menu"><circle cx="2" cy="8" r="1" stroke-width="2" /><circle cx="8" cy="8" r="1" stroke-width="2" /><circle cx="14" cy="8" r="1" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},193874:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-messages",use:"icon-small-messages-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-messages"><path d="M1 3h14v10H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 3l7 7 7-7M1 13l5-5M15 13l-5-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},192494:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-move-item-up-down",use:"icon-small-move-item-up-down-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-move-item-up-down"><path d="M5 11V3M7 4L5 2 3 4M11 5v8M9 12l2 2 2-2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},77216:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-peer-review",use:"icon-small-peer-review-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-peer-review"><path d="M6.5 10C7.8807 10 9 8.8807 9 7.5S7.8807 5 6.5 5 4 6.1193 4 7.5 5.1193 10 6.5 10zM6.5 10C3.2288 10 1 12.5 1 15M11.5 6C12.8807 6 14 4.8807 14 3.5S12.8807 1 11.5 1 9 2.1193 9 3.5 10.1193 6 11.5 6zM12 6c.7226 0 1.4451.464 2 1.0569M10 13l2 2 3-5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},214003:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-post",use:"icon-small-post-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-post"><path d="M9 15L1 9l14-8-6 14zM5 12L15 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 12v3l1.5-1.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},563699:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-question-analysis",use:"icon-small-question-analysis-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-question-analysis"><path d="M11 1H5l1 2v4l-5 8h14l-5-8V3l1-2zM4.125 10h7.75" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},749838:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-replies",use:"icon-small-replies-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-replies"><path d="M1 5h14v10H1v-4" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 3L1 5l2 2" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},384906:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-report",use:"icon-small-report-usage",viewBox:"0 0 16 16",content:'<symbol viewBox="0 0 16 16" aria-hidden="true" id="icon-small-report"><path fill="currentColor" stroke="transparent" d="M2 0c-.5523 0-1 .4477-1 1v14c0 .5523.4477 1 1 1h6c.5523 0 1-.4477 1-1s-.4477-1-1-1H3V2h10v6c0 .5523.4477 1 1 1s1-.4477 1-1V1c0-.5523-.4477-1-1-1H2z" /><path fill="currentColor" stroke="transparent" d="M5 3c.5523 0 1 .4477 1 1v4c0 .5523-.4477 1-1 1s-1-.4477-1-1V4c0-.5523.4477-1 1-1zm4 3c0-.5523-.4477-1-1-1s-1 .4477-1 1v2c0 .5523.4477 1 1 1s1-.4477 1-1V6zm2 0c.5523 0 1 .4477 1 1v1c0 .5523-.4477 1-1 1s-1-.4477-1-1V7c0-.5523.4477-1 1-1zm-6 4c-.5523 0-1 .4477-1 1s.4477 1 1 1h3c.5523 0 1-.4477 1-1s-.4477-1-1-1H5z" /><path fill="currentColor" stroke="transparent" fill-rule="evenodd" d="M13 10c-1.6569 0-3 1.3431-3 3s1.3431 3 3 3 3-1.3431 3-3-1.3431-3-3-3zm-1 3c0-.5523.4477-1 1-1s1 .4477 1 1-.4477 1-1 1-1-.4477-1-1z" clip-rule="evenodd" /></symbol>'});r.add(s),e.exports=s},487600:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-rubric",use:"icon-small-rubric-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-rubric"><path d="M11 12h4v3h-4v-3zM4 12h4v3H4v-3zM1 12v3M1 5v3M11 5h4v3h-4V5zM4 5h4v3H4V5zM8 1H4M15 1h-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},284407:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-search",use:"icon-small-search-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-search"><circle cx="6.5" cy="6.5" r="5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 15l-4.5-4.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},88501:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-started",use:"icon-small-started-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-started"><circle cx="8" cy="8" r="7" transform="rotate(-90 8 8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 8H4s0 4 4 4 4-4 4-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10.8247 9a3.594 3.594 0 01-.2191.5528c-.1907.3814-.461.7323-.8478.9901C9.3773 10.7966 8.825 11 8 11c-.825 0-1.3773-.2034-1.7578-.4571-.3868-.2578-.657-.6087-.8478-.9901A3.5857 3.5857 0 015.1754 9h5.6493z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},747604:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-trash",use:"icon-small-trash-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-trash"><path d="M4 4l2-3h4l2 3M2 5l1 10h10l1-10M1 4h14M8 7v5M11 7l-.5 5M5 7l.5 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},969685:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-undo",use:"icon-small-undo-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-undo"><path d="M3 3L1 5l2 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5h11c2 0 3 2.0474 3 4s-1 4-3 4H4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},496275:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-visible",use:"icon-small-visible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-visible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},30467:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966),Object.defineProperty(t,"__esModule",{value:!0}),t.LearnFetchFoundationsTokenContextRequest=t.LearnRefreshFoundationsTokenRequest=t.LearnFetchFoundationsTokenRequest=void 0;let i=n(25264);class r extends i.LearnApiPostWithoutBodyRequest{constructor(){super("/v1/foundationsToken")}}t.LearnFetchFoundationsTokenRequest=r;class s extends i.LearnApiPostRequest{constructor(){super("/v1/foundationsToken/refresh")}}t.LearnRefreshFoundationsTokenRequest=s;class o extends i.LearnApiGetRequest{constructor(){super("/v1/foundationsToken/context")}}t.LearnFetchFoundationsTokenContextRequest=o},108715:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966),Object.defineProperty(t,"__esModule",{value:!0}),t.foundationsTokenContext=t.foundationsTokenRefresh=t.foundationsTokenFetch=void 0;let i=n(482532),r=n(30467);async function s(e){let t=new r.LearnFetchFoundationsTokenRequest().withSession(e);return(0,i.fetchJsonApiResult)(t)}async function o(e,t){let n=new r.LearnRefreshFoundationsTokenRequest().withSession(e).withBody(t);return(0,i.fetchJsonApiResult)(n)}async function a(e){let t=new r.LearnFetchFoundationsTokenContextRequest().withSession(e);return(0,i.fetchJsonApiResult)(t)}t.foundationsTokenFetch=s,t.foundationsTokenRefresh=o,t.foundationsTokenContext=a},587963:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966),Object.defineProperty(t,"__esModule",{value:!0});let i=n(122970);i.__exportStar(n(30467),t),i.__exportStar(n(108715),t)},45797:function(e,t,n){"use strict";n(163273),n(625506),n(56164),n(721966),Object.defineProperty(t,"__esModule",{value:!0})},73719:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" xml:space="preserve"><path fill="#C26FD2" d="M3 3.5V34c0 2.2 1.8 4 4 4h22c2.2 0 4-1.8 4-4V3.5H3z"/><path fill="#955CA1" d="M33 7H6.5A3.51 3.51 0 0 1 3 3.5 3.51 3.51 0 0 1 6.5 0H33v7z"/><path fill="#955CA1" d="M7 3.5H3V34c0 2.2 1.8 4 4 4V3.5z"/><path fill="#DFF1FF" d="M3.164 4.5C3.599 5.938 4.925 7 6.5 7H33V2H6.5C4.925 2 3.599 3.062 3.164 4.5z"/><path fill="#D498DF" d="M32 1v5H6.5C5.122 6 4 4.878 4 3.5S5.122 1 6.5 1H32m1-1H6.5C4.575 0 3 1.575 3 3.5S4.575 7 6.5 7H33V0z"/><path fill="#DFF1FF" d="M32 2h1v4h-1z"/><path fill="none" stroke="#C4DAE8" stroke-linecap="round" stroke-miterlimit="10" d="M7.5 4.5h25"/><path fill="#955CA1" d="M31 1h2v1h-2zM9.022 4h4.312v2H9.022z"/><path fill="#7B5080" d="M27.82 32.431h-1.026c.119-.186.206-.395.206-.631V7h-8.01v22.462l6.211 3.377c.149.086.315.129.486.146v.008h.063c.016.001.032.007.05.007.012 0 .021-.006.033-.007h1.988v-.562zm-2.018-.432L25.8 32l.002-.001z"/><path fill="#7B5080" d="M11 7h-1v24.8c0 .63.493 1.134 1.111 1.182v.011h.056c.012 0 .021.007.033.007.017 0 .034-.006.051-.007h1.018v-.265h-.266L19 28.924l.014.008V7H11zm.201 25-.004-.001.004.001zm.105-.031c-.004.003-.009.002-.014.004.005-.002.01-.001.014-.004L19 27.785l-7.694 4.184z"/><path fill="#965CA1" d="M28 7H11v24.8a1.202 1.202 0 0 0 1.799 1.039L20 28.924l7.201 3.916A1.201 1.201 0 0 0 29 31.8V7h-1zM12.055 31.928zm.142.071.004.001H12.2l-.003-.001zM20 27.785l-7.694 4.184c-.004.003-.009.002-.014.004.005-.002.009-.001.014-.004L20 27.785l7.694 4.184c.004.003.009.002.014.004-.004-.002-.009-.001-.014-.004L20 27.785zM27.799 32l.004-.001-.004.001zm.123-.05.023-.022a.12.12 0 0 1-.023.022z"/><path fill="#C26FD2" d="m20.006 14 1.547 3.135 3.46.502-2.504 2.44.591 3.446-3.094-1.627-3.094 1.627.591-3.446L15 17.637l3.459-.502z"/><path fill="#FFF" d="M23.101 24.022a.49.49 0 0 1-.232-.058l-2.862-1.505-2.861 1.505a.5.5 0 0 1-.725-.527l.547-3.186-2.314-2.256a.5.5 0 0 1 .276-.854l3.199-.465 1.431-2.899c.168-.34.729-.34.896 0l1.432 2.899 3.199.465a.5.5 0 0 1 .276.854l-2.314 2.256.547 3.186a.5.5 0 0 1-.495.585zm-3.095-2.627c.08 0 .16.02.232.058l2.198 1.155-.42-2.446a.5.5 0 0 1 .145-.443l1.777-1.732-2.457-.356a.5.5 0 0 1-.376-.273l-1.1-2.227-1.099 2.227a.5.5 0 0 1-.376.273l-2.457.356 1.777 1.732c.118.115.172.28.145.443l-.42 2.446 2.197-1.155a.513.513 0 0 1 .234-.058z"/><path fill="#C26FD2" d="M28.984 7H11.022l-2-3h17.962z"/><path fill="none" stroke="#C4DAE8" stroke-linecap="round" stroke-miterlimit="10" d="M7.5 2.5h25"/></svg>'},132458:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 250 250"><path fill="#521E00" d="M47 173c8-1 16 1 23 2 14 2 75 3 90 3 2-35 2-71-3-107-36 1-75 2-111 5 2 2-3 41-2 45 0 17 3 34 3 52Z"/><path fill="#D7B08F" d="m57 47 2-2 3-1 112-9-11 26-6 11-13 1c-17 3-35 1-52 0l-26 1c-5 0-17 3-20 2-3-7 8-23 11-29ZM6 198l128 17c11-13 18-24 27-38-1 1-74-1-104-2-7 0-14-2-21 2-10 8-19 15-30 21Z"/><path fill="#F6AC3D" d="M52 168c-4 3-8 6-8 10v2l2 1c4 2 9-1 13-3 11-5 21-11 31-18-1 1-8-5-9-5-4-2-6-1-9 1-7 3-14 7-20 12Zm37 26v1l1 1h9c3-1 5-4 7-6 6-5 11-12 16-18l-13-3c-3-1-5 0-7 3-6 6-10 14-13 22Z"/><path fill="#F6AC3D" d="M160 93c-2-1-20 3-23 2-9 0-18-4-24-11l-4-7-1-9c-1-8-3-15-6-23l-1-2-2 1-5 5-7 10-3 3H64l-4-1c-2 0-4-3-6-5-3-3-7-6-11-7-2 8-2 16 0 24l-1 6c-3 4-3 20-3 24 7 35 33 55 66 66 9 3 19 5 28 5l-5 8v3h1c3 1 6-2 8-4l11-9 4-2 13-5c1-1-2-70-5-72Z"/><path fill="#DA80A0" d="m99 55 2-1 2 3a59 59 0 0 1-1 10c-3 1-9 2-9-2-1-3 5-8 6-10Zm-53 3h1l1-1 5 4 2 6v1c-3 1-7 4-9 2V58Z"/><path fill="#D7B08F" d="M239 72c6 13 5 83 6 93-28 2-68 9-85 10l1-32c1-9-4-71-4-71 1-2 19-2 24-2a1242 1242 0 0 1 58 2Z"/><path stroke="#521E00" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="m160 178-24 38c-1 1-106-15-106-14M158 71l18-37-34 3m15 39c6 30 4 91 2 99l76-10"/><path stroke="#521E00" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M196 117h-10c4-7 10-13 15-19l17 16-11 2c-1 5 5 29 2 34l-10 1c-4 0-3-34-3-34Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M64 110c3 0 4-9 4-9s-1 7 9 6m-47 13 25-17m-30 9 26-11m32-1 26-5m-25 11 25-5m-40 56c-8 3-11 6-18 12-2 2-4 3-5 6l-2 4c1 3 4 5 7 4 3 0 5-2 7-4l12-7"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M45 124c5 11 15 30 60 45-4 4-9 8-12 13-3 4-5 9-4 13v2l2 1c3 1 7-1 10-4m45-66c-2-2-5-3-9-4l-9 1c-3 2-4 4-5 7l-1 9v6l2 4 3 6c3 5 7 9 12 13l-5 4-6 5-2 7h5c9-3 14-12 22-15m-26-75c1 2 0 14-1 17 0 0 0 0 0 0m9-16c2 1 2 12 1 15"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M125 152c3 0 15 0 19-4m-2-4c-6 2-12 2-18 2m-15-1 13 16 2 7c0 2-2 3-3 5l-3 4"/><path fill="#000" d="M68 98c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Zm-14-8c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Zm29 0c1 0 2-1 2-3s-1-3-2-3-2 1-2 3 1 3 2 3Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M101 54s-6 3-8 12c3 4 9 3 9 3M47 57s8 2 9 10c-2 4-9 4-9 4"/></svg>'},410160:function(e){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="250" height="252" fill="none"><path fill="#F0F0F0" d="M44.71 91.44c6.5-39 48.25-10.75 72.749-7.75 62.5-29 100.75-2.75 106.25 42s-35.75 72.75-56.25 48-74.5 2.75-119 6.25-10.25-49.5-3.75-88.5Z"/><circle cx="67.5" cy="25.5" r="5" fill="#F0F0F0"/><circle cx="189" cy="198.5" r="5" fill="#F0F0F0"/><circle cx="206.5" cy="23.5" r="2" fill="#F0F0F0"/><circle cx="135.5" cy="180.5" r="2" fill="#F0F0F0"/><circle cx="28" cy="53" r="2" fill="#F0F0F0"/><circle cx="82" cy="189" r="9.5" fill="#F0F0F0"/><circle cx="175.75" cy="56.25" r="8.25" fill="#F0F0F0"/><path fill="#F7D8A9" d="M102.104 84.275c6.154-.433 11.381 4.379 11.45 10.603l.337 64.704s-1.307 18.396-14.083 17.941c-12.952-.481-13.243-21.915-13.243-21.915l5.743-61.681c.441-5.196 4.604-9.26 9.796-9.652Z"/><path fill="#F7D8A9" d="m76.978 101.838 32.757 57.988s5.152 10.776-3.363 16.068c-11.466 7.14-17.99-4.489-17.99-4.489L61.36 112.147l15.619-10.309Z"/><path fill="#F7D8A9" d="m55.066 109.092 3.184-.141 3.127 3.196 14.143 6.328 1.475-16.637s-3.104-9.226-4.575-10.632c-1.204-1.188-15.211 1.166-21.538 1.574-.961.042-1.337 1.003-1.295 2.384.042 1.38.486 2.04 1.313 2.1 0 0-1.354-.135-1.32 2.14.05 1.74.703 2.61 1.723 2.577 0 0-1.07.803-.15 2.727.544 1.213.803 1.489 1.722 1.322.05.067-.576 2.367 2.19 3.062Z"/><path fill="#DA80A0" d="M118.754 80.086a40.267 40.267 0 0 1 32.806 6.072c.869.602 1.739 1.205 2.55 1.8 5.316 3.748 3.421 14.531 3.096 20.998-1.582 32.459 12.927 102.159 12.932 130.357-13.474 10.25-43.716 6.443-67.347 3.141-18.277-2.554-27.475-9.241-27.475-9.241l11.47-59.11-4.587-39.019s-3.32-11.052-.605-17.535L95.73 90.413a13.176 13.176 0 0 1 8.607-6.774l14.417-3.553Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.183" d="M89.553 102.437c-.493.946-9.31 17.97-9.31 17.97l8.248 68.229M117.222 94.264c-.493.945-13.799 36.868-13.799 36.868l3.728 75.652"/><path fill="#272361" d="m78.766 86.858 10.406 40.563c.528 2.167-.968 4.282-3.15 4.507l-18.898 1.891c-1.756.167-3.386-.963-3.855-2.703l-10.28-38.932c-.545-2.05.758-4.073 2.79-4.5l18.78-3.58c1.948-.258 3.755.897 4.207 2.754Z"/><path fill="#F7D8A9" d="M151.974 89.496c6.137-.316 11.28 4.663 11.182 10.804l-1.093 64.678s-1.725 18.397-14.518 17.64c-12.969-.782-12.783-22.208-12.783-22.208l7.156-61.539c.609-5.111 4.88-9.1 10.056-9.375Z"/><path fill="#F7D8A9" d="m104.285 117.933 50.543 43.326s8.544 8.333 2.345 16.227c-8.379 10.628-18.478 1.893-18.478 1.893l-45.562-46.435 11.152-15.011Z"/><path fill="#F7D8A9" d="m67.29 118.368-.143-.259a1.612 1.612 0 0 1 .518-1.957l6.275-3.82 6.351-.584.009-.058-6.62-.053-6.818 3.862a1.618 1.618 0 0 1-2.106-.301c-.618-.686-.468-1.74.209-2.3l7.026-4.908 8.441-.583.008-.058-8.123.031-7.57 3.694c-.635.268-1.388.1-1.847-.444l-.1-.133c-.67-.753-.436-1.974.467-2.442l7.654-4.28 7.771-.918c-2.916-.059-8.148-.212-8.399-.128-.309.075-6.476 2.716-9.4 3.97-.828.359-1.847-.026-2.265-.862l-.226-.511c-.418-.836-.034-1.856.801-2.274l12.46-6.16 16.438 1.1 10.426 13.979 5.793 6.266 2.946 12.011-14.09 2.94-4.84-6.249c-4.514-1.841-6.763-6.584-7.675-8.985l-6.06-1.047-5.18 2.424c-.802.183-1.772-.135-2.132-.963Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.183" d="m148.603 155.94-44.312-38.009"/><path fill="#F7D8A9" d="m111.291 58.384.887 31.651 2.599 5.029 13.945-7.928.65-36.68s-10.754 6.804-18.081 7.928Z"/><path fill="#F7D8A9" d="M126.476 16.913C113.3 9.459 93.329 18.155 95.811 41.76c-2.6 13.548 6.972 31.888 11.522 32.716 6.204 1.065 15.126-3.55 19.143-9.762 2.009-3.135 3.841-14.198 3.841-14.198s10.695-25.38-3.841-33.603Z"/><path fill="#000" stroke="#000" stroke-linecap="round" stroke-miterlimit="10" stroke-width="1.183" d="M100.171 48.858c.467-.002.842-.71.839-1.582-.003-.871-.385-1.576-.852-1.573-.466.002-.842.71-.839 1.582.004.871.385 1.576.852 1.573ZM112.988 48.958c.467-.003.843-.711.839-1.582-.003-.872-.384-1.576-.851-1.574-.467.003-.843.711-.84 1.583.004.87.385 1.575.852 1.573Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.183" d="M101.282 39.613s-2.1-2.493-4.472.883M112.654 40.122c.082-.031 3.6-1.83 3.191 1.042M105.182 47.68c-.096.188-4.181 9.309-2.836 9.78 1.298.47 2.788-2.258 2.788-2.258M108.748 63.264s-1.581.713-2.668.51c.544-3.123 2.816-1.902 2.668-.51Z"/><path fill="#F7D8A9" d="M131.971 41.228c2.482.295 7.859 3.55 1.182 10.471-6.677 6.922-8.981-2.544-7.622-5.975 1.359-3.431 4.491-4.733 6.44-4.496Z"/><path fill="#84CCAA" d="M128.485 23.598c6.233 0 11.286-5.06 11.286-11.3 0-6.24-5.053-11.3-11.286-11.3-6.232 0-11.285 5.06-11.285 11.3 0 6.24 5.053 11.3 11.285 11.3Z"/><path fill="#84CCAA" d="M95.929 20.995c3.19-4.378 13.235-13.075 27.002-7.868 5.377 2.011 10.518 5.62 12.113 11.003 6.854 7.632 5.14 19.642 3.84 24.197-3.367 11.536-9.694 13.55-9.694 13.55l-.295-7.986c4.372-.059 10.994-11.007 3.963-12.072-.473 3.787-1.714 2.603-1.714 2.603 2.6-10.648-6.381-15.145-18.08-15.322-5.318-.06-7.681-1.657-8.745-3.431-2.996-.497-5.627 1.75-7.287 3.43-.886 3.846-1.816 8.227-1.225 11.777-.847-.174-9.214-7.22.122-19.881Z"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.183" d="M137.821 17.741s-1.005 5.443-8.331 4.378c-6.322-.887-11.877-7.513-12.29-3.195M137.762 48.623c.059-.296 3.309-7.987 1.536-15.086M137.585 9.991c.65-.059-.059-7.69-7.622-8.933-7.564-1.242-16.131 7.927-9.691 10.353 4.314 1.657 8.922.118 8.922-3.55M93.684 38.98c-5.436-8.697 1.831-18.813 11.699-18.873 0 0-4.786 7.573 3.308 7.75 8.095.178 23.103.71 22.099 12.838M126.417 67.554c-8.981 7.1-17.903 6.567-17.903 6.567M134.158 45.487s-3.014-2.011-2.6 4.792c0 0 1.241-2.721 1.477-1.834"/><path fill="#DA80A0" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="1.183" d="m134.217 79.327-4.845.118-14.476 15.027-9.592 18.579 14.476-10.057-1.339-6.274 5.199 1.538 10.577-18.931ZM114.896 94.472l-3.782-14.731-2.068.355-1.379 14.376 4.432 1.127-5.909 7.395-.886 10.057 9.592-18.58Z"/></svg>'},374353:function(e){e.exports='<div bb-foundation-defer bb-load-bundle="components/directives/content-visibility"\n  class="item-selector-container content-visibility-selector" bb-cache-compilation="content-visibility-selector">\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isVisibleToStudents()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon">\n    </bb-svg-icon>\n    <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n      components.directives.content-visibility.visible\n    </span>\n  </div>\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isHiddenFromStudents()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon">\n    </bb-svg-icon>\n    <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n  </div>\n  <!-- To allow instructors to see visibility status in a completed course -->\n  <div\n    ng-if="!contentVisibilitySelector.isEditable() && contentVisibilitySelector.entitledToViewDesigner && content.isConditionalRelease()"\n    class="visibility-message visibility-label">\n    <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon"></bb-svg-icon>\n    <span class="js-visibility js-restricted-option js-conditional-release-option"\n      bb-translate>components.directives.content-visibility.conditional-availability</span>\n  </div>\n  <button name="visibility-content" ng-model="content.visible" ng-show="contentVisibilitySelector.isEditable()"\n    bb-prevent-click-if="!contentVisibilitySelector.isVisibilitySelectorEnabled()" type="button" class="button dropdown"\n    aria-controls="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}"\n    ng-click="contentVisibilitySelector.checkForCourseLinks()"\n    data-dropdown="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}" aria-expanded="false"\n    analytics-id="course.content.visibility.button">\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isVisibleToStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-visible-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.visible\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isHiddenFromStudents()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-hidden-option vert-centered-label-text" bb-translate course-org-token-resolver>\n        components.directives.content-visibility.hidden\n      </span>\n    </div>\n    <div class="visibility-label" ng-if="contentVisibilitySelector.isConditionalRelease()">\n      <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock" class="visibility-icon">\n      </bb-svg-icon>\n      <span class="js-visibility js-restricted-option vert-centered-label-text"\n        bb-translate>components.directives.content-visibility.conditional-availability</span>\n    </div>\n  </button>\n\n  <ul ng-if="contentVisibilitySelector.isEditable()"\n    id="item-visibility-selector_{{::contentVisibilitySelector.selectorId}}"\n    class="f-dropdown item-visibility-selector selection-full-width" data-dropdown-content aria-hidden="true">\n    <li ng-class="{\'item-selected\': content.isVisibleToStudents()}"\n      ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectVisible()"\n        class="visible-option visibility-label" analytics-id="components.directives.content-visibility.visible.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="visible"></bb-svg-icon>\n        <span bb-translate course-org-token-resolver>components.directives.content-visibility.visible</span>\n      </a>\n    </li>\n    <li ng-class="{\'item-selected\': content.isHiddenFromStudents()}"\n      ng-if="contentVisibilitySelector.showVisibleHiddenMenuOptions()">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectHidden()"\n        class="hidden-option visibility-label" analytics-id="components.directives.content-visibility.hidden.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="invisible"></bb-svg-icon>\n        <span bb-translate course-org-token-resolver>components.directives.content-visibility.hidden</span>\n      </a>\n    </li>\n    <li ng-if="contentVisibilitySelector.showConditionalReleaseMenuOption()"\n      ng-class="{\'item-selected\': content.isConditionalRelease()}">\n      <a href="javascript:void(0);" ng-click="contentVisibilitySelector.selectConditionalRelease()"\n        class="restricted-option visibility-label conditional-release-restricted-option"\n        analytics-id="components.directives.content-visibility.conditional-availability.link">\n        <bb-svg-icon size="{{::contentVisibilitySelector.getIconSize()}}" icon="lock"></bb-svg-icon>\n        <span bb-translate>components.directives.content-visibility.conditional-availability</span>\n      </a>\n    </li>\n    <course-link-visibility-warning-banner ng-if="contentVisibilitySelector.showInfoBanner">\n    </course-link-visibility-warning-banner>\n  </ul>\n</div>\n'},660144:function(e){e.exports='<bb-modal id="student-preview-modal" role="alertdialog" class="notification" bb-translate-attrs="{\'aria-label\': \'components.services.studentPreview.modalTitleKey\'}"\n          modal-title-key="{{::courseOrgTokenPrefix}}.studentPreview.modalTitleKey" aria-describedby="first-time-confimation"\n          analytics-id-tag-prefix="course.outline.studentPreview.firstTimeConfirmation">\n  <div name="modal-contents">\n    <bb-svg-icon size="custom" icon="preview-user-avatar"></bb-svg-icon>\n    <p id="first-time-info" bb-translate>\n      {{::courseOrgTokenPrefix}}.studentPreview.firstTimeConfirmation\n    </p>\n  </div>\n  <button name="modal-footer-button-primary"\n          type="button"\n          class="button js-discard-changes js-primary-button"\n          ng-click="$parent.$close()"\n          analytics-id="course.outline.studentPreview.firstTimeConfirmation.startPreview.button">\n    <span bb-translate="components.services.studentPreview.startPreview"></span>\n  </button>\n  <button name="modal-footer-button-secondary"\n          type="button"\n          class="button button--secondary js-cancel-discard js-secondary-button"\n          ng-click="$parent.$dismiss()"\n          analytics-id="course.outline.studentPreview.cancel.button">\n    <span bb-translate="components.services.studentPreview.cancel"></span>\n  </button>\n</bb-modal>\n'},261748:function(e){e.exports='<bb-modal id="remove-conditional-availability-confirmation-modal" \n          class="notification js-dismiss-modal" \n          role="alertdialog" \n          bb-translate-attrs="{\'aria-label\': \'course.conditionalRelease.removeConditionalAvailability.title\'}"\n          modal-title-key="course.conditionalRelease.removeConditionalAvailability.title"\n          analytics-id-tag-prefix="course.conditionalRelease.removeConditionalAvailability">\n  <div name="modal-contents">\n    <p bb-translate>\n      course.conditionalRelease.removeConditionalAvailability.instructions\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="button js-primary-button" \n          ng-click="$parent.$close()" \n          bb-translate\n          analytics-id="global.continue">\n    global.continue\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="button button--secondary js-secondary-button" \n          ng-click="$parent.$dismiss()" \n          bb-translate\n          analytics-id="global.cancel">\n    global.cancel\n  </button>\n</bb-modal>\n'},918079:function(e){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},308736:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-discussion",use:"icon-medium-discussion-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-discussion"><path d="M8 21.4025a10.4446 10.4446 0 01-1.75-.8072L1 22l1.4318-5.2034C1.5217 15.2417 1 13.4318 1 11.5 1 5.701 5.701 1 11.5 1c4.5718 0 8.4611 2.9218 9.9025 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9 16c0 3.866 3.134 7 7 7 1.3878 0 2.6812-.3803 3.7692-1.0769L23 23l-1.0769-3.2308C22.6197 18.6812 23 17.3878 23 16c0-3.866-3.134-7-7-7s-7 3.134-7 7z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="13" cy="16" r=".5" /><circle cx="16" cy="16" r=".5" /><circle cx="19" cy="16" r=".5" /></symbol>'});r.add(s),e.exports=s},854291:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-invisible",use:"icon-medium-invisible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-invisible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6zM1 23L23 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},617386:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-lock",use:"icon-medium-lock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-lock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3z" /><path d="M6 11V6s0-5 6-5 6 5 6 5v5" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},28890:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-time",use:"icon-medium-time-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-time"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12 5v7l4 4M10 14l-3 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},619827:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-medium-visible",use:"icon-medium-visible-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-visible"><circle cx="12" cy="12" r="2" stroke-width="2" /><path d="M12 6C7.1067 6 1 12 1 12s6.1067 6 11 6 11-6 11-6-6.1067-6-11-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},514938:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-add-plus",use:"icon-small-add-plus-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add-plus"><path d="M8 5v6M11 8H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},122597:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-add",use:"icon-small-add-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-add"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM11 8H5M8 5v6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},280149:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-code",use:"icon-small-code-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-code"><path d="M4 3L1 8l3 5M12 3l3 5-3 5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},84542:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-content-collection",use:"icon-small-content-collection-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-collection"><path d="M14 15H2V9h3v1h6V9h3v6zM13 9V4H3v5M4 4V1h8v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},66850:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-content-market",use:"icon-small-content-market-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-content-market"><path d="M2 2h13l-1 8H4" stroke-width="2" stroke-linejoin="round" /><circle cx="13" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="4" cy="14" r="1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M3 6h11.5M7 2v8M11 2v8M1 1h1l2 12h9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},396864:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-duplicate",use:"icon-small-duplicate-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-duplicate"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 4h11v11H1z" /><path d="M12 12h3V1H4v3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},832954:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-invisible",use:"icon-small-invisible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-invisible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5zM1 13L15 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},245010:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-lock",use:"icon-small-lock-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-lock"><path d="M3 8h10v7H3V8zM5 8V4c0-1.5 1-3 3-3m0 0c.5 0-.5 0 0 0zm0 0c2 0 3 1.5 3 3v4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},919460:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-time",use:"icon-small-time-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-time"><path d="M15 8c0 3.866-3.134 7-7 7s-7-3.134-7-7 3.134-7 7-7 7 3.134 7 7zM5 11l1-1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v4l3 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},286260:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-upload",use:"icon-small-upload-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload"><path d="M14 5h1v9H1V5h1M6 4l2-2 2 2M8 10V2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});r.add(s),e.exports=s},782826:function(e,t,n){var i=n(745966),r=n(610045),s=new i({id:"icon-small-visible",use:"icon-small-visible-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-visible"><path d="M8 3C4.6406 3 1 8 1 8s3.6406 5 7 5 7-5 7-5-3.6406-5-7-5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="8" r="1" stroke-width="2" /></symbol>'});r.add(s),e.exports=s},957094:function(e,t,n){"use strict";let i,r,s,o;n(98592),n(282753),n(526195),n(273452),n(660321),n(160839),n(914602),n(411850),n(839571),n(49661),n(418360),n(684875),n(939170),n(785106),n(481518),n(662721),n(396287),n(144152),n(156669),n(495954),n(646168);let a=new Map;"BroadcastChannel"in window||(window.BroadcastChannel=class{close(){window.removeEventListener("storage",this.onStorage);let e=a.get(this.id);e.delete(this),e.size||a.delete(this.id)}_onStorage({key:e,newValue:t,storageArea:n}){if(n===window.localStorage&&null!==t&&e.substring(0,this.id.length)===this.id)try{let e=JSON.parse(t);this.dispatchEvent(new MessageEvent("message",{data:e}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}}postMessage(e){e=JSON.stringify(e);let t=`${this.id}${Date.now()}$${Math.random()}`;window.localStorage.setItem(t,e),setTimeout(()=>window.localStorage.removeItem(t),500),a.get(this.id).forEach(t=>{t!==this&&t.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))})}get onmessage(){return this.messageChannel.port1.onmessage}set onmessage(e){this.messageChannel.port1.onmessage=e}get onmessageerror(){return this.messageChannel.port1.onmessageerror}set onmessageerror(e){return this.messageChannel.port1.onmessageerror=e}addEventListener(...e){return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,e)}removeEventListener(...e){return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,e)}dispatchEvent(...e){return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,e)}constructor(e){this.name=e,this.id=`$BroadcastChannel$${e}$`,a.has(this.id)||a.set(this.id,new Set),a.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}});var l=n(625506),c=n(464027),d=n(417073),u=n(103528),p=n(643292),m=n(714772),h=n(866176),g=n(872491),f=n(259197);let b={"course-content":h.vQ,"course-core":g.vQ,"learn-data-services":f.vQg},v={};function*y(){let e=function(e=b){return e!==i&&(v=function(e=b){let t={};return Object.keys(e).forEach(n=>{let i=e[n];Object.keys(null!=i?i:{}).forEach(e=>{let r=i[e];t[`${n}/${e}`]=r})}),i=e,Object.freeze(t)}(e)),v}(),t=Object.keys(e).map(t=>(0,m.Cs)(function(e,t=e.name){return function*(){for(;;)try{yield(0,m.RE)(e);break}catch(e){console.error(`Uncaught error in saga ${t}:`,e)}}}(e[t],t)));yield(0,m.$6)(t)}var S=n(823513),C=n(480489);let E="ultra.components.directives.animatedGif";class I{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="E",this.link=(e,t,n)=>{let i=c.element('<img role="presentation" alt="" style="width:0; height:0">');i.attr("src",t.attr("src")),t.append(i),this.timeout(()=>{t.attr("alt")&&i.attr("alt",t.attr("alt"))},e,0,!1);let r=()=>{i.off("load",r),i.attr("src",""),i.addClass("animated-gif"),this.timeout(()=>{i.removeAttr("style"),i.attr("src",t.attr("src"))},e,250,!1)};i.on("load",r)}}}I.$inject=["$injector",C.H],c.module(E,[C.e]).directive("bbAnimatedGif",["$injector",e=>e.instantiate(I)]),n(151526),n(86822);var w=n(274476),A=n(658895),k=n(860995),T=n(109504),P=n(555840),D=n(637638),x=n(158550),R=n(391489),L=n(808361);let N="ultra.bb.angulartics",$=e=>{},O=(e,t)=>{},G={subscribeToFramework:x.subscribeToFramework};c.module(N,["angulartics","angulartics.scroll",P.e1,D.e1,k.e1]).config(["$analyticsProvider",e=>{e.registerPageTrack(e=>{$(e)}),e.registerEventTrack((e,t)=>{O(e,t)}),l.fn.extend({waypoint(){return this.each(function(){l(this).triggerHandler("scrollby")})}})}]).run(["$rootScope","$timeout",P.YW.H,D.HV,k.HV,(e,t,n,i,r)=>{let s=i.getQueue("telemetry");function o(e){s.enqueue(()=>t(()=>(w.ZP.addHistory(e),n.$create(e)),1e3,!1))}function a(){return r.course?{id:r.course.id,uuid:r.course.uuid,batchUid:r.course.batchUid,ultraStatus:r.course.ultraStatus}:null}function l(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}G.subscribeToFramework("UltraTelemetry",(e,t)=>{let{analyticsId:n,...i}=null!=t?t:{};e===x.AnalyticsEventTypes.CLICK_EVENT&&o({action:"click",analyticsId:n,context:i,url:document.URL,applicationId:A.default.telemetryAppId,course:a()}),e===x.AnalyticsEventTypes.CHANGE_EVENT&&o({action:"change",analyticsId:n,context:i,url:document.URL,applicationId:A.default.telemetryAppId,course:a()})}),$=e=>{o({action:"pageview",analyticsId:e,url:document.URL,applicationId:A.default.telemetryAppId,course:a(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},O=(e,t)=>{t.id&&("click"===t.eventType||"scrollby"===t.eventType)&&o({action:t.eventType,analyticsId:t.id,url:document.URL,context:l(t.context),applicationId:A.default.telemetryAppId,course:a()})},e.$on(R.N.$stateChangeSuccess,(e,t,n,i)=>{var r;null!=t&&null!==(r=t.name)&&void 0!==r&&r.startsWith(null==i?void 0:i.name)||(function(e){if(!e)return[];let t=e.split(L.qt),n=[],i="";return t.forEach(e=>{""!==e&&(i=i.length>0?`${i}${L.qt}${e}`:e,n.push(i))}),n})(null==i?void 0:i.name).forEach(e=>{var n;!(null==t?void 0:null===(n=t.name)||void 0===n?void 0:n.startsWith(e))&&e.includes(L.qt)&&o({action:"panelclosed",analyticsId:e,url:document.URL,applicationId:A.default.telemetryAppId,course:a()})})}),document.addEventListener("click",e=>{let t,n;if((0,T.c1)(e.target))return;let i=c.element(e.target),r=i.closest("a"),s="_blank"===r.attr("target"),d=(0,T.X_)(i);if(d||(t=(0,T.IK)(i)||(0,T.CY)(i.parent())),!t&&s&&(t=i.attr("analytics-id")||"external-link"),t){if(d||(n=l((0,T.$o)(i))),s){var u,p;(n=null!=n?n:{}).value=null!==(u=n.value)&&void 0!==u?u:r.attr("href"),n.valueType=null!==(p=n.valueType)&&void 0!==p?p:"link"}o({action:"click",analyticsId:t,url:document.URL,context:n,applicationId:A.default.telemetryAppId,course:a()})}},!0),document.addEventListener("change",e=>{let t;if(!(e.target instanceof HTMLSelectElement)||(0,T.c1)(e.target))return;let n=e.target,i=n.options[n.selectedIndex],r=c.element(i),s=l((0,T.$o)(r));(0,T.X_)(r)||(t=(0,T.IK)(r)||(0,T.CY)(r.parent())),t&&o({action:"change",analyticsId:t,url:document.URL,context:s,applicationId:A.default.telemetryAppId,course:a()})},!0)}]);var _=n(410704),M=n(716865),B=n(676954);let F="ultra.components.directives.dir";class U{constructor(e){this.bbLocalize=e,this.restrict="A",this.link=(e,t,n)=>{e.$watch("locale",()=>{n.attr=n.attr||"dir",n.rtl=n.rtl||"rtl",n.ltr=n.ltr||"ltr",this.bbLocalize.isRTL(e)?t.attr(n.attr,n.rtl):t.attr(n.attr,n.ltr)})}}}U.$inject=[B.serviceName],c.module(F,[]).directive("bbDir",["$injector",e=>e.instantiate(U)]);var V=n(298898),H=n(46840),q=n(949735),j=n(835311),z=n(437974),W=n(366968);let K="ultra.directives.bbTime";class Z{compile(e){let t=e.html();return(e,n,i)=>{let r=t=>{let r=this.bbLocalize.getFormatEnum(B.ILocaleTimeFormat,i.format)||B.ILocaleTimeFormat.Short;if("true"===i.epoch){let e=new Date(0);e.setUTCSeconds(t),t=e}let s=e=>{"bb-time"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)};null==t?s(""):this.bbLocalize.formatTime(t,r,e).then(s)};"true"===i.autoUpdate?i.$observe("bbTime",()=>{r(new Date(this.$parse(i.bbTime)(e)))}):r(this.$parse(t)(e)||new Date(this.$parse(i.bbTime)(e)))}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}Z.$inject=["$parse",B.serviceName],c.module(K,[B.moduleName]).directive("bbTime",["$injector",e=>e.instantiate(Z)]);var Q=n(549897);let J="ultra.directives.bbNumber";class Y{compile(e){let t=e.html();return(e,n,i)=>{let r=this.$parse(t)(e);this.bbLocalize.formatNumber(r,e).then(e=>{"bb-number"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)})}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}Y.$inject=["$parse",B.serviceName],c.module(J,[B.moduleName]).directive("bbNumber",["$injector",e=>e.instantiate(Y)]);var X=n(703453),ee=n(842034),et=n(194044),en=n(375334),ei=n(5865),er=n(88818);let es="ultra.directives.saveForm";class eo{validate(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid}save(){if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally(()=>(this.savePromise=null,this.queuedSave=!1,this.save())));else{this.autoSaveState=en.F.Saving;let e=this.scope.save();this.savePromise=e.then(e=>(this.autoSaveState=en.F.Saved,e))}return this.savePromise}}saveClicked(){if(this.autoSaveState===en.F.NotSaved)return this.save().then(()=>{this.scope.$emit("autosave-button-click",{target:"save"}),this.scope.showAlertMessage&&this.scope.showAlertMessage()});this.scope.$emit("autosave-button-click",{target:"save"})}cancelClicked(){if(this.scope.cancel){let e=this.scope.cancel();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"cancel"})}):this.scope.$emit("autosave-button-click",{target:"cancel"})}}deleteClicked(){if(this.scope.delete){let e=this.scope.delete();e?e.then(()=>{this.scope.$emit("autosave-button-click",{target:"delete"})}):this.scope.$emit("autosave-button-click",{target:"delete"})}}mouseDown(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})}constructor(e,t){this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",er.Hth.Saved),this.autoSaveState=en.F.Saved):this.autoSaveState=en.F.NotSaved,e.$on(ee.qH,(t,n,i)=>{switch(e.$broadcast("bb-save-button",n,i),n){case er.Hth.Change:this.autoSaveState=en.F.NotSaved;break;case er.Hth.Saving:this.autoSaveState=en.F.Saving;break;case er.Hth.Saved:this.autoSaveState=en.F.Saved;case er.Hth.SaveFailure:case er.Hth.ValidationFailure:}})}}class ea{constructor(e){this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=(e,t)=>{e.saveForm=new eo(e,this.$q)},this.template=ei}}ea.$inject=["$q"],c.module(es,[ee.e1,et.e1]).directive("bbSaveForm",["$injector",e=>e.instantiate(ea)]);var el=n(706551);let ec="ultra.services.security",ed="xsrf",eu="X-Blackboard-XSRF",ep="xsrf-token-changed";class em{registerXsrfCallback(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)}unregisterXsrfCallback(e){return this.xsrfCallbacks.delete(e)}getToken(){return this.token}updateToken(e){return this.token===e||(this.token=e,this.xsrfCallbacks.forEach(e=>this.invokeXsrfCallback(e)),this.crossWindowMessaging.postMessage(ep,this.token)),this.token}invokeXsrfCallback(e){try{e(this.token)}catch(e){}}constructor(e,t){this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(ep,(e,t)=>this.updateToken(t)),e.$on("$destroy",()=>{this.xsrfCallbacks.clear()})}}em.$inject=["$rootScope",el.HV],c.module(ec,[el.e1]).service(ed,em);var eh=n(362767),eg=n(891886),ef=n(888917),eb=n(734345),ev=n(201527),ey=n(227722),eS=n(259993),eC=n(396435),eE=n(226666),eI=n(449268),ew=n(562067),eA=n(348669),ek=n(625506);let eT="ultra.directives.conversionStatusBar";class eP{get showStatusBar(){return this._showStatusBar}set showStatusBar(e){let t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()}updateStatusClass(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?ek("body").removeClass("has-conversion-status-bar"):ek("body").addClass("has-conversion-status-bar")}identifyCourse(){return(this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course)?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}useTheNewExperience(){this.course.setUltraStatusDecided().then(()=>{this.showStatusBar=!1,this.$rootScope.$broadcast("reloadCourse",this.courseId)})}backToClassic(){this.course.undoCourseConversion().then(e=>{let t=e.$response;200===t.status?(this.ultraState.transitionTo(this.course.getBaseRoute()),this.$rootScope.$broadcast("convertToClassicCourse",this.course.id)):(400===t.status||404===t.status)&&this.$modal.open({template:eI,scope:this.$scope,resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]}}).result.then(()=>{this.ultraState.transitionTo(this.course.getBaseRoute())})})}hideStatusBar(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1}constructor(e,t,n,i,r,s,o,a,l){this.$scope=e,this.$rootScope=t,this.$q=n,this.$modal=i,this.CourseModel=r,this.ultraState=s,this.contextCourse=o,this.bbLocalize=a,this.timeout=l,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then(e=>{this.course=e,this.courseId=this.course.id,this.showStatusBar=!1,this.course.canConvert()&&(this.showStatusBar=this.course.isUltraPreview())}),e.$on("confirmNewExperience",()=>{this.useTheNewExperience()}),e.$on(eA.SA,(e,t)=>{this.inPreview=t,this.updateStatusClass(),this.showStatusBar=this.course.isUltraPreview()}),e.$on("$stateChangeSuccess",()=>{this.updateStatusClass()}),e.$on("$destroy",()=>{ek("body").removeClass("has-conversion-status-bar")})}}eP.$inject=["scope","$rootScope","$q","$modal",P.N7.H,L.HV,k.HV,B.serviceName,C.H];class eD{constructor(e){this.$injector=e,this.restrict="E",this.template=eE,this.scope={courseId:"@?"},this.link=e=>{e.conversionStatusBarController=this.$injector.instantiate(eP,{scope:e})}}}eD.$inject=["$injector"],c.module(eT,[k.e1,B.moduleName,P.e1,L.e1,C.e,ew.e1]).directive("bbConversionStatusBar",["$injector",e=>e.instantiate(eD)]);var ex=n(385847),eR=n(625506);let eL="ultra.components.directives.accessibility.enterKeyUpFocus";class eN{constructor(e){this.injector=e,this.restrict="A",this.link=(e,t,n)=>{t.on("keydown",e=>{e.keyCode!==ex.K5||n.bbTriggerEnterKeydown||e.preventDefault()}),t.on("keyup",t=>{if(t.keyCode===ex.K5&&(t.preventDefault(),t.stopPropagation(),e.$apply(()=>{e.$eval(n.ngClick||n.bbClick,{$event:t}),e.$eval(n.ngBlur,{$event:t})}),n.bbEnterKeyUpFocus)){let e=eR(n.bbEnterKeyUpFocus);if(n.indexToFocus){let t=Number(n.indexToFocus);e.eq(t).focus()}else e.focus()}})}}}eN.$inject=["$injector"],c.module(eL,[]).directive("bbEnterKeyUpFocus",["$injector",e=>e.instantiate(eN)]);var e$=n(756108),eO=n(737416),eG=n(699868);n(3744);var e_=n(276635),eM=n(714762),eB=n(625506);let eF="ultra.components.directives.hasFooter";class eU{constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.domChanged=()=>{let e=this.element.find("footer:not(.notification)").filter(":visible").filter(function(){return eB(this).height()>0}),t=this.element.find(".import-status-bar").filter(":visible").filter(function(){return eB(this).height()>0});e.length>0||t.length>0?(eB(this.element).addClass("has-footer"),eB(this.element).hasClass("in-preview-mode")&&eB(window.parent.document).find("body").addClass("has-footer-in-preview-mode"),e.find(".navigation-visible").length>0&&eB(this.element).addClass("has-navigation-footer")):(eB(this.element).removeClass("has-footer"),eB(this.element).hasClass("in-preview-mode")&&eB(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};let i=e_.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(i),this.observer.observe(t[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),eM.c(this.element,i),eM.q(this.element,i),this.scope.$on("$destroy",()=>{this.observer.disconnect(),eM.c(this.element,i),eM.q(this.element,i)})}}eU.$inject=["scope","element","attrs"];class eV{constructor(e){this.$injector=e,this.restrict="A",this.link=(e,t,n)=>{e.hasfooter=this.$injector.instantiate(eU,{scope:e,element:t,attrs:n})}}}eV.$inject=["$injector"],c.module(eF,[]).directive("bbHasFooter",["$injector",e=>e.instantiate(eV)]);var eH=n(625506);let eq="ultra.directives.accessibility.keyboardClick";class ej{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("keyup",e=>{let t=eH(e.target),n=t.closest(".react-container").length>0,i="LI"===t.prop("tagName")&&"option"===t.attr("role")&&"listbox"===t.closest("UL").attr("role");(e.keyCode!==ex.K5||n||"file"===t.attr("type")||"INPUT"===t.prop("tagName")&&("INPUT"!==t.prop("tagName")||"checkbox"!==t.prop("type"))||"BUTTON"===t.prop("tagName")||"BODY"===t.prop("tagName")||"A"===t.prop("tagName")&&t.attr("href")||i)&&(e.keyCode!==ex.L_||n||"A"!==t.prop("tagName")&&("DIV"!==t.prop("tagName")||"button"!==t.attr("role")))||t.trigger("click")})}}}c.module(eq,[]).directive("bbKeyboardClick",["$injector",e=>e.instantiate(ej)]);var ez=n(529415),eW=n(892290);let eK="ultra.directives.accessibility.focusNext";class eZ{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="true"===n.bbFocusNextOneTimeOnly;!function(e,t,n){e.on("keydown.focusNext",i=>{if(i.keyCode===ex.Mf&&!i.shiftKey&&t){let r=c.element(t);r.length>=1&&-1!==parseInt(r.attr("tabindex"),10)&&(r.first().focus(),i.preventDefault(),n&&e.off("keydown.focusNext"))}})}(t,n.bbFocusNext,i)}}}c.module(eK,[]).directive("bbFocusNext",["$injector",e=>e.instantiate(eZ)]);let eQ="ultra.directives.accessibility.focusPrev";class eJ{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="true"===n.bbFocusPrevOneTimeOnly;!function(e,t,n){e.on("keydown.focusPrev",i=>{if(i.keyCode===ex.Mf&&i.shiftKey&&t){let r=c.element(t);r.length>=1&&-1!==r.prop("tabindex")&&(r.first().focus(),i.preventDefault(),n&&e.off("keydown.focusPrev"))}})}(t,n.bbFocusPrev,i)}}}c.module(eQ,[]).directive("bbFocusPrev",["$injector",e=>e.instantiate(eJ)]),n(20720);var eY=n(625506);let eX="ultra.directives.bbFoundationDropdownClose",e0="bbFoundationDropdownClose";class e1{constructor(){this.restrict="A",this.link=(e,t,n)=>{let i="keyup."+e0;t.on("click",e=>{let n=eY(e.target);if(n.closest("[data-dropdown]").length<=0&&(n.closest(".f-dropdown").length<=0||n.closest(".f-dropdown a").length>0)){let e=t.find(".f-open-dropdown");if(e.length&&e.foundation("dropdown","close",e),window.top!==window){let e=eY(window.parent.document).find(".f-open-dropdown");e.foundation("dropdown","close",e)}}}),t.on("scroll",e=>{let t=eY(e.target);t.hasClass("f-dropdown")||0!==t.parents(".f-dropdown").length||eY(".f-open-dropdown").each(function(){eY(this).foundation("dropdown","close",eY(this))})}),eY("body").on(i,e=>{if(e.keyCode===ex.Mf){let e=t.find(".f-open-dropdown"),n=eY(document.activeElement).is(".f-open-dropdown"),i=eY(document.activeElement).parents(".f-open-dropdown").length>0;n||i||e.foundation("dropdown","close",e)}}),e.$on("$destroy",()=>{t.off(),eY("body").off(i)})}}}c.module(eX,[]).directive(e0,["$injector",e=>e.instantiate(e1)]);var e2=n(625506);let e4="ultra.components.directives.hoverMenuOpacity";class e6{constructor(){this.restrict="A",this.link=(e,t)=>{t.on("focus",".hover-menu a, .hover-menu button",e=>{0===e2("body.hide-focus-outline").length&&e2(e.target).closest(".hover-menu").css({opacity:1})}).on("blur",".hover-menu a, .hover-menu button",e=>{e2(e.target).closest(".hover-menu").removeAttr("style")})}}}e6.$inject=["$injector"],c.module(e4,[]).directive("bbHoverMenuOpacity",["$injector",e=>e.instantiate(e6)]);var e5=n(786845),e3=n(196409),e8=n(284293),e9=n(463444),e7=n(486930);let te="ultra.directives.contentImportStatusBar";class tt{identifyCourse(){return(this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course)?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()}confirm(){let e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"false").then(()=>{this.$scope.display=!1})}undo(){let e="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(e,"true").then(()=>{this.$scope.display=!1})}goToImportReport(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})}hideStatusBar(){return -1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length}getItemsCount(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then(e=>{let t=e.$response.data.conversionReportTORest;return t?t.filter(e=>P.SF.mA.Success!==e.ultraConversionStatus).length:0})}constructor(e,t,n,i,r,s,o,a,l){this.$scope=e,this.$rootScope=t,this.element=n,this.$q=i,this.CourseModel=r,this.ultraState=s,this.context=o,this.bbLocalize=a,this.contextCourse=l,this.identifyCourse().then(t=>{this.course=t,this.baseState=s.current.name,n.detach().appendTo(c.element(".side-panel-content")),e.$on("$destroy",()=>{c.element(".side-panel-content > "+n.get(0).tagName).length>0&&c.element(".side-panel-content > "+n.get(0).tagName).remove()}),e.$watch("taskId",()=>{e.taskId&&this.getItemsCount().then(e=>{this.notCarriedForwardItemsCount=e})})})}}tt.$inject=["scope","$rootScope","element","$q",P.N7.H,L.HV,eh.HV,B.serviceName,k.HV];class tn{constructor(e){this.$injector=e,this.restrict="E",this.template=e7,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=(e,t)=>{e.contentImportStatusBarController=this.$injector.instantiate(tt,{scope:e,element:t})}}}tn.$inject=["$injector"],c.module(te,[eh.e1,B.moduleName,P.e1,L.e1]).directive("bbContentImportStatusBar",["$injector",e=>e.instantiate(tn)]);var ti=n(886739),tr=n(625506);let ts="ultra.components.directives.ultraState.peekSref";class to{constructor(e,t,n,i){this.$parse=e,this.uiSrefDirective=t,this.ultraState=n,this.context=i,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=(e,t,n,i)=>{let r=this.$parse(n.bbPeekSref)(e)||n.bbPeekSref,s=t.closest("[data-base-state-name]").data("baseStateName")||this.context.basePage;this.ultraState.getPeekStateName(r,s).then(r=>{n.uiSref=r,this.uiSrefDirective[0].compile(t,n,void 0)(e,t,n,i),n.bbPreventRoutingClick&&t.bind("click",e=>{tr(e.target).closest(n.bbPreventRoutingClick).length>0&&e.preventDefault()})})}}}to.$inject=["$parse","uiSrefDirective",L.HV,eh.HV],c.module(ts,["ui.router",eh.e1,L.e1]).directive("bbPeekSref",["$injector",e=>e.instantiate(to)]);let ta="ultra.directives.preventClick";class tl{constructor(e,t){this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=(e,t)=>{let n=this.$parse(t.bbPreventClickIf);return{pre:(e,t)=>{t.on("click",t=>{function i(){if(n(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}this.$rootScope.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}}tl.$inject=["$parse","$rootScope"],c.module(ta,[]).directive("bbPreventClickIf",["$injector",e=>e.instantiate(tl)]);var tc=n(728042),td=n(418540);let tu="ultra.components.directives.accessibility.readInfo";class tp{constructor(e,t,n,i){this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.message="",this.alertMessage="",tc.Z.OnRootScope(e,"read-info-directive",(t,n)=>{this.message=n,i(()=>{this.message=""},e,1e3)}),tc.Z.OnRootScope(e,"read-info-directive-alert",(t,n,r)=>{void 0!==r?(this.alertMessage="",i(()=>{this.alertMessage=n},e,r)):(this.alertMessage=n,i(()=>{this.alertMessage=""},e,1e3))})}}tp.$inject=["scope","element","attrs",C.H];class tm{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,n)=>{t.append(this.$compile(td)(e)),e.readInfo=this.$injector.instantiate(tp,{scope:e,element:t,attrs:n})}}}tm.$inject=["$injector","$compile"],c.module(tu,[C.e]).directive("bbReadInfo",["$injector",e=>e.instantiate(tm)]);var th=n(51179);let tg="ultra.components.directives.accessibility.skipLink";class tf{constructor(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=th,this.link=(e,t,n)=>{t.find(".skip-link").on("click",()=>{let e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));let i=e.find(n.bbSkipLinkTarget).first();i.focus(),i.is(document.activeElement)||null!=i.attr("tabindex")||(i.attr("tabindex","-1"),i.focus())})}}}c.module(tg,[]).directive("bbSkipLink",["$injector",e=>e.instantiate(tf)]);var tb=n(769290),tv=n(994250),ty=n(559366),tS=n(183477),tC=n(375507),tE=n(294115),tI=n(116468),tw=n(618758),tA=n(578953),tk=n(852127),tT=n(603363),tP=n(740594),tD=n(202784),tx=n(292050),tR=n(571447),tL=n(610624),tN=new class{init(){this.integrationContainer=document.querySelector(".integration-react-container"),this.portalManager.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(tR.Oz,this.updatePortal)}generateUniqueDomElement(){let e=tL.V(),t=document.createElement("div");return t.id=e,this.integrationContainer.appendChild(t),t}getIntegrationContainer(){return this.integrationContainer}constructor(e,t){this.integrationService=e,this.portalManager=t,this.sendNewPortal=e=>{this.integrationService.sendEventMessage({type:tR.Fm,eventType:tR.Kj.PortalNew,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendRemovedPortal=e=>{this.integrationService.sendEventMessage({type:tR.Fm,eventType:tR.Kj.PortalRemove,portalId:e.portalId,selector:e.selector,selectorData:e.selectorData},e.owningIntegrationId)},this.sendCallbackPortal=e=>{this.integrationService.sendMessage({type:tR.l4.PortalCallback,callbackId:e.callbackId,portalId:e.portalId,event:e.event},e.owningIntegrationId)},this.sendRenderFailure=e=>{if(!e.requestingIntegrationId){console.warn("Unable to send error to targetless portal");return}this.integrationService.sendMessage({type:tR.pM,portalId:e.portalId,status:tR.xR.Failure,error:e.error,errorMessage:e.errorMessage},e.requestingIntegrationId)},this.onPortalEvent=(e,t)=>{switch(e){case tR.DI.NewPortal:this.sendNewPortal(t);break;case tR.DI.RemovedPortal:this.sendRemovedPortal(t);break;case tR.DI.CallbackPortal:this.sendCallbackPortal(t);break;case tR.DI.FailedValidationPortal:this.sendRenderFailure(t)}},this.updatePortal=(e,t)=>{if(!e)return;let{portalId:n,contents:i}=e;this.portalManager.updatePortal({portalId:n,contents:i,requestingIntegrationId:t.id},()=>{let e=this.portalManager.getPortalData(n).getOwningIntegrationId();if(e&&e!==t.id)return{portalId:n,error:tR.yr.Authorization,errorMessage:`Portal ${n} is already owned by ${e} -- not allowing render from ${t.id}`,requestingIntegrationId:t.id}})&&(this.portalManager.setPortalOwnership(n,t.id),this.sendRenderSuccess(t.id,n))},this.sendRenderSuccess=(e,t)=>{this.integrationService.sendMessage({type:tR.pM,portalId:t,status:tR.xR.Success},e)}}}(tP.Z,tx.hE),t$=n(928316),tO=n(609582),tG=n(883447),t_=n(311822);let tM=e=>{let{integrationId:t,contents:n,portalId:i}=e;return tD.createElement(tx.$2,{portalType:tF,initialOwningIntegrationId:t,initialContents:n,portalId:i})};var tB=n(174897);let tF="modal",tU={[tR.l1.Small]:tO.DialogType.small,[tR.l1.Large]:tO.DialogType.large,[tR.l1.Medium]:tO.DialogType.normal};var tV=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tR.BG.ModalNew,this.onPortalModal),this.integrationService.addIntegrationMessageType(tR.BG.ModalClose,this.onPortalModalClose),this.initializeWhitelist()}initializeWhitelist(){this.modalWhitelist.set(tR.sH.Modal,{props:{width:!0},isValid:(e,t)=>this.isValidModalElement(e,t),render:(e,t,n)=>{let{width:i,...r}=t,s=tU[i];return tD.createElement(t_.Dy,{...r,dialogContentProps:{type:s},hidden:!1,onDismiss:()=>this.closePortalModal()},n)}}),this.modalWhitelist.set(tR.sH.ModalHeader,{props:{title:!1},isValid:e=>(e.props&&e.props.title&&"string"!=typeof e.props.title&&console.warn(`Invalid prop \`title\` value: expected \`string\` but received \`${typeof e.props.title}\`, defaulting to no title.`),!0),render:(e,t,n)=>tD.createElement(tO.DialogHeader,{...t,analyticsId:"integration.modal.header",showCloseButton:!0,onDismiss:()=>this.closePortalModal(),closeButtonAriaLabel:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"global.close"})},n)}),this.modalWhitelist.set(tR.sH.ModalBody,{isValid:e=>!0,render:(e,t,n)=>tD.createElement("div",{key:t.key},n)}),this.modalWhitelist.set(tR.sH.ModalFooter,{isValid:e=>!0,render:(e,t,n)=>tD.createElement(tO.DialogFooter,t,n)}),this.componentManager.addComponentType(tF,1,this.modalWhitelist)}constructor(e,t,n,i){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=i,this.modalWhitelist=new Map,this.isValidModalElement=(e,t)=>{if(!tR.B$.has(e.props.width))return console.warn(`Invalid prop \`width\` of value ${e.props.width} supplied to ${e.tag}, expected one of [${Object.values(tR.X$)}].`),!1;if(!e.children)return console.warn(`Children are needed for ${tR.sH.Modal}, but no value for \`children\` was given.`),!1;if("string"==typeof e.children)return console.warn("Incorrect children value: expected `Array` but received `string`."),!1;let n=[tR.sH.ModalHeader,tR.sH.ModalBody,tR.sH.ModalFooter];if(e.children.length!==n.length)return console.warn(`Incorrect number of children elements: expected ${n.length}, but received ${e.children.length}.`),!1;for(let i=0;i<n.length;i++){let r=e.children[i];if(r.tag!==n[i])return console.warn(`Incorrect order of children: position ${i} expected ${n[i]}, but received ${r.tag}.`),!1;if(!this.componentManager.isValidComponent({componentContext:tF,componentName:n[i],contents:r,integrationId:t}))return!1}return!0},this.onPortalModal=(e,t)=>{if(!this.isValidRequestParameters(e,t))return;let n=tG.Z.length()>0,i=t_.gk.getInstance().isModalDisplaying();if(this.componentManager.overMaxComponents(tF)||i||n){console.error("A modal is already open; not opening another one."),this.sendModalMessage(t,null,e.modalId,tR.xR.Failure,tR.fZ.ModalAlreadyOpenError,"A modal is already open; not opening another one.");return}if(!this.portalManager.validateContents({portalType:tF,contents:e.contents,integrationId:t.id}).passed){this.sendModalMessage(t,null,e.modalId,tR.xR.Failure,tR.fZ.FailedComponentValidationError,`Component validation failed; not rendering ${tR.sH.Modal}.`);return}this.modalId=e.modalId,this.owningIntegration=t;let r=tL.V();this.currentModal=this.integrationPortalService.generateUniqueDomElement();let s={owningIntegrationId:t.id,portalId:r,element:this.currentModal};return this.render(s,e.contents).then(()=>{this.sendModalMessage(t,s.portalId,this.modalId,tR.xR.Success)})},this.isValidRequestParameters=(e,t)=>e.type&&e.type===tR.BG.ModalNew?e.modalId?!!e.contents||(console.warn("Not a valid new modal request, `contents` were not provided."),this.sendModalMessage(t,null,e.modalId,tR.xR.Failure,tR.fZ.MissingContentsError,"Not a valid new modal request, `contents` were not provided."),!1):(console.warn("Not a valid new modal request, `modalId` must be a unique non-empty value."),this.sendModalMessage(t,null,e.modalId,tR.xR.Failure,tR.fZ.InvalidIdError,"Not a valid new modal request, `modalId` must be a unique non-empty value."),!1):(console.warn(`Not a valid new modal request, \`type\` must be ${tR.BG.ModalNew}.`),this.sendModalMessage(t,null,e.modalId,tR.xR.Failure,tR.fZ.InvalidRequestTypeError,`Not a valid new modal request, \`type\` must be ${tR.BG.ModalNew}.`),!1),this.render=(e,t)=>new Promise(n=>{t$.render(tD.createElement(tB.g,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},tD.createElement(tM,{integrationId:e.owningIntegrationId,portalId:e.portalId,contents:t})),e.element,()=>{n()})}),this.onPortalModalClose=(e,t)=>{if(this.owningIntegration&&this.owningIntegration.id!==t.id){console.warn(`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`),this.sendModalCloseResponseMessage(t,e.modalId,tR.xR.Failure,tR.fZ.WrongOwnerError,`The integration ${t.id} does not own the modal of ${e.modalId}; not closing modal`);return}if(this.modalId!==e.modalId){console.warn(`No modal has an id of ${e.modalId}`),this.sendModalCloseResponseMessage(t,e.modalId,tR.xR.Failure,tR.fZ.ModalNotFoundError,`No modal has an id of ${e.modalId}`);return}this.closePortalModal(e.modalId,t)},this.closePortalModal=(e,t)=>{this.currentModal&&(t$.unmountComponentAtNode(this.currentModal),this.sendModalCloseResponseMessage(t||this.owningIntegration,e||this.modalId,tR.xR.Success))},this.sendModalMessage=(e,t,n,i,r,s)=>{this.integrationService.sendMessage({type:tR.BG.ModalResponse,status:i,portalId:t,modalId:n,...r&&{error:r},...s&&{errorMessage:s}},e)},this.sendModalCloseResponseMessage=(e,t,n,i,r)=>{this.integrationService.sendMessage({type:tR.BG.ModalCloseResponse,status:n,modalId:t,...i&&{error:i},...r&&{errorMessage:r}},e)}}}(tP.Z,tN,tx.yW,tx.hE),tH=n(140442);let tq={type:tR.cQ,status:tR.xR.Success},tj={type:tR.cQ,status:tR.xR.Failure};var tz=new class{init(){this.integrationService.addIntegrationMessageType(tR.e0,this.injectJs)}constructor(e){this.createScriptElement=e=>{let t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("type","text/javascript"),t.setAttribute("async","true"),t},this.injectJs=(e,t)=>{e.url&&e.url.startsWith("https://")||this.integrationService.sendMessage({...tj,reason:"Insecure URL"},t);let n=this.createScriptElement(e.url);document.body.appendChild(n),n.addEventListener("load",()=>{this.integrationService.sendMessage(tq,t)}),n.addEventListener("error",e=>{let n=e.message||"Invalid Script File";this.integrationService.sendMessage({...tj,reason:n},t)})},this.integrationService=e}}(tP.Z),tW=n(221524),tK=n(442057);let tZ=e=>{let{component:t,contents:n}=e,[i,r]=tD.useState(t.shown);return tD.useEffect(()=>(r(t.shown),t.addListener(r),()=>{t.removeListener(r)}),[t]),i&&tD.createElement(tx.$2,{portalType:t7,initialOwningIntegrationId:t.integrationId,initialContents:n,portalId:t.portalId})};var tQ=n(89505),tJ=n(545051),tY=n(945209),tX=n(465139);let t0={[tR.l1.Small]:250,[tR.l1.Medium]:300,[tR.l1.Large]:500},t1={[tR.CD.Light]:tY.DefaultPalette.white,[tR.CD.Dark]:tY.DefaultPalette.neutralDark},t2={[tR.$n.BottomLeft]:tJ.ScreenPosition.bottomLeft,[tR.$n.BottomRight]:tJ.ScreenPosition.bottomRight,[tR.$n.TopLeft]:tJ.ScreenPosition.topLeft,[tR.$n.TopRight]:tJ.ScreenPosition.topRight},t4=(e,t)=>{let n=t0[tR.l1.Medium];return!e.isSmallBreakpoint()||t0[t]<=n?t0[t]:(console.warn("Requested prop `size` is greater than current breakpoint size: reducing `size` to medium breakpoint."),n)},t6=e=>{if(e.isSmallBreakpoint())return tO.DirectionalHint.bottomCenter},t5=(e,t)=>{if(e.isSmallBreakpoint())return(0,tJ.getScreenPositionPoint)(tJ.ScreenPosition.bottomCenter);if(t.selector.type===tR.LB.Region){let e=t2[t.selector.value];return(0,tJ.getScreenPositionPoint)(e)}return t.targetElementFinder()},t3=e=>e.isLargeBreakpoint()?tR.iA.Large:e.isMediumBreakpoint()?tR.iA.Medium:tR.iA.Small,t8=(0,tQ.windowResizingResponsiveComponentWrapper)(e=>{let{children:t,hideBeak:n,key:i,notificationData:r,onDismiss:s,size:o,theme:a,UltraWindowSize:l}=e,c=t5(l,r),d=r.targetElementFinder(),[u,p]=tD.useState(()=>{var e,t;return"callout-"+r.selector.type===tR.LB.Region?"regional":null==d?void 0:null===(t=d.getBoundingClientRect())||void 0===t?void 0:null===(e=t.top)||void 0===e?void 0:e.toString()}),m=t3(l),h=t4(l,o),g=t1[a],f=t6(l),b=(0,tX.zX)(()=>{if(d&&(0,er.PZw)(d)){var e;p(`target${null===(e=d.getBoundingClientRect())||void 0===e?void 0:e.top}`)}else s()});return tD.useEffect(()=>{let e=e_.debounce(()=>b(),100);if(r.selector.type!==tR.LB.Region)return document.body.addEventListener("scroll",e,!0),()=>{document.body.removeEventListener("scroll",e),e.cancel()}},[r.selector.type,b]),tD.createElement(tO.Callout,{key:i,target:c,onDismiss:s,calloutWidth:h,setInitialFocus:!0,isBeakVisible:!n,directionalHint:f,className:`integration-notification-${a}`,backgroundColor:g,minPagePadding:m,allowDismissOnFocusTarget:!0,preventDismissOnScroll:!0,calloutId:u},tD.createElement("div",{tabIndex:0},t))});class t9{get shown(){return this._shown}setShown(e){this.shown!==e&&(this._shown=e,this.listeners.forEach(t=>t(e)))}constructor(e,t){this.notificationData=e,this.guidanceManager=t,this.componentType="IntegrationNotification",this.priority=2*S.Di,this.isInitialHide=!1,this._shown=!1,this.listeners=[],this.shouldShow=()=>new Promise((e,t)=>{e(!!this.notificationData.targetElementFinder())}),this.addListener=e=>{this.listeners.push(e)},this.removeListener=e=>{let t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)},this.onShown=()=>{this.setShown(!0)},this.onHidden=e=>{this.setShown(!1)},this.dispose=()=>{this.listeners=[],this.guidanceManager.deregisterComponent(this)},this.componentKey=`integration.notification.${e.portalId}`,this.notificationId=e.notificationId,this.portalId=e.portalId,this.integrationId=e.owningIntegrationId,this.data=e,this.guidanceManager.registerComponent(this),this.guidanceManager.startQueue()}}let t7="notification";var ne=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tR.Eo.NotificationNew,this.onPortalNotification),this.integrationService.addIntegrationMessageType(tR.Eo.NotificationClose,this.onPortalNotificationClose),this.notificationWhitelist.set(tR.D_.Notification,{props:{size:!0,theme:!1,hideBeak:!1,directionalHint:!1},isValid:e=>this.isValidNotificationElement(e),render:(e,t,n)=>{let{key:i,size:r,theme:s=tR.CD.Light,hideBeak:o}=t,a=this.notificationMap.get(e);return tD.createElement(t8,{size:r,hideBeak:o,key:i,notificationData:a.component.data,onDismiss:()=>{this.closeNotification(e)},theme:s},n)}}),this.componentManager.addComponentType(t7,0,this.notificationWhitelist)}getTargetElementFinder(e,t){if(e.type===tR.LB.Region)return()=>this.integrationPortalService.getIntegrationContainer();let n=()=>this.findElementByAnalyticsId(e.value);if(n())return n;console.warn("Invalid notification target"),this.sendNotificationResponseMessage(t,null,tR.xR.Failure,tR.ZN.InvalidTargetError,"Invalid notification target")}findNotification(e){let t=Array.from(this.notificationMap.values()).find(t=>t.component.notificationId===e);if(t)return t.component}constructor(e,t,n,i,r){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.ftueManager=i,this.portalManager=r,this.notificationWhitelist=new Map,this.isValidNotificationElement=e=>tR.yf.has(e.props.size)?(e.props.theme&&!tR.wV.has(e.props.theme)&&console.warn(`Invalid prop \`theme\` of value ${e.props.theme} supplied to ${e.tag}, expected one of [${Object.values(tR.CD)}];
        defaulting to ${tR.CD.Light} theme.`),e.props.hideBeak&&"boolean"!=typeof e.props.hideBeak&&console.warn(`Invalid prop \`hideBeak\` value: expected a \`boolean\` but received \`${typeof e.props.hideBeak}\`; defaulting to a visible beak.`),!0):(console.warn(`Invalid prop \`size\` of value ${e.props.size} supplied to ${e.tag}, expected one of [${Object.values(tR.l1)}].`),!1),this.findElementByAnalyticsId=e=>e?document.querySelector(`[data-analytics-id="${e}"]`)||document.querySelector(`[analytics-id="${e}"]`):null,this.createFTUEComponent=(e,t)=>{let n=new t9(t,this.ftueManager),i={component:n,element:t.element};return n.addListener(n=>{if(!n){this.sendNotificationStatus(e,t.portalId,t.notificationId,tR.RK.Removed);return}if(!t.targetElementFinder()){this.closeNotification(t.portalId),this.sendNotificationStatus(e,t.portalId,t.notificationId,tR.RK.Failed);return}this.currentNotification=i,this.sendNotificationStatus(e,t.portalId,t.notificationId,tR.RK.Visible)}),this.notificationMap.set(t.portalId,i),n},this.onPortalNotification=(e,t)=>{if(!e.selector||!tR.AQ.has(e.selector.type)){console.warn(`Invalid selector type provided ${e.selector&&e.selector.type}`),this.sendNotificationResponseMessage(t,null,tR.xR.Failure,tR.ZN.InvalidSelectorError,`Invalid selector type provided ${e.selector&&e.selector.type}`);return}if(e.selector.type===tR.LB.Region&&!tR.L4.has(e.selector.value)){console.warn(`Invalid selector value provided ${e.selector&&e.selector.value}`),this.sendNotificationResponseMessage(t,null,tR.xR.Failure,tR.ZN.InvalidSelectorError,`Invalid selector value provided ${e.selector&&e.selector.value}`);return}if(!this.portalManager.validateContents({portalType:t7,contents:e.contents,integrationId:t.id}).passed){this.sendNotificationResponseMessage(t,null,tR.xR.Failure,tR.ZN.FailedComponentValidationError,`Component validation failed; not rendering ${tR.D_.Notification}.`);return}let n=this.getTargetElementFinder(e.selector,t);if(!n)return;let i={element:this.integrationPortalService.generateUniqueDomElement(),portalId:tL.V(),notificationId:tL.V(),owningIntegrationId:t.id,targetElementFinder:n,selector:e.selector},r=this.createFTUEComponent(t,i);return this.render(r,i.element,e.contents).then(()=>{this.sendNotificationResponseMessage(t,i.notificationId,tR.xR.Success),this.sendNotificationStatus(t,i.portalId,i.notificationId,tR.RK.Queued)})},this.removeNotificationFromQueue=e=>{e.dispose(),this.notificationMap.delete(e.portalId)},this.clearPortalNotification=()=>{this.notificationMap.forEach(e=>{let t=this.findNotification(e.component.notificationId);this.currentNotification&&this.currentNotification.component.notificationId===t.notificationId?this.closeNotification(t.portalId):this.removeNotificationFromQueue(t)})},this.onPortalNotificationClose=(e,t)=>{let n=this.findNotification(e.notificationId);if(!n){console.warn("Notification not found"),this.sendCloseNotificationResponse(t,e.notificationId,tR.xR.Failure,tR.ZN.NotificationNotFoundError,"Notification not found");return}if(n.integrationId!==t.id){console.warn(`${t.id} does not have ownership of the current notification`),this.sendCloseNotificationResponse(t,e.notificationId,tR.xR.Failure,tR.ZN.NoOwnershipError,`${t.id} does not have ownership of the current notification--not closing notification`);return}this.currentNotification&&this.currentNotification.component.notificationId===e.notificationId?this.closeNotification():(this.removeNotificationFromQueue(n),this.sendNotificationStatus(t,n.portalId,n.notificationId,tR.RK.Removed)),this.sendCloseNotificationResponse(t,e.notificationId,tR.xR.Success)},this.render=(e,t,n)=>new Promise(i=>{t$.render(tD.createElement(tB.g,{babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,locale:this.bbLocalize.getLocale(null),isRtl:this.bbLocalize.isRTL()},tD.createElement(tZ,{component:e,contents:n})),t,()=>{i()})}),this.sendCloseNotificationResponse=(e,t,n,i,r)=>{this.integrationService.sendMessage({type:tR.Eo.NotificationCloseResponse,notificationId:t,status:n,...i&&{error:i},...r&&{errorMessage:r}},e)},this.sendNotificationResponseMessage=(e,t,n,i,r)=>{this.integrationService.sendMessage({type:tR.Eo.NotificationResponse,status:n,notificationId:t,...i&&{error:i},...r&&{errorMessage:r}},e)},this.sendNotificationStatus=(e,t,n,i)=>{this.integrationService.sendMessage({type:tR.Eo.NotificationStatus,status:i,notificationId:n,portalId:t},e)},this.closeNotification=e=>{if(!this.currentNotification&&!e)return;let t=this.currentNotification;e&&(t=this.notificationMap.get(e)),t&&(t$.unmountComponentAtNode(t.element),setTimeout(()=>{this.removeNotificationFromQueue(t.component),this.currentNotification=void 0},500))},this.notificationMap=new Map}}(tP.Z,tN,tx.yW,S.uS,tx.hE);let nt=()=>{tK.ZP.subscribe((e,t)=>{t.isLaunchedInNewWindow=!!t.isLaunchedInNewWindow,tP.Z.sendEventMessage({type:tR.Fm,eventType:tR.Kj.Route,routeName:e,routeData:t})},tK.i$.Changed),tK.ZP.subscribe((e,t)=>{e.includes("classic")&&ne.clearPortalNotification(),t.isLaunchedInNewWindow=!!t.isLaunchedInNewWindow,tP.Z.sendEventMessage({type:tR.Fm,eventType:tR.Kj.RouteChanging,routeName:e,routeData:t})},tK.i$.Changing)};var nn=n(608555),ni=n(410628);let nr=e=>{let t=(0,ni.q)(),{panelType:n,panelTitle:i,panelSubtitle:r,integrationId:s,showPanel:o,portalId:a,onPanelClose:l,stackIndex:c,useCustomPadding:d,closeButtonAriaLabel:u,resolver:p}=e,m=null!=u?u:t("global.close");return tD.createElement(nn.BbPanel,{isOpen:o,onDismiss:()=>l(a,s),type:n,stackIndex:c,analyticsId:"components.directives.integration.integrationPanel",excludeContentPadding:d,closeButtonAriaLabel:m},tD.createElement(nn.BbPanelHeader,{title:i,smallHeaderTitle:r,navMenuAriaLabel:t("global.navigationMenu")}),tD.createElement("div",{className:"integration-panel"},tD.createElement("div",{className:"integration-panel-contents"},tD.createElement(tx.$2,{portalId:a,initialOwningIntegrationId:s,portalType:ns,skipCustomValidation:!0,onRegistered:p}))))},ns="panel",no=e=>{switch(e){case tR.Nc.Full:return tO.BbPanelType.full;case tR.Nc.Small:return tO.BbPanelType.peek;default:return console.warn(`Received unknown panel type ${e}`),null}};var na=new class{init(e){this.bbLocalize=e,this.integrationService.addIntegrationMessageType(tR.dq.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(tR.dq.PanelClose,this.onPortalPanelClose),this.componentManager.addComponentType(ns,1)}removePanel(e){e&&setTimeout(()=>{t$.unmountComponentAtNode(e),e.remove()},500)}constructor(e,t,n,i){this.integrationService=e,this.integrationPortalService=t,this.componentManager=n,this.portalManager=i,this.onPortalPanel=(e,t)=>{let{panelTitle:n,correlationId:i,useCustomPadding:r}=e;if(this.componentManager.overMaxComponents(ns)){console.warn("Panel is already open; not opening another one"),this.sendPanelMessage(t,null,tR.xR.Failure,i);return}if(!n){console.warn("Received a panel event without a panelTitle; not opening panel"),this.sendPanelMessage(t,null,tR.xR.Failure,i);return}if(null===no(e.panelType)){this.sendPanelMessage(t,null,tR.xR.Failure,i);return}let s=tL.V();if(!this.updatePanelAttributes(e,s)){console.warn("Received a panel event without proper attributes or with a missing callback id."),this.sendPanelMessage(t,null,tR.xR.Failure,i);return}let o=this.integrationPortalService.generateUniqueDomElement();return o.className="integration-panel",this.currentPanelData={element:o,panelType:e.panelType,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,owningIntegrationId:t.id,portalId:s,useCustomPadding:r||!1,closeButtonAriaLabel:e.closeButtonAriaLabel},this.renderPanel(this.currentPanelData,!0).then(()=>{this.sendPanelMessage(t,this.currentPanelData.portalId,tR.xR.Success,i)})},this.updatePanelAttributes=(e,t)=>{let n=e.attributes;if(!n)return!0;let i={},r=Object.keys(n).filter(e=>!n[e]||!n[e].callbackId);return r.length>0?(console.warn(`Panel attributes [${r.join(",")}] are missing callbackId parameters`),!1):(Object.keys(n).forEach(e=>{let t=n[e];i={...i,[e]:{callbackId:t.callbackId}}}),this.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:i}),!0)},this.renderPanel=(e,t)=>{let n=(0,er.kpV)()+1,i=no(e.panelType);return new Promise(r=>{t$.render(tD.createElement(tB.g,{locale:this.bbLocalize.getLocale(null),babelfishInstance:this.bbLocalize.intl,babelfishFormatInstance:this.bbLocalize.frmt,isRtl:this.bbLocalize.isRTL()},tD.createElement(nr,{panelType:i,panelTitle:e.panelTitle,panelSubtitle:e.panelSubtitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:this.onPanelCloseAction,stackIndex:n,useCustomPadding:e.useCustomPadding,resolver:r,closeButtonAriaLabel:e.closeButtonAriaLabel})),e.element)})},this.onPortalPanelClose=(e,t)=>{let n=t.id,i=this.portalManager.getPortalData(e.id);if(!i){console.warn(`no panel has an id of ${e.id}`);return}if(i.getOwningIntegrationId()!==n){console.warn(`The integration ${n} does not own the portalId of ${e.id}; not closing anything`);return}return this.renderPanel(this.currentPanelData,!1)},this.onPanelCloseAction=(e,t)=>{this.renderPanel(this.currentPanelData,!1);let n=this.portalManager.getPortalData(e);if(!n)return;let i=tR.Hh.onClose,r=this.panelAttributesEvents.get(n.portalId),s=r&&r.subscribedAttributes[i],o=this.integrationService.findIntegration(t);if(this.portalManager.removePortal({portalId:e,owningIntegrationId:t}),this.removePanel(this.currentPanelData.element),this.currentPanelData=null,s&&o){let e={type:tR.l4.PortalCallback,callbackId:r.subscribedAttributes[i].callbackId,portalId:n.portalId,event:i};this.integrationService.sendMessage(e,o)}},this.sendPanelMessage=(e,t,n,i)=>{this.integrationService.sendMessage({type:tR.dq.PanelResponse,status:n,portalId:t,correlationId:i},e)},this.panelAttributesEvents=new Map}}(tP.Z,tN,tx.yW,tx.hE),nl=n(909987),nc=n(667341),nd=n(968761),nu=n(144958);let np=(e,t,n)=>{let[i,r]=(0,tD.useState)("");return(0,tD.useEffect)(()=>{let i=(0,nu.Ic)({bbFileData:{linkType:f.GQk.LtiPlacement.toString()},handle:e,courseId:n});i.customParameters=t,r((0,nu.Mo)(i))},[e,t,n]),i},nm=e=>{let{handle:t,customParameters:n,courseId:i,style:r,isOrganization:s}=e,o=np(t,n,i);return tD.useEffect(()=>{o&&tP.Z.sendEventMessage({type:tR.Fm,eventType:tR.Kj.LtiLaunch,launchData:{courseId:i,coursesOrOrganizations:s?"organizations":"courses",isLaunchedInNewWindow:!1,toolHref:o}})},[i,o,s]),tD.createElement("iframe",{src:o,allow:nu.sq,style:r})};var nh=new class{init(e){this.componentManager.addGlobalComponent(tR.qV.LtiLaunch,{props:{handle:!0,customParameters:!1,courseId:!1,style:!1},isValid:e=>!e.children,render:(t,n)=>{var i,r;let s=null!==(r=n.courseId)&&void 0!==r?r:null===(i=e.getCurrentUrlParams())||void 0===i?void 0:i.courseId,o=e.current.name.includes("organization");return tD.createElement(nm,{courseId:s,isOrganization:o,...n})}})}constructor(e){this.componentManager=e}}(tx.yW);let ng=(0,n(327355).makeStyles)({container:{maskImage:e=>`url(${e.url})`,WebkitMaskImage:e=>`url(${e.url})`,height:e=>`${e.height}`,width:e=>`${e.width}`,backgroundColor:"currentColor"}}),nf=RegExp(`(^[\\u0000-\\u001F ]*${/d([\r\n\t])*a\1*t\1*a\1*:\1*i\1*m\1*a\1*g\1*e\1*\/\1*s\1*v\1*g\1*\+\1*x\1*m\1*l\1*;\1*/i.source})|(${/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.source})`,"i"),nb=new Map([["uef--base-nav-svg","svg-icon medium-icon default integration-svg-icon"],["uef--svg-icon","svg-icon"]]),nv=new Map([["classname",e=>(0,tx.PV)(e,nb)]]),ny=e=>{let{url:t,height:n,width:i,className:r,style:s}=e,o=ng({url:t,height:n,width:i});return tD.createElement("div",{className:`${r} ${o.container}`,style:s})};var nS=new class{constructor(e){this.componentManager=e,this.init=()=>{this.componentManager.addGlobalComponent(tR.qV.SvgIcon,{props:{url:!0,height:!0,width:!0,className:!1,style:!1},isValid:e=>this.isValidSvgUrl(e.props),render:(e,t)=>tD.createElement(ny,t),transformers:nv})},this.isValidSvgUrl=e=>e.url?e.height||e.width?!!nf.test(e.url)||(console.warn(`Unsupported URI received for ${tR.qV.SvgIcon}: [${e.url}] Only HTTPS and data:image/svg+xml data URIs are supported.`),!1):(console.warn(`A height and/or width is required for ${tR.qV.SvgIcon}, but no value for \`height\` and/or \`width\` was given.`),!1):(console.warn(`A url is required for ${tR.qV.SvgIcon}, but no value for \`url\` was given.`),!1)}}(tx.yW),nC=n(555072),nE=n(302626);let nI=new Map([["uef--action-menu--extension","action-menu-extension"],["uef--action-menu--labeled","action-menu-labeled"]]),nw=new Map([["uef--course-details--menu-label","blue-link select-value"]]);var nA=new class{init(){let e=new Map;e.set("items",(e,t,n)=>e?e.map(e=>({...e,callback:(0,tx.rc)(e.callbackId,tR.dX.onClick,t,n)})):e),this.componentManager.addGlobalComponent(tR.qV.ActionMenu,{props:{items:!0,label:!0,className:!0,labelClassName:!0},transformers:e,isValid:e=>!e.children,render:(e,t)=>{var n;if(!t.items)return;let i=t.items.map((e,t)=>({key:t,name:e.name,onClick:e.callback})),r=t.label?tD.createElement("span",{className:(0,tx.PV)(t.labelClassName,nw)},t.label):null,s=`components.services.integration.${t.analyticsId||"unknown"}.actionMenu`;return tD.createElement(tO.ActionMenu,{ariaLabel:t.ariaLabel,menuProps:{items:i},className:null!==(n=(0,tx.PV)(t.className,nI))&&void 0!==n?n:"action-menu-extension",analyticsId:s},r)}})}constructor(e){this.componentManager=e}}(tx.yW),nk=n(625506),nT=new class{batchIntegrationPageAnalyticsRequest(e,t){let n=this.integrationGroup.get(t);if(this.integrationGroup.has(t)){if(n.requestCount+=1,1===this.integrationGroup.size&&n.requestCount>tR.RU.RateLimit||this.integrationGroup.size>1&&n.requestCount>tR.RU.RateLimit){console.warn("Rate limit of page level analytics event reached");return}e.analyticsIds.forEach(e=>{n.analyticsIds.add(e)})}else this.integrationGroup.set(t,{analyticsIds:new Set(e.analyticsIds),requestCount:1})}checkAnalyticsIdElementVisibility(){let e=new Map;this.integrationGroup.forEach((t,n)=>{let i=[],r=new Set(t.analyticsIds);t.analyticsIds.forEach(t=>{if(e.has(t)){i.push(e.get(t)),r.delete(t),this.sendAnalyticsMessage(r,i,n);return}let s=this.getDataAnalyticsElements(t);if(0===s.length){let s={analyticsId:t,isElementVisible:!1};e.set(t,s),i.push(s),r.delete(t),this.sendAnalyticsMessage(r,i,n);return}let o=new IntersectionObserver((s,o)=>{let a={analyticsId:t,isElementVisible:this.isElementsAvailableInViewport(s)};e.set(t,a),i.push(a),s.forEach(e=>{o.unobserve(e.target)}),r.delete(t),this.sendAnalyticsMessage(r,i,n)},{threshold:1});s.forEach(e=>{o.observe(e)})})})}isElementsAvailableInViewport(e){return e.some(e=>(this.accessibility.isElementInActivePanel(nk(e.target))||this.isElementAvailableInMslayer(e.target))&&e.isIntersecting)}isElementAvailableInMslayer(e){var t,n;return null!==(n=null===(t=document.querySelector("div.ms-Layer"))||void 0===t?void 0:t.contains(e))&&void 0!==n&&n}getDataAnalyticsElements(e){return document.querySelectorAll('[analytics-id="'+e+'"], [data-analytics-id="'+e+'"]')}sendAnalyticsMessage(e,t,n){if(0===e.size){let e={type:tR.$3,results:t};this.integrationService.sendMessage(e,n)}}initPageAnalytics(e){this.accessibility=e,this.integrationService.addIntegrationMessageType(tR.$3,this.isElementAvailableInCurrentPage)}constructor(e){this.integrationService=e,this.timerId=null,this.integrationGroup=new Map,this.TimeoutMs=1e3,this.isElementAvailableInCurrentPage=(e,t)=>{this.batchIntegrationPageAnalyticsRequest(e,t),this.timerId||(this.timerId=setTimeout(()=>{this.checkAnalyticsIdElementVisibility(),this.timerId=void 0,this.integrationGroup.clear()},this.TimeoutMs))}}}(tP.Z);let nP=(e,t,n,i)=>{tH.Z.init(),tz.init(),tN.init(),nl.Z.init(e,t),nc.Z.init(t),na.init(e),tV.init(e),ne.init(e),tW.Z.addHoverListener(),tW.Z.addClickListener(),nt(),nd.Z.init(e),nh.init(n),nS.init(),nA.init(),nC.ZP.init(),nT.initPageAnalytics(i),nE.ZP.init()};class nD{start(){this.routeListener.subscribe(this.handleRouteChanging,tK.i$.Changing),this.routeListener.subscribe(this.handleRouteChanged,tK.i$.Changed)}get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}constructor(e,t){this.routeListener=e,this._started=!0,this.handleRouteChanging=()=>{this.started=!1},this.handleRouteChanged=()=>{this.started=!0},this.onStateChanged=e=>{this.startedCallback=e},t.addWatcher(this)}}var nx=n(553374),nR=n(601983),nL=n(3636),nN=n(941124),n$=n(458967);let nO="ultra.directives.validate.bbmlmarkup",nG={img:["id"]};class n_{constructor(e,t){this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=()=>(null===this.whitelistInitializer&&(this.whitelistInitializer=this.$http.get("/learn/api/v1/utilities/bbml/whitelist").then(e=>{this.whitelist={};let t=(e.data[":all"]||[]).concat(nG[":all"]||[]);e_.forEach(e.data,(e,n)=>{let i={};e_.each(e.concat(t,nG[n]||[]),e=>{i[e]=e}),this.whitelist[n]=i})},()=>{this.whitelist=null})),this.whitelistInitializer),this.validate=e=>{if(null===this.whitelist||1!==e[0].nodeType)return!0;let t=e[0].tagName.toLowerCase();if(!Object.prototype.hasOwnProperty.call(this.whitelist,t))return!1;let n=this.whitelist[t];return e_.every(e[0].attributes,e=>Object.prototype.hasOwnProperty.call(n,e.name.toLowerCase()))&&e_.every(e.children(),e=>this.validate(l(e)))},this.getValidator=(e,t,n,i)=>e=>{let n=this.$q.defer();return this.initialWhitelist().then(()=>{e_.every(t.children(),e=>this.validate(l(e)))?n.resolve():n.reject()}),n.promise},this.link=(e,t,n,i)=>{i.$asyncValidators.bbmlMarkup=this.getValidator(e,t,n,i)}}}n_.$inject=["$q","$http"];class nM extends n_{}c.module(nO,[B.moduleName]).directive("bbValidateBbmlMarkup",["$injector",e=>e.instantiate(n_)]);var nB=n(625506);let nF="ultra.directives.validate.bbmlmarkup.sanitize",nU={style:e=>null,":default":e=>{let t=nB("<span></span>");return t.text(e.text()),t}};class nV extends nM{constructor(...e){super(...e),this.validate=e=>{if(null===this.whitelist)return!0;let t=!0;if(1!==e[0].nodeType)return!0;let n=e[0].tagName.toLowerCase();if(Object.prototype.hasOwnProperty.call(this.whitelist,n)){let i=this.whitelist[n];e_.each(Array.prototype.slice.apply(e[0].attributes),n=>{Object.prototype.hasOwnProperty.call(i,n.name.toLowerCase())||(e.removeAttr(n.name),t=!1)})}else{t=!1;let i=(nU[n]||nU[":default"])(e);if(null===i)return e.remove(),!1;e.replaceWith(i),e=i}return e_.each(e.children(),e=>{t=this.validate(nB(e))&&t}),t},this.getValidator=(e,t,n,i)=>e=>{let n=this.$q.defer();return this.initialWhitelist().then(()=>{let r=!0,s=nB("<span></span>");s.html(e),e_.each(s,e=>{r=this.validate(nB(e))&&r}),r||i.$setViewValue(t.html()),n.resolve()}),n.promise}}}angular.module(nF,[B.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",e=>e.instantiate(nV)]);var nH=n(394125);let nq="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,24}\\s*",nj=RegExp("^"+nq+",?$","i"),nz=RegExp("^"+nq+"(,+\\s*\\n*"+nq+")*,*\\s*$","i"),nW="ultra.directives.validate.emailAddress";class nK{constructor(){this.require="ngModel",this.link=(e,t,n,i)=>{i.$validators.email=function(e){return nj.test(e)||!e}}}}c.module(nW,[]).directive("bbValidateEmailAddress",["$injector",e=>e.instantiate(nK)]);let nZ="ultra.directives.validate.emailAddresses";class nQ{constructor(){this.require="ngModel",this.link=(e,t,n,i)=>{i.$validators.email=function(e){return!e||nz.test(e)}}}}c.module(nZ,[]).directive("bbValidateEmailAddresses",["$injector",e=>e.instantiate(nQ)]);let nJ="ultra.directives.validate.input";class nY{constructor(){this.require="?ngModel",this.link=(e,t,n,i)=>{i&&(t.on("focusin",()=>{i.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()}),t.on("focusout",()=>{i.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()}))}}}c.module(nJ,[]).directive("input",["$injector",e=>e.instantiate(nY)]).directive("textarea",["$injector",e=>e.instantiate(nY)]);let nX="ultra.directives.validate.kvp";class n0{getKVPValidator(e,t,n,i){return(e,t)=>{let n=t+"";if(""===n)return!0;let i=!0;return n.split("\n").forEach(e=>{e.trim().length>0&&i&&2!==e.split("=").length&&(i=!1)}),i}}constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,n,i)=>{i.$validators.kvp=this.getKVPValidator(e,t,n,i)}}}c.module(nX,[]).directive("bbValidateKeyValuePair",["$injector",e=>e.instantiate(n0)]);var n1=n(193905);let n2="ultra.directives.validate.maxlength",n4="bbValidateMaxlength";class n6{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=(e,t,n,i)=>e=>{let t=l("<textarea/>").val(e).text()||e;if(null==t)return!0;let r=n[n4];if(null==r||""===r)return!0;let s=t.length;"true"===(!!n.maxlengthAfterEscape&&n.maxlengthAfterEscape)&&(s=n1.Z.HTML(t).length);let o=n.maxlengthNotice?n.maxlengthNotice:Math.floor(.9*r).toString();return(o.match(/\%$/)&&(o=Math.floor(r*(1-(o=o.replace(/\D/,""))/100)).toString()),s>r)?(delete i.$warning.maxlengthWarning,i.$error.maxlength={maxlength:r,diff:s-r},i.$errorImmediate.maxlengthImmediate={maxlength:r,diff:s-r},!1):(s>=o?(delete i.$error.maxlength,delete i.$errorImmediate.maxlengthImmediate,i.$warning.maxlengthWarning={maxlength:r,left:r-s}):(delete i.$error.maxlength,delete i.$errorImmediate.maxlengthImmediate,delete i.$warning.maxlengthWarning),!0)},this.link=(e,t,n,i)=>{i.$validators.maxlengthValidator=this.getMaxlengthValidator(e,t,n,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}}c.module(n2,[B.moduleName]).directive(n4,[B.serviceName,e=>new n6(e)]);let n5="ultra.directives.validate.number";class n3{constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=(e,t,n,i)=>t=>{if(i.$isEmpty(t))return i.$setValidity("numberInvalid",!0),t;let r=this.regroup(e,i),s=this.bbLocalize.parseNumberSync(r,e);if(Number.isNaN(s))return i.$setValidity("numberInvalid",!1),s;i.$setValidity("numberInvalid",!0);let o=this.bbLocalize.getDecimalStringForScope(e),a=s.toString(),l=a.split(String(o)),c=n&&n.maxDecimal?Number(n.maxDecimal):B.Service.defaultDecimalPrecision;return l.length>1&&l[1].length>c&&(s=parseFloat(a=l[0]+o+l[1].substring(0,c)),this.reformatFromModel(i,s)),this.updateSelection(e,i,this.target,this.key),s},this.getMinValidator=(e,t,n,i)=>e=>{let t=parseFloat(n.min),r=i.$isEmpty(e);if(!r&&Number.isNaN(Number(e)))return delete i.$error.numberSmall,!1;let s=r||e>=t;return s?delete i.$error.numberSmall:i.$error.numberSmall={min:t},s},this.getMaxValidator=(e,t,n,i)=>e=>{let t=parseFloat(n.max),r=i.$isEmpty(e);if(!r&&Number.isNaN(Number(e)))return delete i.$error.numberLarge,!1;let s=r||e<=t;return s?delete i.$error.numberLarge:i.$error.numberLarge={max:t},s},this.getNumberFormatter=(e,t,n,i)=>t=>{let r=t||i.$modelValue;if(i.$setValidity("numberInvalid",!0),r||0===r){let t=n&&n.maxDecimal?n.maxDecimal:B.Service.defaultDecimalPrecision;return this.bbLocalize.formatNumberSync(parseFloat(r),e,{maximumFractionDigits:t,useGrouping:!0})}return""},this.regroup=(e,t)=>{let n=this.bbLocalize.regroupNumberSync(t.$viewValue,e);return t.$viewValue!==n&&(t.$viewValue=n,t.$render(),t.$validate()),n},this.reformatFromModel=(e,t)=>{t=t||e.$modelValue;let n=e.$formatters,i=n.length,r=t;for(;i--;)r=n[i](r);e.$viewValue!==r&&(e.$viewValue=r,e.$render(),e.$validate())},this.allowInput=(e,t,n,i)=>{if(!t||!t.key)return!1;let r=i.$viewValue,{selectionStart:s,selectionEnd:o}=t.target,a=this.bbLocalize.getGroupingStringForScope(e),l=this.bbLocalize.getDecimalStringForScope(e),c=this.bbLocalize.parseNumberSync(r,e),d=n&&n.maxDecimal?Number(n.maxDecimal):B.Service.defaultDecimalPrecision,u=t.key===a,p=o-s==0&&"Backspace"===t.key&&r[s-1]===a,m=o-s==0&&"Delete"===t.key&&r[s]===a,h=o-s==1&&r[s]===a&&("Backspace"===t.key||"Delete"===t.key),g=o-s==0&&!Number.isNaN(Number(t.key))&&this.target.selectionStart>r.indexOf(l)&&r.split(l)[1]&&r.split(l)[1].length>=d;!(o-s>1)&&!Number.isNaN(c)&&(p||m||u||h||g)&&t.preventDefault()},this.updateSelection=(e,t,n,i)=>{if(!i||-1!==["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(i))return;let r=Math.max(0,this.selectionEnd+t.$viewValue.length-this.oldViewValue.length);n.selectionStart=r,n.selectionEnd=r},this.link=(e,t,n,i)=>{t.on("blur",()=>{i.$valid&&this.reformatFromModel(i)}),t.on("focus",()=>{t.select()}),t.on("keydown",t=>{this.target=t.target,this.key=t.key,this.selectionStart=this.target.selectionStart,this.selectionEnd=this.target.selectionEnd,this.oldViewValue=i.$viewValue,this.allowInput(e,t,n,i)}),i.$parsers.push(this.getNumberParser(e,t,n,i)),i.$formatters.push(this.getNumberFormatter(e,t,n,i)),n.min&&(i.$validators.minValidator=this.getMinValidator(e,t,n,i),n.$observe("min",()=>{i.$validate()})),n.max&&(i.$validators.maxValidator=this.getMaxValidator(e,t,n,i),n.$observe("max",()=>{i.$validate()}))}}}c.module(n5,[B.moduleName]).directive("bbValidateNumber",[B.serviceName,e=>new n3(e)]);let n8="ultra.directives.validate.time";class n9{formatTime(e,t){return"ar-sa"===this.bbLocalize.getLocale(t)?this.getISOTime(e):this.bbLocalize.formatTimeSync(e,B.ILocaleTimeFormat.Short,t)}constructor(e){this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=e=>("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2),this.getTimeParser=(e,t,n,i)=>r=>{let s;if(i.$isEmpty(r))return i.$setValidity("time",!0),i.$modelValue;try{s=this.bbLocalize.parseTimeSync(r,B.ILocaleTimeFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("time",!1),i.$modelValue}return i.$setValidity("time",!0),(r="time"===n.type?this.getISOTime(s):this.formatTime(s,e))===i.$viewValue||(i.$setViewValue(r),t.is(":focus")||i.$render()),s},this.getTimeFormatter=(e,t,n,i)=>()=>{i.$setValidity("time",!0);let r=i.$modelValue;return i.$isEmpty(r)?t.val():"time"===n.type?this.getISOTime(r):this.formatTime(r,e)},this.link=(e,t,n,i)=>{i.$parsers.push(this.getTimeParser(e,t,n,i)),i.$formatters.push(this.getTimeFormatter(e,t,n,i)),t.on("blur",()=>{i.$render()})}}}c.module(n8,[B.moduleName]).directive("bbValidateTime",[B.serviceName,e=>new n9(e)]);let n7=RegExp("^(?:(?:https?|ftp)://)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i"),ie="ultra.directives.validate.url";class it{getUrlValidator(e,t,n,i){return e=>e?n7.test(e+"")?(delete i.$error.urlInvalid,!0):(i.$error.urlInvalid=!0,!1):(i.$error.urlInvalid&&delete i.$error.urlInvalid,!0)}constructor(){this.require="ngModel",this.restrict="A",this.link=(e,t,n,i)=>{i.$validators.url=this.getUrlValidator(e,t,n,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}}c.module(ie,[]).directive("bbValidateUrl",["$injector",e=>e.instantiate(it)]);var ii=n(956553);let ir=[nO,nF,nH.e1,nW,nZ,nJ,nX,n2,n5,n8,ie,ii.e1];n(788093),n(45224);var is=n(786430),io=n(129609),ia=n(991410),il=n(417526),ic=n(411832),id=n(649955),iu=n(563060);let ip="ultra.course.content.assignment.routes";c.module(ip,[B.moduleName,ia.e1,ic.e1,id.e1,L.e1,k.e1]).config([L.e2,k.e2,io.e2,(e,t,i)=>{e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:{[k.gc]:t.resolve,[io.gc]:i.resolve,contentData:[k.gc,ia.HV,L.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.assignmentId,contentHandler:P.courseContent.ContentHandler.UltraAssignment})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},peekStates:["conversations",iu.BQ.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[P.N7.H,ic.HV,L.HV,(e,t,n)=>{let i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;e.$new(i).contents.$find(n.nextParams.assignmentId).$then(e=>{e.canViewAsInstructor()?n.go(n.prev.name,n.prevParams).then(()=>{n.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})}):n.go(n.prev.name,n.prevParams).then(()=>{n.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})})})}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])],prefetch:["$q",P.N7.H,L.HV,(e,t,n)=>{let i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;A.default.features.httpEase&&t.$new(i).contents.$find(n.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then(e=>{t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})})}]},require:[()=>n.e(29302).then(n.bind(n,329302))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",iu.BQ.COURSE_MESSAGE],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[is.HV,L.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])]},require:[()=>Promise.all([n.e(8628),n.e(48390)]).then(n.bind(n,542206))],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations",iu.BQ.COURSE_MESSAGE,"rubric-evaluation","rubric-view",il._b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[is.HV,L.HV,e=>{e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>n.e(29302).then(n.bind(n,329302)),pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assignment/assignment")]},require:()=>n.e(29302).then(n.bind(n,329302)),pageTitle:"course.content.assignmentGrading"})}]);var im=n(108762),ih=n(89503),ig=n(84741),ib=n(65783),iv=n(643014);let iy="ultra.modules.groupattempt.activities",iS="ultra.services.groupattempt.activities",iC="ultra.services.groupattempt.activities.dialog",iE="bbGroupAttemptActivitiesPeek",iI=RegExp("assessment\\.overview\\.attempt("+L.qt.replace(/\./g,"\\.")+".+)?$"),iw={USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL"},iA=c.module(iy,["ng"]);iA.factory(iS,["$injector","$q","$log","$http","$rootScope",eg.HV,C.H,L.HV,function(e){let t=e.get("$q"),n=e.get("$http"),i=e.get("$rootScope"),r=e.get(eg.HV);return tc.Z.OnRootScope(i,"$stateChangeError",function(t,n,i){iI.test(n.name)&&e.get(L.HV).go(n.name.replace(/\.attempt$/,""),i)}),{new:(e,i)=>{let s=(e,t)=>{e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status},o=t.when(null),a={myId:r.userId,request(){return o=o.then(()=>{let r=t.defer();return n.put(`${A.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`,{}).then(e=>{s(this,e.data),r.resolve(this)}),r.promise})},keepAlive(r){o=o.then(o=>{let l=t.defer();return e_.some(this.queue.concat(this.userId),e=>this.myId===e)?n({method:"PATCH",url:`${A.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`}).then(e=>(s(this,e.data),t.when(r(this)).then(e=>{if(e_.some(this.queue.concat(this.userId),e=>this.myId===e)&&e){let e=new Date().getTime(),t=()=>{window.requestAnimationFrame(()=>{new Date().getTime()-e>=5e3?a.keepAlive(r):t()})};t()}}))).finally(()=>{l.resolve(this)}):l.resolve(this),l.promise})},release(){return o=o.then(()=>{let r=t.defer();return n.delete(`${A.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`).then(e=>{s(this,e.data),r.resolve(this)}),r.promise})},kickout(){return o=o.then(()=>n.delete(`${A.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities/waiting`))},peek(){return o=o.then(()=>{let r=t.defer();return n.get(`${A.default.apiBasePath}/v1/courses/${e}/gradebook/groupAttempts/${i}/activities`).then(e=>{s(this,e.data),r.resolve(this)}),r.promise})}};return a}}}]),iA.factory(iC,["$injector","$q","$log","$http","$rootScope",B.serviceName,L.HV,ib.HV,ig.HV,P.EA.HV,function(e){let t=e.get(ib.HV),n=e.get("$rootScope"),i=e.get(ig.HV),r=e.get(P.EA.HV),s=e.get(B.serviceName),o="features.course.content.assessment.group-attempt.activities",a=(e,n)=>{let s=t.open({template:iv,scope:e,controller:["$scope",function(e){}]});return s.refresh=function(t){i.performBatch(()=>{let n=e.queuedUsers;e.owner&&(n[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&r.$find(t.userId).$then(t=>{e.owner=t}),t.queue.forEach((t,i)=>{Object.prototype.hasOwnProperty.call(n,t)?e.queuedUsers[t]=n[t]:r.$find(t).$then(n=>{e.queuedUsers[t]=n})})})},s.scope=e,s.refresh(n),s.result.finally(()=>{s.scope.$destroy()}),s};return{openRequest:e=>{let t;let i=n.$new();return e_.extend(i,{hideOK:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_editing`}},modalStrings:{instructions:s.translateSync({locale:null,key:`${o}.msg_taken_by_other_group_member`}),ok:s.translateSync({locale:null,key:`${o}.takecontrol`}),cancel:s.translateSync({locale:null,key:`${o}.cancel`})},queuedUsers:{},additionalClass:"requesting",okAction:()=>{i.$broadcast(iw.USER_REQUEST_CONTROL)},cancelAction:()=>{t.dismiss()}}),t=a(i,e)},openNotify:e=>{let t;let i=n.$new();return e_.extend(i,{hideOK:!1,modalTranslateOptions:{title:{key:`${o}.title_group_member_requesting`}},modalStrings:{instructions:s.translateSync({locale:null,key:`${o}.msg_taking_by_other_group_member`}),ok:s.translateSync({locale:null,key:`${o}.leave`}),cancel:s.translateSync({locale:null,key:`${o}.ignore`})},queuedUsers:{},additionalClass:"notifying",okAction:()=>{i.$broadcast(iw.USER_RELEASE_CONTROL)},cancelAction:()=>{t.dismiss()}}),t=a(i,e)},openDeclined:e=>{let t;let i=n.$new();return e_.extend(i,{hideCancel:!0,modalTranslateOptions:{title:{key:`${o}.title_group_member_request_decline`}},modalStrings:{instructions:s.translateSync({locale:null,key:`${o}.msg_control_request_declined`}),ok:s.translateSync({locale:null,key:`${o}.ok`})},queuedUsers:{},additionalClass:"declined",okAction:()=>{t.dismiss()}}),t=a(i,e)}}}]),iA.directive(iE,[L.HV,C.H,iS,function(e,t,n){return{restrict:"A",link:(i,r,s)=>{r.addClass("group-attempt-activities-observe");let o=i.$watch(s[iE],s=>{if(s&&o(),s&&s.groupId&&s.isInProgress()){let o=n.new(e.params.courseId,s.id),a=()=>{o.peek().then(e=>{e.status&&(s.status=e.status),e_.extend(i,{groupAttemptOwnerId:e.userId});let n="group-attempt-has-owner";e.userId?r.addClass(n):r.removeClass(n),t(a,i,5e3)})};a()}})}}}]);class ik{isRelatedState(e){return iI.test(e)}constructor(e){let t;this.delegatee=e,this.isResolvingControl=!1,e_.forEach(e,(e,t)=>{this[t]=e});let n=["$injector","$http","$q","$rootScope",C.H,L.HV,P.N7.H];this.resolve=this.resolve||{};let i=e=>{let n=e.get("$q"),i=e.get("$rootScope"),r=e.get(C.H),s=e.get(L.HV),o=e.get(P.N7.H),a=e.get(iS),l=e.get(iC);if(!this.isRelatedState(s.next.name))return n.when(!0);if(this.isResolvingControl)return n.reject();this.isResolvingControl=!0;let c=n.defer(),d=s.nextParams;return o.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then(e=>{if(!e.isGroupContent){c.resolve(!0),t=null;return}(t=a.new(d.courseId,d.attemptId)).peek().then(e=>{if(e.userId&&e.myId!==e.userId){i.$broadcast("hideInitialLoadingArea");let t=l.openRequest(e);t.result.then(()=>{},()=>{e.release(),c.reject()}),e.request().then(()=>{e.keepAlive(()=>e.myId===e.userId?(t.close(),c.resolve(!0),!1):e.queue.some(t=>e.myId===t)?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),c.reject(),r(()=>{l.openDeclined(e)},i,200),!1))})}else c.resolve(!0)})}),c.promise.finally(()=>{this.isResolvingControl=!1})},r=this.resolve;if(r.translateGroupAttemptControl=[B.serviceName,e=>{e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],r.attempt){let e=r.attempt;r.attempt=["contentData"].concat(n).concat((t,r)=>{let s=r.get("$q"),o=r.get(L.HV);return s.when(r.invoke(n.concat(i))).then(()=>r.invoke(e,null,{contentData:t})).then(e=>this.isRelatedState(o.next.name)&&e.isSubmitted()?(r.get(L.HV).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),s.reject()):e)})}else r.takeControlOnGroupAttempt=n.concat(i);let s=this,o=s.onExit;s.onExit=n.concat(e=>{this.isRelatedState(e.get(L.HV).prev.name)&&(o&&e.invoke(o),t&&(t.release(),(s.__childScope||{$destroy:c.noop}).$destroy()))});let a=s.onEnter;s.onEnter=n.concat(e=>{let n;let i=e.get("$rootScope"),r=e.get(iC),o=e.get(L.HV);if(!this.isRelatedState(o.next.name)||(a&&e.invoke(a),!t))return;let l=!1,c=()=>{l=!0},d=()=>{l=!1},u=i.$new();u.$on(ih.Kn,c),u.$on(ih.j7,c),u.$on(ih.sg,d),u.$on(ih.Mc,d),s.__childScope=u,t.request().then(e=>{e.keepAlive(e=>!!l||!!this.isRelatedState(o.current.name)&&(e.userId!==e.myId?(o.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?n?n.refresh(e):((n=r.openNotify(e)).result.then(()=>{},()=>{e.kickout(),n=null}),n.scope.$on(iw.USER_RELEASE_CONTROL,()=>{n.close(),i.$broadcast(ih.dX);let t=u.$on("$stateChangeAbort",(i,r)=>{"ABORTED_BY_FILE_UPLOAD"===(r||{}).reason&&(t(),e.kickout()),n=null})})):n&&(n.close(),n=null),!0)))})})}}var iT=n(401760),iP=n(610761),iD=n(289319),ix=n(751597),iR=n(12838),iL=n(986709),iN=n(540229),i$=n(292352),iO=n(363411),iG=n(374212);let i_="ultra.course.content.assessment.routes",iM={onEnter:["contentData","attempt",is.HV,L.HV,"$stateParams",iP.HV,function(e,t,n,i,r,s){if(!r.skipTransitionEvents){if(r.viewOriginalityReport&&!r.forceOpenFeedbackPanel){i.goPeekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB);return}i.isPeekPanelOpen()&&n.expandTopPanel(),function(e,t,n,i,r){var s;let o=null==e?void 0:null===(s=e.gradingColumn)||void 0===s?void 0:s.peerGrading,a=n.next.name.includes("assessment-submission-feedback"),l=n.next.name.includes("assessment-submission-feedback-tab"),c=n.next.name.includes("rubric"),d=!n.prev.name,u=r.isSmallBreakpoint();if(o||a||l||c||d||u)return!1;let p=ix.e.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail);return i.forceOpenFeedbackPanel&&p}(e,t,i,r,s)&&i.goPeekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{attemptId:t.id})}}],onExit:["contentData",is.HV,L.HV,"$q","$stateParams",function(e,t,n,i,r){if(!r.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let r=i.when();n.isPeekPanelOpen()&&(r=t.shrinkTopPanel()),r.then(()=>{n.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:this.viewOriginalityReport})})}}]},iB={onEnter:[L.HV,iO.HV,(e,t)=>{t.createWaiter(f.x40.FlexibleAttemptGradingM1).then(t=>{iG.AssessmentType.Survey.toString().toLowerCase()!==e.params.assessmentType.toLowerCase()&&(t||e.goCurrentBasePage())})}]};c.module(i_,[ic.e1,L.e1,il.e1,iT.e1,iy,k.e1,iD.H2,ix.e1]).config([L.e2,k.e2,io.e2,iD.AX,(e,t,i)=>{e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:{[k.gc]:t.resolve}}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[P.N7.H,ic.HV,L.HV,(e,t,n)=>{let i=n.nextParams.contentId,r=n.nextParams.courseId,s=n.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([iR.s7.ViewAssessment,iR.s7.ModifyAssessment],r).then(e=>{if(e)n.goPeekState(iu.RK.GRADEBOOK_ITEM_ASSESSMENT,{courseId:r,contentId:i,gradeitemView:"details",assessmentType:"test"});else{let e=iu.eJ.ASSESSMENT_OVERVIEW;s&&(e=iu.eJ.ASSESSMENT_EXTERNAL_OVERVIEW),n.goPeekState(e,{courseId:r,contentId:i})}})}]}).peekState("assessment.overview",{url:"/overview",resolve:{contentData:[k.gc,ia.HV,L.HV,iD.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId,contentExtraExpand:"alignedGoals"}).then(e=>(i.setCurrentContent(e.courseContent),e))],[io.gc]:i.resolve,translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])],onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}]},peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",iu.BQ.COURSE_MESSAGE,iu.eJ.ASSESSMENT_PEER_GRADING],pageTitle:"course.content.assessment.overview.pageTitle",require:[()=>Promise.all([n.e(27993),n.e(55357),n.e(98377),n.e(61105),n.e(80325),n.e(22697)]).then(n.bind(n,446829)),()=>Promise.all([n.e(98290),n.e(21749),n.e(27993),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(80325),n.e(494),n.e(69877),n.e(54532)]).then(n.bind(n,869877))]}).peekState(iu.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,{panelClass:"screen flexible-attempt-grading-panel",url:"/flexible-attempt-grading?contentId&userId&attemptId&gradeBy&questionId&gradingStatus&gradeId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(30172)]).then(n.bind(n,530172)),resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/grades/flexible-attempt-grading")],currentContent:im.Z.currentContent,currentColumn:im.Z.currentColumn},...iB,pageTitle:"course.grades.flexibleAttemptGrading.title",allowChildPeekStates:!0}).peekState(iu.eJ.ASSESSMENT_PEER_GRADING,{panelClass:"full",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:im.Z.currentColumn,currentContent:im.Z.currentContent},url:"/peerReview?columnId&gradeId&userId&attemptId&initialPeerIndex",onExit:["currentColumn",is.HV,L.HV,(e,t,n)=>{n.goPeekState("assessment.overview",{})}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(50276)]).then(n.bind(n,850276)),()=>Promise.all([n.e(98290),n.e(21749),n.e(42641),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(61496),n.e(33979),n.e(3780),n.e(8628),n.e(48076),n.e(35259),n.e(96926),n.e(79084),n.e(5252),n.e(66621),n.e(23177)]).then(n.bind(n,136928))],pageTitle:"course.grades.peer-grading.title",peekViewName:"peer-grading-peek",peekStates:[]}).peekState(`${iu.eJ.ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB}`,{url:"/inline-feedback?&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${iu.eJ.ASSESSMENT_PEER_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013)]).then(n.bind(n,867589))}}}).peekState(iu.eJ.ASSESSMENT_EXTERNAL_OVERVIEW,{url:"/external-overview",panelClass:"full",resolve:{contentData:[k.gc,ia.HV,L.HV,iD.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],[io.gc]:i.resolve,currentContent:["contentData","$q",(e,t)=>t.when(e.courseContent)],currentColumn:["contentData","$q",(e,t)=>t.when(e.gradingColumn)],translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])],onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}]},peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations",iu.BQ.COURSE_MESSAGE,"rubric-view","rubric-evaluation"],require:[()=>Promise.all([n.e(27993),n.e(55357),n.e(98377),n.e(61105),n.e(80325),n.e(99281),n.e(47693)]).then(n.bind(n,666911)),()=>Promise.all([n.e(98290),n.e(21749),n.e(27993),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(55357),n.e(61496),n.e(98377),n.e(61105),n.e(80325),n.e(99281),n.e(47532)]).then(n.bind(n,620960))]}).peekState("assessment.overview.attempt",new ik({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[is.HV,L.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",iD.D$,(e,t)=>(t.setCurrentContent(e.courseContent),e.courseContent)],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",P.N7.H,L.HV,P.U_.serviceName,P.uy.HV,(e,t,n,i)=>{let r=i.nextParams.attemptId,s=t.courseContent.isGroupContent,o=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return s?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId,!1,r).then(e=>0===e.attempts.length&&e.isInProgress()?e.withParams({expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"}).$patch(["id"]).$asPromise():e.$asPromise()):o.attempts.$find(r,{expand:"toolAttemptDetail,alignedGoals"}).$then(e=>{t.attempt=e}).$asPromise()}]},params:{attemptId:null},peekStates:["conversations",iu.BQ.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view",iu.UM.LTI,iu.cw.CONTENT_MARKET,il._b,iT.ef],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[()=>n.e(79761).then(n.bind(n,679761)),()=>Promise.all([n.e(98290),n.e(21749),n.e(27993),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(80325),n.e(494),n.e(69877),n.e(54532)]).then(n.bind(n,869877))]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",e=>e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(33979),n.e(3780),n.e(41221)]).then(n.bind(n,341221))]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_IMS_PROCTORING,{url:"/proctoring/attempt?contentId&password&returnToProctoringToolOnEndAssessment",peekStates:["conversations",iu.BQ.COURSE_MESSAGE,"edit-file-settings","attempt-safe-assign-setting","rubric-view",il._b,iT.ef],resolve:{translations:[B.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[k.gc]:t.resolve,contentData:[k.gc,ia.HV,L.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})],[io.gc]:i.resolve,currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",ix.HV,L.HV,(e,t,n)=>{let{gradingColumn:i,courseContent:r}=e,s=n.nextParams.password,o=r.isGroupContent,a=r.assignedGroups?r.assignedGroups[0].groupId:null;return t.launchAttempt(i,s,o,a)}],onEnter:["contentData","attempt",L.HV,ib.HV,function(e,t,n,i){let{courseContent:r}=e,s=null==t?void 0:t.$response;if((null==s?void 0:s.status)===iL.oji.Forbidden){var o;switch(null==s?void 0:null===(o=s.data)||void 0===o?void 0:o.code){case iL.MlJ.AttemptCompletedOrForceCompletion:n.goPeekState(iu.eJ.ASSESSMENT_OVERVIEW,{contentId:r.id}).then(()=>{i.open({scope:this.$rootScope,template:iN})});break;case iL.MlJ.AttemptPastDue:n.goPeekState(iu.eJ.ASSESSMENT_OVERVIEW,{contentId:r.id}).then(()=>{i.open({scope:this.$rootScope,template:i$})})}}}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(19338),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(494),n.e(23966),n.e(68879)]).then(n.bind(n,368879)),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek",panelClass:"full"}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[k.gc,ia.HV,L.HV,iD.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},params:{detailsView:!0,submitToGRD:null},require:[()=>Promise.all([n.e(27993),n.e(55357),n.e(98377),n.e(61105),n.e(80325),n.e(22697)]).then(n.bind(n,446829)),()=>Promise.all([n.e(98290),n.e(21749),n.e(27993),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(80325),n.e(494),n.e(69877),n.e(54532)]).then(n.bind(n,869877))],peekStates:["attempt-safe-assign-setting"]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW,{url:"/review?columnId&contentId",panelClass:"full",resolve:{contentData:["contentData",k.gc,ia.HV,L.HV,iD.D$,(e,t,n,i,r)=>e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:i.nextParams.contentId}).then(e=>(r.setCurrentContent(e.courseContent),e))],[io.gc]:i.resolve},require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(61496),n.e(33979),n.e(3780),n.e(48076),n.e(27941)]).then(n.bind(n,694135))],...iM,params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",iu.BQ.COURSE_MESSAGE,iu.RK.SUBMISSION_DEEP_LINK,"rubric-view","originality-report",iu.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,iT.ef]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${iu.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013)]).then(n.bind(n,867589))}},peekStates:[iu.UM.LTI,iu.RK.SUBMISSION_DEEP_LINK]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${iu.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(44246)]).then(n.bind(n,244246))}},peekStates:[iu.UM.LTI,iu.RK.SUBMISSION_DEEP_LINK]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${iu.eJ.ASSESSMENT_ATTEMPT_REVIEW}@`]:{require:()=>n.e(5076).then(n.bind(n,905076))}},peekStates:[iu.UM.LTI,iu.RK.SUBMISSION_DEEP_LINK]}),e.peekState(iu.eJ.ASSESSMENT_SETTINGS,{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId?subpanelId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(10151),n.e(60979),n.e(55357),n.e(82589),n.e(86727),n.e(88710)]).then(n.bind(n,196798)),pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:[iu.eJ.ASSESSMENT_SETTINGS_DELEGATED_GRADERS,iu.eJ.ASSESSMENT_SETTINGS_DISTRIBUTED_GRADERS,"course-group","goal-picker-legacy",iu.mg.RUBRIC,iu.mg.RUBRIC_GENERATE,"proctoring-lti-tool","question-analysis"]}),e.peekState(iu.eJ.ASSESSMENT_AUTO_GENERATE_QUESTION,{url:"/generate-assessment-questions",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assessment/assessment")]},require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(58836),n.e(34925)]).then(n.bind(n,759445))],allowChildPeekStates:!0,peekStates:[iu.XO.CONTENT_PICKER],pageTitle:"course.content.assessment.generateQuestions.pageTitle",panelClass:"full"}),e.peekState(iu.eJ.ASSESSMENT_SETTINGS_DELEGATED_GRADERS,{panelClass:"full",url:"/assignDelegatedGraders",require:()=>n.e(35064).then(n.bind(n,535064)),pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assessment/assessment")]},peekViewName:"assign-graders-peek"}),e.peekState(iu.eJ.ASSESSMENT_SETTINGS_DISTRIBUTED_GRADERS,{panelClass:"full",url:"/assignDistributedGraders",require:()=>n.e(56373).then(n.bind(n,556373)),pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",params:{delegatedGraders:null,onSaveDelegatedGraders:null},resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assessment/assessment")]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:()=>n.e(86980).then(n.bind(n,286980)),params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013)]).then(n.bind(n,867589)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(47431),n.e(85828)]).then(n.bind(n,11490))],resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)]},pageTitle:"course.content.assessment.feedback.title"}).peekState(iu.RK.CREATE_OFFLINE_ATTEMPT,{url:"/create-attempt?expandId&userId&groupId&columnId&contentId",require:()=>Promise.all([n.e(60979),n.e(71189)]).then(n.bind(n,678546)),resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/assessment/attempt/create/create-attempt")]},pageTitle:"course.content.assessment.attempt.create.createAttempt",panelClass:"peek"}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[B.serviceName,e=>e.loadBundle("components/services/proctoring")]},require:()=>n.e(15471).then(n.bind(n,815471)),pageTitle:"components.services.proctoring.ltiTool.pageTitle"}).peekState(iu.RK.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>n.e(62615).then(n.bind(n,762615)),()=>n.e(75929).then(n.bind(n,275929))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(iu.RK.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${iu.RK.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(1349)]).then(n.bind(n,401349))}},peekStates:["per-assessment-settings",iu.UM.LTI,iu.RK.SUBMISSION_DEEP_LINK]}).peekState(iu.eJ.ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT,{url:"/respondusRequirement?contentId",resolve:{translations:[B.serviceName,e=>e.loadBundle("components/services/proctoring")]},panelClass:"full",require:[()=>n.e(39624).then(n.bind(n,139624))],pageTitle:"components.services.proctoring.delivery.attempt.pageTitle"}),e.peekState(iu.eJ.ASSESSMENT_AUTO_GENERATE,{url:"/generate-assessment?defaultGenerateTitle",resolve:{[k.gc]:t.resolve,currentContent:im.Z.currentContent},require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(7118)]).then(n.bind(n,431144))],pageTitle:"course.content.assessment.generateAuthenticAssessments.pageTitle",panelClass:"full"})}]);let iF="ultra.course.attendance.routes";c.module(iF,[L.e1,k.e1]).config([L.e2,k.e2,(e,t)=>{e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId&memberId&isSingleUserView",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},reloadOnSearch:!1,require:()=>Promise.all([n.e(30531),n.e(83081)]).then(n.bind(n,183081)),pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(78273)]).then(n.bind(n,778273)),pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{[k.gc]:t.resolve,translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(93190)]).then(n.bind(n,693190)),pageTitle:"course.attendance.studentRecords.pageTitle",allowChildPeekStates:!0,peekStates:[iu.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES]}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/attendance/attendance")])]},require:()=>Promise.all([n.e(30531),n.e(93190)]).then(n.bind(n,693190)),pageTitle:"course.attendance.studentRecords.pageTitle"})}]);var iU=n(276326),iV=n(625506);let iH="ultra.base.proctoring.routes";c.module(iH,[B.moduleName,L.e1,k.e1,io.e1,ix.e1]).config([L.e2,k.e2,io.e2,(e,t,i)=>{e.baseState(iu.Zo.BASE_PROCTORING_ATTEMPT,{url:"^/proctoring/attempt?courseId&contentId&password",peekStates:["conversations",iu.BQ.COURSE_MESSAGE,"assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",il._b,iT.ef],onEnter:()=>{iV("body").addClass("proctoring-attempt-open")},onExit:()=>{iV("body").removeClass("proctoring-attempt-open")},resolve:{[k.gc]:t.resolve,[io.gc]:i.resolve,contentData:[k.gc,ia.HV,L.HV,(e,t,n)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})],translations:[B.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["contentData",ix.HV,L.HV,(e,t,n)=>{let{gradingColumn:i,courseContent:r}=e,s=n.nextParams.password,o=r.isGroupContent,a=r.assignedGroups?r.assignedGroups[0].groupId:null;return t.launchAttempt(i,s,o,a)}],exceptions:["contentData",k.gc,io.gc,iU.HV,(e,t,n,i)=>{var r;let s=null==t?void 0:t.id,o=null==n?void 0:n.id,a=null==e?void 0:null===(r=e.gradingColumn)||void 0===r?void 0:r.id;if(s&&o&&a)return i.getGradableItemUserOptionExceptions(s,o,[a])}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(19338),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(494),n.e(23966),n.e(68879)]).then(n.bind(n,368879)),pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:()=>{iV("body").addClass("proctoring-attempt-open")},onExit:()=>{iV("body").removeClass("proctoring-attempt-open")},resolve:{translations:[B.serviceName,e=>e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])],[k.gc]:t.resolve,[io.gc]:i.resolve,currentContent:[k.gc,L.HV,iD.D$,(e,t,n)=>e.contents.$find(t.nextParams.contentId).$asPromise().then(e=>(n.setCurrentContent(e),e))],currentAttempt:[k.gc,L.HV,(e,t)=>e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()],currentGradedQuestionAttempts:["$q","currentAttempt",(e,t)=>{let n=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then(e=>{e.setPostStatusAndGroupAttemptId(t),n.resolve(e)}),n.promise}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(19338),n.e(61496),n.e(23966),n.e(83727)]).then(n.bind(n,283727)),pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}]);var iq=n(14482);let ij="ultra.base.messages.routes";c.module(ij,[k.e1,io.e1,L.e1]).config([L.e2,k.e2,io.e2,(e,t,i)=>{e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",resolve:{[k.gc]:t.resolve,[io.gc]:i.resolve},require:()=>Promise.all([n.e(87844),n.e(4302),n.e(47413),n.e(62211)]).then(n.bind(n,554370)),pageTitle:"components.directives.message.newMessage",panelClass:"full"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:()=>Promise.all([n.e(87844),n.e(4302),n.e(47413),n.e(62211)]).then(n.bind(n,554370)),pageTitle:"components.directives.message.message",panelClass:"full",allowChildPeekStates:!0,peekStates:[iu.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,iu.BQ.EDIT_ENROLLMENT],peekViewName:"course-conversation-peek@"}).peekState(iu.BQ.COURSE_MESSAGE,{url:"/message?courseId&recipientIds&conversationPerRecipient&recipientGroupId&recipientGroupSetId",onExit:["$rootScope","$stateParams",(e,t)=>{!function(e,t){e.$broadcast("bb-message-refresh",t)}(e,t.courseId)}],resolve:{[io.gc]:i.resolve,translations:[B.serviceName,e=>e.loadBundle("features/base/messages/base-messages")]},require:()=>Promise.all([n.e(87844),n.e(4302),n.e(47413),n.e(62211)]).then(n.bind(n,554370)),pageTitle:"base.messages.newMessage",panelClass:"full"})}]);let iz="ultra.base.stream.routes";c.module(iz,[B.moduleName,is.e1,ic.e1,P.e1,L.e1]).config([L.e2,e=>{e.peekState("announcement",{url:"/announcement/:streamEntryId",require:()=>Promise.all([n.e(4302),n.e(80580),n.e(34928),n.e(99298),n.e(31226)]).then(n.bind(n,653600)),pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:()=>Promise.all([n.e(87844),n.e(4302),n.e(47413),n.e(59980)]).then(n.bind(n,542312)),pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:()=>Promise.all([n.e(80580),n.e(34928),n.e(99298),n.e(73497)]).then(n.bind(n,780238)),resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/stream/content/content")]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/stream/notification")],isAdmin:[ic.HV,e=>e.hasSystemEntitlement(iR.lP.ViewAdminTop).then(e=>e)]},panelClass:"full",require:()=>n.e(85942).then(n.bind(n,585942)),pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:()=>Promise.all([n.e(4302),n.e(3781)]).then(n.bind(n,177773))},"notification-step2@":{require:()=>n.e(37220).then(n.bind(n,637220))}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/stream/notification")]},panelClass:"full",require:()=>n.e(79639).then(n.bind(n,779639)),pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:()=>Promise.all([n.e(4302),n.e(3781)]).then(n.bind(n,177773))},"notification-step2@":{require:()=>n.e(37220).then(n.bind(n,637220))}}})}]);var iW=n(65286);let iK="ultra.base.notification-settings.routes";c.module(iK,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("notification-settings",{abstract:!0,require:()=>n.e(98731).then(n.bind(n,698731)),resolve:{mobileDistributorSettings:[P.g8.H,e=>e.$build().courseSettings.$new(iR.e3.Mobile).$fetch().$allow([400])],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",(e,t)=>t.$then(e=>!!e.settings).$asPromise()],notificationGeneralSettings:[P.yc.HV,e=>e.$build().$fetch().$asPromise()],memberships:[iW.HV,e=>e.reloadStreamMemberships()]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/notifications-settings/base-notifications-settings")],memberships:[iW.HV,e=>e.reloadStreamMemberships()]},views:{"email-settings@":{require:()=>n.e(8783).then(n.bind(n,708783))},"stream-settings@":{require:()=>n.e(62386).then(n.bind(n,662386)),resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/stream/base-stream")]}},"sms-settings@":{require:()=>Promise.all([n.e(19338),n.e(17538),n.e(61550)]).then(n.bind(n,961550))},"mobile-settings@":{require:()=>n.e(55896).then(n.bind(n,655896))}}})}]);let iZ="ultra.base.admin.brand.routes";c.module(iZ,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:iR.lP.ViewBrands,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(61056),n.e(22258),n.e(90119),n.e(81446)]).then(n.bind(n,409591)),pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail","modify-custom-css"]}).peekState("modify-custom-css",{panelClass:"full",allowChildPeekStates:!0,url:"/custom-css/modify",systemEntitlement:iR.lP.ModifyCustomCss,require:()=>n.e(57373).then(n.bind(n,357373)),pageTitle:"base.admin.branding.addCustomCSS.title"}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:iR.lP.CreateBrand,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(61056),n.e(22258),n.e(90119),n.e(60099)]).then(n.bind(n,51563)),pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:iR.lP.ViewBrands,require:()=>Promise.all([n.e(98290),n.e(62101),n.e(61056),n.e(22258),n.e(90119),n.e(60099)]).then(n.bind(n,51563)),pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}]);let iQ="ultra.base.admin.theme.routes";c.module(iQ,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("colorSelection",{systemEntitlement:iR.lP.ViewAdmin,url:"/theme/:themeId/colorSelection",require:()=>n.e(87251).then(n.bind(n,287251)),pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}]);let iJ="ultra.base.calendar.routes";c.module(iJ,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState(iu.Lj.CALENDAR_SETTINGS,{url:"/settings",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>n.e(91188).then(n.bind(n,491188)),pageTitle:"base.calendar.settings.title"}).peekState(iu.Lj.CREATE_EVENT,{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(80580),n.e(34928),n.e(23608),n.e(99298),n.e(85790),n.e(27220)]).then(n.bind(n,932725)),pageTitle:"base.calendar.create.addEvent"}).peekState(iu.Lj.EDIT_EVENT,{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(80580),n.e(34928),n.e(23608),n.e(99298),n.e(85790),n.e(27220)]).then(n.bind(n,932725)),pageTitle:"base.calendar.create.editEvent"}).peekState(iu.Lj.VIEW_EVENT,{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId&courseId",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},require:()=>Promise.all([n.e(23608),n.e(53101)]).then(n.bind(n,253101)),pageTitle:"base.calendar.create.viewEvent"}).peekState(iu.Lj.COURSE_SCHEDULE,{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(23608),n.e(85790),n.e(20703)]).then(n.bind(n,422177)),pageTitle:"base.calendar.schedule.classSchedule"}).peekState(iu.Lj.OFFICE_HOURS,{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])]},onExit:["$rootScope",e=>{e.$broadcast("calendar-refresh")}],require:()=>Promise.all([n.e(80580),n.e(34928),n.e(23608),n.e(99298),n.e(85790),n.e(27220)]).then(n.bind(n,932725)),pageTitle:"base.calendar.addOfficeHours"})}]);var iY=n(812479);let iX="ultra.base.institution-page.routes";c.module(iX,[L.e1]).config([L.e2,e=>{e.peekState("allLinks",{url:"/all?moduleId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(9936)]).then(n.bind(n,9936)),pageTitle:"base.nav.institutionPage",resolve:{IP:[iY.HV,L.HV,(e,t)=>{let n=t.nextParams;return e.getModuleIsVisible(n.moduleId).then(e=>{if(!e)return t.goToRoute("base.institution-page")})}]}}).peekState("editPageImage",{systemEntitlement:iR.dF.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(17247)]).then(n.bind(n,717247)),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:iR.dF.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(34988)]).then(n.bind(n,34988)),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:iR.dF.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(43808)]).then(n.bind(n,943808)),peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:iR.dF.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(6785)]).then(n.bind(n,906785)),pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:iR.dF.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:()=>n.e(57240).then(n.bind(n,257240)),pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:iR.dF.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:()=>n.e(67963).then(n.bind(n,967963)),pageTitle:"base.nav.institutionPage",panelClass:"peek"})}]);let i0="ultra.features.base.profile.privacy.routes";c.module(i0,["ui.router",L.e1]).config([L.e2,e=>{e.peekState("privacy",{url:"/privacy",require:()=>Promise.all([n.e(19338),n.e(17538),n.e(8068),n.e(16915)]).then(n.bind(n,308068)),pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}]);let i1="profile.update-avatar.routes";c.module(i1,[is.e1,L.e1]).config([L.e2,e=>{e.peekState(iu.M0.UPDATE_AVATAR_PEEK,{url:"/avatar/update",require:()=>Promise.all([n.e(19338),n.e(64698)]).then(n.bind(n,464698)),pageTitle:"base.profile.update-avatar.pageTitle"})}]);var i2=n(435181);let i4="ultra.features.base.profile.update.basicProfile.routes";c.module(i4,["ui.router",is.e1,P.e1,L.e1]).config([L.e2,e=>{e.peekState(iu.M0.UPDATE_PROFILE_PEEK,{url:"/update?focusField",require:()=>Promise.all([n.e(19338),n.e(17538),n.e(69448),n.e(26537)]).then(n.bind(n,919811)),pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[i2.HV,eg.HV,(e,t)=>e.$find(t.userId).$asPromise()]}}).peekState(iu.M0.UPDATE_LANGUAGE_PEEK,{url:"/language",require:()=>n.e(31795).then(n.bind(n,231795)),pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[i2.HV,eg.HV,(e,t)=>e.$find(t.userId).$asPromise()]}})}]);let i6="profile.update-password.routes";c.module(i6,[is.e1,L.e1]).config([L.e2,e=>{e.peekState(iu.M0.UPDATE_PASSWORD_PEEK,{url:"/password/update",require:()=>Promise.all([n.e(19338),n.e(17538),n.e(71089)]).then(n.bind(n,971089)),pageTitle:"base.profile.update-password.pageTitle"})}]);var i5=n(16797);let i3="ultra.base.tools.routes";c.module(i3,[L.e1]).config([L.e2,e=>{e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/tools/base-tools")],offCanvasArgs:[L.HV,e=>({panelClass:"full",template:i5,close:()=>{e.goCurrentBasePage()},stateName:"base.tools.legacy"})]},require:()=>Promise.resolve().then(n.bind(n,886739)),onExit:[is.HV,e=>{e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}]);var i8=n(52306);let i9="ultra.base.courses.routes";c.module(i9,[tk.e1,B.moduleName,eh.e1,is.e1,P.e1,L.e1,i8.e1]).config([L.e2,e=>{e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([n.e(23608),n.e(85790),n.e(99001)]).then(n.bind(n,140209)),pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/courses/external/external-course")]},require:()=>Promise.all([n.e(23608),n.e(85790),n.e(99001)]).then(n.bind(n,140209)),pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",P.N7.H,P.jh.H,(e,t,n)=>{let i=e.courseId;return n.$new(i).$fetch().$asPromise().then(e=>{let n=t.$new();return n.id=e.id,n.name=e.title,n.description=e.description,n.displayName=e.title,n})}],translations:[B.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>n.e(90554).then(n.bind(n,390554)),pageTitle:"course.description.header"})}]);var i7=n(633340);let re="ultra.course.journal.router";c.module(re,[B.moduleName,L.e1,il.e1,i7.e1,k.e1,io.e1,iD.e1]).config([L.e2,k.e2,io.e2,iD.e2,(e,t,i,r)=>{e.peekState(iu.Eg.JOURNAL,{abstract:!0,url:"/journal",resolve:{[k.gc]:t.resolve,translations:["$q",B.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/content/journal/journal")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}]}}).peekState(iu.Eg.JOURNAL_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.journalItem",require:()=>Promise.all([n.e(42641),n.e(87844),n.e(60747),n.e(10151),n.e(12820),n.e(91077),n.e(33893),n.e(24655),n.e(45481),n.e(27673)]).then(n.bind(n,145481)),resolve:{translations:["$q",B.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}]}}).peekState(iu.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{url:"?view&limit&page&name&submissionStatus&gradingStatus&sortColumn&sortDirection&entryLimit&entryPage",panelClass:"full",reloadOnSearch:!1,views:{"journal-content@":{require:()=>Promise.all([n.e(42641),n.e(87844),n.e(4302),n.e(60747),n.e(10151),n.e(12820),n.e(91077),n.e(19661),n.e(33893),n.e(24655),n.e(91866),n.e(45481),n.e(2641)]).then(n.bind(n,759728))},"journal-participation@":{require:()=>Promise.all([n.e(91077),n.e(75807)]).then(n.bind(n,575807))}},onExit:["$rootScope",i7.HV,(e,t)=>{e.$broadcast("deadline-refresh"),t.deleteIfEmpty()}],peekStates:[iu.XO.CONDITIONAL_RELEASE_PEEK_PANEL,iu.cw.CONTENT_MARKET,"course-group",il.Ze,iu.Eg.JOURNAL_DETAILS,iu.Eg.JOURNAL_GENERATE,iu.Eg.JOURNAL_PARTICIPATION_DETAIL,iu.Eg.JOURNAL_SETTINGS,iu.Eg.JOURNAL_SUBMISSION_FEEDBACK,iu.UM.LTI,iu.BQ.COURSE_MESSAGE,iu.Z5.Rubric.RUBRIC,iu.Z5.Rubric.RUBRIC_EVALUATION,iu.Z5.Rubric.RUBRIC_GENERATE,iu.Z5.Rubric.RUBRIC_VIEW,"view-exceptions"],peekViewName:"journal-peek@",pageTitle:"course.content.journalItem",allowChildPeekStates:!0,resolve:{[k.gc]:t.resolve,[io.gc]:i.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],[iD.gc]:r.resolve,currentColumn:[L.HV,k.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==P.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState(iu.Eg.JOURNAL_PARTICIPATION_DETAIL,{url:"/journal-participation-detail?offset&columnId&contentId&singleUserId&singleMembershipId&participantId&entryLimit&entryPage",panelClass:"full",require:()=>Promise.all([n.e(87844),n.e(60747),n.e(91077),n.e(89833)]).then(n.bind(n,889833)),pageTitle:"course.content.journalItem",peekViewName:"journal-submissions-peek",allowChildPeekStates:!0,resolve:{translations:["$q",B.serviceName,(e,t)=>t.loadBundle("features/course/content/journal/journal")]},peekStates:[iu.Eg.JOURNAL_SUBMISSION_FEEDBACK,iu.cw.CONTENT_MARKET,iu.UM.LTI,"rubric-evaluation"]}).peekState(iu.Eg.JOURNAL_DETAILS,{panelClass:"peek",url:"/details",require:()=>n.e(85960).then(n.bind(n,85960)),pageTitle:"course.content.journalDetails",peekViewName:"journal-details-peek"}).peekState(iu.Eg.JOURNAL_SETTINGS,{panelClass:"peek",url:"/settings?focusEleId&journalId?subpanelId",require:()=>Promise.all([n.e(10151),n.e(33893),n.e(30204)]).then(n.bind(n,540234)),pageTitle:"course.content.journalSettings",peekViewName:"journal-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",iu.Z5.Rubric.RUBRIC,iu.Z5.Rubric.RUBRIC_GENERATE]}).peekState(iu.Eg.JOURNAL_SUBMISSION_FEEDBACK,{panelClass:"peek",url:"/feedback?userId?columnId",require:()=>Promise.all([n.e(91077),n.e(59613)]).then(n.bind(n,259613)),pageTitle:"course.content.journalFeedback",peekViewName:"journal-feedback-peek"}).peekState(iu.Eg.JOURNAL_GENERATE,{url:"/generate?defaultGenerateTitle",require:()=>Promise.all([n.e(91077),n.e(52334)]).then(n.bind(n,452334)),pageTitle:"course.content.journal.generate.pageTitle",panelClass:"full"})}]);var rt=n(808611);let rn="ultra.course.content.conversations.routes";c.module(rn,[B.moduleName,L.e1,k.e1]).config([L.e2,k.e2,(e,t)=>{e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:{[k.gc]:t.resolve,content:[k.gc,ia.HV,L.HV,P.N7.H,(e,t,n,i)=>i.$new(e.id).contents.$find(n.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()],translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[rt.HV,"currentCourseMemberships",(e,t)=>e.init(t).then(()=>e.loadHardContent(!0))]},onExit:[rt.HV,e=>{e.destroy()}],require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(19661),n.e(839),n.e(28805),n.e(46238)]).then(n.bind(n,446238)),pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:[iu.BQ.COURSE_MESSAGE,iu.BQ.COURSE_DISCUSSION_PARTICIPANTS,iu.BQ.COURSE_LTI,iu.BQ.COURSE_CONTENT_MARKET]})}]);var ri=n(653796);let rr="ultra.course.announcement.router";c.module(rr,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState(iu.Fq.ANNOUNCEMENT_DETAIL,{url:"/announcement-detail?courseId&announcementId&mode",require:()=>Promise.all([n.e(34928),n.e(38553)]).then(n.bind(n,474662)),pageTitle:"course.outline.announcements.title",panelClass:"full"})}]);let rs="ultra.course.books-and-tools.router";c.module(rs,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:()=>Promise.all([n.e(9236),n.e(76659)]).then(n.bind(n,403826)),resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/books-and-tools/books-and-tools")]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:[iu.cw.CONTENT_MARKET,"partner-tools","proctoring-lti-tool"]})}]);var ro=n(363961),ra=n(625977),rl=n(495683);let rc="ultra.course.collab.router";c.module(rc,[B.moduleName,L.e1]).config([L.e2,e=>{A.default.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:()=>n.e(84e3).then(n.bind(n,384e3)),pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/collab/course-collab")]},onExit:["$rootScope",e=>{e.$broadcast("collab-exit")}]})}]);var rd=n(526842),ru=n(665673);let rp="ultra.course.content-market.router";c.module(rp,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState(iu.cw.CONTENT_MARKET,{url:"/contentmarket?parentId&positionBefore&positionAfter&position&mode",require:()=>Promise.all([n.e(42641),n.e(9236),n.e(53495),n.e(91450)]).then(n.bind(n,904206)),resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool",iu.UM.LTI]})}]);let rm="ultra.course.content-collection.router";c.module(rm,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState(iu.xh.CONTENT_COLLECTION,{url:"/contentcollection?parentId&positionBefore&positionAfter",require:()=>n.e(4974).then(n.bind(n,504974)),resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content-collection/content-collection")])]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:()=>n.e(83794).then(n.bind(n,783794)),panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:()=>n.e(85651).then(n.bind(n,985651)),panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:()=>n.e(37692).then(n.bind(n,837692)),panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}]);var rh=n(443707);let rg="ultra.course.groups.router";c.module(rg,[k.e1,B.moduleName,L.e1]).config([k.e2,L.e2,(e,t)=>{t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:iR.pQ.ViewGroupsAsAdmin,require:()=>n.e(29825).then(n.bind(n,329825)),pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail",iu.xp.IMPORT_GROUP_SET,iu.xp.EXPORT_GROUP_SET,iu.xp.GROUP_MEMBERS_LIST,iu.BQ.COURSE_MESSAGE],panelClass:"full"}).peekState(iu.xp.IMPORT_GROUP_SET,{url:"/import-group-set",courseEntitlement:iR.pQ.ViewGroupsAsAdmin,require:()=>n.e(11264).then(n.bind(n,611264)),pageTitle:"course.content.courseGroup.importGroupSetTitle",panelClass:"peek"}).peekState(iu.xp.IMPORT_GROUP_MEMBERS,{url:"/import-groups-members",courseEntitlement:iR.pQ.ViewGroupsAsAdmin,require:()=>n.e(74581).then(n.bind(n,774581)),pageTitle:"course.content.courseGroup.importGroups",panelClass:"peek"}).peekState(iu.xp.EXPORT_GROUP_SET,{url:"/export-group-set?groupSetId",courseEntitlement:iR.pQ.ViewGroupsAsAdmin,require:()=>n.e(73026).then(n.bind(n,473026)),pageTitle:"course.content.courseGroup.exportGroupSetTitle",panelClass:"peek"}).peekState(iu.xp.GROUP_MEMBERS_LIST,{url:"/group-members-list?groupId",require:()=>n.e(17569).then(n.bind(n,817569)),pageTitle:"course.content.courseGroup.groupMembersTitle",panelClass:"peek"}).peekState(iu.xp.GROUP_SPACE,{url:"/group-space?groupId",require:()=>n.e(14980).then(n.bind(n,214980)),pageTitle:"course.content.courseGroup.groupSpaceTitle",panelClass:"full",peekViewName:"group-space-panel-base@",peekStates:[iu.eJ.ASSESSMENT,iu.XO.CONTENT_MANAGE]}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:iR.pQ.ViewGroupsAsAdmin,resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(60747),n.e(10151),n.e(60979),n.e(82589),n.e(18196),n.e(35528)]).then(n.bind(n,735528)),pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:[iu.BQ.COURSE_MESSAGE,iu.xp.EXPORT_GROUP_SET,iu.xp.IMPORT_GROUP_MEMBERS,iu.xp.GROUP_SPACE],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:{[k.gc]:e.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},require:()=>n.e(6585).then(n.bind(n,906585)),pageTitle:"course.content.courseGroup.selfEnroll",peekStates:[iu.xp.GROUP_MEMBERS_LIST,iu.BQ.COURSE_MESSAGE,iu.xp.GROUP_SPACE]}).peekState("course-group-enroll",{url:"/course-group-enroll?courseId&fromView",pageTitle:"course.content.courseGroup.selfEnroll",peekStates:[iu.xp.GROUP_MEMBERS_LIST,iu.BQ.COURSE_MESSAGE],panelClass:"full",require:()=>n.e(77520).then(n.bind(n,977520))})}]);var rf=n(83991);let rb="ultra.course.question-analysis.routes",rv=()=>({translations:[B.serviceName,e=>e.loadBundle("features/course/question-analysis/question-analysis")]});c.module(rb,[L.e1]).config([L.e2,e=>{e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:rv(),courseEntitlement:[rf.SE.ViewGrades]}).peekState("question-analysis.report",{url:"/report",onEnter:[L.HV,e=>{e.goPeekState(iu.RK.GRADEBOOK_ITEM_ASSESSMENT,{contentId:e.nextParams.qaContentId,courseId:e.nextParams.courseId,gradeitemView:"questionAnalysis",assessmentType:"test"})}],pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:rv(),courseEntitlement:[rf.SE.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(11599),n.e(90414)]).then(n.bind(n,61470)),pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}]);let ry="ultra.course.question-banks.routes";c.module(ry,[B.moduleName,L.e1,k.e1]).config([L.e2,k.e2,(e,t)=>{e.peekState(iu.Jp.QUESTION_BANKS,{url:"/banks",resolve:{[k.gc]:t.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/question-banks/question-banks")]},peekStates:[iu.Jp.IMPORT_DETAILS,iu.Jp.EDIT_QUESTION_BANK],peekViewName:"question-banks-peek",panelClass:"full",require:()=>Promise.all([n.e(65242),n.e(46367)]).then(n.bind(n,464334)),pageTitle:"course.question-banks.pageTitle"}).peekState(iu.Jp.IMPORT_DETAILS,{url:"/importDetails/{taskId:_[0-9]+_1}",require:()=>n.e(3814).then(n.bind(n,703814)),pageTitle:"course.question-banks.import-details.pageTitle"}).peekState(iu.Jp.EDIT_QUESTION_BANK,{url:"/editBank/{assessmentId}?isNew",peekStates:[iu.cw.CONTENT_MARKET,iu.Fc.ALIGN_GOALS_FOR_INSTRUCTOR],peekViewName:"question-bank-edit-peek",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(99226)]).then(n.bind(n,599226)),pageTitle:"course.question-banks.edit-question-bank.pageTitle"})}]);var rS=n(669128);let rC="ultra.course.roster.router";c.module(rC,[B.moduleName,L.e1,k.e1,io.e1]).config([L.e2,k.e2,io.e2,(e,t,i)=>{e.peekState("roster",{url:"/roster",resolve:{[k.gc]:t.resolve,[io.gc]:i.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/roster/course-roster")]},onEnter:[k.gc,L.HV,(e,t)=>{e.permissions.viewEnrollments||t.goCurrentBasePage()}],peekStates:[iu.BQ.EDIT_ENROLLMENT,"enroll-users",iu.BQ.COURSE_MESSAGE,"invite",iu.BQ.ACCOMMODATION,iu.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],panelClass:"full",peekViewName:"account-update-base@",require:()=>Promise.all([n.e(65526),n.e(50661)]).then(n.bind(n,450661)),pageTitle:"course.roster.rosterName"}).peekState(iu.BQ.EDIT_ENROLLMENT,{url:"/edit/:membershipId",require:()=>Promise.all([n.e(69448),n.e(65526),n.e(39535)]).then(n.bind(n,835733))}).peekState("enroll-users",{url:"/enroll",require:()=>Promise.all([n.e(65526),n.e(8833)]).then(n.bind(n,108833)),pageTitle:"course.roster.enroll.enrollPeople"}).peekState(iu.BQ.COURSE_MESSAGE,{url:"/message?courseId?recipientId",require:()=>Promise.all([n.e(87844),n.e(4302),n.e(47413),n.e(62211)]).then(n.bind(n,554370))}).peekState("invite",{url:"/invite",require:()=>n.e(64811).then(n.bind(n,864811)),pageTitle:"course.roster.invite.inviteStudents"}).peekState(iu.BQ.ACCOMMODATION,{url:"/exception/:membershipId",require:()=>n.e(64119).then(n.bind(n,864119)),pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",P.N7.H,(e,t,n)=>{let i={fields:rS.Zh.join(",")};return n.$new(t.courseId).memberships.$find(t.membershipId,i).$asPromise()}]}})}]);var rE=n(646662);let rI="ultra.course.course-tasks.router";c.module(rI,[k.e1,B.moduleName,L.e1]).config([k.e2,L.e2,(e,t)=>{t.peekState(iu.Jf.COURSE_TASKS_LOGS,{abstract:!0,url:"/courseTasks",require:()=>Promise.all([n.e(61381),n.e(11790)]).then(n.bind(n,211790)),resolve:{[k.gc]:e.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/course-tasks")]},panelClass:"full"}).peekState(iu.Jf.COURSE_TASKS_PANEL,{url:"/tasks",views:{"course-tasks@":{require:[()=>Promise.all([n.e(61381),n.e(59914)]).then(n.bind(n,359914)),()=>Promise.all([n.e(61381),n.e(11790)]).then(n.bind(n,211790))]}},pageTitle:"course.courseTasks.tasks.title",peekStates:["content-manage"],panelClass:"full"}).peekState(iu.Jf.COURSE_LOGS_PANEL,{url:"/logs",views:{"course-tasks@":{require:[()=>Promise.all([n.e(61381),n.e(25668)]).then(n.bind(n,925668)),()=>Promise.all([n.e(61381),n.e(11790)]).then(n.bind(n,211790))]}},pageTitle:"course.courseTasks.logs.title",panelClass:"full"})}]);let rw="ultra.course.goal-alignment.router";c.module(rw,[L.e1]).config([L.e2,e=>{e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},require:()=>n.e(84214).then(n.bind(n,784214)),pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}]);let rA="ultra.course.content.lti.routes";c.module(rA,[B.moduleName,ia.e1,ic.e1,id.e1,L.e1,k.e1,io.e1]).config([L.e2,k.e2,io.e2,(e,t,i)=>{e.peekState(iu.UM.LTI,{abstract:!0,url:"/lti"}).peekState(iu.UM.LTI_LAUNCH,{url:"/launch?courseId&contentId&linkRef&linkType",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/course-content")],[io.gc]:i.resolve,[k.gc]:t.resolve,currentContent:["$q",L.HV,P.YM.H,P.N7.H,(e,t,n,i)=>{let r=e.defer(),s=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,o=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,l=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return s&&o?i.$new(s).contents.$find(o).$asPromise().then(e=>r.resolve(e)):s&&a&&f.u$1.PartnerCloud.isEqualTo(l)?n.getContentIds(s,a).then(e=>{e.contentIds&&e.contentIds.length>0?i.$new(s).contents.$find(e.contentIds[0]).$asPromise().then(e=>r.resolve(e)):r.resolve(null)}):r.resolve(null),r.promise}],currentGradeColumn:["$q",k.gc,"currentContent",eh.HV,(e,t,n)=>{if(t&&n){var i,r,s,o;let a=null===(o=n.contentDetail)||void 0===o?void 0:null===(r=o[null===(s=n.contentHandler)||void 0===s?void 0:s.toString()])||void 0===r?void 0:null===(i=r.gradingColumn)||void 0===i?void 0:i.id;return a?t.gradebook.columns.$find(a).$asPromise():e.when(null)}return e.when(null)}],contentData:["$q",k.gc,"currentContent","currentGradeColumn",ia.HV,(e,t,n,i,r)=>t&&n?r.loadContentAndGrades(i?{course:t,content:n,column:i}:{course:t,content:n,skipGradeAndRubrics:!0}):e.when(null)]},panelClass:"peek",require:()=>Promise.all([n.e(12820),n.e(87288)]).then(n.bind(n,645788)),pageTitle:" Launch"}).peekState(iu.UM.LTI_LAUNCH_FRAME,{url:"/launchFrame?toolHref",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/course-content")]},panelClass:"full",require:()=>n.e(16641).then(n.bind(n,416641)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(iu.UM.LTI_LAUNCH_PEEK,{url:"/launchPeek?toolHref&courseId&contentId",resolve:{[k.gc]:t.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[iu.XO.CONDITIONAL_RELEASE_PEEK_PANEL,iu.UM.LTI_EDIT_CLOUD_DOCUMENT,iu.Jy.CONVERSATION,iu.xp.VIEW,iu.xp.GROUP_MEMBERS_LIST,iu.xp.VIEW_GROUP_ENROLL],panelClass:"full",require:()=>n.e(74476).then(n.bind(n,874476)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(iu.UM.LTI_LAUNCH_CLOUD_CREATE,{url:"/launchCloudCreate?toolHref&courseId&contentId&placementId",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:[iu.UM.LTI_LAUNCH_PEEK],panelClass:"full",require:()=>n.e(20669).then(n.bind(n,20669)),pageTitle:"course.content.ltiLaunchFrameTitle"}).peekState(iu.UM.LTI_EDIT_CLOUD_DOCUMENT,{url:"/edit?contentId",resolve:{[k.gc]:t.resolve,translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},panelClass:"peek",require:[()=>Promise.all([n.e(51615),n.e(53663)]).then(n.bind(n,751615))],peekViewName:"cloud-document-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.editCloudDocument"})}]);var rk=n(473011),rT=n(776517);function rP(e){let t=rk.uI(e);rk.fL(t)}let rD="ultra.course.partner-tool.router";c.module(rD,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:()=>Promise.all([n.e(42641),n.e(53495),n.e(23832)]).then(n.bind(n,175442)),pageTitle:"course.partnerTool.partnerTool"})}]);var rx=n(420595);let rR="ultra.course.content.scorm.routes",rL={onEnter:["contentData","attempt",is.HV,L.HV,"$stateParams",iP.HV,(e,t,n,i,r,s)=>{if(!r.forceOpenFeedbackPanel||r.skipTransitionEvents)return;i.isPeekPanelOpen()&&n.expandTopPanel();let o=ix.e.attemptHasFeedback(t),a=ix.e.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),l=i.next.name.indexOf("assessment-submission-feedback")>=0,c=!i.prev.name,d=s.isSmallBreakpoint();!o||!a||d||l||c||i.goPeekState("assessment-submission-feedback",{attemptId:t.id})}],onExit:["contentData",is.HV,L.HV,"$q","$stateParams",(e,t,n,i,r)=>{if(!r.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){let r=i.when();n.isPeekPanelOpen()&&(r=t.shrinkTopPanel()),r.then(()=>{n.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})})}}]};c.module(rR,[B.moduleName,L.e1,k.e1,iD.H2]).config([L.e2,k.e2,io.e2,iD.AX,(e,t,i)=>{e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[L.HV,rx.HV,(e,t)=>{t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(60979),n.e(86727),n.e(49434)]).then(n.bind(n,190658))],resolve:{[k.gc]:t.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy",iu.XO.CONDITIONAL_RELEASE_PEEK_PANEL,"content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[B.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:[()=>Promise.all([n.e(12820),n.e(38427)]).then(n.bind(n,724436))],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView&gradingStatus&submissionStatus",panelClass:"full",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},views:{"gradebook-item-scorm-slider@":{require:()=>n.e(39283).then(n.bind(n,739283))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(61515)]).then(n.bind(n,539599))}},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:["conversations",iu.BQ.COURSE_MESSAGE,iu.XO.CONDITIONAL_RELEASE_PEEK_PANEL,"scorm-settings","scorm-launch-frame",iu.RK.SUBMISSION_GRADING,iu.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,iu.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT,iu.RK.PER_GRADABLE_ITEM_SETTINGS],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:{[k.gc]:t.resolve,contentData:[k.gc,ia.HV,L.HV,iD.D$,(e,t,n,i)=>t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId}).then(e=>(i.setCurrentContent(e.courseContent),e))],[io.gc]:i.resolve,translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])]},onEnter:["contentData",eh.HV,(e,t)=>{t.column=e.gradingColumn}],onExit:[eh.HV,e=>{e.column=null}],require:()=>Promise.all([n.e(98290),n.e(21749),n.e(27993),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(10151),n.e(12820),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(61105),n.e(80325),n.e(494),n.e(69877),n.e(57091)]).then(n.bind(n,651555))}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations",iu.BQ.COURSE_MESSAGE],views:{"scorm-grading-section@":{require:()=>n.e(42375).then(n.bind(n,542375))}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[k.gc,"contentData",rx.HV,ia.HV,L.HV,(e,t,n,i,r)=>n.currentContentData||t&&t.gradingColumn.id===r.nextParams.columnId&&t||i.loadContentAndGrades({course:e,contentId:r.nextParams.contentId,columnId:r.nextParams.columnId})],translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment")])]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(33979),n.e(3780),n.e(31538)]).then(n.bind(n,431538))}).peekState("scorm-overview.student.attempt",{url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",k.gc,ia.HV,L.HV,(e,t,n,i)=>e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})],currentContent:["contentData",e=>e.courseContent],currentColumn:["contentData",e=>e.gradingColumn],attempt:["$q","contentData",P.N7.H,L.HV,P.U_.serviceName,P.uy.HV,(e,t,n,i)=>{let r=i.nextParams.attemptId;return n.$buildRaw({id:t.courseContent.courseId}).gradebook.attempts.$find(r,{expand:"toolAttemptDetail,alignedGoals"}).$then(e=>{t.attempt=e}).$asPromise()}]},require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(91263),n.e(61496),n.e(33979),n.e(3780),n.e(48076),n.e(27941)]).then(n.bind(n,694135)),...rL,params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations",iu.BQ.COURSE_MESSAGE]}).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:{[k.gc]:t.resolve,content:[k.gc,L.HV,P.N7.H,(e,t,n)=>n.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()],translations:[B.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]},panelClass:"full",require:()=>n.e(98490).then(n.bind(n,298490)),pageTitle:"course.content.scorm.report.pageTitle"})}]);let rN="ultra.base.system-content-market.router";c.module(rN,[B.moduleName,L.e1]).config([L.e2,e=>{e.peekState("system-content-market",{url:"/systemcontentmarket",require:()=>Promise.all([n.e(9236),n.e(82518)]).then(n.bind(n,50391)),resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}]);var r$=n(645085),rO=n(341253),rG=n(19935);let r_="ultra.telemetry.routes";function rM(e,t,n,i){let r=t.courseId;if(!r)return e.when(null);let s=e.defer();return n.$new(r).users.$find(i.userId).$then(e=>{s.resolve(r$.bb(e))},e=>{s.resolve(r$.b1())}),s.promise}c.module(r_,[B.moduleName,is.e1,P.e1,L.e1,k.e1,rO.e1,rG.e1]).config([L.e2,k.e2,rO.e2,(e,t,i)=>{e.peekState("telemetry-settings",{url:"/telemetry-settings",require:()=>Promise.all([n.e(5552),n.e(94413)]).then(n.bind(n,694413)),resolve:{currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)]},pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"components.directives.telemetry.courseActivityAlertSettings"}).peekState(iu.vs.INSTRUCTOR_CLASS,{url:"/{coursesOrOrganizations:(?:courses|organizations)}/:courseId/telemetry/activityVsGrade?notificationId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(54296),n.e(30970),n.e(42741)]).then(n.bind(n,742741)),panelClass:"full",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve,isOrganization:[k.gc,L.HV,(e,t)=>(t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization)]},peekStates:[iu.BQ.COURSE_MESSAGE,"event-create","telemetry-settings",iu.vs.INSTRUCTOR_DETAILS,iu.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],peekViewName:"telemetry-instructor-class-base@",pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.courseActivityHeaderTitle.course"}).peekState(iu.vs.INSTRUCTOR_DETAILS,{url:"/telemetry/timeSeries/:courseId?userId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(83397),n.e(38269)]).then(n.bind(n,131383)),panelClass:"full",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve},peekStates:[iu.BQ.COURSE_MESSAGE,"event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitleHandler:i.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.panel.titleStudentDetail.course"}).peekState(iu.vs.STUDENT_HIGH_PERFORMANCE,{url:"/telemetry/student/high-performance/:courseId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(54296),n.e(93014)]).then(n.bind(n,49085)),panelClass:"peek",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(iu.vs.STUDENT_LOW_ACTIVITY,{url:"/telemetry/student/low-performance/activity/:courseId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(54296),n.e(83397),n.e(57318)]).then(n.bind(n,818008)),panelClass:"peek",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(iu.vs.STUDENT_LOW_GRADES,{url:"/telemetry/student/low-performance/grades/:courseId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(54296),n.e(83397),n.e(56842)]).then(n.bind(n,788593)),panelClass:"peek",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(iu.vs.STUDENT_PROGRESS,{url:"/telemetry/student/progress/:courseId",require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(83397),n.e(22657)]).then(n.bind(n,613832)),panelClass:"peek",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[k.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(iu.vs.STUDENT_FIND_A_STUDY_PARTNER,{url:"/telemetry/student/request-study-help/:courseId",require:()=>n.e(51148).then(n.bind(n,651148)),panelClass:"peek",resolve:{translations:["$q",B.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry")])],[k.gc]:t.resolve,currentCourseColor:["$q","$stateParams",P.N7.H,eg.HV,(e,t,n,i)=>rM(e,t,n,i)],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.HowAmIDoingReport)}]},pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(iu.vs.CONTENT_ACTIVITY_IN_DETAIL,{url:"/telemetry/instructor/activity-in-detail/:contentId?asPage",onEnter:[L.HV,e=>{e.nextParams.asPage||e.goPeekState(iu.RK.GRADEBOOK_ITEM_ASSESSMENT,{contentId:e.nextParams.contentId,courseId:e.nextParams.courseId,gradeitemView:"studentActivity",assessmentType:"test"})}],require:()=>Promise.all([n.e(19760),n.e(80580),n.e(11449),n.e(96967)]).then(n.bind(n,296967)),panelClass:"full",resolve:{translations:[B.serviceName,e=>e.loadBundle("components/directives/telemetry/telemetry")],currentContent:["$stateParams",k.gc,(e,t)=>{let n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:[iu.BQ.COURSE_MESSAGE,"event-create",iu.vs.INSTRUCTOR_DETAILS],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(iu.vs.DISCUSSION_FORUM_INSIGHTS,{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:()=>n.e(27571).then(n.bind(n,527571)),panelClass:"full",params:{groupId:null},resolve:{translations:[B.serviceName,e=>e.loadBundle("components/directives/discussion")],currentContent:["$stateParams",k.gc,(e,t)=>{let n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list",iu.BQ.COURSE_MESSAGE],peekViewName:"telemetry-discussion-forum-insights-base@"})}]);let rB="ultra.course.safe-assign.routes";c.module(rB,[B.moduleName,L.e1,k.e1,rG.e1]).config([L.e2,k.e2,(e,t)=>{e.peekState(iu.Kb.SAFE_ASSIGN,{url:"/safeAssign",resolve:{[k.gc]:t.resolve,translations:[B.serviceName,e=>e.loadBundle("features/course/safeassign/direct-submit")],canActivateState:[rG.HV,e=>{e.byFeatureFlag(f.x40.SafeAssignDirectSubmit),e.bySafeAssignPluginStatus()}]},peekViewName:"safe-assign-peek",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(11735)]).then(n.bind(n,332411)),pageTitle:"course.safeAssign.directSubmit.pageTitle"})}]);var rF=n(707769),rU=n(981796),rV=n(625506);let rH="ultra.routes",rq=e=>e.location;c.module(rH,[P.e1,eh.e1,eg.e1,B.moduleName,L.e1,ip,i_,iF,iH,iX,iq.e,ij,i0,i1,i4,i6,i3,iz,iK,iZ,iQ,iJ,i9,rn,ri.e,rr,rs,ro.e,ra.e,rl.e,rc,rd.e,ru.e,rp,rm,rh.e,rg,rb,ry,rB,rC,rE.e,rI,rw,re,rA,rD,rR,rN,r_,"ngCookies"]).config([L.e2,e=>{var t,i;e.state("base",{abstract:!0,resolve:(t=["features/base/base","global","common/grades-common","components/services/grade"],{systemInfo:[eh.HV,e=>e.getSystemInfo().$asPromise()],currentUser:[eg.HV,e=>e.userModel.$asPromise()],languages:["currentUser",P.Mj.H,(e,t)=>{if(i&&e.locale)return t.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",(e,t)=>(i&&e.locale&&!e_.find(t,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise())],localize:["$q","$rootScope","user","systemInfo",B.serviceName,"$cookies","$window",(e,n,i,r,s,o,a)=>{let l=i.locale||r.defaultLocaleIdentifier,c=o.get("guest.session.locale");i.isGuest()&&c&&(l=c);let d=rF.h.getInstance();if(r.siteId&&r.ultraCustomLocaleLocation&&d.setOverrideLocation(r.ultraCustomLocaleLocation,r.siteId),r.ultraLocaleData){let e=Object.keys(r.ultraLocaleData);e.forEach(e=>{let t=r.ultraLocaleData[e];t.ultraOverrideCode&&s.addOverride(e,t.ultraOverrideCode)}),0>e.indexOf(l)&&(l=r.defaultLocaleIdentifier)}let u=rq(a).href.match(B.localeQuerystringRegex);u&&A.default.features.devtools_enableSetLangQuery&&(l=u[1]),s.setUltraLocaleData(r.ultraLocaleData),s.setUserLocale(l),s.setSystemDefaultLocale(r.defaultLocaleIdentifier),rU.mq.initialize(s.isRTL()?rU.$Q.RightToLeft:rU.$Q.LeftToRight);let p=[s.setLocale(n,l),...t.map(e=>s.loadBundle(e)),e.when(rU.mq.getCSSLoadedPromise())];return e.all(p)}]}),require:()=>Promise.all([n.e(81525),n.e(87844),n.e(80580),n.e(34928),n.e(19338),n.e(99298),n.e(22019),n.e(67400)]).then(n.bind(n,767400))}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:()=>n.e(17893).then(n.bind(n,517893))}).state("base.not-found",{resolve:{translations:[B.serviceName,e=>e.loadBundle("features/base/not-found/base-not-found")]},require:()=>n.e(60734).then(n.bind(n,60734)),pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:()=>{rV("body").addClass("bb-logout"),window.location.href=rk.uI("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl&isUltra",onEnter:[L.HV,e=>{let t=e.nextParams.legacyUrl,n=e.nextParams.isUltra,i=t?rk.hi(t).course_id:null;i&&(n?e.goPeekState("course.classic.outline.ultra-course-self-enroll",{courseId:i,legacyUrl:t}):e.goPeekState("course.classic.outline",{courseId:i,legacyUrl:t}))}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId&columnId",onEnter:[L.HV,e=>{!function(e){let{action:t,courseId:n,contentId:i,attemptId:r,columnId:s}=e.nextParams;switch(t){case rT.I8.OpenDocument:rP(`ultra/courses/${n}/outline/edit/document/${i}?courseId=${n}`);break;case rT.I8.OpenAttempt:rP(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${r}?courseId=${n}`);break;case rT.I8.ReviewAttempt:rP(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${r}/review?courseId=${n}&columnId=${s}&contentId=${i}`);break;case rT.I8.ReviewFeedback:rP(`ultra/courses/${n}/outline/assessment/${i}/overview/attempt/${r}/review/inline-feedback?attemptId=${r}&mode=inline&courseId=${n}&contentId=${i}`);break;case rT.I8.PreviewAssessment:rP(`ultra/courses/${n}/outline/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case rT.I8.CollabRecordingPreview:rP(`ultra/courses/${n}/outline/collab/launchRecordings`);break;case rT.I8.CollabManageSession:rP(`ultra/courses/${n}/outline/collab/launchSessions`);break;case rT.I8.OpenCourse:rP(`ultra/courses/${n}/outline`);break;case rT.I8.OpenDiscussion:rP(`ultra/courses/${n}/engagement/discussion/${i}?view=discussions&courseId=${n}`);break;case rT.I8.OpenGroupDiscussion:rP(`ultra/courses/${n}/outline/discussion/${i}?view=discussions&disGroupId=${r}&courseId=${n}`);break;case rT.I8.OpenJournal:rP(`ultra/courses/${n}/outline/journal/${i}?view=journal&courseId=${n}`);break;case rT.I8.OpenAssessment:rP(`ultra/courses/${n}/outline/assessment/${i}/overview?courseId=${n}`);break;case rT.I8.OpenAssessmentInstView:rP(`ultra/courses/${n}/outline/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case rT.I8.OpenAdminAnnouncement:rP(`ultra/stream/announcement/${i}`);break;case rT.I8.OpenCourseAnnouncement:rP(`ultra/courses/${n}/announcements/announcement-detail?courseId=${n}&announcementId=${i}`);break;case rT.I8.OpenCourseMessage:rP(`ultra/courses/${n}/messages/edit/${i}?courseId=${n}&offset=0&count=1`);break;case rT.I8.OpenGradeBook:rP(`ultra/courses/${n}/grades`);break;case rT.I8.OpenCalendar:rP(`ultra/courses/${n}/calendar`);break;case rT.I8.OpenGradedSCORM:rP(`ultra/courses/${n}/outline/scorm/overview/${i}?courseId=${n}`);break;case rT.I8.OpenInstViewGradedSCORM:rP(`ultra/courses/${n}/outline/scorm/${i}/columns/${s||""}/submissions?courseId=${n}&gradeitemView=students`);break;case rT.I8.OpenTimeline:rP("ultra/course");break;case rT.I8.OpenPersonalEvent:rP(`ultra/stream/event/edit/PERSONAL/blackboard.data.calendar.CalendarEntry/${i}`);break;case rT.I8.OpenCalendarEvent:rP(`ultra/stream/event/edit/${n}/blackboard.data.calendar.CalendarEntry/${i}`);break;case rT.I8.OpenTools:rP("ultra/tools");break;case rT.I8.OpenCreateMessages:rP(`ultra/messages/create?courseId=${n}`);break;case rT.I8.OpenCourseMessagesList:rP(`ultra/courses/${n}/messages`);break;case rT.I8.OpenInstitutionPage:rP("ultra/institution-page");break;case rT.I8.OpenAdminInstitutionPage:rP("ultra/institution-page/admin/default");break;case rT.I8.OpenJournalParticipantsGrades:rP(`ultra/grades/journal/${i}?view=participants&limit=25&page=1&submissionStatus=all&courseId=${n}`);break;case rT.I8.OpenViewGradesOfflinePage:rP(`ultra/grades/offline-grades/${i}?courseId=${n}&gradeitemView=students`);break;case rT.I8.OpenViewGradesAssessmentsPage:rP(`ultra/grades/assessment/test/${i}?courseId=${n}&gradeitemView=students`);break;case rT.I8.OpenScormGradesPage:rP(`ultra/grades/scorm/${i}/columns/${s}/submissions?courseId=${n}&gradeitemView=students`);break;case rT.I8.OpenDiscussionGradePage:rP(`ultra/grades/discussion/${i}?view=participants&courseId=${n}`);break;case rT.I8.OpenAttendancePage:rP(`ultra/grades/attendance?courseId=${n}`);break;case rT.I8.OpenCalendarAssessmentPage:rP(`ultra/calendar/assessment/test/${i}?courseId=${n}&gradeitemView=details`);break;case rT.I8.OpenCalendarDiscussionPage:rP(`ultra/calendar/discussion/${i}?view=discussions&courseId=${n}`);break;case rT.I8.OpenCalendarJournalPage:rP(`ultra/calendar/journal/${i}?view=journal&courseId=${n}`);break;case rT.I8.OpenCalendarScormPage:rP(`ultra/calendar/scorm/${i}/columns/${s}/submissions?courseId=${n}&gradeitemView=students`);break;case rT.I8.OpenStudentCalendarAssessmentPage:rP(`ultra/calendar/assessment/${i}/overview?courseId=${n}`);break;case rT.I8.OpenStudentCalendarScormPage:rP(`ultra/calendar/scorm/overview/${i}?courseId=${n}`);break;case rT.I8.OpenStudentDiscusssionPage:rP(`ultra/courses/${n}}/outline/discussion/${i}?view=discussions&courseId=${n}`);break;default:e.go("base.not-found")}}(e)}]})}]);var rj=n(453856);let rz="ultra.components.directives.sizeToFitTextArea";class rW{sizeToFit(){let e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");let t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))}constructor(e,t,n,i){if(this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",(e,t)=>{e!==t&&this.sizeToFit()}):t.keyup(this.sizeToFit.bind(this)),this.timeout(()=>{this.minHeight="true"===this.scope.initialHeightLock?this.element.get(0).clientHeight:null,this.sizeToFit()},this.scope,0,!1)}}rW.$inject=["scope","element","attrs",C.H];class rK{constructor(e){this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=(e,t,n)=>{e.sizetofittextarea=this.$injector.instantiate(rW,{scope:e,element:t,attrs:n})}}}rK.$inject=["$injector"],c.module(rz,[C.e]).directive("bbSizeToFitTextarea",["$injector",e=>e.instantiate(rK)]);let rZ="ultra.components.directives.bbPreventDrag";class rQ{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t)=>{t.attr("draggable","false"),t.on("dragstart",e=>{let t=e.originalEvent.target;if(!t.ownerDocument.activeElement.className.includes("bb-editor")&&(!t.getAttribute||"true"!==t.getAttribute("draggable")))return!1})}}}rQ.$inject=["$rootScope"],c.module(rZ,[]).directive("bbPreventDrag",["$injector",e=>e.instantiate(rQ)]);let rJ="ultra.components.directives.formlabel",rY="bbFormLabelDecorator";class rX{constructor(e,t,n){this.$q=e,this.$log=t,this.timeout=n,this.restrict="A",this.scope=!0,this.waitForElement=(e,t)=>{null==t.elementInspectStartAt&&(t.elementInspectStartAt=new Date().getTime());let n=this.$q.defer();return this.timeout(()=>c.element(document.getElementById(e)),t,50).then(i=>{i.length>0?n.resolve(i):new Date().getTime()-t.elementInspectStartAt>rX.elementInspectTimeout?n.reject("Cannot find element #"+e+" in "+rX.elementInspectTimeout+"ms"):this.waitForElement(e,t).then(e=>{n.resolve(e)}).catch(e=>{n.reject(e)})}),n.promise},this.link=(e,t,n)=>{let i=e.$eval(n[rY])||{},r=n.for;r&&this.waitForElement(r,e).then(t=>{let n=()=>{e.attrsElement=e_.mapValues(e_.keyBy(t[0].attributes,"nodeName"),e=>e.nodeValue)};i.autoupdate&&(e.domObserver=new MutationObserver(n),e.domObserver.observe(t[0],{childList:!1,attributes:!0,subtree:!1})),n()}).catch(e=>{this.$log.warn(e)}),e.$watchGroup(e_.compact(["attrsElement",n[rY]]),e=>{rX.decorators.forEach(n=>{n(t,c.extend({},e[0],e[1]))})}),e.$on("$destroy",()=>{void 0!==e.domObserver&&e.domObserver.disconnect()})}}}rX.elementInspectTimeout=1e4,rX.$inject=["$q","$log","timeout"],rX.decorators=[(e,t)=>{let n=t.required;!0===n||["true","required",""].indexOf(n)>=0?e.addClass("required"):e.removeClass("required")}],c.module(rJ,[]).directive(rY,["$injector",e=>e.instantiate(rX)]);var r0=n(5928),r1=n(486324);n(619066),n(104981);let r2="ultra.components.directives.collabSessionIcon";class r4{$onChanges(e){this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then(e=>{this.$element.attr("aria-label",e)})}constructor(e,t,n){this.$scope=e,this.$element=t,this.bbLocalize=n}}r4.$inject=["$scope","$element",B.serviceName],r4=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(0,tc.w)({moduleName:r2,componentName:"bbCollabSessionIcon",template:r1,bindings:{runningSessionFlag:"<"},requireModules:[B.moduleName]})],r4);let r6="ultra.directives.elementimage.accessibility",r5="aria-label",r3=["components","directives","element-image","element-image-accessibility"];class r8{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=(e,t,n)=>{if(t.attr(r5))return;let i=t.attr("class"),r=n=>{let i=/\bimg-icon-[\w-]+\b/.exec(n);null===i?t.removeAttr(r5):(this.loadBundle.then(()=>{t.attr(r5,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:r3.join(".")+"."+i[0].replace(/-[aco]$/,"")}))}),e.$digest())};requestAnimationFrame(()=>{r(i)});let s=new MutationObserver(e_.debounce(()=>{requestAnimationFrame(()=>{let e=t.attr("class");i!==e&&r(i=e)})},100,{leading:!0}));s.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",()=>{s.disconnect()})},this.loadBundle=t.loadBundle(r3.join("/"))}}r8.$inject=["$injector",B.serviceName],c.module(r6,[B.moduleName]).directive("elementImage",["$injector",e=>e.instantiate(r8)]);var r9=n(934455),r7=n(145394);let se=["scheduledTasks","telemetry"],st=null;var sn=n(232085);let si="ultra.services.zoomUtility";c.module(si,[]),sn.Z.detect().mobile()&&l(document).on("mouseover","input, textarea, select, .editor-element",function(){l(this).css("font-size","16px")});var sr=n(302032),ss=n(783497);function so(e,t){return function(n,i){t(n,i,e)}}let sa="ultraUi.components.directives.conversion.previewHeader";class sl{constructor(e,t,n,i,r){this.scope=e,this.element=t,this.attrs=n,this.windowSize=i,this.studentPreview=r;let s=e.course,o=i.isMediumBreakpoint()||i.isLargeBreakpoint();this.scope.shouldShowHeader=o&&s.isUltraPreview(),this.scope.hasExceptionReport=!!s.ultraConversionReportId,e.$on("reloadCourse",(e,t)=>{t===s.id&&(this.scope.shouldShowHeader=s.isUltraPreview())})}}sl=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([so(0,(0,sr.tB)("scope")),so(1,(0,sr.tB)("element")),so(2,(0,sr.tB)("attrs")),so(3,(0,sr.tB)(iP.HV)),so(4,(0,sr.tB)(eA.HV))],sl);class sc{constructor(e){this.$injector=e,this.restrict="AE",this.template=ss,this.scope={course:"="},this.link=(e,t,n)=>{e.previewHeader=this.$injector.instantiate(sl,{scope:e,element:t,attrs:n})}}}sc.$inject=["$injector"],c.module(sa,[eA.e1]).directive("bbPreviewHeader",["$injector",e=>e.instantiate(sc)]);let sd="ultra.service.filters.timespan",su=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];c.module(sd,[B.moduleName]).filter("timeSpan",["$log",B.serviceName,function(e,t){let n={};return su.forEach(e=>{n[e.symbol]=e}),function(i,r="hm",s){let o={},a={};return e_.forEach(r,t=>{let i=t.toLowerCase();Object.prototype.hasOwnProperty.call(n,i)?a[i]=i!==t:e.error(`${i} is not supported!`)}),e_(n).filter(e=>Object.prototype.hasOwnProperty.call(a,e.symbol)).forEach(e=>{let r=e.symbol,l=1===e_.size(a),c=Math.floor(i/n[r].base),d=n[r].label;(c>0||!0===a[r]||l&&0===e_.size(o))&&(o[d]=t.translateSync({locale:t.getLocale(s),key:`global.timeSpan.${d}.plural`,params:{v:c},noEscape:!0})),i%=n[r].base,delete a[r]}),e_.defaults(o,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(s),key:"global.timeSpan.oneline",params:o,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);let sp=[sd];var sm=n(625506);let sh="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",sg="bbOffcanvasPausalScope";class sf{constructor(){this.restrict="A",this.link=function(e,t,n){let i=function(e){var t,n;return e.hasClass("bb-offcanvas-overlay")&&(t=e.next()).hasClass("bb-offcanvas-panel")&&(t.hasClass("full")||(n=t.css("max-width"),e_.findIndex([void 0,"none"],e=>e===n)>=0))},r=function(){let e=t.is(".hide-in-background")?t:t.parents(".hide-in-background");return"true"===e.attr("aria-hidden")&&(()=>{let t=e.nextAll();for(let e=0;e<t.length;e+=2)if(i(sm(t.get(e))))return!0;return!1})()};e.$newOffcanvasScope=function(...e){let t=this.constructor.prototype.$new.apply(this,e);return t.$$__digestPaused=!1,t};let s=()=>{e.$$__digestPaused=r(),!1!==e.$$__digestPaused||e.$root.$$phase||e.$digest()};if(e.$on(is.gQ,s),e.$on(is.mP,s),!A.default.production){let t=function(e){return e?t(e.$parent)+"."+e.$id+(e.$$digestPaused?"P":"A"):""},i=function(){n.$set(sg,t(e))};e.$on(is.gQ,i),e.$on(is.mP,i),i()}}}}c.module(sh,[]).directive(sg,["$injector",e=>e.instantiate(sf)]);var sb=n(596731),sv=n(331777),sy=n(3149);let sS="ultra.directives.user-avatar-group";c.module(sS,[sv.e1]).directive("bbUserAvatarGroup",function(){return{restrict:"E",template:sy,scope:{users:"=?"},link(e,t){t.addClass("avatar element-image"),e.$watch("users",t=>{t&&(e.displayUsers=(0,e_.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials(){return"+"+(e.users.length-1)},avatar:{permanentUrl:"default"},lastModifiedAt:void 0}:e.users[1]]))})}}});var sC=n(979803),sE=n(534613),sI=n(683512),sw=n(99035);let sA=[/\/learn\/api\/v1\/users\/me\/preferences\/([^/]+)/,/\/learn\/api\/v1\/systemPreferences\/([^/]+)/,/\/telemetry\/api\/v1\/browser\/(.*)/],sk=e=>e.replace(/(\r\n|\n|\r)/gm,"").slice(0,150);var sT=new class{init(){if(this._isEventAlreadyWrapped)return;sw.gQ.addSink(this.onNetworkTrace);let e=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...t){return this.addEventListener("load",function(){var e;let t=this.responseURL?new URL(this.responseURL):null,n=t?t.pathname+t.search:"(unknown)",i=null!==(e=null==t?void 0:t.host)&&void 0!==e?e:"(unknown)",r={ts:Date.now(),status:this.status,path:n,host:i,response:this.responseText};sw.gQ.logResponse(r)}),e.apply(this,[].slice.call(t))},this._isEventAlreadyWrapped=!0}constructor(){this.onNetworkTrace=e=>{if(e.status>0&&e.status<=399||sA.find(t=>t.test(e.path)))return;let t=sk(e.response),n=`${e.path} ${e.status} - "${t}"`;w.ZP.addHistory({applicationId:"",analyticsId:n,action:"request error",url:e.path})}}},sP=n(842891),sD=n(847153);let sx="ultra";window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!st&&function(){let e=rk.mg();return!A.default.production||e.indexOf("perf-ultra")>-1||e.indexOf("mylearn.int.bbpd.io")>-1||e.indexOf(".dev.bbpd.io")>-1||e.indexOf(".animal.bbsaas.io")>-1}()&&(st=new class{registerWebRequestListener(){window.addEventListener("message",e=>{e.source===window&&e.data&&e.data.type&&e.data.details&&this.handleWebRequestMessage(e.data.type,e.data.details)})}handleWebRequestMessage(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}}isMonitoredUrl(e){return e&&e.indexOf("/learn/api/v1")>=0&&0===se.filter(t=>e.indexOf(t)>-1).length}onRequestStarted(e){this.pendingRequests.push(e)}onRequestCompleted(e){let t=e_.findIndex(this.pendingRequests,t=>t.requestId===e.requestId);if(t>-1){let n=this.pendingRequests[t],i={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-n.timeStamp,requestBody:n.requestBody,error:e.error};this.httpRequestLog.push(i),this.pendingRequests.splice(t,1)}}dumpHttpRequestLog(){let e={};for(let t of(window.httpRequestLog.forEach(t=>{let n=t.method+" "+t.url;null==e[n]&&(e[n]=[]),e[n].push(t.params)}),Object.keys(e)))if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];console.log(t+" ["+n.length+"]",n)}}clearHttpRequestLog(){this.httpRequestLog.length=0}constructor(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}},window.httpRequestLog=st.httpRequestLog,window.pendingRequests=st.pendingRequests,window.dumpHttpRequestLog=st.dumpHttpRequestLog,window.clearHttpRequestLog=st.clearHttpRequestLog,window.disableFtueGuidance=()=>{A.default.disableAllFtueGuidance=!0});let sR=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngOnload","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",E,N,ev.e,_.e1,rj.e1,ey.e1,eS.e1,eC.e1,M.e1,eT,W.e1,Q.e1,F,tI.e1,eL,X.e1,e$.e1,eW.e1,eO.e1,eK,eQ,rJ,e9.e1,eX,eG.e1,eF,e4,te,eq,ez.e,e5.e1,e3.e1,V.e1,H.e1,e8.e1,q.e1,J,ti.moduleName,ts,ta,tu,es,tg,tE.e1,tb.e1,tv.e1,ty.e1,K,tS.e1,z.e1,j.e1,tC.e1,ec,eh.e1,ef.e1,tk.e1,tw.e1,tA.e,tT.e1,rZ,tK.e1,nx.e,nR.e1,C.e,P.e1,rz,r0.e1,r2,r6,rH,L.e1,r7.e,r9.e,si,sa,sh,sb.e1,sv.e1,sS,sI.e1,sC.e,sE.e1].concat(ir).concat(sp);function sL(){return(0,sD.tE)(),sw.HE.info("app.initialization","Initializing Ultra..."),s=(0,u.ZP)(),c.module(sx,sR).config([B.providerName,e=>{e.setOptions({production:A.default.production})}]).config(["$locationProvider",L.e2,"$urlRouterProvider",(e,t,n)=>{e.html5Mode(!0),n.rule((e,t)=>{let n=t.url();if(!n)return;let i=rk.ih(n);if("/"===i[i.length-1])return i.substring(0,i.length-1)}),n.otherwise((e,t)=>{let n=t.url(),i=e.get(L.HV);"/"===rk.ih(n)?e.get(ef.HV).navigateToLandingPage():i.go("base.not-found")})}]).config(["$ocLazyLoadProvider",e=>{e.config({loadedModules:[sx]})}]).config(["$animateProvider",e=>{e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",e=>{e.debugInfoEnabled(!A.default.production)}]).config(["$httpProvider",e=>{e.useApplyAsync(!0),s$(e)}]).config(["DSCacheFactoryProvider",e=>{e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",e=>{e.config({bindRoleForClick:!1,bindKeydown:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",e=>{e.debugEnabled(!A.default.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get(){return Object.prototype.hasOwnProperty.call(this,"$$__digestPaused")&&null!=this.$$__digestPaused?this.$$__digestPaused:(this.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",e=>{let t=window,n=[p.Z,s],i=[];if(!A.default.production){let e=(0,d.createLogger)({level:"info",collapsed:!0});n.push(e),t.__REDUX_DEVTOOLS_EXTENSION__&&i.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(f.QWy,n,i)}]).config(["$qProvider",e=>{e.errorOnUnhandledRejections(!1)}])}function sN(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function s$(e){e.interceptors.push(()=>({request:e=>(sN(e)&&(e.url=rk.uI(e.url)),e)}))}function sO(e){e.run(["$rootScope","$ngRedux",B.serviceName,tw.HV,ed,(e,t,n,i,r)=>{let a;r.registerXsrfCallback(e=>{(0,f.jQV)({apiBasePath:A.default.apiBasePath,xsrf:e,partnerCloudBasePath:A.default.partnerCloudBasePath,foundationsApiSession:f.tiF})}),s.run(y);let l=t.connect(e=>({}),f.Nwg.app)((e,t)=>{a=t});e.$on("destroy",l),e.$on(R.N.$stateChangeSuccess,(t,i,r,s,l)=>{a&&a.handleStateChangeSuccess({toState:i,toParams:r});let c="base.recentActivity";s.name&&(c=s.name),e.previousState=c,e.previousStateSref=`${c}${l?`(${JSON.stringify(l)})`:""}`,e.index=Object.create(null),e.index.locale=(n.getLocale(e)||"").replace("_","-");let d=()=>{let t=i.pageTitle||"base.ultra";n.translate({locale:e.index.locale,key:t}).then(t=>{e.index.title=t})};new Promise((e,t)=>{try{if(i.pageTitleHandler){let t=i.pageTitleHandler;t.build({injector:o,name:i.name,pageTitle:i.pageTitle}).process(),e(t)}else d()}catch(e){console.error(`Uncaught error in dynamic title for state ${i.name}:`,e),t()}}).then(null,d)}),e.$on(R.G.$locationChangeSuccess,(e,t)=>{if(!a)return;let n=t.split("?")[1],i={};if(n)for(let[e,t]of Array.from(new URLSearchParams(n).entries()))i[e]=t;a.handleLocationChangeSuccess({queryParams:i})});let c=i.subscribe();e.$on("destroy",c)}]).run(["$http",eh.HV,ed,(e,t,n)=>{n.registerXsrfCallback(t=>{e.defaults.headers.common[eu]=t,c.element.ajaxSetup({headers:{[eu]:t}})}),c.element.ajaxPrefilter(e=>{sN(e)&&(e.url=rk.uI(e.url))})}]).run(["$rootScope",eh.HV,eg.HV,B.serviceName,function(e,t,n,i){e.context=t,e.$on("bbCurrentUserModified",()=>{n.userModel.$fetch()}),(0,nN.tp)(t,n,i),(0,n$.E4)(t,n,i)}]).run(["$rootScope",e=>{e.Modernizr=window.Modernizr}])}function sG(){rk.re("inPreviewMode",window.location.href)&&l("body").addClass("in-preview-mode"),c.element(document).ready(()=>{c.module("pre-bootstrap-ultra",["ng",eh.e1]).config(["$httpProvider",e=>{s$(e)}]);let e=c.injector(["pre-bootstrap-ultra"]),t=e.get(eh.HV),n=e.get(eg.HV),i=e.get("$http"),s=e.get(C.H),a=e.get("$q");l(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",()=>{"INPUT"===document.activeElement.tagName&&s(()=>{document.activeElement.scrollIntoViewIfNeeded()},this.scope,0,!1)});let d=rk.mg(),u=window.__initialContext.xsrf?a.when({data:{xsrfToken:window.__initialContext.xsrf}}):i.get(d+A.default.apiBasePath+"/v1/utilities/xsrfToken");a.all([n.userModel.$asPromise(),u,t.getSystemInfo().$asPromise()]).then(e=>{r=e[0].id;let t=e[2];eb.Z.userId=r,nL.Z.setClientOffset(t.now.getTime()-new Date().getTime());let i=l("base"),s=i.attr("href");i.attr("href",A.default.basePath+"/");let a=(o=c.bootstrap(document.documentElement,[sx],{strictDi:!0})).get(eh.HV),d=o.get(ed);o.get(tK.HV).addRouteListener(),new nD(tK.ZP,S._k).start(),d.updateToken(e[1].data.xsrfToken),n._setUserId(r),d.registerXsrfCallback(e=>{a.sessionId=e,a.xsrfToken=e}),nu.P7.init(window),tP.Z.init(window),nP(o.get(B.serviceName),o.get("$ngRedux"),o.get(L.HV),o.get(sP.HV)),sT.init(),i.attr("href",s)}).catch(e=>{401===e.status&&(window.location.href="/?new_loc="+encodeURIComponent(window.location.pathname+(window.location.search||"")+(window.location.hash||"")))}).finally(()=>{let e=()=>{let e=l("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled){e.remove();return}e.addClass("fade-out"),eM.c(e,t=>{if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()}),setTimeout(()=>e.remove(),500)}};if(window.__e2eTestingEnabled){e();return}if(o){let t;let n=o.get("$rootScope"),i=n.$on("$stateChangeSuccess",()=>{e(),i(),t()});t=n.$on("$stateChangeError",()=>{e(),t(),i()}),n.$on("hideInitialLoadingArea",()=>{e()})}else e()})})}A.default.production?(sO(sL()),sG()):Promise.all([n.e(20004),n.e(94459)]).then((()=>{Promise.resolve().then(n.bind(n,798942)).then(e=>{sR=sR.concat(e.modules);let t=sL();sO(t),e.init(t),sG()})}).bind(null,n)).catch(()=>{})},574027:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(625506),r=n(464027),s=n(610624),o=n(480489);let a="ultra.directives.accessibility.alert";class l{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.link=(e,t,n)=>{this.alertContainerId=n.alertId?n.alertId:s.d(),e.$on("$destroy",()=>{i(`#${this.alertContainerId}`).remove()}),e.$watch(()=>t.html(),t=>{this.alertArea.html("");let i=Number(n.bbAxAlert)||0;null!=t&&""!==t&&(0===i?this.trigger(t):this.timeout(this.trigger.bind(this,t),e,i,!1))})},this.trigger=e=>{this.alertArea.append(i(`<div id="${this.alertContainerId}"></div>`).append(e))},this.alertArea=i("body > .ax-alert-area"),0===this.alertArea.length&&(i("body").append('<div class="ax-alert-area" role="alert" aria-atomic="false" aria-live="assertive"></div>'),this.alertArea=i("body > .ax-alert-area"))}}l.$inject=["$injector",o.H],r.module(a,[o.e]).directive("bbAxAlert",["$injector",e=>e.instantiate(l)])},201527:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),r=n(385847),s=n(625506);let o="ultra.directives.accessibility.arrowKeyNavigation",a="bb-arrow-key-container",l="bb-arrow-key-destination",c="["+a+"]",d="["+l+"]";class u{navigate(e,t,n,i,s){let o;switch(n){case r.UP:if(s){let n=parseInt(e.closest(c).attr("bb-arrow-key-container"),10),r=t.find(this.containerWithValue(n)).find(d).filter(":visible"),s=r.index(e.closest(d));"0"!==e.attr("tabindex")&&(0!==s||i)&&(o=r.eq(s-1))}else!(o=e.closest(d).prev(d)).length&&i&&(o=e.closest(c).find(d).last());break;case r.WV:if(s){let n=e.closest(c).attr("bb-arrow-key-container"),r=t.find(this.containerWithValue(n)).find(d).filter(":visible"),s=r.index(e.closest(d));!(o=r.eq(s+1)).length&&i&&(o=r.first())}else!(o=e.closest(d).next(d)).length&&i&&(o=e.closest(c).find(d).first());break;case r.RL:if(s){let n=parseInt(e.closest(c).attr(a),10),i=e.closest(d).attr(l);o=t.find(this.containerWithValue(n-1)).find(this.destinationWithValue(i)).first()}else{let t=e.closest(d).prevAll(d).length,n=this.getPreviousContainer(e).find(d);n.length?o=n.eq(t).add(n.last()).first():i&&t>0&&(o=e.closest(c).nextAll(c).last().find(d).eq(t))}break;case r.pX:if(s){let n=parseInt(e.closest(c).attr(a),10),i=e.closest(d).attr(l);o=t.find(this.containerWithValue(n+1)).find(this.destinationWithValue(i)).first()}else{let t=e.closest(d).prevAll(d).length,n=this.getNextContainer(e).find(d);n.length?o=n.eq(t).add(n.last()).first():i&&(o=e.closest(c).prevAll(c).last().find(d).eq(t))}}return!!o&&!!o.length&&(o.focus(),!0)}containerWithValue(e){return"["+a+'="'+e+'"]'}destinationWithValue(e){return"["+l+'="'+e+'"]'}getPreviousContainer(e){return e.closest(c).prevAll(c).first()}getNextContainer(e){return e.closest(c).nextAll(c).first()}rotateKeyCode(e){switch(e){case r.UP:return r.RL;case r.WV:return r.pX;case r.RL:return r.UP;case r.pX:return r.WV}}upEqualsLeftKeyCode(e){switch(e){case r.RL:return r.UP;case r.pX:return r.WV;default:return e}}constructor(e){this.$parse=e,this.restrict="A",this.link=(e,t,n)=>{let i=this.$parse(n.bbArrowKeyNavigation)(null);if("rows"!==i.layout&&"columns"!==i.layout&&"both"!==i.layout)throw Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(i.tabDirection&&"vertical"!==i.tabDirection&&"horizontal"!==i.tabDirection)throw Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");t.on("keydown",e=>{let n=s(e.target),o=e.keyCode;i.tabDirection&&o===r.Mf&&("vertical"===i.tabDirection?o=e.shiftKey?r.UP:r.WV:"horizontal"===i.tabDirection&&(o=e.shiftKey?r.RL:r.pX)),"rows"===i.layout&&(o=this.rotateKeyCode(o)),i.upEqualsLeft&&(o=this.upEqualsLeftKeyCode(o)),this.navigate(n,t,o,i.wrap,i.explicit)&&(this.body.removeClass("hide-focus-outline"),e.preventDefault(),e.stopPropagation())}),e.$on("$destroy",()=>{t.off()})},this.body=s("body")}}u.$inject=["$parse"],i.module(o,[]).directive("bbArrowKeyNavigation",["$injector",e=>e.instantiate(u)])},227722:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(625506);let s="ultra.components.directives.accessibility.clickFocus";class o{constructor(e,t){this.injector=e,this.timeout=t,this.restrict="A",this.link=(e,t,n)=>{n.bbClickFocus.length&&t.on("click",()=>{this.timeout(()=>{if(n.indexToFocus){let e=Number(n.indexToFocus);r(n.bbClickFocus).eq(e).focus()}else r(n.bbClickFocus).focus()},120)})}}}o.$inject=["$injector","$timeout"],i.module(s,[]).directive("bbClickFocus",["$injector",e=>e.instantiate(o)])},737416:function(e,t,n){"use strict";n.d(t,{Pq:function(){return m},e1:function(){return d}});var i=n(842891),r=n(464027),s=n(276635),o=n(385847),a=n(324686),l=n(480489),c=n(625506);let d="ultra.directives.accessibility.hideFocusOutline",u="hide-focus-outline",p="is-focusVisible";class m{static enableFocusOutline(){c(document.body).removeClass(u),c(document.body).addClass(p)}static ensureEvents(e){m.eventHandlers||(m.eventHandlers={keyup:t,keydown:t,mousedown:s.debounce(function(t){e.addClass(u),e.removeClass(p),i.t6.isLastNavigationByKeyboard=!1,i.t6.lastClickedElement=c(t.target).closest(":tabbable"),s.delay(()=>{i.t6.lastClickedElement&&0===i.t6.lastClickedElement.parents("body").length&&(i.t6.lastClickedElement=void 0)},800)},200)},Object.keys(m.eventHandlers).forEach(e=>{document.addEventListener(e,m.eventHandlers[e],!0)}));function t(e){e.keyCode===o.Mf&&(m.enableFocusOutline(),i.t6.isLastNavigationByKeyboard=!0)}}static unregisterEvents(){Object.keys(m.eventHandlers).forEach(e=>{document.removeEventListener(e,m.eventHandlers[e],!0)}),m.eventHandlers=null}constructor(e){this.bbTimeout=e,this.restrict="A",this.link=(e,t,n)=>{a.B(),t.addClass(u),t.removeClass(p),m.instanceCount+=1,m.ensureEvents(t),e.$on("$destroy",()=>{m.instanceCount-=1,0===m.instanceCount&&m.unregisterEvents(),t.off()})}}}m.$inject=[l.H],m.instanceCount=0,m.eventHandlers=null,r.module(d,[l.e]).directive("bbFocusHelper",["$injector",e=>e.instantiate(m)])},892290:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(842891),r=n(464027),s=n(786430),o=n(495794);let a="ultra.directives.accessibility.focus";class l{constructor(e,t){this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=(e,t,n)=>{let i=n.keepTriggerFocus,r=e.$watch(n.bbFocus,e=>{(null==e||"true"===e.toString().toLowerCase())&&this._accessibility.isElementInActivePanel(t)&&(o.Zl(t,this.bbOffcanvas.safeFocus.bind(this.bbOffcanvas)),"true"!==i&&r())})}}}l.$inject=[s.HV,i.HV],r.module(a,[s.e1]).directive("bbFocus",["$injector",e=>e.instantiate(l)])},529415:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(464027),r=n(385847);let s="ultra.directives.accessibility.keyboardEnter";class o{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("keydown keypress",i=>{i.keyCode===r.K5&&(n.bbBlurBeforeEnter&&t.blur(),e.$apply(function(){e.$eval(n.bbKeyboardEnter,{$event:i})}),i.preventDefault())})}}}i.module(s,[]).directive("bbKeyboardEnter",["$injector",e=>e.instantiate(o)])},786845:function(e,t,n){"use strict";n.d(t,{$N:function(){return d},e1:function(){return c},i_:function(){return u}});var i=n(464027),r=n(728042),s=n(456133),o=n(817426),a=n(391489),l=n(625506);let c="ultra.components.directives.accessibility.liveRegion",d="aria_live_polite",u="aria_live_assertive",p="#aria-live-polite-region-1",m="#aria-live-polite-region-2",h="#aria-live-assertive-region-1",g="#aria-live-assertive-region-2";class f{cleanLiveRegion(){let e=l(p),t=l(m),n=l(h),i=l(g);void 0!==e&&(e.empty(),t.empty(),n.empty(),i.empty())}readPoliteMessage(e){let t=l(p),n=l(m);this.readMessage(t,n,e)}readAssertiveMessage(e){let t=l(h),n=l(g);this.readMessage(t,n,e)}readMessage(e,t,n){""===e.text()?this.switchRegion(t,e,n):this.switchRegion(e,t,n)}switchRegion(e,t,n){e.empty(),e.attr("aria-hidden","true"),t.text(n),t.attr("aria-hidden","false")}constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,o.HD.readAssertive=e=>this.readAssertiveMessage(e),o.HD.readPolite=e=>this.readPoliteMessage(e),r.Z.OnRootScope(e,d,(e,t)=>{this.readPoliteMessage(t),this.isEnabled=!0}),r.Z.OnRootScope(e,u,(e,t)=>{this.readAssertiveMessage(t),this.isEnabled=!0}),e.$on(a.G.$locationChangeSuccess,()=>{this.isEnabled&&(this.cleanLiveRegion(),this.isEnabled=!1)})}}f.$inject=["scope","element","attrs"];class b{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="A",this.link=(e,t,n)=>{t.append(this.$compile(s)(e)),e.liveRegion=this.$injector.instantiate(f,{scope:e,element:t,attrs:n})}}}b.$inject=["$injector","$compile"],i.module(c,[]).directive("bbLiveRegion",["$injector",e=>e.instantiate(b)])},221789:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i,r=n(728042),s=n(302032),o=n(564470);let a="ultra.directives.bbAllyContentRef";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,r.w)({module:angular.module(a,[]),componentName:"bbAllyContentRef",bindings:{contentId:"@",fileId:"@",filePreviewUrl:"@"}}),(i=(0,s.tB)("$element"),function(e,t){i(e,t,0)})],class{$postLink(){o.ZP.renderContentId(this.$element[0],{contentId:this.contentId,fileId:this.fileId,filePreviewUrl:this.filePreviewUrl})}$onDestroy(){o.ZP.destroyComponent(this.$element[0])}constructor(e){this.$element=e}})},227488:function(e,t,n){"use strict";n.d(t,{e1:function(){return c}});var i=n(564470),r=n(748382),s=n(676954),o=n(728042),a=n(302032);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.directives.bbAllyShow";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,o.w)({module:angular.module(c,[r.e1,s.moduleName]),componentName:"bbAllyShow",bindings:{contentId:"@",showViewScoreLink:"<?",showAlternativeFormatsLink:"<?",showIcon:"<?",iconSize:"@?"}}),l(0,(0,a.tB)("$element")),l(1,(0,a.tB)("$scope")),l(2,(0,a.tB)(s.serviceName))],class{$postLink(){let e={contentRef:this.contentId,widgetType:this.showViewScoreLink?i.l9.ScoreIndicator:i.l9.AlternativeFormats},t=this.localize.getLocale(this.$scope);this.showIcon?this.iconSize&&(e.iconSize=this.iconSize):e.text=this.localize.translateSync({locale:t,key:this.showViewScoreLink?"ally.open_feedback_panel":"ally.download_alternative_formats"}),this.showAlternativeFormatsLink&&(e.ariaLabel=this.localize.translateSync({locale:t,key:"ally.download_alternative_formats"})),i.ZP.renderWidget(this.$element[0],e)}$onDestroy(){i.ZP.destroyComponent(this.$element[0])}constructor(e,t,n){this.$element=e,this.$scope=t,this.localize=n,this.showIcon=!1}})},550656:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),r=n(984654),s=n(88818);let o="ultra.components.directives.grade.course-grades-grader",a={Class:s.kqq,bindingNames:["sortable","sort"]};i.module(o,[]).component("bbArrowSortIndicator",(0,r.G5)(a))},842034:function(e,t,n){"use strict";n.d(t,{Gb:function(){return g},JB:function(){return f},XH:function(){return b},e1:function(){return u},lZ:function(){return m},o5:function(){return p},qH:function(){return h}});var i,r,s=n(464027),o=n(492901),a=n(981796),l=n(721597),c=n(480489),d=n(88818);let u="ultra.directives.autosave",p="bb-autosave-save-to-server-now",m="bb-autosave-browser-delete",h="bb-autosave-form",g="bb-autosave-save-trigger-debounce",f=1e4,b=3;(i=r||(r={})).BrowserLocalStorage="browserLocalStorage",i.BrowserSessionStorage="browserSessionStorage",i.Server="server";class v{setupListeners(){this.scope.$on("bb-autosave-interrupt-timer",()=>{this.timeout.cancel(this.autoSaveTimeout)}),this.scope.$on(g,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||this.debounceSave()}),this.scope.$on(p,()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.timeout.cancel(this.autoSaveTimeout),this.saveToServerNow())}),this.scope.$on("bb-autosave-save-to-browser-now",()=>{this.scope.delayAutosave&&this.scope.delayAutosave()||(this.scope.$emit(h,d.Hth.Change),this.timeout.cancel(this.autoSaveTimeout),this.saveToBrowserNow())}),this.scope.$on("bb-autosave-browser-restore",()=>{this.restoreFromBrowser()}),this.scope.$on(m,()=>{this.deleteFromBrowser()}),this.scope.$on("bb-start-auto-submission",(e,t)=>{this.startAutoSubmit=!0,t.resolve()}),this.scope.$on("bb-cancel-auto-submission",()=>{this.startAutoSubmit=!1})}setupWatcher(){let e=(e,t)=>{this.scope.delayAutosave&&this.scope.delayAutosave()||null===e&&""===t||this.debounceSave()};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return l.k(this.scope,this.formController,e);let t=this.scope.$watch(()=>this.scope.delayAutosave(),n=>{null==n||n||(l.k(this.scope,this.formController,e),t())})}checkForDirectiveConfigErrors(){if("server"===this.saveTo&&!(this.scope.saveFunc&&this.scope.validationFunc))throw Error("saving to the server requires save-func and validate to be defined")}isValid(){return this.formController.$valid&&this.scope.validationFunc()}debounceSave(){if(this.startAutoSubmit)return;this.scope.useSaveNumbers&&(this.saveNumber=this.saveNumber+1);let e=this.saveNumber;this.scope.$emit(h,d.Hth.Change,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.$emit("bb-autosave-form-to-browser",d.Hth.Change),this.timeout.cancel(this.autoSaveTimeout),!this.autoSaveTimeout&&this.scope.useLeadingEdge?(this.saveToDestination(e),this.autoSaveTimeout=this.timeout(()=>{},this.scope,this.timeoutMillis)):this.autoSaveTimeout=this.timeout(()=>{this.saveToDestination(e)},this.scope,this.timeoutMillis)}saveToDestination(e){"server"===this.saveTo?this.saveToServerNow(e):this.browserStorageDestination&&this.saveToBrowserNow()}saveToServerNow(e=0){if(!(!this.startAutoSubmit&&a.wj())){if(!(this.scope.saveFunc&&this.scope.validationFunc))throw Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit(h,d.Hth.Saving,void 0,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.scope.saveFunc().then(t=>{this.scope.$emit(h,d.Hth.Saved,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e}),this.browserStorageDestination&&this.deleteFromBrowser()},t=>{this.scope.$emit(h,d.Hth.SaveFailure,t,{id:this.scope.autoSaveContextId,area:this.scope.autoSaveContextArea,saveNumber:e})})):this.scope.$emit(h,d.Hth.ValidationFailure)}}saveToBrowserNow(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",d.Hth.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{this.scope.$emit("bb-autosave-form-to-browser",d.Hth.Saved,e)})}restoreFromBrowser(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(e=>{if(e)return this.scope.$root.$broadcast("bb-autosave-browser-restore-data",e),e})}deleteFromBrowser(){if(!this.browserStorageDestination)throw Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)}constructor(e,t,n,i,s){switch(this.$q=e,this.scope=t,this.formController=n,this.browserStorage=i,this.timeout=s,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveNumber=0,this.saveTo=this.scope.debounceSaveDestination&&function(e){if(e)return Object.values(r).find(t=>t.toLowerCase()===e.toLowerCase())}(this.scope.debounceSaveDestination())||"server",this.saveTo){case"browserSessionStorage":this.browserStorageDestination=o.iE.SessionStorage;break;case"browserLocalStorage":this.browserStorageDestination=o.iE.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}}v.$inject=["$q","scope","formController",o.HV,c.H];class y{constructor(e){this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",autoSaveContextId:"@?",autoSaveContextArea:"@?",timeoutMillis:"&?",validationFunc:"&?",useLeadingEdge:"<?",useSaveNumbers:"<?"},this.link=(e,t,n,i)=>{e.autoSave=this.$injector.instantiate(v,{scope:e,formController:i})}}}y.$inject=["$injector"],s.module(u,[c.e,o.e1]).directive("bbAutosave",["$injector",e=>e.instantiate(y)])},194044:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),r=n(676954),s=n(706624),o=n(88818);let a="ultra.directives.saveButtons";class l{isValid(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()}isCancelNowADelete(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore}isCancelDisabled(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()}isDeleteDisabled(){return this.isSaving||!this.scope.canDelete()}isSaveDisabled(){return this.isSaving||!this.isValid()}cancelAction(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()}deleteAction(){return this.form.$setPristine(),this.scope.deleteAction()}saveAction(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()}mousedownAction(){if(this.scope.mousedownAction)return this.scope.mousedownAction()}informScreenReaderToRead(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)}constructor(e,t){this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then(()=>{this.notSavedStr=e.saveType||this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notSaved"}),this.savedStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saved"}),this.savingStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.saving"}),this.cancelStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.cancel"}),this.deleteStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.delete"}),this.savedSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),this.canceledSuccessfullyStr=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),this.deleteButtonStatus=this.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&this.isSavedOnceOrMore?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&this.isSavedOnceOrMore?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr}),e.$on("bb-save-button",(t,n,i)=>{let r=!1;switch(n){case o.Hth.Change:this.isSaving=!1,this.saveButtonStatus=this.notSavedStr;break;case o.Hth.Saving:this.isSaving=!0,this.saveButtonStatus=this.savingStr,r=!0;break;case o.Hth.Saved:r=!0,this.isSavedOnceOrMore=!0,this.isSaving=!1,this.informScreenReaderToRead(this.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?this.saveButtonStatus=this.savedStr:this.saveButtonStatus=this.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?this.cancelButtonStatus=this.deleteStr:this.cancelButtonStatus=this.cancelStr;break;case o.Hth.SaveFailure:case o.Hth.ValidationFailure:r=!0}this.form.$bbSaveAttempt=r}),e.$parent.$on("bb-autosave-form-to-browser",(e,t,n)=>{o.Hth.Saved===t&&this.element.attr("saved-to-browser",this.savedToBrowserCount+=1)})}}l.$inject=["scope",r.serviceName];class c{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,n,i)=>{e.saveButtons=this.$injector.instantiate(l,{scope:e}),e.saveButtons.form=i,e.saveButtons.element=t},this.compile=(e,t)=>("true"===t.isInline&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:this.link}),this.template=s}}c.$inject=["$injector",r.serviceName],i.module(a,[r.moduleName]).directive("bbSaveButtons",["$injector",e=>e.instantiate(c)])},767679:function(e,t,n){"use strict";n.d(t,{e1:function(){return E}}),n(85677);var i=n(464027),r=n(259197),s=n(351876),o=n(658895),a=n(676954),l=class{static convertToGrayscale(e){let t;let n=document.createElement("canvas"),i=n.getContext("2d"),r=e.naturalWidth,s=e.naturalHeight;n.width=r,n.height=s,i.drawImage(e,0,0);let o=i.getImageData(0,0,r,s),a=o.data.length;for(let e=0;e<a;e+=4)t=(o.data[e]+o.data[e+1]+o.data[e+2])/3,o.data[e]=t,o.data[e+1]=t,o.data[e+2]=t;return i.putImageData(o,0,0,0,0,o.width,o.height),n.toDataURL()}};let c="ultra.components.directives.imageGrayscale";class d{onLoadCallback(){return()=>{let e=l.convertToGrayscale(this.element[0]);this.element[0].src=e}}constructor(e,t,n){this.scope=e,this.element=t,this.attributes=n,"true"===this.attributes.bbImageGrayscale&&p()&&t.one("load",this.onLoadCallback())}}class u{constructor(){this.restrict="A",this.link=(e,t,n)=>new d(e,t,n)}}function p(){let e=document.documentMode;return 10===e||11===e}let m=i.module(c,[]);p()&&m.directive("bbImageGrayscale",["$injector",e=>e.instantiate(u)]);var h=n(613944),g=n(78364);let f="ultra.components.directives.bbUiIcon.large.AvatarMultiple";(0,h.n)(g.Y,f,"bbUiIconLargeAvatarMultiple");var b=n(302032),v=n(412971),y=n(889450),S=n(625506);function C(e,t){return function(n,i){t(n,i,e)}}let E="ultra.directives.avatar";class I{getAvatarBG(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)}avatarParticipantsClass(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}}canDisplayAvatarForUser(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!!e.avatar&&!!e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl)}getInitials(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||(0,s.bj)(e.givenName)||(0,s.bj)(e.familyName)||(0,s.DR)(e.givenName)||(0,s.DR)(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()}buildAvatarData(e){let t={};if(!this.canDisplayAvatarForUser(e))return null;if(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,a.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then(e=>{t.username=e}):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl){if(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")){let t=(y.Z.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(t)}t.avatarUrl=e.avatar.permanentUrl}return t.isMultiUser=r.rL4.isMultiUserId(e),t}isAnonymousStudent(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()}renderAvatars(){let e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),i.isArray(e)||(e=null!=e?[e]:[]),0===e.length){this.scope.first=null,this.scope.second=null,this.scope.participants=0,this.scope.isAvatarRender=!0;return}this.scope.participants=e.length,this.scope.avatarsClasses={},i.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),this.scope.avatarsClasses.inactive||(this.scope.avatarsClasses.outline=!0),!this.scope.avatarsClasses.inactive&&i.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0}constructor(e,t,n,i,r){this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=i,this.$timeout=r,this.backgroundColors=12;let s=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()","isWarningRender"],()=>{void 0!==this.scope.user&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||s())}),o=this.scope.$watchCollection("users",()=>{this.scope.users&&(this.renderAvatars(),this.scope.autoUpdate&&this.scope.autoUpdate()||o())})}}class w{constructor(e,t){this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=v,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?",analyticsIdTagPrefix:"@",isWarningRender:"=?"},this.link=(e,t,n)=>new I(e,t,n,this.bbLocalize,this.$timeout)}}w=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([C(0,(0,b.tB)(a.serviceName)),C(1,(0,b.tB)("$timeout"))],w),o.default.features.newAvatar?i.module(E,[f]).directive("bbAvatar",["$compile",e=>({restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link(t,n,i){let r=Object.prototype.hasOwnProperty.call(i,"users")?"bb-user-avatar-group":"bb-user-avatar",s=S(n[0].outerHTML.replace(/bb\-avatar/g,r));n.replaceWith(s),e(s)(t)}})]):i.module(E,[c,f]).directive("bbAvatar",["$injector",e=>e.instantiate(w)])},791726:function(e,t,n){"use strict";n.d(t,{e1:function(){return X}});var i=n(728042),r=n(302032),s=n(676954),o=n(524062),a=n(613944),l=n(477115);let c="ultra.components.directives.bbUiIcon.large.Attendance";(0,a.n)(l.u,c,"bbUiIconLargeAttendance");var d=n(141401),u=n(20856);let p="ultra.components.directives.bbUiIcon.large.Calculation";(0,a.n)(u.E,p,"bbUiIconLargeCalculation");var m=n(835137),h=n(345349);let g="ultra.components.directives.bbUiIcon.large.DocumentBlank";(0,a.n)(h.E,g,"bbUiIconLargeDocumentBlank");var f=n(76328),b=n(754803),v=n(174958),y=n(623402);let S="ultra.components.directives.bbUiIcon.large.Homework";(0,a.n)(y.A,S,"bbUiIconLargeHomework");var C=n(139936);let E="ultra.components.directives.bbUiIcon.large.Photo";(0,a.n)(C.P,E,"bbUiIconLargePhoto");var I=n(155457),w=n(142753),A=n(149641),k=n(812500),T=n(303103);let P="ultra.components.directives.bbUiIcon.large.OverallGrade";(0,a.n)(T.b,P,"bbUiIconLargeOverallGrade");var D=n(708339);let x="ultra.components.directives.bbUiIcon.large.Pdf";(0,a.n)(D.Q,x,"bbUiIconLargePdf");var R=n(773331);let L="ultra.components.directives.bbUiIcon.large.Presentation";(0,a.n)(R.A,L,"bbUiIconLargePresentation");var N=n(519270),$=n(433571),O=n(460473),G=n(498781),_=n(720847);let M="ultra.components.directives.bbUiIcon.large.Video";(0,a.n)(_.n,M,"bbUiIconLargeVideo");var B=n(13480);let F="ultra.components.directives.bbUiIcon.large.Audio";(0,a.n)(B.B,F,"bbUiIconLargeAudio");var U=n(414353),V=n(189029),H=n(279120);let q="ultra.components.directives.bbUiIcon.large.Participation";(0,a.n)(H.A,q,"bbUiIconLargeParticipation");var j=n(741343);let z="ultra.components.directives.bbUiIcon.large.CollaborativeCloud";(0,a.n)(j.u,z,"bbUiIconLargeCollaborativeCloud");var W=n(789601);let K="ultra.components.directives.bbUiIcon.large.CloudCollaborationGoogle";(0,a.n)(W.l,K,"bbUiIconLargeCloudCollaborationGoogle");var Z=n(309371);let Q="ultra.components.directives.bbUiIcon.large.DocumentGoogle";(0,a.n)(Z.H,Q,"bbUiIconLargeDocumentGoogle");var J=n(641343);function Y(e,t){return function(n,i){t(n,i,e)}}let X="ultra.components.directives.bbUiContentIcon";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,i.w)({moduleName:X,componentName:"bbUiContentIcon",bindings:{icon:"<",color:"@?",notDecorative:"<?"},template:J,requireModules:[s.moduleName,m.e,o.e,c,F,d.e,p,m.e,g,f.e,b.e,v.e,S,I.e,w.e,A.e,k.e,P,x,E,L,N.e,$.e,O.e,G.e,M,U.e,V.e,q,z,Q,K]}),Y(0,(0,r.tB)("$scope")),Y(1,(0,r.tB)(s.serviceName))],class{$onChanges(){this.setTitleAccess()}setTitleAccess(){this.notDecorative&&this.icon&&(this.titleAccess=this.localize.translateSync({key:`components.directives.element-image.element-image-accessibility.img-icon-${this.icon}`,locale:this.localize.getLocale(this.$scope)}))}constructor(e,t){this.$scope=e,this.localize=t}})},613944:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var i=n(464027),r=n(202784),s=n(984654);function o(e,t,n){i.module(t,[]).component(n,(0,s.G5)({Class:t=>r.createElement(e,t),attributes:["color","className","titleAccess"],withErrorModalBoundary:!1}))}},524062:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(115296);let s="ultra.components.directives.bbUiIcon.large.Assignments";(0,i.n)(r.M,s,"bbUiIconLargeAssignments")},141401:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(610455);let s="ultra.components.directives.bbUiIcon.large.Blog";(0,i.n)(r.l,s,"bbUiIconLargeBlog")},835137:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(768722);let s="ultra.components.directives.bbUiIcon.large.Discussion";(0,i.n)(r.$,s,"bbUiIconLargeDiscussion")},76328:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(361333);let s="ultra.components.directives.bbUiIcon.large.DocumentCloud";(0,i.n)(r.g,s,"bbUiIconLargeDocumentCloud")},676260:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(890983);let s="ultra.components.directives.bbUiIcon.large.DocumentMultiple";(0,i.n)(r.I,s,"bbUiIconLargeDocumentMultiple")},754803:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(520091);let s="ultra.components.directives.bbUiIcon.large.DocumentText";(0,i.n)(r.s,s,"bbUiIconLargeDocumentText")},174958:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(852632);let s="ultra.components.directives.bbUiIcon.large.Folder";(0,i.n)(r.g,s,"bbUiIconLargeFolder")},155457:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(904749);let s="ultra.components.directives.bbUiIcon.large.Journal";(0,i.n)(r.t,s,"bbUiIconLargeJournal")},142753:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(718359);let s="ultra.components.directives.bbUiIcon.large.LearningModule";(0,i.n)(r.W,s,"bbUiIconLargeLearningModule")},149641:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(892208);let s="ultra.components.directives.bbUiIcon.large.Link";(0,i.n)(r.r,s,"bbUiIconLargeLink")},812500:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(830858);let s="ultra.components.directives.bbUiIcon.large.Lti";(0,i.n)(r.U,s,"bbUiIconLargeLti")},519270:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(747216);let s="ultra.components.directives.bbUiIcon.large.Scormengine";(0,i.n)(r.C,s,"bbUiIconLargeScormengine")},433571:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(120560);let s="ultra.components.directives.bbUiIcon.large.Spreadsheet";(0,i.n)(r.Y,s,"bbUiIconLargeSpreadsheet")},189029:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(543375);let s="ultra.components.directives.bbUiIcon.large.Survey";(0,i.n)(r.m,s,"bbUiIconLargeSurvey")},460473:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(124057);let s="ultra.components.directives.bbUiIcon.large.Test";(0,i.n)(r.e,s,"bbUiIconLargeTest")},498781:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(864094);let s="ultra.components.directives.bbUiIcon.large.Textbook";(0,i.n)(r.w,s,"bbUiIconLargeTextbook")},414353:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(420628);let s="ultra.components.directives.bbUiIcon.large.Zip";(0,i.n)(r.s,s,"bbUiIconLargeZip")},268218:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(861493);let s="ultra.components.directives.bbUiIcon.medium.Settings";(0,i.n)(r.Settings,s,"bbUiIconMediumSettings")},651351:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(541346);let s="ultra.components.directives.bbUiIcon.small.Download";(0,i.n)(r.U,s,"bbUiIconSmallDownload")},840236:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(879121);let s="ultra.components.directives.bbUiIcon.small.Exempt";(0,i.n)(r.d,s,"bbUiIconSmallExempt")},993358:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(613944),r=n(367522);let s="ultra.components.directives.bbUiIcon.small.Invisible";(0,i.n)(r.u,s,"bbUiIconSmallInvisible")},410704:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027);let r="ultra.components.directives.cacheCompilation";class s{compile(e,t){let n=t.bbCacheCompilation;if(!n)throw Error("Cache compilation key is required");let i=e.contents();return e.empty(),null==this.compiled[n]&&(this.compiled[n]=this.$compile(i)),(e,t)=>{this.compiled[n](e,function(e,n){t.append(e)})}}constructor(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}}s.$inject=["$compile"],i.module(r,[]).directive("bbCacheCompilation",["$injector",e=>e.instantiate(s)])},323239:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(480489);let s="ultra.components.directives.clickOutside";class o{applyExpression(e){let t=this.element.is(e.target),n=this.element.has(e.target).length>0;t||n||this.scope.$apply(this.attrs.bbClickOutside)}getContainer(){if("currentPanelOnly"in this.attrs){let e=this.element;for(;e.parent().length;)if((e=e.parent()).is(".bb-offcanvas-panel,#main-content-inner"))return e}}constructor(e,t,n,i,r){this.scope=e,this.element=t,this.attrs=n,this.$document=i,this.timeout=r;let s=e=>this.applyExpression(e),o=this.getContainer()||i;this.scope.$watch(this.attrs.isActive,(e,t)=>{e?this.timeout(()=>{o.on("click",s)},this.scope,0,!1):o.off("click",s)}),this.scope.$on("$destroy",()=>{o.off("click",s)})}}o.$inject=["scope","element","attrs","$document",r.H];class a{constructor(e){this.$injector=e,this.priority=100,this.restrict="A",this.compile=(e,t)=>({pre:(e,t,n)=>this.$injector.instantiate(o,{scope:e,element:t,attrs:n})})}}a.$inject=["$injector"],i.module(s,[]).directive("bbClickOutside",["$injector",e=>e.instantiate(a)])},259993:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}}),n(219693);var i=n(464027),r=n(625506);let s="ultra.components.directives.clickScrollTo";class o{constructor(){this.restrict="A",this.link=(e,t,n)=>{t.on("click",()=>{r(n.bbClickScrollTo).scrollintoview({duration:500})}),e.$on("$destroy",()=>{t.off()})}}}i.module(s,[]).directive("bbClickScrollTo",["$injector",e=>e.instantiate(o)])},396435:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(464027),r=n(480489),s=n(625506);let o="ultra.components.directives.clickToInvokeChild",a="bbClickToInvokeChild";class l{setClickableStyle(){this.timeout(()=>{this.element.find(this.linkSelector).first().length?(void 0===this.element.attr("tabindex")&&this.element.attr("tabindex","-1"),this.element.addClass("child-is-invokable")):(this.element.removeAttr("tabindex"),this.element.removeClass("child-is-invokable"))},this.scope,0,!1)}constructor(e,t,n,i){if(this.scope=e,this.element=t,this.attrs=n,this.timeout=i,this.linkSelector=n[a],!this.linkSelector&&void 0!==this.linkSelector)throw Error(a+" has no child selector specified.");this.setClickableStyle(),e.$on("click-to-invoke-child-directive-init",()=>{this.setClickableStyle()}),t.on("click",e=>{if(!s(e.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",this.element.get(0)).length){let t=this.element.find(this.linkSelector).get(0);t&&(t.click(),n.stopPropagation&&"true"===n.stopPropagation&&e.stopPropagation())}})}}l.$inject=["scope","element","attrs",r.H];class c{constructor(e){this.$injector=e,this.scope=!1,this.restrict="A",this.link=(e,t,n)=>{this.$injector.instantiate(l,{scope:e,element:t,attrs:n})}}}c.$inject=["$injector"],i.module(o,[r.e]).directive(a,["$injector",e=>e.instantiate(c)])},453856:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(480489);let s="ultra.components.directives.click";class o{constructor(e){this.timeout=e,this.restrict="A",this.link=(e,t,n)=>{void 0===n.bbClickTimeout&&(n.bbClickTimeout=0);let i=0,r=()=>{let t;"true"===n.bbClickOnceDisable?t=e.$eval(n.bbClick):(i+=1)<=1&&(t=e.$eval(n.bbClick)),null!=t&&void 0!==t&&t.finally(()=>{this.timeout(function(){i=0},e,n.bbClickTimeout)})};e.$on("$destroy",function(){t.off("click",r)}),t.on("click",r)}}}o.$inject=[r.H],i.module(s,[r.e]).directive("bbClick",["$injector",e=>e.instantiate(o)])},240881:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(464027),r=n(676954),s=n(88818),o=n(984654);let a="ultra.components.directives.components.confirmationCalloutDialog",l={Class:s.y2h,bindingNames:["analyticsId","target","isVisible","textContent","onDismiss","onSuccess"],renderLocalized:!0};i.module(a,[r.moduleName]).component("bbConfirmationCalloutDialog",(0,o.G5)(l))},562067:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i=n(808361),r=n(860995),s=n(302032),o=n(464027);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective";class c{replaceToken(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e}constructor(e,t,n,i,r){this.element=e,this.attributes=t,this.scope=n,this.ultraState=i,this.currentCourse=r;try{(i.includes("base.organizations.**")||r.course&&r.course.isOrganization)&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}}class d{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,n)=>new c(t,n,e,this.ultraState,this.currentCourse)}}d=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,s.tB)(i.HV)),a(1,(0,s.tB)(r.HV))],d),o.module(l,[i.e1]).directive("confirmationCourseOrgTokenResolver",["$injector",e=>e.instantiate(d)])},716865:function(e,t,n){"use strict";n.d(t,{N0:function(){return b},Pc:function(){return y},e1:function(){return h},y_:function(){return r}});var i,r,s=n(276635),o=n(464027),a=n(362767),l=n(676954),c=n(65783),d=n(555840),u=n(554669),p=n(776517),m=n(625506);let h="ultra.directives.confirmationNeeded",g="components.directives.confirmation-needed.",f="dont-ask-again",b="show-confirmation";function v(e){if(e)return Object.values(r).find(t=>t.toLowerCase()===e.toLowerCase())}function y(e,t){return g+t+"-"+e}(i=r||(r={})).Always="always",i.Once="once",i.UserChoice="userChoice";class S{handleButtonClick(e){let t;if(!this.clickHandling){if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)t=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else if(this.attrs.bbConfirmationNeeded)t=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType});else{this.clickHandling=!1;return}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),t.then(t=>{if(!t.confirmationKey){this.invokeClickAction(e);return}switch(this.resourceType=t.confirmationKey.replace("resource/",""),this.choices=[],v(t.showType)){case"always":this.confirmAction(e);break;case"once":this.showConfirmationActionOnlyOnce(e);break;default:this.showConfirmationActionByUserChoice(e)}})}}showConfirmationActionOnlyOnce(e){this.bbContext.getPreference(this.createPreferenceKey(f),"false").then(t=>{"true"===t.value?this.invokeClickAction(e):this.confirmAction(e)})}createResourceKey(e){return g+e+"-"+this.resourceType}createPreferenceKey(e){return"{{context}}.confirmation".replace("{{context}}",this.resourceType+"-"+e).replace(/\-/g,".")}addToChoices(e,t,n){let i={key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!n};this.choices.some(t=>t.key===e)||this.choices.push(i)}parseChoicesFromAttr(e){if(e&&e.length)for(let t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)}showConfirmationActionByUserChoice(e){this.bbContext.getPreference(this.createPreferenceKey(f),"false").then(t=>{if("true"===t.value){if(this.attrs.choices){let t=JSON.parse(this.attrs.choices),n=[];t.forEach(e=>{n.push(this.bbContext.getPreference(this.createPreferenceKey(e.key),"false").then(t=>{let n="true"===t.value;this.scope.$emit(e.key,n)}))}),this.$q.all(n).then(()=>{this.invokeClickAction(e)})}else this.invokeClickAction(e)}else this.addToChoices(f),this.confirmAction(e)},()=>{this.addToChoices(f),this.confirmAction(e)})}confirmAction(e){let t;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?u.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):u;let n=this;this.modalInstance=this.$modal.open({template:t,scope:n.scope,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/directives/confirmation-needed")]},controller:["$scope",l.serviceName,function(e,t){e.okAction=()=>{e.$close(),n.okClicked=!0},e.cancelAction=()=>{n.attrs.otherChoiceAction?(e.$close(),n.okClicked=!1):e.$dismiss(),(0,p.sA)(p.Cs.CancelClicked)};let i={};n.attrs.modalTranslateOptions&&(i=e.$eval(n.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach(n=>{e.modalTranslateOptions[n]=s.merge({key:e[n+"Key"]},i[n]),e.modalStrings[n]=t.translateSync(e.modalTranslateOptions[n])})}]}),this.modalInstance.result.then(()=>{this.okClicked?(this.persistResult(),this.invokeClickAction(e)):(this.scope.$eval(this.attrs.otherChoiceAction),this.clickHandling=!1)},()=>{this.attrs.dismissCallback&&this.scope.$eval(this.attrs.dismissCallback),this.clickHandling=!1})}persistResult(){switch(v(this.attrs.showType)){case"always":this.choices.forEach(e=>{this.scope.$emit(e.key,e.value)});break;case"once":this.bbContext.setPreference(this.createPreferenceKey(f),"true");break;default:this.choices.forEach(e=>{e.value&&(this.scope.$emit(e.key,e.value),this.bbContext.setPreference(e.preferenceKey,e.value.toString()))})}}invokeClickAction(e){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:e}),this.clickHandling=!1,this.scope.nextSelector&&m(this.scope.nextSelector).focus()}constructor(e,t,n,i,r,s){this.scope=e,this.attrs=n,this.$q=i,this.bbContext=r,this.$modal=s,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on(b,(e,t,n)=>{t===this.attrs.modalName&&this.handleButtonClick(n)}),t.on("click",e=>{this.handleButtonClick(e)}),e.$on("$destroy",()=>{t.off()}),e.$on("dismiss-confirmation",()=>{this.modalInstance&&this.modalInstance.dismiss()})}}class C{constructor(e,t,n){this.$q=e,this.bbContext=t,this.$modal=n,this.priority=100,this.restrict="A",this.scope=!0,this.compile=(e,t)=>({pre:(e,t,n)=>new S(e,t,n,this.$q,this.bbContext,this.$modal)})}}C.$inject=["$q",a.HV,c.HV,d.N7.H],o.module(h,["ngSanitize",a.e1,c.e1]).directive("bbConfirmationNeeded",["$injector",e=>e.instantiate(C)])},535578:function(e,t,n){"use strict";n.d(t,{$:function(){return w}});var i,r,s=n(703453),o=n(676954),a=n(677315),l=n(860995),c=n(567361),d=n(983109),u=n(603094),p=n(385847),m=n(555840),h=n(115775),g=n(610624),f=n(480489),b=n(808361),v=n(479442),y=n(302032),S=n(986709),C=n(776517),E=n(817426);function I(e,t){return function(n,i){t(n,i,e)}}(i=r||(r={})).Unzip="Unzip",i.Website="Website",i.Default="Default";class w{onKeydown(e){e.keyCode===p.hY&&this.isMenuVisible&&(this.closeMenu(),this.element.find("a.js-show-add-options").focus(),e.stopPropagation(),e.preventDefault())}showButton(){this.isButtonVisible=!0}hideButton(){this.isButtonVisible=!1}toggleMenu(){if(this.showMenuOverride)this.showMenuOverride&&this.isEmptyFolder()&&this.scope.$emit("toggle-folder-by-id",this.scope.content.id);else{let e=this.isMenuVisible;e||this.$rootScope.$broadcast("close-all-add-menus"),this.isMenuVisible||this.timeout(()=>{this.element.scrollintoview({duration:250})},this.scope,0,!1),this.isMenuVisible=!e}}isForceShowAddButton(){return this.scope.forceShowAddButton}closeMenu(){this.isMenuVisible&&this.toggleMenu()}getInsertLocationData(){return this.insertLocation={parentId:this.scope.parentId(),positionBefore:this.scope.positionBefore&&this.scope.positionBefore(),positionAfter:this.scope.positionAfter&&this.scope.positionAfter(),depth:this.scope.depth(),contentId:"create",columnId:"create"}}assignPosition(){(0,C.sA)(C.Cs.CloudStorageOpened),this.closeMenu(),this.scope.$emit("bb-bbml-editor-assign-position",this.getInsertLocationData())}_addFolderToCourseOutline(e,t){return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,t.parentId,t.positionBefore,t.positionAfter,!0).then(n=>{let i=n.content;return i.parentId=t.parentId,i.positionBefore=t.positionBefore,i.positionAfter=t.positionAfter,i.isAvailable=!1,i.depth=t.depth,i.description="",i.title=e.name,i.contentDetail={"resource/x-bb-folder":{isFolder:!0}},i.courseId=this.contextCourse.courseId,i.contentHandler=m.courseContent.ContentHandler.Folder,i.$save().$asPromise()})}_addContentToCourseOutline(e,t,n){return this.contentSvc.makeContentInContentTree(this.scope.rootContent&&this.scope.rootContent(),this.contextCourse.courseId,n.parentId,n.positionBefore,n.positionAfter,!0).then(e=>e.content).then(i=>(i.parentId=n.parentId,i.positionBefore=n.positionBefore,i.positionAfter=n.positionAfter,i.isAvailable=!1,i.depth=n.depth,i.description="",i.title=t.fileName,i.contentHandler=m.courseContent.ContentHandler.File,i.contentDetail={"resource/x-bb-file":{file:{fileName:t.fileName,fileLocation:t.fileLocation},fileAssociationMode:S.nEm.Embed}},e.ui&&e.ui.needUnzip&&(i.contentDetail["resource/x-bb-file"].action="Unzip".toString()),i.courseId=this.contextCourse.courseId,i.$asPromise()))}getTargetId(){return`addContentButton-${this.uuid}`}getButtonWrapperId(){return`addContentButtonWrapper-${this.uuid}`}getDirectionalHint(){return v.DirectionalHint.bottomCenter}isEmptyFolder(){let{content:e,folderNestedButton:t}=this.scope;return!!(e&&e.isFolder()&&e.children&&0===e.children.length&&t&&t())}constructor(e,t,n){this.scope=t,this.element=n,this.alwaysShow=!1,this.isButtonVisible=!1,this.isMobile=!1,this.isUploadMultipleFiles=!1,this.removeDefaultRenderClass=!1,this.uuid=(0,g.V)(),this.downloadFile=e=>{this.scope.$broadcast("downloadFile",e,this.positionForFiles)},this.defaultAttachHandler=(e,t,n,i,r)=>{let s=i||this.$q.defer(),o={parentId:void 0,positionBefore:"start",positionAfter:void 0,depth:0};return this.isUploadMultipleFiles=n,this.insertLocation=r||this.getInsertLocationData(),o=t.ui&&t.ui.parentId?{parentId:t.ui.parentId,positionBefore:t.ui.positionBefore,positionAfter:t.ui.positionAfter,depth:t.ui.depth}:this.insertLocation,"folder"===t.type?(this.closeMenu(),!t.ui||t.ui.depth<=E.cY.getMaxCourseFolderDepth()?this._addFolderToCourseOutline(t,o).then(e=>{t.ui={parentId:e.id,positionBefore:"start",depth:1+Number(e.depth)},s.resolve(t)},e=>{s.reject(e)}):s.resolve()):this._addContentToCourseOutline(t,e,o).then(e=>{let n=null==r?void 0:r.positionAfter;this.scope.$root.$broadcast("uploadComplete",t,n),e.$save().$then(n=>{t.ui&&t.ui.needUnzip&&(e=n),s.resolve()})}),s.promise},this.toggleAddContentMenu=()=>{this.isEmptyFolder()?this.scope.$emit("toggle-folder-by-id",this.scope.content.id):this.isMenuVisible=!this.isMenuVisible,this.timeout(()=>{this.scope.$apply()},this.scope)},this.hideAddContentMenu=e=>{null===e.target.closest(`#${this.getButtonWrapperId()}`)&&(this.isMenuVisible=!1,this.timeout(()=>{this.scope.$apply()},this.scope))},this.$q=e.get("$q"),this.$rootScope=e.get("$rootScope"),this.bbLocalize=e.get(o.serviceName),this.cloudDriveService=e.get(d.HV),this.fileUploadSettingsService=e.get(u.HV),this.timeout=e.get(f.H),this.contentSvc=e.get(c.HV),this.CourseModel=e.get(m.N7.H),this.PartnerService=e.get(h.HV),this.ultraState=e.get(b.HV),this.contextCourse=e.get(l.HV),this.scope.addMenuId=g.d(),this.showMenuOverride=this.scope.showMenuOverride,this.alwaysShow=this.scope.alwaysShow,this.currentCourse=this.contextCourse.course,this.isCloudServiceAvailablePromise=this.cloudDriveService.isCloudServiceAvailable().then(e=>this.isCloudServiceAvailable=e),this.bbLocalize.loadBundle("components/directives/add-content-button").then(()=>{let e="content";this.scope.itemIndex&&null!=this.scope.itemIndex()?e="item-index":"grades"===this.scope.contextArea?e="grades":"course-group"===this.scope.contextArea?e="group":"bbml-editor-single-file"===this.scope.contextArea&&(this.scope.addContentButton.isMenuVisible=!0),this.isMenuVisible=!1,this.addButtonAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label"});let t="components.directives.add-content-button.aria-label.content."+(this.isMobile?"yourDevice":"yourComputer");this.uploadAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:t}),(this.scope.itemName||this.scope.itemType)&&this.scope.$watchGroup(["itemName()","itemType()","itemIndex()"],t=>{let[n,i,r]=t;if(n||i){let t=this.scope.positionAfter?"after":"before";this.addButtonAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.aria-label."+e+".add-button-label-item-name-"+(i?i+"-":"")+t,params:{itemName:n,itemIndex:r},noWrap:!0,noEscape:!0})}})}),n.mouseover(()=>{this.$rootScope.$broadcast("mouseover-add-content-button"),this.scope.$apply(()=>{this.scope.addContentButton.showButton()})}),this.scope.$on("close-all-add-menus",()=>{this.showMenuOverride?this.isEmptyFolder()&&this.scope.content.ui.isOpen&&(this.scope.addContentButton.isMenuVisible=!0):this.scope.addContentButton.isMenuVisible=!1}),this.scope.showBothButtons&&this.scope.showBothButtons()||this.scope.$on("mouseover-add-content-button",()=>{this.scope.addContentButton.hideButton()}),this.scope.$on("content-item-hover",(e,t)=>{let i=()=>n.closest(".folder").is(t.element.parent(".folder")),r=()=>n.closest(".folder-contents").find("bb-add-content-button").first().is(n),s=()=>t.element.hasClass("js-parent")&&t.element.hasClass("open");this.scope.addContentButton.hideButton();let o=()=>{let e;return(e=r()?n.closest(".folder-contents").find(".js-content-div .element-list-row").first():n.closest(".js-content-div").next(".js-content-div").find(".element-list-row").first()).hasClass("element-list-row")||(e=n.next().find(".js-content-div").first().find(".element-list-row")),!!e.is(t.element)&&this.scope.addContentButton.showButton()},l=()=>{let e=n.closest(".js-content-div").find(".element-list-row").first(),r=!1;e.is(t.element)&&(r=!0),i()&&(r=!1),s()&&(r=!1),this.scope.addContentButton.isButtonVisible!==r&&(this.scope.addContentButton.isButtonVisible=r)};this.scope.showBothButtons&&this.scope.showBothButtons()?o()||l():t.relativeMousePosition===a.hU.Top?o():l()}),this.scope.$on("content-outline-hover-end",()=>{this.scope.addContentButton.hideButton()}),this.scope.$watch("alwaysShow",e=>{this.alwaysShow=e}),n.on("drop",e=>{this.closeMenu(),this.scope.$emit(s.Ei,this.scope.parentId(),this.scope.positionBefore&&this.scope.positionBefore(),this.scope.positionAfter&&this.scope.positionAfter(),this.scope.depth(),void 0,this.scope.content,s.mb.AssignDropTarget)}),this.scope.$on("$stateChangeStart",()=>{this.ultraState.includes("**.content-manage.import.**")?this.isMenuVisible=this.isEmptyFolder():this.isEmptyFolder()?this.isMenuVisible=!0:this.isMenuVisible=!1,this.timeout(()=>{this.scope.$apply()},this.scope)}),this.scope.$on(s.Qk,()=>{this.closeMenu()}),this.isMenuVisible=this.scope.showMenuOverride,null!=this.scope.showMenuOverride&&this.scope.$watch(()=>this.scope.showMenuOverride,e=>{this.scope.addContentButton.isMenuVisible=e,this.showMenuOverride=e}),this.getInsertLocationData()}}w=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([I(0,(0,y.tB)("$injector")),I(1,(0,y.tB)("scope")),I(2,(0,y.tB)("element"))],w)},189165:function(e,t,n){"use strict";n.d(t,{e:function(){return z}}),n(785106),n(788093),n(122597),n(514938),n(280149),n(84542),n(66850),n(396864),n(286260),n(308736);var i=n(464027),r=n(535578);class s extends r.${}class o extends r.${}var a=n(202784),l=n(12838),c=n(302032),d=n(754923),u=n(656064),p=n(675689);function m(e,t){return function(n,i){t(n,i,e)}}class h extends r.${initialize(){return this.$q.all({canEditUnsafeHtml:this.unsafeHtmlService.canEditUnsafeHtml(),isCloudServiceAvailable:this.isCloudServiceAvailablePromise}).then(({canEditUnsafeHtml:e,isCloudServiceAvailable:t})=>{this.canEditUnsafeHtml=e,this.isCloudServiceAvailable=t}).finally(this.initializeItems)}waitForInitialization(){var e;return null!==(e=this.scope.documentInitialPersistPromise)&&void 0!==e?e:this.$q.resolve()}constructor(e,t,n){super(e,t,n),this.canEditUnsafeHtml=!1,this.isCloudServiceAvailable=!1,this.initializeItems=()=>{this.items=[{key:"addText",className:"js-add-content",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addContent"}),icon:a.createElement(p.Notes,null),onClick:this.addTextBlock}],this.canEditUnsafeHtml&&this.items.push({key:"addHtml",className:"js-add-html",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.addHtml"}),icon:a.createElement(p.Editor,null),onClick:this.addHtmlBlock}),this.items.push({key:"addLocalFile",className:"js-add-local-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:`components.directives.add-content-button.${this.isMobile?"uploadFromDevice":"uploadFromComputer"}`}),icon:a.createElement(p.UploadFile,null),onClick:this.uploadLocalFile}),this.items.push({key:"browseContentCollectionFile",className:"js-browse-content-collection-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"course.contentCollection.browseContentCollection"}),icon:a.createElement(p.ContentCollection,null),onClick:this.browseContentCollection}),this.isCloudServiceAvailable&&this.items.push({key:"addCloudFile",className:"js-add-cloud-file",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.add-content-button.uploadFromCloudStorage"}),icon:a.createElement(p.UploadCloud,null),onClick:this.uploadCloudFile})},this.addTextBlock=()=>{this.waitForInitialization().then(()=>{this.scope.$emit("bb-bbml-editor-add-block",l.Pq.Text,this.getInsertLocationData())})},this.addHtmlBlock=()=>{this.waitForInitialization().then(()=>{this.scope.$emit("bb-bbml-editor-add-block",l.Pq.Html,this.getInsertLocationData())})},this.uploadLocalFile=()=>{this.element.find(".file-upload-button").click()},this.uploadCloudFile=()=>{this.element.find(".js-upload-from-cloud-storage-integration").click()},this.browseContentCollection=()=>{this.waitForInitialization().then(()=>{this.rteCollectionService.handleContentCollectionResponse(this.scope,this.getInsertLocationData()),this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"true"})})},this.focusAddButton=()=>{this.element.find("button").focus()},this.$q=e.get("$q"),this.unsafeHtmlService=e.get(d.HV),this.rteCollectionService=e.get(u.HV),this.initialize()}}h.$inject=[],h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,c.tB)("$injector")),m(1,(0,c.tB)("scope")),m(2,(0,c.tB)("element"))],h);var g=n(666235);class f extends r.${addGroup(){this.toggleMenu();let e=this.scope.positionBefore?this.scope.positionBefore():this.scope.positionAfter()+1;this.scope.createFunction(e),this.closeMenu()}}var b=n(563060);function v(e,t){return function(n,i){t(n,i,e)}}let y="addAttendance";class S extends r.${addOrRemoveAddAttendanceMenuItem(){let e=null==this.scope.showAddAttendance||!this.scope.showAddAttendance(),t=this.doesMenuItemExistByKey(y);e?this.removeMenuItemByKey(y):t||this.addAttendanceMenuItem()}doesMenuItemExistByKey(e){return this.items.some(t=>t.key===e)}removeMenuItemByKey(e){this.items=this.items.filter(t=>t.key!==e)}addAttendanceMenuItem(){this.items.push({key:y,href:this.attendanceHref,className:"doc-add-attendance",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addAttendance"}),icon:a.createElement(p.Attendance,null)})}constructor(e,t,n){super(e,t,n),this.scope=t,this.element=n;let i=n.closest("[data-base-state-name]").data("baseStateName");this.$q.all([this.ultraState.peekHref("grade-item.create",this.getInsertLocationData(),i),this.ultraState.peekHref("gradebook-item.calculation",this.getInsertLocationData(),i),this.ultraState.peekHref(b.RK.GRADE_ITEM_TOTAL_CALCULATION,{...this.getInsertLocationData(),isExternalGrade:!1},i),this.ultraState.peekHref("attendance",null,i)]).then(e=>{this.attendanceHref=e[3],this.items=[{key:"addGradebookItem",href:e[0],className:"doc-add-grade",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addItem"}),icon:a.createElement(p.Add,null)},{key:"addCalculation",href:e[1],className:"doc-add-calc",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addCalculation"}),icon:a.createElement(p.Calculation,null)},{key:"addTotalCalculation",href:e[2],className:"js-add-total-calculation",name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.addTotalCalculation"}),icon:a.createElement(p.Calculation,null)}],this.addOrRemoveAddAttendanceMenuItem()}),t.$on("update-content-menu",()=>{this.items&&this.addOrRemoveAddAttendanceMenuItem()})}}S.$inject=[],S=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([v(0,(0,c.tB)("$injector")),v(1,(0,c.tB)("scope")),v(2,(0,c.tB)("element"))],S);var C=n(872653),E=n(784787),I=n(530026),w=n(968668),A=n(883547),k=n(773297),T=n(370267);class P{getTemplateText(e){if(null==e||!(e in this.handlersAndTemplateTexts))throw Error("valid contextArea must be provided");if(null==this.handlersAndTemplateTexts[e].templateText)throw Error("No template for context area: "+e);return A.replace("<template></template>",this.handlersAndTemplateTexts[e].templateText)}getHandler(e,t,n){if(null==e||!(e in this.handlersAndTemplateTexts))throw Error("valid contextArea must be provided");return this.$injector.instantiate(this.handlersAndTemplateTexts[e].handler,{scope:t,element:n})}constructor(e){this.$injector=e,this.handlersAndTemplateTexts={assignment:{handler:s,templateText:C},attempts:{handler:o,templateText:E},"bbml-editor":{handler:h,templateText:I},"cloud-upload":{handler:g.A6,templateText:w},"course-group":{handler:f,templateText:k},grades:{handler:S,templateText:T}}}}P.$inject=["$injector"];var D=n(371833),x=n(5928);let R="ultra.components.directives.content.buttonAddContent";class L{constructor(){this.restrict="C",this.template=D}}L.$inject=["$injector"],i.module(R,[x.e1]).directive("buttonAddContent",["$injector",e=>e.instantiate(L)]);var N=n(676954),$=n(390103),O=n(984654),G=n(19414);let _="ultra.components.directives.react-toolkit.contextual-menu";class M extends a.Component{render(){return this.props.show?a.createElement(G.ContextualMenu,{items:this.props.items,directionalHint:this.props.directionalHint,target:document.getElementById(this.props.targetId),onDismiss:this.props.dismiss,labelElementId:this.props.ariaLabelledby,analyticsId:this.props.analyticsId}):null}}i.module(_,[]).component("bbUiContextualMenu",(0,O.G5)({Class:M,bindingNames:["items","targetId","show","dismiss","directionalHint"],attributes:["ariaLabelledby","analyticsId"]}));var B=n(567361),F=n(603094),U=n(115775),V=n(808361),H=n(613944),q=n(424380);let j="ultra.components.directives.bbUiIcon.small.ContentMarket";(0,H.n)(q.r,j,"bbUiIconSmallContentMarket");let z="ultra.directives.addContentButton";class W{constructor(e,t,n){this.$injector=e,this.$rootScope=t,this.ultraState=n,this.compiled=Object.create(null),this.restrict="E",this.scope={attachHandler:"=?",disableDrag:"&?",content:"=",createFunction:"=?",hideDividerLines:"&?",rootContent:"&?",contextArea:"=",alwaysShow:"=",showAddAttendance:"&?",showBothButtons:"&?",documentInitialPersistPromise:"<?",showMenuOverride:"=",positionBefore:"&?",positionAfter:"&?",parentId:"&",depth:"&",canCreateAllContents:"=?",canCopyImport:"=?",folderNestedButton:"&?",fileLocation:"@?",webLocation:"@?",initialUpload:"&?",primaryKey:"&?",ignoredStates:"&?",itemName:"&?",itemType:"&?",itemIndex:"&?",isButtonLocationChangable:"<?",isRenderByDefault:"&?"},this.compile=()=>(e,t)=>{let n="";e.contextArea?n=e.contextArea:e.$parent.contextArea&&(n=e.$parent.contextArea);let i=this.$injector.instantiate(P,{});null==this.compiled[n]&&(this.compiled[n]=this.$injector.get("$compile")(i.getTemplateText(n))),e.addContentButton=i.getHandler(n,e,t),e.fileListViewId="fileListView-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.fileListViewLocalId=e.fileListViewId+"Local",this.compiled[n](e,function(e,n){t.append(e)}),this.$rootScope.$broadcast("add-content-button-ready")}}}W.$inject=["$injector","$rootScope",V.HV,B.HV,u.HV],i.module(z,["ngAnimate",R,$.e1,N.moduleName,_,B.e1,u.e1,F.e1,U.e1,V.e1,d.e1,j]).directive("bbAddContentButton",["$injector",e=>e.instantiate(W)])},666235:function(e,t,n){"use strict";n.d(t,{A6:function(){return l},_9:function(){return a}});var i=n(535578),r=n(703453),s=n(302032);function o(e,t){return function(n,i){t(n,i,e)}}let a="allCloudUploadsCompleteEvent";class l extends i.${constructor(e,t,n){super(e,t,n),this.cloudUploadPromises=[],this.onFilesSelectedHandler=e=>{let t=[];e.forEach(e=>{let n={id:e.id,deferred:this.$q.defer()};t.push(n.deferred),this.cloudUploadPromises.push(n)}),this.$q.all(t.map(e=>e.promise)).then(()=>{this.scope.$emit(a)},e=>{this.scope.$emit(a,e)})},this.resolveFileUploadDeferred=(e,t)=>{let n=this.cloudUploadPromises.findIndex(t=>t.id===e);return n>=0&&(t?this.cloudUploadPromises[n].deferred.reject(t):this.cloudUploadPromises[n].deferred.resolve(),this.cloudUploadPromises.splice(n,1),!0)},this.cloudUploadAttachHandler=(e,t,n,i)=>{let r=this.scope.attachHandler||this.defaultAttachHandler,s=this.$q.defer();return r(e,t,n,i).then(()=>{this.resolveFileUploadDeferred(t.ui.fileId)&&s.resolve()}),s.promise},t.$on(r.Ei,(e,t,n,i,s)=>{i===r.mb.Error?this.resolveFileUploadDeferred(t,"failed"):i===r.mb.Cancel&&this.resolveFileUploadDeferred(t)})}}l.$inject=[],l=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,s.tB)("$injector")),o(1,(0,s.tB)("scope")),o(2,(0,s.tB)("element"))],l)},800553:function(e,t,n){"use strict";n.d(t,{G:function(){return i},a:function(){return r}});let i="update-state",r="course-outline.refresh-folder"},890532:function(e,t,n){"use strict";n.d(t,{e1:function(){return p}});var i=n(464027),r=n(555840),s=n(676954),o=n(791726),a=n(651930),l=n(808361),c=n(917800),d=n(473011),u=n(259197);let p="ultra.components.directives.content.contentItemIcon";class m{get iconColor(){return this.scope.showAlertIcon?"error":"primary"}constructor(e,t,n,i,s,o,a){let l;this.scope=e,this.$q=t,this.element=n,this.bbLocalize=i,this.contentIconService=s,this.ColumnModel=o,this.$state=a,this.iconName="document-blank",this.iconNameForLocalization="document-blank";let c=[],p=r.courseContent.ContentHandler,m=e.$watch(()=>e.contentColumn,()=>{var t,n,i,r,s,a,h,g,f,b;let v=e.bbContentItemIcon&&e.bbContentItemIcon.contentHandler&&e.bbContentItemIcon.contentHandler.toString();if(v)switch(this.contentIconService.matchLtiPlacementHandler(v)){case p.LtiLink.toString():(null===(n=this.scope.bbContentItemIcon.contentDetail)||void 0===n?void 0:null===(t=n["resource/x-bb-blti-link"])||void 0===t?void 0:t.customIconUrl)&&(this.customLtiIcon=d.uI(this.scope.bbContentItemIcon.contentDetail["resource/x-bb-blti-link"].customIconUrl)),l="bbContentItemIcon",c=["showAlertIcon"];break;case p.CourseLink.toString():if(e.bbContentItemIcon.contentDetail){let t=this.scope.$watch(()=>e.bbContentItemIcon.id,n=>{n&&(e.bbContentItemIcon.getLinkContentSource().$then(e=>{this.contentIconService.getIconClass(e).then(e=>{e&&(this.iconName=this.contentIconService.getIconName(e),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName))})}),t())})}else this.iconName=this.contentIconService.getIconName(e.bbContentItemIcon.getContentHandlerByIconUrl().iconClass),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName);break;case p.RusticiScorm.toString():l="bbContentItemIcon",c=[`${l}.contentDetail['${v}'].gradebookItems[0].gradingColumn.gradebookCategory.id`];break;case p.LtiPlacement.toString():this.customLtiIcon=d.uI(null===(s=this.scope.bbContentItemIcon)||void 0===s?void 0:null===(r=s.contentDetail)||void 0===r?void 0:null===(i=r[`${v}`].placement)||void 0===i?void 0:i.iconUrl),l="bbContentItemIcon",c=["showAlertIcon"];break;default:c=[(l="bbContentItemIcon")+".contentHandler",l+".ui.isOpen",l+".contentDetail['"+p.File.toString()+"'].file.mimeType",l+".contentDetail['"+p.TestLink.toString()+"'].test.gradingColumn.gradebookCategory.id",l+".contentDetail['"+p.TestLink.toString()+"'].assignment.gradingColumn.gradebookCategory.id"]}else e.contentColumn&&((null===(a=e.contentColumn.gradableItemIconUrl)||void 0===a?void 0:a.includes("public/blti_icons"))?(null===(h=e.contentColumn.gradableItemIconUrl)||void 0===h?void 0:h.includes("public/blti_icons"))&&(this.customLtiIcon=d.uI(e.contentColumn.gradableItemIconUrl)):this.customLtiIcon=d.uI(null===(b=this.scope.bbContentItemIcon)||void 0===b?void 0:null===(f=b.contentDetail)||void 0===f?void 0:null===(g=f.placement)||void 0===g?void 0:g.iconUrl),c=[(l="contentColumn")+".scoreProviderHandle",l+".calculationType",l+".externalGrade",l+".visible",l+".summary.numStudentsGraded()",l+".summary.numStudentSubmissions()",l+".categoryTitle",l+".dueDate"]);let y=e.$watchGroup(c,()=>{let t=e[l];t&&(t instanceof this.ColumnModel?this.contentIconService.getColumnIconClass(t):this.contentIconService.getIconClass(t)).then(e=>{e&&(this.iconName=this.contentIconService.getIconName(e),this.iconNameForLocalization=this.contentIconService.getIconNameForLocalization(this.iconName));let n=p.Folder.isEqualTo(t.contentHandler),i=p.Unknown.isEqualTo(t.contentHandler),r=p.File.isEqualTo(t.contentHandler),s=p.LtiLink.isEqualTo(t.contentHandler),a=u.ddT.isLtiPlacement(t.contentHandler),l=p.RusticiScorm.isEqualTo(t.contentHandler),c=p.TestLink.isEqualTo(t.contentHandler),d=t instanceof o;n||i||d||r||s||a||l||c||y(),m()})})})}}m.$inject=["scope","$q","element",s.serviceName,a.HV,r.Rp.serviceName,l.HV];class h{constructor(e){this.$injector=e,this.restrict="A",this.template=c,this.scope={bbContentItemIcon:"=",contentColumn:"=",showAlertIcon:"=",isMediumContentItemIcon:"=?"},this.link=(e,t)=>{e.contentItemIcon=this.$injector.instantiate(m,{scope:e,element:t})}}}h.$inject=["$injector"],i.module(p,[o.e1,a.e1,l.e1]).directive("bbContentItemIcon",["$injector",e=>e.instantiate(h)])},677315:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},hU:function(){return r}});var i,r,s=n(464027),o=n(480489);let a="ultra.directives.contentItemMouseover";(i=r||(r={})).Top="TOP",i.Bottom="BOTTOM",i.Default="DEFAULT";class l{handleMousemove(e){(null==this.elementOffset||null==this.elementHeight)&&this.recalculatePosition(),this.lastTime=Date.now(),e.pageY-this.elementOffset>this.elementHeight/2?("BOTTOM"!==this.lastPosition&&this.broadcastPosition("BOTTOM"),this.lastPosition="BOTTOM"):("TOP"!==this.lastPosition&&this.broadcastPosition("TOP"),this.lastPosition="TOP")}broadcastPosition(e){this.scope.$emit("content-item-mouseover",{element:this.element,relativeMousePosition:e})}recalculatePosition(){this.elementHeight=this.element.outerHeight(),this.elementOffset=this.element.offset().top}constructor(e,t,n){this.scope=e,this.element=t,this.timeout=n,this.lastPosition="DEFAULT",this.lastTime=0,t.mouseover(()=>{this.recalculatePosition()}),t.mousemove(e=>{Date.now()-this.lastTime>1e3?(this.timeout.cancel(this.lastMousemoveTimeout),this.handleMousemove(e)):(this.timeout.cancel(this.lastMousemoveTimeout),this.lastMousemoveTimeout=this.timeout(()=>{this.handleMousemove(e)},this.scope,100,!1))}),t.mouseleave(()=>{this.timeout.cancel(this.lastMousemoveTimeout),this.lastPosition="DEFAULT"}),e.$on("content-outline-hover-end",()=>{this.timeout.cancel(this.lastMousemoveTimeout),this.lastPosition="DEFAULT"})}}l.$inject=["scope","element",o.H];class c{constructor(e){this.$injector=e,this.restrict="A",this.scope={canCreate:"&"},this.link=(e,t)=>{e.canCreate&&e.canCreate()&&(e.contentItemMouseover=this.$injector.instantiate(l,{scope:e,element:t}))}}}c.$inject=["$injector"],s.module(a,[o.e]).directive("bbContentItemMouseover",["$injector",e=>e.instantiate(c)])},398321:function(e,t,n){"use strict";var i,r;n.d(t,{m:function(){return i}}),(r=i||(i={})).CourseOutline="course-outline",r.Discussions="discussions",r.ContentSearch="content-search"},215941:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}}),n(20720);var i=n(464027),r=n(619034),s=n(259197),o=n(676954),a=n(362767),l=n(504537),c=n(848330),d=n(302032),u=n(610624),p=n(168869);function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.directives.contentVisibilityRulesOptions";class g{shouldFocus(e){return void 0!==this.scope.dateFieldFocus&&"undefined"!==this.scope.dateFieldFocus&&this.scope.dateFieldFocus===e}handleCheckClick(e){let t=this.startDateSelect,n=this.untilDateSelect;this.scope.$emit("date-selection-changed",t,n),this.scope.isAllowedEmpty?t||n||this.form.dateFrom.$setValidity("startAndOrEndDate",!0):t||n?this.form.dateFrom.$setValidity("startAndOrEndDate",!0):(this.form.dateFrom.$setTouched(),this.form.dateFrom.$setValidity("startAndOrEndDate",!1)),this.form.dateUntil.$validate(),this.form.timeUntil.$validate(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),"from-check"===e&&t?(this.scope.startDate=this.context.getServerTime(),this.scope.startTime=this.context.getServerTime()):"until-check"===e&&n&&this.setInitialEndDateTime(),this.updateStartAndEndTime()}setInitialEndDateTime(){let e;if(this.scope.subsequentDueDate||this.scope.dueDate){var t;e=this.addDays(new Date(null!==(t=this.scope.subsequentDueDate)&&void 0!==t?t:this.scope.dueDate),1)}else e=this.addDays(this.scope.startDate>this.context.getServerTime()?this.scope.startDate:this.context.getServerTime(),1);this.scope.endDate=e,this.scope.endTime=e}addDays(e,t){return new Date(e.getTime()+864e5*t)}setErrorString(e,t){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.content-visibility."+(t?"start":"end")+(e?"DateValidationError":"TimeValidationError")})}isDateRequired(e){let t=this.element.find("#from-check-"+this.id).prop("checked"),n=this.element.find("#until-check-"+this.id).prop("checked");return e?!!t:!!n}setWatchers(){this.scope.$watch("startDate",e=>{this.isValidDate(e)&&this.scope.startTime!==e&&(this.scope.startTime=e),this.doValidation(),this.onChange()}),this.scope.$watch("startTime",e=>{this.isValidDate(e)&&this.scope.startDate!==e&&(this.scope.startDate=e),this.doValidation(),this.onChange()}),this.scope.$watch("endDate",e=>{this.isValidDate(e)&&this.scope.endTime!==e&&(this.scope.endTime=e),this.doValidation(),this.onChange()}),this.scope.$watch("endTime",e=>{this.isValidDate(e)&&this.scope.endDate!==e&&(this.scope.endDate=e),this.doValidation(),this.onChange()}),this.scope.$watch("startDateSelect",e=>{this.scope.isAllowedEmpty&&(this.startDateSelect=e),!1===e&&this.scope.isAllowedEmpty&&(this.scope.startTime=null,this.scope.startDate=null)}),this.scope.$watch("untilDateSelect",e=>{this.scope.isAllowedEmpty&&(this.untilDateSelect=e),!1===e&&this.scope.isAllowedEmpty&&(this.scope.endTime=null,this.scope.endDate=null)})}setValidators(){let e=this.scope.$watch("form.dateFrom",(t,n)=>{this.form.dateFrom&&(this.scope.isAllowedEmpty?this.form.dateFrom.$validators.required=e=>!this.startDateSelect||this.startDateSelect&&null!=e||this.scope.isAllowedEmpty&&null===e:this.form.dateFrom.$validators.required=e=>!this.startDateSelect||this.startDateSelect&&null!=e,this.form.timeFrom.$validators.required=e=>!!(!this.startDateSelect||this.startDateSelect&&this.timeFrom.$viewValue),this.scope.isAllowedEmpty?this.form.dateUntil.$validators.required=e=>!this.untilDateSelect||this.untilDateSelect&&null!=e||this.scope.isAllowedEmpty&&null===e:this.form.dateUntil.$validators.required=e=>!this.untilDateSelect||this.untilDateSelect&&null!=e,this.form.timeUntil.$validators.required=()=>!!(!this.untilDateSelect||this.untilDateSelect&&this.timeUntil.$viewValue),this.form.dateFrom.$validators.untilAfterStart=e=>(this.form.dateUntil.$setTouched(),this.form.dateUntil.$validate(),!0),this.form.dateFrom.$validators.startBeforeDueDate=e=>!this.startDateSelect||e&&this.isDueDateAfterStartDate(e),this.form.dateUntil.$validators.untilAfterStart=e=>!this.untilDateSelect||!this.startDateSelect||!this.isStartDateValid()||e&&this.isValidDateOrder(this.scope.startDate,e),this.scope.subsequentDueDate?this.form.dateUntil.$validators.subsequentDueDate=e=>!this.untilDateSelect||e&&this.isDueDateBeforeEndDate(e):this.form.dateUntil.$validators.untilDueDate=e=>!this.untilDateSelect||e&&this.isDueDateBeforeEndDate(e),this.element.find(".restricted-form").focusout(()=>{this.doValidation()}),this.onChange(),e())})}doValidation(){this.form.$setDirty(),this.form.dateFrom.$validate(),this.form.timeFrom.$validate(),this.form.dateUntil.$validate(),this.form.timeUntil.$validate()}onChange(){this.scope.onchangeFunc&&this.scope.onchangeFunc()}onBlur(){this.scope.onblurFunc&&this.scope.onblurFunc()}noDateErrorsExist(){return this.isStartDateValid()&&this.isEndDateValid()}isStartDateError(){return this.startDateSelect&&!this.scope.startDate}isStartAndOrEndDateError(){return!this.startDateSelect&&!this.untilDateSelect&&!this.scope.endDate}isStartDateValid(){return!this.isStartDateError()&&!this.isStartAndOrEndDateError()&&this.isDueDateAfterStartDate(this.scope.startDate)}isEndDateError(){return this.untilDateSelect&&!this.scope.endDate}isEndDateBeforeError(){return this.untilDateSelect&&this.scope.endDate&&this.startDateSelect&&!this.isValidDateOrder(this.scope.startDate,this.scope.endDate)}isEndDateValid(){return!this.isEndDateError()&&!this.isEndDateBeforeError()&&!this.isDueDateBeforeEndDate(this.scope.endDate)}isValidDate(e){return e&&!Number.isNaN(e.getTime())}updateStartAndEndTime(){this.startDateSelect||(this.scope.startDate=null,this.scope.startTime=null),this.untilDateSelect||(this.scope.endDate=null,this.scope.endTime=null),this.noDateErrorsExist()&&(this.onChange(),this.onBlur())}isValidDateOrder(e,t){if(null==e||null==t)return!1;let n=new Date(e.getTime()),i=new Date(t.getTime());return n.setSeconds(0,0),i.setSeconds(0,0),r(i).isAfter(n)}isDueDateBeforeEndDate(e){return null==this.scope.dueDate||(this.scope.subsequentDueDate?r(this.scope.subsequentDueDate).isBefore(e):r(this.scope.dueDate).isBefore(e))}isDueDateAfterStartDate(e){return null==this.scope.dueDate||r(this.scope.dueDate).isAfter(e)}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({localeSettings:s.Ys.locale.getLocaleSettings(e,this.bbLocalize.getAppLocaleISO())}),e=>({getLocaleSettings:t=>e(s.Nwg.locale.getLocaleSettings(t))}))(this);this.scope.$on("$destroy",e)}get timeDateFromDisabled(){var e;return!this.startDateSelect||(null===(e=this.scope)||void 0===e?void 0:e.isReadOnlyMode())}get timeDateUntilDisabled(){var e;return!this.untilDateSelect||(null===(e=this.scope)||void 0===e?void 0:e.isReadOnlyMode())}constructor(e,t,n,i,r,s){this.$ngRedux=e,this.scope=t,this.element=n,this.form=i,this.context=r,this.bbLocalize=s,this.id=(0,u.d)(),this.scope.contentVisibilityRulesOptions=this,this.dateFrom=i.dateFrom,this.timeFrom=i.timeFrom,this.dateUntil=i.dateUntil,this.timeUntil=i.timeUntil,this.subscribeToReduxChanges();let o=this.bbLocalize.getAppLocaleISO();this.getLocaleSettings&&this.getLocaleSettings({locale:o}),this.startDateSelect=!!this.scope.startDate,this.untilDateSelect=!!this.scope.endDate,this.setWatchers(),this.setValidators();let a=(0,u.d)();this.dateFromContainer=`${a}-date-from-container`,this.dateUntilContainer=`${a}-date-until-container`}}g=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,d.tB)("$ngRedux")),m(1,(0,d.tB)("scope")),m(2,(0,d.tB)("element")),m(3,(0,d.tB)("form")),m(4,(0,d.tB)(a.HV)),m(5,(0,d.tB)(o.serviceName))],g);class f{constructor(e){this.$injector=e,this.restrict="E",this.require="^form",this.scope={startDate:"=?",startTime:"=?",startDateSelect:"=?",endDate:"=?",endTime:"=?",untilDateSelect:"=?",onblurFunc:"&?",onchangeFunc:"&?",isReadOnlyMode:"&?",dateFieldFocus:"@?",isAllowedEmpty:"=?",dueDate:"<",subsequentDueDate:"<?"},this.template=p,this.transclude={customStartDateAndTimeValidationMessages:"?bbContentVisibilityCustomStartDateAndTimeValidationMessages",customEndDateAndTimeValidationMessages:"?bbContentVisibilityCustomEndDateAndTimeValidationMessages"},this.link=(e,t,n,i)=>{e.contentVisibilityRulesOptions=this.$injector.instantiate(g,{scope:e,element:t,form:i})}}}f.$inject=["$injector"],i.module(h,[a.e1,l.e1,c.e1]).directive("bbContentVisibilityRulesOptions",["$injector",e=>e.instantiate(f)])},256678:function(e,t,n){"use strict";n.d(t,{e1:function(){return I}}),n(20720),n(919460),n(782826),n(832954),n(245010),n(28890),n(619827),n(854291),n(617386);var i=n(464027),r=n(276635),s=n(259197),o=n(12838),a=n(411832),l=n(676954),c=n(385847),d=n(555840),u=n(610624),p=n(808361),m=n(282157),h=n(860995),g=n(374353),f=n(984654),b=n(872491);let v="ultra.components.services.courseLinkVisibilityWarningBanner",y={Class:b.Ws,renderLocalized:!0,withProvider:!0};i.module(v,[]).component("courseLinkVisibilityWarningBanner",(0,f.G5)(y));var S=n(261748),C=n(563060),E=n(986709);let I="ultra.directives.contentVisibilitySelector";class w{checkForCourseLinks(){if(this.isFirstDropdownOpen&&!this.showInfoBanner)return this.isFirstDropdownOpen=!1,this.checkShouldShowCourseLinkWarning()}getIconSize(){return this.scope.hasMediumIcon?"medium":"small"}loadAdaptiveReleaseEntitlements(){let e=this.entitlementService.hasCourseEntitlement(o.s7.ViewAdaptiveRelease,this.scope.content.courseId).then(e=>{this.entitledToViewConditionalRelease=e}),t=this.entitlementService.hasCourseEntitlement(o.s7.DeleteAdaptiveRelease,this.scope.content.courseId).then(e=>{this.entitledToDeleteConditionalRelease=e});return this.$q.all([e,t])}onChange(){this.scope.onchangeFunc&&this.scope.onchangeFunc()}onBlur(){this.scope.onblurFunc&&this.scope.onblurFunc()}disableRestricted(){return!!this.scope.disableRestricted&&this.scope.disableRestricted()}onRestrictedSelected(){this.scope.onRestrictedSelectedFunc&&this.scope.onRestrictedSelectedFunc()}selectVisible(){this.visibilitySelected(E.hbA.Visible)}selectHidden(){this.visibilitySelected(E.hbA.Hidden)}selectConditionalRelease(){let e={contentId:this.contentId};this.ultraState.goPeekState(C.XO.CONDITIONAL_RELEASE_PEEK_PANEL,e)}isEditable(){return!!(!this.isVisibilitySelectorMenuEmpty()&&(this.scope.content.canEdit()||this.scope.content.canEditAvailability&&this.scope.content.canEditAvailability()||!this.scope.content.id))}validateChange(e){if(this.scope.validationFunc){let t=this.scope.validationFunc({visibility:e});return void 0===t||t}return!0}visibilitySelected(e){this.validateChange(e)&&this.confirmVisibilityChange().then(()=>{this.changeVisibility(e)})}confirmVisibilityChange(){var e,t,n,i;let r=null;return((null===(t=this.scope.content)||void 0===t?void 0:null===(e=t.isConditionalRelease)||void 0===e?void 0:e.call(t))&&!(null===(i=this.scope.content)||void 0===i?void 0:null===(n=i.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===n?void 0:n.call(i))&&(r=S),r)?this.bbLocalize.loadBundle("features/course/conditional-release/conditional-release").then(()=>this.$modal.open({template:r,scope:this.scope}).result):this.$q.resolve()}changeVisibility(e){var t;let n=this.scope.content,i=null==n?void 0:null===(t=n.isConditionalRelease)||void 0===t?void 0:t.call(n),r=this.shouldIgnoreDates(e);(i||r)&&(this.onRestrictedSelected(),n.conditionalReleaseAsync("DELETE")),this.scope.content.setVisibility(e),E.hbA.Restricted===e&&this.onRestrictedSelected(),this.onChange(),this.onBlur()}shouldIgnoreDates(e){return e!==E.hbA.Restricted&&this.isPartnerContent()}static getAdaptiveReleaseCriteria(e){return e&&e.rules?e.rules.map(e=>e.criteria).reduce((e,t)=>t.concat(e),[]):null}canDeleteCriteria(e){switch(e.type){case"Grade_Range":case"Grade_Range_Percentage":return this.scope.content.permissions.adaptiveRelease.criteria.performance.delete;case"Date_Range":return this.scope.content.permissions.adaptiveRelease.criteria.dates.delete;default:return this.scope.content.permissions.adaptiveRelease.delete}}canDeleteAllCriteria(e){return e.every(e=>this.canDeleteCriteria(e))}canShowVisibleHidden(){let e=w.getAdaptiveReleaseCriteria(this.scope.content.adaptiveReleaseRules);return this.entitledToDeleteConditionalRelease||!e||this.canDeleteAllCriteria(e)}showVisibleHiddenMenuOptions(){let e=this.scope.content.isConditionalRelease&&this.scope.content.isConditionalRelease();return!e||e&&this.canShowVisibleHidden()}showConditionalReleaseMenuOption(){return!this.disableRestricted()&&this.scope.content.id&&this.entitledToViewConditionalRelease}checkShouldShowCourseLinkWarning(){if("function"==typeof this.scope.content.isCourseLink&&this.scope.content.isCourseLink())this.showInfoBanner=!0;else if(this.scope.content.id&&!s.AaE.isDiscussion(this.scope.content)&&!s.AaE.isLink(this.scope.content))return this.$q.when((0,s.gUR)(this.scope.content.courseId,this.scope.content.id)).then(e=>{e&&(this.showInfoBanner=e)});return this.$q.when()}isVisibilitySelectorMenuEmpty(){return!this.showVisibleHiddenMenuOptions()&&!this.showConditionalReleaseMenuOption()}isVisibilitySelectorEnabled(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()}isVisibleToStudents(){var e,t,n,i;return(null===(t=this.scope.content)||void 0===t?void 0:null===(e=t.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===e?void 0:e.call(t))?this.scope.content.isAvailable:!!(null===(i=this.scope.content)||void 0===i?void 0:null===(n=i.isVisibleToStudents)||void 0===n?void 0:n.call(i))}isHiddenFromStudents(){var e,t,n,i;return(null===(t=this.scope.content)||void 0===t?void 0:null===(e=t.hasOnlyForcedSequenceConditionalReleaseCriteria)||void 0===e?void 0:e.call(t))?!this.scope.content.isAvailable:!!(null===(i=this.scope.content)||void 0===i?void 0:null===(n=i.isHiddenFromStudents)||void 0===n?void 0:n.call(i))}isConditionalRelease(){var e,t;return!(this.isVisibleToStudents()||this.isHiddenFromStudents())&&!!(null===(t=this.scope.content)||void 0===t?void 0:null===(e=t.isConditionalRelease)||void 0===e?void 0:e.call(t))}isPartnerContent(){return s.GQk.PartnerCloud.isEqualTo(this.contentHandler)}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({showInfoBanner:s.Ys.content.getHasContentLinksByLinkedContentId(e,this.scope.content.id)}))(this);this.scope.$on("$destroy",e)}constructor(e,t,n,i,s,a,l,p,m){if(this.iScope=e,this.element=t,this.$q=n,this.$ngRedux=i,this.bbLocalize=s,this.entitlementService=a,this.ultraState=l,this.$modal=p,this.currentCourse=m,this.contentHandler="",this.isBbPage=!1,this.todayDate=new Date,this.isFirstDropdownOpen=!0,this.scope=e,this.scope.contentVisibilitySelector=this,this.subscribeToReduxChanges(),this.visibleOptionKey=`components.directives.content-visibility.${m.course.isOrganization?"organization.":""}visible`,this.hiddenOptionKey=`components.directives.content-visibility.${m.course.isOrganization?"organization.":""}hidden`,this.contentId=this.scope.content.id,this.contentHandler=this.scope.content.contentHandler?this.scope.content.contentHandler.toString():"",null==this.contentId){let e=this.scope.$watch(()=>this.scope.content.id,t=>{t&&(null==this.contentId&&(this.contentId=t),e())})}if(this.selectorId=u.d(),this.contentHandler&&d.courseContent.ContentHandler.Folder.isEqualTo(this.contentHandler)&&null!=this.scope.content.contentDetail){let e=this.scope.content.contentDetail[d.courseContent.ContentHandler.Folder.toString()];e&&e.isBbPage&&(this.isBbPage=!0)}if(this.scope.content.permissions){let e=this.scope.content.permissions;this.entitledToViewDesigner=r.isFunction(this.scope.content.canViewAsInstructor)&&this.scope.content.canViewAsInstructor(),e.adaptiveRelease?(this.entitledToViewConditionalRelease=e.adaptiveRelease.view,this.entitledToDeleteConditionalRelease=e.adaptiveRelease.delete):this.loadAdaptiveReleaseEntitlements()}else this.entitlementService.hasCourseEntitlement(o.eo.ViewAsDesigner,this.scope.content.courseId).then(e=>{this.entitledToViewDesigner=e}),this.loadAdaptiveReleaseEntitlements();t.find(".item-visibility-selector, .item-visibility-selector a").on("keydown",e=>{e.keyCode===c.K5&&e.preventDefault()})}}w.$inject=["scope","element","$q","$ngRedux",l.serviceName,a.HV,p.HV,"$modal",h.HV];class A{constructor(e){this.$injector=e,this.restrict="E",this.scope={content:"=",onblurFunc:"&?",onchangeFunc:"&?",onRestrictedSelectedFunc:"&?",openPanelOnRestricted:"&?",disableRestricted:"&?",validationFunc:"&?",isVisibilitySelectorEnabled:"&?",hasMediumIcon:"=?"},this.template=g,this.link=(e,t)=>{e.contentVisibilitySelector=this.$injector.instantiate(w,{scope:e,element:t})}}}A.$inject=["$injector"],i.module(I,[m.e1,h.e1,v]).directive("bbContentVisibilitySelector",["$injector",e=>e.instantiate(A)])},624877:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(464027),r=n(555840),s=n(484501);let o="ultra.directives.lti";class a{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"="},this.template=s,this.link=(e,t)=>{let n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description}))}}}a.$inject=[r.N7.H],i.module(o,[]).directive("bbLtiLinkItem",["$injector",e=>e.instantiate(a)])},272927:function(e,t,n){"use strict";n.d(t,{ew:function(){return o},e1:function(){return G}}),n(789029),n(424651),n(196407),n(491393),n(373055),n(782803),n(577421),n(530644),n(555873),n(236259);var i,r,s,o,a=n(464027),l=n(276635),c=n(842891),d=n(748382),u=n(676954),p=n(786430),m=n(860995),h=n(362767),g=n(480489),f=n(808361),b=n(312019),v=n(221789),y=n(227488),S=n(256678),C=n(33442),E=n(625506);let I="ultra.components.directives.placeholder";class w{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.scope=!1,this.require="?ngModel",this.link=(e,t,n,i)=>{if("input"!==t.prop("tagName").toLowerCase())throw Error("Attempted to use bb-placeholder directive on a non-input element");let r=e=>{let t=E("<div></div>").text(e).css("visibility","hidden").appendTo(document.body),n=t.width();return t.remove(),n},s=()=>{let n=t.attr("title"),i=t.prev("span");this.timeout(()=>{t.val()&&t.val()!==n?i.css("visibility","hidden"):(i.css("visibility",""),n&&i.css("margin-left",r(n)+2+"px"))},e,0,!1)};t.wrap('<div class="bb-placeholder"></div>'),t.before('<span class="panel-title bb-placeholder__text">'+n.bbPlaceholder+"</span>"),t.on("cut",s),t.on("keydown",s),t.on("keyup",s),t.on("paste",s),t.on("change",s),t.on("blur",s),t.on("focus click",s),n.$observe("bbPlaceholder",n=>{t.prev("span").text(n),this.timeout(()=>{t.trigger("keydown")},e,0,!1)}),i&&e.$watch(()=>i.$modelValue,()=>{s()})}}}w.$inject=["$injector",g.H],a.module(I,[g.e]).directive("bbPlaceholder",["$injector",e=>e.instantiate(w)]);var A=n(937131),k=n(993358),T=n(610624),P=n(981796),D=n(967340),x=n(385847),R=n(555840),L=n(8208),N=n(282310),$=n(302032);function O(e,t){return function(n,i){t(n,i,e)}}let G="ultra.components.directives.content.panelHeader";(i=s||(s={})).ContentOnly="ContentOnly",i.ContentAndDelete="ContentAndDelete",i.ContentAndHandler="ContentAndHandler",i.ContentAndDeleteAndHandler="ContentAndDeleteAndHandler",i.DeleteAndHandler="DeleteAndHandler",i.None="None",(r=o||(o={})).Gear="settings",r.Info="information";class _{configure(){this.configureLocalizationKeys(),this.element.closest(".panel-wrap").addClass("has-bb-panel-header"),this.contextCourse.course?this.courseName=this.contextCourse.course.displayName:this.scope.$watch("::content",e=>{e&&this.CourseModel.$find(e.courseId).$then(e=>{this.courseName=e.displayName})}),this.scope.$watch("::content",e=>{e&&this.allyService.isAvailable().then(e=>{e&&(this.canShowAlly=!0,this.allyService.update(this.scope,this.scope.content.id,this.allyService.getXythosIdFromContentItem(this.scope.content)))})})}focusReadonlyPanelTitle(){let{disableTitleAutofocus:e,focusTitleForEdit:t}=this.scope;return!e&&!(null==t?void 0:t())}forceTitleFocus(){if(null!=this.scope.panelTitle)this.accessibility.focusCorrectElementOnPanel();else{let e=this.scope.$watch("panelTitle",t=>{null!=t&&(this.accessibility.focusCorrectElementOnPanel(),e())})}}get panelHeaderTitle(){return this.scope.panelHeaderTitle?this.scope.panelHeaderTitle:this.courseName}onBlurTitle(e){let t=e.target,n=e.relatedTarget;if(t&&n&&(0,P._y)(t)!==(0,P._y)(n)){this.scope.panelTitle&&this.scope.panelTitle.length||(this.scope.panelTitle=this.translatedPlaceholder,this.delayedTitleBlur());return}this.onReadMode(),this.scope.hasError||this.delayedTitleBlur()}delayedTitleBlur(){this.scope.onblurFuncTitle&&this.timeout(()=>{this.scope.onblurFuncTitle()},this.scope,0)}onChangeTitle(){this.scope.onchangeFuncTitle&&!this.scope.hasError&&this.scope.onchangeFuncTitle()}onBlurVisibility(){this.onReadMode(),this.scope.onblurFuncVisibility&&!this.scope.hasError&&this.scope.onblurFuncVisibility()}onChangeVisibility(){this.scope.onchangeFuncVisibility&&!this.scope.hasError&&this.scope.onchangeFuncVisibility()}onRestrictedSelected(){this.scope.onRestrictedSelectedFuncTitle&&!this.scope.hasError&&this.scope.onRestrictedSelectedFuncTitle()}validateVisibilityChange(e){if(this.scope.validationFuncVisibility){let t=this.scope.validationFuncVisibility({visibility:e});return void 0===t||t}return!0}onEditButtonMouseOver(){this.isEditButtonHovering=!0}onEditButtonMouseLeave(){this.isEditButtonHovering=!1}validateTitle(){this.autoTitle(),this.scope.panelTitle?this.editMode=!1:this.editMode=!0}onEditMode(){this.scope.canEdit?(this.editMode=!0,this.panelTitleOrig=this.scope.panelTitle,this.bbOffcanvas.safeFocus(this.element.find(".panel-header-title"))):this.editMode=!1}titlePressKey(e){(e.keyCode===x.K5||e.keyCode===x.L_)&&this.scope.canEdit&&(e.preventDefault(),this.bbOffcanvas.safeFocus(this.element.find(".edit-title")))}blurTitle(e){let t=e.target;t.removeAttribute("bb-focus"),t.setAttribute("tabindex","-1")}pressKey(e){13===e.keyCode?(e.preventDefault(),e.stopPropagation(),this.element.find(".panel-header-title").get(0).blur()):e.keyCode===x.hY&&this.editMode&&this.scope.panelTitle!==this.panelTitleOrig&&(e.preventDefault(),e.stopPropagation(),this.scope.panelTitle=this.panelTitleOrig,this.editMode||this.bbOffcanvas.safeFocus(this.element.find(".panel-title")))}onReadMode(){this.scope.filterTitleTags&&this.scope.filterTitleTags()&&this.filterTitleTags(),this.validateTitle()}filterTitleTags(){this.scope.panelTitle&&(this.scope.panelTitle=this.scope.panelTitle.replace(D.a,""))}configureLocalizationKeys(){let e="components.directives.header";this.scope.localizationKey?(this.placeholderLocalizationKey=`${e}.placeholder.${this.scope.localizationKey}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey):this.scope.content&&this.scope.content.$then(()=>{if(this.scope.content.contentHandler){let t=this.scope.content.contentHandler.toString().replace("resource/","");this.placeholderLocalizationKey=`${e}.placeholder.${t}`,this.panelAriaLocalizationKey=this.scope.ariaLocalizationKey?`${e}.aria.title.${this.scope.ariaLocalizationKey}`:this.placeholderLocalizationKey}})}gotoConversation(e){var t,n;(null===(t=(n=this.scope).onNavigateToConversation)||void 0===t?void 0:t.call(n))!==!1&&this.ultraState.goPeekState("conversations",{courseId:this.scope.content.courseId,contentId:this.scope.content.id,groupId:e||"default"})}autoTitle(){if(!this.scope.panelTitle&&this.scope.autoTitle&&this.scope.autoTitle()){let e=this.translatedPlaceholder;this.scope.panelTitle=e}}getDeleteDirectiveArgumentType(){let e="None";return this.scope.content&&this.scope.content.contentHandler?(e="ContentOnly",this.attrs.ondeleteFunc?(e="ContentAndDelete",this.scope.ondeleteConfirmHandler&&(e="ContentAndDeleteAndHandler")):this.scope.ondeleteConfirmHandler&&(e="ContentAndHandler")):this.attrs.ondeleteFunc&&this.scope.ondeleteConfirmHandler&&(e="DeleteAndHandler"),e}getButtonGroupClass(){let e=0,t=0;return this.scope.showConversations&&this.scope.showConversations()&&(e+=1,t+=1),this.scope.showParticipants&&this.scope.showParticipants()&&(e+=1),this.scope.showSettings&&this.scope.showSettings()&&(e+=1,t+=1),this.scope.showDelete&&this.scope.showDelete()&&(this.scope.showSettings&&this.scope.showSettings()||(e+=1),t+=1),"small-buttons-"+e+" large-buttons-"+t}getSettingsIcon(){return this.scope.settingsIcon?this.scope.settingsIcon:"settings".toString()}openSettingsPanel(){null!=this.scope.settingsDisabled&&this.scope.settingsDisabled()||this.ultraState.goPeekState(this.scope.settingsPeekRef)}isVisibilitySelectorEnabled(){return!this.scope.isVisibilitySelectorEnabled||this.scope.isVisibilitySelectorEnabled()}constructor(e,t,n,i,r,s,o,a,c,d,u,p,m){this.scope=e,this.element=t,this.attrs=n,this.accessibility=i,this.timeout=r,this.bbOffcanvas=s,this.context=o,this.CourseModel=a,this.localize=c,this.ultraState=d,this.contextCourse=u,this.allyService=p,this.firstTimeHelper=m,this.isEditButtonHovering=!1,this.inputId=`bb-panel-header-input-${(0,T.V)()}`,this.getAriaLabel=(()=>{let e=l.memoize(e=>this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.header.aria.edit",params:{title:e},noWrap:!0,noEscape:!0}));return()=>e(this.scope.panelTitle)})(),this.scope.panelHeader=this,this.accessibility.isFocusDelayed=!0,this.configure(),c.loadBundle("components/directives/panel-header").then(()=>{this.placeholderLocalizationKey&&(this.translatedPlaceholder=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:this.placeholderLocalizationKey,params:{date:this.context.getServerTime()},noWrap:!0})),(!this.scope.panelTitle||this.scope.focusTitleForEdit&&this.scope.focusTitleForEdit())&&this.scope.canEdit?(this.onEditMode(),this.scope.keepTitleOnEdit&&this.scope.keepTitleOnEdit()?this.element.find(".panel-header-title").get(0).setSelectionRange(0,0):this.scope.panelTitle&&(this.scope.panelTitle="")):(this.editMode=!1,this.focusReadonlyPanelTitle()&&this.forceTitleFocus())}),this.scope.setPlaceholderAsDefaultTitle&&this.scope.setPlaceholderAsDefaultTitle()&&!this.scope.panelTitle&&e.$watch(()=>this.element.find("input.panel-title").attr("placeholder"),e=>{e&&(this.scope.panelTitle=e)}),this.scope.$on("panel-header-force-edit-mode",(e,t)=>{this.editMode=t})}}_=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([O(0,(0,$.tB)("scope")),O(1,(0,$.tB)("element")),O(2,(0,$.tB)("attrs")),O(3,(0,$.tB)(c.HV)),O(4,(0,$.tB)(g.H)),O(5,(0,$.tB)(p.HV)),O(6,(0,$.tB)(h.HV)),O(7,(0,$.tB)(R.N7.H)),O(8,(0,$.tB)(u.serviceName)),O(9,(0,$.tB)(f.HV)),O(10,(0,$.tB)(m.HV)),O(11,(0,$.tB)(d.HV)),O(12,(0,$.tB)(N.HV))],_);class M{constructor(e){this.$injector=e,this.restrict="E",this.template=L,this.transclude={panelHeaderCustomIcons:"?bbPanelHeaderCustomIcons",panelHeaderActions:"?bbPanelHeaderCustomActions"},this.scope={showCourse:"&?",panelHeaderTitle:"@?",panelHeaderTitleTranslateKey:"@?",content:"=",contentId:"=?",canEdit:"=",mode:"@?",hasError:"=?",hasSlider:"&?",showDelete:"&?",ondeleteFunc:"&?",ondeleteConfirmHandler:"@?",choices:"=?",showConversations:"&?",onconversationsFunc:"&?",onNavigateToConversation:"&?",showVisibility:"&?",onchangeFuncVisibility:"&?",onblurFuncVisibility:"&?",disableRestricted:"&?",openPanelOnRestricted:"&?",validationFuncVisibility:"&?",panelTitle:"=?",setPlaceholderAsDefaultTitle:"&?",localizationKey:"@",ariaLocalizationKey:"@",localizationAttrsValues:"@",onchangeFuncTitle:"&?",onblurFuncTitle:"&?",onRestrictedSelectedFuncTitle:"&?",maxLength:"=?",autoTitle:"&?",disableTitleAutofocus:"<?",focusTitleForEdit:"&?",keepTitleOnEdit:"&?",showSubmissionsGrading:"&?",summary:"=?",isFiltered:"=?",filteredCount:"=?",showAllyIcon:"&?",showSettings:"&?",settingsDisabled:"&?",settingsIcon:"@?",settingsPeekRef:"@?",settingsLabel:"@?",showParticipants:"&?",isVisibilitySelectorEnabled:"&?",filterTitleTags:"&?",showEmptyTitleReminder:"&?"},this.link=(e,t,n)=>{e.panelHeader=this.$injector.instantiate(_,{scope:e,element:t,attrs:n})}}}M.$inject=["$injector",b.H,R.N7.H],a.module(G,[c.e1,p.e1,k.e,S.e1,C.e1,I,f.e1,A.e,v.e1,y.e1,N.e1]).directive("bbPanelHeader",["$injector",e=>e.instantiate(M)])},683512:function(e,t,n){"use strict";n.d(t,{OC:function(){return m},e1:function(){return u},ns:function(){return p}}),n(706288),n(248952);var i=n(464027),r=n(562693),s=n(555840),o=n(84741),a=n(808361),l=n(610761),c=n(282157),d=n(676954);let u="ultra.directives.courseCatalogLink",p="course",m="org",h="ultraui.coursecatalog.link",g="ultraui.organizationcatalog.link",f="classic_course_catalog_link_ind",b="classic_course_catalog_link",v={[h]:"Disabled",[g]:"Disabled",[f]:"N",[b]:""};class y{handleSystemPreferencesResponse(e){let t=this.getPreferenceValueByKey(e,this.getCatalogLinkKey())||v[this.getCatalogLinkKey()];this.scope.shouldDisplayCatalogLink="Enabled"===t;let n=this.getPreferenceValueByKey(e,f)||v[f];this.scope.isExternalCatalog="Y"===n,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,b)||v[b]}getPreferenceValueByKey(e,t){let n=e.find(e=>e.key===t);return n?n.value:null}getCatalogLinkKey(){return this.attrs.catalogType===p?h:g}constructor(e,t,n,i,s,o,a,l){this.scope=e,this.attrs=t,this.$q=n,this.SystemPreferenceModel=i,this.batchService=s,this.ultraState=o,this.windowSizeService=a,this.bbLocalize=l,this.template=r,s.performBatch(()=>{n.all([i.$find(this.getCatalogLinkKey()).$allow([404]).$asPromise(),i.$find(f).$allow([404]).$asPromise(),i.$find(b).$allow([404]).$asPromise()]).then(e=>{this.handleSystemPreferencesResponse(e)})});let c=t.catalogType===m?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=()=>{o.goToRoute(c)},e.windowSizeService=a,a.isLargeBreakpoint()||this.bbLocalize.loadBundle("base/baseCourses").then(()=>{e.ariaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"base.baseCourses.link"})})}}y.$inject=["scope","attrs","$q",s.B5.H,o.HV,a.HV,l.HV,d.serviceName];class S{constructor(e){this.$injector=e,this.template=r,this.link=(e,t,n)=>{e.courseCatalogLink=this.$injector.instantiate(y,{scope:e,element:t,attrs:n})}}}S.$inject=["$injector"],i.module(u,[s.e1,o.e1,a.e1,l.e1,c.e1]).directive("bbCourseCatalogLink",["$injector",e=>e.instantiate(S)])},282157:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i=n(808361),r=n(860995),s=n(302032),o=n(464027);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.directives.courseOrgTokenReplacementDirective",c=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"},{coursePrefix:"components.directives.telemetry",orgPrefix:"components.directives.telemetry.organization"}];class d{replaceToken(e){if(e){let t=c.find(t=>e.startsWith(t.coursePrefix));if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e}constructor(e,t,n,i,r){this.element=e,this.attributes=t,this.scope=n,this.ultraState=i,this.currentCourse=r;try{if((i.includes("base.organizations.**")||r.course&&r.course.isOrganization)&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){let n=t.bbTranslateAttrs;o.forEach(this.scope.$eval(n),e=>{n=n.replace(e,this.replaceToken(e))}),t.bbTranslateAttrs=n,e.attr("bb-translate-attrs",n)}}catch(e){}}}class u{constructor(e,t){this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=()=>(e,t,n)=>new d(t,n,e,this.ultraState,this.currentCourse)}}u=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,s.tB)(i.HV)),a(1,(0,s.tB)(r.HV))],u),o.module(l,[i.e1]).directive("courseOrgTokenResolver",["$injector",e=>e.instantiate(u)])},366968:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(676954);let s="ultra.directives.bbDate";class o{compile(e){let t=e.html();return(e,n,i)=>{let s=t=>{let s=this.bbLocalize.getFormatEnum(r.ILocaleDateFormat,i.format)||r.ILocaleDateFormat.Full,o=e=>{"bb-date"===n.prop("tagName").toLowerCase()?n.replaceWith(e):n.html(e)};null==t?o(""):this.bbLocalize.formatDate(t,s,e).then(o)},o=t=>t?new Date(this.$parse(t)(e)):null;"true"===i.autoUpdate?i.$observe("bbDate",()=>{s(o(i.bbDate))}):s(this.$parse(t)(e)||o(i.bbDate))}}constructor(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}}o.$inject=["$parse",r.serviceName],i.module(s,[r.moduleName]).directive("bbDate",["$injector",e=>e.instantiate(o)])},504537:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}}),n(318494),n(996987);var i=n(276635),r=n(625506),s=n(464027),o=n(676954),a=n(394125),l=n(232085),c=n(495794),d=n(385847),u=n(619034),p=n(737416);let m="ultra.components.directives.datepicker";class h{initialize(){let e=this.bbLocalize.getLocale(this.scope);if(this.localeString=null,null==this.attrs.bbValidateDate&&(this.attrs.bbValidateDate="short",this.bbValidateDate[0].compile(this.element,this.attrs,void 0)(this.scope,this.element,this.attrs,this.model,this.$transclude)),!l.Z.detect().desktop()&&window.Modernizr.inputtypes.date){if(this.setupNativeDatePicker(),this.attrs.$set("type","date"),this.element.removeAttr("placeholder"),this.attrs.bbTranslateAttrs){let e=this.scope.$eval(this.attrs.bbTranslateAttrs);e.placeholder&&(delete e.placeholder,this.attrs.bbTranslateAttrs=JSON.stringify(e))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then(()=>{if(null==this.attrs.placeholder&&this.attrs.$set("placeholder",this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.dateFormatPlaceholder"})),this.model.$modelValue){let e=this.bbLocalize.formatDateSync(this.model.$modelValue,o.ILocaleDateFormat.Short,this.scope);this.element.val(e)}let t=this.bbLocalize.translateSync({locale:e,key:"components.directives.datepicker.ariaLabel.datepickerButton"});this.widgetButton=this.$compile(`<button class="open-datepicker super-clear js-datepicker-toggle-btn" aria-label="${t}" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>`)(this.scope),this.updateReadOnlyState(),this.widgetButton.on("focus",()=>{let e=document.querySelector('[name="due-date"]');(null==e?void 0:e.hasAttribute("disabled"))&&(null==e?void 0:e.getAttribute("disabled"))&&this.widgetButton.blur()}),this.attrs.$observe("disabled",e=>{this.updateReadOnlyState()}),this.attrs.$observe("readonly",e=>{this.updateReadOnlyState()})}),this.localeString=this.bbLocalize.preProcessFormatterLocale(e).replace(/_/g,"-"),3===this.localeString.split("-").length&&(this.localeString=this.localeString.split("-").filter((e,t)=>t<2).join("-")),0>["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(this.localeString)&&("en-SC"===this.localeString?this.localeString="ar":"ko-KR"===this.localeString?this.localeString="kr":"nb-NO"===this.localeString||"nn-NO"===this.localeString?this.localeString="no":this.localeString=this.localeString.substring(2,0)),this.attrs.$set("type","text");let t=this.bbLocalize.isRTL(this.scope);if(this.attrs.container){let e=r(this.attrs.container);e.length&&(this.container=e)}this.attrs.orientation&&(this.orientation=this.attrs.orientation);let i={todayHighlight:!0,beforeShowDay:e=>({content:this.bbLocalize.formatNumberSync(e.getDate(),this.scope)}),autoclose:!0,forceParse:!1,container:this.container,keyboardNavigation:!1,language:this.localeString,orientation:this.orientation,weekStart:this.weekStart,rtl:t,showOnFocus:!1,startDate:new Date("1900-01-01"),templates:{leftArrow:'<div class="icon-arrow-left"></div>',rightArrow:'<div class="icon-arrow-right"></div>'}};"en"===this.localeString?this.setupBootstrapDatePicker(i):(this.localeString="bootstrap-datepicker."+this.localeString,n.e(24625).then((()=>{n(414808)("./"+this.localeString).then(()=>{this.setupBootstrapDatePicker(i)})}).bind(null,n)).catch(()=>{})),this.scope.$on("$destroy",()=>{this.element.datepicker("destroy")})}}setupNativeDatePicker(){this.scope.$watch(()=>this.model.$modelValue,e=>{e&&(this.element.val(u(e).format("YYYY-MM-DD")),this.element.triggerHandler("change"),this.model.$render())})}setupBootstrapDatePicker(e){this.element.datepicker(e).data("datepicker"),this.scope.$watch(()=>this.model.$modelValue,()=>{this.updateDatepicker()}),this.element.on("changeDate",e=>{if(e.date){let t=this.bbLocalize.formatDateSync(e.date,o.ILocaleDateFormat.Short,this.scope);this.element.val(t),this.element.triggerHandler("change"),this.model.$render()}});let t=this.element.data("datepicker");t.isInput=!1,this.element.unbind("keyup",t._events[0][1].keyup),this.element.on("show changeMonth changeYear",e=>{this.datepickerDropdownElement=r(".datepicker-dropdown"),this.iconArrowLeft=this.datepickerDropdownElement.find(".icon-arrow-left"),this.iconArrowRight=this.datepickerDropdownElement.find(".icon-arrow-right"),this.openDatepickerButton=this.element.siblings("button.open-datepicker");let t=[];this.datepickerDropdownElement.find("td.day").not(".old").not(".new").each(function(){t.push(r(this))}),this.currentMonthDays=t,this.datepickerDropdownElement.on("keydown",e=>{e.keyCode===d.hY&&(this.openDatepickerButton.focus(),this.element.datepicker("hide"))}),this.iconArrowLeft.add(this.iconArrowRight).on("blur",()=>{this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")}),this.iconArrowLeft.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.hY&&e.stopPropagation(),e.keyCode===d.L_||e.keyCode===d.K5?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToPreviousMonth()):e.keyCode===d.Mf&&(e.shiftKey?(this.openDatepickerButton.focus(),this.element.datepicker("hide")):this.focusElement(this.iconArrowRight))}),this.iconArrowRight.off("keydown").on("keydown",e=>{e.preventDefault(),e.keyCode!==d.hY&&e.stopPropagation(),e.keyCode===d.L_||e.keyCode===d.K5?(this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),this.goToNextMonth()):e.keyCode===d.Mf&&(e.shiftKey?this.focusElement(this.iconArrowLeft):this.focusDefaultDay())}),this.updateAriaRolesAndStates(this.getViewDate(),e.date),this.setUpKeyboardNavigation(),"show"===e.type&&(this.datepickerDropdownElement.find("tfoot").remove(),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),this.datepickerDropdownElement.on("keyup",e=>{e.stopPropagation()}),this.focusDefaultDay())})}updateDatepicker(){let e=this.model.$modelValue,t=this.element.data("datepicker");if(s.isDate(e)&&t){let n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDate();i&&i.getTime()===n.getTime()||(t.dates.replace([n]),t.viewDate=n,t.fill())}}updateReadOnlyState(){!this.element.hasClass("show-calendar-icon")&&(this.element.prop("disabled")||this.element.prop("readonly"))?this.widgetButton.remove():this.element.next()!==this.widgetButton&&(this.widgetButton.click(e=>{this.element.datepicker("show")}),this.element.after(this.widgetButton))}focusDefaultDay(){let e=i.find(this.currentMonthDays,e=>e.hasClass("active")),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)}focusPreviousDay(){let e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])}focusNextDay(){let e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))}focusSameWeekdayOfPreviousWeek(){let e=this.getActiveElementIndex();e-7>=0?this.focusElement(this.currentMonthDays[e-7]):(this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-(7-e)]))}focusSameWeekdayOfNextWeek(){let e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{let t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}}focusSameDayOfPreviousMonth(){this.focusSameDayOfAdjacentMonth(-1)}focusSameDayOfNextMonth(){this.focusSameDayOfAdjacentMonth(1)}focusSameDayOfAdjacentMonth(e){let t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusSameDayOfPreviousYear(){this.focusSameDayOfAdjacentYear(-1)}focusSameDayOfNextYear(){this.focusSameDayOfAdjacentYear(1)}focusSameDayOfAdjacentYear(e){let t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()}focusFirstDayOfMonth(){this.focusElement(this.currentMonthDays[0])}focusLastDayOfMonth(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])}focusElement(e){e.attr("tabindex","-1").focus()}getViewDate(){return this.element.data("datepicker").viewDate}setViewDate(e){this.element.data("datepicker").viewDate=e}getActiveElementIndex(){return i.findIndex(this.currentMonthDays,e=>e.attr("id")===r(document.activeElement).attr("id"))}goToPreviousMonth(){this.moveMonth(-1)}goToNextMonth(){this.moveMonth(1)}goToPreviousYear(){this.moveYear(-1)}goToNextYear(){this.moveYear(1)}moveMonth(e){let t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")}moveYear(e){let t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")}getAdjustedDate(e){let t=new Date(parseInt(e,10));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}updateAriaRolesAndStates(e,t){let n=this.bbLocalize.getLocale(this.scope),i=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",i),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",i);let s=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",s).attr("role","button");let o=this.bbLocalize.translateSync({locale:n,key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",o).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");let a=u(e),l=u(a).subtract({months:1}),c=u(a).add({months:1});this.datepickerDropdownElement.find("td").each((e,t)=>{let n;let i=r(t);i.attr("role","gridcell");let s=t.getAttribute("data-date");n=i.hasClass("old")?l.toDate():i.hasClass("new")?c.toDate():a.toDate();let o=u(s?this.getAdjustedDate(s):new Date(n.getFullYear(),n.getMonth(),+i.text()));if(Number.isNaN(o.date()))return;i.attr("aria-label",this.bbLocalize.formatDateSync(o.toDate()));let d="datepicker-td-"+o.unix();i.attr("id",d),i.hasClass("active")&&(i.attr("aria-selected","true"),this.datepickerDropdownElement.find("table").attr("aria-activedescendant",d))})}setUpKeyboardNavigation(){this.currentMonthDays.forEach(e=>{e.off("keydown").on("keydown",e=>{switch(e.preventDefault(),e.keyCode!==d.K5&&e.keyCode!==d.hY&&e.stopPropagation(),p.Pq.enableFocusOutline(),e.keyCode){case d.RL:this.bbLocalize.isRTL()?this.focusNextDay():this.focusPreviousDay();break;case d.pX:this.bbLocalize.isRTL()?this.focusPreviousDay():this.focusNextDay();break;case d.UP:this.focusSameWeekdayOfPreviousWeek();break;case d.WV:this.focusSameWeekdayOfNextWeek();break;case d.Ku:e.ctrlKey||e.altKey?this.focusSameDayOfPreviousYear():this.focusSameDayOfPreviousMonth();break;case d.VM:e.ctrlKey||e.altKey?this.focusSameDayOfNextYear():this.focusSameDayOfNextMonth();break;case d.Sd:this.focusFirstDayOfMonth();break;case d.uR:this.focusLastDayOfMonth();break;case d.Mf:e.shiftKey?this.focusElement(this.iconArrowRight):(c.Bv(null,this.openDatepickerButton),this.element.datepicker("hide"));break;case d.K5:case d.L_:this.currentMonthDays[this.getActiveElementIndex()].click(),this.openDatepickerButton.focus()}})})}constructor(e,t,n,i,r,s,o,a){this.scope=e,this.element=t,this.attrs=n,this.model=i,this.$transclude=r,this.bbLocalize=s,this.bbValidateDate=o,this.$compile=a,this.attrs.firstDayOfWeek?this.scope.$watch(`${this.attrs.firstDayOfWeek}`,e=>{void 0!==e&&(this.weekStart=e,this.initialize())}):this.initialize()}}h.$inject=["scope","element","attrs","model","$transclude",o.serviceName,a.Ei+"Directive","$compile"];class g{constructor(e){this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=(e,t,n,i,r)=>{e.datepicker=this.$injector.instantiate(h,{scope:e,element:t,attrs:n,model:i,$transclude:r})}}}g.$inject=["$injector"],s.module(m,[o.moduleName,a.e1]).directive("bbDatePicker",["$injector",e=>e.instantiate(g)])},549897:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(676954);let s="ultra.components.directives.bbDatetime";class o{constructor(e,t,n){this.$parse=e,this.$q=t,this.bbLocalize=n,this.restrict="E",this.scope={value:"&"},this.link=(e,t,n)=>{let s=n.format,o=n.timezoneFormat;e.$watch(()=>e.value(),n=>{let a=r.ILocaleDatetimeFormat.Short,l=r.ILocaleTimezoneFormat.Short;if(!i.isDate(n))return t.html("");s&&(a=this.bbLocalize.getFormatEnum(r.ILocaleDatetimeFormat,s)),o&&(l=this.bbLocalize.getFormatEnum(r.ILocaleTimezoneFormat,o)),s&&o?this.bbLocalize.translate({locale:this.bbLocalize.getLocale(e),key:`components.directives.datetime.datetimeWithTimezone.${s.toUpperCase()}_datetime_${o.toUpperCase()}_timezone`,params:{datetime:n},noWrap:!0,noEscape:!0}).then(e=>{t.html(e)}):(o?this.bbLocalize.formatTimezone(n,l):this.bbLocalize.formatDatetime(n,a,e)).then(e=>{t.html(e)})},!0)}}}o.$inject=["$parse","$q",r.serviceName],i.module(s,[r.moduleName]).directive("bbDatetime",["$injector",e=>e.instantiate(o)])},33442:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}});var i=n(625506),r=n(276635),s=n(464027),o=n(728042),a=n(716865),l=n(567361),c=n(860995),d=n(78029),u=n(555840),p=n(480489),m=n(808361),h=n(398321),g=n(88818),f=n(253776);let b="ultra.components.directives.delete";class v{initialize(){let e;this.scope.unregisterAutoSave=r.once(this.scope.$root.$on("bb-autosave-form",(e,t,n)=>{if(g.Hth.Saving===t){let e=i(document.activeElement);e&&e.length&&(this.focusedElement=e[0]),this.scope.savingInProgress=!0}else this.scope.savingInProgress=!1,this.timeout(()=>{this.focusedElement&&(this.focusedElement.focus(),this.focusedElement=null)},this.scope,0)})),this.scope.$on("$destroy",this.scope.unregisterAutoSave),this.scope.parent=this.scope.$parent,o.Z.OnRootScope(this.scope,"disable-delete",e=>{this.isDeleteDisabled=!0}),o.Z.OnRootScope(this.scope,"enable-delete",e=>{this.isDeleteDisabled=!1});let t=this.contextCourse.courseId||this.scope.courseId&&this.scope.courseId();if(t&&(e=this.courseModel.$new(t)),this.scope.contentId&&!t)throw new d.v({message:"A courseId must be provided when contentId is used"});if(this.requiredArgumentsSupplied=!0,this.scope.attrTranslateKey="components.directives.delete.control-delete-label",this.attrs.confirmationHandler&&(this.modalShowType="always",this.scope.attrTranslateKey="components.directives.delete.handlers."+this.attrs.confirmationHandler.replace("resource/","")),this.scope.content&&(null==this.scope.contentId||this.scope.contentId===this.scope.content.$pk))this.contentPromise=this.scope.content&&this.scope.content.$asPromise&&this.scope.content.$asPromise()||this.$q.when(this.scope.content);else if(this.scope.contentId)this.contentPromise=e.contents.$new(this.scope.contentId).$fetch().$asPromise();else if(this.attrs.deleteFunction&&this.attrs.confirmationHandler);else throw this.requiredArgumentsSupplied=!1,new d.v({message:"a content object, a contentId string, or a confirmationHandler and deleteFunction must be provided."});this.contentPromise&&this.contentPromise.then(e=>{this.scope.content=e,this.scope.content.contentHandler&&!this.scope.attrTranslateKey&&(this.scope.attrTranslateKey="components.directives.delete.handlers."+this.scope.content.contentHandler.toString().replace("resource/",""))})}getConfirmationKeyAndShowType(){return this.$q.when(this.contentPromise).then(()=>{let e;return(this.scope.content&&this.scope.content.$resolve(),this.attrs.confirmationHandler)?this.$q.when({confirmationKey:this.attrs.confirmationHandler,showType:this.modalShowType}):(this.ultraState.includes("**.outline.**")?e=h.m.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=h.m.Discussions),this.scope.content.$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e,this.contextCourse.course.isOrganization).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType}))))})}deleteElement(){this.attrs.deleteFunction?(this.scope.deleteFunction(),this.scope.unregisterAutoSave()):this.ContentService.deleteContent(this.scope.content).then(()=>{this.scope.parent.contentCreateItem&&(this.scope.parent.contentCreateItem.confirmCancellation=!1),this.scope.unregisterAutoSave(),this.attrs.callbackFunction?this.scope.callbackFunction():this.ultraState.leavePeekState(this.ultraState.current.name)})}constructor(e,t,n,i,r,s,o,a,l){this.$q=e,this.scope=t,this.element=n,this.attrs=i,this.ultraState=r,this.courseModel=s,this.contextCourse=o,this.ContentService=a,this.timeout=l,this.isDeleteDisabled=!1,this.focusedElement=null,t.$watch("contentId",(e,t)=>{e!==t&&this.initialize()}),this.initialize()}}v.$inject=["$q","scope","element","attrs",m.HV,u.N7.H,c.HV,l.HV,p.H];class y{constructor(e){this.$injector=e,this.restrict="E",this.template=f,this.scope={content:"=?",contentId:"=?",courseId:"&?",deleteFunction:"&?",callbackFunction:"&?",displayMode:"@?",extraClass:"@?",choices:"=?"},this.link=(e,t,n)=>{e.delete=this.$injector.instantiate(v,{scope:e,element:t,attrs:n})}}}y.$inject=["$injector",m.HV],s.module(b,[c.e1,l.e1,a.e1,u.e1,m.e1]).directive("bbDelete",["$injector",e=>e.instantiate(y)])},979026:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}}),n(192494);var i,r,s=n(464027),o=n(676954),a=n(219809),l=n(385847),c=n(555840),d=n(480489),u=n(786845),p=n(860995),m=n(567361),h=n(398321),g=n(593415),f=n(625506);let b="ultra.components.directives.bbDragHandle";(r=i||(i={})).Vertical="vertical",r.Horizontal="horizontal",r.Omnidirectional="omnidirectional";class v{contentHasFolderChild(e){if(c.courseContent.ContentHandler.Folder.isEqualTo(e.dragItemType)&&h.m.Discussions!==this.dragDropService.currentDragContext){let e=c.courseContent.e6.Root,t=this.currentCourseService.course,n=this.contentService.findRootNode(t,e);this.contentService.getContentInContentTree(n,t.courseId,this.dragDropService.currentDragId).then(e=>{e.content&&(this.dragDropService.currentDragHasFolderChild=e.content.getChildren().$asPromise().then(e=>e.some(e=>e.isUiFolder())))})}}dragStart(e,t,n){if(this.dragDropService.currentDragElement){let e=f(".f-open-dropdown");e.length>0&&window.Foundation.libs.dropdown.close(e),this.dragDropService.currentDragElement.remove()}this.$rootScope.$broadcast("bb-drag-start"),f(document.body).addClass("bb-is-dragging"),this.dragDropService.originalElement=t.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.idOfPreviousItem=this.dragDropService.originalElement.prev(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.dragDropService.idOfNextItem=this.dragDropService.originalElement.next(".drag-element").find("[drag-item-id]").attr("drag-item-id"),this.menuCloserService.closeAnyOpenAngularMenus(),c.courseContent.ContentHandler.Folder.isEqualTo(n.dragItemType)&&(this.$rootScope.$broadcast("close-folder-immediately-by-id",n.dragItemId),this.dragDropService.currentDragElement.find(".img-icon-folder-open").removeClass("img-icon-folder-open").addClass("img-icon-folder")),this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass).addClass("mouse-touch-drag"),this.dragDropService.originalElement.after(this.dragDropService.currentDragElement),this.dragDropService.currentDragId=n.dragItemId,this.dragDropService.currentDragType=n.dragItemType,this.contentHasFolderChild(n),this.dragDropService.currentDropTargetId=n.dragItemId,this.dragDropService.positionBefore=n.dragItemId,this.dragDropService.createDropPlaceholderElement(this.dragDropService.currentDragElement),this.dragMove(e,n)}dragEnd(e,t){f(document.body).removeClass("bb-is-dragging"),e.preventDefault(),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.movableElementClass),this.dragDropService.currentDragElement.removeAttr("style"),this.$rootScope.$broadcast("bb-drag-end")}dragCancel(){this.$rootScope.$broadcast("bb-drag-cancel"),f(document.body).removeClass("bb-is-dragging")}dragMove(e,t){let n,i,r,s;e.preventDefault();let o=this.dragDropService.currentDragElement.find("[bb-drag-handle]"),l=this.dragDropService.originalElement.find("[bb-drag-handle]").offset(),c=o.offset(),d=this.dragDropService.currentDragElement.offset(),u=c.left-d.left,p=c.top-d.top,m=u+o.width()/2,h=p+o.height()/2,g="horizontal"===this.dragDirection||"omnidirectional"===this.dragDirection,f="vertical"===this.dragDirection||"omnidirectional"===this.dragDirection;e.touches?(n=g?e.touches[0].pageX-m:d.left,i=f?e.touches[0].pageY-h:d.top,r=g?e.touches[0].pageX:l.left,s=f?e.touches[0].pageY:l.top):(n=g?e.pageX-m:d.left,i=f?e.pageY-h:d.top,r=g?e.pageX:l.left,s=f?e.pageY:l.top),this.dragDropService.currentDragElement.offset({left:n,top:i}),this.dragDropService.pointerPosition={left:r,top:s},this.dragDropService.scrollDragDropItemsContainer(this.dragDropService.pointerPosition.top,a.ns.SCROLLING_CONSTANTS.mouseInteractionDistanceToScroll),this.timeout.cancel(this.bbDragMoveTimeoutId),this.bbDragMoveTimeoutId=this.timeout(()=>{this.$rootScope.$broadcast("bb-drag-move")},t,150,!1)}constructor(e,t,n,r,s,o,a){this.$rootScope=e,this.bbLocalizeService=t,this.dragDropService=n,this.timeout=r,this.currentCourseService=s,this.contentService=o,this.menuCloserService=a,this.bbDragMoveTimeoutId=null,this.scope={dragItemId:"@",dragItemName:"@",dragItemType:"@",dragDirection:"@?",dragItemContext:"@?"},this.restrict="A",this.link=(e,t,n)=>{this.dragDirection=function(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}(e.dragDirection)||"vertical",this.dragDropService.currentDragContext=e.dragItemContext,f(t).parent().attr("role","application"),t.on("mousedown",n=>{function i(e){e.stopImmediatePropagation()}n.preventDefault(),document.addEventListener("click",i,!0),this.dragStart(n,t,e),f(document).on("mousemove.reorder",t=>{this.dragMove(t,e)}),f(document).on("mouseup.reorder",n=>{this.dragEnd(n,t),f(document).off("mousemove.reorder"),f(document).off("mouseup.reorder"),t.on("$destroy",()=>{document.removeEventListener("click",i,!0)}),this.timeout(()=>{document.removeEventListener("click",i,!0)},e,0,!1)})}),t.on("keydown",t=>{if(t.stopPropagation(),t.keyCode===l.K5||t.keyCode===l.L_){if(t.preventDefault(),this.dragDropService.isKeyboardDragging){let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-stopped",noWrap:!0});this.$rootScope.$broadcast(u.i_,t),f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-end")}else{this.dragDropService.isKeyboardDragging=!0,this.dragDropService.currentDragId=e.dragItemId,this.dragDropService.currentDragType=e.dragItemType,this.contentHasFolderChild(e),this.dragDropService.currentDropTargetId=e.dragItemId,this.dragDropService.positionBefore=e.dragItemId,f(document.body).addClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-start");let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-started",params:{itemName:e.dragItemName},noWrap:!0});this.$rootScope.$broadcast(u.i_,t)}}else if(t.keyCode===l.UP)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-up");else if(t.keyCode===l.WV)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-down");else if(t.keyCode===l.pX)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-right");else if(t.keyCode===l.RL)t.preventDefault(),this.$rootScope.$broadcast("keyboard-drag-left");else if(t.keyCode===l.hY&&(t.preventDefault(),this.dragDropService.isKeyboardDragging)){let t=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(e),key:"components.services.drag-drop.aria.reorder-canceled"});this.$rootScope.$broadcast(u.i_,t),f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel")}}),t.on("blur",()=>{this.dragDropService.isKeyboardDragging&&(f(document.body).removeClass("bb-is-dragging"),this.$rootScope.$broadcast("keyboard-drag-cancel"))});let r=n=>{this.dragStart(n,t,e)},s=t=>{this.dragMove(t,e)},o=e=>{this.dragEnd(e,t)},a=()=>{this.dragCancel()};t[0].addEventListener("touchstart",r,!1),t[0].addEventListener("touchmove",s,!1),t[0].addEventListener("touchend",o,!1),t[0].addEventListener("touchcancel",a,!1),e.$on("$destroy",()=>{t[0].removeEventListener("touchstart",r,!1),t[0].removeEventListener("touchmove",s,!1),t[0].removeEventListener("touchend",o,!1),t[0].removeEventListener("touchcancel",a,!1)})}}}v.$inject=["$rootScope",o.serviceName,a.HV,d.H,p.HV,m.HV,g.HV],s.module(b,[o.moduleName,a.e1,d.e,p.e1,m.e1,g.e1]).directive("bbDragHandle",["$injector",e=>e.instantiate(v)])},40750:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}});var i=n(464027),r=n(506971),s=n(676954),o=n(219809),a=n(555840),l=n(480489),c=n(786845),d=n(398321),u=n(817426),p=n(625506);let m="ultra.components.directives.bbDropHandler";class h{_keyboardMoveBelowThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.content().id):this.scope.nextContentId&&this.scope.nextContentId()===this.dragDropService.currentDragId?this.keyboardMoveDownToItem(this.scope.nextContentId()):(this.dragPosition=o.Pw.Bottom,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_keyboardMoveAboveThisItem(){this.scope.content().id===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.content().id):this.scope.previousContentId&&this.scope.previousContentId()===this.dragDropService.currentDragId?this.keyboardMoveUpToItem(this.scope.previousContentId()):(this.dragPosition=o.Pw.Top,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}_informScreenReaderOfNewLocation(){let e=this.element.find("[bb-drag-handle]").eq(0).attr("drag-item-name"),t="";if(""!==this.dragDropService.queuedScreenReaderMessages&&(t+=this.dragDropService.queuedScreenReaderMessages+" "),-1!==this.dragDropService.currentDropTargetId.indexOf("blank")){t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-only-item-in-folder",noWrap:!0}),this.$rootScope.$broadcast(c.i_,t),this.dragDropService.queuedScreenReaderMessages="";return}this.scope.previousContentId&&this.scope.previousContentId()||o.Pw.Top!==this.dragPosition&&o.Pw.Self!==this.dragPosition?this.scope.nextContentId&&this.scope.nextContentId()||o.Pw.Bottom!==this.dragPosition&&o.Pw.Self!==this.dragPosition||(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-end-of-list",noWrap:!0})+" "):t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-top-of-list",noWrap:!0})+" ",o.Pw.Self===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-self",noWrap:!0}):o.Pw.Folder===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-folder",params:{itemName:e},noWrap:!0}):o.Pw.Top===this.dragPosition?t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-above",params:{itemName:e},noWrap:!0}):o.Pw.Bottom===this.dragPosition&&(t+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-moved-below",params:{itemName:e},noWrap:!0})),this.$rootScope.$broadcast(c.i_,t),this.dragDropService.queuedScreenReaderMessages=""}_applyKeyboardPlaceholderAndStyling(){let e=this.dropTargetElement;o.Pw.Self===this.dragPosition?this.dropTargetElement.addClass(this.dragDropService.dragHoverClass):o.Pw.Folder===this.dragPosition?(this.dropTargetElement.before(this.dragDropService.currentDragElement),this.dragDropService.currentDragElement&&(1===this.scope.content().depth?this.dragDropService.currentDragElement.addClass(this.dragDropService.onFolderClass):2===this.scope.content().depth&&this.dragDropService.currentDragElement.addClass(this.dragDropService.onNestedFolderClass))):o.Pw.Bottom===this.dragPosition?(e=this.dragDropService.currentDragElement,this.dropTargetElement.after(this.dragDropService.currentDragElement)):o.Pw.Top===this.dragPosition&&(e=this.dragDropService.currentDragElement,this.dropTargetElement.before(this.dragDropService.currentDragElement)),this._scrollContainer(e)}_removeKeyboardPlaceholderAndStyling(){this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&(this.dragDropService.currentDragElement.removeClass(this.dragDropService.onFolderClass),this.dragDropService.currentDragElement.removeClass(this.dragDropService.onNestedFolderClass),this.dragDropService.currentDragElement.remove())}_scrollContainer(e){this.dragDropService.scrollDragDropItemsContainer(e.offset().top,o.ns.SCROLLING_CONSTANTS.keyboardInteractionDistanceToScroll)}_keyboardEndDragAndClearValues(){this.timeout(()=>{p('[bb-drag-handle][drag-item-id="'+this.dragDropService.currentDragId+'"]').focus(),this.dragDropService.clearDropTarget(),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dragDropService.isKeyboardDragging=!1},this.scope,0,!1)}isDropPreventedByContentDepthRules(){let e=()=>a.courseContent.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType);if(void 0!==this.dragDropService.currentDragHasFolderChild)return this.dragDropService.currentDragHasFolderChild.then(t=>e()&&(this.isDraggingOverFolder&&this.scope.content().depth===u.cY.getMaxCourseFolderDepth()||this.scope.content().depth>u.cY.getMaxCourseFolderDepth()||this.isDraggingOverFolder&&t));let t=this.$q.defer();return t.resolve(!1),t.promise}isDnDPreventedInDiscussionContext(){return d.m.Discussions===this.dragDropService.currentDragContext&&a.courseContent.ContentHandler.Folder.isEqualTo(this.dragDropService.currentDragType)&&(this.isDraggingOverFolder&&this.scope.content().depth===r.Vr||this.scope.content().depth>r.Vr)}dragOverFunc(e){if(this.dragDropService.currentDragId&&this.dragDropService.currentDragId!==this.scope.content().id){this.dragDropService.setDropTarget(this.scope.content().id),!this.folderHoverTimeout&&this.scope.isFolderOpen&&!1===this.scope.isFolderOpen()&&(this.dropTargetElement.addClass(this.dragDropService.dragHoverClass),this.folderHoverTimeout=this.timeout(()=>{this.isDropPreventedByContentDepthRules().then(e=>{e||this.isDnDPreventedInDiscussionContext()?(this.dragDropService.isShowingDepthMessage=!0,this.$rootScope.$broadcast("show-override-message",this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:this.dragDropService.folderDepthMessageKey}),this.scope.content().id)):(this.scope.$emit("toggle-folder-by-id",this.scope.content().id),this.wasFolderOpened=!0)})},this.scope,1500)),this.dragDropService.isShowingDepthMessage&&this.dragDropService.isNotSameDropTarget()&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());let t=this.element.offset().top+this.element.height()/2,n=this.dragPosition;this.isAFolder()&&(this.isDraggingOverFolder=!0),this.scope.content().id.indexOf("placeholder")>-1?(this.dragDropService.positionAfter=this.scope.content().parentId,this.dragDropService.positionBefore=void 0,this.dragPosition=o.Pw.Bottom):e<=t?(this.dragDropService.positionBefore=this.scope.content().id,this.dragDropService.positionAfter=void 0,this.dragPosition=o.Pw.Top):(this.dragDropService.positionAfter=this.scope.content().id,this.dragDropService.positionBefore=void 0,this.dragPosition=o.Pw.Bottom),(this.dragDropService.isNotSameDropTarget()||this.dragPosition!==n)&&(this._moveDropPlaceholderElement(),this.isEmptyTarget&&this.element.children().hide())}}_moveDropPlaceholderElement(){this.$rootScope.$broadcast("remove-placeholder"),this.dragDropService.currentDragId!==this.dragDropService.currentDropTargetId&&(this.dragDropService.positionBefore&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfNextItem?this.dropTargetElement.before(this.dragDropService.dropPlaceholderElement):(!(this.dragDropService.currentDropTargetId.indexOf("placeholder")>-1)||this.dragDropService.idOfNextItem!==this.dragDropService.currentDropTargetId)&&this.dragDropService.positionAfter&&this.dragDropService.currentDropTargetId!==this.dragDropService.idOfPreviousItem&&this.dropTargetElement.after(this.dragDropService.dropPlaceholderElement))}_isDroppingInSamePlace(){if(null!=this.dragDropService.positionAfter&&this.scope.previousContentId&&this.dragDropService.positionAfter===this.scope.previousContentId()||this.dragDropService.positionAfter===this.dragDropService.currentDragId||null!=this.dragDropService.positionBefore&&this.scope.nextContentId&&this.dragDropService.positionBefore===this.scope.nextContentId()||this.dragDropService.positionBefore===this.dragDropService.currentDragId)return!0}dropHandlerFunc(){this.timeout.cancel(this.folderHoverTimeout),this.dropTargetElement.parents("[data-parent-id]").last().removeAttr("style"),this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("remove-placeholder"),this.$rootScope.$broadcast("file-drag-restore"),this.dragDropService.isShowingDepthMessage&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage());let e={dragContentId:this.dragDropService.currentDragId,originalElement:this.dragDropService.originalElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};this.isDropPreventedByContentDepthRules().then(t=>{this._isDroppingInSamePlace()||this.isDnDPreventedInDiscussionContext()?this.dropCleanupFunc():!t&&this.isDraggingOverFolder?this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveIntoFolderHandler()(e),this.dropCleanupFunc()}):t?this.dropCleanupFunc():this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?(this.scope.onMoveHandler()(e),this.dropCleanupFunc()):this.scope.$apply(()=>{this.scope.onMoveHandler()(e),this.dropCleanupFunc()}),this.isDraggingOverFolder=!1})}dropCleanupFunc(){this.wasFolderOpened&&(this.wasFolderOpened=!1,this.scope.$emit("toggle-folder-by-id",this.scope.content().id)),this.dragDropService.currentDragId=void 0,this.dragDropService.currentDragType=void 0,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove()}dragLeaveFunc(){this.isDraggingOverFolder=!1,this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.timeout.cancel(this.folderHoverTimeout),this.folderHoverTimeout=void 0,this.isDropPreventedByContentDepthRules().then(e=>{e&&(this.dragDropService.isShowingDepthMessage=!1,this.broadcastShowOverrideMessage())})}broadcastShowOverrideMessage(){this.scope.$$phase||this.scope.$root&&this.scope.$root.$$phase?this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id):this.scope.$apply(()=>this.$rootScope.$broadcast("show-override-message",void 0,this.scope.content().id))}keyboardMoveUpToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-up-to-item",e)},this.scope)}keyboardMoveDownToItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-down-to-item",e)},this.scope)}keyboardMoveBelowItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-below-item",e)},this.scope)}keyboardMoveAboveItem(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-above-item",e)},this.scope)}keyboardMoveOntoFolder(e){this.timeout(()=>{this.dragDropService.clearDropTarget(),this.$rootScope.$broadcast("keyboard-move-onto-folder",e)},this.scope)}keyboardMoveIntoFolderAsLastItem(){let e=this.scope.content().children;e.length>0?this.keyboardMoveBelowItem(e[e.length-1].id):this.keyboardMoveBelowItem(this.scope.content().id+"blank")}keyboardMoveIntoFolderAsFirstItem(){let e=this.scope.content().children;e.length>0?this.keyboardMoveAboveItem(e[0].id):this.keyboardMoveAboveItem(this.scope.content().id+"blank")}isNotSameDropTarget(){return this.scope.content().id!==this.dragDropService.currentDragId}isOnSamePanel(){return this.element.closest(".panel-content").is(this.dragDropService.originalElement.closest(".panel-content"))}isEnabledForReordering(){return!(this.scope.disableForReordering&&this.scope.disableForReordering())}isAFolder(){return null!=this.scope.isFolderOpen}constructor(e,t,n,i,r,s,a,l){this.scope=e,this.element=t,this.$rootScope=i,this.$q=r,this.timeout=s,this.dragDropService=a,this.bbLocalizeService=l,this.isDraggingOverFolder=!1,this.isEmptyTarget="emptyTarget"in n,this.dropTargetElement=t.closest(this.dragDropService.dragElementSelector),e.$on("bb-drag-move",()=>{if(this.isEnabledForReordering()&&this.isNotSameDropTarget()&&this.isOnSamePanel()){let e=t.offset(),n=t.height()+e.top,i=t.width()+e.left;this.dragDropService.pointerPosition.left>=e.left&&this.dragDropService.pointerPosition.left<=i&&this.dragDropService.pointerPosition.top>=e.top&&this.dragDropService.pointerPosition.top<=n?this.dragOverFunc(this.dragDropService.pointerPosition.top):this.dragLeaveFunc()}}),e.$on("bb-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.dropHandlerFunc()}),t.on("drop",t=>{t.originalEvent.dataTransfer.files&&t.originalEvent.dataTransfer.files.length>0&&e.onFileDropHandler&&e.onFileDropHandler()(t.originalEvent.dataTransfer.files,e.content())}),e.$on("bb-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&(e.content().id===this.dragDropService.currentDragId&&(this.dragDropService.positionBefore=e.content().id),this.dropHandlerFunc())}),e.$on("keyboard-drag-start",()=>{this.isEnabledForReordering()&&e.content().id===this.dragDropService.currentDragId&&(this.dragPosition=o.Pw.Self,this.dragDropService.originalElement=t.closest(this.dragDropService.dragElementSelector),this.dragDropService.currentDragElement=this.dragDropService.originalElement.clone(),this.dragDropService.originalElement.addClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.addClass(this.dragDropService.movableElementClass),this.dragDropService.originalElement.addClass(this.dragDropService.dragHoverClass),this.dragDropService.setDropTarget(e.content().id))}),e.$on("keyboard-drag-end",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&this.isOnSamePanel()&&this.timeout(()=>{this.dragDropService.originalElement&&this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),o.Pw.Folder===this.dragPosition?this.dragDropService.positionAfter=e.content().id:o.Pw.Top===this.dragPosition?(this.dragDropService.positionBefore=e.content().id,this.dragDropService.positionAfter=null):(this.dragDropService.positionAfter=e.content().id,this.dragDropService.positionBefore=null),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.currentDragElement&&this.dragDropService.currentDragElement.remove(),this.isDropPreventedByContentDepthRules().then(t=>{if(!this.isDnDPreventedInDiscussionContext()&&!t&&!this._isDroppingInSamePlace()){let t={dragContentId:this.dragDropService.currentDragId,dragElement:this.dragDropService.currentDragElement,parentFolderId:this.scope.content().parentId,positionAfterId:this.dragDropService.positionAfter,positionBeforeId:this.dragDropService.positionBefore,rootScope:this.$rootScope,targetFolderId:this.scope.content().id};e.onMoveHandler()(t)}this._keyboardEndDragAndClearValues()})},e)}),e.$on("keyboard-drag-cancel",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._keyboardEndDragAndClearValues(),this.dropTargetElement.removeClass(this.dragDropService.dragHoverClass),this.dragDropService.originalElement.removeClass(this.dragDropService.originalElementClass),this.dragDropService.currentDragElement.remove())}),e.$on("keyboard-drag-up",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=o.Pw.Top),o.Pw.Self===this.dragPosition||o.Pw.Top===this.dragPosition?e.previousContentId&&e.previousContentId()?this.keyboardMoveUpToItem(e.previousContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveOntoFolder(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):o.Pw.Folder===this.dragPosition?this._keyboardMoveAboveThisItem():o.Pw.Bottom===this.dragPosition&&this.isDropPreventedByContentDepthRules().then(t=>{this.isAFolder()?!0===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsLastItem()):!1===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t&&this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveAboveThisItem()}))}),e.$on("keyboard-drag-down",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&(this._removeKeyboardPlaceholderAndStyling(),this.isEmptyTarget&&(this.dragPosition=o.Pw.Bottom),o.Pw.Self===this.dragPosition||o.Pw.Bottom===this.dragPosition?e.nextContentId&&e.nextContentId()?this.keyboardMoveDownToItem(e.nextContentId()):e.content().depth>1?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-leave-folder",noWrap:!0}),this.keyboardMoveBelowItem(e.content().parentId)):(this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):o.Pw.Folder===this.dragPosition?this.isDropPreventedByContentDepthRules().then(t=>{e.isFolderOpen&&!0===e.isFolderOpen()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!t?(this.dragDropService.queuedScreenReaderMessages+=" ",this.dragDropService.queuedScreenReaderMessages+=this.bbLocalizeService.translateSync({locale:this.bbLocalizeService.getLocale(this.scope),key:"components.services.drag-drop.aria.reorder-enter-folder",noWrap:!0}),this.keyboardMoveIntoFolderAsFirstItem()):this._keyboardMoveBelowThisItem()}):o.Pw.Top===this.dragPosition&&this.isDropPreventedByContentDepthRules().then(e=>{this.isAFolder()&&this.isNotSameDropTarget()&&!this.isDnDPreventedInDiscussionContext()&&!e?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem()}))}),e.$on("keyboard-drag-right",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&o.Pw.Folder===this.dragPosition&&e.isFolderOpen&&!1===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-drag-left",()=>{this.isEnabledForReordering()&&this.dragDropService.isCurrentDropTarget(e.content().id)&&o.Pw.Folder===this.dragPosition&&e.isFolderOpen&&!0===e.isFolderOpen()&&e.$emit("toggle-folder-by-id",e.content().id)}),e.$on("keyboard-move-up-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=o.Pw.Self,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.scope.isFolderOpen&&!0===this.scope.isFolderOpen()?this.keyboardMoveIntoFolderAsLastItem():(this.dragPosition=o.Pw.Folder,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-down-to-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),e.content().id===this.dragDropService.currentDragId?(this.dragPosition=o.Pw.Self,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation()):this.isAFolder()?this.keyboardMoveOntoFolder(this.scope.content().id):this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-above-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveAboveThisItem())}),e.$on("keyboard-move-below-item",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this._keyboardMoveBelowThisItem())}),e.$on("keyboard-move-onto-folder",(t,n)=>{this.isEnabledForReordering()&&e.content().id===n&&(this.dragDropService.setDropTarget(e.content().id),this.dragPosition=o.Pw.Folder,this._applyKeyboardPlaceholderAndStyling(),this._informScreenReaderOfNewLocation())}),e.$on("remove-placeholder",()=>{this.isEnabledForReordering()&&this.dragDropService.dropPlaceholderElement&&this.dragDropService.dropPlaceholderElement.remove(),this.isEmptyTarget&&this.element.children("bb-add-content-button").show()})}}h.$inject=["scope","element","attrs","$rootScope","$q",l.H,o.HV,s.serviceName];class g{constructor(e){this.$injector=e,this.scope={onMoveIntoFolderHandler:"&?",onMoveHandler:"&",onFileDropHandler:"&",isFolderOpen:"&?",content:"&",previousContentId:"&?",nextContentId:"&?",disableForReordering:"&?"},this.restrict="A",this.link=(e,t,n)=>{e.dropHandlerDirective=this.$injector.instantiate(h,{scope:e,element:t,attrs:n})}}}g.$inject=["$injector"],i.module(m,[o.e1,l.e]).directive("bbDropHandler",["$injector",e=>e.instantiate(g)])},294115:function(e,t,n){"use strict";n.d(t,{e1:function(){return d},s8:function(){return i}}),n(201915),n(3744);var i,r,s=n(625506),o=n(464027),a=n(728042),l=n(385847),c=n(676954);let d="ultra.components.directives.bbSortable";(r=i||(i={})).Horizontal="Horizontal",r.Vertical="Vertical";let u={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart(e,t,n,i){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),n(e,t)},triggerKey:l.K5,orientation:"Vertical",placeholderClass:"placeholder",moveKeyHandler:(e,t,n,i)=>{let r=t.options;if("Horizontal"===r.orientation){let t=r.isRTL?l.RL:l.pX,n=r.isRTL?l.pX:l.RL;i.keyCode===n?(i.stopPropagation(),e.insertBefore(e.prev(r.itemSelector)),e.find(r.handle).focus()):i.keyCode===t&&(e.insertAfter(e.next(r.itemSelector)),e.find(r.handle).focus(),i.stopPropagation())}else i.keyCode===l.UP?(i.stopPropagation(),e.insertBefore(e.prev(r.itemSelector)),e.find(r.handle).focus()):i.keyCode===l.WV&&(e.insertAfter(e.next(r.itemSelector)),e.find(r.handle).focus(),i.stopPropagation())},cancelHandler:(e,t,n,i,r)=>{let s=e.index();s>n?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+n+")")):s<n&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(n+1)+")"))},saveHandler:(e,t,n,i)=>{e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,n,i)}};class p{keyboardDragAndDrop(e,t){let n=s(e).find(t.sortableOptions.handle);return n.on("keyup",e=>{if(e.keyCode===t.sortableOptions.triggerKey){let n=s(e.target),i=n.closest(t.sortableOptions.itemSelector),r=i.parents(t.sortableOptions.containerSelector).last().data("sortable");i.hasClass(t.sortableOptions.placeholderClass)||(e.stopImmediatePropagation(),i.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(i,r),this.triggerAccessibilityMode(n,t))}}),n}triggerAccessibilityMode(e,t){let n,i,r;let o=e.closest(t.sortableOptions.itemSelector),a=o.parents(t.sortableOptions.containerSelector).last().data("sortable"),l=o.index(),c=()=>{s(document).off("click focusin",i),e.off("keydown",n),e.off("keyup",r),o.data("axHandlersAdded",!1),o.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(o,a)};n=e=>{t.sortableOptions.moveKeyHandler(o,a,s.noop,e)},i=n=>{s(n.target).is(e)||(c(),t.sortableOptions.cancelHandler(o,a,l,s.noop,n))},r=e=>{e.keyCode===t.sortableOptions.triggerKey&&(c(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(o,a,s.noop,e))},e.on("keyup",r),e.on("keydown",n),s(document).on("click focusin",i),t.$on("$destroy",c),o.data("axHandlersAdded",!0)}constructor(e){this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=(e,t,n)=>{let i=e.$watch("sortableOptions",()=>{e.sortableOptions=s.extend({},u,e.sortableOptions),e.sortableOptions.isRTL=this.localize.isRTL(e);let n=t.parents("[bb-sortable]");t.on("touchstart",e.sortableOptions.handle,e=>{s(e.target).trigger("click")}),0!==n.length?(n.sortable("destroy"),n.last().sortable(e.sortableOptions)):t.sortable(e.sortableOptions),t.find(e.sortableOptions.itemSelector).each((t,n)=>{this.keyboardDragAndDrop(s(n),e)}),a.Z.OnRootScope(e,"sortable-item-inserted",(t,n)=>{let i=this.keyboardDragAndDrop(n,e);n.hasClass(e.sortableOptions.placeholderClass)&&!n.data("axHandlersAdded")&&this.triggerAccessibilityMode(i,e)}),i()})}}}p.$inject=[c.serviceName],o.module(d,[c.moduleName]).directive("bbSortable",["$injector",e=>e.instantiate(p)])},390103:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}});var i=n(464027),r=n(703453),s=n(676954),o=n(983109),a=n(578953),l=n(555840),c=n(65783),d=n(480489),u=n(259197),p=n(446472),m=n(800684);let h="ultra.directives.bbCloudStorageIntegration";class g{onFileSelect(e){this.scope.$emit(r.GZ,e,this.scope.primaryKey&&this.scope.primaryKey()),this.scope.onFilesSelected&&this.scope.onFilesSelected(e)}getDownloadFileInfo(e){let t=(0,u.nMx)(e);return this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(t).$fetch({accessToken:this.accessToken}).$asPromise()}downloadFiles(e,t,n,i){let s={accessToken:this.accessToken,expand:"mimeType,isMedia"};this.scope.fileLocation&&(s.fileLocation=this.scope.fileLocation),this.scope.webLocation&&(s.webLocation=this.scope.webLocation),(n?this.CloudDriveTaskModel.$new(i||e.id):this.CloudDriveModel.$new("CloudStorageIntegration").contents.$new(i||e.id).download).$fetch(s).$then(n=>{if("COMPLETE"===n.status){let i=this.scope.$on(r.Ei,(s,o,a)=>{a!==r.mb.UploadProgressComplete||e.ui.fileId&&o!==e.ui.fileId||(this.attachHandler(n,e,t),i())})}else this.timeout(()=>{this.downloadFiles(e,t,!0,n.taskId)},this.scope,2e3);(n.completePercentage<100||"COMPLETE"===n.status)&&this.scope.$root.$broadcast(r.Ei,e.ui.index,n.completePercentage,null,r.mb.UpdateProgress,e.inProgressFileId,e.ui.targetDiv,e.ui.fileId)},t=>{this.displayUploadError(),this.scope.$root.$broadcast(r.Ei,e.ui.fileId,e,r.mb.Error,e.ui.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.$exceptionHandler(t,"source")})}attachHandler(e,t,n){let i=this.$q.defer(),r={fileName:null,fileLocation:null};return e&&(r.fileName=e.fileName,r.fileLocation=e.fileLocation,r.webLocation=e.webLocation,r.mimeType=e.mimeType,r.isMedia=e.isMedia),this.scope.attachHandler(r,t,this.scope.isUploadMultipleFiles,void 0,n).then(e=>{i.resolve(e)},e=>{i.reject(e)}),i.promise}displayUploadError(){this.$modal.open({template:p,scope:this.scope})}constructor(e,t,n,i,r,s,o,a){this.scope=e,this.$q=t,this.$exceptionHandler=n,this.bbLocalize=i,this.$modal=r,this.CloudDriveModel=s,this.CloudDriveTaskModel=o,this.timeout=a,this.bbLocalize.loadBundle("components/directives/cloudStorageIntegration")}}g.$inject=["scope","$q","$exceptionHandler",s.serviceName,c.HV,l.Os.H,l.xd.H,d.H];class f{constructor(e,t,n,r,s){this.$injector=e,this.$q=t,this.$modal=n,this.CloudDriveService=r,this.bbLocalize=s,this.scope={attachHandler:"=",isFlatten:"=?",primaryKey:"&?",primaryKeyValue:"@?",fileLocation:"@?",webLocation:"@?",disableClick:"&?",allowMultiple:"=?",onFilesSelected:"=?",onCancelFocus:"=?"},this.restrict="A",this.link=(e,t,n)=>{let r=this;e.cloudStorageIntegration=this.$injector.instantiate(g,{scope:e}),e.folderBranchCounts=0,e.isInitialized=!!r.CloudDriveService.cloudDriveStorage,e.isInitialized||r.CloudDriveService.initializeCloudDrive();let s=function(t){let n=[];if(t&&t.length>0){for(let i=0;i<t.length;i++)n.push(e.cloudStorageIntegration.getDownloadFileInfo(t[i]));r.$q.all(n).then(t=>{r.CloudDriveService.isGettingFilesInfo=!1,e.cloudStorageIntegration.onFileSelect(t),t.length>1&&(e.isUploadMultipleFiles=!0)},()=>{r.CloudDriveService.isGettingFilesInfo=!1})}};t.on("click",()=>{if((!e.disableClick||!e.disableClick())&&e.isInitialized){let n=this.bbLocalize.getLocale(e);r.CloudDriveService.cloudDriveStorage.openFilePicker(n,e.allowMultiple).then(n=>{if((n||[]).length>0){if(!n[0]||!n[0].bearer_token||!n[0].bearer_token.key){this.$modal.open({template:m,scope:e});return}e.cloudStorageIntegration.accessToken=n[0].bearer_token.key,r.CloudDriveService.isGettingFilesInfo=!0,i.isDefined(e.allowMultiple)&&!1===e.allowMultiple&&n.length>1?s([n[0]]):s(n)}else e.onCancelFocus?e.onCancelFocus():t.focus()}),e.$on("$destroy",()=>{r.CloudDriveService.isGettingFilesInfo=!1,t.off("click")})}}),e.$on("downloadFile",(t,n,i)=>{n.ui.primaryKey===(e.primaryKey&&e.primaryKey())&&n.file.$url().indexOf("CloudStorageIntegration")>=0&&e.cloudStorageIntegration.downloadFiles(n,i)})}}}f.$inject=["$injector","$q","$modal",o.HV,s.serviceName],i.module(h,[s.moduleName,o.e1,a.e,c.e1,d.e]).directive("bbCloudStorageIntegration",["$injector",e=>e.instantiate(f)])},116468:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}});var i=n(276635),r=n(464027),s=n(232085),o=n(385847),a=n(480489),l=n(963849),c=n(728042);let d="ultra.components.directives.dropdown";class u{selectItem(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})}getRole(){return"menu"===this.scope.listKind?"menu":"listbox"}clickItem(){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,this.scope.clickFunction({item:this.selectedItem}))}useNativeSelect(){return!this.scope.forceCustomDropdown&&this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind}isUserCourseAvailable(e){let t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])}shouldHaveBlankOption(e){return this.isIos&&"group"===e}constructor(e,t,n,a){if(this.scope=e,this.element=t,this.$window=n,this.timeout=a,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=()=>{let e=this.element.offset().top,t=r.element(this.$window).height(),n=34;"avatar-list"===this.scope.listKind&&(n=57);let i=Math.max(Math.floor((this.scope.forceAbove?e:t-e)/n),2);this.scope.simplifiedMaxItemsPerPage&&this.scope.simplifiedMaxItemsPerPage()>0&&(i=Math.min(i,this.scope.simplifiedMaxItemsPerPage())),this.element.find(".dropdown-directive").css({maxHeight:n*i+2})},this.element.addClass("bb-dropdown"),this.isMobile=!s.Z.detect().desktop(),this.isIos=s.Z.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",e=>{this.selectedItem=e}),!this.useNativeSelect()){let t;this.element.on("keyup",e=>{(e.keyCode===o.K5||e.keyCode===o.L_)&&e.stopPropagation()}),this.element.on("opened.fndtn.dropdown",()=>{this.setMaxHeight(),this.scope.$applyAsync(),t=c.Z.OnWindow("resize",i.debounce(this.setMaxHeight,this.RESIZE_DELAY),e),(this.scope.onOpen||r.noop)()}),this.element.on("closed.fndtn.dropdown",()=>{t(),(this.scope.onClose||r.noop)()})}}}u.$inject=["scope","element","$window",a.H];class p{constructor(e){this.$injector=e,this.restrict="E",this.template=l,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",forceCustomDropdown:"=?",analyticsIdTagPrefix:"@?"},this.link=(e,t,n,i,r)=>{e.dropdown=this.$injector.instantiate(u,{scope:e,element:t})}}}p.$inject=["$injector"];class m{constructor(e){this.$injector=e,this.restrict="EA",this.link=(e,t,n,i,r)=>{"custom"===e.listKind||"region"===e.listKind||"menu"===e.listKind?r((n,i)=>{i.dropdown=e.dropdown,t.replaceWith(n)}):t.remove()}}}m.$inject=["$injector"],r.module(d,[a.e]).directive("bbDropdown",["$injector",e=>e.instantiate(p)]).directive("bbDropdownTransclude",["$injector",e=>e.instantiate(m)])},73205:function(e,t,n){"use strict";n.d(t,{GD:function(){return c},e1:function(){return l}});var i=n(464027),r=n(362767),s=n(676954),o=n(553374),a=n(357323);let l="ultra.directives.bbDuration",c="refresh.relative.dates";class d{needAgo(){return!!(this.scope.hasAgo&&this.scope.hasAgo()&&this.lessThanOneDay)}separateDatetime(){return!!(this.scope.separateDatetime&&this.scope.separateDatetime())}_localizeRelativeDate(){if(this.scope.date){let e={},t=new Date,n=this.scope.isRelativeToServerDate&&this.scope.isRelativeToServerDate();(null==n||n)&&(e={relativeTo:this.bbContext.getServerTime()},t=this.bbContext.getServerTime());let i=t.getTime()-this.scope.date.getTime();if(i>=6e4&&this.scope.date.setSeconds(30),this.lessThanOneDay=i<=864e5,this.needAgo()||this.separateDatetime()){let t=this.bbLocalize.getFormatEnum(s.ILocaleDateFormat,this.scope.dateFormat)||s.ILocaleDateFormat.Short;this.bbLocalize.formatDuration(this.scope.date,this.scope,e,t).then(e=>{this.date=e.date||"",this.time=e.time||""})}}}constructor(e,t,n,i){this.scope=e,this.bbContext=t,this.bbLocalize=n,this.interval=i,this.date="",this.time="",this.lessThanOneDay=!1;let r=e.$watch("date",()=>{this._localizeRelativeDate(),e.autoUpdate&&!e.autoUpdate()&&e.date&&r()});e.$on(c,()=>{this._localizeRelativeDate()}),this.interval(()=>{this._localizeRelativeDate()},this.scope,d.DEFAULT_REFRESH_INTERVAL)}}d.DEFAULT_REFRESH_INTERVAL=18e4,d.$inject=["scope",r.HV,s.serviceName,o.H];class u{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=a,this.scope={date:"=",autoUpdate:"&?",isRelativeToServerDate:"&?",dateFormat:"@?",hasAgo:"&?",separateDatetime:"&?"},this.link=e=>{e.duration=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(l,[r.e1,s.moduleName,o.e]).directive("bbDuration",["$injector",e=>e.instantiate(u)])},431202:function(e,t,n){"use strict";n.d(t,{QM:function(){return u},yf:function(){return p}});var i=n(464027),r=n(676954),s=n(808361),o=n(385847),a=n(351876),l=n(302032),c=n(817426);function d(e,t){return function(n,i){t(n,i,e)}}let u="text-editor-update-original-value";class p{isEditorDirty(){return this.isTextTouched}getContentLabel(){let e=this.getPlaceholderKey();return this.truncatedViewValue||e}getPlaceholderKey(){return(this.scope.placeholderAttrsValues!==this.originalPlaceholderAttrValues||null==this.placeholderText)&&(this.placeholderText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.scope.placeholderKey,params:this.scope.$eval(this.scope.placeholderAttrsValues)}),this.originalPlaceholderAttrValues=this.scope.placeholderAttrsValues),this.placeholderText}get truncatedViewValue(){return this._truncatedViewValue}set truncatedViewValue(e){let t=this.element.find(".editor-element"),n=t.length?t.text():void 0;this._truncatedViewValue=(0,c.zs)(n,100)}onChange(e){(!e||e.keyCode!==o.Mf)&&this.scope.hasFocus&&(this.isTextTouched=!0,this.scope.onchangeFunc&&this.scope.onchangeFunc({event:e}))}onKeydown(e){}isUploadProgressModalOpen(){let e=i.element(".progress-indicator-modal");return e&&e.length>0}isAddContentSelectorOpened(){return this.bbUltraState.current.name.length>this.currentStateName.length&&a.Ny(this.bbUltraState.current.name,this.currentStateName)}onBeforeBlur(){return!this.preventBlur&&!this.scope.disableInlineEditing}onBlur(){return this.scope.hasFocus=!1,this.ctrl.$focused=!1,this.scope.onblurFunc&&this.scope.onblurFunc(),!0}onFocus(){this.focusOnAuthorControls=!1,this.scope.readonly()||this.scope.hasFocus||(this.scope.hasFocus=!0,this.ctrl.$focused=!0,this.scope.onFocusFunc&&this.scope.onFocusFunc(),this.scope.$emit("entering-edit-state"))}isDirty(){return!(this.originalText||this.isTextTouched)}updateOriginalValues(){this.scope.ngModel===this.originalNgModel&&(this.originalText=this.scope.ngModel,this.originalPlainText=this.scope.plainText)}restoreFromOriginalValues(){this.originalText||(this.originalText="",this.originalPlainText=""),this.scope.ngModel=this.originalText,this.scope.plainText=this.originalPlainText}resetEditor(e){this.restoreFromOriginalValues()}isValidInputLength(){let e=null;if(null!=this.scope.getInputMaxLength&&(e=this.scope.getInputMaxLength()),null==e)return!0;if(e){let t=this.scope.plainText;return!!t&&t.trim().length<=e}return!0}constructor(e,t,n,i,r){this.scope=e,this.element=t,this.ctrl=n,this.bbLocalize=i,this.bbUltraState=r,this.focusOnAuthorControls=!1,this.isTextTouched=!1,this.myDirection="down",this.preventBlur=!1,this.currentStateName=r.current.name,e.disableInlineEditing=null!=e.disableInlineEditing&&e.disableInlineEditing,this.scope.$stopDigestPropagation=!0,this.originalNgModel=this.scope.ngModel,e.direction&&null!=e.direction()&&(this.myDirection=e.direction());let s=!(this.scope.ngModel&&this.scope.ngModel.length);e.$emit("text-editor-empty",{textEditor:this,isEmpty:s}),e.$root.$on("bb-bbml-editor-bbml-pre-redraw",()=>{this.updateOriginalValues()}),e.$on("text-editor-set-pristine",()=>{this.isTextTouched=!1}),e.$on("text-editor-viewValue-initialized",()=>{this.truncatedViewValue=this.ctrl.$viewValue}),e.$on("text-editor-reset-to-original-value",()=>{this.isDirty()&&this.updateOriginalValues(),this.resetEditor(!1)}),e.$on(u,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),e.$on("$destroy",()=>{this.isTextTouched=!1})}}p=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,l.tB)("scope")),d(1,(0,l.tB)("element")),d(2,(0,l.tB)("ctrl")),d(3,(0,l.tB)(r.serviceName)),d(4,(0,l.tB)(s.HV))],p)},979377:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}});var i=n(59603),r=n(464027),s=n(410704),o=n(676954),a=n(808361),l=n(385847),c=n(610624),d=n(431202),u=n(302032);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.directives.basicTextEditor";class h extends d.yf{onKeydown(e){this.shouldPreventLineBreaking&&e.keyCode===l.K5&&(e.stopPropagation(),e.preventDefault())}constructor(e,t,n,i,r,s){super(t,n,i,r,s),this.shouldPreventLineBreaking=!0,t.$on(d.QM,()=>{this.updateOriginalValues(),this.isTextTouched=!1}),t.shouldPreventLineBreaking&&(this.shouldPreventLineBreaking=t.shouldPreventLineBreaking())}}h.$inject=[],h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,u.tB)("$q")),p(1,(0,u.tB)("scope")),p(2,(0,u.tB)("element")),p(3,(0,u.tB)("ctrl")),p(4,(0,u.tB)(o.serviceName)),p(5,(0,u.tB)(a.HV))],h);class g{constructor(e){this.$injector=e,this.require=["ngModel"],this.replace=!0,this.restrict="E",this.scope={placeholderKey:"@",placeholderAttrsValues:"@",elementId:"@",readonly:"&",getInputMaxLength:"&?inputMaxLength",onchangeFunc:"&?",onblurFunc:"&?",onFocusFunc:"&",ngModel:"=",fieldRequired:"&?",plainText:"=?",validationMessage:"@?",focusOn:"@?",noValidationMessage:"&?",direction:"&?",shouldPreventLineBreaking:"&?"},this.link=(e,t,n,i)=>{let r=i[0];e.textEditor=this.$injector.instantiate(h,{scope:e,element:t,ctrl:r}),e.elementId||(e.elementId="text-editor-"+c.d())},this.template=i}}g.$inject=["$injector"],r.module(m,[s.e1,o.moduleName,a.e1]).directive("bbBasicTextEditor",["$injector",e=>e.instantiate(g)])},603363:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),r=n(658895),s=n(625506),o=n(363411);let a="ultra.components.directives.featureToggle";class l{constructor(e,t){this.$parse=e,this.flagService=t,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=(e,t,n,i,o)=>{let a=!1,l=n.bbFeatureToggle.startsWith("!"),c=l?n.bbFeatureToggle.substring(1):n.bbFeatureToggle,d=s(document.createComment(`end bbFeatureToggle: ${n.bbFeatureToggle}`)).insertAfter(t),u="false"!==n.delayInitialLoad,p=!1,m=()=>{var e,i;p=!0;let s=l?!a:a,c=(null==n?void 0:null===(e=n.prototypeContent)||void 0===e?void 0:e.toLowerCase())==="true";(r.default.showFeaturePrototypes||!c)&&((null==n?void 0:null===(i=n.removeFromDom)||void 0===i?void 0:i.toLowerCase())==="true"?(g(t.parent(),t,d),s&&o(e=>{h(e,t.parent(),t)})):o(e=>{s||e.addClass("bb-feature-toggle-hide"),g(t.parent(),t,d),h(e,t.parent(),t)}))},h=(e,t,n)=>{0!==n.parent().length?n.after(e):t.prepend(e)},g=(e,t,n)=>{let i=e.contents(),r=i.index(t)+1,s=i.index(n);r<s&&i.slice(r,s).remove()};e.$on("feature-flag-values-updated",(e,t)=>{let n=null==t?void 0:t[c],i=this.flagService.isFlagValueTrueStrict(n),s=u&&!p;n&&void 0!==i&&(s||i!==a)&&(a=r.default.features[c]||i,m())});let f=r.default.features[c]||this.flagService.isFeatureEnabledStrict(c);void 0===f&&u||(a=null!=f&&f,m())}}}l.$inject=["$parse",o.HV],i.module(a,[o.e1]).directive("bbFeatureToggle",["$injector",e=>e.instantiate(l)])},703453:function(e,t,n){"use strict";n.d(t,{WO:function(){return Q},Qk:function(){return Z},mb:function(){return s},GZ:function(){return K},Ei:function(){return W},e1:function(){return z}}),n(160839),n(914602),n(411850);var i,r,s,o,a=n(276635),l=n(625506),c=n(464027),d=n(986709),u=n(129609),p=n(676954);n(388634);var m=n(553374),h=n(346936),g=n(414353),f=n(40801);let b="ultra.directives.bbProgress";class v{cancelUploadFile(e){e.content&&this.scope.$root.$broadcast(W,e.content,s.DeleteContent),e.interval&&this.interval.cancel(e.interval);let t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(W,e.id,t,s.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}remove(e){a.remove(this.scope.inProgressFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId):!!e.ui&&!!e.ui.id&&t.id===e.ui.id&&this.isIdentifierInProgressFile(t.inProgressFileId,e.inProgressFileId)),this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,0,e.id,s.Cancel,this.scope.primaryKey&&this.scope.primaryKey())}isIdentifierInProgressFile(e,t){return!e||!t||e===t}transformModelForDisplay(e){return{barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,inProgressFileId:e.inProgressFileId||"",interval:null,ui:e.ui}}getProgressIdAttr(e){return e.inProgressFileId?`file-progress-${e.barId}-${e.inProgressFileId}`:`file-progress-${e.barId}`}setProgress(e,t,n,i){let r,o,l,c,d;if(n){d=a.find(this.scope.inProgressFiles,e=>e.file.id===n&&this.isIdentifierInProgressFile(e.inProgressFileId,i));let e=this.scope.targetDiv?`-${i}`:"",t=`#file-progress-${n.replace(/\D/g,"")}${e}`;c=this.scope.element.find(t+" .progress-circle .bar"),l=this.scope.element.find(t+" .processing-spinner .canvas")}else{d=this.scope.inProgressFiles.find(t=>t.id===e&&this.isIdentifierInProgressFile(t.inProgressFileId,i));let t=this.scope.inProgressFiles.indexOf(d);c=this.scope.element.find(".progress-circle-svg .bar").eq(t),l=this.scope.element.find(".processing-spinner .canvas").eq(t)}if(!d||d.currentProgress>=t)return;null!=d.interval&&this.interval.cancel(d.interval);let u=d.currentProgress;d.interval=this.interval(()=>{d&&(d.currentProgress++,o=(r=c.attr("stroke-dashoffset"))-.01*d.currentProgress*r,c.css({strokeDashoffset:o+"px"}),100===d.currentProgress&&(d.isProcessing||(this.spinner.initInlineLoader(l,this.processingSpinnerArgs).start(),d.isProcessing=!0),n?this.scope.$root.$broadcast(W,n,s.UploadProgressComplete):this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,this.scope.inProgressFiles.indexOf(d),e,s.UploadProgressComplete),this.interval.cancel(d.interval)))},this.scope,20,t-u)}constructor(e,t,n,i,r){this.scope=e,this.bbLocalize=t,this.interval=n,this.$q=i,this.spinner=r,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=(e,t,n)=>{e.stopImmediatePropagation(),e.preventDefault();let i=this.scope.inProgressFiles.filter(e=>e.id===t&&this.isIdentifierInProgressFile(e.inProgressFileId,n))[0];this.cancelUploadFile(i)},this.scope.$on("cancel-upload-all",e=>{this.scope.inProgressFiles.forEach(e=>{this.cancelUploadFile(e)})})}}v.$inject=["scope",p.serviceName,m.H,"$q",h.HV];class y{constructor(e,t,n){this.$injector=e,this.interval=t,this.bbLocalize=n,this.template=f,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=(e,t,n)=>{e.element=t,e.progress=this.$injector.instantiate(v,{scope:e}),e.progress.progressId=n.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(W,(n,i,r,o,a)=>{if(null!=r&&(null!=r.content&&r.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===r.progressId||e.targetDiv&&e.targetDiv===a)){if(o!==s.Uploading||r.content){if(o===s.Uploaded)e.progress.displayResults||e.progress.remove(r);else if(o===s.Error)e.progress.remove(r);else if(o===s.CommenceUpload){if(null!=r.content){if(e.fileUploadDivId=i,t.attr("id")===r.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(r));let n=this.interval(()=>{t.find(".progress-circle").length>0&&(e.$root.$broadcast(W,i,r,s.ProgressRenderComplete),this.interval.cancel(n))},e,100,10)}}else r.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(r)),e.$root.$broadcast(W,i,r,s.ProgressRenderComplete))}else o===s.Cancel&&e.progress.remove(r)}else if(e.fileUploadDivId=i,e.inProgressFiles.push(e.progress.transformModelForDisplay(r)),e.progress.displayResults){e.lastPiesRendered=0;let n=this.interval(()=>{let o=t.find(".progress-circle").length;if(o>e.lastPiesRendered){for(let t=e.lastPiesRendered;t<e.lastPiesRendered+o;t++)e.$root.$broadcast(W,i,t,e.inProgressFiles[t].id,s.ProgressRenderComplete,r.inProgressFileId),this.interval.cancel(n);this.interval.cancel(n)}e.lastPiesRendered=o},e,100,10)}else e.$root.$broadcast(W,i,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,s.ProgressRenderComplete,r.inProgressFileId,e.targetDiv)}}),e.$on(W,(t,n,i,r,o,a,l,c)=>{(l&&l===e.targetDiv||r&&r.attr&&r.attr("id")===e.element.attr("id")&&o===s.UpdateProgress)&&e.progress.setProgress(n,i,c,a)}),e.progress.displayResults=!0,e.$watch("::displayResults",t=>{e.progress.displayResults=t})}}}y.$inject=["$injector",m.H,p.serviceName],c.module(b,[g.e]).directive("bbProgress",["$injector",e=>e.instantiate(y)]);var S=n(658895),C=n(983109),E=n(852127),I=n(196636),w=n(65783),A=n(555840),k=n(480489),T=n(478459),P=n(808361),D=n(473011),x=n(786845),R=n(891886),L=n(603094),N=n(794815),$=n(866010),O=n(690874),G=n(305608),_=n(97288),M=n(5207),B=n(395577),F=n(901411),U=n(893581),V=n(92589),H=n(490620),q=n(817426),j=n(259197);let z="ultra.directives.bbFileUpload",W="bbFileUpload",K="thirdPartyFileSelectedEvent",Z="fileSelected",Q="dismissUploadModalEvent";(i=s||(s={})).AllUploadsCompleted="allUploadsCompleted",i.AssignDropTarget="assignDropTarget",i.Cancel="cancel",i.CommenceUpload="commenceUpload",i.ContentCreated="contentCreated",i.Delete="delete",i.DeleteContent="deleteContent",i.Error="error",i.File="file",i.FileDrop="fileDrop",i.Folder="folder",i.LinkProgress="linkProgress",i.OutlineAddContentButtonFileSelected="outlineAddContentButtonFileSelected",i.ProgressRenderComplete="progressRenderComplete",i.UpdateFileTypes="updateFileTypes",i.UpdateProgress="updateProgress",i.Uploaded="uploaded",i.Uploading="uploading",i.UploadProgressComplete="uploadProgressComplete",(r=o||(o={})).General="components.directives.fileUpload.errorFull",r.Security="components.directives.fileUpload.errorSecurity";class J{static generateTempFileId(){return`${Math.floor(1e4*Math.random())}-${Math.floor(1e4*Math.random())}`}}class Y{getContentOutlineCloudKey(e,t){let n=t||this.scope.cloudUploadSelectedContentId;if(n)return`${e?"#progress":"progress"}${n}`}throwModalForNonFileUpload(){this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.catch(e=>{this.notifyUploadCancelled(),this.resetFileInput()})}endsWith(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length}getUploadingFileIndexById(e,t){let n=this.uploadingFiles.filter(n=>n.id===e&&this.validateIdentifier(n.inProgressFileId,t))[0];return this.uploadingFiles.indexOf(n)}isFolder(e){let t=this.$q.defer();if("directory"===e.type)t.resolve(!0);else if(e instanceof Blob){let n=new FileReader;n.onload=()=>{1===n.readyState&&n.abort(),t.resolve(!1)},n.onerror=()=>{this.isLikelyAFile(e)&&(this.displayUploadError(),this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,e,"error",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),t.reject()),t.resolve(!0)},n.readAsText(this.sliceFileHelper(e))}else t.resolve(!1);return t.promise}sliceFileHelper(e){return e.slice(0,1)}isZipFile(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()}isLikelyAFile(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)}loadTranslations(){this.bbLocalize.loadBundle("components/directives/file-upload").then(()=>{this.browserFolderWarning=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.browserFolderWarning"}),this.cancelUploadText=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.cancelUploadText"}),this.unknownMimeType=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.unknownMimeType"}),this.uploaded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploaded"}),this.uploading=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.uploading"})})}notifyUploadCancelled(){this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,null,"cancel",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}removeUploadingFile(e){a.remove(this.uploadingFiles,t=>t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.inProgressFileId&&e.inProgressFileId?t.ui.fileId===e.ui.fileId&&t.inProgressFileId===e.inProgressFileId:t.ui.fileId===e.ui.fileId:t.inProgressFileId&&e.inProgressFileId?e&&t.fileName===e.fileName&&t.inProgressFileId===e.inProgressFileId:e&&t.fileName===e.fileName),delete this.uploadsInProgress[e.id]}resetFileInput(){let e=l(document.body).find(".fileUploadInput");for(let t=0;t<e.length;t++)e.eq(t)[0].value=""}registerRouterStateChangeEventHandlers(){this.scope.$on("$stateChangeStart",(e,t,n,i,r)=>{i.name===t.name||t.name===this.initialState||this.isStateIgnored(i,t)||this.confirmLeaveDuringUpload(e,t,n)})}isStateIgnored(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates()){for(let n of this.scope.ignoredStates())if(e.name.indexOf(n)>=0||t.name.indexOf(n)>=0)return!0}return!1}setUploadDate(){this.bbLocalize.formatDatetime(new Date,p.ILocaleDatetimeFormat.Short).then(e=>{this.uploadDate=e})}validateFiles(e){if(""===this.allowedFileTypes)return e;let t=[],n=!1;this.allowedFileTypes.indexOf("/")>0?(n=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");let i=[];for(let r=0;r<e.length;r++){let s=e[r];if(n){let e=[];e[0]=s.type.substr(0,this.allowedFileTypes.indexOf("/")),e[1]=s.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]===e[0]&&(t[1]===e[1]||"*"===t[1])&&i.push(s)}else for(let e=0;e<t.length;e++)if("."!==t[e].charAt(0)&&(t[e]="."+t[e]),this.endsWith(s.name.toLowerCase(),t[e])){i.push(s);break}}return i}validateUploadFileSizes(e){var t,n;if(this.currentUploadCount=0,this.oversizedFiles=[],this.allowOversizedFiles)return e;let i=null!==(t=this.scope.fileUploadSettings.maxUploadSizeInBytes)&&void 0!==t?t:d.u4M,r=null!==(n=this.scope.fileUploadSettings.customFileUploadSettings)&&void 0!==n?n:[];return this.oversizedFiles=j.udf.filterOversizedFiles(e,r,i),this.oversizedFiles&&(this.filesGroupedByUploadLimit=j.udf.groupExceedingUploadLimitFiles(this.oversizedFiles,r,i)),j.udf.filterValidSizedFiles(e,r,i)}abortUpload(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]}abortAllUploads(){Object.keys(this.uploadsInProgress).forEach(e=>this.abortUpload(e))}validateIdentifier(e,t){return!e||!t||e===t}constructor(e,t,n,i,r,s,o,d,u,m,h,g,f,b,v,y,C,E,I){if(this.scope=e,this.element=t,this.attrs=n,this.contextCourseMembership=i,this.bbLocalize=r,this.cloudDrive=s,this.interval=o,this.$modal=d,this.$http=u,this.timeout=m,this.$compile=h,this.Upload=g,this.ultraState=f,this.FileUtilityFactory=b,this.errorModal=v,this.toast=y,this.$q=C,this.contextUser=E,this.$sceService=I,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.allowOversizedFiles=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.oversizedFiles=[],this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=(e,t)=>{let n=this.getUploadingFileIndexById(e,t);this.scope.isThirdPartyUpload&&n>=0?this.uploadingFiles.splice(n,1):this.uploadsInProgress[e]&&n>=0&&(this.abortUpload(e),this.aborted=!0,this.originalUploadCount--,this.resetFileInput(),n>=0&&this.uploadingFiles.splice(n,1),(!this.allowMultiple||0===this.model.files.length)&&this.hideTranscludeDuringUpload&&(this.fileReviewVisible=!1,this.transcludeVisible=!0)),this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)},this.updateModel=(e,t,n,i,r)=>{let s=e.mimeType?e.mimeType:n,o=this.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:s,fileSize:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:o.sizeLabel,size:parseFloat(o.size.toFixed(2)).toString()}}),rawFileSize:t.size,isMedia:e.isMedia,uploadDate:this.uploadDate,targetClass:i,ui:{position:r}};return this.allowMultiple?this.model.files.push(a):this.model.files[0]=a,this.model.fileLocation=e.fileLocation,this.currentFileName=a.fileName,a},this.success=(e,t)=>{this.currentUploadCount--,this.model.files=[],this.currentUploadCount<=0&&(this.oversizedFiles.length&&this.openMaxSizeWarning(),this.scope.$root.$broadcast(W,"allUploadsCompleted",null,null,null,this.scope.primaryKey&&this.scope.primaryKey())),"/v1/files"===this.attrs.url&&this.useDefaultSuccessMethod&&this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)},this.displayUploadError=e=>{this.scope.errorModalErrorKey=null!=e?e:"components.directives.fileUpload.errorFull",this.modalInstance=this.$modal.open({template:U,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(()=>{},()=>{this.resetFileInput(),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!0)})},this.getMoreSupportURL=()=>this.contextCourseMembership.isStudentOrGuestMembership()||this.contextUser.userModel.isStudent()||this.contextUser.userModel.isGuest()?"http://help.blackboard.com/001_563en_US":"http://help.blackboard.com/001_562en_US",this.progress=(e,t,n)=>{this.scope.$root.$broadcast(W,e,t,n,"updateProgress",void 0,this.scope.targetDiv)},this.conductUpload=(e,t,n)=>{let i,r,s=0;if(r=n?this.uploadingFiles.filter(e=>e.id===n)[0]:this.uploadingFiles.filter(t=>t.ui.primaryKey===e.ui.primaryKey)[0],i=e.targetElement?e.targetElement:this.scope.targetElement,this.scope.isThirdPartyUpload)e&&(e.ui.index=t,e.ui.position=this.scope.position&&this.scope.position(),e.ui.targetDiv=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,this.scope.thirdPartyDownloadHandler(e),this.oversizedFiles.length&&this.openMaxSizeWarning());else{let n=D.mg()+S.default.apiBasePath+"/v1/files?expand=mimeType,isMedia";this.scope.fileLocation&&(n=n+"&fileLocation="+this.scope.fileLocation),this.scope.webLocation&&(n=n+"&webLocation="+this.scope.webLocation),this.scope.extraParams&&(n=n+"&"+a.map(this.scope.extraParams(),(e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).join("&")),this.uploadsInProgress[r.id]=this.Upload.upload({url:n,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress(e=>{100!==(s=parseInt((100*e.loaded/e.total).toString(),10))?r.currentProgress=s:r.currentProgress<100&&(r.currentProgress=99),this.progress(r.id,s,i)}).success((n,i,s,o)=>{let a=this.interval(()=>{if(100===r.currentProgress||0===r.currentProgress){let i=this.updateModel(n,e.file,e.currentMimeType,e.targetClass,this.scope.position&&this.scope.position());if(i.ui.originFileName=e.fileName,this.success(i,t),this.successfulUploadCount++,this.removeUploadingFile(e),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?0===this.failedUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),this.scope.$root.$broadcast(x.i_,e)}i.ui.id=e.id,null!=e.content?this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,e.content,i,"uploaded",this.scope.targetDiv,this.isMultipleUpload):this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,i,"uploaded",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.interval.cancel(a)}},this.scope,100,5e3,!0)}).error(t=>{if(this.removeUploadingFile(e),this.failedUploadCount++,this.failedUploadFilenames.push(e.fileName),(!this.uploadingFiles||0===this.uploadingFiles.length)&&(this.uploadInProgress=!1,this.failedUploadCount+this.successfulUploadCount===this.originalUploadCount)){let e;e=this.originalUploadCount>1?this.failedUploadCount===this.originalUploadCount?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:this.originalUploadCount-this.failedUploadCount,filesCount:this.originalUploadCount},noWrap:!0})+" "+this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:this.failedUploadCount,filenameList:this.bbLocalize.formatItemsSync(this.failedUploadFilenames,this.failedUploadFilenames.length,null,this.scope,!1,{noWrap:!0})},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),this.scope.$root.$broadcast(x.i_,e)}if(this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,e,"error",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey()),this.aborted)this.aborted=!1;else{let e=t&&422===t.status?"components.directives.fileUpload.errorSecurity":"components.directives.fileUpload.errorFull";this.displayUploadError(e)}})}},this.prepareToUpload=(e,t,n,i)=>{let r;this.resetFileInput();let s=JSON.stringify({fileLocation:this.model.fileLocation}),o=e.type;o||(o=this.unknownMimeType);let l="img-icon-document",d=e.name||e.filename;if(this.scope.isThirdPartyUpload){(r={id:e.id,currentMimeType:o,currentProgress:0,data:s,file:e,fileName:d,inProgressFileId:J.generateTempFileId(),targetClass:l,type:e.type}).ui=c.copy(e.ui),r.ui?r.ui.primaryKey=this.scope.primaryKey&&this.scope.primaryKey():r.ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},t&&this.isZipFile(d)&&(r.ui.needUnzip=t),r.ui.fileId=e.id,this.uploadingFiles.push(r),this.isUploadCompleteEventRegistered||(this.scope.$on("uploadComplete",(e,t,n)=>{if(a.findIndex(this.uploadingFiles,e=>t.ui.fileId===e.ui.fileId)>=0){let e=this.getContentOutlineCloudKey(!0,n)||this.scope.targetDiv,i=this.getContentOutlineCloudKey(!1,n)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,t,"uploaded",e,i),this.removeUploadingFile(t)}this.uploadingFiles&&0!==this.uploadingFiles.length||(this.uploadInProgress=!1)}),this.isUploadCompleteEventRegistered=!0);let n=this.getContentOutlineCloudKey(!0)||this.scope.targetDiv,i=this.getContentOutlineCloudKey(!1)||this.scope.primaryKey&&this.scope.primaryKey();this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,r,"uploading",n,i)}else(r={content:i,currentMimeType:o,currentProgress:0,data:s,file:e,fileName:d,id:J.generateTempFileId(),progressId:null,targetClass:l,type:e.type}).ui={primaryKey:this.scope.primaryKey&&this.scope.primaryKey()},this.uploadingFiles.push(r),null!=i?this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,r,"fileDrop",this.scope.targetDiv):this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,r,"uploading",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},this.uploadFiles=(e,t)=>{this.isContent||(this.fileReviewVisible=!0),this.hideTranscludeDuringUpload&&(this.transcludeVisible=!1),e.forEach(n=>{this.isContent?this.isFolder(n).then(e=>{e?(this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,n,"folder"),this.scope.isChrome||this.alertedUserForFolderIncompatibility||(this.alertedUserForFolderIncompatibility=!0,this.errorModal.handleError(this.browserFolderWarning))):(this.uploadInProgress=!0,this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,n,"file"),this.currentUploadCount++)}):(this.uploadInProgress=!0,this.prepareToUpload(n,t,e.indexOf(n),null))})},this.calculateSizeInMib=e=>e/1048576,this.openMaxSizeWarning=()=>{this.maxFileSizeScope=this.scope.$new();let e="",t=this.scope.fileUploadSettings;this.maxFileSizeScope.shouldIncludeSupportLink=""!==t.supportLink,this.maxFileSizeScope.shouldRecommendAltStorageLocations=""!==t.recommendedAlternatives,this.maxFileSizeScope.shouldIncludeSupportLink&&(e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.maxSizeWarningSupportLinkText",params:{supportLink:t.supportLink},noWrap:!0}),e=this.$sceService.trustAsHtml(e)),this.maxFileSizeScope.maxFileSize=t.maxUploadSizeInBytes,this.maxFileSizeScope.alternateStorage=t.recommendedAlternatives,this.maxFileSizeScope.supportLink=e,this.maxFileSizeScope.closeModal=this.closeModal,this.maxFileSizeScope.calculateSizeInMib=this.calculateSizeInMib,this.maxFileSizeScope.overSizedFiles=this.oversizedFiles,this.maxFileSizeScope.filesGroupedByUploadLimit=this.filesGroupedByUploadLimit,this.oversizedFiles=[],this.filesGroupedByUploadLimit=[],this.modalInstance=this.$modal.open({template:H,scope:this.maxFileSizeScope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}})},this.continueCurrentUpload=(e,t)=>{e.length>0&&this.uploadFiles(e,t)},this.uploadEnabled=()=>(this.allowMultiple||this.allowMultipleSelects||0===this.uploadingFiles.length&&0===this.model.files.length)&&!this.scope.isThirdPartyUpload,this.fileUploadClick=()=>{this.uploadEnabled()&&this.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=()=>{this.modalInstance.dismiss()},this.addContent=e=>{e&&this.modalInstance.close(e)},this.closeModal=e=>{if(null===e||c.isUndefined(e))return this.modalInstance.close();e?this.modalInstance.close(e):(this.modalInstance.close(e),this.resetFileInput())},this.closeModalAndChooseFiles=()=>{this.closeModal(!0),this.resetFileInput(),this.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=(e,t)=>{t?(this.modalInstance=this.$modal.open({template:B,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{t&&this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.continueCurrentUpload(e)},this.containsZipFile=e=>{0!==e.filter(e=>this.isZipFile(e.name)).length?(this.modalInstance=this.$modal.open({template:V,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{this.continueCurrentUpload(e,t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.containsPackageFile(e)},this.checkAllowedFileTypesAndValidateFileSizes=e=>{e=this.validateUploadFileSizes(e);let t=this.validateFiles(e);if(!e.length&&this.oversizedFiles.length){this.openMaxSizeWarning(),this.notifyUploadCancelled(),this.resetFileInput();return}t.length!==e.length?(this.validFiles=t,this.modalInstance=this.$modal.open({template:this.disallowedFileTypeErrorTemplate||$,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.scope.skipZipFileCheck&&this.scope.skipZipFileCheck()?this.continueCurrentUpload(t,!1):this.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=e=>{this.scope.depth&&this.scope.depth()>q.cY.getMaxCourseFolderDepth()?this.removeFolders(e,_):this.checkAllowedFileTypesAndValidateFileSizes(e)},this.removeFoldersIfDisallowed=e=>{this.scope.disallowFolderUploads&&this.scope.disallowFolderUploads()?this.removeFolders(e,O):this.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=(e,t)=>{let n={};this.$q.all(e.map(e=>this.isFolder(e).then(t=>t?n:e))).then(i=>{let r=i.filter(e=>e!==n);r.forEach(e=>{e.path=null}),r.length!==e.length?(this.scope.hasFiles=0!==r.length,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(e=>{this.checkAllowedFileTypesAndValidateFileSizes(r)},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.checkAllowedFileTypesAndValidateFileSizes(r)})},this.ensurePlurality=e=>{e.length>1&&!this.allowMultiple?(this.uploadedFiles=e,this.modalInstance=this.$modal.open({template:G,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),this.modalInstance.result.then(t=>{let n=l('input[type="radio"][name="fileListing"]:checked').val();this.removeFoldersIfDisallowed([e[n]])},e=>{this.notifyUploadCancelled(),this.resetFileInput()})):this.removeFoldersIfDisallowed(e)},this.onFileSelect=(e,t,n,i,r,s)=>{if(!(s&&(l(s.target).is(".js-no-file-drop")||l(s.target).is(".js-show-add-options")))&&(!e||!e.length||"Blob"!==e[0].constructor.name)){if(e.length){let t;this.isMultipleUpload=e.length>1,this.scope.$root.$broadcast(W,this.scope.primaryKey&&this.scope.primaryKey(),"assignDropTarget"),this.scope.$root.$broadcast(W,this.scope.primaryKey&&this.scope.primaryKey(),"outlineAddContentButtonFileSelected"),this.setUploadDate(),this.ensurePlurality(e),this.originalUploadCount=e.length,this.failedUploadCount=this.successfulUploadCount=0,this.failedUploadFilenames=[],t=this.originalUploadCount>1?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:this.originalUploadCount},noWrap:!0}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),this.scope.$root.$broadcast(x.i_,t)}else this.throwModalForNonFileUpload()}},this.confirmLeaveDuringUpload=(e,t,n)=>{(this.uploadInProgress||this.cloudDrive.isGettingFilesInfo)&&!Y.isLeaveConfirmModalOpened&&(e.preventDefault(),this.modalInstance=this.$modal.open({template:N,scope:this.scope,resolve:{translations:[p.serviceName,e=>e.loadBundle("components/directives/file-upload")]}}),Y.isLeaveConfirmModalOpened=!0,this.modalInstance.result.then(e=>{Y.isLeaveConfirmModalOpened=!1,this.scope.isThirdPartyUpload||this.abortAllUploads(),this.aborted=!0,this.uploadInProgress=!1,this.uploadingFiles.forEach(e=>{this.scope.$root.$broadcast(W,this.scope.fileUploadDivId,e,"cancel",this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())}),this.ultraState.go(t.name,n)},()=>{Y.isLeaveConfirmModalOpened=!1,this.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})}))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=e.$eval(e.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,e.dragClass="drag",e.$on("bb-drag-start",()=>{e.dragClass=""}),e.$on("file-drag-restore",()=>{e.dragClass="drag"}),!e.isThirdPartyUpload){if(n.url)this.url=n.url;else throw Error("'url' attribute required in file upload");if(!n.data)throw Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",(e,t)=>{(!this.scope.clickEnabled||this.scope.clickEnabled())&&!t&&this.fileUploadClick()}),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick","allowOversizedFiles"].forEach(e=>{let t=this.scope.$watch(e,n=>{null!=n&&(t(),this[e]=n)})});let w=this.scope.$watch("targetDiv",n=>{if(null!=n)w(),this.scope.targetElement=t.find(n),0===this.scope.targetElement.length&&(this.scope.targetElement=l(n));else{this.progressVisible=!0;let n=this.interval(()=>{let e=t.find(".file-upload-panel");e.length>0&&(this.scope.targetElement=e,this.interval.cancel(n))},e,100,10)}}),A=this.scope.$watch("monitorLeave",e=>{e&&(this.registerRouterStateChangeEventHandlers(),A())});this.isThirdPartyUpload=e.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}}Y.isLeaveConfirmModalOpened=!1;class X{constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f){this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=n,this.$modal=i,this.$http=r,this.interval=s,this.timeout=o,this.$compile=a,this.Upload=l,this.ultraStateService=c,this.FileUtilityFactory=d,this.errorModal=u,this.toast=p,this.$q=m,this.contextUser=h,this.fileUploadSettingsService=g,this.$sceService=f,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=F,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",cloudUploadSelectedContentId:"<?",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?",allowOversizedFiles:"<?"},this.link=(e,t,n,i)=>{e.fileUploadDivId=`fileUploadDiv-${J.generateTempFileId()}`,e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new Y(e,t,n,this.contextCourseMembership,this.bbLocalize,this.cloudDrive,this.interval,this.$modal,this.$http,this.timeout,this.$compile,this.Upload,this.ultraStateService,this.FileUtilityFactory,this.errorModal,this.toast,this.$q,this.contextUser,this.$sceService),e.$on(K,(t,n,i)=>{t.stopPropagation&&t.stopPropagation(),i&&i===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(n),e.$emit(Z,n,i)}),e.getAlternateStorageInfo=()=>{var t,n;let i=(null===(t=e.fileUpload)||void 0===t?void 0:t.maxFileSizeScope.shouldRecommendAltStorageLocations)?"components.directives.fileUpload.maxSizeWarningAlternateStorage":"components.directives.fileUpload.maxSizeWarningNoAlternateStorage";return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:i,noEscape:!0,params:{alternateStorage:null===(n=e.fileUpload)||void 0===n?void 0:n.maxFileSizeScope.alternateStorage}})},e.$on(Q,()=>{e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()}),e.$on(W,(t,n,i,r,s,o,a,l)=>{if(n===e.fileUploadDivId){if("cancel"===s)e.fileUpload.cancelUpload(r,o);else if("progressRenderComplete"===s)"number"==typeof i&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter(t=>t.id===r&&e.fileUpload.validateIdentifier(t.inProgressFileId,o))[0],i,r);else if("uploadProgressComplete"===s){let t=e.fileUpload.uploadingFiles.filter(t=>t.id===r&&e.fileUpload.validateIdentifier(t.inProgressFileId,o))[0];t&&(t.currentProgress=100)}}}),e.$on(W,(n,i,r,s,o)=>{i===(e.primaryKey&&e.primaryKey())&&"updateFileTypes"===o&&(e.fileUpload.allowedFileTypes=r,t.find("input").attr("accept",r),s())}),e.$on(W,(t,n,i,r)=>{n===e.fileUploadDivId&&i&&i.fileName&&"progressRenderComplete"===r&&e.fileUpload.conductUpload(i,0,i.id)}),e.$on(W,(t,n,i,r)=>{if(n===e.fileUploadDivId&&"contentCreated"===r){let t=this.interval(()=>{e.fileUpload.prepareToUpload(i.ui.file,!1,0,i),this.interval.cancel(t)},e,100,20)}}),e.$on(W,(t,n,i,r,s,o)=>{if(n===e.fileUploadDivId&&"linkProgress"===o)for(let t=0;t<e.fileUpload.uploadingFiles.length;t++)i.content?e.fileUpload.uploadingFiles[t].fileName===i.fileName&&e.fileUpload.uploadingFiles[t].file.path===i.file.path&&e.fileUpload.uploadingFiles[t].id===i.id&&(e.fileUpload.uploadingFiles[t].progressId=i.content.ui.fileUploadId,e.$root.$broadcast(W,e.fileUploadDivId,i,"commenceUpload")):e.fileUpload.uploadingFiles[t].fileName===i.fileName&&e.fileUpload.uploadingFiles[t].file.path===i.file.path&&e.fileUpload.uploadingFiles[t].id===i.id&&null==e.fileUpload.uploadingFiles[t].progressId&&(e.fileUpload.uploadingFiles[t].progressId=e.fileUpload.isContent?null:r,e.fileUpload.uploadingFiles[t].targetElement=s,e.$root.$broadcast(W,e.fileUploadDivId,i,"commenceUpload"))}),e.fileUploadSettings=this.fileUploadSettingsService.getSettings(),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}}X.$inject=[u.HV,p.serviceName,C.HV,w.HV,"$http",m.H,k.H,"$compile","Upload",P.HV,I.xQ,E.HV,T.HV,"$q",R.HV,L.HV,"$sce"],c.module(z,["ngFileUpload",u.e1,p.moduleName,C.e1,m.e,w.e1,A.e1,I.e1,k.e,b,E.e1,T.e1,P.e1,L.e1]).directive(W,["$injector",e=>e.instantiate(X)])},130279:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(839571);var i=n(464027),r=n(625506),s=n(323239),o=n(714762),a=n(480489),l=n(385847),c=n(230758);let d="ultra.components.directives.foundationOffcanvas";class u{initialProperties(){this.attrs.bbFoundationOffcanvasPosition&&(this.position=this.attrs.bbFoundationOffcanvasPosition),this.attrs.bbFoundationOffcanvasEventDelegate&&(this.scope.$on("OFFCANVAS-TOGGLE-OPEN",()=>{this.openPanel()}),this.scope.$on("OFFCANVASE-TOGGLE-CLOSE",()=>{this.closePanel()})),this.attrs.bbFoundationOffcanvasDialogModel&&(this.dialogModel=this.attrs.bbFoundationOffcanvasDialogModel)}wireup(){return this.wiredup=!0,this.timeout(()=>{if(this.closeButtonElement=r("#"+this.attrs.bbFoundationOffcanvasCloseButton),0===this.closeButtonElement.length)throw Error('The bbFoundationOffcanvas directive couldn\'t find a "Close Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasCloseButton);if(this.wrapperElement=this.element,this.offcanvasPanelElement=this.element.children().children(),1!==this.offcanvasPanelElement.length)throw Error("bbFoundationOffcanvas directive must have exactly one child element. Fix the usage in the html template.");if(this.offcanvasPanelElement.addClass(this.position+"-off-canvas-menu"),this.attrs.bbFoundationOffcanvasOverrideButtonClass&&(this.overrideButtonClass=this.$parse(this.attrs.bbFoundationOffcanvasOverrideButtonClass)(this.scope)),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.closeButtonElement.addClass("exit-off-canvas-overlay").on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.closePanel()})}),this.offcanvasPanelElement.find("a, button").last().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode!==l.Mf||e.shiftKey||(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.offcanvasPanelElement.find("a, button").first().on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===l.Mf&&e.shiftKey&&(e.preventDefault(),this.scope.$apply(()=>{this.closePanel()}))}),this.scope.$on("foundation-offcanvas-close-panel",()=>{this.closePanel()}),null!=this.attrs.bbFoundationOffcanvasCommonParent){if(this.commonParent=r("#"+this.attrs.bbFoundationOffcanvasCommonParent),0===this.commonParent.length)throw Error("The bbFoundationOffcanvas directive couldn't find a common parent element with an ID of "+this.attrs.bbFoundationOffcanvasCommonParent)}else this.commonParent=r(this.wrapperElement).parents().has(this.closeButtonElement).first();if(this.commonParent.hasClass("group-list")||this.commonParent.addClass("off-canvas-wrap off-canvas-overlay"),!this.overrideButtonClass){let e=this.offcanvasPanelElement.find("li").not(".ng-hide").length;this.commonParent.addClass("buttons-"+e)}o.c(this.commonParent,e=>(this.isPanelOpen&&(e.data.noTransitions||"right"===e.originalEvent.propertyName)&&(this.isFromKeyBoard?this.offcanvasPanelElement.find("a, button").first().focus():(this.offcanvasPanelElement.parent().attr("tabindex",0),this.offcanvasPanelElement.parent().focus())),!1)),this.element.foundation(),this.scope.$on("$destroy",()=>{this.element.off("click.bbFoundationOffcanvas"),this.closeButtonElement.off("click.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").last().off("keydown.bbFoundationOffcanvas"),this.offcanvasPanelElement.find("a, button").first().off("keydown.bbFoundationOffcanvas"),this.commonParent.removeClass("off-canvas-wrap off-canvas-overlay")})},this.scope,0,!1)}getPosition(){switch(this.position){case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return"right"}}_openPanel(){this.offcanvasPanelElement.css("display","block"),this.justOpenedPanel=!0,this.timeout(()=>{this.offcanvasPanelElement.foundation("offcanvas","show","move-"+this.getPosition()),this.isPanelOpen=!0,this.offcanvasPanelElement.find("a, button").attr("tabindex","0"),this.justOpenedPanel=!1},this.scope,0,!1)}openPanel(){if(this.wiredup)this._openPanel();else{let e=this.$q.defer();this.scope.$watch("::foundationOffcanvas.wiredup",t=>{t&&e.resolve()}),this.$q.all([this.wireup(),e.promise]).then(()=>{this._openPanel()})}}closePanel(){this.offcanvasPanelElement.foundation("offcanvas","hide","move-"+this.getPosition()),this.isPanelOpen=!1,this.isFromKeyBoard=!1,this.offcanvasPanelElement.parent().removeAttr("tabindex"),this.offcanvasPanelElement.find("a, button").attr("tabindex","-1"),this.openButtonElement.focus(),this.timeout(()=>{this.isPanelOpen||this.offcanvasPanelElement.css("display","none")},this.scope,300,!1)}handleClickOutside(){!this.dialogModel&&(r("body").hasClass("modal-open")||this.justOpenedPanel||this.closePanel())}togglePanel(){this.isPanelOpen?this.closePanel():this.openPanel()}constructor(e,t,n,i,s,o,a){this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$parse=s,this.$q=o,this.timeout=a,this.overrideButtonClass=!1,this.isPanelOpen=!1,this.justOpenedPanel=!1,this.isFromKeyBoard=!1,this.wiredup=!1,this.position="right",this.dialogModel=!1,this.initialProperties(),a(()=>{if(this.openButtonElement=r("#"+this.attrs.bbFoundationOffcanvasOpenButton),0===this.openButtonElement.length)throw Error('The bbFoundationOffcanvas directive couldn\'t find an "Open Menu" button with an ID of '+this.attrs.bbFoundationOffcanvasOpenButton);this.openButtonElement.on("click.bbFoundationOffcanvas",()=>{this.scope.$apply(()=>{this.togglePanel()})}),this.openButtonElement.on("keydown.bbFoundationOffcanvas",e=>{e.keyCode===l.K5&&(this.isFromKeyBoard=!0)})},e,0,!1)}}u.$inject=["scope","element","attrs","$compile","$parse","$q",a.H];class p{constructor(e){this.$injector=e,this.transclude=!0,this.restrict="E",this.link=(e,t,n)=>{if(null==n.bbFoundationOffcanvasOpenButton||null==n.bbFoundationOffcanvasCloseButton)throw Error('Please provide jQuery selectors for both the "Open Menu" and "Close Menu" buttons');let i=n.$observe("bbFoundationOffcanvasCloseButton",r=>{r&&(e.foundationOffcanvas=this.$injector.instantiate(u,{scope:e,element:t,attrs:n}),i())})},this.template=c}}p.$inject=["$injector"],i.module(d,[s.e1,a.e]).directive("bbFoundationOffcanvas",["$injector",e=>e.instantiate(p)])},463444:function(e,t,n){"use strict";n.d(t,{e1:function(){return g}}),n(914602),n(19149),n(20720);var i=n(302032),r=n(625506),s=n(276635),o=n(464027),a=n(610624),l=n(324686),c=n(480489),d=n(385847),u=n(402184),p=n(936867);function m(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function h(e,t){return function(n,i){t(n,i,e)}}let g="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,n;let i=this.offsetParent().offset(),r=e.offset();r.top-=i.top,r.left-=i.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1;let s=null!==(n=null===(t=this.closest(".panel-wrap")[0])||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:window.innerWidth,o=(window.innerWidth-s)/2;if(!this.hasClass("mega")){let t=this.outerWidth(),n=e.offset();n.top<=this.outerHeight()&&(r.missTop=!0,window.innerWidth,r.leftRightFlag=!0),n.left-o+t>s?(r.missRight=!0,r.missLeft=!1):n.left-o-t<=0&&(r.missLeft=!0,r.missRight=!1)}return this.toggleClass("miss-right",r.missRight),this.toggleClass("miss-left",r.missLeft),r};let f=window.Foundation.libs.dropdown.dirs.bottom;window.Foundation.libs.dropdown.dirs.bottom=function(e,t){var n;let i=window.Foundation.libs.dropdown,r=f.call(this,e,t);return!i.rtl||(null===(n=e[0].dataset)||void 0===n?void 0:n.defaultPositioning)?r:this.offsetParent()[0]===e.offsetParent()[0]?{...r,left:0}:{...r,left:e.offset().left}};let b=window.Foundation.libs.dropdown.dirs.right;window.Foundation.libs.dropdown.dirs.right=function(e,t){let n=window.Foundation.libs.dropdown,i=b.call(this,e,t);return n.rtl?{...i,left:i.left-e.outerWidth()}:i};let v=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e,...t){e.hasClass("disable-pip-adjustment")||v.apply(this,[e,...t])};let y=(e,t,n,i)=>{e.$on("$destroy",()=>{window.Foundation.scope===t[0]&&(window.Foundation.scope=null),s.forEach(window.Foundation.libs,e=>{e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback})}),["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach(e=>{window.Foundation.media_queries[e]=r(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")}),l.B();let o=e=>{e.each((t,i)=>{let s=r(i),o=s.hasClass("active"),a=s.children("a").first(),l=s.children(".content").first(),c=r("body");l.attr("aria-hidden",!o+""),a.attr({"aria-selected":o,"aria-expanded":o});let u=s.find(':tabbable[role!="tab"]').add(s.find('[tabindex="-1"]')).add(s.find("input")).not(s.children("a").first());o?u.attr("tabindex",0):u.attr("tabindex","-1"),n||(a.on("keydown",n=>{if(n.keyCode===d.UP||n.keyCode===d.RL){let n=0===t?e.length-1:t-1;r(e.get(n)).children("a").first().focus()}else if(n.keyCode===d.WV||n.keyCode===d.pX){let n=t===e.length-1?0:t+1;r(e.get(n)).children("a").first().focus()}else n.keyCode===d.Sd?r(e.get(0)).children("a").first().focus():n.keyCode===d.uR&&r(e.get(e.length-1)).children("a").first().focus();c.removeClass("hide-focus-outline")}),l.on("keydown",n=>{if(n.ctrlKey&&n.keyCode===d.UP)a.focus();else if(n.ctrlKey&&n.keyCode===d.Ku){let n=0===t?e.length-1:t-1;r(e.get(n)).children("a").first().focus()}else if(n.ctrlKey&&n.keyCode===d.VM){let n=t===e.length-1?0:t+1;r(e.get(n)).children("a").first().focus()}c.removeClass("hide-focus-outline")})),s.addClass("accordion-complete")})},c=t.find(".accordion");c.length>0&&c.each((e,t)=>{let n=r(t),i=n.find(".accordion-navigation:not(.accordion-complete)");n.attr("role","tablist"),i.each((t,n)=>{let i=r(n),s=i.children("a").first(),o=i.children(".content").first();s.attr("role","tab"),o.attr("role","tabpanel");let l=a.d(),c="accordion"+e+"-"+l+"-header"+t,d="accordion"+e+"-"+l+"-panel"+t;s.attr("id",c),o.attr("id",d),s.attr("href","#"+d),s.attr("aria-controls",d),o.attr("aria-labelledby",c)}),o(i)}),i(t,e),t.foundation({accordion:{multi_expand:!0,callback:e=>{e.closest(".accordion").removeAttr("aria-multiselectable"),o(e.closest(".accordion").children(".accordion-navigation"))}},dropdown:{}})};class S{constructor(e,t){this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),y(e,t,i,this.dropdownInit)},this.onDestroyHandler=null}}S=m([h(0,(0,i.tB)(u.H)),h(1,(0,i.tB)(p.HV))],S);class C{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1)},this.onDestroyHandler=null}}C=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],C);class E{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()});let r=e.$watch(n.bbFoundationWait,n=>{n&&(r(),this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1))})}}}E=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],E);class I{constructor(e,t,n){this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=(e,t,n)=>{this.onDestroyHandler=this.integrationEventEmitterService.addIntegrationEventClickListener(t);let i=e.$eval(n.rubricOverride);e.$on("$destroy",()=>{this.onDestroyHandler&&this.onDestroyHandler()}),e.$watch(n.bbFoundationWaitContinuous,n=>{n&&this.timeout(()=>{y(e,t,i,this.dropdownInit)},e,0,!1)},null!=n.bbDeepWatch&&n.bbDeepWatch)}}}I=m([h(0,(0,i.tB)(c.H)),h(1,(0,i.tB)(u.H)),h(2,(0,i.tB)(p.HV))],I),o.module(g,[c.e,u.e,p.e1]).directive("bbFoundation",["$injector",e=>e.instantiate(S)]).directive("bbFoundationDefer",["$injector",e=>e.instantiate(C)]).directive("bbFoundationWait",["$injector",e=>e.instantiate(E)]).directive("bbFoundationWaitContinuous",["$injector",e=>e.instantiate(I)])},756108:function(e,t,n){"use strict";n.d(t,{e1:function(){return l}});var i,r=n(464027),s=n(823513),o=n(282310),a=n(302032);let l="ultra.components.directives.firstTimeContainer";class c{constructor(e){this.firstTimeHelper=e,this.manager=s.uS}}c=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,a.tB)(o.HV),function(e,t){i(e,t,0)})],c);class d{constructor(){this.restrict="AE",this.controller=c,this.link=(e,t,n,i)=>{i.manager.startQueue(),e.$on("hide-ftue-component",(e,t)=>{i.manager.hideComponent(t)})}}}r.module(l,[o.e1]).directive("bbFirstTimeContainer",["$injector",e=>e.instantiate(d)])},436043:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(302032),r=n(728042),s=n(184108);function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.components.directives.buttonComplexTooltip";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,r.w)({moduleName:a,componentName:"bbButtonComplexTooltip",template:s}),o(0,(0,i.tB)("$scope")),o(1,(0,i.tB)("$rootScope"))],class{$onInit(){this.$scope.buttonComplexTooltip=this}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}constructor(e,t){this.$scope=e,this.$rootScope=t}})},871405:function(e,t,n){"use strict";n.d(t,{eB:function(){return iL},dT:function(){return u},e1:function(){return iR}}),n(42745),n(798245),n(236259),n(334284),n(803420),n(77073);var i,r,s,o,a,l,c,d,u,p=n(276635),m=n(464027),h=n(45367);n(751410);var g=n(189165),f=n(677315),b=n(40750),v=n(35065),y=n(45680),S=n(649955),C=n(699868),E=n(130279),I=n(676954),w=n(480489),A=n(506117),k=n(992300),T=n(259197),P=n(161223),D=n(83991),x=n(302032),R=n(550656),L=n(505568);function N(e,t){return function(n,i){t(n,i,e)}}let $="ultra.components.directives.grade.courseGradesGraderList";class O{subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({setupOverallGradeMessageIsHiddenPreference:T.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(e,D.nv.key,this.course.id),gradebookColumns:T.Ys.gradebookColumn.getGradebookColumnsByCourseId(e,this.course.id)}),e=>({loadSetupOverallGradeMessageIsHiddenPreference:t=>e(T.Nwg.coursePreference.loadCoursePreference({key:t,courseId:this.course.id}))}))((e,t)=>{let{setupOverallGradeMessageIsHiddenPreference:n,gradebookColumns:i}=e,{loadSetupOverallGradeMessageIsHiddenPreference:r}=t;if(Object.assign(this,{setupOverallGradeMessageIsHiddenPreference:n,loadSetupOverallGradeMessageIsHiddenPreference:r}),this.currentGradebookColumns&&i&&this.currentGradebookColumns!==i){let e=i.find((e,t)=>!p.isEqual(e,this.currentGradebookColumns[t]));e&&this.columns.forEach(t=>{t.id===e.id&&t.isFormative!==e.isFormative&&(t.isFormative=e.isFormative)})}this.currentGradebookColumns=null!=i?i:[]});this.scope.$on("$destroy",e)}findGraderItemById(e){return p.find(this.columns,t=>t.id===e)}setupOverallGradeHideMessageCallback(){this.scope.$apply(()=>this.showSetupOverallGradeMessage=!1)}onClickSort(e){this.scope.onClickSortIcon({headerName:e})}renderMoreColumns(){this.scope.addMoreColumns()}getSortTypeValue(e){return(0,L.f)(e,this.scope.sortAttributes)}getAriaLabelString(e){var t;return(null===(t=this.scope.sortAttributes)||void 0===t?void 0:t.sortType)&&this.scope.sortAttributes.columnName===e?"components.directives.grade.course-grades-grader-list.headers.aria-label."+e+"."+this.scope.sortAttributes.sortType:"components.directives.grade.course-grades-grader-list.headers.aria-label."+e+".none"}constructor(e,t,n,i,r,s){this.scope=e,this.attrs=t,this.gradebookPermissionService=n,this.$ngRedux=i,this.grade=r,this.categoryService=s,this.categoryMap={},this.onMoveGraderItem=e=>{let t=this.findGraderItemById(e.dragContentId),n=t.positionBeforeId?t.positionBeforeId:null,i=t.positionAfterId?t.positionAfterId:null,r=this.columns.indexOfItemById(e.dragContentId),s=null;if(e.positionBeforeId?(-1!==(s=this.columns.indexOfItemById(e.positionBeforeId))&&-1!==r&&r<s&&s--,t.positionBeforeId=e.positionBeforeId):e.positionAfterId&&(-1!==(s=this.columns.indexOfItemById(e.positionAfterId))&&-1!==r&&r>s&&s++,t.positionAfterId=e.positionAfterId),null==s||r===s||-1===r||-1===s){t.positionBeforeId=n,t.positionAfterId=i;return}return this.columns.splice(s,0,this.columns.splice(r,1)[0]),t.$patch()},this.canModify=this.gradebookPermissionService.canModify(),this.contextArea="grades",this.columns=e.columns,this.course=e.course(),this.hasColumns=!0,this.currentGradebookColumns=[],this.subscribeToReduxChanges(),this.categoryService.getOrLoadCategoriesForCourse(this.scope.course().id).then(e=>{e.forEach(e=>{this.categoryMap[e.id]=e})}),this.scope.showSetupOverallColumn&&this.loadSetupOverallGradeMessageIsHiddenPreference&&!this.setupOverallGradeMessageIsHiddenPreference&&this.loadSetupOverallGradeMessageIsHiddenPreference(D.nv.key).then(()=>{var e;let t=(null===(e=this.setupOverallGradeMessageIsHiddenPreference)||void 0===e?void 0:e.value)==="true";this.showSetupOverallGradeMessage=!t}),e.$watchCollection("columns",t=>{t&&(this.columns=t,this.hasColumns=0!==t.length,this.attendanceColumnExists=this.columns.some(e=>e.isAttendance()),e.$broadcast("update-content-menu"))}),e.$on("content-item-mouseover",(t,n)=>{e.$apply(()=>{e.$broadcast("content-item-hover",n)})}),e.$on("course-gradebook-mouse-leave",()=>{e.$broadcast("content-outline-hover-end")}),e.$on("attempt-base-content-update",(e,t)=>{let n=this.columns.filter(e=>t.id===e.contentId);n.length>0&&n.forEach(e=>{e.$fetch()})}),e.$on("bb-change-overall-panel-visibility",(e,t,n)=>{var i;if(this.course.id!==t&&this.course.isComplete())return;let r=(null===(i=this.setupOverallGradeMessageIsHiddenPreference)||void 0===i?void 0:i.value)==="true";this.showSetupOverallGradeMessage=r?!r:n})}}O=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([N(0,(0,x.tB)("scope")),N(1,(0,x.tB)("attrs")),N(2,(0,x.tB)(y.HV)),N(3,(0,x.tB)("$ngRedux")),N(4,(0,x.tB)(S.HV)),N(5,(0,x.tB)(C.HV))],O);class G{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="E",this.template=P,this.scope={course:"&",columns:"=",addMoreColumns:"&",showSetupOverallColumn:"=",isFirst:"=",attendanceIsAvailable:"&",sortAttributes:"=",onClickSortIcon:"&"},this.link=(e,t,n)=>{this.timeout(()=>{e.courseGradesGraderList=this.$injector.instantiate(O,{scope:e,element:t,attrs:n})},e)}}}G.$inject=["$injector",w.H],m.module($,[v.e1,E.e1,g.e,f.e1,b.e1,R.e,A.e1,k.e1,C.e1]).directive("bbCourseGradesGraderList",["$injector",I.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/course-grades-grader-list"),e.instantiate(G))]);var _=n(411832),M=n(728042),B=n(12838),F=n(196409),U=n(420595),V=n(507009),H=n(920092),q=n(478459),j=n(808361);let z="rb_grid_",W={CELL_FOCUSED:`${z}cell_focused`,COLUMN_HEADER_FOCUSED:`${z}icon_focused`,COLUMN:`${z}column`,DATA_UPDATE:`${z}data_update`,ENTER_CELL:`${z}enter_cell`,ENTER_NEXT_CELL:`${z}enter_next_cell`,FOCUS_CELL:`${z}focus_cell`,LEAVE_CELL:`${z}leave_cell`,LEAVE_GRID:`${z}leave_grid`,LOAD_MEMBERSHIP:`${z}load_membership`,ROW:`${z}row`,SORT:`${z}sort`,SCROLL_H:`${z}scroll_h`,SCROLL_V:`${z}scroll_v`};var K=n(563060),Z=n(83470),Q=n(625506);function J(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function Y(e,t){return function(n,i){t(n,i,e)}}class X{getStudentsNoSubmissionCount(){return(0,Z.z)(this.data)}canShowReminderOption(){return(0,Z.y)(this.data)}getCourse(){return this.gridData.course}hasContextMenuOptions(){return this.isScorm()||this.canView()||this.gradeService.canPostGrades(this.gridData.course,this.data)||this.data.isQuestionAnalysisAvailable()&&this.canViewQuestionAnalysis()||this.canDelete()}isAssessment(){return T.u$1.Test.isEqualTo(this.data.scoreProviderHandle)||T.u$1.Survey.isEqualTo(this.data.scoreProviderHandle)}canView(){return!this.data.scoreProviderHandle||(this.isAssessment()?this.canViewAssessment:this.canViewContentDesigner)}canEdit(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canModifyAssessment:this.canModifyContent:this.gradebookPermissionService.canModify())}canDelete(){return!this.gridData.course.isComplete()&&(this.data.scoreProviderHandle?this.isAssessment()?this.canDeleteAssessment:this.canDeleteContent:this.gradebookPermissionService.canModify())}deleteColumn(){throw Error("Unsupported operation exception")}deleteColumnFromGridData(){this.gridData.deleteColumn(this)}getConfirmationMessage(){throw Error("Unsupported operation exception")}viewOrEdit(){if(T.u$1.PartnerCloud.isEqualTo(this.data.scoreProviderHandle))this.ltiService.ltiLaunch({courseId:this.data.courseId,contentId:this.data.contentId,linkType:B.GQ.PartnerCloud,linkRefId:this.data.linkId});else{let e=this.data.scoreProviderHandle;(!e||this.scoreProviderHelper.supportsOverall(e))&&(this.scoreProviderHelper.supportsExternalEdit(e)?this.ltiService.ltiEditColumn(this.data):this.openEditState())}}canViewQuestionAnalysis(){return this.gradebookPermissionService.canViewGrades()}openQuestionAnalysisOverview(){throw Error("Unsupported operation exception")}showDownloadResults(){return this.gridData.canViewGrades&&this.isAssessment()&&this.data.summary.numSubmissionsTotal>0}shouldShowStatistics(){return this.gridData.canViewGrades}openColumnStatisticsPanel(){this.ultraState.goPeekState(K.Z5.Grade.GRADABLE_ITEM_STATISTICS,{columnId:this.id})}hasDownloads(){return T.u$1.Test.isEqualTo(this.data.scoreProviderHandle)}canDownloadAll(){return!1}previewScorm(){this.isScorm()&&this.scormService.scormLaunch({courseId:this.data.courseId,contentId:this.data.contentId,showPreLaunchPanel:!1})}openEditState(){throw Error("Unsupported operation exception")}postGrades(){this.data.postReadyGrades().then(()=>(this.toast.show({messageKey:"components.directives.grade.grid.gradesPosted",icon:"icon-check",toastStatus:"success"}),this.data.anonymousGrading)?this.data.$fetch().$asPromise().then(()=>this.data.summary.$fetch().$asPromise()):this.data.summary.$fetch().$asPromise()).then(()=>{this.gridData.updateColumnByMetadata(this.data)&&this.rootScope.$broadcast(W.COLUMN)})}isShowSummary(){return!0}isScorm(){return this.data&&this.data.isScorm()}onClick(){}triggerDelete(e){e.target===e.currentTarget&&(Q(e.target).find("a").click(),e.preventDefault(),e.stopPropagation())}getMetadata(){return this.data}filterByColumId(e){return e.indexOf(this.id)>-1}filterByCategoryId(e){return!!this.data.gradebookCategory&&e.indexOf(this.data.gradebookCategoryId)>-1}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v){this.rootScope=e,this.gridData=t,this.data=n,this.headerTemplate=i,this.cellTemplate=r,this.columnWidth=s,this.position=o,this.border=a,this.sortable=c,this.isStudentColumn=d,this.ltiService=u,this.entitlementService=p,this.gradeService=m,this.gradebookPermissionService=h,this.scormService=g,this.scoreProviderHelper=f,this.toast=b,this.ultraState=v,this.openDownloadTestResultsPanel=()=>{this.ultraState.goPeekState(K.Z5.Grade.DOWNLOAD_TEST_RESULTS,{columnId:this.id})},this.order=null!=l?l:0,this.id=n.id;let y=this.getCourse().id;this.showAnonymousBulkDownloadModal=()=>{},this.entitlementService.hasCourseEntitlement(B.s7.DeleteAssessment,y).then(e=>{this.canDeleteAssessment=e}),this.entitlementService.hasCourseEntitlement(B.eo.DeleteContent,y).then(e=>{this.canDeleteContent=e}),this.entitlementService.hasCourseEntitlement(B.s7.ModifyAssessment,y).then(e=>{this.canModifyAssessment=e}),this.entitlementService.hasCourseEntitlement(B.eo.ModifyContent,y).then(e=>{this.canModifyContent=e}),this.entitlementService.hasCourseEntitlement(B.s7.ViewAssessment,y).then(e=>{this.canViewAssessment=e}),this.entitlementService.hasCourseEntitlement(B.eo.ViewAsDesigner,y).then(e=>{this.canViewContentDesigner=e})}}X=J([Y(0,(0,x.tB)("$rootScope")),Y(1,(0,x.tB)("gridData")),Y(2,(0,x.tB)("data")),Y(3,(0,x.tB)("headerTemplate")),Y(4,(0,x.tB)("cellTemplate")),Y(5,(0,x.tB)("columnWidth")),Y(6,(0,x.tB)("position")),Y(7,(0,x.tB)("border")),Y(8,(0,x.tB)("order")),Y(9,(0,x.tB)("sortable")),Y(10,(0,x.tB)("isStudentColumn")),Y(11,(0,x.tB)(F.HV)),Y(12,(0,x.tB)(_.HV)),Y(13,(0,x.tB)(S.HV)),Y(14,(0,x.tB)(y.HV)),Y(15,(0,x.tB)(U.HV)),Y(16,(0,x.tB)(H.HV)),Y(17,(0,x.tB)(q.HV)),Y(18,(0,x.tB)(j.HV))],X);class ee extends X{addBorder(){this.border=!0}deleteBorder(){this.border=!1}filterByColumId(e){return!0}filterByCategoryId(e){return!0}}class et extends X{loadNotation(){this.notationService.getGradeNotationsMap(this.gridData.course.id,!0).then(e=>{this.gradeNotations=e})}openEditState(){this.ultraState.goPeekState(K.RK.GRADE_ITEM_OVERALL_GRADE,{columnId:this.id,gradeitemView:"details",isExternalGrade:!0})}deleteColumn(){this.data.forceDelete()}getConfirmationMessage(){return"x-bb-grade-calculation"}filterByColumId(e){return!0}filterByCategoryId(e){return!0}shouldShowStatistics(){return!1}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y){super(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v),this.notationService=y,this.gradeNotations=[],this.loadNotation()}}et.$inject=[],et=J([Y(0,(0,x.tB)("$rootScope")),Y(1,(0,x.tB)("gridData")),Y(2,(0,x.tB)("data")),Y(3,(0,x.tB)("headerTemplate")),Y(4,(0,x.tB)("cellTemplate")),Y(5,(0,x.tB)("columnWidth")),Y(6,(0,x.tB)("position")),Y(7,(0,x.tB)("border")),Y(8,(0,x.tB)("order")),Y(9,(0,x.tB)("sortable")),Y(10,(0,x.tB)("isStudentColumn")),Y(11,(0,x.tB)(F.HV)),Y(12,(0,x.tB)(_.HV)),Y(13,(0,x.tB)(S.HV)),Y(14,(0,x.tB)(y.HV)),Y(15,(0,x.tB)(U.HV)),Y(16,(0,x.tB)(H.HV)),Y(17,(0,x.tB)(q.HV)),Y(18,(0,x.tB)(j.HV)),Y(19,(0,x.tB)(V.HV))],et);class en extends X{refreshAffectedColumns(){this.findAffectedColumns().forEach(e=>this.gridData.updateColumnByMetadata(e.data))}findAffectedColumns(e=[]){let t=p.differenceBy(this.gridData.getColumns().filter(e=>e instanceof en&&e.isAffected(this)),e,"id"),n=p.unionBy([],t,"id");return e=p.unionBy(t,e,"id"),t.forEach(t=>{n=p.unionBy(n,t.findAffectedColumns(e),"id")}),n}}class ei extends en{isAffected(e){let t=this.data.calculatedFormula&&this.data.calculatedFormula.aliases;return!p.isUndefined(t)&&(!p.isUndefined(p.findKey(t,t=>t===e.id))||!p.isUndefined(p.findKey(t,t=>e.data.gradebookCategory&&t===e.data.gradebookCategory.id)))}openEditState(){this.data.calculatedFormula.isTotalCalculation?this.ultraState.goPeekState(K.RK.GRADE_ITEM_TOTAL_CALCULATION,{columnId:this.id,gradeitemView:"details",isExternalGrade:!1}):this.ultraState.goPeekState("gradebook-item.calculation",{columnId:this.id,gradeitemView:"details"})}deleteColumn(){this.data.forceDelete()}getConfirmationMessage(){return"x-bb-grade-calculation"}shouldShowStatistics(){return!1}}class er extends en{getConfirmationMessage(){return"x-bb-grade-column"}stashAffectedColumnsBeforeEdit(){this._affectedColumnsBeforeEdit=this.findAffectedColumns()}get affectedColumnsBeforeEdit(){return this._affectedColumnsBeforeEdit}isAffected(e){return!1}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v){super(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v),this._affectedColumnsBeforeEdit=[]}}er.$inject=[],er=J([Y(0,(0,x.tB)("$rootScope")),Y(1,(0,x.tB)("gridData")),Y(2,(0,x.tB)("data")),Y(3,(0,x.tB)("headerTemplate")),Y(4,(0,x.tB)("cellTemplate")),Y(5,(0,x.tB)("columnWidth")),Y(6,(0,x.tB)("position")),Y(7,(0,x.tB)("border")),Y(8,(0,x.tB)("order")),Y(9,(0,x.tB)("sortable")),Y(10,(0,x.tB)("isStudentColumn")),Y(11,(0,x.tB)(F.HV)),Y(12,(0,x.tB)(_.HV)),Y(13,(0,x.tB)(S.HV)),Y(14,(0,x.tB)(y.HV)),Y(15,(0,x.tB)(U.HV)),Y(16,(0,x.tB)(H.HV)),Y(17,(0,x.tB)(q.HV)),Y(18,(0,x.tB)(j.HV))],er);class es extends er{openEditState(){this.stashAffectedColumnsBeforeEdit(),this.ultraState.goPeekState("grade-item.edit",{id:this.id})}deleteColumn(){this.data.forceDelete()}}class eo extends er{canDelete(){return super.canDelete()&&this.showAttendanceDeleteOption}get canBePost(){return!1}openEditState(){this.stashAffectedColumnsBeforeEdit();let e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,H.tU.GoToState)}deleteColumn(){this.data.forceDelete()}checkIfAttendanceIsAvailable(){if(this.gridData.course.tools){let e=this.gridData.course.tools.getToolById("bb-attendance");if(e&&e.toolEnabledSetting.isAvailable)return!0}return!1}checkIfAttendanceRecordsExist(){this.showAttendanceDeleteOption=!1,this.checkIfAttendanceIsAvailable()&&this.gridData.course.attendanceRecordsExist().then(e=>{this.showAttendanceDeleteOption=!e})}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v){super(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v),this.checkIfAttendanceRecordsExist(),M.Z.OnRootScope(e,"$stateChangeSuccess",(e,t,n,i)=>{i.name.indexOf("attendance")>=0&&this.checkIfAttendanceRecordsExist()})}}eo.$inject=[],eo=J([Y(0,(0,x.tB)("$rootScope")),Y(1,(0,x.tB)("gridData")),Y(2,(0,x.tB)("data")),Y(3,(0,x.tB)("headerTemplate")),Y(4,(0,x.tB)("cellTemplate")),Y(5,(0,x.tB)("columnWidth")),Y(6,(0,x.tB)("position")),Y(7,(0,x.tB)("border")),Y(8,(0,x.tB)("order")),Y(9,(0,x.tB)("sortable")),Y(10,(0,x.tB)("isStudentColumn")),Y(11,(0,x.tB)(F.HV)),Y(12,(0,x.tB)(_.HV)),Y(13,(0,x.tB)(S.HV)),Y(14,(0,x.tB)(y.HV)),Y(15,(0,x.tB)(U.HV)),Y(16,(0,x.tB)(H.HV)),Y(17,(0,x.tB)(q.HV)),Y(18,(0,x.tB)(j.HV))],eo);class ea extends er{canDownloadAll(){return this.data&&this.data.anonymousGrading?this.gradebookPermissionService.canViewAnonymousBulkDownload(this.data.courseId):this.gradebookPermissionService.canViewBulkDownload()}openDownloadAll(){var e;(null===(e=this.data)||void 0===e?void 0:e.anonymousGrading)?this.showAnonymousBulkDownloadModal():this.ultraState.goPeekState("grades-bulk-download",{columnId:this.id})}showDownloadResults(){return(!this.data||!this.data.anonymousGrading)&&super.showDownloadResults()}openEditState(){this.stashAffectedColumnsBeforeEdit();let e={courseId:this.data.courseId,contentId:this.data.contentId};this.scoreProviderHelper.editStateRef(this.data.scoreProviderHandle,e,H.tU.GoToState)}deleteColumn(){this.rootScope.$broadcast("bb-delete-column",this.data)}openQuestionAnalysisOverview(){this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.data.contentId})}shouldShowStatistics(){var e;return(null===(e=this.data)||void 0===e||!e.anonymousGrading)&&super.shouldShowStatistics()}}class el extends ea{initializeUserIdGroupIdMap(){let e=this.gridData.getColumnIdGroupsMap()[this.id];p.isEmpty(e)||e.forEach(e=>{let t=this.gridData.getGroupIdUserIdMap()[e.groupId];p.isEmpty(t)||t.forEach(t=>{this._userIdGroupIdMap[t]=e.groupId})})}canDownloadAll(){return!1}get userIdGroupIdMap(){return this._userIdGroupIdMap}getGroupById(e){return p.find(this.groups,t=>t.groupId===e)}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y){super(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v),this.groups=y,this._userIdGroupIdMap={},this.initializeUserIdGroupIdMap()}}el.$inject=[],el=J([Y(0,(0,x.tB)("$rootScope")),Y(1,(0,x.tB)("gridData")),Y(2,(0,x.tB)("data")),Y(3,(0,x.tB)("headerTemplate")),Y(4,(0,x.tB)("cellTemplate")),Y(5,(0,x.tB)("columnWidth")),Y(6,(0,x.tB)("position")),Y(7,(0,x.tB)("border")),Y(8,(0,x.tB)("order")),Y(9,(0,x.tB)("sortable")),Y(10,(0,x.tB)("isStudentColumn")),Y(11,(0,x.tB)(F.HV)),Y(12,(0,x.tB)(_.HV)),Y(13,(0,x.tB)(S.HV)),Y(14,(0,x.tB)(y.HV)),Y(15,(0,x.tB)(U.HV)),Y(16,(0,x.tB)(H.HV)),Y(17,(0,x.tB)(q.HV)),Y(18,(0,x.tB)(j.HV)),Y(19,(0,x.tB)("groups"))],el);class ec extends el{}class ed extends el{}class eu extends ea{}var ep=n(742854),em=n(845882),eh=n(555840),eg=n(371515),ef=n(144958),eb=n(302990);function ev(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function ey(e,t){return function(n,i){t(n,i,e)}}(i=l||(l={}))[i.UNLOADED=0]="UNLOADED",i[i.WAITING=1]="WAITING",i[i.LOADING=2]="LOADING",i[i.LOADED=3]="LOADED";class eS{get isUnloaded(){return 0===this.loadState}get isWaiting(){return 1===this.loadState}get isLoading(){return 2===this.loadState}get isLoaded(){return 3===this.loadState}get isPosted(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isPosted()}get hasNewSubmission(){return!p.isNull(this.data)&&this.data.needsGradingAttemptCount>0}get isPastDueZero(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isPastDueZero()}get isExempt(){var e;return!p.isNil(null===(e=this.data)||void 0===e?void 0:e.grade)&&this.data.grade.isExempt}setLoadState(e){this.loadState=e}getScore(e){let t=this.getGrade();if(null==t)return;let n=t.displayGrade,i=this.column.data,r=this.getGridData().getSchema()[i.gradingSchemaId],s=this.$injector.instantiate(eg.G,{scope:e,gradeDetail:t});return s.init(i,r),s.displayGrade=n,s.parsedValue}getGrade(){return p.isNull(this.data)?void 0:this.data.grade}view(){throw Error("Unsupported operation exception")}openExceptionPanel(){throw Error("Unsupported operation exception")}exempt(){throw Error("Unsupported operation exception")}post(){return this.data&&this.column.data.grades.$new(this.data.grade.id).postReadyGrades()}get canBeView(){return!1}get viewFeedback(){return!1}shouldAllowUserToAddExceptions(){return!1}canExempt(){return!1}get isReadyToPost(){return!this.isPosted}canPost(){return this.gradebookPermissionService.canPostGrades(null,this.column.data)}getGridData(){return this.gridData}get isCleanAttemptGrade(){return!1}get isNeedAutoPost(){return!1}get canBeEdited(){return this.column.data.delegatedGrading?this.canPost():!this.isAnonymousGrading}get isAnonymousGrading(){return this.column.data.anonymousGrading}openExceptionPeekPanel(){let e;let t={columnId:this.column.id,userId:this.row.metadata.user.id,contentId:this.column.data.contentId};(T.u$1.Test.isEqualTo(this.column.data.scoreProviderHandle)||T.u$1.Survey.isEqualTo(this.column.data.scoreProviderHandle))&&!this.column.data.groupContent&&(t.membershipId=this.row.metadata.id,e=K.Z5.Grade.PER_ASSESSMENT_SETTINGS,this.ultraState.goPeekState(e,t))}openEditPerGradableItemExemptionPanel(){let e={courseId:this.gridData.course.id,columnId:this.column.id,userId:this.row.metadata.user.id};this.ultraState.goPeekState(K.RK.PER_GRADABLE_ITEM_SETTINGS,e)}canViewAndModifyGradeBook(){return this.entitlementService.areAllEntitled([D.SE.ModifyGradebook,D.SE.ViewGrades,D.SE.ViewGradebookMetaData])}canEnterFeedback(){return this.entitlementService.isEntitled(D.SE.EnterFeedback)}canViewAssessmentException(){return this.entitlementService.isEntitled(D.SE.AssessmentViewException)}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p=null,m=null,h=0){this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=r,this.attemptSelectionService=s,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this.data=p,this.exceptions=m,this.loadState=h}}eS=ev([ey(0,(0,x.tB)("$q")),ey(1,(0,x.tB)("$injector")),ey(2,(0,x.tB)(F.HV)),ey(3,(0,x.tB)(eh.N7.H)),ey(4,(0,x.tB)(H.HV)),ey(5,(0,x.tB)(eb.HV)),ey(6,(0,x.tB)(j.HV)),ey(7,(0,x.tB)(y.HV)),ey(8,(0,x.tB)(_.HV)),ey(9,(0,x.tB)("gridData")),ey(10,(0,x.tB)("row")),ey(11,(0,x.tB)("column"))],eS);class eC extends eS{constructor(e,t,n,i,r,s,o,a,l,c,d,u){super(e,t,n,i,r,s,o,a,l,c,d,u,null,null,3),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=r,this.attemptSelectionService=s,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u}}eC.$inject=[],eC=ev([ey(0,(0,x.tB)("$q")),ey(1,(0,x.tB)("$injector")),ey(2,(0,x.tB)(F.HV)),ey(3,(0,x.tB)(eh.N7.H)),ey(4,(0,x.tB)(H.HV)),ey(5,(0,x.tB)(eb.HV)),ey(6,(0,x.tB)(j.HV)),ey(7,(0,x.tB)(y.HV)),ey(8,(0,x.tB)(_.HV)),ey(9,(0,x.tB)("gridData")),ey(10,(0,x.tB)("row")),ey(11,(0,x.tB)("column"))],eC);class eE extends eS{}class eI extends eS{canPost(){return!1}get canBeEdited(){return!1}}class ew extends eS{}class eA extends ew{get canBeView(){return this.gradebookPermissionService.canViewGrades()}get viewFeedback(){return!1}view(){this.ultraState.goPeekState(K.RK.GRADE_AND_FEEDBACK,{columnId:this.column.id,userId:this.row.metadata.user.id})}shouldAllowUserToAddExceptions(){return!1}exempt(){this.openEditPerGradableItemExemptionPanel()}canExempt(){return this.canViewAndModifyGradeBook()}}class ek extends ew{getGroupId(){}get canBeView(){return this.gradebookPermissionService.canViewAttempts()&&!!this.data&&this.data.attemptCount>0}isGraded(){return!!this.data&&this.data.grade.isGraded()}get viewFeedback(){return this.gradebookPermissionService.canViewAttempts()&&this.canEnterFeedback()&&this.isGraded()}openGradeAndFeedbackPanel(){let e=this.row.metadata.user;e&&this.ultraState.goPeekState(K.RK.GRADE_AND_FEEDBACK,{columnId:this.column.id,userId:e.id,feedbackType:D.cQ.FeedbackType.Override})}view(){if(null!=this.column.data.linkId&&(T.u$1.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)||T.u$1.LTILink.isEqualTo(this.column.data.scoreProviderHandle)))this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).grades.$new(this.data.grade.id).attempts.$fetch().$then(e=>{let t=em.YD({gradableItemId:this.column.id,courseId:this.gridData.course.id,attemptId:e[0].id,membershipId:this.row.metadata.id,linkId:this.column.data.linkId}),n=(0,ef.Rl)(this.column.data.linkId);T.u$1.PartnerCloud.isEqualTo(this.column.data.scoreProviderHandle)?this.partnerSettingsModel.getSettingsById(n).then(e=>this.ltiService.launch(t,!e.responsive)):this.ltiService.launch(t)});else{var e;let t={courseId:this.gridData.course.id,columnId:this.column.id,gradeId:this.data.grade.id,contentId:this.column.data.contentId,userId:this.row.metadata.user.id},n=(null===(e=this.data.grade.attempts)||void 0===e?void 0:e.length)>this.column.data.multipleAttempts,i=this.column.data.isAttemptBased&&(this.column.data.isMultipleAttempts()||n);if(!i||this.scoreProviderHelper.isFlexGradingAvailable(this.column.data,{})){if(this.data.grade.lastAttemptId)t.attemptId=this.data.grade.lastAttemptId;else if(this.data.grade.attempts&&this.data.grade.attempts.length){let e=p.last(this.data.grade.attempts);t.attemptId=e&&e.id}else if(this.data.grade.groupAttempts&&this.data.grade.groupAttempts.length){let e=p.last(this.data.grade.groupAttempts);t.attemptId=e&&e.id}}t.groupId=this.getGroupId(),i&&!this.scoreProviderHelper.isFlexGradingAvailable(this.column.data,{groupId:t.groupId})?this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.column.id).$fetch().$asPromise().then(e=>{this.attemptSelectionService.goToMultipleAttemptsGrading(t,e)}):this.scoreProviderHelper.gradingStateRef(this.column.data,this.data.grade,t,H.tU.GoToState)}}exempt(){this.openEditPerGradableItemExemptionPanel()}canExempt(){var e;return null!==(e=this.column.data)&&void 0!==e&&!!e.scorable&&!this.isAnonymousGrading&&this.canViewAndModifyGradeBook()}openExceptionPanel(){this.openExceptionPeekPanel()}shouldAllowUserToAddExceptions(){return(T.u$1.Test.isEqualTo(this.column.data.scoreProviderHandle)||T.u$1.Survey.isEqualTo(this.column.data.scoreProviderHandle))&&!this.column.data.anonymousGrading&&!this.column.data.collectExternalSubmissions&&this.canViewAndModifyGradeBook()&&this.canViewAssessmentException()}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m=null,h=null,g=0){super(e,t,n,i,r,s,o,a,l,c,d,u,m,h,g),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=r,this.attemptSelectionService=s,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this.partnerSettingsModel=p,this.data=m,this.exceptions=h,this.loadState=g}}ek=ev([ey(0,(0,x.tB)("$q")),ey(1,(0,x.tB)("$injector")),ey(2,(0,x.tB)(F.HV)),ey(3,(0,x.tB)(eh.N7.H)),ey(4,(0,x.tB)(H.HV)),ey(5,(0,x.tB)(eb.HV)),ey(6,(0,x.tB)(j.HV)),ey(7,(0,x.tB)(y.HV)),ey(8,(0,x.tB)(_.HV)),ey(9,(0,x.tB)("gridData")),ey(10,(0,x.tB)("row")),ey(11,(0,x.tB)("column")),ey(12,(0,x.tB)(eh.km.H))],ek);class eT extends ek{getGroupId(){return this.group.groupId}get group(){return this._group}openExceptionPanel(){var e;let t;let n={columnId:this.column.id,userId:null===(e=this.row.metadata.user)||void 0===e?void 0:e.id,contentId:this.column.data.contentId};T.u$1.Test.isEqualTo(this.column.data.scoreProviderHandle)&&(n.groupId=this.getGroupId(),t=K.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,this.ultraState.goPeekState(t,n))}get viewFeedback(){return!1}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m){super(e,t,n,i,r,s,o,a,l,c,d,u,m),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=r,this.attemptSelectionService=s,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this._group=p,this.partnerSettingsModel=m}}eT.$inject=[],eT=ev([ey(0,(0,x.tB)("$q")),ey(1,(0,x.tB)("$injector")),ey(2,(0,x.tB)(F.HV)),ey(3,(0,x.tB)(eh.N7.H)),ey(4,(0,x.tB)(H.HV)),ey(5,(0,x.tB)(eb.HV)),ey(6,(0,x.tB)(j.HV)),ey(7,(0,x.tB)(y.HV)),ey(8,(0,x.tB)(_.HV)),ey(9,(0,x.tB)("gridData")),ey(10,(0,x.tB)("row")),ey(11,(0,x.tB)("column")),ey(12,(0,x.tB)("group")),ey(13,(0,x.tB)(eh.km.H))],eT);class eP extends eT{get canBeView(){return!0}get viewFeedback(){return!1}view(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id,disGroupId:this.getGroupId()})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}shouldAllowUserToAddExceptions(){return!1}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m){super(e,t,n,i,r,s,o,a,l,c,d,u,p,m),this.$q=e,this.$injector=t,this.ltiService=n,this.CourseModel=i,this.scoreProviderHelper=r,this.attemptSelectionService=s,this.ultraState=o,this.gradebookPermissionService=a,this.entitlementService=l,this.gridData=c,this.row=d,this.column=u,this.partnerSettingsModel=m}}eP.$inject=[],eP=ev([ey(0,(0,x.tB)("$q")),ey(1,(0,x.tB)("$injector")),ey(2,(0,x.tB)(F.HV)),ey(3,(0,x.tB)(eh.N7.H)),ey(4,(0,x.tB)(H.HV)),ey(5,(0,x.tB)(eb.HV)),ey(6,(0,x.tB)(j.HV)),ey(7,(0,x.tB)(y.HV)),ey(8,(0,x.tB)(_.HV)),ey(9,(0,x.tB)("gridData")),ey(10,(0,x.tB)("row")),ey(11,(0,x.tB)("column")),ey(12,(0,x.tB)("group")),ey(13,(0,x.tB)(eh.km.H))],eP);class eD extends ek{get canBeView(){return!0}get viewFeedback(){return!1}view(){this.ultraState.goPeekState("submission-list",{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.user.id})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}shouldAllowUserToAddExceptions(){return!1}}class ex extends ek{get canBeView(){return!0}get viewFeedback(){return!1}view(){this.ultraState.goPeekState(K.Eg.JOURNAL_PARTICIPATION_DETAIL,{courseId:this.gridData.course.id,columnId:this.column.id,contentId:this.column.data.contentId,participantId:this.row.metadata.id,gradebookView:"grid"})}get isCleanAttemptGrade(){return!0}get isNeedAutoPost(){return!0}}class eR extends ew{get isAttendance(){return!0}get canBeView(){return!0}get viewFeedback(){return!1}view(){let e=this.row.metadata.user.id,t=this.row.metadata.id;this.ultraState.goPeekState("attendance-student-records",{userId:e,membershipId:t})}}var eL=n(780891),eN=n(312019),e$=n(860995),eO=n(986709),eG=n(363411);function e_(e,t){return function(n,i){t(n,i,e)}}class eM{isCellExisting(e){return this.isCellExistingByColumnId(e.column.id)}isCellExistingByColumnId(e){return!p.isUndefined(this.cells[e])}insertDataCell(e){this.isCellExisting(e)||(this.cells[e.column.id]=e)}deleteDataCellByColumnId(e){this.isCellExistingByColumnId(e)&&delete this.cells[e]}constructor(e,t){this.cells=e,this.metadata=t}}class eB{get canViewGrades(){return this._canViewGrades}get course(){return this._course}getSchema(){return this.gradeSchemaBySchemaId}getColumnIdGroupsMap(){return this.assignedGroupByGradeColumnId}getAllGroupMemberships(){return this.allGroupMemberships}getGroupIdUserIdMap(){return this.userIdsByGroupId}getGroupIdMembershipIdMap(){return this.membershipsByGroupId}initializeSchemas(e){this.gradeSchemaBySchemaId={},e.forEach(e=>{this.gradeSchemaBySchemaId[e.id]=e})}initialize(e,t){this._course=e,this.courseId=e.id,this.columnMetadatas=t;let n=this.entitlementService.hasCourseEntitlement(B.pQ.ViewGroups,this.courseId).then(e=>(this.canViewGroups=e,this.canViewGroups)?this.initializeGroupsMemberships():this.$q.resolve(!1)),i=this.entitlementService.hasAnyCourseEntitlement([D.SE.ViewGrades,D.SE.ViewGrades],e.id).then(e=>(this._canViewGrades=e,e)),r=this.loadSchemas(this.courseId).then(e=>{this.initializeSchemas(e)}),s=this.fetchPaginatedMembership({},0).then(e=>{this.dataRowsByMembershipId={},this.insertRows(e);let t=!1;this.columns=this.getColumnMetadatas().map(e=>(e.externalGrade&&(t=e.externalGrade),this.insertColumnByMetadata(e)));let n=this.createStudentColumn(t);return this.insertColumn(n,!0),{memberships:e,columns:this.columns,learnPagingResponse:{...e.paging}}});return this.$q.all([s,n,r,i]).then(e=>this.deferredInit.resolve(e[0])).catch(e=>this.deferredInit.reject(e)),this.getOverallColumn(),this.initialized}getAssignedGroupsByColumnId(e){return this.assignedGroupByGradeColumnId[e]}loadSchemas(e){return this.schemaService.loadSchemas(e)}initializeColumnIdGroupsMap(e){this.assignedGroupByGradeColumnId={},p.isEmpty(this.getColumnMetadatas())||this.getColumnMetadatas().forEach(t=>{t.contentId&&!t.isScorm()&&e[t.contentId]&&(this.assignedGroupByGradeColumnId[t.id]=e[t.contentId])})}initializeGroupsMemberships(){return this.allGroupMemberships=[],this.getGroupsMemberships().then(()=>(this.initializeGroupIdUserIdMap(),!0))}initializeGroupIdUserIdMap(){this.userIdsByGroupId={},this.membershipsByGroupId={};let e={};this.allGroupMemberships.forEach(t=>{t.memberships&&(this.userIdsByGroupId[t.id]=t.memberships.map(e=>e.userId),this.membershipsByGroupId[t.id]=t.memberships.map(e=>e.membershipId)),t.assignedContents.forEach(t=>{(e[t.contentId]=e[t.contentId]||[]).push(t)})}),this.initializeColumnIdGroupsMap(e)}getGroupsMemberships(){return this.course.groups.$refresh({offset:this.allGroupMemberships.length,limit:1e4,fields:"id,memberships,assignedContents"}).$asPromise().then(e=>(this.allGroupMemberships=this.allGroupMemberships.concat(e),e.paging.nextPage)?this.getGroupsMemberships():this.allGroupMemberships)}fetchPaginatedMembership(e,t,n=eB.MEMBERSHIPS_SORTING){return this.course.memberships.$refresh({fields:eB.MEMBERSHIPS_REQUEST_FIELDS,sort:n,...D.z8,...e,offset:t,limit:20,includeCount:!0}).$asPromise()}getFilteredColumns(e){let t=[];return this.course.gradebook.columns.$refresh({expand:"collectExternalSubmissions",...e}).$asPromise().then(n=>{if(n.filter(e=>!1===e.visibleInBook).forEach(e=>n.$remove(e)),t=t.concat(n),this.formativeFeatureFlag&&e.assessmentType){let n=e.assessmentType.split(",");t=t.filter(e=>this.AssessmentTypeFilterHelper(n,e))}let i=t.some(e=>!!e.externalGrade);if(Object.keys(e).length>0&&this.overallGradeColumn&&!i&&t.push(this.overallGradeColumn),n.paging.nextPage)return this.getFilteredColumns(e);if((null==t?void 0:t.length)>0){this.expandColumnSummaries(t);let e=t.map(e=>(e.externalGrade&&(i=e.externalGrade),this.updateColumnByMetadata(e)));this.columns=e;let n=this.createStudentColumn(i);return e.unshift(n),e}return[]})}AssessmentTypeFilterHelper(e,t){return!!(e.includes(D.IQ.Formative)&&e.includes(D.IQ.Summative))||(e.includes(D.IQ.Formative)?!!t.isFormative:!!e.includes(D.IQ.Summative)&&!t.isFormative)}getOverallColumn(){this.course.gradebook.columns.$find("finalGrade",{expand:"collectExternalSubmissions"}).$allow([eO.oji.NotFound]).$asPromise().then(e=>{var t;(null===(t=e.$response)||void 0===t?void 0:t.status)!==eO.oji.NotFound&&(this.overallColumn=this.createOverallColumn(e))})}clearOverallColumn(){this.overallGradeColumn=void 0,this.overallColumn=void 0}expandColumnSummaries(e){var t,n;this.isSummaryLoaded=!1;let i=null!==(n=null===(t=e.paging)||void 0===t?void 0:t.count)&&void 0!==n?n:this.MAX_SUMMARY_REQUEST_SIZE,r=this.course.gradebook.summaries.expandingColumns(e);return this.$q.all(p.range(0,i,this.MAX_SUMMARY_REQUEST_SIZE).map(e=>r.$fetch({limit:this.MAX_SUMMARY_REQUEST_SIZE,offset:e,excludeCalculations:!0}).$asPromise())).then(()=>(this.isSummaryLoaded=!0,e))}fetchGradeBulkView(e,t,n){return e.gradebook.bulkView.$fetch({membershipIds:t,columnIds:n,expand:"attempts,lastAttemptId,needsGradingAttemptCount,groupAttempts,exceptions",timestamp:new Date().getTime()}).$asPromise()}createColumnByColumnMetadata(e){return e.externalGrade?(this.overallColumn=this.createOverallColumn(e),this.overallColumn):e.isCalculated()?this.createCalculationColumn(e):e.isOffline()?this.createOfflineItemColumn(e):e.isDiscussion()?p.isEmpty(this.assignedGroupByGradeColumnId[e.id])?this.createDiscussionItemColumn(e):this.createGroupDiscussionGradeColumn(e,this.assignedGroupByGradeColumnId[e.id]):e.isAttendance()?this.createAttendanceItemColumn(e):this.assignedGroupByGradeColumnId[e.id]?this.createGroupTestGradeColumn(e,this.assignedGroupByGradeColumnId[e.id]):e.seemsAttemptBased()&&e.scoreProviderHandle?this.createAttemptBasedItemGradeColumn(e):e.scoreProviderHandle?this.createItemGradeColumn(e):this.createOfflineItemColumn(e)}createStudentColumn(e){return this.$injector.instantiate(ee,{gridData:this,data:{id:eB.COLUMN_STUDENT},headerTemplate:"<bb-grade-grid-column-header-student-reborn></bb-grade-grid-column-header-student-reborn>",cellTemplate:"<bb-grade-grid-column-student-reborn></bb-grade-grid-column-student-reborn>",columnWidth:eB.STUDENT_COLUMN_WIDTH,position:"left",border:!e,order:0,sortable:this.isGridSortingEnabled,isStudentColumn:!0})}createOverallColumn(e){return this.overallGradeColumn=e,this.$injector.instantiate(et,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-overall-reborn></bb-grade-grid-column-header-overall-reborn>",cellTemplate:"<bb-grade-grid-column-overall-reborn></bb-grade-grid-column-overall-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"left",border:!0,order:10,sortable:this.isGridSortingEnabled,isStudentColumn:!1})}createCalculationColumn(e){return this.$injector.instantiate(ei,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createItemGradeColumn(e){return this.$injector.instantiate(er,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createOfflineItemColumn(e){return this.$injector.instantiate(es,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createDiscussionItemColumn(e){return this.$injector.instantiate(eu,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createAttendanceItemColumn(e){return this.$injector.instantiate(eo,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createAttemptBasedItemGradeColumn(e){return this.$injector.instantiate(ea,{gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createGroupTestGradeColumn(e,t){return this.$injector.instantiate(ec,{groups:t,gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}createGroupDiscussionGradeColumn(e,t){return this.$injector.instantiate(ed,{groups:t,gridData:this,data:e,headerTemplate:"<bb-grade-grid-column-header-reborn></bb-grade-grid-column-header-reborn>",cellTemplate:"<bb-grade-grid-column-reborn></bb-grade-grid-column-reborn>",columnWidth:eB.COLUMN_WIDTH,position:"center",border:!0,order:0,sortable:this.shouldAllowSorting(e),isStudentColumn:!1})}shouldAllowSorting(e){return this.isGridSortingEnabled&&!!e&&!e.isAnonymousGrading()}getColumnMetadata(e){return p.find(this.columnMetadatas,t=>t.id===e)}getColumnMetadataByContentId(e){return p.find(this.columnMetadatas,t=>t.contentId===e)}isColumnMetadataExisting(e){return!p.isUndefined(this.getColumnMetadata(e))}getColumnMetadatas(){return this.columnMetadatas}getRowById(e){return this.dataRowsByMembershipId[e]}getRowByUserId(e){return p.find(p.values(this.dataRowsByMembershipId),t=>t.metadata.user.id===e)}getGroupById(e){return this.allGroupMemberships.find(t=>t.id===e)}getCell(e,t){return this.dataRowsByMembershipId[e].cells[t]}insertRows(e){e.forEach(e=>this.insertRow(e))}insertRow(e){this.dataRowsByMembershipId[e.id]=new eM({},e)}createCell(e,t){if(t.id===eB.COLUMN_STUDENT)return this.$injector.instantiate(eC,{gridData:this,row:e,column:t});let n=t.data;return n.externalGrade?this.$injector.instantiate(eE,{gridData:this,row:e,column:t}):n.isCalculated()?this.$injector.instantiate(eI,{gridData:this,row:e,column:t}):n.isOffline()?this.$injector.instantiate(eA,{gridData:this,row:e,column:t}):n.isDiscussion()?t instanceof el&&t.userIdGroupIdMap[e.metadata.user.id]?this.$injector.instantiate(eP,{gridData:this,row:e,column:t,group:t.getGroupById(t.userIdGroupIdMap[e.metadata.user.id])}):this.$injector.instantiate(eD,{gridData:this,row:e,column:t}):n.isAttendance()?this.$injector.instantiate(eR,{gridData:this,row:e,column:t}):t instanceof el&&t.userIdGroupIdMap[e.metadata.user.id]?this.$injector.instantiate(eT,{gridData:this,row:e,column:t,group:t.getGroupById(t.userIdGroupIdMap[e.metadata.user.id])}):n.isJournal()?this.$injector.instantiate(ex,{gridData:this,row:e,column:t}):n.seemsAttemptBased()?this.$injector.instantiate(ek,{gridData:this,row:e,column:t}):this.$injector.instantiate(ew,{gridData:this,row:e,column:t})}insertColumn(e,t=!1){t?this.columns.unshift(e):this.columns.push(e),this.insertDataCells(e)}insertDataCells(e){p.forOwn(this.dataRowsByMembershipId,t=>t.insertDataCell(this.createCell(t,e)))}insertColumnByMetadata(e){let t=this.createColumnByColumnMetadata(e);return this.insertColumn(t),t}updateColumnByMetadata(e){this.isColumnExisting(e.id)&&this.deleteColumnById(e.id);let t=this.createColumnByColumnMetadata(e);return this.insertColumnAtIndex(t,this.getColumnMetadataIndexInColumnMetadatas(e)+1),this.insertDataCells(t),t}refreshDataCell(e,t){p.isUndefined(e)||(e.deleteDataCellByColumnId(t.id),e.insertDataCell(this.createCell(e,t)))}deleteColumn(e){this.deleteColumnById(e.id)}deleteColumnById(e){let t=p.remove(this.columns,t=>t.id===e);this.deleteDataCellsByColumnId(e),t&&t[0]&&t[0].data&&t[0].data.contentId&&(t=p.remove(this.columns,e=>e.data&&e.data.contentId===t[0].data.contentId)).forEach(e=>this.deleteDataCellsByColumnId(e.id))}deleteDataCellsByColumnId(e){p.forOwn(this.dataRowsByMembershipId,t=>t.deleteDataCellByColumnId(e))}getColumnMetadataIndexInColumnMetadatas(e){return p.findIndex(this.columnMetadatas,t=>e.id===t.id)}insertColumnAtIndex(e,t){this.columns.splice(t,0,e)}getColumn(e){return p.find(this.columns,t=>t.id===e)}getColumns(){return this.columns}isColumnExisting(e){return!p.isUndefined(this.getColumn(e))}getRowCount(){return p.keys(this.dataRowsByMembershipId).length}loadGradeData(e,t){if(p.isEmpty(e)||p.isEmpty(t)||p.isEmpty(t.filter(e=>e.id!==eB.COLUMN_STUDENT)))return;let[n,i]=this.filterRowsAndColumns(e.map(e=>e.id),t.map(e=>e.id),e=>e.isUnloaded||e.isWaiting);p.isEmpty(n)||p.isEmpty(i)||this.prepareFetchGrades(n,eB.ROW_NUMBER_PER_REQUEST,i,eB.COLUMN_NUMBER_PER_REQUEST)}filterRowsAndColumns(e,t,n){let i=this.filterRows(e,t,n),r=this.filterColumns(i,t,n);return[i,r]}filterRows(e,t,n){let i=[];return e.forEach(e=>{let r=this.dataRowsByMembershipId[e];p.find(t,e=>n(r.cells[e]))&&i.push(e)}),i}filterColumns(e,t,n){let i=[];return t.forEach(t=>{p.find(e,e=>n(this.dataRowsByMembershipId[e].cells[t]))&&i.push(t)}),i}prepareFetchGrades(e,t,n,i){let r=p.isEmpty(this.requestQueue),s=[];p.chunk(e,t<=0?e.length:t).forEach(e=>{p.chunk(n,i<=0?n.length:i).forEach(t=>{r?this.requestQueue.push([e,t]):s.push([e,t]),this.markWaiting(e,t)})}),this.requestQueue=s.concat(this.requestQueue),r&&this.fetchGrades()}fetchGrades(){for(let e=0;e<eB.REQUEST_WORKER_NUMBER;e++)this.fetchGrade()}fetchGrade(){if(!p.isEmpty(this.requestQueue)){let[e,t]=this.requestQueue.shift();[e,t]=this.filterRowsAndColumns(e,t,e=>e.isWaiting),p.isEmpty(e)||p.isEmpty(t)?this.fetchGrade():(this.markLoading(e,t),this.fetchGradeBulkView(this.CourseModel.$new(this.courseId),e,t).then(n=>{this.assignGrade(n),this.assignException(n),this.markLoaded(e,t),this.fetchGrade()}))}}assignGrade(e){e.bulkViewUsers.forEach(e=>{if(null!=e.courseMembershipId){let t=this.dataRowsByMembershipId[e.courseMembershipId];null!=e.grades&&e.grades.forEach(e=>{let n=t.cells[e.columnId];n.isLoading&&(n.data=e)})}})}assignException(e){e.bulkViewUsers.forEach(e=>{if(e.exceptions){var t;let n=this.dataRowsByMembershipId[null!==(t=e.courseMembershipId)&&void 0!==t?t:e.exceptions[0].membershipId];e.exceptions.forEach(e=>{if(null!=e.columnId){let t=n.cells[e.columnId];(null==t?void 0:t.isLoading)&&(t.exceptions=e)}})}})}applyGradesFromState(e){var t;let n=this.getRowById(e.memberId),i=null==n?void 0:n.cells[e.columnId],r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.grade;r&&r.isExempt!==e.isExempt?(r.isExempt=e.isExempt,this.broadcastGradeStatusChange(i,n)):!r&&e.isExempt&&this.broadcastGradeStatusChange(i,n)}broadcastGradeStatusChange(e,t){var n,i;let r=null;e.column instanceof el&&(r=e.column.groups[0].groupId),this.gradeGridRebornDirectiveScope.$broadcast(W.DATA_UPDATE),this.gradeGridRebornDirectiveScope.$broadcast(S.Lg,{columnId:e.column.id,groupId:r,userId:null==t?void 0:null===(i=t.metadata)||void 0===i?void 0:null===(n=i.user)||void 0===n?void 0:n.id,updateColumn:!0})}markWaiting(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isUnloaded&&n.setLoadState(l.WAITING)}))}markLoading(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isWaiting&&n.setLoadState(l.LOADING)}))}markLoaded(e,t){e.forEach(e=>t.forEach(t=>{let n=this.dataRowsByMembershipId[e].cells[t];n.isLoading&&n.setLoadState(l.LOADED)})),this.broadcastRefreshEvent(e,t)}broadcastRefreshEvent(e,t){e.forEach(e=>{let n=t.filter(t=>this.dataRowsByMembershipId[e].cells[t].isLoaded);this.gradeGridRebornDirectiveScope.$broadcast(eL.T.REFRESH,{rowId:e,columnIds:n})})}refreshAllColumns(){p.forEach(this.getColumnMetadatas(),e=>this.updateColumnByMetadata(e))}insertNewRowsForEachColumns(e){this.columns.forEach(t=>{e.forEach(e=>{let n=this.dataRowsByMembershipId[e.id];n.insertDataCell(this.createCell(n,t))})})}addStudentAndOverAllColumnForRows(e){e.forEach(e=>{this.insertDataCells(this.columns[0]),this.overallColumn&&this.insertDataCells(this.overallColumn)})}addUpdatedColumnFlag(e){p.forEach(e,e=>{let t=p.find(this.columns,t=>t.id===e);t&&(t.isUpdated=!0)})}destroy(){this.requestQueue=[]}constructor(e,t,n,i,r,s,o,a,l){this.$rootScope=e,this.$injector=t,this.$q=n,this.CourseModel=i,this.entitlementService=r,this.schemaService=s,this.currentCourse=o,this.gradeGridRebornDirectiveScope=a,this.featureFlagService=l,this._canViewGrades=!1,this.gradeSchemaBySchemaId={},this.dataRowsByMembershipId={},this.columns=[],this.assignedGroupByGradeColumnId={},this.allGroupMemberships=[],this.userIdsByGroupId={},this.membershipsByGroupId={},this.requestQueue=[],this.canViewGroups=!1,this.formativeFeatureFlag=!1,this.isGridSortingEnabled=!1,this.isSummaryLoaded=!1,this.MAX_SUMMARY_REQUEST_SIZE=1e3,M.Z.OnRootScope(this.$rootScope,S.Ui,(e,t)=>{let n=this.getColumnMetadatas().find(e=>e.id===t);n&&this.$rootScope.$broadcast(S.JH,n)}),this.featureFlagService.createWaiter(T.x40.GridSorting).then(e=>{this.isGridSortingEnabled=e}),this.$q.when(l.createWaiter(T.x40.FormativeAssessment)).then(e=>{this.formativeFeatureFlag=e}),this.deferredInit=this.$q.defer(),this.initialized=this.deferredInit.promise;let c=a.$watchCollection("columnMetadatas",e=>{e&&(this.initialize(this.currentCourse.course,e),c())})}}function eF(e,t){return function(n,i){t(n,i,e)}}eB.COLUMN_WIDTH=142,eB.COLUMN_STUDENT="COLUMN_STUDENT",eB.STUDENT_COLUMN_WIDTH=220,eB.REQUEST_WORKER_NUMBER=5,eB.ROW_NUMBER_PER_REQUEST=0,eB.COLUMN_NUMBER_PER_REQUEST=0,eB.MEMBERSHIPS_REQUEST_FIELDS="role,childCourseId,id,isAvailable,dueDateExceptionType,user.userName,user.givenName,user.familyName,user.preferredDisplayName,user.avatar,user.id,user.permissions.delete,user.permissions.create,user.studentId,courseRole.courseName.languageKey,courseRole.courseName.bundle,courseRole.sortOrder,courseRole.roleBucket,courseRole.id,courseRole.identifier",eB.MEMBERSHIPS_SORTING=(0,T.C4U)(D.Y3),eB=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([e_(0,(0,x.tB)("$rootScope")),e_(1,(0,x.tB)("$injector")),e_(2,(0,x.tB)("$q")),e_(3,(0,x.tB)(eN.H)),e_(4,(0,x.tB)(_.HV)),e_(5,(0,x.tB)(ep.HV)),e_(6,(0,x.tB)(e$.HV)),e_(7,(0,x.tB)("gradeGridRebornDirectiveScope")),e_(8,(0,x.tB)(eG.HV))],eB);let eU="ultra.components.services.gradebookSearchbox",eV="gradebookSearchbox";(r=c||(c={})).USER="user",r.COLUMN="column",r.CATEGORY="category",r.NO_RESULT="noResult";class eH{typeAheadSearch(e,t,n,i,r){return this.$q.when((async()=>{let n=RegExp("^.*"+e.replace(eH.REGULAR_EXPRESSION_TOKENS,"\\$&")+".*$","i"),s=[];return(await this.fetchMembershipWithSearchText(e,i,r)).forEach(e=>{s.push({type:"user",data:e})}),this.searchColumnResults(n,e,t).forEach(e=>{s.push({type:"column",data:e})}),this.searchCategoryResults(n,e,t).forEach(e=>{s.push({type:"category",data:e,id:e.data.gradebookCategory.id})}),0===s.length&&s.push({type:"noResult",data:null}),s})())}async fetchMembershipWithSearchText(e,t,n){return t.memberships.$refresh({q:e,fields:eB.MEMBERSHIPS_REQUEST_FIELDS,...D.z8,limit:60,includeMe:!1,sort:(0,T.C4U)(D.Y3),...n}).$asPromise()}searchColumnResults(e,t,n){let i=[t=>e.test(`${t.data.columnName}`)],r=n.filter(e=>!(e instanceof ee||e instanceof et));return(0,p.orderBy)(r.filter(e=>{let n=0,r=i.findIndex(t=>t(e));return -1!==r&&(n=e.data.effectiveColumnName&&e.data.effectiveColumnName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=n,r>=0}),["weight","data.columnName"],["asc","asc"])}searchCategoryResults(e,t,n){let i=[t=>{let n=this.getCategoryTitle(t.data.gradebookCategory);return e.test(`${n}`)}],r=n.filter(e=>!!e.data.gradebookCategory),s=(0,p.uniqBy)(r,e=>e.data.gradebookCategory.id);return(0,p.orderBy)(s.filter(e=>{let n=0,r=i.findIndex(t=>t(e)),s=this.getCategoryTitle(e.data.gradebookCategory);return -1!==r&&(n=s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())),e.weight=n,r>=0}),["weight","data.categoryTitle"],["asc","asc"])}getCategoryTitle(e){return e.isUserDefined?e.title:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$rootScope),key:e.localizableTitle.languageKey})}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.bbLocalize=n}}eH.REGULAR_EXPRESSION_TOKENS=/[-\/\\^$*+?.()|[\]{}]/g,eH=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([eF(0,(0,x.tB)("$rootScope")),eF(1,(0,x.tB)("$q")),eF(2,(0,x.tB)(I.serviceName))],eH),m.module(eU,[I.moduleName]).service(eV,eH);var eq=n(504503),ej=n(890532),ez=n(65783),eW=n(232085);n(473611),n(547648),n(214003),n(496275),n(691385),n(290108),n(411463),n(284407),n(754811);var eK=n(236577);let eZ="ultra.components.directives.gradeGridColumnHeaderStudentReborn";class eQ{constructor(e,t,n,i){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,e.studentsTotal=i.getRowCount(),e.$on(W.CELL_FOCUSED,()=>{this.gradeGridRebornController.isGridSortingEnabled?t.find(".sorting-header-column").focus():t.find(".content").focus()}),[eL.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,eL.T.ADVANCED_FILTERS_ROWS,W.ROW].forEach(t=>{e.$on(t,()=>{this.scope.studentsTotal=i.getRowCount()})}),e.$on(eL.T.GRADEBOOK_USER_SELECTED,()=>{this.scope.studentsTotal=1})}}eQ.$inject=["scope","element","attrs","gradeGridRebornController"];class eJ{constructor(e){this.$injector=e,this.restrict="E",this.template=eK,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderStudentReborn=this.$injector.instantiate(eQ,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}eJ.$inject=["$injector"],m.module(eZ,[]).directive("bbGradeGridColumnHeaderStudentReborn",["$injector",e=>e.instantiate(eJ)]);var eY=n(23332);n(294675);var eX=n(984654);let e0="ultra.components.directives.group.filteredUsersGroups",e1={Class:D.uD,withProvider:!0,renderLocalized:!0,bindingNames:["userId"]};m.module(e0,[I.moduleName]).component("bbFilteredUsersGroups",(0,eX.G5)(e1));let e2="ultra.components.directives.grade.studentNameTooltip",e4={Class:D.Vt,bindingNames:["fullName","membershipId","userId"],renderLocalized:!0,withProvider:!0};function e6(e,t){return function(n,i){t(n,i,e)}}m.module(e2,[]).component("studentNameTooltip",(0,eX.G5)(e4));let e5="ultra.components.directives.gradeGridColumnStudentReborn";class e3{getLocalizedRoleNameByCourseRole(e){return e.identifier&&e.identifier.toString() in eh.XY.M4?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:eh.XY.M4[e.identifier.toString()]}):e.courseName.rawValue}viewIndividualGrades(e,t){this.ultraState.goPeekState(K.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{userId:e,membershipId:t})}constructor(e,t,n,i,r,s,o){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.bbLocalize=r,this.ultraState=s,this.entitlementService=o,e.$watch("row",t=>{let n=i.getGridData().getRowById(t.id).metadata;this.hasItemExceptionView=this.entitlementService.isEntitled(D.SE.ViewException,n.course.id),this.hasAssessmentExceptionView=this.entitlementService.isEntitled(B.iL.ViewException,n.course.id),e.isDisabled=!(this.hasItemExceptionView&&this.hasAssessmentExceptionView),e.user=n.user,e.membershipId=n.id,e.fullName=this.bbLocalize.formatUsernameSync(e.user,I.ILocaleUsernameFormat.Short,e,{noWrap:!0,noEscape:!0}),e.isUserCourseAvailable=n.isAvailable,e.courseRole=this.getLocalizedRoleNameByCourseRole(n.courseRole)}),this.isRtl=this.bbLocalize.isRTL(),e.$on(W.ENTER_CELL,(e,t)=>{t.find("student-name-tooltip").click()})}}e3=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([e6(0,(0,x.tB)("scope")),e6(1,(0,x.tB)("element")),e6(2,(0,x.tB)("attrs")),e6(3,(0,x.tB)("gradeGridRebornController")),e6(4,(0,x.tB)(I.serviceName)),e6(5,(0,x.tB)(j.HV)),e6(6,(0,x.tB)(_.HV))],e3);class e8{constructor(e){this.$injector=e,this.restrict="E",this.template=eY,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnStudentReborn=this.$injector.instantiate(e3,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}e8.$inject=["$injector"],m.module(e5,[e0,j.e1,e2]).directive("bbGradeGridColumnStudentReborn",["$injector",e=>e.instantiate(e8)]);var e9=n(756124),e7=n(685514),te=n(385847),tt=n(558853),tn=n(385006),ti=n(625506);class tr{highlight(e){e.isUpdated?(ti(".rb-col-"+e.id).addClass("highlighted"),delete e.isUpdated,this.timeout(()=>{ti(".rb-col-"+e.id).removeClass("highlighted")},this.scope,6e3,!1)):ti(".rb-col-"+e.id).removeClass("highlighted")}constructor(e,t){this.scope=e,this.timeout=t}}let ts="ultra.components.directives.grade.contentIconMedium",to={Class:D.vl,bindingNames:["icon","color"]};m.module(ts,[]).component("contentIconMedium",(0,eX.G5)(to));var ta=n(625506);function tl(e,t){return function(n,i){t(n,i,e)}}let tc="ultra.components.directives.gradeGridColumnHeaderOverallReborn";class td extends tr{getSchemaType(){var e;if(null===(e=this.scope.columnMetadata)||void 0===e?void 0:e.gradingSchemaId)return this.gradeGridRebornController.getGridData().getSchema()[this.scope.columnMetadata.gradingSchemaId].scaleType}get possible(){return this.getSchemaType()===eO.aQo.Score?e9.m(this.scope.columnMetadata.possible,2):100}shouldShowPoints(){return this.getSchemaType()===eO.aQo.Score}popupMenu(e){let t=`grade-grid-column-header-menu-reborn-${this.col.id}`;if(this.gradeGridRebornController.initialized&&!this.gradeGridRebornController.isMenuExisting(t)){let n=ta(e.target).closest(".grade-grid-header-cell").offset();n.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=e=>{let t=n.left+e.width(),i=this.gradeGridRebornController.getGradeGridContainerElementRight();t>i&&(n.left-=t-i+(0,e7.I)()),e.offset(n)},this.gradeGridRebornController.popupMenu(t,tn,this.menuScope),this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{t.keyCode===te.hY||t.keyCode===te.Mf?(e.data("destroy")(),this.scope.$emit(W.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):te.tH(t)&&this.scope.$emit(W.CELL_FOCUSED)}),this.gradeGridRebornController.getMenuitems().first().focus()},this.menuScope,0,!1),e.preventDefault(),e.stopPropagation()}}constructor(e,t,n,i,r,s,o,a,l){super(t,l),this.rootScope=e,this.element=n,this.attrs=i,this.$compile=r,this.gradeGridRebornController=s,this.bbLocalize=o,this.grade=a,this.canPostGrades=!1,this.menuScope=t.$new(!0),t.$watch("col",e=>{t.columnMetadata=e.data,this.scope.columnMetadata.externalGrade&&(this.scope.columnMetadata.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.directives.grade.grid.overallGrade",noWrap:!0,noEscape:!0})),this.col=e,this.highlight(this.col),this.canPostGrades=this.grade.canPostGrades(e.gridData.course,e.data)}),t.$on(W.CELL_FOCUSED,()=>{this.gradeGridRebornController.getElement().find(".selected").removeClass("selected"),this.gradeGridRebornController.isGridSortingEnabled?this.element.find(`.content-item-icon-bg-${this.col.id}`).addClass("selected").focus():n.find(".content").focus()}),t.$on(W.COLUMN_HEADER_FOCUSED,()=>{this.gradeGridRebornController.getElement().find(".selected").removeClass("selected"),this.element.find(`.content-item-name-bg-${this.col.id}`).addClass("selected").focus()}),t.$on(eL.T.FOCUSIN_CELL,(e,t)=>{t.columnId===this.col.id&&(this.gradeGridRebornController.getElement().find(`.${t.selector}`).removeClass(t.selector),this.element.find(t.className).addClass(t.selector))}),t.$on(eL.T.FOCUSOUT_CELL,(e,t)=>{t.columnId===this.col.id&&this.element.find(t.className).removeClass(t.selector)})}}td.$inject=[],td=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([tl(0,(0,x.tB)("$rootScope")),tl(1,(0,x.tB)("scope")),tl(2,(0,x.tB)("element")),tl(3,(0,x.tB)("attrs")),tl(4,(0,x.tB)("$compile")),tl(5,(0,x.tB)("gradeGridRebornController")),tl(6,(0,x.tB)(I.serviceName)),tl(7,(0,x.tB)(S.HV)),tl(8,(0,x.tB)(w.H))],td);class tu{constructor(e){this.$injector=e,this.restrict="E",this.template=tt,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderOverallReborn=this.$injector.instantiate(td,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tu.$inject=["$injector"],m.module(tc,[ej.e1,ts]).directive("bbGradeGridColumnHeaderOverallReborn",["$injector",e=>e.instantiate(tu)]);var tp=n(801321),tm=n(625506);let th="ultra.components.directives.gradeGridMessageReborn";class tg{mousedown(){tm(this.window).trigger("click")}constructor(e,t,n,i,r){this.window=e,this.scope=t,this.element=n,this.attrs=i,this.timeout=r,r(()=>{p.isUndefined(t.adjustPosition)||t.adjustPosition(n)},t)}}tg.$inject=["$window","scope","element","attrs",w.H];class tf{constructor(e){this.$injector=e,this.restrict="A",this.template=tp,this.link=(e,t,n)=>{e.gradeGridMessageReborn=this.$injector.instantiate(tg,{scope:e,element:t,attrs:n})}}}tf.$inject=["$injector"],m.module(th,[]).directive("bbGradeGridMessageReborn",["$injector",e=>e.instantiate(tf)]);var tb=n(125025),tv=n(625506);let ty="ultra.components.directives.gradeGridOverallEditorReborn";class tS{initialize(){this.score=this.scope.gradeGridColumnOverallReborn.score,this.element.find("input").focus(),this.element.find(".wrapping-input-style").css({"border-color":"#c36fd3"}),this.timeout(()=>{this.element.find("input").select()},this.scope,0,!1),this.checkValue(this.score).then(e=>{this.isValidated=e})}removeErrorMessage(){this.element.removeClass("validation-alert"),p.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),p.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)}createErrorMessage(){if(this.messageElement&&this.removeErrorMessage(),p.isUndefined(this.messageElement)){this.element.addClass("validation-alert");let e=this.element.parent(".grade-grid-cell").offset();e.top+=60,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=t=>{let n=e.left+t.width(),i=e.top+t.height(),r=this.gradeGridRebornController.getGradeGridContainerElementRight(),s=this.gradeGridRebornController.getGradeGridContainerElementBottom();n>r&&(e.left-=n-r+(0,e7.I)()),i>s&&(e.top-=t.height()+40),this.messageElement.offset(e)},this.$compile(tS.CELL_MESSAGE_TEMPLATE)(this.messageScope,e=>{this.messageElement=e,this.element.parents("bb-grade-grid-reborn").append(this.messageElement)})}}get isValidated(){return this._isValidated}set isValidated(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage()}stopPropagation(e){e.preventDefault(),e.stopPropagation()}mousedown(){tv(this.window).trigger("click")}get isHiddenPointsPossible(){return!(p.isUndefined(this.score)||/^-?\d*(\,\d+)?(\.\d+)?$/.test(this.score))}onChange(){this.checkValue(this.score).then(e=>{this.isValidated=e})}isSchemaTypeComplete(){return this.scope.gradeGridColumnOverallReborn.isSchemaTypeComplete()}isStatusComplete(){return this.scope.gradeGridColumnOverallReborn.isStatusComplete()}onInputBlur(){this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,this.score)}checkValue(e){let t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)}onKeydown(e){te.tH(e)?(this.scope.gradeGridColumnOverallReborn.gotoNextCell(),tv(e.target).blur(),this.mousedown(),e.preventDefault(),e.stopPropagation()):e.keyCode===te.hY?(tv(e.target).blur(),this.mousedown(),this.scope.$emit(W.LEAVE_CELL)):te.Wl(e)&&(this.score&&(e.keyCode===te.RL||e.keyCode===te.pX)?e.stopPropagation():this.mousedown())}constructor(e,t,n,i,r,s,o,a){this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=r,this.gradeGridRebornController=s,this.gradeService=o,this.timeout=a,this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>this.scope.gradeGridColumnOverallReborn.onInputBlur(this.isValidated,t))},this.initialize(),n.$on(eL.T.REFRESH_OVERALL_EDITOR,()=>{this.initialize()}),n.$on("$destroy",()=>{this.removeErrorMessage()})}}tS.$inject=["$compile","$window","scope","element","attrs","gradeGridRebornController",S.HV,w.H],tS.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>';class tC{constructor(e){this.$injector=e,this.restrict="A",this.template=tb,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridOverallEditorReborn=this.$injector.instantiate(tS,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tC.$inject=["$injector"],m.module(ty,[th]).directive("bbGradeGridOverallEditorReborn",["$injector",e=>e.instantiate(tC)]);var tE=n(519),tI=n(378074),tw=n(280071),tA=n(625506);function tk(e,t){return function(n,i){t(n,i,e)}}let tT="ultra.components.directives.gradeGridColumnOverallReborn";class tP{changeRecord(e){let[t,n]=e;this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI(),this.initializeGradeDetail(this.cell.data)}initializeEventHandler(){this.element.parents(".rb-cell").focusin(()=>{this.focusin()}).focusout(()=>{this.focusout()}),this.element.children(".grade-grid-cell").mousedown(()=>this.mousedown())}focusin(){let e={columnId:this.cell.column.id,className:".content",selector:"is-active"};this.rootScope.$broadcast(eL.T.FOCUSIN_CELL,e)}focusout(){let e={columnId:this.cell.column.id,className:".content",selector:"is-active"};this.rootScope.$broadcast(eL.T.FOCUSOUT_CELL,e)}initializeUI(){let e=this.element.children(".grade-grid-cell");this.isLoading||this.isEditing?e.children(".score").hide():e.children(".overall-display-grade").show()}initializeGradeDetail(e){let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];p.isUndefined(null==e?void 0:e.grade)||p.isNull(null==e?void 0:e.grade)?this._gradeDetail=void 0:t.scaleType===eO.aQo.Score?this._gradeDetail=this.gradeService.truncateGradeDetail(e.grade):this._gradeDetail=e.grade.displayGrade.isOverride?this.gradeService.truncateGradeDetail(e.grade):this.gradeService.gradeDetailToPercentage(e.grade);let n=this.extractGradeFromGradeDetail(this.gradeDetail);this.setUpScreenReader(this.cell,n)}extractGradeFromGradeDetail(e){return e&&e.displayGrade&&e.displayGrade.perfCode&&e.displayGrade.perfCode.code||e&&e.getScore()}get disabledEditor(){return!this.canBeEdited&&p.isEmpty(this.extractGradeFromGradeDetail(this.gradeDetail))}initializeState(){this._isEditing=!1}initializeCell(e,t){this.cell=this.gridData.getCell(e,t),this._oldScore=this._score=void 0}get isReady(){return!p.isUndefined(this.cell)}get isLoading(){return!this.isReady||!this.cell.isLoaded}get score(){if(this.isReady){if(p.isUndefined(this._score)){let e=this.gradeDetail&&this.gradeDetail.getScore();e=e?this.bbLocalize.formatNumberSync(Math.round(100*parseFloat(e))/100,this.scope,{maximumFractionDigits:S.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL}):e,p.isEmpty(e)&&this.gradeDetail&&!p.isUndefined(this.gradeDetail.displayGrade.perfCode)&&(e=this.gradeDetail.displayGrade.perfCode.code),this._oldScore=this._score=e}return this._score}}set score(e){this._score=e}get isReadonly(){if(this.isReady)return!1}get isEditing(){return this._isEditing}get gradeDetail(){return this._gradeDetail}get pointsPossible(){if(this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType===eO.aQo.Score){var e;let t=(null===(e=this._gradeDetail)||void 0===e?void 0:e.manualGrade)!=null?this._gradeDetail.pointsPossible:this.cell.column.data.possible;return e9.m(null!=t?t:this.cell.column.data.possible,2)}return 100}isStatusComplete(){return!!this.cell.getGrade().displayGrade.grade}isSchemaTypeComplete(){return this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType===eO.aQo.Complete}get pointsPossibleToDisplay(){return null==this.pointsPossible?null:this.bbLocalize.formatNumberSync(this.pointsPossible,this.scope,{maximumFractionDigits:S.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})}insertCellEditor(){this.editorScope=this.scope.$new(!1,this.scope),this.$compile(tP.OVERALL_EDITOR_TEMPLATE)(this.editorScope,e=>this.element.children(".grade-grid-body-cell").append(e)),this.timeout(()=>{this.addInputKeyEventListeners();let e=this.scope.$on(W.SCROLL_H,()=>{this.closeEditor(),e(),t(),this.scope.$apply()}),t=this.scope.$on(W.SCROLL_V,()=>{this.closeEditor(),t(),e(),this.scope.$apply()})},this.scope,200)}removeCellEditor(){this.element.find("#bb-grade-grid-overall-editor-reborn").remove()}gotoNextCell(){this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then(()=>{this.scope.$emit(W.ENTER_NEXT_CELL)})}mousedown(){tA(this.window).trigger("click")}isConfirmDialogExisting(){return!!tA(".grade-grid-group-confirm-dialog").length}get canBeEdited(){return!this.gridData.course.isComplete()&&!p.isUndefined(this.cell)&&this.gradebookPermissionService.canOverrideGrades()}enterEditor(e){this.isConfirmDialogExisting()||!this.canBeEdited||this.isLoading||this._isEditing||(this._isEditing=!0,this.element.find(".overall-display-grade").hide(),this.insertCellEditor(),this.popupMenu(e))}popupMenu(e){let t=`grade-grid-notation-menu-reborn-${this.scope.row.id}-${this.scope.col.id}`;if((this.scope.col.gradeNotations.length||this.gradeDetail&&this.gradeDetail.displayGrade&&this.gradeDetail.displayGrade.isOverride)&&!this.gradeGridRebornController.isMenuExisting(t)){let n=tA(e.target).closest(".grade-grid-cell").offset();n.top+=60;let i=this.scope.$new(!1);i.adjustPosition=e=>{let t=n.left+e.width(),i=n.top+e.height(),r=this.gradeGridRebornController.getGradeGridContainerElementRight(),s=this.gradeGridRebornController.getGradeGridContainerElementBottom();t>r&&(n.left-=t-r+(0,e7.I)()),i>s&&(n.top-=e.height()+40),e.offset(n)},this.gradeGridRebornController.popupMenu(t,tw,i),this.addMenuKeyEventListeners(),e.preventDefault(),e.stopPropagation()}}openOverrideDialog(e){this.overrideDialogScope.closeModal=this.closeModal,this.overrideDialogScope.grade=e,this.modalInstance=this.$modal.open({template:tI.qt,scope:this.overrideDialogScope,resolve:{translations:[I.serviceName,e=>e.loadBundle("components/directives/grade/grade-input")]}})}addInputKeyEventListeners(){this.element.find("#bb-grade-grid-overall-editor-reborn input").on("keydown",e=>{let t=this.gradeGridRebornController.getMenuitems();if(te.Tw(e))t.first().focus();else{if(!te.i_(e))return;t.last().focus()}e.preventDefault(),e.stopPropagation()})}addMenuKeyEventListeners(){this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{let n=this.gradeGridRebornController.getMenuitems();if(te.Tw(t)){let e=n.index(tA(t.target))+1;e<n.length?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(te.i_(t)){let e=n.index(tA(t.target))-1;e>=0?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(te.tH(t))this.scope.$emit(W.LEAVE_CELL);else{if(t.keyCode!==te.hY)return;e.data("destroy")(),this.scope.$emit(W.LEAVE_CELL)}t.preventDefault(),t.stopPropagation()})},this.scope,0,!1)}areGradesComplete(){let e=this.cell.column.data.calculatedFormula,t=e.aliases,{items:n,formula:i}=(0,D.l)(e,this.gridData.getColumnMetadatas()),r=i?(0,D.MK)(i,{advanced:()=>this.findIncludedColumnIdsForAliases(t),sumSelected:()=>this.findIncludedColumnIdsForFormulaItems(n),weighted:()=>this.findIncludedColumnIdsForFormulaItems(n)}):this.findIncludedColumnIdsForAliases(t);return this.gridData.getColumnMetadatas().filter(e=>r[e.id]).every(e=>{var t;return null===(t=this.gridData.getCell(this.cell.row.metadata.id,e.id).getGrade())||void 0===t?void 0:t.isGraded()})}findIncludedColumnIdsForAliases(e){let t=Object.entries(e).filter(([e])=>e.startsWith("c")).reduce((e,[,t])=>({...e,[t]:!0}),{}),n=Object.entries(e).filter(([e])=>e.startsWith("i")).reduce((e,[,t])=>({...e,[t]:!0}),{});return this.gridData.getColumnMetadatas().filter(e=>n[e.id]||t[e.gradebookCategoryId]).reduce((e,t)=>({...e,[t.id]:!0}),{})}findIncludedColumnIdsForFormulaItems(e){return e.reduce((e,t)=>{if(t.isCategory&&t.el&&!t.isExempted){var n;return{...e,...this.findIncludedColumnIdsForFormulaItems(null!==(n=t.childGradeItems)&&void 0!==n?n:[])}}return(!t.isCalculation||!t.el||t.isExempted)&&(t.isCategory||t.isCalculation||t.isExempted)?e:{...e,[t.id]:!0}},{})}onInputBlur(e,t){if(!this.isLoading&&this._isEditing&&(this.closeEditor(),e)){let e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],r=this.score;this.score=t;let s=this.gradeService.parseGrade(t,e,this.scope),o=this.createGradeSubmission(e,s);if(this.score){let e=p.find(this.cell.column.gradeNotations,e=>e.code===this.score);e&&(o.perfCodeId=e.id)}if(this.score&&e.scaleType===eO.aQo.Score&&!p.isNaN(Number(s))&&this.isDirty()){var n,i;if(o.pointsPossible=this.pointsPossible,(null===(n=this.modalInstance)||void 0===n?void 0:n.opened)||this.areGradesComplete())(null===(i=this.modalInstance)||void 0===i?void 0:i.opened)||this.saveGrade(o);else{let e=this.gradeService.pointToPercentage(Number(s),this.pointsPossible);this.element.find(".grade-grid-cell").eq(0).focus(),this.openOverrideDialog(e9.m(e,2)),this.modalInstance.opened.then(()=>{this.modalInstance.result.then(()=>{this.saveGrade(o)},()=>{this.score=r})}).finally(()=>{this.modalInstance.opened=null})}}else this.saveGrade(o)}}closeEditor(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.element.find(".overall-display-grade").show())}isDirty(){if(p.isUndefined(this._oldScore)&&!p.isEmpty(this.score))return!0;if(!p.isUndefined(this._oldScore)){let e=this.bbLocalize.parseNumberSync(this._oldScore,this.scope),t=this.bbLocalize.parseNumberSync(this.score,this.scope);return p.isNaN(e)||p.isNaN(t)?this._oldScore!==this.score:e!==t}return!1}createGradeSubmission(e,t){let n=this.gradeService.createGradeSubmission(this.cell.column.data,t,e);return n.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),n}saveGrade(e){if(this.isDirty()){if(p.isUndefined(e)){let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId];e=this.createGradeSubmission(t,this.gradeService.parseGrade(this.score,t,this.scope))}this.gradeService.saveGrade(e,this.cell.data&&this.cell.data.grade,void 0,{userId:this.cell.row.metadata.user.id}).then(e=>this.cell.column.data.summary.$fetch()).then(()=>{this.gridData.refreshDataCell(this.cell.row,this.cell.column),this.rootScope.$broadcast(W.DATA_UPDATE),this.nextDeferred&&this.areGradesComplete()&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)})}else this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)}undoOverride(){this.score="",this.saveGrade()}selectNotation(e){this.score=e.code;let t=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],n=this.createGradeSubmission(t,this.score);n.perfCodeId=e.id,this.saveGrade(n)}setUpScreenReader(e,t){let n=e&&e.row&&e.row.metadata.user,i=n&&n.givenName.concat(n&&n.familyName),r=e&&e.column.data.columnName,s=!this.gridData.course.isComplete();if(t){let n=this.gradeService.getGradeToDisplay(e.data.grade.displayGrade,this.scope,this.gridData.getSchema()[e.column.data.gradingSchemaId].scaleType);this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:s?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:i,assignmentName:r,grade:n||t},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:s?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:i,assignmentName:r},noWrap:!0,noEscape:!0})}constructor(e,t,n,i,r,s,o,a,l,c,d,u,m,h){this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=r,this.gradebookPermissionService=s,this.$compile=o,this.scope=a,this.element=l,this.attrs=c,this.gradeGridRebornController=d,this.timeout=u,this.bbLocalize=m,this.$modal=h,this.closeModal=e=>{e?this.modalInstance.close():this.modalInstance.dismiss()},this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),a.$watchGroup(["row","col"],e=>{this.changeRecord(e)}),a.$on(eL.T.REFRESH,(e,t)=>{let n=t.rowId,i=t.columnIds;p.forEach(i,e=>{this.scope.row.id===n&&this.cell.column.id===e&&(this.initializeCell(n,e),this.initializeUI(),this.initializeGradeDetail(this.cell.data),this.scope.$broadcast(eL.T.REFRESH_OVERALL_EDITOR))})}),a.$on(W.ENTER_CELL,(e,t)=>t.find(".grade-grid-cell").click()),a.$on("$destroy",()=>{}),this.overrideDialogScope=a.$new()}}tP.OVERALL_EDITOR_TEMPLATE='<div bb-grade-grid-overall-editor-reborn id="bb-grade-grid-overall-editor-reborn" class="editor"></div>',tP=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([tk(0,(0,x.tB)("$rootScope")),tk(1,(0,x.tB)("$window")),tk(2,(0,x.tB)("$q")),tk(3,(0,x.tB)(eh.N7.H)),tk(4,(0,x.tB)(S.HV)),tk(5,(0,x.tB)(y.HV)),tk(6,(0,x.tB)("$compile")),tk(7,(0,x.tB)("scope")),tk(8,(0,x.tB)("element")),tk(9,(0,x.tB)("attrs")),tk(10,(0,x.tB)("gradeGridRebornController")),tk(11,(0,x.tB)(w.H)),tk(12,(0,x.tB)(I.serviceName)),tk(13,(0,x.tB)(ez.HV))],tP);class tD{constructor(e){this.$injector=e,this.restrict="E",this.template=tE,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnOverallReborn=this.$injector.instantiate(tP,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tD.$inject=["$injector"],m.module(tT,[ty]).directive("bbGradeGridColumnOverallReborn",["$injector",e=>e.instantiate(tD)]);let tx="ultra.components.directives.grade.filterChips",tR={Class:D.S_,renderLocalized:!0,withProvider:!0,attributes:["analyticsId"]};m.module(tx,[I.moduleName]).component("bbFilterChips",(0,eX.G5)(tR));var tL=n(436043),tN=n(985606),t$=n(625506);let tO="ultra.components.directives.gradeGridColumnHeaderReborn";class tG extends tr{get possible(){if(this.scope.columnMetadata&&!p.isUndefined(this.scope.columnMetadata.possible))return Math.round(100*this.scope.columnMetadata.possible)/100}popupMenu(e){let t=`grade-grid-column-header-menu-reborn-${this.col.id}`,n=this.grade.canPostGrades(this.col.gridData.course,this.col.data);if((!this.isGroupContent()||this.hasEntitlementsToViewGroups())&&this.gradeGridRebornController.initialized&&!this.gradeGridRebornController.isMenuExisting(t)&&this.toolAvailable){this.isPopupOpen=!0;let i=t$(e.target).closest(".grade-grid-header-cell").offset();i.top+=87,this.menuScope.col=this.col,this.menuScope.grade=this.grade,this.menuScope.canPostGrades=n,this.menuScope.autoDestroy=!1,this.menuScope.adjustPosition=e=>{let t=i.left+e.width(),n=this.gradeGridRebornController.getGradeGridContainerElementRight();t>n&&(i.left-=t-n+(0,e7.I)()),e.offset(i)},this.gradeGridRebornController.popupMenu(t,tn,this.menuScope),this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{t.keyCode===te.hY||t.keyCode===te.Mf?(e.data("destroy")(),this.scope.$emit(W.CELL_FOCUSED),t.preventDefault(),t.stopPropagation()):te.tH(t)&&this.scope.$emit(W.CELL_FOCUSED)}),e.on("$destroy",e=>{this.isPopupOpen=!1}),this.gradeGridRebornController.getMenuitems().first().focus()},this.menuScope,0,!1),e.preventDefault(),e.stopPropagation()}}hasEntitlementsToViewGroups(){return this.col&&this.entitlementService.isEntitled(B.pQ.ViewGroups,this.col.getCourse().id)}isGroupContent(){return this.col&&this.col instanceof el&&null!==this.col.groups||this.col.data&&this.col.data.groupContent}getAriaLabelStringForColumnHeader(e){if(e){var t,n,i,r;return e.isAttendance()?(null===(i=this.gradeGridRebornController.sortAttributes)||void 0===i?void 0:i.sortType)&&(null===(r=this.gradeGridRebornController.sortAttributes)||void 0===r?void 0:r.columnName)===e.id?`components.directives.grade.grid.aria-label.attendance.${this.gradeGridRebornController.sortAttributes.sortType}`:"components.directives.grade.grid.aria-label.attendance.none":(null===(t=this.gradeGridRebornController.sortAttributes)||void 0===t?void 0:t.sortType)&&(null===(n=this.gradeGridRebornController.sortAttributes)||void 0===n?void 0:n.columnName)===e.id?`components.directives.grade.grid.aria-label.columnName.${this.gradeGridRebornController.sortAttributes.sortType}`:"components.directives.grade.grid.aria-label.columnName.none"}}isRestricted(){return!!this.isGroupContent()&&!this.hasEntitlementsToViewGroups()}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}isScorable(){var e,t;return null!==(t=null===(e=this.scope.columnMetadata)||void 0===e?void 0:e.scorable)&&void 0!==t&&t}getSchemaText(){let e="components.directives.grade.grid.points.plural";if(this.scope.columnMetadata&&this.scope.columnMetadata.isScorm()){let t=this.scope.columnMetadata.ui&&this.scope.columnMetadata.ui.content||null,n=t&&t.getScormGradebookItems()||[],i=n&&n.find(e=>e.columnId===this.scope.columnMetadata.id),r=i&&i.scoringMethod&&i.scoringMethod.toString().toLowerCase()||"score";e=`course.content.scorm.settings.gradeSchema.${r}Overview.plural`}else this.isScorable()||(e="components.directives.grade.grid.nonGradableItem");return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e,params:{point:this.possible,count:this.possible},noWrap:!0})}getGradeCount(){var e;return(null===(e=this.scope.columnMetadata.summary)||void 0===e?void 0:e.numStudentsGraded())?this.scope.isGroupTest?this.scope.columnMetadata.summary.numStudentsGradedNeedsPosting+this.scope.columnMetadata.summary.numStudentsPosted+this.scope.columnMetadata.summary.numberOfStudentsOverriddenGradesToPost:this.scope.columnMetadata.summary.numStudentsGraded():0}getPostedCount(){var e;return(null===(e=this.scope.columnMetadata.summary)||void 0===e?void 0:e.numPosted)?this.scope.isGroupTest?this.scope.columnMetadata.summary.numStudentsPosted:this.scope.columnMetadata.summary.numPosted:0}constructor(e,t,n,i,r,s,o,a,l,c){super(t,a),this.rootScope=e,this.element=n,this.attrs=i,this.$compile=r,this.gradeGridRebornController=s,this.grade=o,this.bbLocalize=l,this.entitlementService=c,this.shouldShowAnonymousBulkDownloadModal=!1,this.isPopupOpen=!1,this.showAnonymousDownloadModal=()=>{this.shouldShowAnonymousBulkDownloadModal=!0},this.hideAnonymousDownloadModal=()=>{this.scope.$applyAsync(()=>{this.shouldShowAnonymousBulkDownloadModal=!1})},this.toolAvailable=!0,this.menuScope=t.$new(!0),Object.defineProperty(t,"possible",{get:()=>this.possible}),t.$watch("col",e=>{t.columnMetadata=e.data,t.columnMetadata.isAttendance()&&(t.columnMetadata.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.attendance",noWrap:!0,noEscape:!0})),this.col=e,this.col.showAnonymousBulkDownloadModal=this.showAnonymousDownloadModal,p.debounce(()=>this.highlight(this.col),1e3)(),this.element.data("col",this.col),t.isGroupTest=this.col instanceof ec,t.showAlertIcon=()=>t.columnMetadata.getNumMissingIfLate()>0,this.element.find(".content").removeClass("is-active"),s.activeColumnId===e.id&&this.element.find(".content").addClass("is-active"),t.columnMetadata.isAttendance()&&!s.attendanceIsAvailable&&(this.toolAvailable=!1)}),t.$on(W.CELL_FOCUSED,()=>{this.gradeGridRebornController.getElement().find(".selected").removeClass("selected"),this.gradeGridRebornController.isGridSortingEnabled&&this.col.sortable?n.find(`.content-item-icon-bg-${this.col.id}`).addClass("selected").focus():n.find(".content").focus()}),t.$on(W.COLUMN_HEADER_FOCUSED,()=>{this.gradeGridRebornController.getElement().find(".selected").removeClass("selected"),n.find(`.content-item-name-bg-${this.col.id}`).addClass("selected").focus()}),t.$on(eL.T.FOCUSIN_CELL,(e,t)=>{t.columnId===this.col.id&&(this.gradeGridRebornController.getElement().find(`.${t.selector}`).removeClass(t.selector),this.toolAvailable&&this.element.find(t.className).addClass(t.selector))}),t.$on(eL.T.FOCUSOUT_CELL,(e,t)=>{t.columnId===this.col.id&&this.element.find(t.className).removeClass(t.selector)})}}tG.$inject=["$rootScope","scope","element","attrs","$compile","gradeGridRebornController",S.HV,w.H,I.serviceName,_.HV],function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,x.aM)("possible","locale","columnMetadata.scoreProviderHandle")],tG.prototype,"getSchemaText",null);class t_{constructor(e){this.$injector=e,this.restrict="E",this.template=tN,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnHeaderReborn=this.$injector.instantiate(tG,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}t_.$inject=["$injector"],m.module(tO,[tL.e1,ej.e1]).directive("bbGradeGridColumnHeaderReborn",["$injector",e=>e.instantiate(t_)]);var tM=n(722181),tB=n(625506);function tF(e,t){return function(n,i){t(n,i,e)}}let tU="ultra.components.directives.gradeGridCellEditorReborn";class tV{initialize(){this.score=this.scope.gradeGridColumnReborn.score,this.element.find("input").focus(),this.element.addClass("purple-outline"),this.timeout(()=>{this.element.find("input").select()},this.scope,0,!1),this.userName=this.scope.gradeGridColumnReborn.userName,this.checkValue(this.score).then(e=>{this.isValidated=e})}removeErrorMessage(){this.element.removeClass("validation-alert"),p.isUndefined(this.messageElement)||(this.messageElement.remove(),this.messageElement=void 0),p.isUndefined(this.messageScope)||(this.messageScope.$destroy(),this.messageScope=void 0)}createErrorMessage(){if(this.messageElement&&this.removeErrorMessage(),p.isUndefined(this.messageElement)){this.element.addClass("validation-alert");let e=this.element.parent(".grade-grid-cell").offset();e.top+=80,this.messageScope=this.scope.$new(!1,this.scope),this.messageScope.adjustPosition=async t=>{await this.gradeGridRebornController.adjustPositionAsync(e,t)},this.$compile(tV.CELL_MESSAGE_TEMPLATE)(this.messageScope,e=>{this.messageElement=e,this.element.parents("bb-grade-grid-reborn").append(this.messageElement)})}}get isValidated(){return this._isValidated}set isValidated(e){this._isValidated=e,this.isValidated?this.removeErrorMessage():this.createErrorMessage(),this.scope.gradeGridColumnReborn.isReadyToPost=this.score&&this.isValidated}stopPropagation(e){e.preventDefault(),e.stopPropagation()}mousedown(){tB(this.window).trigger("click")}onChange(){this.checkValue(this.score).then(e=>{this.isValidated=e})}isSchemaTypeComplete(){return this.scope.gradeGridColumnReborn.isSchemaTypeComplete()}isStatusComplete(){return this.scope.gradeGridColumnReborn.isStatusComplete()}getAriaLabel(){return this.bbLocalize.translateSync({key:"components.directives.grade.grid.scoreInputAriaLabel",locale:this.bbLocalize.getLocale(this.scope),params:{userName:this.userName},noWrap:!0})}onInputBlur(e){this.scope.gradeGridColumnReborn.isPastDueZero&&""===this.score&&(this.score=this.scope.gradeGridColumnReborn.score),this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,this.score)}checkValue(e){let t=this.gradeGridRebornController.getGridData().getSchema()[this.scope.col.data.gradingSchemaId],n=this.gradeService.createGradeSubmission(this.scope.col.data,e,t);return this.gradeService.validateGrade(n,this.scope)}onKeydown(e){te.tH(e)?(this.scope.gradeGridColumnReborn.gotoNextCell(),tB(e.target).blur(),this.mousedown(),e.preventDefault(),e.stopPropagation()):e.keyCode===te.hY?(tB(e.target).blur(),this.mousedown(),this.scope.$emit(W.LEAVE_CELL)):te.Wl(e)&&(this.score&&(e.keyCode===te.RL||e.keyCode===te.pX)?e.stopPropagation():this.mousedown())}constructor(e,t,n,i,r,s,o,a,l){this.$compile=e,this.window=t,this.scope=n,this.element=i,this.attrs=r,this.gradeGridRebornController=s,this.gradeService=o,this.timeout=a,this.bbLocalize=l,this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>this.scope.gradeGridColumnReborn.onInputBlur(e,this.isValidated,t))},this.initialize(),n.$on(eL.T.REFRESH_CELL_EDITOR,()=>{this.initialize(),this.scope.gradeGridColumnReborn.getIsOtherGroupMemberGraded()}),n.$on("$destroy",()=>{this.removeErrorMessage()})}}tV.CELL_MESSAGE_TEMPLATE='<div bb-grade-grid-message-reborn class="grade-grid-reborn-message" ng-mousedown="gradeGridMessageReborn.mousedown()"></div>',tV=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([tF(0,(0,x.tB)("$compile")),tF(1,(0,x.tB)("$window")),tF(2,(0,x.tB)("scope")),tF(3,(0,x.tB)("element")),tF(4,(0,x.tB)("attrs")),tF(5,(0,x.tB)("gradeGridRebornController")),tF(6,(0,x.tB)(S.HV)),tF(7,(0,x.tB)(w.H)),tF(8,(0,x.tB)(I.serviceName))],tV);class tH{constructor(e){this.$injector=e,this.restrict="A",this.template=tM,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridCellEditorReborn=this.$injector.instantiate(tV,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tH.$inject=["$injector"],m.module(tU,[th]).directive("bbGradeGridCellEditorReborn",["$injector",e=>e.instantiate(tH)]);var tq=n(935135),tj=n(712359),tz=n(900966),tW=n(673336),tK=n(681725),tZ=n(625506);function tQ(e,t){return function(n,i){t(n,i,e)}}let tJ="ultra.components.directives.gradeGridColumnReborn";class tY{initializeState(){this._isEditing=!1,this.resetGradePost()}initializeCell(e,t,n=!0){this.cell=this.gridData.getCell(e,t),this.setUpScreenReader(this.cell,this.score),this._oldScore=this._score=void 0,this.group&&n&&this.element.children(".grade-grid-cell").removeClass(`group-id-${this.group.groupId} group-grade-cell selected`),this._group=void 0,this._isOtherGroupMemberGraded=void 0,this.groupHasAccommodation=!1,this.cell instanceof eT&&(this._group=this.cell.group,this.element.children(".grade-grid-cell").addClass(`group-id-${this.group.groupId} group-grade-cell`),this.groupHasAccommodation=this.group.dueDateExceptionType===eO.AVG.Unlimited),this.setSelectEventListener(),this.showExceptionIcon=this.shouldShowExceptionIcon()}getTooltipTemplate(){return tK}isUserHasReleaseConditions(){var e,t;return(null===(e=this.cell.exceptions)||void 0===e?void 0:e.hasEndException)||(null===(t=this.cell.exceptions)||void 0===t?void 0:t.hasStartException)}isUserHasDueDateException(){var e,t,n,i;return!this.groupHasAccommodation&&(null===(t=this.cell)||void 0===t?void 0:null===(e=t.exceptions)||void 0===e?void 0:e.hasDueDateException)&&!(null===(i=this.cell)||void 0===i?void 0:null===(n=i.row)||void 0===n?void 0:n.metadata.isDueDateExcepted())}shouldShowExceptionIcon(){var e,t,n,i,r,s,o,a,l,c;return((null===(t=this.cell)||void 0===t?void 0:null===(e=t.exceptions)||void 0===e?void 0:e.hasStartException)||(null===(i=this.cell)||void 0===i?void 0:null===(n=i.exceptions)||void 0===n?void 0:n.hasEndException)||(null===(s=this.cell)||void 0===s?void 0:null===(r=s.exceptions)||void 0===r?void 0:r.hasAttemptsException)||!this.groupHasAccommodation&&(null===(a=this.cell)||void 0===a?void 0:null===(o=a.exceptions)||void 0===o?void 0:o.hasDueDateException)&&!(null===(c=this.cell)||void 0===c?void 0:null===(l=c.row)||void 0===l?void 0:l.metadata.isDueDateExcepted()))&&!this.cell.isAnonymousGrading}shouldShowInput(){return this.isScorable()}isScorable(){var e,t,n,i;return null!==(i=null===(n=this.cell)||void 0===n?void 0:null===(t=n.column)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.scorable)&&void 0!==i&&i}latestAttemptStatus(){var e,t,n,i,r,s,o;let a="-",l=null!==(r=null===(t=this.cell)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.attempts)&&void 0!==r?r:[],c=null===(i=this.cell)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.attemptCount;return 0===c?a="components.directives.grade.grid.noSubmission":l&&c>0&&((null===(s=l[c-1])||void 0===s?void 0:s.status)===eO.I$9.Completed?a="components.directives.grade.grid.submitted":(null===(o=l[c-1])||void 0===o?void 0:o.status)===eO.I$9.InProgress&&(a="components.directives.grade.grid.draftSaved")),a}setSelectEventListener(){this.group&&p.isUndefined(this.unbindSelectEvent)&&!this.isRestrictedGroupContent?this.unbindSelectEvent=this.scope.$on(eL.T.SELECT_GROUP,(e,t)=>{this.group.groupId===t.groupId&&this.cell.column.id===t.columnId&&t.enter?this.element.children(".group-grade-cell").addClass("selected"):this.element.children(".group-grade-cell").removeClass("selected")}):p.isUndefined(this.group)&&!p.isUndefined(this.unbindSelectEvent)&&(this.unbindSelectEvent(),this.unbindSelectEvent=void 0)}initializeEventHandler(){this.element.parents(".rb-cell").mouseenter(()=>this.mouseEnterHandler()).mouseleave(()=>this.mouseLeaveHandler()).focus(()=>this.keyEnterHandler()).blur(()=>this.keyLeaveHandler()).focusin(()=>{this.focusin(),this.mouseEnterHandler(),this.showPointsPossible()}).focusout(()=>{this.focusout(),this.mouseLeaveHandler(),this.hidePointsPossible()}).click(()=>{this.showPointsPossible()})}focusin(){if(!this.isRestrictedGroupContent){let e={columnId:this.cell.column.id,className:".content",selector:"is-active"};this.rootScope.$broadcast(eL.T.FOCUSIN_CELL,e)}}focusout(){if(!this.isRestrictedGroupContent){let e={columnId:this.cell.column.id,className:".content",selector:"is-active"};this.rootScope.$broadcast(eL.T.FOCUSOUT_CELL,e)}}showElement(e){e.removeClass("hide")}hideElement(e){e.addClass("hide")}initializeUI(){let e=this.element.constructor.fn,t=e.show,n=e.hide;e.show=function(){return this.removeClass("hide")},e.hide=function(){return this.addClass("hide")},(this.group||this.cell.column.data&&this.cell.column.data.groupContent)&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(B.pQ.ViewGroups,this.gridData.course.id));let i=this.element.children(".grade-grid-cell");if(this.isLoading)i.removeClass("no-submission-bg").find(".score, .ungraded, .anonymous").hide();else if(!this.gridData.canViewGrades||this.isRestrictedGroupContent){if(this.cell.data)i.addClass("no-submission-bg"),i.find(".score").show().find("#displayedScore").show().find("#display").text("--").show();else{let e=i.find("#displayedScore");e.children("#display").text("").hide(),e.hide()}}else{let e=this.displayedScore;this.cell.isAnonymousGrading||e||this.isExempt?i.removeClass("no-submission-bg"):i.addClass("no-submission-bg"),this.isEditing||this.cell.isAnonymousGrading?i.children(".score").hide():i.children(".score").show();let t=i.find("#displayedScore");if(e?(t.children("#display").text(e).show(),this.isExempt?t.children("#exempt").show():t.children("#exempt").hide(),t.show()):(t.children("#display").text("").hide(),this.isExempt?(t.children("#exempt").show(),t.show()):(t.children("#exempt").hide(),t.hide())),this.isPastDueZero?(i.find("#pastDueZero").show(),this.isExempt&&(i.find("#pastDueZero").hide(),i.find("#displayedScore").children("#display").text("").hide())):i.find("#pastDueZero").hide(),!this.isPosted||this.isPastDueZero||this.isExempt?i.find("#posted").hide():i.find("#posted").show(),this.canGradeCell()&&!e&&!this.isExempt&&this.hasNoSubmissions()&&!this.isPastDueZero?i.find("#noSubmission").show():i.find("#noSubmission").hide(),this.hasNewSubmission&&!this.isExempt?i.find("#newSubmission").show():i.find("#newSubmission").hide(),this.canGradeCell()?i.find("#blank").hide():i.find("#blank").show(),this.cell instanceof eI&&this.ungradedItemCount&&this.ungradedItemCount>0&&!this.isExempt?(this.ungraded=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.ungraded",params:{count:this.ungradedItemCount},noWrap:!0,noEscape:!0}),i.find("#ungraded").show()):i.find("#ungraded").hide(),this.cell instanceof eI&&!this.isExempt){let e=this.pointsPossible;i.find("#pointsPossible").text(p.isUndefined(e)?"":e.toString())}this.cell.isAnonymousGrading&&!this.isExempt?i.find(".anonymous").show():i.find(".anonymous").hide(),this.cell.column.data.groupContent&&this.showExceptionIcon&&i.find("#group").addClass("exception-indicator")}e.show=t,e.hide=n}showPointsPossible(){if(this.cell instanceof eI){let e=this.element.children(".grade-grid-cell");e.addClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.score),this.showElement(e.find("#displayedScore")),this.showElement(e.find("#slash")),this.showElement(e.find("#pointsPossible")),this.timeout(()=>{let e=this.scope.$on(W.SCROLL_H,()=>{this.hidePointsPossible(),e(),t()}),t=this.scope.$on(W.SCROLL_V,()=>{this.hidePointsPossible(),t(),e()})},this.scope,200)}}hidePointsPossible(){if(this.cell instanceof eI){let e=this.element.children(".grade-grid-cell");e.removeClass("purple-outline"),e.find("#displayedScore").children("#display").text(this.displayedScore),this.hideElement(e.find("#slash")),this.hideElement(e.find("#pointsPossible"))}}resetGradePost(){this._isReadyToPost=void 0}get isReady(){return!p.isUndefined(this.cell)}get isLoading(){return!this.isReady||!this.cell.isLoaded}get isPosted(){return!p.isUndefined(this.cell)&&this.cell.isPosted}get hasNewSubmission(){return!p.isUndefined(this.cell)&&this.cell.hasNewSubmission}get isPastDueZero(){return!p.isUndefined(this.cell)&&this.cell.isPastDueZero}get isExempt(){return this.isReady&&this.cell.isExempt}get displayedScore(){if(!this.isLoading)return this.formatScore()}isSchemaTypeComplete(){var e,t,n,i;return(null===(e=this.gridData.getSchema()[null===(i=this.cell)||void 0===i?void 0:null===(n=i.column)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.gradingSchemaId])||void 0===e?void 0:e.scaleType)===eO.aQo.Complete}showCompletePill(){return this.element.find("#noSubmission").hasClass("hide")}isStatusComplete(){var e;return!!(null===(e=this.cell.getGrade())||void 0===e?void 0:e.displayGrade.grade)&&!this.isPastDueZero}get ungradedItemCount(){if(this.isReady){var e;if(null===(e=this.cell.data)||void 0===e?void 0:e.grade)return this.cell.data.grade.ungradedItemCount;if(this.gridData.getColumnMetadata(this.cell.column.id))return this.gridData.getColumnMetadata(this.cell.column.id).itemsCount}}get pointsPossible(){if(this.isReady&&this.cell.data&&this.displayedScore){let e=this.cell.data.grade.pointsPossible;return p.isUndefined(e)?e:Math.round(100*e)/100}}get score(){if(this.isReady){if(p.isUndefined(this._score)){let e=this.cell.getScore(this.scope);this._oldScore=this._score=e}return this._score}}set score(e){this._score=e}get isReadonly(){if(this.isReady)return!1}get isEditing(){return this._isEditing}get group(){return this._group}mouseEnterHandler(){this.group&&!this.isRestrictedGroupContent&&this.rootScope.$broadcast(eL.T.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!0})}mouseLeaveHandler(){!this.group||this._freezeGroup||this.isRestrictedGroupContent||this.rootScope.$broadcast(eL.T.SELECT_GROUP,{groupId:this.group.groupId,columnId:this.cell.column.id,enter:!1})}keyEnterHandler(){if(!this.cell.isAnonymousGrading)return;let e=this.element.find(".anonymous").children();e&&e.focus()}keyLeaveHandler(){if(!this.cell.isAnonymousGrading)return;let e=this.element.find(".anonymous").children();e&&e.blur()}insertCellEditor(){this.editorScope=this.scope.$new(!1,this.scope),this.$compile(tY.CELL_EDITOR_TEMPLATE)(this.editorScope,e=>this.element.children(".grade-grid-body-cell").append(e)),this.timeout(()=>{this.addInputKeyEventListeners();let e=this.scope.$on(W.SCROLL_H,()=>{p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("no-submission-bg"),this.closeEditor(),e(),t()}),t=this.scope.$on(W.SCROLL_V,()=>{p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("no-submission-bg"),this.closeEditor(),t(),e()})},this.scope,200)}removeCellEditor(){this.element.find("#bb-grade-grid-cell-editor-reborn").remove()}isConfirmDialogExisting(){return!!tZ(".grade-grid-group-confirm-dialog").length}enterEditor(e){if(!this.isConfirmDialogExisting()&&this.isCellGradeable(this.cell)&&!this.isLoading&&!this._isEditing){if(this.cell.column.data.isAttendance())this.gradeGridRebornController.attendanceIsAvailable&&(this.cell.canBeView&&this.popupMenu(e,!1),this.rootScope.$broadcast(eL.T.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}));else{let t=this.hasEntitlementsToGradeCell();(this.cell.canBeView||this.cell.canPost())&&(t||(this.isReadyToPost=!!this.score),this.popupMenu(e,!0)),t&&!this.isExempt&&this.isScorable()&&(this._isEditing=!0,this.hideElement(this.element.find(".score")),this.element.children(".grade-grid-cell").removeClass("no-submission-bg"),this.insertCellEditor(),this.group?this.rootScope.$broadcast(eL.T.ENTER_EDITOR,{group:this.group,columnId:this.cell.column.id}):this.rootScope.$broadcast(eL.T.SELECT_GROUP,{groupId:void 0,columnId:this.cell.column.id,enter:!1}))}this.getIsOtherGroupMemberGraded()}}getIsOtherGroupMemberGraded(){this.group&&this.getGroupGrades(this.cell.column.id).then(()=>{this.isOtherGroupMemberGraded()})}set isReadyToPost(e){this._isReadyToPost=e}get isReadyToPost(){return this._isReadyToPost}post(e,t){return t?this.cell.column.data.postReadyGroupAttempts({groupAssociationId:this.group.groupAssociationId}):this.cell.column.data.grades.$new(e.id).postReadyGrades()}fetchSummary(e){return this.cell.column.data.summary.$fetch(e).$asPromise()}popupMenu(e,t){let n=`grade-grid-cell-menu-reborn-${this.scope.row.id}-${this.scope.col.id}`;if(!this.gradeGridRebornController.isMenuExisting(n)){let i=tZ(e.target).closest(".grade-grid-cell").offset();i.top+=80;let r=this.scope.$new(!0);r.cell=this.cell,r.post=()=>{(this.savePromise||this.$q.when()).then((e=this.cell.getGrade())=>{this.postDefer&&(this.postDefer.resolve(!0),this.timeout.cancel(this.postDeferTimeout)),e&&(this.isGroupAssessment()?this.post(e,!0).then(()=>this.fetchSummary({timestamp:Date.now()})).then(()=>{this.gridData.getGroupIdUserIdMap()[this.group.groupId].forEach(e=>{this.gridData.refreshDataCell(this.gridData.getRowByUserId(e),this.cell.column)}),this.rootScope.$broadcast(W.DATA_UPDATE),this.resetGradePost()}):this.post(e,!1).then(()=>this.fetchSummary({timestamp:Date.now()})).then(()=>{this.gridData.refreshDataCell(this.cell.row,this.cell.column),this.rootScope.$broadcast(W.DATA_UPDATE),this.resetGradePost()}))})},r.isReadyToPost=()=>this.cell.isReadyToPost&&this.isReadyToPost&&(!this.isGroupAssessment()||this._isOtherGroupMemberGraded),r.adjustPosition=async e=>{await this.gradeGridRebornController.adjustPositionAsync(i,e)},t?this.gradeGridRebornController.popupMenu(n,tj,r):this.gradeGridRebornController.popupMenu(n,tz,r),this.addMenuKeyEventListeners(),e.preventDefault(),e.stopPropagation()}}popupConfirmDialog(e){let t=`group-cell-confirm-dialog-reborn-${this.scope.row.id}-${this.scope.col.id}`,n=this.$q.defer();if(!this.gradeGridRebornController.isMenuExisting(t)){let i=this.scope.$new(!0);i.waiting=200,i.onBeforeDestroy=e=>{n.resolve(!0)},i.saveGroup=()=>{n.resolve(!0)},i.saveOne=()=>{n.resolve(!1)},i.isSaveOneDisabled=""===this.score,e.top+=80,i.adjustPosition=t=>{let n=e.left+t.width(),i=e.top+t.height(),r=this.gradeGridRebornController.getGradeGridContainerElementRight(),s=this.gradeGridRebornController.getGradeGridContainerElementBottom();n>r&&(e.left-=n-r+(0,e7.I)()),i>s&&(e.top-=t.height()+80),t.offset(e)},i.$on("$destroy",()=>{this.scope.$emit(W.LEAVE_CELL)}),this.gradeGridRebornController.popupMenu(t,tW,i),this.timeout(()=>{let e=tZ(`#${t}`).find("button");e.on("keydown",function(t){if(te.Tw(t))e.eq((e.index(this)+1)%e.length).focus();else if(te.i_(t))e.eq((e.index(this)-1+e.length)%e.length).focus();else{if(t.keyCode!==te.hY)return;tZ(window).click()}t.preventDefault(),t.stopPropagation()}),e.first().focus()},this.scope,0,!1)}return n.promise}isOtherGroupMemberGraded(){this._isOtherGroupMemberGraded=p.isUndefined(p.findKey(this.studentIdGradeMap,(e,t)=>{var n;let i=e.getScore();return(null===(n=this.cell.row.metadata.user)||void 0===n?void 0:n.id)!==t&&(""===i||p.isNull(i)||p.isUndefined(i))}))}addInputKeyEventListeners(){this.element.find("#bb-grade-grid-cell-editor-reborn input").on("keydown",e=>{let t=this.gradeGridRebornController.getMenuitems();if(te.Tw(e))t.first().focus();else{if(!te.i_(e))return;t.last().focus()}e.preventDefault(),e.stopPropagation()})}addMenuKeyEventListeners(){this.timeout(()=>{let e=this.gradeGridRebornController.getPopupMenu();e.on("keydown",t=>{let n=this.gradeGridRebornController.getMenuitems();if(te.Tw(t)){let e=n.index(tZ(t.target))+1;e<n.length?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(te.i_(t)){let e=n.index(tZ(t.target))-1;e>=0?n.eq(e).focus():this.element.find(".grade-grid-cell").trigger("click",!0)}else if(te.tH(t))this.scope.$emit(W.LEAVE_CELL);else{if(t.keyCode!==te.hY)return;e.data("destroy")(),this.scope.$emit(W.LEAVE_CELL)}t.preventDefault(),t.stopPropagation()})},this.scope,0,!1)}gotoNextCell(){this.nextDeferred=this.$q.defer(),this.nextDeferred.promise.then(()=>{this.scope.$emit(W.ENTER_NEXT_CELL)})}onInputBlur(e,t,n){if(!this.isLoading&&this._isEditing){if(this.savePromise=this.$q.when(),this.postDefer=this.$q.defer(),this.postPromise=this.postDefer.promise,t){let t;this.score=n,p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("no-submission-bg"),this.isDirty()?(t=this.$q.defer(),this.savePromise=t.promise):this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0);let i=this.$q.when(!1),r=!0;if(this.gradeGridRebornController.sortedColumnId){let e=this.gridData.getColumn(this.gradeGridRebornController.sortedColumnId).data;r=!(null==e?void 0:e.isCalculated())&&!(null==e?void 0:e.isGroupContent())}this.isGroupAssessment()&&this.isDirty()&&r&&(i=this.popupConfirmDialog(tZ(e.target).closest(".grade-grid-cell").offset())),i.then(e=>{this.showScoreTemporarily(),this.saveGrade(e,t),this.closeEditor()})}else p.isEmpty(this.score)&&this.element.children(".grade-grid-cell").addClass("no-submission-bg"),this.closeEditor(),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)}}showScoreTemporarily(){if(this.isDirty()){let e=this.element.find("#display");e.text(this.score);let t=this.element.find("#posted");p.isEmpty(this.score)?(this.hideElement(t),this.hideElement(this.element.find("#displayedScore")),this.showElement(this.element.find("#noSubmission"))):(this.hideElement(this.element.find("#noSubmission")),this.showElement(this.element.find("#displayedScore")),this.showElement(e))}}closeEditor(){!this.isLoading&&this._isEditing&&(this._isEditing=!1,this.removeCellEditor(),this.editorScope.$destroy(),this.showElement(this.element.find(".score")),this.rootScope.$broadcast(eL.T.CLOSE_EDITOR,{group:this.group,columnId:this.cell.column.id}))}formatScore(){let e;let t=this.cell.data;return!p.isNull(t)&&t.grade&&t.grade.displayGrade&&(e=this.gradeService.getGradeToDisplay(t.grade.displayGrade,this.scope,this.gridData.getSchema()[this.cell.column.data.gradingSchemaId].scaleType),this.setUpScreenReader(this.cell,e)),e}isDirty(){return p.isUndefined(this._oldScore)&&!p.isEmpty(this.score)||!p.isUndefined(this._oldScore)&&this.bbLocalize.parseNumberSync(this._oldScore,this.scope).toString()!==this.bbLocalize.parseNumberSync(this.score,this.scope).toString()}createGradeSubmission(){let e=this.gridData.getSchema()[this.cell.column.data.gradingSchemaId],t=this.gradeService.createGradeSubmission(this.cell.column.data,this.gradeService.parseGrade(this.score,e,this.scope),e);return t.clearGrade=this.gradeService.wasGradeCleared(this._oldScore,this.score),t}getGroupGrades(e){this.studentIdGradeMap={};let t=this.gridData.getGroupIdMembershipIdMap()[this.group.groupId].map(e=>e);return this.CourseModel.$new(this.gridData.course.id).gradebook.bulkView.$fetch({membershipIds:t,columnIds:[e]}).$asPromise().then(e=>{e.bulkViewUsers.forEach(e=>{this.studentIdGradeMap[e.studentId]=e.grades[0].grade})})}prepareSaveGroupGrade(){return this.$q.when().then(()=>{var e;null===(e=this.gridData.getGroupById(this.group.groupId).memberships)||void 0===e||e.forEach(e=>{e.ui={gradeDetail:this.studentIdGradeMap[e.userId]}})})}saveGrade(e,t){if(this.isDirty()){this._oldScore=this._score,p.isUndefined(t)&&(t=this.$q.defer(),this.savePromise=t.promise);let n=this.createGradeSubmission(),i=this.$q.when();n.clearGrade&&this.cell.isCleanAttemptGrade&&(i=this.CourseModel.$new(this.gridData.course.id).gradebook.columns.$new(this.cell.column.id).grades.$new(this.cell.data.grade.id).attempts.$fetch().$asPromise().then(e=>e[0])),i.then(t=>(e?this.prepareSaveGroupGrade():this.$q.when()).then(()=>{var i;return this.gradeService.saveGrade(n,this.cell.data&&this.cell.data.grade,t,e?{group:this.gridData.getGroupById(this.group.groupId)}:{userId:null===(i=this.cell.row.metadata.user)||void 0===i?void 0:i.id})})).then(i=>{!n.clearGrade&&this.cell.isPosted&&this.cell.isNeedAutoPost?this.post(i,e):t.resolve(i)}).then(()=>(this.postDeferTimeout=this.timeout(()=>{this.postDefer.resolve(!1)},this.scope,100,!1),this.postPromise.then(e=>e?void 0:this.fetchSummary()))).then(()=>{this.refresh(e),this.nextDeferred&&(this.nextDeferred.resolve(),this.nextDeferred=void 0)})}}refresh(e){let t=this.getAffectedColumns().concat([this.cell.column]),n=this.getOverallColumn();n&&t.push(n);let i=[this.cell.row];e&&this.gridData.getGroupIdUserIdMap()[this.group.groupId].forEach(e=>{let t=this.gridData.getRowByUserId(e);t!==this.cell.row&&i.push(t)}),p.forEach(i,e=>{p.forEach(t,t=>{this.gridData.refreshDataCell(e,t)})}),this.rootScope.$broadcast(W.DATA_UPDATE)}getAffectedColumns(){return this.cell.column instanceof en?this.cell.column.findAffectedColumns():[]}getOverallColumn(){return p.find(this.gridData.getColumns(),e=>e instanceof et)}getShorUserNameForCell(e){return this.bbLocalize.formatUsernameSync(e.row.metadata.user,I.ILocaleUsernameFormat.Short,this.scope,{noWrap:!0,noEscape:!0})}getShortFormatUsername(){let e=this.gridData.getCell(this.scope.row.id,this.cell.column.id);return this.getShorUserNameForCell(e)}hasNoSubmissions(){var e,t;return!this.cell.getGrade()||!this.cell.getGrade().attempts||(null===(t=this.cell.getGrade().attempts)||void 0===t?void 0:null===(e=t.getNumAttemptsSubmitted)||void 0===e?void 0:e.call(t))===0}setUpScreenReader(e,t){this.userName=this.getShorUserNameForCell(e);let n=e.column.data.columnName;if(t){if(this.isSchemaTypeComplete()){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.isStatusComplete()?"components.directives.grade.grid.completeLabel":"components.directives.grade.grid.incompleteLabel"});this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:e},noWrap:!0,noEscape:!0})}else this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabel":"components.directives.grade.grid.tableCellAriaLabelReadOnly",params:{userName:this.userName,assignmentName:n,grade:t},noWrap:!0,noEscape:!0})}else this.canGradeCell()&&this.hasNoSubmissions()?this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabelNoSubmission":"components.directives.grade.grid.tableCellAriaLabelNoSubmissionReadOnly",params:{userName:this.userName,assignmentName:n},noWrap:!0,noEscape:!0}):this.ariaLabelContent=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.canGradeCell()?"components.directives.grade.grid.tableCellAriaLabelEmpty":"components.directives.grade.grid.tableCellAriaLabelEmptyReadOnly",params:{userName:this.userName,assignmentName:n},noWrap:!0,noEscape:!0});if(this.isPosted){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.postedLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.isPastDueZero){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.pastDueZero",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.isExempt){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.exemptLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${this.ariaLabelContent} ${e}`}if(this.group&&(this.ariaLabelContent=`${this.ariaLabelContent} ${this.group.groupTitle}`),this.hasNewSubmission){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.newSubmissionLabel",noWrap:!0,noEscape:!0});this.ariaLabelContent=`${e} ${this.ariaLabelContent}`}}isGroupAssessment(){return this.group&&this.cell instanceof eT&&!(this.cell instanceof eP)}constructor(e,t,n,i,r,s,o,a,l,c,d,u,m){this.rootScope=e,this.window=t,this.$q=n,this.CourseModel=i,this.gradeService=r,this.$compile=s,this.scope=o,this.element=a,this.attrs=l,this.gradeGridRebornController=c,this.timeout=d,this.bbLocalize=u,this.entitlementService=m,this.groupHasAccommodation=!1,this.isRestrictedGroupContent=!1,this.tooltipScope=this.scope.$new(),this.hasEntitlementsToGradeCell=()=>{if(this.isRestrictedGroupContent||!this.cell.canBeEdited)return!1;let e=this.cell;return e.data&&e.data.grade?this.gradeService.canGrade(e.data.grade.gradeScoreDesignation):!!e.column&&!!e.column.data&&this.gradeService.canGrade(e.column.data.gradeScoreDesignation)},this.isCellGradeable=e=>{var t,n;return!(this.isRestrictedGroupContent||p.isUndefined(e)||this.gridData.course.isComplete()||p.isUndefined(this.group)&&(null==e?void 0:null===(n=e.column)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.groupContent))&&e.canBeEdited},this.canGradeCell=()=>this.isCellGradeable(this.cell)&&this.hasEntitlementsToGradeCell(),this.initializeEventHandler(),this.gridData=this.gradeGridRebornController.getGridData(),this.hasItemExceptionView=this.entitlementService.isEntitled(D.SE.ViewException,this.gridData.course.id),this.hasAssessmentExceptionView=this.entitlementService.isEntitled(B.iL.ViewException,this.gridData.course.id),o.isDisabled=!(this.hasItemExceptionView&&this.hasAssessmentExceptionView),o.$watchGroup(["row","col"],e=>{let[t,n]=e;this.initializeCell(t.id,n.id),this.initializeState(),this.initializeUI()}),o.$on(eL.T.REFRESH,(e,t)=>{let n=t.rowId,i=t.columnIds;p.forEach(i,e=>{this.scope.row.id===n&&this.cell.column.id===e&&(this.initializeCell(n,e,!1),this.initializeUI(),this.scope.$broadcast(eL.T.REFRESH_CELL_EDITOR))})}),o.$on(W.ENTER_CELL,(e,t)=>t.find(".grade-grid-cell").click()),o.$on("$destroy",()=>{}),o.$on(eL.T.ENTER_EDITOR,(e,t)=>{p.isUndefined(t.group)||p.isUndefined(this.group)||t.group.groupId!==this.group.groupId||this.cell.column.id!==t.columnId||(this._freezeGroup=!0)}),o.$on(eL.T.CLOSE_EDITOR,(e,t)=>{this.group&&this._freezeGroup&&(this._freezeGroup=!1)})}}tY.CELL_EDITOR_TEMPLATE='<div bb-grade-grid-cell-editor-reborn id="bb-grade-grid-cell-editor-reborn" class="editor"></div>',tY=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([tQ(0,(0,x.tB)("$rootScope")),tQ(1,(0,x.tB)("$window")),tQ(2,(0,x.tB)("$q")),tQ(3,(0,x.tB)(eh.N7.H)),tQ(4,(0,x.tB)(S.HV)),tQ(5,(0,x.tB)("$compile")),tQ(6,(0,x.tB)("scope")),tQ(7,(0,x.tB)("element")),tQ(8,(0,x.tB)("attrs")),tQ(9,(0,x.tB)("gradeGridRebornController")),tQ(10,(0,x.tB)(w.H)),tQ(11,(0,x.tB)(I.serviceName)),tQ(12,(0,x.tB)(_.HV))],tY);class tX{constructor(e){this.$injector=e,this.restrict="E",this.template=tq,this.scope=!0,this.require=`^${ie}`,this.link=(e,t,n,i)=>{e.gradeGridColumnReborn=this.$injector.instantiate(tY,{scope:e,element:t,attrs:n,gradeGridRebornController:i})}}}tX.$inject=["$injector"],m.module(tJ,[tU]).directive("bbGradeGridColumnReborn",["$injector",e=>e.instantiate(tX)]),n(388634);var t0=n(680883);let t1="ultra.components.directives.gradeSearchFilterReborn";class t2{initial(){this.getCheckedMergedCourse()||this.clearAll(),this.criteriaBlocks=[{id:"merged_course",expanded:!0,name:"merged_course",criteriaDetails:this.scope.mergedCourses}]}clearAll(){this.$rootScope.$broadcast(eL.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,!0)}collapseMergedCourse(e){this.criteriaBlocks.some(t=>t.id===e.id)&&(e.expanded=!e.expanded)}getCheckedMergedCourse(){return this.scope.mergedCourses&&this.scope.mergedCourses.filter(e=>!0===e.ui.checked).length}getToggleButtonLabel(e){return e.expanded?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.collapse"}):this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.filter-panel.expand"})}constructor(e,t,n){this.scope=e,this.$rootScope=t,this.bbLocalize=n,this.initial()}}t2.$inject=["scope","$rootScope",I.serviceName];class t4{constructor(e){this.$injector=e,this.restrict="E",this.template=t0,this.scope={mergedCourses:"<"},this.link=(e,t,n)=>{e.gradeGridSearchFilterReborn=this.$injector.instantiate(t2,{scope:e,element:t,attrs:n})}}}t4.$inject=["$injector"],m.module(t1,[]).directive("bbGradeGridSearchFilterReborn",["$injector",e=>e.instantiate(t4)]);var t6=n(625506),t5=n(280903),t3=n(632991),t8=n(981796);function t9(e,t){return function(n,i){t(n,i,e)}}let t7="rbGridContainer";class ne{initColumnsPosition(e=this.columns,t=!0){let n=[],i=0;for(let r=0;r<e.length;r++){let s=e[r];s.accumulativeWidth=i,t&&n.push(`.rb-column-position-${s.id} {${this.isRtl?"right":"left"}: ${(0,t5.V)(i)};}`),i+=s.columnWidth}if(t){t6(`style#${this.id}`).remove();let e=t6(`<style scoped id="${this.id}"></style>`);e.text(n.join("\n")),this.grid.$element.prepend(e)}return i}getCssPosition(){return this.isRtl&&"center"!==this.position?"left"===this.position?"right":"left":this.position}getContainerStyle(){let e=this.grid.containers.left,t=this.grid.containers.right;return this.isMain?{[this.isRtl?"right":"left"]:(0,t5.V)(e&&e.totalWidth),[this.isRtl?"left":"right"]:(0,t5.V)(t&&t.totalWidth+this.grid.scrollbarWidth)}:{[this.getCssPosition()]:"0"}}getHeaderCanvasStyle(){return{width:(0,t5.V)(this.totalWidth),height:(0,t5.V)(this.grid.options.headerHeight)}}getBodyCanvasStyle(){return{width:(0,t5.V)(this.totalWidth),height:(0,t5.V)(this.totalHeight)}}getBodyStyle(){return{"overflow-x":this.hasHScrollbar?"scroll":"hidden","overflow-y":this.hasVScrollbar?"scroll":"hidden"}}init(e,t){if(this.element=t,this.scope=e,this.element.addClass(this.id),this.header=this.element.find(".rb-grid-header"),this.body=this.element.find(".rb-grid-body"),this.canAddColumn()){let e=this.scope.$watch("container",t=>{null!=t&&t.canAddColumn()&&(this.columnAdder=new nt(this.element.find(".rb-add-column"),this),e(),this.deferedInit.resolve(this))})}return this.addEventListeners(),this.canAddColumn()||this.deferedInit.resolve(this),this.initialized}toggleFirstAddColumnPlaceholder(e){this.element.find(".rb-add-column-placeholder.first")[e?"show":"hide"]()}resetColumns(e){this.columns=[...e],this.columns.sort((e,t)=>e.order-t.order),this.totalWidth=this.initColumnsPosition(e,!1),this.adjustColumns()}resetRows(e){this.initialized.then(()=>{this.rows=e,this.totalHeight=this.grid.options.rowHeight*this.rows.length,this.adjustRows()})}addEventListeners(){this.element.on("wheel",this.handleWheel.bind(this)),this.body.on("scroll",this.handleScroll.bind(this))}handleScroll(){var e,t,n;let i=(e=this.body.scrollLeft(),t=this.isRtl,n=this.getMaxScrollLeft(),t&&(0,t8.ed)()!==t8.nj.Negative?n-e:Math.abs(e)),r=this.body.scrollTop();this.grid.scrollContainers({scrollLeft:i!==this.scrollLeft?i:null,scrollTop:r!==this.scrollTop?r:-1})}handleWheel(e){if(this.body[0].scrollWidth===this.body[0].clientWidth&&this.body[0].scrollHeight===this.body[0].clientHeight)return;let t=e.originalEvent,n=this.isRtl?-t.deltaX:t.deltaX,i=t.deltaY;if(1===t.deltaMode){let e=parseInt(this.element.css("font-size"),10);n*=e,i*=e}if(this.atTop()&&i<0||this.atBottom()&&i>0||this.atLeft()&&n<0||this.atRight()&&n>0||0===n&&0===i)return;e.preventDefault(),e.stopPropagation();let r=-1,s=null;0!==i&&(r=Math.max(0,Math.min(this.scrollTop+i,this.getMaxScrollTop()))),0!==n&&(s=Math.max(0,Math.min(this.scrollLeft+n,this.getMaxScrollLeft()))),this.grid.scrollContainers({scrollTop:r,scrollLeft:s})}scrollHorizontally(e){var t,n;let i=(t=this.isRtl,n=this.getMaxScrollLeft(),t?(0,t8.ed)()===t8.nj.Negative?-e:n-e:e);this.body.scrollLeft(i),this.header.scrollLeft(i),this.scrollLeft=e,this.adjustColumns()}scrollVertically(e){this.body.scrollTop(e),this.scrollTop=e,this.adjustRows()}canAddColumn(){return this.isMain&&this.grid.canAddColumn()&&this.gradebookPermissionService.canModify()}getVisibleColRange(){let e=this.scrollLeft,t=0,n=this.columns.length;for(let n=0,i=0;n<this.columns.length;n++)if((i+=this.columns[n].columnWidth)>=e){t=n;break}for(let t=0,i=0;t<this.columns.length;t++)if((i+=this.columns[t].columnWidth)>=e+this.body[0].clientWidth){n=t;break}return{start:t,end:n}}calculateNextRenderedColumns(){let{start:e,end:t}=this.getVisibleColRange();this.nextRenderedColumns=this.columns.slice(e,t+2+1)}adjustColumns(){this.calculateNextRenderedColumns(),this.grid.debounceRefresh()}getVisibleRowRange(){let e=Math.ceil(this.body[0].clientHeight/this.grid.options.rowHeight),t=Math.floor(this.scrollTop/this.grid.options.rowHeight);return this.currentRowEndNumber=t+e,{start:t,end:this.currentRowEndNumber}}calculateNextRenderedRows(){let{start:e,end:t}=this.getVisibleRowRange();this.nextRenderedRows=this.rows.slice(e,t+2)}isRowOutOfBound(e){let{start:t,end:n}=this.getVisibleRowRange();return{top:e<=t,bottom:e>=n}}isColOutOfBound(e){let{start:t,end:n}=this.getVisibleColRange();return{left:e<=t,right:e>=n}}adjustRows(){this.calculateNextRenderedRows(),this.grid.debounceRefresh()}applyData(){this.renderedRows=this.nextRenderedRows,this.renderedColumns=this.nextRenderedColumns}getMaxScrollTop(){return this.totalHeight-this.body[0].clientHeight}getMaxScrollLeft(){return this.totalWidth-this.body[0].clientWidth}getTopRowScrollTop(e){return this.grid.options.rowHeight*e}getBottomRowScrollTop(e){return Math.max(0,this.grid.options.rowHeight*(e+1)-this.body[0].clientHeight)}getLeftColScrollLeft(e){return e.accumulativeWidth}getRightColScrollLeft(e){return Math.max(0,e.accumulativeWidth+e.columnWidth-this.body[0].clientWidth)}atTop(){return 0===this.scrollTop}atBottom(){return this.scrollTop===this.getMaxScrollTop()}atLeft(){return!this.isMain||0===this.scrollLeft}atRight(){return!this.isMain||this.scrollLeft===this.getMaxScrollLeft()}constructor(e,t,n,i,r,s,o){this.$q=e,this.position=t,this.columns=n,this.grid=i,this.timeout=r,this.bbLocalize=s,this.gradebookPermissionService=o,this.renderedRows=[],this.nextRenderedRows=[],this.renderedColumns=[],this.nextRenderedColumns=[],this.scrollTop=0,this.scrollLeft=0,this.id=i.id+"-container-"+t,this.rows=i.options.memberships,this.currentRowEndNumber=0,this.totalWidth=this.initColumnsPosition(n,!1),this.totalHeight=i.options.rowHeight*i.options.memberships.length,this.isMain="center"===t,this.headerBorder=i.options.headerBorder,this.rowBorder=i.options.rowBorder,this.callbacks=i.options.callbacks,this.isRtl=this.bbLocalize.isRTL(),this.deferedInit=this.$q.defer(),this.initialized=this.deferedInit.promise}}ne=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([t9(0,(0,x.tB)("$q")),t9(1,(0,x.tB)("position")),t9(2,(0,x.tB)("columns")),t9(3,(0,x.tB)("grid")),t9(4,(0,x.tB)(w.H)),t9(5,(0,x.tB)(I.serviceName)),t9(6,(0,x.tB)(y.HV))],ne);class nt{enter(e,t){this.button.hasClass("active")||this.show(t6(e.target),t)}leave(){this.button.hasClass("active")||this.hide()}show(e=this.firstPlaceholder,t){this.element.show(),this.element.offset(e.offset()),this.element.css("opacity","1"),this.container.currentColumn=t||this.grid.containers.left.columns.slice(-1)[0],this.addAriaLabel()}hide(){this.element.hide(),this.element.css("opacity","0")}onClick(e){this.button.toggleClass("active"),this.button.hasClass("active")&&this.container.callbacks.column(e,this.container.currentColumn)}addAriaLabel(){let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grid.lastAddButtonAriaLabel",params:{columnName:this.container.currentColumn.data.columnName},noWrap:!0,noEscape:!0});this.button.attr("aria-label",e)}constructor(e,t){this.element=e,this.container=t,this.grid=t.grid,this.scope=t.scope,this.bbLocalize=t.bbLocalize,e.css("height",`calc(100% - ${(0,t5.V)(this.grid.scrollbarWidth)}`),this.button=e.find(".button"),this.firstPlaceholder=this.container.element.find(".rb-add-column-placeholder.first"),this.button.on("keydown",e=>{let t;this.grid.previousCell.tabPressed=!1;let n=this.container.currentColumn;if(te.i_(e)||e.keyCode===te.RL||e.keyCode===te.hY){let i=n||this.grid.containers.left.columns.slice(-1)[0],r=this.container.columns.indexOf(i);r>=0&&this.container.isColOutOfBound(r).left?this.grid.scroll({scrollLeft:this.container.getLeftColScrollLeft(i)},()=>{this.grid.$scope.$broadcast(W.FOCUS_CELL,t,i,e)}):this.grid.$scope.$broadcast(W.FOCUS_CELL,t,i,e)}else{if(!te.Tw(e)&&e.keyCode!==te.pX)return;let i=this.grid.getFocusableColumns(),r=NaN,s=NaN;n?(n=i[(i.indexOf(n)+1)%i.length])===i[0]&&(t=this.container.rows[0],s=0):n=this.container.columns[0];let o=this.container.columns.indexOf(n);this.container.isColOutOfBound(o).right&&(r=this.container.getRightColScrollLeft(n)),(0,p.isNaN)(r)&&(0,p.isNaN)(s)?this.grid.$scope.$broadcast(W.FOCUS_CELL,t,n,e):this.grid.scroll({scrollTop:s,scrollLeft:r},()=>this.grid.$scope.$broadcast(W.FOCUS_CELL,t,n,e))}this.hide(),e.preventDefault(),e.stopPropagation()}),M.Z.OnWindow("click",e=>{t6(e.target).closest(this.button).length||(this.button.removeClass("active"),this.hide())},this.container.scope),this.container.scope.$on(W.SCROLL_H,()=>{this.hide()}),this.container.scope.$on(W.SCROLL_V,()=>{this.button.hasClass("active")&&this.hide()})}}class nn{}class ni{constructor(){this.replace=!0,this.restrict="A",this.require=[`^${nf}`,t7],this.template=t3,this.controller=nn,this.scope=!0,this.link=(e,t,n,i)=>{let[r,s]=i;r.initializedWithOptions.then(()=>{let i=r.containers[n[t7]];e.container=i,e.grid=r,i.init(e,t),s.container=i})}}}var nr=n(197584),ns=n(625506);function no(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function na(e,t){return function(n,i){t(n,i,e)}}let nl="rbGridCell";class nc{}class nd{setTabindex(){this.scope.col.focusable&&this.element.attr("tabindex",0)}goLeft(){return this.localizeService.isRTL(this.scope)?this.goNextColumn():this.goPreviousColumn()}goRight(){return this.localizeService.isRTL(this.scope)?this.goPreviousColumn():this.goNextColumn()}goForth(){this.goDown(!0)}goBack(){this.goUp(!0)}removeFocus(){this.container.element.find(".rb-ax-focus-placeholder").focus()}notifyFocus(e,t){this.grid.$scope.$broadcast(W.FOCUS_CELL,e,t)}handleFocus(){this.element.focus()}isFirst(){let{row:e,col:t}=this.scope,n=this.grid.getFocusableColumns();return void 0===e&&t===n[0]}isLast(){let{row:e,col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns();return e===n[n.length-1]&&t===i[i.length-1]}getHandler(e){return(0,te.i_)(e)&&!this.isFirst()?this.goBack:(0,te.Tw)(e)&&!this.isLast()?this.goForth:e.keyCode===te.RL?this.goLeft:e.keyCode===te.pX?this.goRight:e.keyCode===te.UP?this.goUp:e.keyCode===te.WV?(this.downArrowPressed=!0,this.goDown):(0,te.tH)(e)?this.handleEnter:e.keyCode===te.hY?this.element.is(e.target)?this.handleEscape:this.handleFocus:void 0}handleEnter(){this.scope.$broadcast(W.ENTER_CELL,this.element)}handleEscape(){this.scope.$emit(W.LEAVE_GRID)}isSelected(e){return this.element.find(e).hasClass("selected")}removeSelected(e){this.element.find(e).removeClass("selected")}constructor(e,t,n,i,r,s,o,a,l){this.scope=e,this.element=t,this.grid=n,this.container=i,this.$q=r,this.timeout=s,this.localizeService=o,this.debounce=a,this.featureFlagService=l,this.tabPressed=!1,this.shiftPressed=!1,this.downArrowPressed=!1,this.isGridSortingEnabled=!1,this.showAddColumn=!1,this.isAddColumnFocused=!1,this.goPreviousColumnImpl=()=>{let{row:e}=this.scope,{col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns(),r=i[(i.indexOf(t)-1+i.length)%i.length];if("right"===this.container.position&&this.scope.$first){this.grid.scrollToRight(()=>this.notifyFocus(e,r));return}if(r===i[i.length-1]){if(e){let t=n.indexOf(e)-1;e=n[t];let i=NaN;this.container.isRowOutOfBound(t).top&&(i=this.container.getTopRowScrollTop(t)),this.grid.scrollToRightWithTop(i,()=>this.notifyFocus(e,r))}return}let s=this.container.columns.indexOf(r),o=s>=0;this.container.isColOutOfBound(s).left?this.grid.scroll({scrollLeft:o?this.container.getLeftColScrollLeft(r):0},()=>this.notifyFocus(e,r)):this.notifyFocus(e,r)},this.goNextColumnImpl=()=>{let{row:e,col:t}=this.scope,n=this.container.rows,i=this.grid.getFocusableColumns(),r=i[(i.indexOf(t)+1)%i.length];if("left"===this.container.position&&this.scope.$last){this.grid.scrollToLeft(()=>this.notifyFocus(e,r));return}if(r===i[0]){let t=-1,i=n[0];if(void 0===e)t=0;else{let r=n.indexOf(e)+1;(i=n[r])&&this.container.isRowOutOfBound(r).bottom&&(t=this.container.getBottomRowScrollTop(r))}this.grid.scroll({scrollLeft:0,scrollTop:t},()=>this.notifyFocus(i,r));return}let s=this.container.columns.indexOf(r);this.container.isColOutOfBound(s).right?this.grid.scroll({scrollLeft:this.container.getRightColScrollLeft(r)},()=>this.notifyFocus(e,r)):this.notifyFocus(e,r)},this.goUpImpl=(e=!1)=>{let{row:t,col:n}=this.scope,i=this.container.rows,r=i.indexOf(t)-1;if(!t){this.grid.scrollToBottom(()=>this.notifyFocus(i[i.length-1],n));return}let s=i[r];s?this.container.isRowOutOfBound(r).top?this.grid.scroll({scrollTop:this.container.getTopRowScrollTop(r)},()=>this.notifyFocus(s,n)):this.notifyFocus(s,n):this.notifyFocus(void 0,n)},this.goDownImpl=(e=!1)=>{let{row:t,col:n}=this.scope,i=this.container.rows,r=i.indexOf(t)+1,s=i[r];if(!s){e?(s=i[0],this.grid.scrollToTop(()=>this.notifyFocus(s,n))):this.notifyFocus(s,n);return}if(void 0===t){this.grid.scrollToTop(()=>this.notifyFocus(s,n));return}this.container.isRowOutOfBound(r).bottom?this.grid.scroll({scrollTop:this.container.getBottomRowScrollTop(r)},()=>this.notifyFocus(s,n)):this.notifyFocus(s,n)},this.goPreviousColumn=this.debounce.asDebounced(this.goPreviousColumnImpl,this.scope,50),this.goNextColumn=this.debounce.asDebounced(this.goNextColumnImpl,this.scope,50),this.goUp=this.debounce.asDebounced(this.goUpImpl,this.scope,50),this.goDown=this.debounce.asDebounced(this.goDownImpl,this.scope,50),l.createWaiter(T.x40.GridSorting).then(e=>{this.isGridSortingEnabled=e}),this.setTabindex(),t.on("keydown",e=>{let t=this.getHandler(e);t&&(this.grid.previousCell=this,this.tabPressed=e.keyCode===te.Mf,this.shiftPressed=e.shiftKey,(0,te.Wl)(e)&&ns(document.body).removeClass("hide-focus-outline"),t.call(this),e.preventDefault(),e.stopPropagation())}),e.$on(W.FOCUS_CELL,(e,t,n,i)=>{t===this.scope.row&&n===this.scope.col&&(i&&(this.grid.previousCell.tabPressed=i.keyCode===te.Mf,this.grid.previousCell.shiftPressed=i.shiftKey,this.grid.previousCell.isAddColumnFocused=!0),this.handleFocus(),this.grid.cellFocusDeferred&&this.grid.cellFocusDeferred.resolve(this))}),e.$on(W.LEAVE_CELL,()=>{this.handleFocus()}),e.$on(W.ENTER_NEXT_CELL,()=>{this.grid.cellFocusDeferred=new function(){this.promise=new Promise(e=>{this.resolve=e})},this.goForth(),this.grid.cellFocusDeferred.promise.then(e=>{e.handleEnter(),this.grid.cellFocusDeferred=null})})}}nd=no([na(0,(0,x.tB)("scope")),na(1,(0,x.tB)("element")),na(2,(0,x.tB)("grid")),na(3,(0,x.tB)("container")),na(4,(0,x.tB)("$q")),na(5,(0,x.tB)(w.H)),na(6,(0,x.tB)(I.serviceName)),na(7,(0,x.tB)(nr.HV)),na(8,(0,x.tB)(eG.HV))],nd);class nu extends nd{setTabindex(){this.scope.col.focusable&&this.element.attr("tabindex",this.scope.col.headerFocusable?0:-1)}goBack(){this.grid.previousCell;let{row:e,col:t}=this.scope;this.isSelected(`.content-item-name-bg-${t.id}`)&&this.isGridSortingEnabled?this.notifyFocus(e,t):((this.isSelected(`.content-item-icon-bg-${t.id}`)||!t.sortable)&&(this.showAddColumn=!0),this.goLeft())}goForth(){let{row:e,col:t}=this.scope;this.grid.previousCell,this.isSelected(`.content-item-icon-bg-${t.id}`)&&this.isGridSortingEnabled?this.notifyFocus(e,t):this.canAddColumn()?this.container.canAddColumn()?this.notifyFocus(e,t):(this.showAddColumn=!0,this.grid.scrollToLeft(()=>this.notifyFocus(e,t))):this.goRight()}handleFocus(){let e=this.grid.previousCell,t=this.grid.containers.center.columnAdder,{col:n}=this.scope;n.sortable&&this.isGridSortingEnabled&&e instanceof nu?e.tabPressed?(!e.shiftPressed&&this.isSelected(`.content-item-name-bg-${n.id}`)||e.showAddColumn)&&e.canAddColumn()&&this.canAddColumn()?(this.container.canAddColumn()?t.show(this.element.find(".rb-add-column-placeholder"),this.scope.col):t.show(),t.button.focus(),e.showAddColumn=!1,this.removeSelected(`.content-item-name-bg-${n.id}`)):this.isSelected(`.content-item-icon-bg-${n.id}`)&&!e.shiftPressed?this.scope.$broadcast(W.COLUMN_HEADER_FOCUSED,this.element):e.shiftPressed&&this.isSelected(`.content-item-name-bg-${n.id}`)?this.scope.$broadcast(W.CELL_FOCUSED,this.element):!e.shiftPressed||this.isSelected(`.content-item-name-bg-${n.id}`)||this.isSelected(`.content-item-icon-bg-${n.id}`)||n.isStudentColumn?this.scope.$broadcast(W.CELL_FOCUSED,this.element):this.scope.$broadcast(W.COLUMN_HEADER_FOCUSED,this.element):this.downArrowPressed&&this.isSelected(`.content-item-icon-bg-${n.id}`)?this.scope.$broadcast(W.COLUMN_HEADER_FOCUSED,this.element):this.scope.$broadcast(W.CELL_FOCUSED,this.element):e.tabPressed&&e instanceof nu&&e.canAddColumn()&&this.canAddColumn()&&!e.isAddColumnFocused?(this.container.canAddColumn()?t.show(this.element.find(".rb-add-column-placeholder"),this.scope.col):t.show(),t.button.focus()):this.scope.col.headerFocusable?super.handleFocus():this.scope.$broadcast(W.CELL_FOCUSED,this.element),e.isAddColumnFocused=!1}canAddColumn(){return this.container.canAddColumn()||this.grid.canAddColumn()&&"left"===this.container.position&&this.scope.$last}constructor(e,t,n,i,r,s,o,a,l){super(e,t,n,i,r,s,o,a,l),this.scope=e,this.element=t,this.grid=n,this.container=i,this.$q=r,this.timeout=s,this.localizeService=o,this.debounce=a,this.featureFlagService=l,this.goDownHeaderImpl=(e=!1)=>{let{row:t,col:n}=this.scope;if(this.isGridSortingEnabled&&this.isSelected(`.content-item-icon-bg-${n.id}`)){this.notifyFocus(t,n);return}this.goDownImpl()},this.goUpHeaderImpl=(e=!1)=>{let{row:t,col:n}=this.scope;if(this.isSelected(`.content-item-name-bg-${n.id}`)){if(this.isGridSortingEnabled&&this.isSelected(`.content-item-name-bg-${n.id}`)){this.notifyFocus(t,n);return}this.goUpImpl()}},this.goUp=this.debounce.asDebounced(this.goUpHeaderImpl,this.scope,50),this.goDown=this.debounce.asDebounced(this.goDownHeaderImpl,this.scope,50)}}nu.$inject=[],nu=no([na(0,(0,x.tB)("scope")),na(1,(0,x.tB)("element")),na(2,(0,x.tB)("grid")),na(3,(0,x.tB)("container")),na(4,(0,x.tB)("$q")),na(5,(0,x.tB)(w.H)),na(6,(0,x.tB)(I.serviceName)),na(7,(0,x.tB)(nr.HV)),na(8,(0,x.tB)(eG.HV))],nu);class np{constructor(e,t){this.$injector=e,this.$compile=t,this.templates=Object.create(null),this.restrict="A",this.require=[`^${nf}`,`^${t7}`,nl],this.controller=nc,this.transclude=!0,this.link=(e,t,n,i,r)=>{let s=e.$eval(n[nl]);(this.templates[s]=this.templates[s]||this.$compile(s))(e,e=>t.append(e)),r(e=>t.append(e));let[o,a,l]=i;l.cellNavigator=this.$injector.instantiate(e.row?nd:nu,{scope:e,element:t,grid:o,container:a.container})}}}np=no([na(0,(0,x.tB)("$injector")),na(1,(0,x.tB)("$compile"))],np);var nm=n(455385);function nh(e,t){return function(n,i){t(n,i,e)}}let ng="ultra.components.directives.gridReborn",nf="bbGridReborn";class nb{onWindowResizeImpl(){p.forEach(this.containers,e=>{e.adjustRows(),e.adjustColumns()})}initialize(e){this.options=e,this.setDefaultValues(),this.initStyles(),this.createContainers(),this.initRowsPosition(),this.initColumnsPosition(),this.deferredInitWithOptions.resolve(e)}initStyles(){let e=[],t=this.$element.find("style#rb-grid");e.push(`.${this.id} .rb-header-row {height: ${(0,t5.V)(this.options.headerHeight)};}`),e.push(`.${this.id} .column-header-button-wrapper, .${this.id} .rb-add-column-placeholder {height: ${(0,t5.V)(this.options.headerContentHeight)};}`),e.push(`.${this.id} .rb-cell-row {height: ${(0,t5.V)(this.options.rowHeight)};}`),Array.prototype.push.apply(e,this.options.columns.map(e=>`.${this.id} .rb-col-${e.id} {width: ${(0,t5.V)(e.columnWidth)};}`)),e.push(`.${this.id} .rb-grid-scrollbar-placeholder-x {height: ${(0,t5.V)(this.scrollbarWidth)};}`),e.push(`.${this.id} .rb-grid-scrollbar-placeholder-y {width: ${(0,t5.V)(this.scrollbarWidth)};}`),t.text(e.join("\n"))}initRowsPosition(){let e=this.options.memberships,t=[],n=this.$element.find("style#rb-grid-rows-initial-position");for(let n=0;n<e.length;n++)t.push(`.${this.id} .rb-row-position-${e[n].id} {top: ${(0,t5.V)(n*this.options.rowHeight)};}`);n.text(t.join("\n"))}initColumnsPosition(){p.values(this.containers).forEach(e=>e.initColumnsPosition())}createContainers(){p.forEach(this.splitColumns(),(e,t)=>this.containers[t]=this.$injector.instantiate(ne,{position:t,columns:e,grid:this})),this.containers.center.hasHScrollbar=!0,(this.containers.right||this.containers.center).hasVScrollbar=!0}setDefaultValues(e=this.options){e.headerContentHeight=e.headerContentHeight||e.headerHeight,e.headerBorder=!1!==e.headerBorder,e.rowBorder=!1!==e.rowBorder,e.columns.forEach(e=>{e.position=e.position||"center",e.border=!1!==e.border,e.focusable=!1!==e.focusable})}getFocusableColumns(){let e=this.containers.left,t=this.containers.right;return(e&&e.columns||[]).concat(this.containers.center.columns,t&&t.columns||[]).filter(e=>e.focusable)}splitColumns(e=this.options.columns){let t=p.groupBy(e,e=>e.position);return t.center=t.center||[],t}scrollContainers({scrollTop:e=-1,scrollLeft:t}){e>=0&&(this.notifyScrollVertically(e),p.forEach(this.containers,t=>{t.scrollVertically(e)})),null!=t&&(this.notifyScrollHorizontally(t),this.containers.center.scrollHorizontally(t))}scrollToLeft(e){this.scroll({scrollLeft:0},e)}scrollToRight(e){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft()},e)}scrollToRightWithTop(e,t){this.scroll({scrollLeft:this.containers.center.getMaxScrollLeft(),scrollTop:e},t)}scrollToTop(e){this.scroll({scrollTop:0},e)}scrollToBottom(e){this.scroll({scrollTop:this.containers.center.getMaxScrollTop()},e)}scroll(e,t){t&&this.afterCellDataUpdated(t),this.scrollContainers(e)}canAddColumn(){return!!this.options.callbacks.column}afterCellDataUpdated(e){this.afterCellDataUpdatedHooks.push(e)}applyAfterCellUpdatedOnce(){for(let e=0;e<this.afterCellDataUpdatedHooks.length;e++)try{this.afterCellDataUpdatedHooks[e]()}catch(e){console.error(e)}this.afterCellDataUpdatedHooks.length=0}refreshImpl(){this.$rootScope.$broadcast(W.LOAD_MEMBERSHIP,this.containers.center.currentRowEndNumber,this.options.learnPagingResponse),p.forEach(this.containers,e=>e.applyData());let e=p.values(this.containers).reduce((e,t)=>e.concat(t.renderedColumns),[]);(this.options.callbacks.data||m.noop)(this.containers.center.renderedRows,e),this.$scope.$apply(),this.applyAfterCellUpdatedOnce()}constructor(e,t,n,i,r,s,o){this.$scope=e,this.$rootScope=t,this.$element=n,this.$attrs=i,this.$injector=r,this.$q=s,this.debounce=o,this.containers=Object.create(null),this.afterCellDataUpdatedHooks=[],this.onColumnEvent=(e,t)=>{this.initializedWithOptions.then(()=>{t&&(this.options.columns=t),this.setDefaultValues(),this.afterCellDataUpdated(()=>{this.initStyles(),p.forEach(this.containers,e=>e.initColumnsPosition())}),p.forEach(this.splitColumns(),(e,t)=>{this.containers[t].resetColumns(e)})})},this.onRowEvent=(e,t)=>{this.initializedWithOptions.then(()=>{t&&(this.options.memberships=t),this.setDefaultValues(),this.initStyles(),this.initRowsPosition(),p.forEach(this.containers,e=>e.resetRows(t))})},this.onSortEvent=(e,t)=>{this.scrollToTop(),this.onRowEvent(e,t)},this.onDataUpdate=()=>{this.debounceRefresh()},this.notifyScrollHorizontally=p.throttle(this.$scope.$broadcast.bind(this.$scope.$root,W.SCROLL_H),50),this.notifyScrollVertically=p.throttle(this.$scope.$broadcast.bind(this.$scope.$root,W.SCROLL_V),50),this.id="rb-grid-"+i.id,n.addClass(this.id),this.scrollbarWidth=(0,e7.I)(),this.deferredInitWithOptions=s.defer(),this.initializedWithOptions=this.deferredInitWithOptions.promise;let a=e.$watch(i[nf],e=>{e&&(this.initialize(e),a())});this.debounceRefresh=this.debounce.asDebounced(this.refreshImpl.bind(this),this.$scope,50),this.onWindowResize=this.debounce.asDebounced(this.onWindowResizeImpl.bind(this),this.$scope,50),M.Z.OnWindow("resize",this.onWindowResize,e),e.$on(W.COLUMN,this.onColumnEvent),e.$on(W.ROW,this.onRowEvent),e.$on(W.SORT,this.onSortEvent),e.$on(W.DATA_UPDATE,this.onDataUpdate)}}nb=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([nh(0,(0,x.tB)("$scope")),nh(1,(0,x.tB)("$rootScope")),nh(2,(0,x.tB)("$element")),nh(3,(0,x.tB)("$attrs")),nh(4,(0,x.tB)("$injector")),nh(5,(0,x.tB)("$q")),nh(6,(0,x.tB)(nr.HV))],nb);class nv{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=nm,this.transclude=!0,this.controller=nb,this.controllerAs="grid",this.scope=!0}}nv.$inject=["$injector"],m.module(ng,[nr.e1]).directive(nf,["$injector",e=>e.instantiate(nv)]).directive(t7,["$injector",e=>e.instantiate(ni)]).directive(nl,["$injector",e=>e.instantiate(np)]);var ny=n(849628);let nS="ultra.components.directives.grade.anonymousSubmissionBulkDownload",nC={Class:D.u$,bindingNames:["open","onCloseDialog","courseId","columnId","numStudentsSubmitted"],renderLocalized:!0,withProvider:!0};m.module(nS,[]).component("anonymousSubmissionBulkDownload",(0,eX.G5)(nC));let nE="ultra.components.directives.grade.anonymousNoSubmissionBulkDownload",nI={Class:D.Au,bindingNames:["open","onCloseDialog"],renderLocalized:!0};m.module(nE,[]).component("anonymousNoSubmissionBulkDownload",(0,eX.G5)(nI));var nw=n(651351),nA=n(613944),nk=n(576643);let nT="ultra.components.directives.bbUiIcon.small.DownloadFile";(0,nA.n)(nk.x,nT,"bbUiIconSmallDownloadFile");var nP=n(840236);let nD="ultra.components.services.sendRemindersMenuItem",nx={Class:D.KY,attributes:["analyticsId"],bindingNames:["courseId","columnId","numStudentsNotSubmitted","isGroup"],renderLocalized:!0,withProvider:!0};m.module(nD,[I.moduleName]).component("sendRemindersMenuItem",(0,eX.G5)(nx));var nR=n(936013);let nL="ultra.components.directives.bbUiIcon.small.Report";(0,nA.n)(nR.y,nL,"bbUiIconSmallReport");var nN=n(625506);let n$="ultra.components.directives.gradeGridMenuReborn";class nO{listenOnWindow(){let e=(e,t)=>{t||nN(e.target).closest("button:disabled").length||this.element.data("destroy")()};if(!1===this.scope.autoDestroy){let t=nN(window);t.on(`click.${this.scope.id}`,e),t.on(`blur.${this.scope.id}`,e)}else M.Z.OnWindow("click",e,this.scope),M.Z.OnWindow("blur",e=>{this.element.data("destroy")()},this.scope)}constructor(e,t,n,i,r){this.scope=e,this.element=t,this.attrs=n,this.gradeGridRebornController=i,this.timeout=r,t.data("destroy",()=>{if(p.isUndefined(e.onBeforeDestroy)||e.onBeforeDestroy(t),t.remove(),r.cancel(this.timeoutRef),this.scrollHDeregistration&&this.scrollHDeregistration(),this.scrollVDeregistration&&this.scrollVDeregistration(),!1===e.autoDestroy){let t=nN(window);t.off(`click.${e.id}`),t.off(`blur.${e.id}`)}else e.$destroy()}),e.keepOthers||nN("[bb-grade-grid-menu-reborn]").each((e,n)=>{n!==t[0]&&nN(n).data("destroy")()}),t.mousedown(e=>{nN(e.target).closest("button:disabled").length&&e.preventDefault()}),p.isUndefined(e.waiting)?this.listenOnWindow():r(()=>{this.listenOnWindow()},e,e.waiting,!1),this.timeoutRef=r(()=>{this.scrollHDeregistration=e.$on(W.SCROLL_H,()=>{r(()=>t.data("destroy")(),e,0,!1)}),this.scrollVDeregistration=e.$on(W.SCROLL_V,()=>{r(()=>t.data("destroy")(),e,0,!1)})},e,200,!1),r(()=>{p.isUndefined(e.adjustPosition)||e.adjustPosition(t)},e,0,!1)}}nO.$inject=["scope","element","attrs","gradeGridRebornController",w.H];class nG{constructor(e,t){this.$injector=e,this.timeout=t,this.restrict="A",this.template=ny,this.require=`^${ie}`,this.transclude=!0,this.link=(e,t,n,i)=>{e.gradeGridMenuReborn=this.$injector.instantiate(nO,{scope:e,element:t,attrs:n,gradeGridRebornController:i});let r=e=>e.querySelector('button, [href], input, select, [tabindex]:not([tabindex="-1"])');this.timeout(()=>{t.on("keydown",e=>{let n=t.find("li>:tabbable"),i=nN(e.target);if(e.keyCode===te.UP)n.eq((n.index(i)-1+n.length)%n.length).focus();else if(e.keyCode===te.WV)n.eq((n.index(i)+1)%n.length).focus();else if(!te.tH(e))return;else if("react-component-menu-item"===i.context.className){let e=r(i.context);e&&e.click()}else i.click();e.preventDefault(),e.stopPropagation()})},e,0,!1)}}}nG.$inject=["$injector",w.H],m.module(n$,[nw.e,nT,nP.e,nS,nE,nD,nL]).directive("bbGradeGridMenuReborn",["$injector",e=>e.instantiate(nG)]);var n_=n(676260),nM=n(610624),nB=n(786845),nF=n(17233);let nU="ultra.components.directives.typeahead-search-box";class nV{onSearchValueChange(){this.searchValue.length>0?this.typeAheadSearch(this.searchValue):this.clear()}itemSelected(e){let t=this.scope.itemSelected({item:e});this.showResults=!1,this.searchResults=[],m.isString(t)?this.searchValue=t:this.searchValue="",this.element.find("input").focus()}search(e){if(this.searchValue.length>0){let t=this.scope.search({searchText:e});t&&(this.showResults=!1,this.searchResults=[],m.isString(t)?this.searchValue=t:this.searchValue="")}}typeAheadSearch(e){this.scope.typeAheadSearch({searchText:e}).then(e=>{this.searchResults=e,this.showResults=e.length>0,this.getSearchResultsAlert(this.showResults)})}getSearchResultsAlert(e){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:e?this.srResultsFound:this.srNoResultsFound,noWrap:!0,noEscape:!0});this.timeout(()=>{this.$rootScope.$broadcast(nB.$N,t)},this.scope,1e3)}handleUpAndDownArrow(e){this.showResults||(this.showResults=!0);let t=m.element(e.target);t.hasClass("typeahead-search-entry")?(t=e.keyCode===te.WV?t.next():t.prev()).focus():this.element.find(".typeahead-search-entry:first").focus(),e.preventDefault()}onInputBoxKeyDown(e){e.keyCode===te.K5?this.search(this.searchValue):e.keyCode===te.WV||e.keyCode===te.UP?this.handleUpAndDownArrow(e):e.keyCode===te.hY&&this.showResults&&(this.showResults=!1,e.stopPropagation(),e.preventDefault())}onFocusInputBox(e){this.searchResults&&this.searchResults.length>0&&(this.showResults=!0)}onFocusClearBtn(e){this.isFocus=!0}onBlurClearBtn(e){document.activeElement!==e.currentTarget&&(this.showResults=!1,this.isFocus=!1)}onClickOutside(){this.showResults=!1}onInputBoxClick(){this.showResults=!0}onResultEntryKeyDown(e,t){e.keyCode===te.K5||e.keyCode===te.L_?this.itemSelected(t):e.keyCode===te.WV||e.keyCode===te.UP?this.handleUpAndDownArrow(e):e.keyCode===te.Mf?this.showResults=!1:e.keyCode===te.hY&&(this.showResults=!1,this.element.find("input").focus(),e.stopPropagation(),e.preventDefault())}onResultEntryClick(e,t){this.itemSelected(t)}clear(){let e=this.searchValue;this.showResults=!1,this.searchResults=[],this.searchValue="",this.timeout(()=>{(this.scope.clearSearch||m.noop)({searchText:e})},this.scope,50)}constructor(e,t,n,i,r){this.scope=e,this.$rootScope=t,this.element=n,this.timeout=i,this.bbLocalize=r,this.showResults=!1,this.searchValue="",this.isFocus=!1,this.srLabel=e.srLabel,this.inputPlaceholder=e.inputPlaceholder||"",this.srEmptyResults=e.srEmptyResults||"",this.srResultsFound=e.srResultsFound,this.srNoResultsFound=e.srNoResultsFound,this.clearAriaLabel=e.clearAriaLabel,this.icon=e.icon,this.randomElementId=this.scope.randomElementId||nM.d(),this.srResultsFound&&this.srNoResultsFound&&this.clearAriaLabel||this.bbLocalize.loadBundle("components/directives/typeahead").then(()=>{this.srResultsFound="typeahead.resultsFound",this.srNoResultsFound="typeahead.noResultsFound",this.clearAriaLabel="typeahead.clear"}),e.$on("typeahead-search-box-clear",function(){e.typeaheadSearchBox.showResults=!1,e.typeaheadSearchBox.searchResults=[],e.typeaheadSearchBox.searchValue=""})}}nV.$inject=["scope","$rootScope","element",w.H,I.serviceName];class nH{constructor(e,t){this.$interpolate=e,this.$injector=t,this.restrict="E",this.template=nF,this.scope={itemSelected:"&",search:"&",typeAheadSearch:"&",inputPlaceholder:"@?",clearSearch:"&",srEmptyResults:"@",srLabel:"@",srResultsFound:"@?",srNoResultsFound:"@?",clearAriaLabel:"@?",icon:"@?",randomElementId:"@?"},this.transclude=!0,this.replace=!0,this.link=(e,t)=>{e.typeaheadSearchBox=this.$injector.instantiate(nV,{scope:e,element:t})}}}nH.$inject=["$interpolate","$injector"],m.module(nU,[]).directive("bbTypeaheadSearchBox",["$injector",e=>e.instantiate(nH)]).directive("typeaheadInject",()=>({link(e,t,n,i,r){if(r){let n=e.$new();r(n,function(e){t.empty(),t.append(e),t.on("$destroy",function(){n.$destroy()})})}}})),n(267749);var nq=n(88782);let nj="ultra.components.directives.typeahead-selected-options";class nz{removeOption(e){this.scope.removeOption({item:e}),this.scope.focusElementId&&t6("#typeahead-search-box-"+this.scope.focusElementId).focus()}constructor(e){this.scope=e}}nz.$inject=["scope"];class nW{constructor(e){this.$injector=e,this.restrict="E",this.replace=!0,this.template=nq,this.scope={selectedOptions:"=",removeOption:"&",selectedOptionsListLabel:"@",focusElementId:"@?"},this.link=e=>{e.typeaheadSelectedOptions=this.$injector.instantiate(nz,{scope:e})}}}nW.$inject=["$injector"],m.module(nj,[]).directive("bbTypeaheadSelectedOptions",["$injector",e=>e.instantiate(nW)]);var nK=n(904714),nZ=n(730020),nQ=n(233404),nJ=n(609222),nY=n(124854),nX=n(391489),n0=n(24032),n1=n(625506);function n2(e,t){return function(n,i){t(n,i,e)}}let n4=(0,T.C4U)(D.hD),n6=(0,T.C4U)(D.ix),n5=(0,T.C4U)(D.Y3),n3=(0,T.C4U)(D.N7),n8=(0,T.C4U)(D.Cq),n9="students",n7="ultra.components.directives.gradeGridReborn",ie="bbGradeGridReborn";class it{onDataUpdate(){var e;!this.searchMembershipSelected&&(null===(e=this.sortParam)||void 0===e?void 0:e.includes("grade"))&&this.gridData.fetchPaginatedMembership({...this.rowFilterParams,columnId:this.sortedColumnId},this.gridOptions.learnPagingResponse.offset,this.sortParam).then(e=>{let t=e.slice(e.length-1),n=this.availableRowSelectedOptions.slice(this.availableRowSelectedOptions.length-1);t[0].id!==n[0].id&&this.updateNewPaginatedMembershipDetailsToGrid(t)})}updateNewPaginatedMembershipDetailsToGrid(e){let t=e.filter(e=>!this.availableMembershipIds.has(e.id));if(t&&t.length>0){t.forEach(e=>this.availableMembershipIds.add(e.id));let e=this.availableRowSelectedOptions.concat(...t);this.gridData.insertRows(e),this.gridData.addStudentAndOverAllColumnForRows(e),this.gridData.insertNewRowsForEachColumns(e),this.$scope.$broadcast(W.ROW,e),this.availableRowSelectedOptions=e}}onClickSortIcon(e,t){this.initialized&&(e===n9||this.gridData.shouldAllowSorting(t))&&(this.sortAttributes=(0,L.z)(e,this.sortAttributes),this.sortColumnByHeaderName(null==t?void 0:t.id),this.fetchMembershipOnSorting())}sortColumnByHeaderName(e){var t,n;this.sortedColumnId=e,(null===(t=this.sortAttributes)||void 0===t?void 0:t.sortType)===n0.E.ASCENDING||(null===(n=this.sortAttributes)||void 0===n?void 0:n.sortType)===n0.E.DESCENDING?this.sortAttributes.columnName===n9?this.sortParam=this.sortAttributes.sortType===n0.E.ASCENDING?n4:n6:this.sortParam=this.sortAttributes.sortType===n0.E.ASCENDING?n3:n8:(this.sortParam=n5,this.sortedColumnId=void 0)}getSortTypeValue(e){return(0,L.f)(e,this.sortAttributes)}getAriaLabelString(e){var t,n,i,r,s,o;return e===n9?this.contextCourse.course.isOrganization?(null===(i=this.sortAttributes)||void 0===i?void 0:i.sortType)&&(null===(r=this.sortAttributes)||void 0===r?void 0:r.columnName)===e?`components.directives.grade.grid.aria-label.students.${this.sortAttributes.sortType}.organization`:"components.directives.grade.grid.aria-label.students.none.organization":(null===(t=this.sortAttributes)||void 0===t?void 0:t.sortType)&&(null===(n=this.sortAttributes)||void 0===n?void 0:n.columnName)===e?`components.directives.grade.grid.aria-label.students.${this.sortAttributes.sortType}.course`:"components.directives.grade.grid.aria-label.students.none.course":"overall grade"===e?(null===(s=this.sortAttributes)||void 0===s?void 0:s.sortType)&&(null===(o=this.sortAttributes)||void 0===o?void 0:o.columnName)===e?`components.directives.grade.grid.aria-label.overAllGrade.${this.sortAttributes.sortType}`:"components.directives.grade.grid.aria-label.overAllGrade.none":void 0}updateFilterConditions(e){let t={membershipId:e.memberId,groupId:e.courseGroupId,childCourseId:e.childCourseId},n={columnId:e.gradebookColumnId,assessmentType:e.gradebookAssessmentType,gradebookCategoryId:e.gradebookCategoryId};!this.changingState&&(p.isEqual(t,this.rowFilterParams)||(this.rowFilterParams=t,this.setAdvancedFilterRows()),p.isEqual(n,this.columnFilterParams)||(this.columnFilterParams=n,this.columnFiltersPresent()?this.setAdvancedFilterColumns(e):this.setUnfilteredColumns()))}updateAffectedColumns(e){return this.$q.all(e.map(e=>{let t=e.data;return t.$fetch().$asPromise().then(()=>t.summary.$fetch().$asPromise())})).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data))})}columnFiltersPresent(){let e=this.ultraState.params;return!!e.gradebookCategoryId||!!e.gradebookColumnId||!!e.gradebookAssessmentType}setUnfilteredColumns(){this.gridData.getFilteredColumns({}).then(e=>{this.availableColumnSelectedOptions=e,this.$scope.$broadcast(W.COLUMN,e),this.$scope.$emit(eL.T.ADVANCED_FILTERS_COLUMNS,this.availableColumnSelectedOptions)})}setAdvancedFilterRows(){this.gridData.fetchPaginatedMembership({...this.rowFilterParams,columnId:this.sortedColumnId},0,this.sortParam).then(e=>{this.availableRowSelectedOptions=[],this.availableMembershipIds=new Set,this.gridOptions.learnPagingResponse=e.paging,this.gridOptions.totalMembershipCount=e.paging.count,this.updateNewPaginatedMembershipDetailsToGrid([...e]),this.$scope.$emit(eL.T.ADVANCED_FILTERS_ROWS,[...e],this.rowFilterParams)})}setAdvancedFilterColumns(e){let t={columnId:e.gradebookColumnId,gradebookCategoryId:e.gradebookCategoryId,assessmentType:e.gradebookAssessmentType};this.gridData.getFilteredColumns(t).then(e=>{this.filteredColumns=e,this.$scope.$broadcast(W.COLUMN,e),this.$scope.$emit(eL.T.ADVANCED_FILTERS_COLUMNS,e)})}initialize(){return this.$q((e,t)=>{this.$q.all([this.bbLocalize.loadBundle("components/directives/grade/grade-grid"),this.bbLocalize.loadBundle("components/directives/grade/grade-input")]).then(()=>{this.gridData=this.$injector.instantiate(eB,{gradeGridRebornDirectiveScope:this.$scope}),this.gridData.initialized.then(n=>{var i;this.availableRowSelectedOptions=[...n.memberships],this.availableColumnSelectedOptions=n.columns,this.$scope.$emit(eL.T.ADVANCED_FILTERS_ROWS,this.availableRowSelectedOptions),this.$scope.$emit(eL.T.ADVANCED_FILTERS_COLUMNS,this.availableColumnSelectedOptions),this.gridOptions={memberships:n.memberships,columns:n.columns,rowHeight:this.rowHeight,headerHeight:this.headerHeight,headerContentHeight:89,headerBorder:!0,rowBorder:!0,callbacks:{data:(e,t)=>this.gridData.loadGradeData(e,t),column:this.gridData.course.isComplete()?void 0:(e,t)=>this.onClickAddColumnButton(e,t)},learnPagingResponse:n.learnPagingResponse,totalMembershipCount:null!==(i=n.learnPagingResponse.count)&&void 0!==i?i:0},this.initialized=!0,this.handleMergedCourse(),this.gridData.course.isComplete()?(this.isOverallPanelShown=!1,e(!0)):this.gradeService.needsToSetupOverall(this.gridData.getColumnMetadatas(),this.gridData.course.id).then(t=>{t?this.loadSetupOverallGradeMessageIsHiddenPreference&&!this.setupOverallGradeMessageIsHiddenPreference&&this.loadSetupOverallGradeMessageIsHiddenPreference(D.nv.key).then(()=>{var e;let t=(null===(e=this.setupOverallGradeMessageIsHiddenPreference)||void 0===e?void 0:e.value)==="true";this.isOverallPanelShown=!t}):this.isOverallPanelShown=t,e(!0)}).catch(t)}).catch(e=>{console.error(e),t(e)})}).catch(e=>{console.error(e),t(e)})})}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({setupOverallGradeMessageIsHiddenPreference:T.Ys.coursePreference.getCoursePreferenceByKeyAndCourseId(e,D.nv.key,this.$scope.course().id),gradebookGrades:T.Ys.gradebookGrade.getGradebookGradesByCourseId(e,this.$scope.course().id)}),e=>({loadSetupOverallGradeMessageIsHiddenPreference:t=>e(T.Nwg.coursePreference.loadCoursePreference({key:t,courseId:this.$scope.course().id}))}))(({setupOverallGradeMessageIsHiddenPreference:e,gradebookGrades:t},{loadSetupOverallGradeMessageIsHiddenPreference:n})=>{let i;Object.assign(this,{setupOverallGradeMessageIsHiddenPreference:e,loadSetupOverallGradeMessageIsHiddenPreference:n}),this.currentGradebookGrades&&t&&this.currentGradebookGrades!==t&&(i=t.find((e,t)=>{var n,i,r;return!(null==e?void 0:null===(n=e.api)||void 0===n?void 0:n.isUpdating)&&(null===(i=this.currentGradebookGrades[t])||void 0===i?void 0:i.id)===e.id&&(null===(r=this.currentGradebookGrades[t])||void 0===r?void 0:r.isExempt)!==e.isExempt||!this.currentGradesMap.has(e.id)&&e.isExempt&&e.ui.isGradePersistByUserId})),this.currentGradebookGrades=t,t&&(this.currentGradesMap=new Map(t.map(e=>[e.id,e]))),i&&this.gridData.applyGradesFromState(i)});this.$scope.$on("$destroy",e)}refreshSchema(e){this.gridData.getSchema()[e.id]=e,p.forEach(this.gridData.getColumnMetadatas(),e=>{let t=this.gridData.getSchema()[e.gradingSchemaId];(null==t?void 0:t.scaleType)===eO.aQo.Tabular&&this.gridData.updateColumnByMetadata(e)}),this.$scope.$broadcast(W.COLUMN)}refreshDataCells(e,t){p.forEach(e,e=>{p.forEach(t,t=>{this.gridData.refreshDataCell(e,t)})}),this.$scope.$broadcast(W.COLUMN)}refreshDataCell(e,t){this.gridData.refreshDataCell(e,t),this.$scope.$broadcast(W.COLUMN)}addStudentColumnBorder(e){e.externalGrade&&!this.gridData.isColumnExisting(e.id)&&this.gridData.getColumn(eB.COLUMN_STUDENT).deleteBorder()}deleteStudentColumnBorder(e){e.externalGrade&&this.gridData.getColumn(eB.COLUMN_STUDENT).addBorder()}updateOverallNotation(){let e=p.find(this.gridData.getColumns(),e=>e instanceof et);e&&(e.id===this.sortedColumnId&&this.fetchMembershipOnSorting(),e.loadNotation(),this.gridData.updateColumnByMetadata(e.data)&&this.$scope.$broadcast(W.COLUMN))}getAffectedColumnsBeforeEdit(e){let t=this.gridData.getColumn(e.id),n=[];return t instanceof er&&(n=t.affectedColumnsBeforeEdit),n}getAffectedColumns(e){let t=e.findAffectedColumns(),n=p.find(this.gridData.getColumns(),e=>e instanceof et);return n&&t.push(n),t}setupSearchFilterListener(){this.$scope.$on(eL.T.GRADEBOOK_USER_SELECTED,(e,t)=>{this.gridData.insertRows([t]),this.gridData.addStudentAndOverAllColumnForRows([t]),this.gridData.insertNewRowsForEachColumns([t]),this.gridOptions.totalMembershipCount=1,this.$scope.$broadcast(W.ROW,[t]),this.searchMembershipSelected=!0}),this.$scope.$on(eL.T.GRADEBOOK_CLEAR_USER_SELECTION_SEARCHBOX,e=>{var t;this.gridOptions.totalMembershipCount=null!==(t=this.gridOptions.learnPagingResponse.count)&&void 0!==t?t:0,this.$scope.$broadcast(W.ROW,this.getAvailableRowSelectedOptions()),this.searchMembershipSelected=!1}),this.$scope.$on(eL.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,(e,t)=>{let n=this.getAvailableRowSelectedOptions();if(this.availableRowSelectedOptions&&this.availableRowSelectedOptions.length!==this.gridOptions.memberships.length){var i;this.gridOptions.totalMembershipCount=null!==(i=this.gridOptions.learnPagingResponse.count)&&void 0!==i?i:0,this.$scope.$broadcast(W.ROW,n)}this.filteredColumns&&this.filteredColumns.length!==this.availableColumnSelectedOptions.length&&this.$scope.$broadcast(W.COLUMN,this.availableColumnSelectedOptions),this.ids&&(this.ids=null),this.handleMergedCourse()}),this.$scope.$on(eL.T.GRADEBOOK_COLUMN_SELECTED,(e,t)=>{let n=this.availableColumnSelectedOptions;this.filterColumns((e,t)=>p.filter(e,e=>e.filterByColumId(t)),t,n),this.searchMembershipSelected=!1}),this.$scope.$on(eL.T.GRADEBOOK_CATEGORY_SELECTED,(e,t)=>{let n=this.availableColumnSelectedOptions;this.ids=t,this.filterColumns((e,t)=>p.filter(e,e=>e.filterByCategoryId(t)),t,n)})}setupColumnChangeListener(){this.$scope.$on(S.JH,(e,t,n)=>{this.sortParam.includes("grade")&&this.fetchMembershipOnSorting(),t.summary.$fetch().$asPromise().then(()=>{this.addStudentColumnBorder(t),this.updateColumns(t),this.updateFilteredColumns(),this.updateCategoryColumns(),this.filteredColumns&&this.toast.show({messageKey:"components.directives.grade.grid.newItemAdded",icon:"icon-check",toastStatus:"success"})})}),this.$scope.$on("content-update",(e,t)=>{if(t.isScorm()){let e=t.getScormGradebookItems().map(e=>this.$scope.course().gradebook.columns.$buildRaw(e.gradingColumn));this.$q.all(e.map(e=>(e.ui={content:t},e.summary.$fetch().$asPromise()))).then(()=>{e.forEach(e=>this.updateColumns(e))})}if(t.isDiscussion()){let e=this.gridData.getColumnMetadataByContentId(t.id);p.isUndefined(e)||this.gridData.initializeGroupsMemberships().then(()=>e.summary.$fetch().$asPromise()).then(()=>{this.updateColumns(e)})}if(t.isLtiLink()||t.isLtiPlacement()){var n;let e=this.gridData.getColumnMetadataByContentId(null!==(n=t.id)&&void 0!==n?n:"");e&&e.$fetch()}}),this.$scope.$on("bb-delete-column",(e,t)=>{this.sortParam.includes("grade")&&this.fetchMembershipOnSorting();let n=this.gridData.getColumn(t.id);this.deleteStudentColumnBorder(t);let i=this.$q.when();if(n instanceof en){let e=this.getAffectedColumns(n);i=this.$q.all(e.map(e=>e.data.$fetch().$asPromise())).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data))})}n instanceof et&&this.gridData.clearOverallColumn(),i.then(()=>{this.gridData.deleteColumnById(t.id),p.remove(this.filteredColumns,e=>e.data.id===t.id),this.$scope.$broadcast(W.COLUMN),this.timeout(()=>{let e=this.$element.find(":focus").parents("bb-grade-grid-column-header-reborn").data("col");p.isUndefined(e)||this.$scope.$broadcast(eL.T.FOCUSIN_CELL,{columnId:e.id})},this.$scope,0,!1)})}),this.$scope.$on("attempt-base-content-update",(e,t)=>{this.updateAttempBaseContent(t)}),this.$scope.$on("attempt-base-content-update-by-regrading",(e,t)=>{this.updateAttempBaseContent(t)})}updateAttempBaseContent(e){let t=this.gridData.getColumnMetadataByContentId(e.id);p.isUndefined(t)||t.$fetch().$asPromise().then(()=>{this.gridData.initializeGroupsMemberships().then(()=>t.summary.$fetch().$asPromise()).then(()=>{this.updateColumns(t)})})}updateColumns(e){let t=this.getAffectedColumnsBeforeEdit(e),n=this.gridData.updateColumnByMetadata(e);if(n instanceof en){let e=n.findAffectedColumns();e=p.unionBy(t,e,"id");let i=p.find(this.gridData.getColumns(),e=>e instanceof et);i&&e.push(i),this.$q.all(e.map(e=>e.data.$fetch().$asPromise())).then(()=>{e.forEach(e=>this.gridData.updateColumnByMetadata(e.data)),this.$scope.$broadcast(W.COLUMN)})}else this.$scope.$broadcast(W.COLUMN)}setContainerHeight(){let e=n1(".course-grades-header-buttons-wrapper"),t=n1(".bb-course-navigation"),n=window.innerHeight-t.height();this.$element.find(".grade-grid-container").css("height",n-e.outerHeight())}getRowCount(){return this.gridOptions.totalMembershipCount}getGridData(){return this.gridData}getElement(){return this.$element}fetchMembershipOnSorting(){!this.searchMembershipSelected&&this.availableRowSelectedOptions.length>1&&(this.initialized=!1,this.$scope.$broadcast(W.SORT,[]),this.gridData.fetchPaginatedMembership({...this.rowFilterParams,columnId:this.sortedColumnId},0,this.sortParam).then(e=>{this.availableRowSelectedOptions=[],this.availableMembershipIds=new Set,this.gridOptions.learnPagingResponse=e.paging,this.gridOptions.totalMembershipCount=e.paging.count,this.updateNewPaginatedMembershipDetailsToGrid([...e]),this.$scope.$broadcast(W.SORT,[...e])}).finally(()=>{this.initialized=!0}))}createMenuScope(e,t){let n=this.$scope.$new(!0);return n.adjustPosition=t=>{let n=e.left+t.width(),i=this.getGradeGridContainerElementRight();n>i&&(e.left-=n-i+(0,e7.I)()),t.offset(e)},n.positionAfter=t,n.attendanceColumnExists=this.isAttendanceExisting(),n.attendanceIsAvailable=this.attendanceIsAvailable,n}onClickAddColumnButton(e,t){let n=p.isUndefined(t)||"left"===t.position?"start":t.id,i=`grade-grid-add-column-menu-reborn-${n}`;if(!this.initialized||this.isMenuExisting(i))return;let r=n1(e.target).offset();r&&(r.top+=30);let s=this.createMenuScope(r,n);this.popupMenu(i,nZ,s),this.timeout(()=>{let n=this.getPopupMenu();n.on("keydown",i=>{i.keyCode===te.hY||i.keyCode===te.Mf?(n.data("destroy")(),n1(e.target).click(),n1(e.target).focus(),i.preventDefault(),i.stopPropagation()):te.tH(i)&&this.$scope.$broadcast(W.FOCUS_CELL,void 0,t)}),this.getMenuitems().first().focus()},s,0,!1),e.preventDefault(),e.stopPropagation()}getPopupMenu(){return this.$element.find("[bb-grade-grid-menu-reborn]")}getMenuitems(){return this.getPopupMenu().find("li>:tabbable")}getGradeGridContainerElement(){return this.$element.children("#grade-grid-container")}getGradeGridContainerElementRight(){let e=this.getGradeGridContainerElement();return e.offset().left+e.width()}getGradeGridContainerElementBottom(){let e=this.getGradeGridContainerElement();return e.offset().top+e.height()}adjustPosition(e,t){let n=e.left+t.width(),i=e.top+t.height(),r=this.getGradeGridContainerElementRight();return i>this.getGradeGridContainerElementBottom()&&(e.top-=t.height()+80),n>r&&(e.left-=n-r+(0,e7.I)()),t.offset(e),e}adjustPositionAsync(e,t){return new Promise(n=>{let i=new ResizeObserver(r=>{i.disconnect(),this.adjustPosition(e,t),n()});i.observe(t[0])})}popupMenu(e,t,n,i){n.id=e,this.showMenu(t,n,i)}isMenuExisting(e){return!!this.$element.children(`#${e}`).length}showMenu(e,t,n){t.$applyAsync(()=>{this.$compile(e)(t,e=>{this.$element.append(e),p.isUndefined(n)||e.offset(n)})})}isAttendanceExisting(){return!!this.availableColumnSelectedOptions.find(e=>this.gridData.getColumnMetadata(e.id)&&this.gridData.getColumnMetadata(e.id).isAttendance())}get attendanceIsAvailable(){return this.$scope.attendanceIsAvailable&&this.$scope.attendanceIsAvailable()}setupOverallGradeHideMessageCallback(){this.$scope.$apply(()=>this.isOverallPanelShown=!1)}refreshColumns(e=p.noop){this.gridData.refreshAllColumns(),e(),this.$scope.$broadcast(W.COLUMN)}filterColumns(e,t,n){t&&(this.filteredColumns=e(n,t),this.$scope.$broadcast(W.COLUMN,this.filteredColumns))}updateFilteredColumns(){let e=p.find(this.filteredColumns,e=>e instanceof et);this.filteredColumns&&!e&&(this.filteredColumns.push(p.find(this.availableColumnSelectedOptions,e=>e instanceof et)),this.$scope.$broadcast(W.COLUMN,this.filteredColumns))}updateCategoryColumns(){let e=this.availableColumnSelectedOptions;this.filterColumns((e,t)=>p.filter(e,e=>e.filterByCategoryId(t)),this.ids,e)}handleMergedCourse(){this.mergedCourses.forEach(e=>{this.availableRowSelectedOptions&&!p.find(this.availableRowSelectedOptions,t=>t.childCourseId===e.id)&&(e.ui.hidden=!0)})}getCheckedMergeCourseIds(){return p.filter(this.mergedCourses,e=>e.ui.checked).map(e=>e.id)}getAvailableRowSelectedOptions(){return this.availableRowSelectedOptions}constructor(e,t,n,i,r,s,o,a,l,c,d,u,m,h,g,f,b,v,y){this.$compile=e,this.$element=t,this.$injector=n,this.$ngRedux=i,this.$q=r,this.$scope=s,this.$location=a,this.ultraState=l,this.gradeService=c,this.gradebookPermissionService=d,this.$attrs=u,this.bbLocalize=m,this.CourseModel=h,this.GradeColumn=g,this.timeout=f,this.toast=b,this.featureFlagService=v,this.contextCourse=y,this.headerHeight=118,this.rowHeight=65,this.showFilterCriteria=!1,this.mergedCourses=[],this.currentGradesMap=new Map,this.availableMembershipIds=new Set,this.searchMembershipSelected=!1,this.isGridSortingEnabled=!1,this.isSummaryLoaded=!1,this.onUrlFiltersUpdated=()=>{let e=this.$location.search(),t=this.hasUrlFilters;this.hasUrlFilters=!!(e.memberId||e.gradebookColumnId||e.gradebookAssessmentType||e.gradebookCategoryId||e.courseGroupId||e.childCourseId),t!==this.hasUrlFilters&&this.setContainerHeight(),this.updateFilterConditions(e)},this.initialized=!1,this.sortParam=n5,this.sortAttributes={columnName:n9,sortType:n0.E.NONE},s.$watch("isSummaryLoaded",e=>{this.isSummaryLoaded=e}),v.createWaiter(T.x40.GridSorting).then(e=>{this.isGridSortingEnabled=e}),M.Z.OnWindow("resize",p.debounce(this.setContainerHeight.bind(this),100),s),this.setContainerHeight(),s.$on(nX.G.$locationChangeSuccess,()=>{this.timeout(()=>this.setContainerHeight(),this.$scope,50)}),this.mergedCourses.push(...this.$scope.mergedCourses),s.$on(eL.T.FOCUSIN_CELL,(e,t)=>{this.activeColumnId=t.columnId}),s.$on(eL.T.FOCUSOUT_CELL,(e,t)=>{this.activeColumnId=void 0}),s.$on(nX.N.$stateChangeStart,()=>this.changingState=!0),s.$on(nX.N.$stateChangeSuccess,()=>this.changingState=!1),this.subscribeToReduxChanges(),this.initialize().then(()=>{this.onUrlFiltersUpdated(),this.setupSearchFilterListener(),this.setupColumnChangeListener(),s.$on(nX.G.$locationChangeSuccess,this.onUrlFiltersUpdated)}),this.$scope.$on("bb-change-overall-panel-visibility",(e,t,n)=>{var i;this.gridData.course.id!==t&&this.gridData.course.isComplete()||((null===(i=this.setupOverallGradeMessageIsHiddenPreference)||void 0===i?void 0:i.value)==="true"?this.isOverallPanelShown=!1:this.isOverallPanelShown=n)}),this.$scope.$on("grade-notation-cache-update",(e,t)=>{this.updateOverallNotation()}),this.$scope.$on("bb-grades-schema-save",(e,t)=>{this.refreshSchema(t)}),M.Z.OnRootScope(this.$scope,"bb-grade-input-save",(e,t,n,i)=>{let r=this.gridData.getColumn(n),s=r.data;this.sortedColumnId&&((this.gridData.getColumn(this.sortedColumnId).data.isCalculated()||n===this.sortedColumnId)&&s.isGroupContent()?this.fetchMembershipOnSorting():this.onDataUpdate()),s.$fetch().$asPromise().then(()=>s.summary.$fetch().$asPromise()).then(()=>{if(r instanceof en)return this.updateAffectedColumns(this.getAffectedColumns(r))}).then(()=>{if(i){let e=this.gridData.getRowByUserId(i);this.refreshDataCell(e,r)}else this.gridData.updateColumnByMetadata(s),this.$scope.$broadcast(W.COLUMN)})}),this.$scope.$on(nJ.Ks,(e,t,n,i,r)=>{let s=this.gridData.getRowById(n),o=this.gridData.getColumn(t);this.refreshDataCell(s,o)}),this.$scope.$on("due-date-exception-updated",(e,t)=>{let{columnId:n,membershipId:i,groupId:r}=t;this.$scope.$broadcast(S.Lg,{columnId:n,userId:i,groupId:r,updateColumn:!0})}),this.$scope.$on("course.grades.gradebook-item.submission.grade-status-change",(e,t)=>{let n=this.gridData.getRowByUserId(t.userId),i=this.gridData.getColumn(t.columnId),r=i.data;r.$fetch().$asPromise().then(()=>r.summary.$fetch().$asPromise()).then(()=>{if(i instanceof en)return this.updateAffectedColumns(this.getAffectedColumns(i))}).then(()=>{i instanceof ec?this.refreshDataCells(this.gridData.getGroupIdUserIdMap()[t.groupId].map(e=>this.gridData.getRowByUserId(e)),[i]):t.updateColumn?(this.gridData.updateColumnByMetadata(r),this.$scope.$broadcast(W.COLUMN)):this.refreshDataCell(n,i)})}),this.$scope.$on("bb-reload-grid-view",e=>{this.$scope.$emit("grade-notation-update",this.gridData.course.id)}),this.$scope.$on(nQ.CQ,()=>{this.refreshColumns()}),this.$scope.$on(iL,(e,t)=>{this.refreshColumns(()=>{this.gridData.addUpdatedColumnFlag(t)})}),this.$scope.$on(nX.N.$stateChangeSuccess,(e,t,n,i)=>{i.name.endsWith(K.RK.GRADEBOOK_GRID_ADVANCED_FILTERS)&&this.updateFilterConditions(n)}),this.$scope.$on("$destroy",()=>{this.columnFiltersPresent()&&this.setUnfilteredColumns()}),s.$on(W.LOAD_MEMBERSHIP,(e,t,n)=>{if(this.availableRowSelectedOptions.length-t<10&&n.nextPage&&!this.searchMembershipSelected){let e=n.offset+n.limit;this.gridData.fetchPaginatedMembership({...this.rowFilterParams,columnId:this.sortedColumnId},e,this.sortParam).then(e=>{this.gridOptions.learnPagingResponse=e.paging,this.gridOptions.totalMembershipCount=e.paging.count,this.updateNewPaginatedMembershipDetailsToGrid(e)})}}),this.$scope.$on(W.DATA_UPDATE,()=>{this.onDataUpdate()}),this.canViewOverallPanel=d.canModify()}}it=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([n2(0,(0,x.tB)("$compile")),n2(1,(0,x.tB)("$element")),n2(2,(0,x.tB)("$injector")),n2(3,(0,x.tB)("$ngRedux")),n2(4,(0,x.tB)("$q")),n2(5,(0,x.tB)("$scope")),n2(6,(0,x.tB)("$rootScope")),n2(7,(0,x.tB)("$location")),n2(8,(0,x.tB)(j.HV)),n2(9,(0,x.tB)(S.HV)),n2(10,(0,x.tB)(y.HV)),n2(11,(0,x.tB)("$attrs")),n2(12,(0,x.tB)(I.serviceName)),n2(13,(0,x.tB)(eN.H)),n2(14,(0,x.tB)(nY.serviceName)),n2(15,(0,x.tB)(w.H)),n2(16,(0,x.tB)(q.HV)),n2(17,(0,x.tB)(eG.HV)),n2(18,(0,x.tB)(e$.HV))],it);class ii{constructor(e){this.$injector=e,this.restrict="E",this.template=nK,this.controller=it,this.controllerAs="gg",this.scope={course:"&",columnMetadatas:"<columns",attendanceIsAvailable:"&?",mergedCourses:"<",isSummaryLoaded:"="}}}ii.$inject=["$injector"],m.module(n7,[ng,eZ,e5,tc,tT,tO,tJ,t1,n$,tI.e1,nU,nj,y.e1,q.e1,n_.e,j.e1,tx]).directive(ie,["$injector",e=>e.instantiate(ii)]);var ir=n(344154),is=n(202784);let io="ultra.directives.grade.studentListViewTable";class ia extends is.Component{render(){let{analyticsId:e,courseId:t,currentUserId:n}=this.props;return is.createElement(D.Sp,{analyticsId:e,courseId:t,currentUserId:n})}}m.module(io,[]).component("bbStudentListViewTable",(0,eX.G5)({Class:ia,attributes:["analyticsId"],bindingNames:["courseId","currentUserId"],renderLocalized:!0,withProvider:!0}));var il=n(891886);function ic(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function id(e,t){return function(n,i){t(n,i,e)}}let iu="ultra.components.directives.studentListView",ip=`<bb-student-list-view-table
                        analytics-id="components.directives.grades.studentListView"
                        course-id="studentListView.scope.courseId"
                        current-user-id="studentListView.currentUserId"
                      ></bb-student-list-view-table>`;class im{constructor(e,t){this.scope=e,this.currentUserId=t.userId}}im=ic([id(0,(0,x.tB)("scope")),id(1,(0,x.tB)(il.HV))],im);class ih{constructor(e){this.$injector=e,this.restrict="E",this.template=ip,this.scope={courseId:"<"},this.link=e=>{e.studentListView=this.$injector.instantiate(im,{scope:e})}}}ih=ic([id(0,(0,x.tB)("$injector"))],ih),angular.module(iu,[io]).directive("bbStudentListView",["$injector",e=>e.instantiate(ih)]);let ig="ultra.directives.grade.overallGradeSetup";m.module(ig,[]).component("bbOverallGradeSetup",(0,eX.G5)({Class:({showFixedView:e,courseId:t,analyticsId:n,setupOverallGradeHideMessageCallback:i})=>is.createElement(D.dX,{analyticsId:n,showFixedView:e,courseId:t,setupOverallGradeHideMessageCallback:i}),attributes:["analyticsId"],bindingNames:["showFixedView","courseId","setupOverallGradeHideMessageCallback"],renderLocalized:!0,withProvider:!0,withThemeProvider:!0}));let ib="ultra.components.directives.setupOverallGrade",iv=`<bb-overall-grade-setup
                        analytics-id="components.directives.grade.overall-panel"
                        show-fixed-view="showFixedView"
                        course-id="courseId"
                        setup-overall-grade-hide-message-callback="setupOverallGradeHideMessageCallback">
                      </bb-overall-grade-setup>`;class iy{constructor(e){this.$injector=e,this.restrict="E",this.template=iv,this.scope={showFixedView:"<",courseId:"<",setupOverallGradeHideMessageCallback:"&"}}}iy=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(s=(0,x.tB)("$injector"),function(e,t){s(e,t,0)})],iy),angular.module(ib,[ig]).directive("bbSetupOverallGrade",["$injector",e=>e.instantiate(iy)]);var iS=n(740646),iC=n(869721);let iE="ultra.components.directives.bbUiIcon.small.FilterOptions";(0,nA.n)(iC.j,iE,"bbUiIconSmallFilterOptions");var iI=n(267744);let iw="ultra.components.directives.bbUiIcon.small.Upload";(0,nA.n)(iI.g,iw,"bbUiIconSmallUpload");var iA=n(268218),ik=n(138122);let iT="ultra.components.directives.bbUiIcon.medium.ContentView";(0,nA.n)(ik.C,iT,"bbUiIconMediumContentView");var iP=n(260911);function iD(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function ix(e,t){return function(n,i){t(n,i,e)}}let iR="ultra.directives.grade.courseGradesGrader",iL="after-update-grades";(o=d||(d={}))[o.NeedsGrading=1]="NeedsGrading",o[o.NeedsPostingOrAllGraded=2]="NeedsPostingOrAllGraded",o[o.AllPosted=3]="AllPosted",o[o.NothingToGrade=4]="NothingToGrade",o[o.Restricted=5]="Restricted",o[o.Attendance=6]="Attendance",o[o.Other=7]="Other",(a=u||(u={})).List="list",a.Grid="grid";let iN=new Set(["list","grid"]),i$="list",iO=new Set([iS.H1.id,iS.VE.id]),iG=iS.H1.id,i_="item";class iM{getLastViewPreference(){this.isDesktop&&!this.isSmallScreen?this.loadUserPreference({key:this.lastViewGradebookPreferenceKey}).then(()=>{let e=this.lastViewPreference;this.view=(null==e?void 0:e.value)&&iN.has(e.value)?e.value:i$}).catch(()=>{this.view=i$}):this.view=i$}get squareToggleValue(){return this.isGridView?"grid":"list"}set squareToggleValue(e){void 0!==this.lastViewGradebookPreferenceKey&&this.saveUserPreference({key:this.lastViewGradebookPreferenceKey,value:e}),this.isGridView?this.clearSelection():this.resetSortAttributes(),this.view=e}get areFilterResultsEmpty(){let e=this.filteredColumns.filter(e=>!(e instanceof et||e instanceof ee));return this.hasUrlFilters&&(0===e.length||0===this.filteredRows.length||this.selectionNotAvailable)}clearSelection(){var e,t,n;c.USER===(null===(e=this.selectedItem)||void 0===e?void 0:e.type)?this.scope.$root.$broadcast(eL.T.GRADEBOOK_CLEAR_USER_SELECTION_SEARCHBOX):(c.CATEGORY===(null===(t=this.selectedItem)||void 0===t?void 0:t.type)||c.COLUMN===(null===(n=this.selectedItem)||void 0===n?void 0:n.type))&&this.scope.$broadcast(W.COLUMN,this.filteredColumns),this.selectedItem=void 0,this.selectionNotAvailable=!1}itemSelected(e){switch(this.clearSelection(),this.selectedItem=e,e.type){case c.USER:return this.onGridSelectUser(e);case c.COLUMN:return this.selectColumn(e);case c.CATEGORY:return this.selectCategory(e)}}onGridSelectUser(e){var t;let n=e.data;if((null===(t=this.rowFilterParam)||void 0===t?void 0:t.membershipId)&&!this.rowFilterParam.membershipId.includes(n.id)?this.selectionNotAvailable=!0:this.scope.$broadcast(eL.T.GRADEBOOK_USER_SELECTED,e.data),n.user)return this.bbLocalize.formatUsernameSync(n.user,I.ILocaleUsernameFormat.Short,this.scope,{noWrap:!0,noEscape:!0})}selectColumn(e){let t=e.data.id,n=this.filteredColumns.findIndex(e=>e.id===t);return this.selectionNotAvailable=-1===n,-1!==n&&this.scope.$broadcast(eL.T.GRADEBOOK_COLUMN_SELECTED,[t]),e.data.getMetadata().columnName}selectCategory(e){let t=e.id,n=this.filteredColumns.findIndex(e=>e.data.gradebookCategoryId===t);return this.selectionNotAvailable=-1===n,-1!==n&&this.scope.$broadcast(eL.T.GRADEBOOK_CATEGORY_SELECTED,[t]),this.gradeSearchBox.getCategoryTitle(e.data.getMetadata().gradebookCategory)}typeAheadSearch(e){return this.debouncedTypeAheadSearch(e),this.deferred||(this.deferred=this.$q.defer()),this.deferred.promise}doTypeAheadSearch(e){this.deferred||(this.deferred=this.$q.defer()),this.gradeSearchBox.typeAheadSearch(e,this.filteredColumns,this.filteredRows,this.course,this.rowFilterParam).then(e=>{this.deferred&&(this.deferred.resolve(e),this.resetDeferred())})}resetDeferred(){this.deferred=null}renderMoreColumns(){if(!this.currentlyLoading&&this.columns.length<this.visibleColumns.length){let e=this.addColumns();this.scope.$root.$broadcast(eq.XC,"course-grades-grader",e)}}addColumns(){let e=this.$q.defer();return this.timeout(()=>{let t=this.columns.length;this.visibleColumns.length-t>this.GRADE_COLUMN_RENDER_LIMIT?this.columns.push(...this.visibleColumns.$slice(t,t+this.GRADE_COLUMN_RENDER_LIMIT)):this.columns.push(...this.visibleColumns.$slice(t,this.visibleColumns.length)),e.resolve()},this.scope,1e3),e.promise}showGradeListContainer(){return this.allCategoriesLoaded&&(this.columns.length>0&&!this.hasUrlFilters||this.hasUrlFilters)}updateFilteredCount(){this.filteredCount=this.mergedCourses.filter(e=>!0===e.ui.checked).length}calculateCanAddOverallGrade(e,t){if(!this.gradebookPermissionService.canModify()){this.showSetupOverallColumn=!1;return}t&&this.course.id!==t||this.course.isComplete()?this.showSetupOverallColumn=!1:this.showSetupOverallColumn=e}loadColumns(){this.currentlyLoading=!0;let e=this.grade.loadColumns(this.scope.courseGrades.course,!0,{expand:"collectExternalSubmissions",limit:this.GRADE_COLUMN_LOAD_LIMIT,offset:this.visibleColumns?this.visibleColumns.length:0});this.scope.$root.$broadcast(eq.XC,"course-grades-grader",e),e.then(e=>e.attachRelatedContentsByScoreProviderHandle(T.u$1.Scorm)).then(e=>{this.removeNotVisibleColumns(e),this.visibleColumns&&this.visibleColumns.length>0?this.visibleColumns.concat(e):this.visibleColumns=e,this.totalColumnCount=e.paging.count,e.paging.nextPage?this.loadColumns():(this.currentlyLoading=!1,this.loadCategories(),this.grade.needsToSetupOverall(this.visibleColumns,this.course.id).then(e=>{this.calculateCanAddOverallGrade(e)}),this.visibleColumns.length>this.GRADE_COLUMN_RENDER_LIMIT?this.columns=this.visibleColumns.$slice(0,this.GRADE_COLUMN_RENDER_LIMIT):this.columns=this.visibleColumns,this.expandColumnSummaries(this.visibleColumns))})}expandColumnSummaries(e){let t=e.paging&&e.paging.count||1e3,n=this.course.gradebook.summaries.expandingColumns(e);return this.$q.all(p.range(0,t,1e3).map(e=>n.$fetch({limit:1e3,offset:e,excludeCalculations:!0}).$asPromise())).then(()=>e)}loadCategories(){this.categoryService.getOrLoadCategoriesForCourse(this.scope.courseGrades.course.id).then(e=>{e.forEach(e=>{this.categoryTitleMap[e.id]=e.title}),this.visibleColumns&&this.visibleColumns.forEach(e=>{e.gradebookCategoryId&&(e.categoryTitle=this.categoryTitleMap[e.gradebookCategoryId]),this.categoryLocalizedTitleMap[e.id]=this.getLocalizedCategory(e)}),this.allCategoriesLoaded=!0})}loadMergedCourse(){this.entitlementService.isEntitled(B.s7.ViewChildCourse,this.course.id)&&this.course.getChildrenCourses().then(e=>{let t=p.sortBy(e,e=>e.childCourse.name);this.mergedCourses.push(...t),this.mergedCourses.forEach(e=>{e.ui={checked:!1,hidden:!1}})})}setupColumnUpdateResponder(){this.scope.$on(S.JH,(e,t)=>{this.replaceOrInsertColumnWrapper(t),t.summary.$fetch(),this.categoryLocalizedTitleMap[t.id]=this.getLocalizedCategory(t)}),this.scope.$on("content-update",(e,t)=>{t.isScorm()&&t.getScormGradebookItems().forEach(e=>{let n=this.course.gradebook.columns.$buildRaw(e.gradingColumn);n.ui={content:t},this.replaceOrInsertColumnWrapper(n),n.summary.$fetch()})}),this.scope.$on("bb-change-overall-panel-visibility",(e,t,n)=>{this.calculateCanAddOverallGrade(n,t)}),this.scope.$on("$stateChangeStart",(e,t,n,i)=>{if(i.name.indexOf("attendance")>-1){let e=this.visibleColumns.find(e=>e.isAttendance());e?e.$fetch().$asPromise().then(()=>this.removeNotVisibleColumns(this.columns)):this.loadColumns()}}),this.scope.$on(ir.UM,(e,t)=>{this.grade.loadColumns(this.scope.courseGrades.course,!0).then(e=>{this.visibleColumns=e,this.visibleColumns.forEach(e=>e.summary.$fetch()),this.scope.$broadcast(iL,t)})})}replaceOrInsertColumnWrapper(e){let t=this.replaceOrInsertColumn(this.visibleColumns,e);this.columns!==this.visibleColumns&&t<this.columns.length&&this.replaceOrInsertColumn(this.columns,e)}replaceOrInsertColumn(e,t){let n=p.findIndex(e,e=>e.id===t.id);return n>-1?e[n]=t:(t.positionBeforeId?n="start"===t.positionBeforeId.toLowerCase()?0:p.findIndex(e,e=>t.positionBeforeId===e.id):t.positionAfterId&&("start"===t.positionAfterId.toLowerCase()?n=0:"end"===t.positionAfterId.toLowerCase()?n=e.length:(n=p.findIndex(e,e=>t.positionAfterId===e.id))>=0&&n++),n>=e.length||n<0?e.push(t):e.splice(n,0,t),this.totalColumnCount++),n>-1?n:0}_removeColumn(e,t){let n=p.findIndex(e,e=>e.id===t.id);n>-1&&e.splice(n,1)}removeNotVisibleColumns(e){let t=0;e.forEach((n,i)=>{!1===n.visibleInBook&&(e.splice(i,1),t++,n.isAttendance()&&(this.scope.$broadcast("bb-delete-column",n),this.scope.$root.$broadcast("bb-reload-grid-view"),this.attendanceIsAvailable=!1))}),e.paging.count=e.paging.count-t}setupColumnDeleteResponder(){this.scope.$on("bb-delete-column",(e,t)=>{this.removeColumn(t),t.externalGrade&&(this.scope.$root.$broadcast("bb-reload-grid-view"),this.scope.$root.$broadcast("bb-change-overall-panel-visibility",t.courseId,!0))})}removeColumn(e){if(this._removeColumn(this.visibleColumns,e),this.columns!==this.visibleColumns&&this._removeColumn(this.columns,e),this.totalColumnCount--,e&&e.contentId){let t=this.visibleColumns&&this.visibleColumns.find(t=>t.contentId===e.contentId);t&&this.removeColumn(t)}}setupViewChange(){this.scope.$watch("courseGradesGrader.view",()=>{var e;let t=!(null===(e=this.$location.search())||void 0===e?void 0:e.gradebookView);this.ultraState.search("gradebookView",this.view,{location:!t||"replace",notify:!1}),this.scope.$root.$broadcast(eL.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,!0)}),this.scope.$on(nX.G.$locationChangeSuccess,this.handleLocationChanged)}setupListViewTypeChange(){this.scope.$watch("courseGradesGrader.currentTabId",()=>{this.ultraState.search("listViewType",this.currentTabId)})}setupBreakpointChange(){M.Z.OnWindow("resize",p.debounce(()=>{h._H()&&this.isGridView&&(this.view="list")},100),this.scope)}setUpLastViewGradebookPreferenceKey(){let e=this.scope.courseGrades.course.id.replace(/_/g,".");this.lastViewGradebookPreferenceKey="grade.last.gradebook.view"+e}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({lastViewPreference:T.Ys.userPreference.getUserPreferenceByKey(e,this.lastViewGradebookPreferenceKey)}),e=>({loadUserPreference:t=>e(T.Nwg.userPreference.loadUserPreference({...t})),saveUserPreference:t=>e(T.Nwg.userPreference.persistUserPreference(t))}))(this);this.scope.$on("$destroy",e)}get isSmallScreen(){return h._H()}get isGridView(){return"grid"===this.view}get isGradableItemsListView(){return"list"===this.view&&this.currentTabId===iS.H1.id}get isStudentListView(){return"list"===this.view&&this.currentTabId===iS.VE.id}resetSortAttributes(){this.sortAttributes={columnName:i_,sortType:n0.E.NONE},this.sortColumnsByPosition()}sortColumnsByPosition(){this.visibleColumns&&this.visibleColumns.sort((e,t)=>e.position-t.position)}onClickSortIcon(e){this.sortAttributes=(0,L.z)(e,this.sortAttributes),this.sortColumnByHeaderName()}sortColumnByHeaderName(){var e,t;if(this.sortColumnsByPosition(),(null===(e=this.sortAttributes)||void 0===e?void 0:e.sortType)===n0.E.ASCENDING||(null===(t=this.sortAttributes)||void 0===t?void 0:t.sortType)===n0.E.DESCENDING)switch(this.sortAttributes.columnName){case i_:this.sortColumnByFieldName(this.sortAttributes.sortType);break;case"category":this.sortColumnByCategory(this.sortAttributes.sortType);break;case"dueDate":this.sortColumnByDueDate(this.sortAttributes.sortType);break;case"gradingStatus":this.sortColumnByStatus(this.sortAttributes.sortType);break;case"post":this.sortColumnByPost(this.sortAttributes.sortType)}this.setPagingDataToColumn()}setPagingDataToColumn(){this.visibleColumns.length>this.GRADE_COLUMN_RENDER_LIMIT?(this.columns.$clear(),this.columns.push(...this.visibleColumns.$slice(0,this.GRADE_COLUMN_RENDER_LIMIT))):this.columns=this.visibleColumns}sortColumnByFieldName(e){this.visibleColumns.sort((t,n)=>e===n0.E.ASCENDING?t.columnName.localeCompare(n.columnName):n.columnName.localeCompare(t.columnName))}sortColumnByCategory(e){this.visibleColumns.sort((t,n)=>{let i=this.categoryLocalizedTitleMap[t.id],r=this.categoryLocalizedTitleMap[n.id];return e===n0.E.ASCENDING?i.localeCompare(r):r.localeCompare(i)})}getLocalizedCategory(e){var t,n;let i=(null===(t=e.gradebookCategory)||void 0===t?void 0:t.title)||"NoCategory.name";return(null===(n=e.gradebookCategory)||void 0===n?void 0:n.isUserDefined)?i:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:i})}sortColumnByDueDate(e){let t=[],n=[],i=[];this.visibleColumns.forEach(e=>{e.isAttendance()?t.push(e):e.dueDate?i.push(e):n.push(e)}),e===n0.E.ASCENDING?(i.sort((e,t)=>e.dueDate.getTime()-t.dueDate.getTime()),this.visibleColumns.$clear(),this.visibleColumns.push(...i,...t,...n)):(i.sort((e,t)=>t.dueDate.getTime()-e.dueDate.getTime()),this.visibleColumns.$clear(),this.visibleColumns.push(...n,...t,...i))}sortColumnByStatus(e){this.visibleColumns.sort((t,n)=>{let i=this.getStatusPriorityFromSummary(t),r=this.getStatusPriorityFromSummary(n);if(1===i&&1===r){let i=0,r=0;return i=t.isCollectExternalSubmissions()?this.getNumberEligibleToBeGradedExternalSubmissions(t):t.isOffline()?t.summary.numStudentsNeedsGrading:this.getNumberOfSubmissionsNeedsGrading(t),r=n.isCollectExternalSubmissions()?this.getNumberEligibleToBeGradedExternalSubmissions(n):n.isOffline()?n.summary.numStudentsNeedsGrading:this.getNumberOfSubmissionsNeedsGrading(n),e===n0.E.ASCENDING?i-r:r-i}return e===n0.E.ASCENDING?i-r:r-i})}getNumberOfSubmissionsNeedsGrading(e){return null==e.summary.numSubmissionsNeedsGrading?e.summary.numSubmissionsNeedsReconciling:e.summary.numSubmissionsNeedsGrading}getNumberEligibleToBeGradedExternalSubmissions(e){return m.isUndefined(e.summary.numGroupsNeedsGrading)?e.summary.numStudentsEligibleToBeGradedExternalSubmission:e.summary.numGroupsEligibleToBeGradedExternalSubmission}getStatusPriorityFromSummary(e){if(e.isAttendance())return 6;let t=e.summary.getStatus();if(e.isCollectExternalSubmissions()&&(t===B.MN.NeedsPosting||t===B.MN.NothingToGrade||t===B.MN.AllGraded)&&this.getNumberEligibleToBeGradedExternalSubmissions(e)>0)return 1;switch(t){case B.MN.NeedsGrading:return 1;case B.MN.NeedsPosting:case B.MN.AllGraded:return 2;case B.MN.AllPosted:return 3;case B.MN.NothingToGrade:return 4;case B.MN.Restricted:return 5;default:return 7}}sortColumnByPost(e){let t=[],n=[];this.visibleColumns.forEach(e=>{let i=this.gradebookPermissionService.canPostGrades(e.courseId,e);!e.isCalculated()&&!this.course.isComplete()&&e.summary.hasGradesToPost()&&i?n.push(e):t.push(e)}),e===n0.E.ASCENDING?(n.sort((e,t)=>e.summary.totalNumberOfGradesToPost()-t.summary.totalNumberOfGradesToPost()),this.visibleColumns.$clear(),this.visibleColumns.push(...n,...t)):(n.sort((e,t)=>t.summary.totalNumberOfGradesToPost()-e.summary.totalNumberOfGradesToPost()),this.visibleColumns.$clear(),this.visibleColumns.push(...t,...n))}constructor(e,t,n,i,r,s,o,a,l,d,u,m,h){this.$modal=e,this.$location=t,this.scope=n,this.$q=i,this.entitlementService=r,this.grade=s,this.gradebookPermissionService=o,this.categoryService=a,this.ultraState=l,this.timeout=d,this.gradeSearchBox=u,this.bbLocalize=m,this.$ngRedux=h,this.GRADE_COLUMN_LOAD_LIMIT=1e3,this.GRADE_COLUMN_RENDER_LIMIT=50,this.currentlyLoading=!1,this.categoryTitleMap={},this.categoryLocalizedTitleMap={},this.allCategoriesLoaded=!1,this.isDesktop=!1,this.canDownloadGradebook=!1,this.canUploadGradebook=!1,this.showFilterCriteriaSettings=!1,this.mergedCourses=[],this.filteredColumns=[],this.filteredRows=[],this.advancedFiltersEmptyResults=!1,this.deferred=null,this.checkForURLFilters=()=>{let e=this.$location.search();this.hasUrlFilters=!!(e.memberId||e.gradebookColumnId||e.gradebookAssessmentType||e.gradebookCategoryId||e.courseGroupId||e.childCourseId)},this.changeListViewType=e=>{iO.has(e)&&(this.currentTabId=e,this.resetSortAttributes())},this.handleLocationChanged=()=>{var e;let t=null===(e=this.$location.search())||void 0===e?void 0:e.gradebookView;iN.has(t)&&(this.view=t)};let g=l.params.gradebookView,f=l.params.listViewType;this.resetSortAttributes(),this.setUpLastViewGradebookPreferenceKey(),this.subscribeToReduxChanges(),this.isDesktop=eW.Z.detect().desktop(),iN.has(g)?this.view=g:this.getLastViewPreference(),iO.has(f)?this.currentTabId=f:this.currentTabId=iG,this.checkForURLFilters(),n.$on(nX.G.$locationChangeSuccess,this.checkForURLFilters),this.setupColumnUpdateResponder(),this.setupColumnDeleteResponder(),this.setupViewChange(),this.setupBreakpointChange(),this.setupListViewTypeChange(),this.userHasViewGradebookPermission=this.gradebookPermissionService.canView(),n.$on("bb-update-category-icon",(e,t,n)=>{t.categoryTitle=this.categoryTitleMap[n],this.categoryLocalizedTitleMap[t.id]=this.getLocalizedCategory(t)}),n.$on("bb-grades-category-update",(e,t)=>{this.visibleColumns.forEach(e=>{e.gradebookCategoryId===t.id&&(e.categoryTitle=t.title,e.gradebookCategory.title=t.title,this.categoryLocalizedTitleMap[e.id]=this.getLocalizedCategory(e))})}),n.$on(nQ.CQ,()=>{this.expandColumnSummaries(this.visibleColumns)}),n.$on(eL.T.GRADEBOOK_CLEAR_SEARCHBOX_SELECTION,e=>{this.updateFilteredCount()}),n.$on(eL.T.ADVANCED_FILTERS_COLUMNS,(e,t)=>{var n,i;this.filteredColumns=t,(c.CATEGORY===(null===(n=this.selectedItem)||void 0===n?void 0:n.type)||c.COLUMN===(null===(i=this.selectedItem)||void 0===i?void 0:i.type))&&this.itemSelected(this.selectedItem)}),n.$on(eL.T.ADVANCED_FILTERS_ROWS,(e,t,n)=>{var i;this.filteredRows=t,this.rowFilterParam=n,c.USER===(null===(i=this.selectedItem)||void 0===i?void 0:i.type)&&this.itemSelected(this.selectedItem)}),M.Z.OnRootScope(n,S.Lg,(e,t)=>{let n=this.visibleColumns.find(e=>e.id===t.columnId);n&&(n.summary.$fetch(),this.scope.$root.$broadcast("bb-update-summary"),this.scope.$root.$broadcast("bb-update-category-icon",n),this.replaceOrInsertColumnWrapper(n),n.$fetch())}),this.canUploadGradebook=o.canModify(),this.scope.courseGrades.course.$then(e=>{e.isToolAvailable("bb-attendance").then(e=>{this.attendanceIsAvailable=e}),this.loadColumns(),this.course=e,this.loadMergedCourse(),this.canDownloadGradebook=o.canViewGrades()&&this.entitlementService.isEntitled("course.gradebook-data.export.EXECUTE",this.course.id)}),this.debouncedTypeAheadSearch=e=>(0,p.debounce)(()=>this.doTypeAheadSearch(e),200)()}}iM=iD([ix(0,(0,x.tB)("$modal")),ix(1,(0,x.tB)("$location")),ix(2,(0,x.tB)("scope")),ix(3,(0,x.tB)("$q")),ix(4,(0,x.tB)(_.HV)),ix(5,(0,x.tB)(S.HV)),ix(6,(0,x.tB)(y.HV)),ix(7,(0,x.tB)(C.HV)),ix(8,(0,x.tB)(j.HV)),ix(9,(0,x.tB)(w.H)),ix(10,(0,x.tB)(eV)),ix(11,(0,x.tB)(I.serviceName)),ix(12,(0,x.tB)("$ngRedux"))],iM);class iB{constructor(e){this.$injector=e,this.restrict="E",this.template=iP,this.scope=!0,this.link=e=>{e.courseGradesGrader=this.$injector.instantiate(iM,{scope:e})}}}iB=iD([ix(0,(0,x.tB)("$injector"))],iB),m.module(iR,[ez.e1,$,E.e1,S.e1,y.e1,I.moduleName,eq.e1,eh.e1,n7,iS.e1,iu,ib,iA.e,nw.e,iE,iw,eU,iT,ej.e1]).directive("bbCourseGradesGrader",["$injector",I.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/course-grades-grader"),e.instantiate(iB))])},447192:function(e,t,n){"use strict";n.d(t,{BY:function(){return d},mV:function(){return u}});var i=n(302032),r=n(341253),s=n(808361),o=n(860995),a=n(676954),l=n(83991);function c(e,t){return function(n,i){t(n,i,e)}}let d="course-grades-student-tab",u="CourseGradebookStudentTitleHandler";class p extends r.IG{process(e,t,n){let i=this.getTabKey(t);return this.bbLocalize.translate({key:i,locale:this.bbLocalize.getLocale(this.$rootScope)}).then(e=>{this.$rootScope.index.title=[e,n,this.currentCourse.course.name].filter(e=>!!e).join(" / ")})}getTabKey(e){if(!e)return"base.nav.grades";switch(e){case l.$O.Grades:return"base.nav.grades";case l.$O.Progress:return"course.content.progress.pageTitle";case l.$O.Notes:return"gradebook.studentTabs.notes"}}constructor(e,t,n,i,r,s){super(e,t,n,i,r),this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i,this.currentCourse=r,this.$q=s}}p=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(s.HV)),c(3,(0,i.tB)(a.serviceName)),c(4,(0,i.tB)(o.HV)),c(5,(0,i.tB)("$q"))],p),(0,r.XN)(u,p)},379640:function(e,t,n){"use strict";n.d(t,{e1:function(){return C}}),n(487600);var i,r,s=n(464027),o=n(362767),a=n(371515),l=n(45680),c=n(742854),d=n(649955),u=n(676954),p=n(891886),m=n(986709),h=n(756124),g=n(984654),f=n(83991),b=n(415689),v=n(754883),y=n(442568);n(15910);var S=n(89120);let C="ultra.grade.display";(r=i||(i={})).AttemptStatus="AttemptStatus",r.FinalBase="FinalBase",r.Column="Column",r.Course="Course",r.GradeColor="GradeColor";class E{isSchemaTypeComplete(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===m.aQo.Complete}isStatusComplete(){var e,t,n,i,r;return this.isStudent?!!(null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.displayGrade.grade)&&!(null===(r=this.scope.gradeDetail)||void 0===r?void 0:r.displayGrade.scoredByAutomaticZero):"FinalBase"===this.scope.gradeType?"number"==typeof this.schemaGradeValue:(null===(t=this.scope.gradeDetail)||void 0===t?void 0:null===(e=t.isGraded)||void 0===e?void 0:e.call(t))&&!(null===(n=this.scope.gradeDetail)||void 0===n?void 0:n.isPastDueZero())}setFullDisplayGrade(){let e;if(this.schema&&this.schema.scaleType&&(this.schema.scaleType===m.aQo.Tabular||this.schema.scaleType===m.aQo.Text||this.schema.scaleType===m.aQo.Complete))this.fullDisplayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?E.NO_GRADE_DISPLAY:this.schemaGrade||E.NO_GRADE_DISPLAY;else{var t;if(e=this.scope.showNotGraded&&this.scope.showNotGraded()?E.NO_GRADE_DISPLAY:this.getSchemaGrade(),this.shouldShowPointsPossible()){let t="components.directives.grade.display-grade.";t+="Course"===this.scope.gradeType?"course-score":"score",this.bundlePromise.then(()=>{var n;this.fullDisplayGrade=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:t,params:{grade:e,possible:h.m(null!==(n=this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible)&&void 0!==n?n:this.scope.column.possible,2)},noWrap:!0,noEscape:!0})})}else(null===(t=this.schema)||void 0===t?void 0:t.scaleType)===m.aQo.Percent&&e!==E.NO_GRADE_DISPLAY?this.bundlePromise.then(()=>{this.fullDisplayGrade=this.localize.translateSync({locale:this.localize.getLocale(this.scope),key:"components.directives.grade.display-grade.percent",params:{grade:e},noWrap:!0,noEscape:!0})}):this.fullDisplayGrade=e}}get attempt(){return this.scope.attempt&&this.scope.attempt()||this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)}convertGrade(e){try{let t=e.replace(/[^0-9.,]/g,"");return this.localize.parseNumberSync(t,this.scope)}catch(e){return null}}getSchemaGrade(){let e;return null!=(e=null==this.schemaGradeValue?this.convertGrade(this.schemaGrade):h.m(this.schemaGradeValue,2))&&this.localize.formatNumberSync(e,this.scope,{maximumFractionDigits:d.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL})||E.NO_GRADE_DISPLAY}shouldShowPointsPossible(){var e;return(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===m.aQo.Score&&(m.eNW.NonCalculated===this.scope.column.calculationType||this.scope.gradeDetail&&this.scope.gradeDetail.pointsPossible>0||this.scope.column.possible>0)}getCourseColorClass(){return this.courseColorClass}noGradeToDisplay(){return this.fullDisplayGrade===E.NO_GRADE_DISPLAY}getNoGradeDisplay(){return E.NO_GRADE_DISPLAY}shouldShowRubricButton(){return this.scope.showRubricButton&&this.scope.showRubricButton()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()}shouldShowRubricDiv(){return this.scope.showRubricDiv&&this.scope.showRubricDiv()&&this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()}shouldShowRubricEvaluation(){return this.scope.column.hasRubricAssociation&&this.scope.column.hasRubricAssociation()&&null!=this.attempt&&this.attempt.isCompleted()&&!this.scope.gradeDetail.isOverrideGrade()}constructor(e,t,n,i,r,o,l,c,d,u){this.scope=e,this.attrs=t,this.$q=n,this.$injector=i,this.gradebookPermissionService=o,this.localize=l,this.context=c,this.schemaService=d,this.contextUser=u,this.fullDisplayGrade=E.NO_GRADE_DISPLAY,this.bundlePromise=l.loadBundle("components/directives/grade/display-grade"),this.courseColorClass=e.courseColorClass,this.cursorPointer=e.cursorPointer&&e.cursorPointer(),this.cursorDefault=e.cursorDefault&&e.cursorDefault(),this.isStudent=u.userModel.isStudent(),this.isStudent||o.canViewGrades(this.scope.course&&this.scope.course().id)?(this.scope.$watch("::column",e=>{if(e){let t=e=>{let t;let n=this.scope.$watch("gradeDetail",s=>{s&&(this.schemaGrade=r.getGradeToDisplay(s.displayGrade,this.scope,this.schema.scaleType),this.setFullDisplayGrade(),("GradeColor"===this.scope.gradeType||"FinalBase"===this.scope.gradeType)&&(this.gradeDisplayItem=i.instantiate(a.G,{gradeDetail:s,scope:this.scope}),this.scope.$watch("::column",t=>{t&&this.gradeDisplayItem.init(t,e).then(()=>{this.gradeDisplayItem.displayGrade=this.scope.showNotGraded&&this.scope.showNotGraded()?null:s.displayGrade,this.gradeDisplayItem.displayValue&&(this.colorClass=this.gradeDisplayItem.getGradeColor())})})),n(),t())});t=this.scope.$watch("summary",e=>{if(this.colorClass="na",e){if(this.schemaGrade=e.averageGradeForStudentsSchemaValue,this.schemaGradeValue=e.averageGradeForStudents,this.setFullDisplayGrade(),"FinalBase"===this.scope.gradeType&&!s.isUndefined(e.averageGradeForStudents)){var t,i;let n=h.m(null!==(i=null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.pointsPossible)&&void 0!==i?i:this.scope.column.possible,2);this.schema.scaleType===m.aQo.Score?this.colorClass=r.getPercentileColor(r.pointToPercentage(e.averageGradeForStudents,n)):this.colorClass=r.getPercentileColor(e.averageGradeForStudents)}n()}},!0)};this.scope.schema?(this.schema=this.scope.schema,t(this.scope.schema)):d.loadGradeSchema(e).then(e=>{this.schema=e,t()})}}),"AttemptStatus"===this.scope.displayType&&(this.courseColorClass="na",this.attempt?this.attempt.isNeedsGrading()?this.attemptStatus="components.directives.grade.display-grade.pending-grade":this.attempt.isInProgress()&&(this.attemptStatus="components.directives.grade.display-grade.NA"):this.attemptStatus="components.directives.grade.display-grade.NA")):(this.fullDisplayGrade=this.attemptStatus=E.NO_GRADE_DISPLAY,this.colorClass="na")}}E.NO_GRADE_DISPLAY="--",E.$inject=["scope","attrs","$q","$injector",d.HV,l.HV,u.serviceName,o.HV,c.HV,p.HV];class I{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="E",this.scope={attempt:"&?",gradeDetail:"=",summary:"=",column:"=",schema:"=?",displayType:"@",finalGrade:"&?",translateKey:"@",courseColorClass:"=",isGroupGradeMultiple:"&?",showNotGraded:"&?",overallGradePeekSref:"@?",showRubricButton:"&?",showRubricDiv:"&?",cursorPointer:"&?",cursorDefault:"&?",course:"&?"},this.link=(e,t,n)=>{e.displayGrade=this.$injector.instantiate(E,{scope:e,attrs:n}),e.gradeType=function(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}(e.displayType)||"Column",t.append(this.$compile(function(e){switch(e){case"AttemptStatus":return b;case"FinalBase":return v;case"Column":return y;case"GradeColor":return S}}(e.gradeType))(e))}}}I.$inject=["$injector","$compile"];let w={Class:f.XW,bindingNames:["gradeValue","isComplete","totalPoints","onBlur","initialHasFocus","isEditable","isRubricEnabled","canOpenRubricEval","ariaCompleteIncompleteLabel"],attributes:["analyticsId"],renderLocalized:!0,withProvider:!0};s.module(C,[d.e1,l.e1]).directive("bbDisplayGrade",["$injector",e=>e.instantiate(I)]).component("bbCompleteIncompleteGradePill",(0,g.G5)(w))},780891:function(e,t,n){"use strict";n.d(t,{T:function(){return r}});let i="rb_grade_grid_",r={REFRESH_OVERALL_EDITOR:`${i}refresh_overall_editor`,REFRESH_CELL_EDITOR:`${i}refresh_cell_editor`,SELECT_GROUP:`${i}select_group`,REFRESH:`${i}refresh`,FOCUSIN_CELL:`${i}focusin`,FOCUSOUT_CELL:`${i}focusout`,ENTER_EDITOR:`${i}enter_editor`,CLOSE_EDITOR:`${i}close_editor`,ADVANCED_FILTERS_COLUMNS:`${i}advanced-filter-columns`,ADVANCED_FILTERS_ROWS:`${i}advanced-filter-rows`,GRADEBOOK_CLEAR_SEARCHBOX_SELECTION:`${i}gradebook-clear-searchbox-selection`,GRADEBOOK_CLEAR_USER_SELECTION_SEARCHBOX:`${i}gradebook-clear-user-selection-searchbox`,GRADEBOOK_USER_SELECTED:`${i}gradebook-user-selected`,GRADEBOOK_COLUMN_SELECTED:`${i}gradebook-column-selected`,GRADEBOOK_CATEGORY_SELECTED:`${i}gradebook-category-selected`}},378074:function(e,t,n){"use strict";n.d(t,{e1:function(){return x},qt:function(){return w}}),n(273452),n(487600),n(134059),n(969685);var i=n(276635),r=n(464027),s=n(676954),o=n(65783),a=n(574027),l=n(495794),c=n(756124),d=n(371515),u=n(649955),p=n(968362),m=n(569722),h=n(385847),g=n(555840),f=n(480489),b=n(437974),v=n(808361),y=n(379640),S=n(905120),C=n(302032),E=n(986709),I=n(472364),w=n(516322),A=n(240881),k=n(259197),T=n(118717),P=n(625506);function D(e,t){return function(n,i){t(n,i,e)}}let x="ultra.components.directives.grade.gradeInput";class R{buildGradeDialog(){this.gradeDialog={isVisible:!1,textContent:{title:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.title"),body:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.body"),secondaryButtonText:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.secondaryButtonText"),primaryButtonText:this.getStringFromLocale("components.directives.grade.grade-input.clearConfirmationDialog.primaryButtonText")},onDismiss:this.onDismissCallback,onSuccess:this.onSuccessCallback}}openOverrideDialog(){var e;if(!(null===(e=this.modalInstance)||void 0===e?void 0:e.opened)){let e=this.scope.gradeDetail?this.scope.gradeDetail.getScore():"",t=this.getTruncatedPointsPossible(),n=this.bbLocalize.parseNumberSync(this.gradeDisplayItem.displayValue),i=c.m(this.grade.pointToPercentage(n,t),2);return this.overrideDialogScope.closeModal=this.closeModal,this.overrideDialogScope.grade=i,this.modalInstance=this.$modal.open({template:w,scope:this.overrideDialogScope,resolve:{translations:[s.serviceName,e=>e.loadBundle("components/directives/grade/grade-input")]}}),this.modalInstance.result.then(()=>(this.timeout(()=>{P("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.validateAndSave()),()=>{this.gradeDisplayItem.displayValue=e,this.onDismissCallback()}).finally(()=>{this.modalInstance.opened=null})}}shouldShowModal(){var e;return(null===(e=this.scope.column)||void 0===e?void 0:e.externalGrade)&&this.isScoreSchema()&&this.isFormValid()&&this.isFormDirty()&&this.scoreHasChanged()&&""!==this.gradeDisplayItem.displayValue&&!this.isGradesComplete()}getStringFromLocale(e){return this.bbLocalize.translateSync({key:e,locale:this.bbLocalize.getLocale(this.scope)})}isFormDirty(){return this.form[this.id].$dirty}isFormValid(){return this.form[this.id].$valid}repositionGradeNotationDropdown(e){let t=this.inputElement.closest(this.gradeNotationsWrapperSelector).height(),n=e.position()&&e.position().top,i=n+e.height();if(this.scope.offsetTop&&this.scope.offsetTop()){let t=n+2*this.scope.offsetTop();e.css("top",t),e.addClass("show"),i=t+e.height()}i>t&&this.scope.$root.$broadcast("performance-dropdown-container-height-update",i-t+30)}showGradeNotationDropdown(){P("#performanceCodes-"+this.id).length>0&&P("#performanceCodes-"+this.id).remove();let e=this.$compile(I)(this.scope);this.inputElement.closest(this.gradeNotationsWrapperSelector).append(e),this.scope.offsetTop&&this.isWrapperDivClickHandled&&this.repositionGradeNotationDropdown(e),e.on("keydown",t=>{if(t.keyCode!==h.Mf||t.shiftKey)t.keyCode===h.hY&&(t.preventDefault(),t.stopPropagation(),this.inputElement.trigger("click.fndtn.dropdown"),this.timeout(()=>{P("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.$q.when(this.validateAndSave()).finally(()=>{this.gradeDialog.isVisible||this.setFocusOnNextTabbableElement()}));else{let n=e.find(":tabbable");n.last().is(":focus")&&(t.preventDefault(),n.eq(0).focus())}}),this.element.foundation()}refreshInputBox(){var e,t,n,i,r;let s=this.scope.gradeDetail&&this.scope.gradeDetail.id,o=this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade,a=this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress(),l=this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple(),c=this.scope.column.gradingSchemaId;this.gradeDisplayItem.gradeDetail=this.scope.gradeDetail,this.gradeDisplayItem.schema.id!==c&&this.gradeDisplayItem.init(this.scope.column),s&&o&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayGrade=o,this.updateGradeColor()):a&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):l&&!this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):o&&!this.scope.gradeDetail.isExempt?this.gradeDisplayItem.displayGrade=o:l&&this.scope.gradeDetail.isExempt?(this.gradeDisplayItem.displayValue=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.noValue"}),this.gradeDisplayItem.parsedValue="",this.updateGradeColor()):(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isExempt)&&((null===(n=this.scope.gradeDetail)||void 0===n?void 0:null===(t=n.displayGrade)||void 0===t?void 0:t.isOverride)||!(null===(r=this.scope.gradeDetail)||void 0===r?void 0:null===(i=r.displayGrade)||void 0===i?void 0:i.scoredByAutomaticZero))?(this.gradeDisplayItem.displayGrade=o,this.updateGradeColor()):this.gradeDisplayItem.displayGrade=null}isSchemaTypeLetterOrPercentage(){var e,t,n,i;return(null===(t=this.gradeDisplayItem)||void 0===t?void 0:null===(e=t.schema)||void 0===e?void 0:e.scaleType)===E.aQo.Percent||(null===(i=this.gradeDisplayItem)||void 0===i?void 0:null===(n=i.schema)||void 0===n?void 0:n.scaleType)===E.aQo.Tabular}isSchemaTypeComplete(){var e,t;return(null===(t=this.gradeDisplayItem)||void 0===t?void 0:null===(e=t.schema)||void 0===e?void 0:e.scaleType)===E.aQo.Complete}shouldShowTotalPoints(){var e,t,n,i,r;return(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isExempt)?!((null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.isExempt)&&this.isMultipleShown()||this.scope.column.isScorm()&&!this.isScoreSchema())&&(null===(n=this.gradeDisplayItem)||void 0===n?void 0:n.displayValue)&&!this.isSchemaTypeLetterOrPercentage():((null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.isPastDueZero())&&!this.isSchemaTypeLetterOrPercentage()||(null===(r=this.scope.gradeDetail)||void 0===r?void 0:r.isOverrideGrade())&&!this.isSchemaTypeLetterOrPercentage()||(this.gradeDisplayItem.shouldShowTotalPoints()||this.hasFocus()||this.form[this.id]&&this.isFormDirty())&&(!this.isMultipleShown()&&!this.isInProgressShown()||(this.isMultipleShown()||this.isInProgressShown())&&this.hasFocus())&&!this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue))&&!(this.scope.column.isScorm()&&!this.isScoreSchema())}getTruncatedPointsPossible(){var e,t,n;return this.isScoreSchema()?c.m((null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.manualGrade)&&this.scope.gradeDetail.pointsPossible||this.scope.column.possible||this.scope.column.isCalculated()&&100||0,2):c.m(null!==(n=null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.pointsPossible)&&void 0!==n?n:this.scope.column.isCalculated()?100:this.scope.column.possible,2)}isScoreSchema(){var e,t;return(null===(t=this.gradeDisplayItem)||void 0===t?void 0:null===(e=t.schema)||void 0===e?void 0:e.scaleType)===E.aQo.Score}isReadOnly(){return this.scope.readOnly&&this.scope.readOnly()}hasFocus(){return this.inputElement.is(":focus")||this.wrapperDiv.hasClass(R.WRAPPER_FOCUS_CLASS)}getOldScore(){var e,t,n,i,r;return(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.isOverride())&&(null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.displayGrade.perfCode)?null===(i=this.scope.gradeDetail)||void 0===i?void 0:i.displayGrade.perfCode.code:(null===(n=this.scope.gradeDetail)||void 0===n?void 0:n.getScore())?(null===(r=this.scope.gradeDetail.displayGrade)||void 0===r?void 0:r.requiresSchemaKnowledgeToDisplay)?Number(this.scope.gradeDetail.getScore())*this.scope.gradeDetail.pointsPossible/100:Number(this.scope.gradeDetail.getScore()):null}getNewScore(){return this.gradeDisplayItem.displayValue?isNaN(this.gradeDisplayItem.displayValue)?this.gradeDisplayItem.displayValue:this.bbLocalize.parseNumberSync(this.gradeDisplayItem.displayValue):null}scoreHasChanged(){return this.getOldScore()!==this.getNewScore()}get colorClass(){var e,t,n,i,r,s;let o=null===(e=this.form[this.id])||void 0===e?void 0:e.$viewValue;return this.scope.forGroup&&o&&this.isReservedWord(o)||null===(t=this.gradeDisplayItem)||void 0===t||!t.displayValue||(null===(n=(i=this.scope).isGroupGradeMultiple)||void 0===n?void 0:n.call(i))||(null===(r=(s=this.scope).isGroupGradeInProgress)||void 0===r?void 0:r.call(s))?"":this.gradeDisplayItem.getGradeColor()}validateAndSave(e){if(!this.isGradeErased()||e||this.isGradeErased()&&!this.scope.hasRubricClearConfirmationCallout){if(this.wrapperDiv.removeClass(R.WRAPPER_FOCUS_CLASS),this.scope.$emit("grade-input-blur",this.id),this.shouldShowPastDueZeroIndicator()&&""===this.form[this.id].$viewValue&&(this.gradeDisplayItem.displayValue="0",this.form[this.id].$setPristine()),this.isFormValid()){if(this.isFormDirty()&&this.scoreHasChanged()){if(!this.isSaving){let e=this._save();return this.scope.$emit("grade-input-save-promise",e),e.then(e=>{this.form[this.id]&&this.form[this.id].$setPristine(),this.alertScreenReaderNewGrade=!0,this.scope.$emit("bb-grade-input-save",e,this.scope.column.id,this.scope.forUser&&this.scope.forUser.id),this.reloadGradeDetail(this.courseId,[this.scope.column.id],{membershipIds:[this.scope.gradeDetail.memberId]},{expand:["grade.instructorFeedback","grade.lastFeedbackAuthor"]}),this.refreshInputBox()}).finally(()=>{this.isSaving=!1}),e}}else this.form[this.id].$setPristine(),this.refreshInputBox()}}else this.isSaving||(this.gradeDialog.isVisible=!0)}_validate(){let e=this.grade.createGradeSubmission(this.scope.column,this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema);e.clearGrade=this.isGradeErased();let t=this.grade.validateGrade(e,this.scope);return this.$q.when(t).then(e=>{this.form[this.id].$setValidity("invalidGrade",e)})}getPerfCodeFromDisplayValue(e){let t=null;if(e){let n=this.scope.gradeNotations?this.scope.gradeNotations():[];if(n.length>0){let r=i.find(n,t=>t.code===e);r&&(t=r.id)}}return t}_save(){var e,t,n,r;let s=this.$q.when(),o=null!==(r=null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.ui.groupAttempt)&&void 0!==r?r:null===(t=this.scope.gradeDetail)||void 0===t?void 0:t.ui.attempt;this.isSaving=!0,this.perfCodeId=this.getPerfCodeFromDisplayValue(this.gradeDisplayItem.displayValue);let a=this.perfCodeId?this.gradeDisplayItem.displayValue:this.grade.parseGrade(this.gradeDisplayItem.displayValue,this.gradeDisplayItem.schema,this.scope),l=this.grade.createGradeSubmission(this.scope.column,a,this.gradeDisplayItem.schema);if(this.perfCodeId&&(l.perfCodeId=this.perfCodeId),this.scope.column&&this.scope.column.externalGrade&&this.scope.gradeDetail){let e=this.scope.gradeDetail.manualGrade?this.scope.gradeDetail.pointsPossible:this.scope.column.possible,t=l.gradeValue;if(e&&e>0&&t&&t.isNumeric){let n=parseFloat(t.grade);t.grade=String(this.isScoreSchema()?n:100*n/e)}this.gradeDisplayItem.schema.scaleType===E.aQo.Score&&(l.pointsPossible=e)}else if((null===(n=this.scope.column)||void 0===n?void 0:n.externalGrade)&&!this.scope.gradeDetail){let e=this.scope.column.possible;this.gradeDisplayItem.schema.scaleType===E.aQo.Score&&(l.pointsPossible=e)}if(this.isGradeErased()&&(l.clearGrade=!0,(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&(this.scope.forGroup?this.scope.forGroup&&!this.scope.gradeDetail.ui.groupAttempt&&(s=this.scope.column.getContentGroupIdToGroupAttempt({expand:"attempts,toolAttemptDetail,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor"}).then(e=>{i.values(e.lookup).forEach(e=>{e[0].groupId===this.scope.forGroup.id&&(this.scope.gradeDetail.ui.groupAttempt=e[0])})})):s=this.$q.when()),this.isRubricAssociated())){this.scope.hasRubricClearConfirmationCallout&&(this.scope.forGroup?l.groupAttemptId=null==o?void 0:o.id:l.attemptId=null==o?void 0:o.id);let e=null==o?void 0:o.rubricEvaluation;e&&(e.cells=[]),l.setGradeToEmpty=!0,l.rubricEvaluation=e}return s.then(()=>{let e=this.scope.override&&this.scope.override()&&!(this.isGradeErased()&&(this.scope.column.isAssignment()||this.scope.column.isDiscussion()||this.isRubricAssociated()&&this.scope.hasRubricClearConfirmationCallout)),t=!!(this.scope.gradeDetail&&this.scope.gradeDetail.isPosted()),n=this.isGradeErased(),i=this.scope.gradeDetail;return this.grade.saveGrade(l,i,e?null:o,{userId:this.scope.forUser&&this.scope.forUser.id,group:this.scope.forGroup}).then(e=>{if(this.isRubricAssociated()&&this.$rootScope.$emit(p.fY,l.gradeValue.grade),this.scope.column.externalGrade&&e.displayGrade&&e.displayGrade.isOverride&&!this.isScoreSchema()&&(e.pointsPossible=100),e instanceof this.AttemptModel)this.scope.gradeDetail.displayGrade=e.displayGrade,n&&(this.scope.gradeDetail.manualStatus=E.WTZ.NoOverride),Object.assign(this.scope.gradeDetail.ui.attempt,e);else if(e instanceof this.GroupAttemptModel)this.gradeDisplayItem.displayGrade=e.displayGrade,this.scope.gradeDetail.displayGrade=e.displayGrade;else if(e instanceof this.GradeModel){let t=this.scope.gradeDetail?this.scope.gradeDetail.permissions:null;this.scope.gradeDetail=e,t&&(this.scope.gradeDetail.permissions=t),this.scope.column.externalGrade&&e.displayGrade&&!e.displayGrade.isOverride&&!this.isScoreSchema()&&(this.scope.gradeDetail=this.grade.gradeDetailToPercentage(this.scope.gradeDetail)),this.scope.column.externalGrade&&(this.gradeDisplayItem.gradeDetail=this.scope.gradeDetail)}else e[0]instanceof this.GradeModel&&(this.scope.gradeDetail.displayGrade=e[0].displayGrade);return(this.scope.column.isAssignment()||this.scope.column.isDiscussion())&&!n&&t&&(e.isPosted&&!e.isPosted()||e.isCompleted&&!e.isCompleted()||e[0]&&e[0].isReadyToPost&&e[0].isReadyToPost())?this._postGrade(e):e})})}_postGrade(e){return this.scope.forGroup?this.scope.column.postReadyGroupAttempts({groupAssociationId:this.scope.gradeDetail.ui.groupAttempt.groupAssociationId}).then(t=>(this.scope.gradeDetail.manualStatus=E.WTZ.IsPosted,e instanceof Array&&e.forEach(e=>{e.manualStatus=E.WTZ.IsPosted}),e)):this.scope.gradeDetail.postReadyGrades().then(t=>(this.scope.gradeDetail.manualStatus=E.WTZ.IsPosted,e.status=E.I$9.Completed,e))}isMultipleShown(){return this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()}isInProgressShown(){return this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()}gradeValueOnChange(){this.$q.when(this._validate()).then(()=>{this.scope.hasGradeAndIsValid=this.form[this.id].$valid&&!!this.gradeDisplayItem.displayValue})}onFocus(){this.canOverrideByGradeNotation()&&this.showGradeNotationDropdown(),this.isFormValid()&&!this.isFormDirty()&&(this.gradeDisplayItem.displayValue=this.gradeDisplayItem.parsedValue)}shouldShowOverrideIndicator(){return!(null==this.scope.enableOverrideIndicator||!this.scope.enableOverrideIndicator||!this.scope.gradeDetail||this.scope.gradeDetail.isExempt||this.shouldShowPastDueZeroIndicator())&&this.grade.isRubricGradeOverridden(this.scope.gradeDetail,this.scope.gradeDetail.ui.attempt,this.scope.column,this.scope.forGroup)&&!this.scope.gradeDetail.isExempt}shouldShowPastDueZeroIndicator(){return this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.scoredByAutomaticZero&&!this.scope.gradeDetail.isExempt}shouldShowExempt(){return this.scope.gradeDetail&&this.scope.gradeDetail.isExempt}isRubricAssociated(){return this.scope.column.hasRubricAssociation()}isRubricEvalMode(){return!!this.scope.enableRubricEvalAction&&this.scope.enableRubricEvalAction()&&this.isRubricAssociated()}shouldShowInput(){return!this.isRubricEvalMode()||this.isRubricEvalMode()&&this.scope.enableEditableInputMode}isScorable(){var e;return null!==(e=this.scope.column.scorable)&&void 0!==e&&e}updateGradeColor(){this.wrapperDiv.removeClass(this.inputColorClass),!this.gradeDisplayItem.displayValue||this.scope.isGroupGradeMultiple&&this.scope.isGroupGradeMultiple()||this.scope.isGroupGradeInProgress&&this.scope.isGroupGradeInProgress()||(this.inputColorClass=this.gradeDisplayItem.getGradeColor(),this.wrapperDiv.addClass(this.inputColorClass))}isGradeErased(){return this.isFormDirty()&&this.gradeDisplayItem.wasValueErased}setFocusOnNextTabbableElement(){this.timeout(()=>{l.Bv(null,this.inputElement)},this.scope,0,!1)}isReservedWord(e){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.multiple"}).toLocaleLowerCase(),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.in_progress"}).toLocaleLowerCase(),i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.services.grade.noValue"}).toLocaleLowerCase(),r=e.toLocaleLowerCase();return r===t||r===n||r===i}getGradeInputAriaLabelKey(){if(!this.scope.forUser&&!this.scope.forGroup)return;let e="components.directives.grade.grade-input.aria.",t=this.shouldShowOverrideIndicator()?"overrideScoreInput":"scoreInput";return this.shouldShowPastDueZeroIndicator()&&(t="pastDueZeroScoreInput"),e+=t,this.scope.forGroup&&(e+="Group"),e+=this.gradeDisplayItem.displayValue?"Graded":"Empty"}getAriaLabel(){var e;return this.bbLocalize.translateSync({key:this.getGradeInputAriaLabelKey()||"",locale:this.bbLocalize.getLocale(this.scope),noWrap:!0,params:{user:this.scope.forUser,group_name:this.scope.forGroup&&this.scope.forGroup.title,grade:this.gradeDisplayItem.parsedValue,total:(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.pointsPossible)||(this.scope.column.isCalculated()?100:this.scope.column.possible)}})}canOverrideByGradeNotation(){let e=this.scope.gradeNotations?this.scope.gradeNotations():[];return this.scope.canOverrideByGradeNotation&&this.scope.canOverrideByGradeNotation()&&(e&&e.length>0||this.scope.gradeDetail&&this.scope.gradeDetail.displayGrade&&this.scope.gradeDetail.displayGrade.isOverride)}getAriaDescribeById(){return`invalidGradeAriaDescribeById_${this.scope.forUser.id}`}clickGradeNotation(e,t){t.stopPropagation(),this.gradeDisplayItem.displayValue=e.code,this.perfCodeId=e.id,this.afterClickDropdownListItem()}undoOverride(){this.gradeDisplayItem.displayValue="",this.perfCodeId=null,this.afterClickDropdownListItem()}afterClickDropdownListItem(){this.form[this.id].$setDirty(!0),this.form[this.id].$setValidity("invalidGrade",!0),this.timeout(()=>{P("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.$q.when(this.validateAndSave()).finally(()=>{this.setFocusOnNextTabbableElement()})}isGradesComplete(){return!1}onBlur(e){this.isWrapperDivClickHandled=!1;let t=[];e&&e.relatedTarget&&e.relatedTarget.classList&&(t=e.relatedTarget.classList),this.inputElementBluredByTab||i.includes(t,"performance-code-option")||(this.timeout(()=>{this.inputElementBluredByTab=!1,P("#performanceCodes-"+this.id).remove()},this.scope,0,!1),this.shouldShowModal()?this.openOverrideDialog():this.validateAndSave())}subscribeToRedux(){let e=this.$ngRedux.connect(null,e=>(0,T.DE)({reloadGradeDetail:k.Nwg.gradebookGrade.loadBulkView},e))(this);this.scope.$on("$destroy",e)}isStatusComplete(){return!!this.gradeDisplayItem.displayValue&&!this.shouldShowPastDueZeroIndicator()}constructor(e,t,n,i,r,s,o,a,l,c,u,p,m,g,f,b,v,y){this.$rootScope=e,this.$compile=t,this.$q=n,this.$injector=i,this.$ngRedux=r,this.scope=s,this.element=o,this.attrs=a,this.form=l,this.bbLocalize=c,this.grade=u,this.AttemptModel=p,this.GradeModel=m,this.GroupAttemptModel=g,this.CourseModel=f,this.timeout=b,this.ultraState=v,this.$modal=y,this.alertScreenReaderNewGrade=!1,this.gradeDisplayItem=this.$injector.instantiate(d.G,{gradeDetail:this.scope.gradeDetail,scope:this.scope}),this.id=this.attrs.id,this.isSaving=!1,this.wrapperDiv=this.element.find("."+R.WRAPPER_CLASS),this.inputElement=this.wrapperDiv.find("input"),this.isWrapperDivClickHandled=!1,this.gradeNotationsWrapperSelector=this.scope.gradeNotationsWrapperSelector||"body",this.inputElementBluredByTab=!1,this.isProcessingFocusEvent=!1,this.onDismissCallback=()=>{this.gradeDialog.isVisible=!1,this.form[this.id].$setPristine(),this.inputElement.blur(),this.inputElement.focus(),this.inputElement.select()},this.onSuccessCallback=()=>{this.gradeDialog.isVisible=!1,this.validateAndSave(!0).finally(()=>{this.setFocusOnNextTabbableElement()})},this.closeModal=e=>{e?this.modalInstance.close():this.modalInstance.dismiss()},this.onCompleteIncompleteBlur=(e,t,n)=>{this.scope.$applyAsync(()=>{this.gradeDisplayItem.displayValue=t,this.form[this.id].$dirty=n,this.validateAndSave()})},this.openRubricEvaluation=()=>{var e,t;let n;!this.isRubricAssociated()||this.scope.disableRubricEvalClick&&this.scope.disableRubricEvalClick()||(n=(null===(e=this.scope.gradeDetail)||void 0===e?void 0:e.groupAssociationId)?(null===(t=this.scope.forUser)||void 0===t?void 0:t.id)||null:this.scope.gradeDetail.user&&(this.scope.gradeDetail.user.$pk||this.scope.gradeDetail.user.id)||null,this.timeout(()=>{this.ultraState.goPeekState("rubric-evaluation",{userId:n,groupId:this.scope.forGroup?this.scope.forGroup.id:null,columnId:this.scope.column.id})},this.scope,0,!1))},this.overrideDialogScope=s.$new(),this.subscribeToRedux(),this.wrapperDiv.on("click",()=>{!this.isRubricEvalMode()&&(this.isWrapperDivClickHandled=!0,this.scope.onClick&&!this.isReadOnly()&&this.scope.onClick(),this.wrapperDiv.addClass(R.WRAPPER_FOCUS_CLASS),this.inputElement.is(":focus")||(this.inputElement.focus(),this.inputElement.select()))}),this.inputElement.on("click",e=>{P("#performanceCodes-"+this.id).hasClass("f-open-dropdown")&&(e.preventDefault(),e.stopPropagation())}),this.inputElement.on("focus",e=>{if(!this.isProcessingFocusEvent){this.isProcessingFocusEvent=!0;try{e.preventDefault(),e.stopPropagation(),this.wrapperDiv.addClass(R.WRAPPER_FOCUS_CLASS),this.inputElement.select(),this.scope.$emit("grade-input-in-focus",this.id);let t=P("#performanceCodes-"+this.id);this.scope.offsetTop&&this.scope.offsetTop()||t.addClass("show"),this.isWrapperDivClickHandled||this.timeout(()=>{t&&!t.hasClass("f-open-dropdown")&&(this.inputElement.trigger("click.fndtn.dropdown"),this.scope.offsetTop&&this.repositionGradeNotationDropdown(t))},this.scope,0,!1)}finally{this.isProcessingFocusEvent=!1}}}),this.inputElement.on("keydown",e=>{let t=P("#performanceCodes-"+this.id);if(t&&t.hasClass("f-open-dropdown")&&e.keyCode===h.Mf&&!e.shiftKey){this.inputElementBluredByTab=!0;let n=t.find(":tabbable");n&&(n.first().focus(),e.preventDefault(),e.stopPropagation())}else e.keyCode!==h.K5&&e.keyCode!==h.dS&&(e.keyCode!==h.Mf||e.shiftKey)||(e.preventDefault(),this.inputElement.is(":focus")&&this.inputElement.trigger("click.fndtn.dropdown"),this.shouldShowModal()?this.openOverrideDialog():this.$q.when(this.validateAndSave()).finally(()=>{this.gradeDialog.isVisible||this.timeout(this.setFocusOnNextTabbableElement.bind(this),this.scope,0)}))}),this.element.foundation(),this.scope.$watch("::column",e=>{e&&(this.courseId=e.courseId,this.gradeDisplayItem.init(e).then(()=>{this.attrs.gradeDetail&&this.scope.$watchGroup(["gradeDetail.id","gradeDetail.displayGrade","gradeDetail.ui.attempt.displayGrade","gradeDetail.isExempt","isGroupGradeInProgress()","isGroupGradeMultiple()","column.gradingSchemaId","column.possible"],e=>{this.isSaving||this.refreshInputBox()})}),e.externalGrade?this.errorMessageKey="components.directives.grade.grade-input.errorMessage.overallGrade":this.errorMessageKey="components.directives.grade.grade-input.errorMessage.default")}),this.buildGradeDialog()}}R.WRAPPER_CLASS="wrapping-input-style",R.WRAPPER_FOCUS_CLASS="wrapping-input-style-focus",R=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([D(0,(0,C.tB)("$rootScope")),D(1,(0,C.tB)("$compile")),D(2,(0,C.tB)("$q")),D(3,(0,C.tB)("$injector")),D(4,(0,C.tB)("$ngRedux")),D(5,(0,C.tB)("scope")),D(6,(0,C.tB)("element")),D(7,(0,C.tB)("attrs")),D(8,(0,C.tB)("form")),D(9,(0,C.tB)(s.serviceName)),D(10,(0,C.tB)(u.HV)),D(11,(0,C.tB)(g.U_.serviceName)),D(12,(0,C.tB)(g.zn.H)),D(13,(0,C.tB)(g.uy.HV)),D(14,(0,C.tB)(g.N7.H)),D(15,(0,C.tB)(f.H)),D(16,(0,C.tB)(v.HV)),D(17,(0,C.tB)(o.HV))],R);class L{constructor(e,t){this.$injector=e,this.bbLocalize=t,this.restrict="E",this.template=S,this.require="^form",this.scope={column:"=",gradeDetail:"=",onClick:"&",onBlur:"&",enableRubricEvalAction:"&?",individualAttemptIndicator:"=?",editGradeWhenExemptWithParticipation:"=?",hasRubricClearConfirmationCallout:"<?",disableRubricEvalClick:"&?",enableEditableInputMode:"&?",forUser:"=?",forGroup:"=?",hasGradeAndIsValid:"=?",isGroupGradeMultiple:"&?",isGroupGradeInProgress:"&?",notAllowEmptyString:"&?",override:"&?",readOnly:"&?",enableOverrideIndicator:"=?",canOverrideByGradeNotation:"&?",gradeNotations:"&?",gradeNotationsWrapperSelector:"@?",offsetTop:"&?"},this.link=(e,t,n,i)=>{if(!n.id&&!n.column)throw Error("Id and Column are required.");if(!n.gradeDetail)throw Error("A grade object must be provided");if(n.gradeDetail&&!n.forUser&&!n.forGroup)throw Error("forUser or forGroup is required.");e.gradeInput=this.$injector.instantiate(R,{scope:e,element:t,attrs:n,form:i})}}}L.$inject=["$injector"],r.module(x,["puElasticInput",a.e,m.e1,b.e1,v.e1,A.e,y.e1]).directive("bbGradeInput",["$injector",e=>e.instantiate(L)])},740646:function(e,t,n){"use strict";n.d(t,{H1:function(){return S},VE:function(){return C},e1:function(){return y}});var i=n(464027),r=n(202784),s=n(236351),o=n(984654),a=n(847969),l=n(88818),c=n(563060);let d="ultra.components.services.gradebookListViewTabs",u=e=>{let{onChange:t,value:n,tabs:i,localize:s,analyticsId:o}=e,d="components.directives.grade.course-grades-grader.actions",u={analyticsId:"course.downloadGradeSettings.link",label:s.translate(`${d}.download`)},p={analyticsId:"course.uploadGradeSettings.link",label:s.translate(`${d}.upload`)},m={analyticsId:"course.attemptReceiptSearch.link",label:s.translate(`${d}.attemptReceiptSearch`)},h={analyticsId:"course.gradebookSettings.link",label:s.translate(`${d}.openGradebookSettings`)},g={analyticsIdPrefix:"course.gradebookDropdownMenu",ariaLabel:s.translate(`${d}.moreOptionsGradebook`),menuOptions:[u,p,m,h],optionClicked:e=>{e.analyticsId===u.analyticsId?c.Nd.goPeekState(c.C7.GradeDownload()):e.analyticsId===p.analyticsId?c.Nd.goPeekState(c.C7.GradeUpload()):e.analyticsId===h.analyticsId?c.Nd.goPeekState(c.C7.GradeSettings()):c.Nd.goPeekState(c.C7.AttemptReceiptSearch())},isRtl:s.isRtl()};return r.createElement("div",{className:"gradebook-list-view-tabs"},r.createElement("div",{className:"more-options"},r.createElement(l.rUo,{...g,className:"right-menu"})),r.createElement(a.AnalyticsTabs,{onChange:t,value:n,analyticsId:`${o}`},i&&i.map(e=>{let t={analyticsId:`${o}.${e.id}`,className:`js-gradebook-tab-${e.id}`,key:e.id,value:e.id,label:s.translate(e.displayKey)};return r.createElement(a.AnalyticsTab,t)})))};class p extends r.Component{render(){return r.createElement(u,this.props)}}let m={Class:(0,s.X)(p),attributes:["analyticsId"],bindingNames:["value","onChange","tabs"],renderLocalized:!0,withProvider:!0};i.module(d,[]).component("bbUiGradebookListViewTabs",(0,o.G5)(m));var h=n(302032),g=n(776517),f=n(233090);function b(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function v(e,t){return function(n,i){t(n,i,e)}}let y="ultra.components.directives.gradebookListViewTabs",S={id:"assignments",ariaLabel:"components.directives.grade.course-grades-grader.views.gradableItemsListView",displayKey:"components.directives.grade.course-grades-grader.views.gradableItemsListViewTabLabel"},C={id:"students",ariaLabel:"components.directives.grade.course-grades-grader.views.studentListView",displayKey:"components.directives.grade.course-grades-grader.views.studentListViewTabLabel"},E=[S,C],I=`<bb-ui-gradebook-list-view-tabs
                            analytics-id="course.gradebook.list.view.tabs"
                            value="gradebookListViewTabs.scope.selectedTab"
                            on-change="gradebookListViewTabs.onTabChange"
                            tabs="gradebookListViewTabs.tabs">
                      </bb-ui-gradebook-list-view-tabs>`;class w{constructor(e,t){this.scope=e,this.mobileEventHandlerService=t,this.onTabChange=(e,t)=>{let n=this.tabs.find(e=>e.id===t),i=t===C.id?g.Cs.StudentsTabOpened:g.Cs.GradableItemTabOpened;this.mobileEventHandlerService.registerHandler(i),this.scope.$on("$destroy",()=>{this.mobileEventHandlerService.clearHandler(i)}),this.scope.onTabChanged&&this.scope.onTabChanged(n.id),this.scope.$apply()},this.tabs=E}}w=b([v(0,(0,h.tB)("scope")),v(1,(0,h.tB)(f.HV))],w);class A{constructor(e){this.$injector=e,this.restrict="E",this.template=I,this.scope={onTabChanged:"<?",selectedTab:"="},this.link=e=>{e.gradebookListViewTabs=this.$injector.instantiate(w,{scope:e})}}}A=b([v(0,(0,h.tB)("$injector"))],A),angular.module(y,[d,f.e1]).directive("bbGradebookListViewTabs",["$injector",e=>e.instantiate(A)])},35065:function(e,t,n){"use strict";n.d(t,{e1:function(){return U}}),n(356328),n(751410),n(473611),n(192494),n(563699),n(193874),n(384906);var i=n(464027),r=n(728042),s=n(104627),o=n(842891),a=n(196409),l=n(323239),c=n(52306),d=n(716865),u=n(567361),p=n(379640),m=n(979026),h=n(189165),g=n(890532),f=n(73205),b=n(436043),v=n(83991),y=n(984654),S=n(676954);let C="ultra.components.services.sendRemindersDialog",E={Class:v.Go,bindingNames:["courseId","columnId","numStudentsNotSubmitted","showDialog","isGroup","dialogCallback"],renderLocalized:!0,withProvider:!0};i.module(C,[S.moduleName]).component("sendRemindersDialog",(0,y.G5)(E));var I=n(12838),w=n(130279),A=n(411832),k=n(45680),T=n(649955),P=n(555840),D=n(401138),x=n(272927),R=n(610624),L=n(920092),N=n(478459),$=n(808361),O=n(398321),G=n(743807),_=n(986709),M=n(563060),B=n(83470),F=n(625506);let U="ultra.directives.grade.graderColumn";class V{updateNumMissingStudents(){this.numMissingStudents=this.column.getNumMissingIfLate()}openAddItemPanel(e){this.whichAddItemPanelOpen=e,F(e).addClass("is-active").find(".element-list-add-menu").slideToggle(300)}showGradeStatusForNonCalculated(){return!this.column.isCalculated()&&this.isScorable()}isScorable(){var e;return null!==(e=this.column.scorable)&&void 0!==e&&e}closeAddItemPanel(e){this.whichAddItemPanelOpen===e&&(this.whichAddItemPanelOpen=null),F(e).removeClass("is-active").find(".element-list-add-menu").slideUp(300)}toggleAddItemPanel(e){this.whichAddItemPanelOpen===e?this.closeAddItemPanel(e):this.openAddItemPanel(e)}registerPostGradesWatchers(){this.scope.$watchGroup([()=>this.column.summary.hasGradesToPost(),()=>this.course.isComplete()],()=>{this.canPostGrades=this.grade.canPostGrades(this.course,this.column)})}postGrades(){this.column.postReadyGrades().then(e=>{this.toast.show({messageKey:"components.directives.grade.grader-column.actions.gradesPosted",icon:"icon-check",toastStatus:"success"}),this.column.summary.$fetch().$asPromise().then(e=>{this.scope.$emit(T.JH,this.column),this.scope.$root.$broadcast("bb-update-summary")})})}deleteColumn(){return this.column.forceDelete()}deleteContent(){this.column.courseId&&this.column.contentId&&this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(e=>{this.ContentService.deleteContent(e).then(()=>{this.deleteContentCallback()})})}deleteContentCallback(){this.scope.$root.$broadcast("bb-delete-column",this.column)}viewEditColumn(){this.accessibility.setFocusOverrideOnPanel("#"+this.overflowMenuId,".grades-list");let e=this.column.scoreProviderHandle;(!e||this.scoreProviderHelper.supportsOverall(e))&&(P.courseContent.ContentHandler.PartnerCloud.isEqualTo(null==e?void 0:e.toString())||P.courseContent.ContentHandler.LtiLink.isEqualTo(null==e?void 0:e.toString())?this.ltiService.ltiEditColumn(this.column):this.openViewEditState())}openViewEditState(){let{contentId:e,courseId:t,externalGrade:n,id:i,linkId:r,scoreProviderHandle:s}=this.column,o=!this.column.isAssignment()&&!this.column.isTest();if(n)this.ultraState.goPeekState(M.RK.GRADE_ITEM_OVERALL_GRADE,{columnId:i,gradeitemView:"details",isExternalGrade:!0});else if(this.column.isCalculated()){var a;(null===(a=this.column.calculatedFormula)||void 0===a?void 0:a.isTotalCalculation)?this.ultraState.goPeekState(M.RK.GRADE_ITEM_TOTAL_CALCULATION,{columnId:i,gradeitemView:"details",isExternalGrade:!1}):this.ultraState.goPeekState("gradebook-item.calculation",{columnId:i,gradeitemView:"details"})}else s&&this.column.seemsAttemptBased()&&(this.hasViewAssessmentEntitlement||o)?this.scoreProviderHelper.editStateRef(s,{courseId:t,contentId:e,linkRefId:r},L.tU.GoToState):s&&this.column.isAttendance()?this.scoreProviderHelper.editStateRef(s,{courseId:t,contentId:e},L.tU.GoToState):this.ultraState.goPeekState("grade-item.edit",{id:this.column.id})}_openColumn(e){let t,n;let{contentId:r,courseId:s,id:o,linkId:a,scoreProviderHandle:l}=this.column;if(this.course.isUltra()){let d=this.hasViewAssessmentEntitlement&&(this.column.isTest()||this.column.isAssignment());if(this.isLTILink()){this.launchLti();return}if(this.column.isAttendance())({state:t,args:n}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(l,{contentId:r,courseId:s,columnId:o,linkRefId:a},L.tU.GenerateStateParams)));else if(this.column.externalGrade)t=M.RK.GRADE_ITEM_OVERALL_GRADE,n={columnId:o,isExternalGrade:!0};else if(this.column.isCalculated()){var c;(null===(c=this.column.calculatedFormula)||void 0===c?void 0:c.isTotalCalculation)?(t=M.RK.GRADE_ITEM_TOTAL_CALCULATION,n={columnId:o,courseId:s,isExternalGrade:!1}):(t="gradebook-item.calculation",n={columnId:o,courseId:s})}else if(l&&!this.column.isOffline()&&(this.canViewGrades||this.canViewAttempts)&&this.hasItemExceptionView&&this.hasAssessmentExceptionView){let l={};"status"===e&&(l={gradingStatus:this.getNonOfflineItemsGradingStatusQueryParam()}),{state:t,args:n}=i.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(this.column.scoreProviderHandle,{contentId:r,courseId:s,columnId:o,linkRefId:a,...l},L.tU.GenerateStateParams))}else l&&(this.column.isDiscussion()||this.column.isScorm()||this.column.isScormSCO()||d)?{state:t,args:n}=i.fromJson(this.scoreProviderHelper.editStateRef(this.column.scoreProviderHandle,{courseId:s,contentId:r,linkRefId:a},L.tU.GenerateStateParams)):this.canViewGrades?(t="gradebook-item.offline",n={columnId:o,courseId:s,gradeitemView:"students"}):(t="grade-item.edit",n={id:o})}else t="course.outline",n={courseId:s,legacyUrl:this.getLegacyUrl()};this.ultraState.goPeekState(t,n)}handleColumnClick(e){this.itemLinkIsClickable&&!this.isRestrictedGroupContent&&(this.isCourseView?this._openColumn(e):this.course.refreshConvertToUltraStatus().then(()=>{this.courseConversionService.isConversionComplete(this.course.ui.convertToUltraTaskStatus)?this._openColumn(e):this.showConversionTooltip()}))}getNonGradableItemStatus(){return this.column.summary.getStatus()?"components.directives.grade.grader-column.statuses.nonGradableItem":""}getNonOfflineItemsGradingStatusQueryParam(){let e=this.column.summary.getStatus();if(this.column.isCollectExternalSubmissions()&&(e===I.MN.NeedsPosting||e===I.MN.AllGraded||e===I.MN.NothingToGrade)&&this.getNumberEligibleToBeGradedExternalSubmissions()>0)return _.qr.NeedsGrading;switch(e){case I.MN.NeedsGrading:return _.qr.NeedsGrading;case I.MN.AllPosted:return this.column.isAnonymousGrading()?_.qr.AllStatuses:_.qr.Completed;case I.MN.NothingToGrade:return this.column.isAnonymousGrading()?_.qr.AllStatuses:_.qr.NothingToGrade;default:return _.qr.AllStatuses}}showConversionTooltip(){this.showConversionMessage=!0}closeConversionTooltip(){this.showConversionMessage=!1}getAlertType(){return I.MQ.ConversionInProgress}launchLti(){this.ltiService.ltiLaunch({courseId:this.column.courseId,contentId:this.column.contentId,linkType:I.GQ.parse(this.column.scoreProviderHandle.toString()),linkRefId:this.column.linkId})}showAlertIcon(){return this.column.getNumMissingIfLate()>0}getLegacyUrl(){return"/webapps/gradebook/do/instructor/enterGradeCenter?course_id="+this.column.courseId}isLTILink(){return this.ltiService.isLTILink(this.column)}showMarkAttendance(){return this.column.isAttendance()&&this.hasViewAttendanceEntitlement}showDelete(){return this.column.isAttendance()?this.canModify&&this.showAttendanceDeleteOption:this.canModify}openAttendance(){this.ultraState.goPeekState("attendance")}showQuestionAnalysis(){return this.column.isQuestionAnalysisAvailable()&&this.canViewGrades}showStatistics(){return this.canViewGrades&&!this.column.isAnonymousGrading()&&!this.column.isCalculated()}showDownloadTestResults(){return!this.column.isAnonymousGrading()&&this.canViewGrades&&(this.column.isTest()||this.column.isSurvey())&&this.column.summary.numSubmissionsTotal>0}showViewEdit(){return!!(this.column.isOffline()||null==this.column.scoreProviderHandle||this.scoreProviderHelper.supportsEdit(this.column.scoreProviderHandle))&&(!!(this.column.isOffline()||this.column.isCalculated())||this.hasDesignerViewEntitlement||this.canModify)}hasContentId(){return!!this.column.contentId}getConfirmationKeyAndShowType(){let e;return this.ultraState.includes("**.outline.**")?e=O.m.CourseOutline:this.ultraState.includes("**.engagement.**")&&(e=O.m.Discussions),this.CourseModel.$new(this.column.courseId).contents.$new(this.column.contentId).$fetch().$asPromise().then(t=>this.ContentService.generateDeleteConfirmationKey(t,e).then(e=>({confirmationKey:e.ui.deleteConfirmationKey,showType:e.ui.modalShowType})))}getOverflowMenuItems(){return[{icon:"messages",labelKey:"course.grades.gradebook-item.anonymousGrading.sendReminder.buttonLabel",show:()=>this.canShowSendReminderOption(),onClick:()=>this.showSendReminderDialog()},{icon:this.canModify?"draw":"visible",labelKey:this.canModify?"global.edit":"global.view",show:()=>this.showViewEdit(),onClick:()=>this.viewEditColumn()},{icon:"attendance",labelKey:"components.directives.grade.grader-column.attendance.markAttendance",show:()=>this.showMarkAttendance(),onClick:()=>this.openAttendance()},{icon:"question-analysis",labelKey:"components.directives.grade.grader-column.questionAnalysisOverflowMenuLabel",show:()=>this.showQuestionAnalysis(),onClick:()=>{this.ultraState.goPeekState("question-analysis.report",{qaContentId:this.column.contentId})}},{icon:"download",labelKey:"components.directives.grade.grader-column.downloadResults.overflowMenuLabel",show:()=>this.showDownloadTestResults(),onClick:()=>{this.ultraState.goPeekState(M.Z5.Grade.DOWNLOAD_TEST_RESULTS,{columnId:this.column.id})}},{icon:"report",labelKey:"components.directives.grade.grader-column.statisticsMenuLabel",show:()=>this.showStatistics(),onClick:()=>{this.ultraState.goPeekState(M.Z5.Grade.GRADABLE_ITEM_STATISTICS,{columnId:this.column.id})}},{icon:"trash",labelKey:"global.delete",onClick:()=>{this.hasContentId()?this.deleteContent():this.deleteColumn()},show:()=>this.showDelete(),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>{let e;return this.hasContentId()?this.getConfirmationKeyAndShowType().then(t=>(e=t.confirmationKey.replace(/^resource\//,""),this.$q.when(D.Hz(e)))):(e=this.column&&this.column.ui&&this.column.ui.deleteConfirmationHandle?this.column.ui.deleteConfirmationHandle.replace(/^resource\//,""):"generic-content",this.$q.when(D.Hz(e)))}}}]}get itemLinkIsClickable(){return this.isActionable&&(!this.column.isAttendance()||this.hasViewAttendanceEntitlement)&&(!this.isLTILink()||this.hasDesignerViewEntitlement)&&!this.isRestrictedGroupContent}get isActionable(){return!this.column.isAttendance()||this.scope.attendanceIsAvailable()}get showOverflowMenu(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&(this.showViewEdit()||this.showDelete()||this.showMarkAttendance()||this.showQuestionAnalysis()||this.showDownloadTestResults()||this.canShowSendReminderOption())}get showDragControls(){return this.isCourseView&&!this.course.isComplete()&&this.isActionable&&this.canModify}checkIfAttendanceIsAvailable(){return!!(this.scope.attendanceIsAvailable&&this.scope.attendanceIsAvailable())}checkIfAttendanceRecordsExist(){this.showAttendanceDeleteOption=!1,this.column.isAttendance()&&this.checkIfAttendanceIsAvailable()&&this.CourseModel.$new(this.column.courseId).attendanceRecordsExist().then(e=>{this.showAttendanceDeleteOption=!e})}showSendReminderDialog(){this.showReminderModal=!0}getStudentsNoSubmissionCount(){return(0,B.z)(this.column)}canShowSendReminderOption(){return!this.showReminderModal&&(0,B.y)(this.column)}getNumberEligibleToBeGradedExternalSubmissions(){return i.isUndefined(this.column.summary.numGroupsNeedsGrading)?this.column.summary.numStudentsEligibleToBeGradedExternalSubmission:this.column.summary.numGroupsEligibleToBeGradedExternalSubmission}getNumberOfSubmissionsNeedsGrading(){return null==this.column.summary.numSubmissionsNeedsGrading?this.column.summary.numSubmissionsNeedsReconciling:this.column.summary.numSubmissionsNeedsGrading}get isFormative(){return this.column.isFormative}getToolTipTemplate(){return'<ul class="complex-tooltip-list conditional-release-tooltip"> <li bb-translate>components.directives.grade.grader-column.restrictedInfo</li> </ul>'}constructor(e,t,n,i,s,o,a,l,c,d,u,p,m,h){this.scope=e,this.$q=t,this.ContentService=n,this.courseConversionService=i,this.CourseModel=s,this.entitlementService=o,this.grade=a,this.gradebookPermissionService=l,this.bbLocalize=c,this.ultraState=d,this.accessibility=u,this.scoreProviderHelper=p,this.ltiService=m,this.toast=h,this.hasItemExceptionView=!1,this.hasAssessmentExceptionView=!1,this.hasDesignerViewEntitlement=!1,this.hasViewAssessmentEntitlement=!1,this.hasViewAttendanceEntitlement=!1,this.isRestrictedGroupContent=!1,this.numMissingStudents=0,this.showAttendanceDeleteOption=!1,this.showConversionMessage=!1,this.attendanceAriaLabel=void 0,this.showReminderModal=!1,this.resetShowModal=()=>{this.scope.$applyAsync(()=>{this.showReminderModal=!1})},this.canModify=this.gradebookPermissionService.canModify(e.course().id),this.canPostGrades=this.gradebookPermissionService.canPostGrades(e.course().id),this.canViewAttempts=this.gradebookPermissionService.canViewAttempts(e.course().id),this.canViewGrades=this.gradebookPermissionService.canViewGrades(e.course().id),this.column=e.column,this.course=e.course(),this.isCourseView=e.isCourseView,this.contextArea="grades",this.index=e.$parent.$index+1,this.column.isGroupContent()&&(this.isRestrictedGroupContent=!this.entitlementService.isEntitled(I.pQ.ViewGroups,this.course.id)),this.scope.column.externalGrade?this.scope.column.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.actions.overall.label"}):this.scope.column.isAttendance()&&(this.scope.column.columnName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.attendance.label"})),this.entitlementService.hasAnyCourseEntitlement([I.s7.ViewAssessment,I.s7.ModifyAssessment],this.course.id).then(e=>{this.hasViewAssessmentEntitlement=e}),this.entitlementService.hasCourseEntitlement(I.s7.ViewAttendance,this.course.id).then(e=>{this.hasViewAttendanceEntitlement=e}),this.entitlementService.hasCourseEntitlement(I.eo.ViewAsDesigner,this.course.id).then(e=>{this.hasDesignerViewEntitlement=e}),this.entitlementService.hasCourseEntitlement(v.SE.ViewException,this.course.id).then(e=>{this.hasItemExceptionView=e}),this.entitlementService.hasCourseEntitlement(I.iL.ViewException,this.course.id).then(e=>{this.hasAssessmentExceptionView=e}),this.column.$resolve().$then(e=>{this.grade.setDeleteConfirmationHandle(this.column),this.overflowMenuId="grader-column-open-button-"+R.d(),this.checkIfAttendanceRecordsExist()});let g=e.$watch("column.summary.$resolved",()=>{this.column.summary&&this.column.summary.$resolved&&(this.updateNumMissingStudents(),g(),this.isRestrictedGroupContent&&(this.column.summary.restricted=!0,this.column.restricted=!0))});r.Z.OnRootScope(e,"bb-grade-input-save",(e,t,n,i)=>{this.column.id===i&&this.column.summary.$fetch()}),r.Z.OnRootScope(e,"bb-update-category-icon",(e,t)=>{this.column.id===t.id&&(this.scope.categoryMap&&t.gradebookCategoryId&&(this.column.gradebookCategory=this.scope.categoryMap[t.gradebookCategoryId],this.column.categoryTitle=this.column.gradebookCategory&&this.column.gradebookCategory.title),(null===t.dueDate||t.dueDate&&t.dueDate instanceof Date)&&(this.column.dueDate=t.dueDate),this.column.visible=t.visible,this.updateNumMissingStudents())}),"Attendance"===this.column.effectiveColumnName&&(this.attendanceAriaLabel=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.grader-column.attendance.course-attendance",params:{courseName:this.course.name},noWrap:!0,noEscape:!0})),this.scope.column.isAttendance()&&r.Z.OnRootScope(e,"$stateChangeSuccess",(e,t,n,i)=>{i.name.indexOf("attendance")>=0&&this.checkIfAttendanceRecordsExist()}),e.$watch("column",e=>{this.column=e}),this.registerPostGradesWatchers()}}V.$inject=["scope","$q",u.HV,c.HV,P.N7.H,A.HV,T.HV,k.HV,S.serviceName,$.HV,o.HV,L.HV,a.HV,N.HV];class H{constructor(e){this.$injector=e,this.restrict="E",this.template=G,this.scope={assessment:"<?",column:"=",course:"&",isCourseView:"=",categoryMap:"=?",attendanceColumnExists:"&?",attendanceIsAvailable:"&"},this.link=(e,t,n)=>{e.graderColumn=this.$injector.instantiate(V,{scope:e})}}}H.$inject=["$injector"],i.module(U,[l.e1,u.e1,s.i,d.e1,c.e1,p.e1,f.e1,m.e1,w.e1,S.moduleName,L.e1,$.e1,x.e1,a.e1,D.e1,N.e1,b.e1,C,h.e,g.e1]).directive("bbGraderColumn",["$injector",S.serviceName,(e,t)=>(t.loadBundle("components/directives/grade/grader-column"),e.instantiate(H))])},569722:function(e,t,n){"use strict";n.d(t,{e1:function(){return c}}),n(356328);var i=n(464027),r=n(676954),s=n(610624),o=n(786845),a=n(71486),l=n(625506);let c="ultra.components.directives.grade.inlineValidation";class d{tooltipExists(){return 0!==l(`#${this.scope.tooltipId}`).length}updateErrorMessage(){this.scope.errorMessage?this.scope.errorMessageRefined=this.scope.errorMessage:this.bbLocalize.loadBundle("components/directives/grade/inline-validation").then(()=>{this.scope.errorMessageRefined=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.grade.inline-validation.default"})})}checkErrors(){this.scope.showError()?this.showErrorTip():this.hideErrorTip()}setupEventHandlers(){this.scope.focusableElement.on("focus",()=>{this.checkErrors()}).on("blur",()=>{this.hideErrorTip()}),this.scope.$on("bb-inline-validation-check",()=>{this.checkErrors()})}showErrorTip(){if(this.scope.focusableElement[0]===document.activeElement){this.tooltipExists()||l("body").append(this.$compile(`
          <div id="${this.scope.tooltipId}"
            class="tooltip inline-validation f-dropdown content inline-validation-tooltip">
            <span class="validation-message" ng-bind="errorMessageRefined" aria-role="text"></span>
            <span class="nub"></span>
          </div>
        `)(this.scope));let e=this.element.children().first(),t=l(`#${this.scope.tooltipId}`);window.Foundation.libs.tooltip.reposition(e,t,e.attr("class")),t.show(),this.scope.$root.$broadcast(o.i_,this.scope.errorMessageRefined)}}hideErrorTip(){l(`#${this.scope.tooltipId}`).hide()}constructor(e,t,n,i,r){this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.bbLocalize=r,this.scope.$on("$destroy",()=>{this.element.off(),this.element=null,l(`#${this.scope.tooltipId}`).remove()});let o=s.d();e.tooltipId=`inline-validation-tooltip-${o}`,e.alertTextId=`inline-validation-alert-text-${o}`,this.updateErrorMessage(),this.scope.focusableElement=this.element.find(":tabbable, input:enabled"),this.setupEventHandlers(),e.$watch(()=>this.scope.focusableElement.val(),e=>{null!=e&&this.checkErrors()}),e.$watch(()=>this.scope.showError(),e=>{this.checkErrors()}),e.$watch("errorMessage",e=>this.updateErrorMessage())}}d.$inject=["scope","element","attrs","$compile",r.serviceName];class u{constructor(e){this.$injector=e,this.restrict="E",this.transclude=!0,this.template=a,this.scope={showError:"&",errorMessage:"@"},this.link=(e,t,n,i)=>{e.inlineValidation=this.$injector.instantiate(d,{scope:e,element:t,attrs:n})}}}u.$inject=["$injector"],i.module(c,[r.moduleName]).directive("bbInlineValidation",["$injector",e=>e.instantiate(u)])},748303:function(e,t,n){"use strict";n.d(t,{OI:function(){return d},e1:function(){return l},wW:function(){return c}});var i=n(464027),r=n(676954),s=n(711976),o=n(753811),a=n(138138);let l="ultraUi.components.directives.grade.pastDueZero",c="bb-past-due-zero-confirmation",d="bb-past-due-zero-settings",u="course.grades.pastDue.confirmationNeeded.";class p{displayPastDueConfirmation(e){e?this.initModalTranslateOptions(e):this.initModalTranslateOptions();let t=!1,n=this.scope;this.$modal.open({template:e?o:a,scope:n,resolve:{translations:[r.serviceName,e=>e.loadBundle("course/grades/pastDue/confirmationNeeded")]},controller:["$scope",r.serviceName,function(e,i){e.okAction=()=>{e.$close(),t=!0},e.cancelAction=()=>{e.$close(),t=!1,n.cancelCallback&&n.cancelCallback()}}]}).result.then(()=>{t&&this.scope.confirmCallback&&(this.isPastZeroAssigned?this.scope.confirmCallback():this.scope.confirmCallback({args:{choice:this.scope.modalTranslateOptions.choiceModal}}))},()=>{this.scope.dismissCallback&&this.scope.dismissCallback()})}initModalTranslateOptions(e){if(e)return this.scope.modalTranslateOptions={title:{key:u+"title"},instructions:{key:u+e+".instructions"}};let t=this.isPastZeroAssigned?"assign":"unassign";if(this.scope.modalTranslateOptions={title:{key:u+t+".title"},instructions:{key:u+t+".instructions"},confirm:{key:u+t+".confirm"},cancel:{key:u+t+".cancel"}},!this.isPastZeroAssigned){let e=[{id:"past-due-unassign-retain",name:"pastDueUnassignZero",value:s.Z.Retain.toString(),localizedKey:u+"unassign.choices.retain"},{id:"past-due-unassign-delete",name:"pastDueUnassignZero",value:s.Z.Delete.toString(),localizedKey:u+"unassign.choices.delete",descriptionKey:u+"unassign.choices.instructions"}];Object.assign(this.scope.modalTranslateOptions,{choices:e,choiceModal:e[0].value})}return this.scope.modalTranslateOptions}constructor(e,t,n,i,r){this.scope=e,this.element=t,this.attrs=n,this.$modal=i,this.bbLocalize=r,this.scope.$on(c,(e,t)=>{this.displayPastDueConfirmation(t)}),this.scope.$on(d,(e,t)=>{this.isPastZeroAssigned=t,this.displayPastDueConfirmation()})}}p.$inject=["scope","element","attrs","$modal",r.serviceName];class m{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.scope={confirmCallback:"&?",cancelCallback:"&?",dismissCallback:"&?"},this.link=(e,t,n)=>{e.pastDueZero=this.$injector.instantiate(p,{scope:e,element:t,attrs:n})}}}m.$inject=["$injector"],i.module(l,[]).directive("bbPastDueZero",["$injector",e=>e.instantiate(m)])},117633:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(676954),r=n(728042),s=n(401418);let o="ultra.directives.group.group-count";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,r.w)({moduleName:o,componentName:"bbGroupCount",template:s,bindings:{content:"<"},requireModules:[i.moduleName]})],class{$onInit(){}isSelfEnrollment(){return!!this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0&&this.content.selfEnrollmentGroups.some(e=>e.group&&!e.group.groupSetId)}})},744637:function(e,t,n){"use strict";n.d(t,{$w:function(){return m},e1:function(){return p}});var i=n(567361),r=n(891886),s=n(676954),o=n(808361),a=n(443367),l=n(352685),c=n(728042),d=n(302032);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.directives.group.group-student-enrollment";class m{$onInit(){this.render()}async render(){if(this.content.selfEnrollmentGroups&&this.content.selfEnrollmentGroups.length>0){let{locale:e,babelfishFormatter:t}=this.localize.getReactBabelfishParams(this.scope),n=this.content.selfEnrollmentGroups.filter(e=>e.group).map(e=>e.group);this.selfEnrollGroupInfo=await l.pL(n,e,t),this.isSelfEnrollment=this.selfEnrollGroupInfo.isSelfEnrollment}else this.isSelfEnrollment=!1}async openContentEnrollPanel(){this.fromView?(this.ultraState.current.name.endsWith("discussion.view.with-grading.peek.discussion-details")&&await this.ultraState.leavePeekState(),await this.ultraState.leavePeekState(),await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id,fromView:this.fromView})):await this.ultraState.goPeekState("content-group-enroll",{courseId:this.content.courseId,contentId:this.content.id})}isBeforeEnrollment(){return this.selfEnrollGroupInfo&&"Before"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollment(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState}isOpenEnrollmentWithEnding(){return this.selfEnrollGroupInfo&&"Open"===this.selfEnrollGroupInfo.enrollmentDateState&&null!=this.selfEnrollGroupInfo.relativeDate}isAfterEnrollment(){return this.selfEnrollGroupInfo&&"After"===this.selfEnrollGroupInfo.enrollmentDateState}constructor(e,t,n,i,r){this.scope=e,this.contentService=t,this.currentUserService=n,this.localize=i,this.ultraState=r,this.isSelfEnrollment=!1}}m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(0,c.w)({moduleName:p,componentName:"bbGroupStudentEnrollment",template:a,bindings:{content:"<",fromView:"@"},requireModules:[i.e1,r.e1,s.moduleName,o.e1]}),u(0,(0,d.tB)("$scope")),u(1,(0,d.tB)(i.HV)),u(2,(0,d.tB)(r.HV)),u(3,(0,d.tB)(s.serviceName)),u(4,(0,d.tB)(o.HV))],m)},504503:function(e,t,n){"use strict";n.d(t,{XC:function(){return u},e1:function(){return d}}),n(939170);var i=n(276635),r=n(464027),s=n(658895),o=n(495794),a=n(478459),l=n(480489),c=n(915996);let d="ultra.components.directives.infiniteScroll",u="bbInfiniteScroll";class p{breakPromises(){i.forEach(this.promises,e=>{e.resolve()})}loadMoreItems(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))}get loadMoreLocalizationValues(){return r.extend({},this.localizationValues,{loadCount:this.loadCount})}setLoadCount(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))}constructor(e,t,n,r,s,a,l){let d;this.scope=e,this.element=t,this.attrs=n,this.$compile=r,this.$q=s,this.timeout=a,this.toast=l,this.isManualLoad=!1,this.promises=[];let p=n.$observe("infiniteScrollTrayId",e=>{this.trayId=e,p()});if(n.infiniteScrollLocalizationKeysPrefix){let e=n.$observe("infiniteScrollLocalizationKeysPrefix",t=>{this.localizationKeysPrefix=t,this.trayLocalizationKeysPrefix=t+".saveTray",e()})}else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";n.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(n.infiniteScrollLocalizationValues)),e.$watchGroup([n.infiniteScrollTotalCount,n.infiniteScrollCurrentCount],e=>{if(null!=e[0]&&null!=e[1]){if(this.totalCount=e[0],this.currentCount=e[1],this.remainingCount=this.totalCount-this.currentCount,this.remainingCount<0)throw Error(`The remainingCount of ${this.remainingCount} should never be a negative number!`);this.setLoadCount()}}),e.$watch(n.infiniteScrollDisabled,e=>{this.disabled=e});let m=e.$watch(n.infiniteScrollLoadLimit,e=>{null!=e&&(this.loadLimit=e,this.setLoadCount(),m())});r(t)(e),this.timeout(()=>{d=r(c)(e).insertAfter(t)},this.scope,0,!1),this.scope.$on(u,(e,t,r)=>{if(this.trayId!==t)return;let s=this.$q.defer();if(r.then(()=>{s.resolve()}).catch(()=>s.resolve()),this.promises.push(s),s.promise.then(()=>i.remove(this.promises,e=>r===e)),this.cancelLoading=this.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:this.trayLocalizationKeysPrefix,promise:s.promise}),this.attrs.infiniteScrollFocusableChildrenSelector&&this.isManualLoad){this.isManualLoad=!1;let e=this.loadCount;r.then(()=>{this.timeout(()=>{let t=this.element.find(this.attrs.infiniteScrollFocusableChildrenSelector);o.Zl(t.eq(t.length-e),null,n.infiniteScrollForceShowAncestorSelector)},this.scope,0,!1)})}}),this.scope.$on("$destroy",()=>{d&&d.remove(),this.breakPromises(),this.cancelLoading&&this.cancelLoading()})}}p.$inject=["scope","element","attrs","$compile","$q",l.H,a.HV];class m{constructor(e){this.$injector=e,this.terminal=!0,this.compile=(e,t)=>(e,t,n)=>{let i=e.$eval(n.infiniteScrollCurrentCount),r=e.$eval(n.infiniteScrollTotalCount);null!=i&&null!=r&&i>=r||t.attr("infinite-scroll",n.bbInfiniteScroll),t.removeAttr("bb-infinite-scroll"),e.infiniteScroll=this.$injector.instantiate(p,{scope:e,element:t,attrs:n})}}}m.$inject=["$injector"],r.module(d,["infinite-scroll",l.e,a.e1]).value("THROTTLE_MILLISECONDS",s.default.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",e=>e.instantiate(m)])},506117:function(e,t,n){"use strict";n.d(t,{Vz:function(){return c},e1:function(){return o},eh:function(){return a},oy:function(){return l}});var i=n(464027),r=n(276635),s=n(625506);let o="ultra.components.directives.intersectionObserverRoot",a="intersection-observer-target-id",l="intersectionObserverTargetId";class c{getId(){return this.element.attr(a)}in(){this.inCallback()}out(){this.outCallback()}toElement(){return this.element.get(0)}constructor(e,t=i.noop,n=i.noop){this.element=e,this.inCallback=t,this.outCallback=n}}class d{observe(e){let t=e.getId();r.isEmpty(t)||(this.unobserve(t),this.targets.set(t,e),this.intersectionObserver.observe(e.toElement()))}unobserve(e){if(r.isEmpty(e))return;let t=this.targets.get(e);t&&(this.intersectionObserver.unobserve(t.toElement()),this.targets.delete(e))}disconnect(){this.intersectionObserver.disconnect(),this.targets.clear()}constructor(e){this.targets=new Map,this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{let t=this.targets.get(s(e.target).attr(a));t&&(e.isIntersecting?t.in():t.out())})},e)}}class u{registerTarget(e){this.observer.observe(e)}unregisterTarget(e){this.observer.unobserve(e.getId())}unregisterAll(){this.observer.disconnect()}constructor(e,t){this.$scope=e,this.$element=t;let n=(e.rootOptions||(()=>({root:t.get(0),rootMargin:"0px 0px 0px 0px"})))();this.observer=new d(n),e.$on("$destroy",()=>this.unregisterAll())}}u.$inject=["$scope","$element"];class p{constructor(){this.restrict="A",this.scope={rootOptions:"&?"},this.controller=u}}i.module(o,[]).directive("bbIntersectionObserverRoot",["$injector",e=>e.instantiate(p)])},992300:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}});var i=n(464027),r=n(276635),s=n(506117);let o="ultra.components.directives.intersectionObserverTarget";class a{constructor(){this.require="^^bbIntersectionObserverRoot",this.restrict="A",this.scope={[s.oy]:"@",inCallback:"&?",outCallback:"&?"},this.link=(e,t,n,i)=>{r.isEmpty(e[s.oy])||(t.attr(s.eh,e[s.oy]),e.target=new s.Vz(t,e.inCallback,e.outCallback),i.registerTarget(e.target),e.$on("$destroy",()=>{i.unregisterTarget(e.target)}))}}}i.module(o,[]).directive("bbIntersectionObserverTarget",["$injector",e=>e.instantiate(a)])},534613:function(e,t,n){"use strict";n.d(t,{PN:function(){return a},e1:function(){return o}}),n(418360);var i=n(276635),r=n(979803),s=n(625506);let o="bbIntersectionObservableDirective";function a(e=null){return function(t){return class extends t{constructor(...t){super(...t),this.require=[].concat(this.require||[]).concat([`^^?${r.E}`]),this.link=function(e,t=null){return function(n,r,s,o,a){let l=o[o.length-1],c=(0,i.once)(()=>{e.call(this,n,r,s,o,a)}),d=c;t&&t>0?d=(0,i.debounce)(()=>{c(),n.$evalAsync(i.noop)},t):d.cancel=i.noop,l?l.link(r[0],n,(e,t,n)=>{n.isIntersecting?d():d.cancel()}):c()}}(this.link||i.noop,e)}}}}let l="bbIntersectionObservable";angular.module(o,[]).directive(l,["$compile",function(e){return{transclude:"element",priority:6e3,terminal:!0,require:`^^?${r.E}`,restrict:"A",link(t,n,r,o,a){if(!o)return a(function(e,t){n.replaceWith(e)});let c={placeholder:"div",debounce:0,...t.$eval(r[l]||"{}")},d=s(`<${c.placeholder} class="intersection-observable-placeholder"></${c.placeholder}>`);e(d)(t),n.replaceWith(d);let u=(0,i.debounce)((0,i.once)(()=>{a(function(e,t){o.unlink(d[0]),d.replaceWith(e)})}),c.debounce);o.link(d[0],t,(e,t,n)=>{n.isIntersecting?u():u.cancel()})}}}])},979803:function(e,t,n){"use strict";n.d(t,{E:function(){return a},e:function(){return o}});var i=n(276635),r=n(464027),s=n(480489);let o="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";r.module(o,[s.e]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",s.H,function(e,t,n){if("IntersectionObserver"in window){let t=[],r=new IntersectionObserver(s=>{i(s).map(e=>({entry:e,data:i.find(t,t=>t.el===e.target)})).each(({entry:e,data:n})=>{n.fn(n.el,n.scope,e)&&(i.remove(t,t=>t.el===e.target),r.unobserve(e.target))}),n(i.noop,e)},{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",function(){r.disconnect()}),Object.assign(this,{link(e,n,s){n.$on("$destroy",()=>{r.unobserve(e),i.remove(t,t=>t.el===e)}),r.observe(e),t.push({el:e,scope:n,fn:s})},unlink(e){r.unobserve(e),i.remove(t,t=>t.el===e)}})}else Object.assign(this,{link(e,t,n){n(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:i.noop})}]}}])},284293:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(684875),n(388634);var i=n(276635),r=n(464027),s=n(676954),o=n(495794),a=n(385847),l=n(705665),c=n(776517);let d="ultra.components.directives.modal";class u{handleKeyDown(e){e.keyCode===a.Mf?(e.preventDefault(),e.shiftKey?o.gW(this.element):o.Bv(this.element)):e.keyCode===a.hY&&(e.stopPropagation(),this.dismiss())}dismiss(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss(),(0,c.sA)(c.Cs.ModelDismissed)}constructor(e,t,n,r,s){this.scope=e,this.element=t,this.attrs=n,this.transcludes=r,this.bbLocalize=s,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";let o=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=s.translateSync(i.merge({key:e.modalTitleKey},o?o.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||o&&o.dismiss)&&(this.dismissString=s.translateSync(i.merge({key:e.modalDismissKey},o?o.dismiss:{})));let a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}}u.$inject=["scope","element","attrs","transcludes",s.serviceName];class p{constructor(e){this.$injector=e,this.replace=!0,this.restrict="E",this.template=l,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=(e,t,n,i,r)=>{e.modal=this.$injector.instantiate(u,{scope:e,element:t,attrs:n,transcludes:r})}}}p.$inject=["$injector","$rootScope"],r.module(d,["multi-transclude"]).directive("bbModal",["$injector",e=>e.instantiate(p)])},949735:function(e,t,n){"use strict";n.d(t,{e1:function(){return r}});var i=n(464027);let r="ultra.directives.bbMouseLeaveEnter";class s{constructor(e){this.$rootScope=e,this.restrict="A",this.link=(e,t,n)=>{let i=()=>{e.$apply(()=>{this.$rootScope.$broadcast(n.bbMouseLeaveEnter+"-mouse-enter")})},r=()=>{e.$apply(()=>{this.$rootScope.$broadcast(n.bbMouseLeaveEnter+"-mouse-leave")})};e.$on("$destroy",()=>{t.off("mouseenter",i),t.off("mouseleave",r)}),t.on("mouseenter",i),t.on("mouseleave",r)}}}s.$inject=["$rootScope"],i.module(r,[]).directive("bbMouseLeaveEnter",["$injector",e=>e.instantiate(s)])},401138:function(e,t,n){"use strict";n.d(t,{Hz:function(){return I},e1:function(){return E}}),n(610091),n(196407),n(747604),n(496275),n(538966),n(322766),n(503359),n(507110),n(961209),n(691249);var i=n(276635),r=n(464027),s=n(396435),o=n(716865),a=n(676954),l=n(480489),c=n(402184),d=n(936867),u=n(728042),p=n(302032),m=n(385847),h=n(443331);let g="ultra.components.directives.overflow-menu.overflow-menu-icon";class f{}f=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(0,u.w)({moduleName:g,componentName:"bbOverflowMenuIcon",template:h,bindings:{iconName:"@",status:"@"}})],f);var b=n(948806),v=n(840236),y=n(625506);function S(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function C(e,t){return function(n,i){t(n,i,e)}}let E="ultra.components.directives.overflowMenu.overflowMenu";function I(e){return{titleKey:(0,o.Pc)(e,"title"),instructionsKey:(0,o.Pc)(e,"instructions")}}class w{show(){return!this.options.show||this.options.show()}disable(){return!!this.options.disable&&this.options.disable()}onClick(){this.disable()||(this.options.confirmationOptions?this.options.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey?this.options.confirmationOptions.lazyLoadTitleKeyAndInstructionsKey().then(e=>{this.options.confirmationOptions.titleKey=e.titleKey||this.options.confirmationOptions.titleKey,this.options.confirmationOptions.instructionsKey=e.instructionsKey||this.options.confirmationOptions.instructionsKey,this.menu.showConfirmation(this.confirmationId),this.isConfirmationActive=!0}):(this.menu.showConfirmation(this.confirmationId),this.isConfirmationActive=!0):this.onConfirm())}isConfirmationMenuVisible(){return this.isConfirmationActive}blur(){this.isConfirmationActive=!1}getLabelKey(){return this.labelKey}onConfirm(e){e&&(this.integrationEventEmitterService.emitIntegrationEvent(e),e.preventDefault(),e.stopImmediatePropagation()),this.persistChoices(),this.menu.closeDropdown(),this.options.onClick(),this.isConfirmationActive=!1}onCancel(){this.menu.closeDropdown(),this.isConfirmationActive=!1}hasConfirmation(){return null!=this.options.confirmationOptions}hasChoices(){return this.hasConfirmation()&&this.options.confirmationOptions.choices&&this.options.confirmationOptions.choices.length>0}hasTextKey(){return this.textKey.length>0}persistChoices(){this.hasChoices()&&this.menu.persistChoices(this.options.confirmationOptions.choices)}addAdditionalAttributes(){if(this.additionalAttributes){let e=this.menu.menuElement.find("#"+this.id+"_li");Object.keys(this.additionalAttributes).forEach(t=>{e.attr(t,this.additionalAttributes[t])})}return!0}constructor(e,t,n,i){this.menu=e,this.name=t,this.options=n,this.integrationEventEmitterService=i,this.isConfirmationActive=!1,this.id=e.elementId+"_"+t,this.hasConfirmation()&&(this.confirmationId=this.id+"_confirmation"),this.textKey=n.textKey||"",this.bbClickFocus=n.bbClickFocus||"",this.ariaLabel=n.ariaLabel||(()=>""),this.disableInfo=n.disableInfo||"",this.additionalAttributes=n.additionalAttributes||null}}class A extends w{constructor(e,t,n){super(e,t.uniqueId?t.uniqueId:"edit",t,n),this.icon=t.icon||"draw",this.labelKey=t.labelKey||"global.edit"}}A=S([C(0,(0,p.tB)("menu")),C(1,(0,p.tB)("options")),C(2,(0,p.tB)("integrationEventEmitterService"))],A);class k extends w{constructor(e,t,n){super(e,t.uniqueId?t.uniqueId:"delete",t,n),this.icon=t.icon||"trash",this.labelKey=t.labelKey||"global.delete"}}k=S([C(0,(0,p.tB)("menu")),C(1,(0,p.tB)("options")),C(2,(0,p.tB)("integrationEventEmitterService"))],k);class T extends w{constructor(e,t,n){super(e,t.uniqueId?t.uniqueId:t.icon,t,n),this.icon=t.icon,this.status=t.status,this.uniqueId=t.uniqueId,this.labelKey=t.labelKey}}T=S([C(0,(0,p.tB)("menu")),C(1,(0,p.tB)("options")),C(2,(0,p.tB)("integrationEventEmitterService"))],T);class P{addOptionsToMenuItems(e){this.scope.editOptions&&this.scope.editOptions()&&this.menuItems.push(this.$injector.instantiate(A,{menu:this,options:this.scope.editOptions(),integrationEventEmitterService:this.integrationEventEmitterService})),e&&e.length>0&&e.forEach(e=>{this.menuItems.push(this.$injector.instantiate(T,{menu:this,options:e,integrationEventEmitterService:this.integrationEventEmitterService}))}),this.scope.deleteOptions&&this.scope.deleteOptions()&&this.menuItems.push(this.$injector.instantiate(k,{menu:this,options:this.scope.deleteOptions(),integrationEventEmitterService:this.integrationEventEmitterService})),this.checkAndUpdateForSingleMenu(),this.confirmationNeededMenuItems=i.filter(this.menuItems,e=>e.hasConfirmation())}repositionMenuIfNeeded(){let e=this.element.find(".f-dropdown-overflow-menu"),t=this.element.find(".overflow-menu-button");if(0!==e.length&&(e.removeClass("align-top"),e.offset().top+e.outerHeight()+8>=y(document).height())){e.addClass("align-top");let n=t.position().top+parseInt(t.css("margin-top"),10),i=0-e.outerHeight()+4+n,r=y(".black-panel-header"),s=0;r.length>0&&(s=r.outerHeight()+r.position().top),i<s?e.css({top:t.position().top+t.height()}):e.css("top",i)}}initWindowResizeHandler(){u.Z.OnWindow("resize",()=>{this.resetDropdownMenuStyles(),this.repositionMenuIfNeeded()},this.scope)}resetDropdownMenuStyles(){let e=y(".guidance-wrapper .f-dropdown.f-dropdown-overflow-menu");e.each(t=>{y(e[t]).removeAttr("style")})}show(){return this.menuItems.length>0&&this.menuItems.some(e=>e.show())}hasUniqueId(e){return!!this.element.find('a[id*="'+e+'"]').length}closeDropdown(){let e=this.element.find(".f-open-dropdown:visible");this.element.foundation("dropdown","close",e)}toggleDropdown(){let e=this.element.find(".overflow-menu-button");this.element.foundation("dropdown","toggle",e)}showConfirmation(e){this.timeout(()=>{this.element.find("[data-dropdown-content]").addClass("bb-foundation-dropdown-tab-override"),null==this.dialogMap[e]&&(this.dialogMap[e]=this.element.find("#"+e)),this.dialogMap[e].show(),this.element.find(".js-menu-item-list").hide(),this.menuItems.some(e=>r.isDefined(e.disable))&&y("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0}),this.ignoreCloseEvent=!0,this.toggleDropdown(),this.toggleDropdown(),this.ignoreCloseEvent=!1},this.scope)}getButtonAriaLabel(){let e;e=null!=this.scope.elementName?"components.directives.overflow-menu.menu-button.aria-label":"components.directives.overflow-menu.menu-button.title";let t={locale:this.bbLocalize.getLocale(this.scope),key:e,noWrap:!0};return null!=this.scope.elementName&&(t.params={elementName:this.$sce.trustAsHtml(this.scope.elementName)}),this.bbLocalize.translateSync(t)}getTextByKey(e){let t={locale:this.bbLocalize.getLocale(this.scope),key:e,noWrap:!0};return this.bbLocalize.translateSync(t)}hasOptionText(){return this.menuItems.length>0&&this.menuItems.some(e=>e.hasTextKey())}persistChoices(e){e&&e.length&&e.forEach(e=>{this.scope.$emit(e.key,e.value)})}addMenuItem(e){let t=this.$injector.instantiate(T,{menu:this,options:e,integrationEventEmitterService:this.integrationEventEmitterService});this.indexOfExistingMenuItem(e,this.menuItems)>-1||(this.menuItems.push(t),this.checkAndUpdateForSingleMenu(),this.confirmationNeededMenuItems=i.filter(this.menuItems,e=>e.hasConfirmation()))}indexOfExistingMenuItem(e,t){return i.findIndex(t,t=>e.labelKey===t.getLabelKey())}onOptionKeydown(e){(e.keyCode===m.K5||e.keyCode===m.L_)&&e.preventDefault()}isSingleMode(){var e,t;return null===(e=(t=this.scope).isSingleMode)||void 0===e?void 0:e.call(t)}ignoreAccordion(){var e,t;return null===(e=(t=this.scope).ignoreAccordion)||void 0===e?void 0:e.call(t)}checkAndUpdateForSingleMenu(){this.isSingleMode()&&this.menuItems.length&&(this.menuItems=this.menuItems.slice(0,1),this.singleMenuItem=this.menuItems[0])}buildAnalyticsId(e){return e.additionalAttributes&&e.additionalAttributes.analyticsIdOverride?e.additionalAttributes.analyticsIdOverride:`${this.scope.analyticsIdTagPrefix}.${e.labelKey}.link`}constructor(e,t,n,r,s,o,a,l){this.scope=e,this.element=t,this.$injector=n,this.$sce=r,this.bbLocalize=s,this.timeout=o,this.dropdownInit=a,this.integrationEventEmitterService=l,this.menuItems=[],this.confirmationNeededMenuItems=[],this.visibleMenuItemsFilter=e=>e.show(),this.ignoreCloseEvent=!1,this.dialogMap={},this.initDropdownMenu=i.once(()=>{this.dropdownInit(this.element,this.scope),this.timeout(()=>{this.element.find(".js-menu-item-list a").first().focus()},this.scope,100)}),this.isRtl=s.isRTL(e),this.menuElement=t,this.elementId=e.elementId,this.menuDirection=`align:${this.isRtl?"right":"left"}`;let c=[];e.menuItems&&e.menuItems()&&(c=e.menuItems()),this.addOptionsToMenuItems(c),this.initWindowResizeHandler(),this.element.on("closed.fndtn.dropdown",".f-open-dropdown",()=>{e.menuWasToggled(!1),this.ignoreCloseEvent||(this.element.find(".menu-icon-confirmation").hide(),this.element.find("[data-dropdown-content]").removeClass("bb-foundation-dropdown-tab-override"),this.element.find(".js-menu-item-list").show())}),this.element.on("opened.fndtn.dropdown",".f-dropdown-overflow-menu",()=>{e.menuWasToggled(!0),this.initDropdownMenu(),this.repositionMenuIfNeeded()}),e.menuItems&&e.$on("menuItems.update",(e,t,n)=>{this.elementId===t&&(this.menuItems=[],this.addOptionsToMenuItems(n))})}}S([(0,p.aM)("elementName","locale")],P.prototype,"getButtonAriaLabel",null),P=S([C(0,(0,p.tB)("scope")),C(1,(0,p.tB)("element")),C(2,(0,p.tB)("$injector")),C(3,(0,p.tB)("$sce")),C(4,(0,p.tB)(a.serviceName)),C(5,(0,p.tB)(l.H)),C(6,(0,p.tB)(c.H)),C(7,(0,p.tB)(d.HV))],P);class D{setMenu(e){this.menu=e,this.queuedMenuItems.length>0&&this.queuedMenuItems.forEach(e=>{this.addMenuItem(e)})}addMenuItem(e){this.menu?this.menu.addMenuItem(e):this.queuedMenuItems.push(e)}destroyMenu(){this.menu=null,this.queuedMenuItems=[]}constructor(e){this.$injector=e,this.queuedMenuItems=[]}}D.$inject=["$injector"];class x{constructor(e,t,n){this.$compile=e,this.$injector=t,this.bbLocalize=n,this.restrict="E",this.template=b,this.require="?^^bbOverflowMenuContainer",this.scope={elementId:"@",elementName:"@?",editOptions:"&?",deleteOptions:"&?",menuItems:"&?",isDisabled:"&?",isSingleMode:"&?",onMenuToggle:"&?",analyticsIdTagPrefix:"@",ignoreAccordion:"&?"},this.link=(e,t,n,i)=>{this.bbLocalize.loadBundle("components/directives/overflow-menu"),this.bbLocalize.loadBundle("components/directives/confirmation-needed"),e.menuWasToggled=t=>{e.onMenuToggle&&e.$applyAsync(()=>e.onMenuToggle({isOpen:t}))},e.overflowMenu=this.$injector.instantiate(P,{scope:e,element:t}),i&&(i.setMenu(e.overflowMenu),e.$on("$destroy",()=>{i.destroyMenu()}))}}}x=S([C(0,(0,p.tB)("$compile")),C(1,(0,p.tB)("$injector")),C(2,(0,p.tB)(a.serviceName))],x);class R{constructor(e,t){this.$compile=e,this.$injector=t,this.restrict="A",this.controller=D}}R.$inject=["$compile","$injector"],r.module(E,[s.e1,o.e1,a.moduleName,g,l.e,c.e,d.e1,v.e]).directive("bbOverflowMenu",["$injector",e=>e.instantiate(x)]).directive("bbOverflowMenuContainer",["$injector",e=>e.instantiate(R)])},392691:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},gJ:function(){return h}});var i=n(276635),r=n(625506),s=n(464027),o=n(346936),a=n(480489),l=n(676954),c=n(728042),d=n(322648),u=n(257549),p=n(752436);let m="ultra.components.directives.saveTray";class h{getTemplateHtml(){return this.template}static getTrayType(e){switch(e){case"LoadMoreResults":return h.LoadMoreResults;case"Toast":return h.Toast;default:return h.Default}}constructor(e,t,n){this.template=e,this.msgKeysSuffix=t,this.eventName=n}}h.Default=new h(d,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),h.LoadMoreResults=new h(u,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),h.Toast=new h(p);class g{sendMessageToScreenReader(e,t,n){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),n)}constructor(e,t,n,s,o){if(this.scope=e,this.spinner=n,this.timeout=s,this.bbLocalize=o,this.inProgress=!1,this.localizationKeysPrefix=e.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=t.closest("footer"),e.toastMessage&&e.toastMessage()){if(t.find(".notification-container span.progress-status").html(e.toastMessage()),e.toastShortMessage&&e.toastShortMessage()){let n,s=!1,o=!1,a=!0,l=t.find(".notification-container span.progress-status"),d=()=>{let t=r(window).width();l[0].offsetWidth<l[0].scrollWidth?(s||(n=t),s=!0,a&&(o=!0),l.html(e.toastShortMessage())):t>n&&!o&&(s=!1,l.html(e.toastMessage())),a=!1};this.timeout(d,e,0);let u=i.debounce(d,100);c.Z.OnWindow("resize",u,e)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:()=>{var t,n;this.status="success",this.inProgress=!1,this.sendMessageToScreenReader(e,null!==(n=null===(t=e.trayType.msgKeysSuffix)||void 0===t?void 0:t.success)&&void 0!==n?n:""),e.$apply()},errorCallback:()=>{var t,n;this.status="error",this.inProgress=!1,this.sendMessageToScreenReader(e,null!==(n=null===(t=e.trayType.msgKeysSuffix)||void 0===t?void 0:t.error)&&void 0!==n?n:""),e.$apply()}},e.$on("save-tray-spinner-status-update",(e,t)=>{if(this.spinnerObject)return t?this.spinnerObject.complete():this.spinnerObject.error()}),e.$on(e.trayType.eventName,(n,i,r,s,o,a)=>{var l,c;e.trayId===i&&(this.status="",this.canvasElement||(this.canvasElement=t.find(".canvas")),s&&(this.spinnerArgs=s),this.footer.addClass("is-active"),this.spinnerObject||(this.spinnerObject=this.spinner.initInlineLoader(this.canvasElement,this.spinnerArgs)),this.inProgress||(this.spinnerObject.start(),this.inProgress=!0),this.timeoutComplete=!1,this.activeTimeout&&!this.timeoutComplete&&this.timeout.cancel(this.activeTimeout),this.sendMessageToScreenReader(e,null!==(c=null===(l=e.trayType.msgKeysSuffix)||void 0===l?void 0:l.inProgress)&&void 0!==c?c:"",0),r.then(()=>{o?(this.activeTimeout=this.timeout(()=>{this.footer.removeClass("is-active"),this.timeoutComplete=!0,this.scope.$root.$broadcast("bbSaveTrayComplete")},e,a||g.ACTIVE_TIMEOUT_LENGTH,!0),this.spinnerObject.complete()):this.spinnerObject.error()},e=>{e&&"canceled"===e.$status||this.spinnerObject.error()}))})}}g.$inject=["scope","element",o.HV,a.H,l.serviceName],g.ACTIVE_TIMEOUT_LENGTH=6e3;class f{constructor(e,t){this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?"},this.link=(e,t,n)=>{n.trayType?e.trayType=h.getTrayType(n.trayType):e.trayType=e.toastMessage&&e.toastMessage()?h.Toast:h.Default,t.append(this.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=this.$injector.instantiate(g,{scope:e,element:t})}}}f.$inject=["$injector","$compile"],s.module(m,[o.e1,a.e,l.moduleName]).directive("bbSaveTray",["$injector",e=>e.instantiate(f)])},769290:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),r=n(644656),s=n(610624),o=n(356604);let a="ultra.components.directives.squareToggle";class l{handleKeyUp(e){(13===e.keyCode||32===e.keyCode)&&(this.scope.property=e.target.value)}handleClick(e){this.scope.property=e.target.value}constructor(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.radioGroupName=s.d(),this.oneControlId=s.d(),this.twoControlId=s.d()}}l.$inject=["scope","element","attrs"];class c{constructor(e){this.$injector=e,this.restrict="E",this.template=o,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=(e,t)=>(i.isDefined(t.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),i.isDefined(t.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:(e,t,n)=>{e.squareToggle=this.$injector.instantiate(l,{scope:e,element:t,attrs:n})}})}}c.$inject=["$injector"],i.module(a,[r.e1]).directive("bbSquareToggle",["$injector",e=>e.instantiate(c)])},488954:function(e,t,n){"use strict";n.d(t,{e1:function(){return m}}),n(409721);var i=n(464027),r=n(248713);let s="ultra.components.directives.statistics.complexStatistic";class o{constructor(e,t,n){this.scope=e,this.element=t,this.$compile=n;let i=this.$compile(this.scope.item().complexTemplate)(this.scope.item().complexScope);t.append(i)}}o.$inject=["scope","element","$compile"];class a{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=r,this.scope={item:"&"},this.link=(e,t)=>{e.complexStatistic=this.$injector.instantiate(o,{scope:e,element:t})}}}a.$inject=["$injector"],i.module(s,[]).directive("bbComplexStatistic",["$injector",e=>e.instantiate(a)]);var l=n(435776);let c="ultra.components.directives.statistics.simpleStatistic";class d{constructor(e,t){this.scope=e,this.$sce=t,this.scope.item().trusted=t.trustAsHtml(this.scope.item().data)}}d.$inject=["scope","$sce"];class u{constructor(e){this.$injector=e,this.replace=!0,this.restrict="A",this.template=l,this.scope={item:"&"},this.link=e=>{e.simpleStatistic=this.$injector.instantiate(d,{scope:e})}}}u.$inject=["$injector"],i.module(c,[]).directive("bbSimpleStatistic",["$injector",e=>e.instantiate(u)]);var p=n(341010);let m="ultra.components.directives.statistics";class h{constructor(e){this.scope=e,this.smallPerRow=e.smallPerRow()||1,this.largePerRow=e.largePerRow()||4,this.scope.$watch("config()",e=>{e&&(this.config=e.length>10?e.slice(0,10):e,this.total=this.config.length)})}}h.$inject=["scope"];class g{constructor(e){this.$injector=e,this.replace=!0,this.restrict="AE",this.template=p,this.scope={config:"&",smallPerRow:"&",largePerRow:"&"},this.link=e=>{e.statistics=this.$injector.instantiate(h,{scope:e})}}}g.$inject=["$injector"],i.module(m,["dibari.angular-ellipsis",s,c]).directive("bbStatistics",["$injector",e=>e.instantiate(g)])},108266:function(e,t,n){"use strict";n.d(t,{e1:function(){return h}});var i,r,s=n(464027),o=n(524062),a=n(379640),l=n(302032),c=n(78029),d=n(666137),u=n(986709);function p(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.components.directives.submissionCard";(i=r||(r={})).Attempt="ATTEMPT",i.Grade="GRADE",i.Info="INFO";class g{shouldExpandForRubricIcon(){return(this.scope.showRubricButton&&this.scope.showRubricButton()||this.scope.showRubricDiv&&this.scope.showRubricDiv())&&this.scope.gradingColumn.hasRubricAssociation&&this.scope.gradingColumn.hasRubricAssociation()}get showLateIcon(){return this.showLate&&(!this.scope.gradeDetail||!this.attempt||this.attempt.isInProgress())}constructor(e){let t,n;if(this.scope=e,!(e.gradingColumn||e.gradeDetail))throw new c.v({message:"gradingColumn or gradeDetail must be provided."});if(this.scope.gradeDetail&&!this.scope.gradeDetail.column)throw new c.v({message:"gradeDetail.column must be provided to display attempt mode."});switch(this.scope.gradeDetail&&(this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt)&&(this.attempt=this.scope.gradeDetail.ui.groupAttempt||this.scope.gradeDetail.ui.attempt,this.currentGradeStatus=this.scope.gradeDetail.ui.attempt.status),(!e.gradeDetail||e.gradeDetail&&!this.attempt)&&e.gradingColumn?this.scope.mode="INFO":e.gradeDetail&&this.attempt&&(this.scope.mode="ATTEMPT",this.scope.gradingColumn=this.scope.gradeDetail.column),this.showLate=!e.showLate||e.showLate(),e.mode){case"INFO":n=e.gradingColumn.dueDate?"DUE":"NO_DUE_DATE",t=this.showLate?"UNOPENED_LATE":"UNOPENED";break;case"ATTEMPT":n=this.attempt.status.toString(),e.hasAttempt=!0,t=u.I$9.InProgress===this.attempt.status&&this.showLate?"SUBMISSION_LATE":"SUBMISSION"}e.status="components.directives.submission-card.attemptStatus."+n,e.title="components.directives.submission-card.title."+t}}g=p([m(0,(0,l.tB)("scope"))],g);class f{constructor(e){this.$injector=e,this.restrict="AE",this.template=d,this.scope={gradeDetail:"=?",gradingColumn:"=?",inline:"@?",clickable:"=?",showLate:"&?",showRubricButton:"&?",showRubricDiv:"&?"},this.link=e=>{e.submissionCard=this.$injector.instantiate(g,{scope:e})}}}f=p([m(0,(0,l.tB)("$injector"))],f),s.module(h,[o.e,a.e1]).directive("bbSubmissionCard",["$injector",e=>e.instantiate(f)])},5928:function(e,t,n){"use strict";n.d(t,{e1:function(){return g}});var i,r,s,o,a=n(728042),l=n(302032);(i=s||(s={}))[i.LeftToRight=0]="LeftToRight",i[i.Bidirectional=1]="Bidirectional",(r=o||(o={})).Small="small",r.Medium="medium",r.Large="large",r.Custom="custom";let c={directionality:1},d=e=>e.reduce((e,t)=>({...e,[t]:{...c}}),{}),u={small:d(["peer-review","history","time","timer","reminder","add-reminder","no-time-limit","faster","slower","help","information","search","accommodation","away","add-circle-extended","invisible","netstats-unavailable","text","camera","type-size","close-captioning","bulk-edit","draw","edit","highlighter","erase","link","unlinked","check","attempts","attendance","square-checked","complete","play-start","volume-low","volume-medium","volume-mute","volume","mute-audio","telephony","mute-phone","audio","collab","collab-off","mute-video","record","recording","stop-recording","video","start","stop","raise-hands","lower-hand","hand-pointer","approval","disapproval","status-approval","edit-tool","course-complete","notes","safe-assign","app","broken-app","custom-content","whiteboard","format_text_default","format_text","italicize_default","italicize","subscript_default","subscript","superscript_default","superscript","underline_default","underline","bold_default","bold","calculation","strikethrough","insert_formula"]),medium:d(["peer-review","hand-raise","shape-line","history","time","timer","reminder","add-reminder","no-time-limit","help","help-circle","information","search","zoom-in","zoom-out","exempt","disabled","status-away","invisible","risk-low","text","camera","capture","type-size","close-captioning","download-captions","link","pencil","highlighter","erase","tools","pen","brush","check","check-circle","attempts","audio-mute","cam-mic","audio","telephony","mute-phone","hang-up","sound-on","sound-off","collab","download-recording","video","record","stop-recording","video","video-mute","stop-action","play-start","raise-hand","lower-hand","hand-pointer","pan","asl-interpreter","edit-tool","course-complete","content-view","safe-assign","grades","attendance","wiki","app","app-off","calculation","whiteboard"]),large:d(["app-c","attendance-a","attendance","audio-a","audio-c","audio","calculation-a","calculation-c","calculation","certification-a","certification-c","certification","check-circle-c","check-circle","collaborate-a","collaborate-c","collaborate","coming-soon","course-complete","database-connected","diploma-a","diploma-c","diploma","field-work-a","field-work-c","field-work","fill-in-the-blank-a","fill-in-the-blank","grades-a","grades-c","grades","help-a","help-c","help","information","raise-hand-a","raise-hand-c","raise-hand","record-a","record-c","record","reminder-a","reminder-c","reminder","rubric-a","rubric-c","rubric","scormengine-a","scormengine-sco-a","scormengine-sco","scormengine","stop-recording-a","stop-recording-c","stop-recording","support-document-a","support-document-c","support-document","technical-diploma-a","technical-diploma-c","technical-diploma","text-box-a","text-box","timer-a","timer-c","timer","video-a","video-c","video","whiteboard-a","whiteboard-c","whiteboard","wiki-a","wiki-c","wiki"]),custom:{}};var p=n(391489);function m(e,t){return function(n,i){t(n,i,e)}}let h=["active","alert","success","warning"],g="ultra.components.directives.svgIcon";!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,a.w)({moduleName:g,componentName:"bbSvgIcon",template:`
    <svg
      class="svg-icon svg-icon-directive {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}} {{
        $ctrl.directionalStyles
      }}"
      focusable="false"
      aria-hidden="true"
      bb-cache-compilation="svg-icon"
    >
      <use xlink:href="" ng-href="{{ $ctrl.iconHref }}"></use>
    </svg>
  `,bindings:{icon:"@",color:"<",size:"@",status:"@"}}),m(0,(0,l.tB)("$rootScope")),m(1,(0,l.tB)("$element"))],class{$onInit(){this.windowHref=window.location.href,this.updateIconState(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on(p.G.$locationChangeSuccess,()=>{this.windowHref=window.location.href,this.updateIconState()})}$onChanges(){this.updateIconState()}$onDestroy(){this.destroyLocationChangeListener()}updateIconState(){var e,t;this.directionalStyles=(null===(t=u[this.size])||void 0===t?void 0:null===(e=t[this.icon])||void 0===e?void 0:e.directionality)===s.Bidirectional?"":"directional-icon",this.iconHref=`${this.windowHref}#icon-${this.size}-${this.icon}`}setStatusStyles(){this.color?this.statusStyles="color":null!=h.find(e=>this.status)?this.statusStyles=this.status:this.statusStyles="default"}constructor(e,t){this.$rootScope=e,this.$element=t}})},559366:function(e,t,n){"use strict";n.d(t,{e1:function(){return a}});var i=n(464027),r=n(994250),s=n(541103),o=n(753861);let a="ultra.components.directives.table.tableCell";class l{getColumn(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]}handleAlternateText(){if(this.column&&this.column.alternateTextFn){let e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}}constructor(e,t,n){this.scope=e,this.element=t,this.ctrl=n,this.getColumn(),this.handleAlternateText()}}l.$inject=["scope","element","ctrl"];class c{constructor(e){this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?o:s},this.scope={columnIndex:"&",header:"@"},this.link=(e,t,n,i,r)=>{e.item=e.$parent.$parent.item,e.tableCell=this.$injector.instantiate(l,{scope:e,element:t,ctrl:i}),r((n,i)=>{i.item=e.item,t.find(".transclude-container").append(n)})}}}c.$inject=["$injector"],i.module(a,[r.e1]).directive("bbTableCell",["$injector",e=>e.instantiate(c)])},994250:function(e,t,n){"use strict";n.d(t,{SQ:function(){return u},e1:function(){return d}});var i=n(276635),r=n(464027),s=n(610624),o=n(504503),a=n(676954),l=n(45367),c=n(953471);let d="ultra.components.directives.table";function u(e,t,n){let i=e+"("+t+")";return n&&(i+=","+n+"("+t+")"),i}class p{init(){let e=this.scope.config();e.instanceId=e.instanceId||s.d(),e.currentSortDirection=e.currentSortDirection||"asc",e.currentSortColumnIndex=e.currentSortColumnIndex||0,e.columns.forEach(e=>{r.isUndefined(e.visible)&&(e.visible=!0)});let t=this.scope.$watchCollection("tableData()",e=>{r.isArray(e)&&(this.initialDataLoaded=!0,t())});if(e.customBreakpointFn){let t=i.throttle(t=>{e.customBreakpointFn(t)},500);this.scope.$watch(()=>l.nS(),e=>{t(e)})}this.addEventListeners(),this.setCaption()}addEventListeners(){this.element.on("click","tr th.sortable-header",e=>{let t=r.element(e.currentTarget).attr("data-heading-index");if(r.isDefined(t)){let e=parseInt(t,10);this.sort(e)}})}setCaption(){let e=this.scope.config();this.localizeService.loadBundle("components/directives/table").then(()=>{let t=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table.caption",params:{caption:e.title,column:e.columns[e.currentSortColumnIndex].heading,direction:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.scope),key:"components.directives.table."+e.currentSortDirection})},noWrap:!0});this.element.find("caption").text(t)})}sort(e){let t=this.scope.config();this.initialDataLoaded=!1,t.currentSortColumnIndex===e?t.currentSortDirection="asc"===t.currentSortDirection?"desc":"asc":t.currentSortDirection="asc",t.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:t.instanceId,columnIndex:t.currentSortColumnIndex,sortDirection:t.currentSortDirection,callback:()=>{this.initialDataLoaded=!0,this.setCaption()}})}showMore(){this.throttledShowMore()}constructor(e,t,n,s){this.scope=e,this.element=t,this.$q=n,this.localizeService=s,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=i.throttle(()=>{let e=this.scope.config();if(this.scope.tableData().length<e.totalCount&&!this.fetchingMoreRows){this.fetchingMoreRows=!0;let t=this.$q.defer();this.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:e=>{t.resolve(e)}}),this.scope.$root.$broadcast(o.XC,e.instanceId+"-scroll-tray",t.promise),t.promise.then(()=>{this.fetchingMoreRows=!1})}},500);let a=this.scope.$watch("config()",e=>{r.isDefined(e)&&(a(),this.init())})}}p.$inject=["scope","element","$q",a.serviceName];class m{constructor(e){this.$injector=e,this.restrict="E",this.template=c,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=(e,t)=>{e.table=this.$injector.instantiate(p,{scope:e,element:t})}}}m.$inject=["$injector"],r.module(d,[o.e1,a.moduleName]).directive("bbTable",["$injector",e=>e.instantiate(m)])},956607:function(e,t,n){"use strict";n.d(t,{e1:function(){return T}}),n(670848),n(749838),n(610091),n(193874);var i=n(464027),r=n(276635),s=n(45367),o=n(676954),a=n(488954),l=n(767679),c=n(5928),d=n(396435),u=n(808361),p=n(808611),m=n(272907),h=n(383456),g=n(555840),f=n(193905),b=n(563060),v=n(613944),y=n(599017);let S="ultra.components.directives.bbUiIcon.medium.Messages";(0,v.n)(y.V,S,"bbUiIconMediumMessages");var C=n(728042),E=n(83652),I=n(776517),w=n(259197),A=n(35302),k=n(625506);let T="ultra.components.directives.discussion";class P{notifyMobileApp(){var e;let t={type:I.Cs.DiscussionTelemetryOpened,status:I.rJ.Success,contentId:this.scope.contentId,contentTitle:this.scope.content().title,prevState:(0,I.zb)(null===(e=this.ultraState.prev)||void 0===e?void 0:e.name)};(0,I.Db)(t)}createDfiReport(e,t,n){(n?this.telemetry.loadDiscussionActivityData(e,t,n):this.telemetry.loadDiscussionActivityData(e,t)).then(e=>{this.scope.discussionData=e,this.scope.header=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.header",params:{title:this.scope.content().title},noEscape:!0,noWrap:!0}),this.scope.course=this.courseModel.$find(this.scope.courseId),this.scope.isSingleGroup=!!n,this.scope.groups=this.scope.discussionData.groups,this.scope.isGradable=!!this.scope.discussionData.gradeColumnId,this.scope.gradingColumn=this.scope.discussionData.gradeColumnId,this.scope.viewedOnlyCount=this.scope.discussionData.viewedOnlyCount,this.scope.avgCommentsPerStudent=this.scope.discussionData.avgCommentsPerStudent?this.scope.discussionData.avgCommentsPerStudent:0,this.scope.avgWordCountPerComment=this.scope.discussionData.avgWordCountPerComment?this.scope.discussionData.avgWordCountPerComment:0,this.scope.avgGradeOfDiscussion=this.scope.discussionData.avgGrade?this.scope.discussionData.avgGrade/100:0,this.scope.numberOfCommentsToDisplay=1,this.scope.topComments=[],this.scope.displayTopComments=!1,this.scope.topParticipants=[],this.scope.displayTopParticipants=!1,this.scope.nonParticipants=[],this.scope.showNonparticipant=[],this.scope.showLargeNonparticipantPanel=!0,this.scope.minHeightForTopBoxes="auto",this.scope.nonParticipants=this.getNonParticipants(),this.scope.displayNonParticipants=!!this.scope.nonParticipants.length&&!this.scope.isGroupDiscussion,this.scope.displayNonParticipantGroups=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&!this.scope.isSingleGroup,this.scope.displayNonParticipantGroup=!!this.scope.nonParticipants.length&&this.scope.isGroupDiscussion&&this.scope.isSingleGroup,this.scope.nonParticipantGroups=this.scope.displayNonParticipantGroups?this.getNonParticipantGroups():[],this.scope.totalNonParticipants=this.scope.nonParticipants.length,this.scope.totalParticipants=this.scope.discussionData.totalParticipants+this.scope.totalNonParticipants,this.scope.displayedNonParticipants=24,this.scope.additionalNonParticipants=this.scope.totalNonParticipants,this.scope.currentPanelWidth=0,this.scope.lastPanelWidth=-1,this.scope.isLoaded=!0;for(let e=0;e<this.scope.displayedNonParticipants;e++)this.scope.showNonparticipant[e]=!0;this.getTopComments(),this.getTopParticipants(),this.getParticipantBarChart(),this.updateNonParticipantView(),this.scope.statisticsConfig=this.getSummaryInsightNumbers(),this.scope.topCommentsColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-8 large-9":"small-12",this.scope.topParticipantColumns=this.scope.displayTopComments&&this.scope.displayTopParticipants?"small-12 medium-4 large-3":"small-12"})}getSummaryInsightNumbers(){let e=this.bbLocalize.getLocale(this.scope),t=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.numParticipants"}),n=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.formattedParticipation",params:{count:this.scope.totalParticipants-this.scope.totalNonParticipants,total:this.scope.totalParticipants},noWrap:!0}),i=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgComments"}),r=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgCount"}),s=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.avgGrade"}),o=this.scope.isGradable&&this.scope.avgGradeOfDiscussion>0?this.bbLocalize.formatPercentageSync(this.scope.avgGradeOfDiscussion,this.scope):this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.na"}),a=[];return a.push({title:t,data:n}),a.push({title:i,data:this.bbLocalize.formatNumberSync(this.scope.avgCommentsPerStudent,this.scope).toString()}),this.scope.avgWordCountPerComment&&this.scope.avgWordCountPerComment>0&&a.push({title:r,data:this.bbLocalize.formatNumberSync(this.scope.avgWordCountPerComment,this.scope).toString()}),this.scope.isGradable&&a.push({title:s,data:o}),a}getParticipantBarChart(){let e=0,t=0,n=100,i=this.scope.totalParticipants-this.scope.totalNonParticipants;this.scope.totalParticipants>0?n=100-((e=Math.floor((this.scope.totalParticipants-this.scope.totalNonParticipants)/this.scope.totalParticipants*100))+(t=Math.floor(this.scope.viewedOnlyCount/this.scope.totalParticipants*100))):(e=0,t=0,n=100),k(".bar-chart .participated").attr("style","width: "+e+"%"),k(".bar-chart .opened").attr("style","width: "+t+"%"),k(".bar-chart .unopened").attr("style","width: "+n+"%");let r=this.scope.totalNonParticipants-this.scope.viewedOnlyCount;this.scope.barchartNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartNonParticipants",params:{count:r},noWrap:!0}),this.scope.barchartOpenedNonParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartOpenedNonParticipants",params:{count:this.scope.viewedOnlyCount},noWrap:!0}),this.scope.barchartParticipants=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.barchartParticipants",params:{count:i},noWrap:!0}),this.scope.percentParticipatedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentParticipated",params:{percent:this.bbLocalize.formatPercentageSync(e/100,this.scope)},noWrap:!0}),this.scope.percentOpenedCaption=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.percentOpened",params:{percent:this.bbLocalize.formatPercentageSync((t+e)/100,this.scope)},noWrap:!0})}getNonParticipantGroups(){let e=[];return this.scope.nonParticipants.length>0&&i.forEach(this.scope.groups,t=>{let n={id:t.id,name:t.name,nonParticipants:[],total:0,hidden:0};i.forEach(this.scope.nonParticipants,e=>{(e=this.handlePreferredDisplayName(e)).group.id===t.id&&(e.localizedName=this.bbLocalize.formatUsernameSync(e,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),n.nonParticipants.push(e),n.total++)}),n.hidden=n.total>4?n.total-4:0,n.total>0&&e.push(n)}),e}getTopComments(){this.scope.numberOfCommentsToDisplay=s._H()?3:5,this.scope.discussionData.topComments.forEach(e=>{let t={user:this.handlePreferredDisplayName(e.user),message:f.Z.text(e.message),messageId:e.messageId,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topComments.push(t),this.scope.displayTopComments=!0})}getTopParticipants(){this.scope.discussionData.topParticipants.forEach(e=>{let t={user:this.handlePreferredDisplayName(e.user),numComments:e.numComments,numReplies:e.numReplies};t.user.localizedName=this.bbLocalize.formatUsernameSync(e.user,o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.user.avatarData=e.user,this.scope.topParticipants.push(t),this.scope.displayTopParticipants=!0})}getNonParticipants(){let e=[];return this.scope.discussionData.nonParticipants.forEach(t=>{t.avatarData=t,t.localizedName=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),o.ILocaleUsernameFormat.Short,null,{noWrap:!1,noEscape:!0}),t.localizedNameWithoutWrap=this.bbLocalize.formatUsernameSync(this.handlePreferredDisplayName(t),o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0}),t.preferredDisplayName===o.PreferredDisplayName.Both&&(t.otherName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:o.PreferredDisplayName.Other},o.ILocaleUsernameFormat.Brief,null,{noWrap:!0,noEscape:!0}),t.fullName=this.bbLocalize.formatUsernameSync({...t,preferredDisplayName:o.PreferredDisplayName.Given},o.ILocaleUsernameFormat.Short,null,{noWrap:!0,noEscape:!0})),e.push(t)}),e}toggleIndividualNonParticipantDisplay(){r.defer(()=>{let e=i.element("#discussion-insights").find(".non-participant-box").innerWidth()-30,t=2*Math.ceil(((e=e<1118?e:1118)+20)/126);this.scope.displayedNonParticipants=0;for(let e=0;e<18;e++)e<t&&e<this.scope.totalNonParticipants?(this.scope.showNonparticipant[e]=!0,this.scope.displayedNonParticipants++):this.scope.showNonparticipant[e]=!1;this.scope.additionalNonParticipants=this.scope.totalNonParticipants>this.scope.displayedNonParticipants?this.scope.totalNonParticipants-this.scope.displayedNonParticipants:0,this.scope.nonParticipationSummary=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.discussion.insights.nonParticipationSummary",params:{count:this.scope.displayedNonParticipants,total:this.scope.totalNonParticipants},noWrap:!0}),this.setNonParticipantMargin(e)})}setNonParticipantMargin(e){let t=k("li.non-participant"),n=Math.floor(e/126),i=126*n+106;k(t).css("margin-right",n-1>0?20+(e-i-2)/n:20+e-i),k(t[n]).css("margin-right","2px"),2*n+1<=t.length&&k(t[2*n+1]).css("margin-right","2px")}updateNonParticipantView(){let e=this.bbLocalize.getLocale(this.scope);this.scope.nonParticipantsOptions=this.bbLocalize.translateSync({locale:e,key:"components.directives.discussion.insights.nonparticipantsOptions"}),this.scope.numberOfCommentsToDisplay=s._H()?3:5,this.scope.currentPanelWidth=i.element("#discussion-insights").find(".non-participant-box").innerWidth(),this.scope.currentPanelWidth!==this.scope.lastPanelWidth&&(s._H()?this.scope.showLargeNonparticipantPanel=!1:(this.scope.showLargeNonparticipantPanel=!0,this.toggleIndividualNonParticipantDisplay())),this.scope.lastPanelWidth=this.scope.currentPanelWidth}getSafeHtml(e){return this.$sce.trustAsHtml(e)}hasNavScrollbar(){let e=i.element(".group-selector")[0];return!!(e&&e.scrollWidth>e.clientWidth)}goToDiscussion(e){e&&(this.discussion.groupId=e),this.ultraState.search("view","discussions")}goToGrade(e){this.scope.isGradable&&!this.scope.isGroupDiscussion&&this.ultraState.goPeekState("submission-list",{columnId:this.scope.gradingColumn,participantId:e,contentId:this.scope.contentId})}goToMessage(e){this.ultraState.goPeekState(b.BQ.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e})}isFocusedNonparticipant(e){return k(document.activeElement).is(i.element(k("a#non-participant-link-"+e)))}sortNamesAlphabetically(e){let t="";return e.sort((e,t)=>e.givenName+e.familyName<t.givenName+t.familyName?-1:1).forEach(e=>{t+=e.id+","}),t.slice(0,-1)}goToMessageAll(){let e=this.sortNamesAlphabetically(this.scope.nonParticipants);this.ultraState.goPeekState(b.BQ.COURSE_MESSAGE,{courseId:this.scope.courseId,recipientIds:e,conversationPerRecipient:!0})}isPreferedNameBoth(e){return e.preferredDisplayName===o.PreferredDisplayName.Both}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({otherNameAsDisplayNameSystemPreference:w.Ys.systemPreference.getSystemPreferenceByKey(e,A.N0)}),e=>({loadOtherNameAsDisplayNameSystemPreference:t=>e(w.Nwg.systemPreference.loadSystemPreference(t))}))(this);this.scope.$on("$destroy",e)}handlePreferredDisplayName(e){var t;return e&&(null===(t=this.otherNameAsDisplayNameSystemPreference)||void 0===t?void 0:t.value)&&(e.preferredDisplayName="Y"===this.otherNameAsDisplayNameSystemPreference.value?e.preferredDisplayName:void 0),e}constructor(e,t,n,i,s,o,a,l,c,d,u){this.$window=e,this.$sce=t,this.scope=n,this.element=i,this.$stateParams=s,this.$ngRedux=o,this.bbLocalize=a,this.telemetry=l,this.discussion=c,this.ultraState=d,this.courseModel=u,this.updateDfiPanel=e=>{let t=null==e?void 0:e.groupId;if(t===this.scope.currentGroupId)return;let n=null==e?void 0:e.name;t&&t!==p.Qx?(this.discussion.groupId=t,this.scope.currentGroupId=t,this.scope.currentGroupName=n,this.createDfiReport(this.scope.courseId,this.scope.contentId,t),this.updateNonParticipantView()):(this.discussion.groupId=p.Qx,this.scope.currentGroupId=p.Qx,this.scope.currentGroupName=void 0,this.createDfiReport(this.scope.courseId,this.scope.contentId))},n.isLoaded=!1,n.courseId=n.content().courseId,n.contentId=n.content().id,n.isGroupDiscussion=n.content().isGroupContent,this.subscribeToReduxChanges(),this.loadOtherNameAsDisplayNameSystemPreference({key:A.N0}),this.ultraState.params.disGroupId&&this.ultraState.params.disGroupId!==p.Qx?this.createDfiReport(n.courseId,n.contentId,this.ultraState.params.disGroupId):this.createDfiReport(n.courseId,n.contentId),C.Z.OnWindow("resize",r.debounce(()=>{(this.scope.displayNonParticipants||this.scope.displayNonParticipantGroup)&&(this.updateNonParticipantView(),this.scope.$apply())},150),n),this.notifyMobileApp(),this.scope.$on("refresh-student-activity",()=>{this.updateDfiPanel(this.discussion.selectedGroup)}),this.scope.$on("group-change",()=>{this.updateDfiPanel(this.discussion.selectedGroup)})}}P.$inject=["$window","$sce","scope","element","$stateParams","$ngRedux",o.serviceName,m.HV,p.HV,u.HV,g.N7.H];class D{constructor(e){this.$injector=e,this.restrict="EA",this.template=E,this.scope={content:"&"},this.link=(e,t,n)=>{e.discussionInsights=this.$injector.instantiate(P,{scope:e,element:t,attrs:n})}}}D.$inject=["$injector"],i.module(T,[a.e1,l.e1,c.e1,S,d.e1,m.e1,h.e1,u.e1]).directive("bbDiscussionInsights",["$injector",e=>e.instantiate(D)])},383456:function(e,t,n){"use strict";n.d(t,{e1:function(){return o}}),n(11908);var i=n(464027),r=n(480489),s=n(334136);let o="ultra.directives.telemetry.panel.header";class a{dataLoaded(){this.timeout.cancel(this.spinnerTimeout),this.showSpinner=!1}constructor(e,t){this.scope=e,this.timeout=t,this.showSpinner=!1,this.spinnerTimeout=this.timeout(()=>{this.showSpinner=!0},this.scope,a.WAIT_TIME_TO_SHOW_SPINNER),this.scope.$watch("::panelDataLoaded()",e=>{e&&this.dataLoaded()})}}a.$inject=["scope",r.H],a.WAIT_TIME_TO_SHOW_SPINNER=1e3;class l{constructor(e){this.$injector=e,this.restrict="E",this.template=s,this.transclude=!0,this.scope={course:"&",panelDataLoaded:"&",titleKey:"@?",title:"@?",buttonOneIcon:"@",buttonOneCallback:"&",buttonOneAriaLabel:"@",buttonOneTitle:"@",buttonTwoIcon:"@",buttonTwoCallback:"&",buttonTwoAriaLabel:"@",buttonTwoTitle:"@"},this.link=e=>{e.telemetryPanelHeader=this.$injector.instantiate(a,{scope:e})}}}l.$inject=["$injector"],i.module(o,[]).directive("bbTelemetryPanelHeader",["$injector",e=>e.instantiate(l)])},848330:function(e,t,n){"use strict";n.d(t,{e1:function(){return p}});var i=n(202784),r=n(928316),s=n(88818),o=n(728042),a=n(302032),l=n(174897),c=n(676954),d=n(847969);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.components.directives.timePicker",m=angular.module(p,[c.moduleName]);!function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);s>3&&o&&Object.defineProperty(t,n,o)}([(0,o.w)({module:m,componentName:"bbTimePicker",bindings:{analyticsId:"@",errorFormatMessage:"@?",errorEmptyMessage:"@?",disabled:"<?",readonly:"<?",name:"@?",onViewValueCleared:"<?",placeholder:"@?",invalidValidationKey:"@?"},require:{ngModel:"ngModel"}}),u(0,(0,a.tB)("$scope")),u(1,(0,a.tB)("$element")),u(2,(0,a.tB)("$timeout")),u(3,(0,a.tB)(c.serviceName))],class{$postLink(){this.render()}$onChanges(){this.render()}$onDestroy(){r.unmountComponentAtNode(this.$element[0])}$onInit(){this.ngModel.$render=()=>this.render()}constructor(e,t,n,o){this.$scope=e,this.$element=t,this.$timeout=n,this.localizeService=o,this.isValid=!0,this.onChange=(e,t)=>{t?(this.onViewValueCleared&&this.onViewValueCleared(this.ngModel.$name,this.ngModel.$isEmpty(e)),this.ngModel.$setViewValue(e),this.render()):this.ngModel.$setPristine()},this.onValidate=e=>{this.isValid=e,this.invalidValidationKey&&this.$timeout(()=>this.ngModel.$setValidity(this.invalidValidationKey,e)),this.render()},this.render=()=>{let{analyticsId:e,errorEmptyMessage:t,disabled:n,readonly:o,placeholder:a,ngModel:c}=this,u={onDateTimeChanging(){},onChangeValue:e=>this.onChange(e,e!==c.$viewValue),analyticsId:e,value:c.$viewValue,onValidateCallback:this.onValidate,isValueValid:this.isValid,errorFormatMessage:this.errorFormatMessage,errorEmptyMessage:t,disabled:n,readonly:o,placeholder:a,ariaLabel:this.$element.attr("aria-label")},{locale:p,babelfishInstance:m,babelfishFormatter:h,isRtl:g}=this.localizeService.getReactBabelfishParams(this.$scope);r.render(i.createElement(l.g,{babelfishFormatInstance:h,babelfishInstance:m,locale:p,isRtl:g},i.createElement(d.AnalyticsJssThemeProvider,{isRtl:this.localizeService.isRTL(this.$scope)},i.createElement(s.jII,u))),this.$element[0])}}})},644656:function(e,t,n){"use strict";n.d(t,{B:function(){return p},e1:function(){return u}});var i=n(276635),r=n(464027),s=n(676954),o=n(480489),a=n(610761),l=n(183477),c=n(385847),d=n(625506);let u="ultra.components.directives.tooltip.complexTooltip";function p(e=""){return'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}class m extends l.u{showTooltip(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(super.getTooltip()),this.tooltipCreated=!1,this.scopeChanged=!1),super.showTooltip()}addTooltipContent(e){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.tooltipScope.$apply(),e.on("keydown",e=>{e.which===c.hY?(this.element.focus(),this.hideTooltip()):e.which!==c.Mf||e.shiftKey?e.which===c.Mf&&e.shiftKey&&r.element(e.target).closest(".tooltip-first-tabbable").length>0&&(this.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):r.element(e.target).closest(".tooltip-last-tabbable").length>0&&(this.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())}),e.append(d('<div class="'+m.TOOLTIP_CONTENT_CLASS+'"></div>').append(this.content))}updateTooltipContent(e){this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),e.find("."+m.TOOLTIP_CONTENT_CLASS).empty().append(this.content)}addTooltipStyles(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")}addTooltipEvents(e){e.on("mouseleave",e=>{this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip()}),e.on("mouseover",e=>{this.timeout&&this.timeoutService.cancel(this.timeout)}),e.on("click",e=>{e.stopPropagation()})}postShowTooltip(){r.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService(()=>{this.getTooltip().find(this.attrs.tooltipFocusSelector).eq(0).focus()},this.scope,120)}constructor(e,t,n,s,o,a,l){super(e,t,n,o,a,l),this.scope=e,this.element=t,this.attrs=n,this.$compile=s,this.localizeService=o,this.timeoutService=a,this.windowSizeService=l,this.scopeChanged=!1;let c=this.scope.$watch("tooltipScope()",e=>{e&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),c())}),d=this.scope.$watch("tooltipScope().items",(e,t)=>{e&&t&&i.difference(e,t).length&&(this.tooltipScope=this.scope.tooltipScope(),this.content=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope),this.scopeChanged=!0,this.tooltipScope.$parent.$on("$destroy",()=>{this.tooltipScope.$destroy()}),(r.isUndefined(this.scope.tooltipAutoUpdate)||"false"===this.scope.tooltipAutoUpdate)&&d())})}}m.$inject=["scope","element","attrs","$compile",s.serviceName,o.H,a.HV],m.TOOLTIP_CONTENT_CLASS="complex-tooltip-content";class h{constructor(e){this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=(e,t,n)=>{e.complexTooltip=this.$injector.instantiate(m,{scope:e,element:t,attrs:n})}}}h.$inject=["$injector"],r.module(u,[s.moduleName,o.e,l.e1,a.e1]).directive("bbComplexTooltip",["$injector",e=>e.instantiate(h)])},183477:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},u:function(){return h}}),n(356328);var i=n(906277),r=n(276635),s=n(625506),o=n(464027),a=n(676954),l=n(480489),c=n(610761),d=n(817426),u=n(385847),p=n(610624);let m="ultra.components.directives.tooltip";class h{isTooltipVisible(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")}cancelTimeout(){this.timeout&&this.timeoutService.cancel(this.timeout)}showTooltip(){if(this.content){if(!this.tooltipCreated&&(this.addTooltipToDom(),!this.attrs.tooltipInitImmediate)){this.timeoutService(()=>{this.showTooltip()},this.scope,100);return}this.getTriggerElement().attr("title",""),(o.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===o.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())}}hideTooltip(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})}hideAllTooltips(){s("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})}addTooltipToDom(){let e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent,t="true"===this.attrs.tooltipDarkTheme,n=(0,i.Z)("enhanced-tooltip","tooltip-max-width",{"tooltip-center-content":e,"tooltip-dark-theme":t},this.attrs.tooltipClassNames),r=s(`<span class="${n}" aria-hidden="true" role="tooltip" id="${this.controlId}">${this.getPipHtml()}</span>`);this.addTooltipStyles(r),this.addTooltipContent(r),this.addTooltipEvents(r),this.addTooltipClose(r),this.$body.append(r),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0}getPipHtml(){return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip"></span>'}getPipPadding(){return"true"===this.attrs.tooltipDisablePip?0:13}getTriggerElement(){return this.element}getTooltip(){if(!this.tooltip){let e=this.$body.find(`#${this.controlId}`);this.tooltip=e.length>0?e:null}return this.tooltip}updateTooltip(){if(this.tooltipCreated){let e=this.getTooltipPip()||"";this.getTooltip().html("").append(e).append(document.createTextNode(this.content))}}getTooltipPip(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip}positionTooltip(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);let e=this.getTriggerElement().offset().left,t=e+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+h.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-h.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+h.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-h.TOOLTIP_PIP_PADDING,e+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+h.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-h.TOOLTIP_PIP_PADDING,e-this.getTooltip().outerWidth()-this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)}applyPosition(e,t,n){let i=this.adjustLeftPercentage(n),r=this.ensureTopInBounds(t);e.css({top:r||"auto",left:i||"auto"})}ensureTopInBounds(e){let t=e+this.getTooltip().outerHeight();if(this.getWindowHeight()-t<h.TOOLTIP_VIEWPORT_EDGE_PADDING?e=this.getWindowHeight()-this.getTooltip().outerHeight()-h.TOOLTIP_VIEWPORT_EDGE_PADDING:e<h.TOOLTIP_VIEWPORT_EDGE_PADDING&&(e=h.TOOLTIP_VIEWPORT_EDGE_PADDING),o.isDefined(this.attrs.tooltipTopAdjustPercent)){let t=this.getTriggerElement().outerHeight()/100*parseInt(this.attrs.tooltipTopAdjustPercent,10);e+=t}return e}adjustLeftPercentage(e){let t=e;return o.isDefined(this.attrs.tooltipLeftAdjustPercent)&&(t+=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10)),t}checkPositionInBoundary(e){let t=this.tooltipPosition.split("-");("bottom"===t[0]||"top"===t[0])&&(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")}getWindowWidth(){return s(window).width()}getWindowHeight(){return s(window).height()}addTooltipClose(e){let t=e.find(".close-icon");t.length>0&&t.on("click",()=>{this.hideTooltip()})}addTooltipStyles(e){}addTooltipContent(e){this.content=this.getTriggerElement().attr("title"),e.append(document.createTextNode(this.content))}addTooltipEvents(e){}postShowTooltip(){}constructor(e,t,n,i,r,o){this.scope=e,this.element=t,this.attrs=n,this.localizeService=i,this.timeoutService=r,this.windowSizeService=o,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,h.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||`tooltip-${p.d()}`,this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=s("body"),this.attrs.$observe("title",e=>{e&&(this.content=e,this.updateTooltip())}),this.scope.$on("$destroy",()=>{this.getTooltip()&&this.getTooltip().remove(),this.$body=null,this.tooltip=null,this.pip=null,h.destroyTooltipEvents()}),"true"!==this.attrs.tooltipDisableOnMouseLeave&&t.on("mouseleave",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(this.timeoutMS>0?this.timeout=this.timeoutService(()=>{this.hideTooltip()},this.scope,this.timeoutMS):this.hideTooltip())}),"true"!==this.attrs.tooltipDisableOnMouseOver&&t.on("mouseover",()=>{(this.windowSizeService.isLargeBreakpoint()||"true"===this.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&this.showTooltip()}),"true"!==this.attrs.tooltipDisableOnFocus&&(t.on("focus",()=>{s("body").hasClass("hide-focus-outline")||this.showTooltip()}),t.on("blur",()=>{this.hideTooltip()})),t.on("click",e=>{if(!s("body").hasClass("hide-focus-outline")){"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip(),e.stopPropagation();return}let t=this.windowSizeService.isSmallBreakpoint(),n=this.windowSizeService.isMediumBreakpoint();if("true"===this.attrs.tooltipOpenOnActivation||t||n){if("true"===this.attrs.tooltipDisableOnMediumDownBreakpoint&&(n||t))return;this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation())}else this.hideTooltip()}),t.on("keydown",e=>{e.which===u.hY&&this.isTooltipVisible()?(this.hideTooltip(),e.stopPropagation()):(e.which===u.L_||e.which===u.K5)&&("true"===this.attrs.tooltipOpenOnActivation?this.isTooltipVisible()?this.hideTooltip():(this.showTooltip(),e.stopPropagation()):"true"===this.attrs.tooltipHideOnActivation&&this.hideTooltip())})}}h.$inject=["scope","element","attrs",a.serviceName,l.H,c.HV],h.TOOLTIP_PIP_PADDING=20,h.TOOLTIP_VIEWPORT_EDGE_PADDING=20,h.ariaHideAllTooltips=r.throttle(()=>{s("body").find(".enhanced-tooltip").attr("aria-hidden","true")},500),h.instanceCount=0,h.initEnhancedTooltipEvents=()=>{h.instanceCount>0||(h.instanceCount+=1,document.addEventListener("scroll",h.ariaHideAllTooltips,!0),s(window).resize(h.ariaHideAllTooltips),s("body").click(h.ariaHideAllTooltips))},h.destroyTooltipEvents=()=>{h.instanceCount<=0||(h.instanceCount-=1,0===h.instanceCount&&(document.removeEventListener("scroll",h.ariaHideAllTooltips),s(window).off("resize",h.ariaHideAllTooltips),s("body").off("click",h.ariaHideAllTooltips),h.ariaHideAllTooltips.flush()))};class g{static ensureEvents(){g.eventHandlers||(g.eventHandlers={click:e,blur:e,keyup:function(t){s.Event(t).keyCode===u.hY&&e()}},Object.keys(g.eventHandlers).forEach(e=>{document.addEventListener(e,g.eventHandlers[e],!0)}));function e(){o.element("span.tooltip:visible").hide(),o.element(".button-with-active-tooltip").removeClass("open")}}static unregisterEvents(){Object.keys(g.eventHandlers).forEach(e=>{document.removeEventListener(e,g.eventHandlers[e],!0)}),g.eventHandlers=null}constructor(e){this.$injector=e,this.restrict="A",this.scope={},this.link=(e,t,n)=>{(0,d.F8)(n.enhancedTooltip)?e.tooltip=this.$injector.instantiate(h,{scope:e,element:t,attrs:n}):(g.instanceCount++,g.ensureEvents(),t.one("mouseover",e=>{let t=s(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))}),e.$on("$destroy",()=>{g.instanceCount--,0===g.instanceCount&&g.unregisterEvents(),t.foundation("tooltip","off")}))}}}g.instanceCount=0,g.eventHandlers=null,g.$inject=["$injector"],o.module(m,[a.moduleName,l.e,c.e1]).directive("bbTooltip",["$injector",e=>e.instantiate(g)])},437974:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(676954);let s="ultra.components.directives.translateAttrsDirective",o="bbTranslateAttrs",a="translateAttrsValues";class l{updateAttrs(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))}isValuesStringDefined(){return null!=this.getOrigValuesString()}isOnetimeBind(e){return 0===e.indexOf("::")}translate(){let e={},t=this.bbLocalize.getLocale(this.scope);i.forEach(this.currentAttrs,(n,i)=>{e[i]=this.bbLocalize.translate({locale:t,key:n,params:this.currentValues,noWrap:!0,noEscape:!0})}),this.$q.all(e).then(e=>{Object.keys(e).forEach(t=>{this.attrs.$set(t,e[t],!0,t)})})}constructor(e,t,n,i,r,s){this.$q=e,this.bbLocalize=t,this.scope=n,this.element=i,this.attrs=r,this.origAttrs=s,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=()=>this.origAttrs[o],this.getOrigValuesString=()=>this.origAttrs[a],this.getAttrsString=()=>this.attrs[o],this.getValuesString=()=>this.attrs[a],this.updateValues=()=>Object.assign(this.currentValues,this.scope.$eval(this.getValuesString()));let l=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),l=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),l=!1);let c=n.$root.$on("$translateChangeSuccess",this.translate.bind(this));n.$on("$destroy",c),l&&this.translate()}}class c{constructor(e,t){this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=(e,t)=>(t[o],(e,n,i)=>new l(this.$q,this.bbLocalize,e,n,i,t))}}c.$inject=["$q",r.serviceName],i.module(s,[r.moduleName]).directive(o,["$injector",e=>e.instantiate(c)])},835311:function(e,t,n){"use strict";n.d(t,{e1:function(){return s}});var i=n(464027),r=n(676954);let s="ultra.directives.bbTranslate";class o{shouldUnwatch(e){if(0>e.indexOf(this.intSym)&&0>this.rawKey.indexOf(this.intSym)||e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0)return!0}unwatch(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()}onTranslationIdUpdate(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.updateTranslation(e))}onAttrUpdate(e){if(e!==this.bbTranslateAttrValue){if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();let t=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch(()=>t(this.scope),this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)}}updateTranslation(e=this.translationId){e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then(t=>{t===e?this.iElement.text(t):this.iElement.html(t),this.shouldUnwatch(this.bbTranslateAttrValue)&&this.unwatch()},()=>{this.iElement.text(e)}))}constructor(e,t,n,r,s,o,a,l,c){if(this.$parse=e,this.$rootScope=t,this.bbLocalize=n,this.$interpolate=r,this.scope=s,this.iElement=o,this.iAttr=a,this.rawKey=l,this.translateValuesExist=c,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||o.text(),o.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist){let e;a.$observe("translateValues",t=>{if(t){e&&e();let n=this.$parse(t);e=s.$parent.$watch(n.bind(null,s.$parent),e=>{i.extend(this.interpolateParams,e),this.updateTranslation()},!0)}})}let d=this.$rootScope.$on("$translateChangeSuccess",()=>this.updateTranslation());s.$on("$destroy",()=>d())}}o.$inject=["$parse","$rootScope",r.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"];class a{constructor(e){this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=(e,t)=>{let n=t.bbTranslate=(t.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(!n)return;let i=t.translateValues?t.translateValues:void 0;return(e,t,r)=>this.$injector.instantiate(o,{scope:e,iElement:t,iAttr:r,rawKey:n,translateValuesExist:i})}}}a.$inject=["$injector"],i.module(s,[r.moduleName]).directive("bbTranslate",["$injector",e=>e.instantiate(a)])},331777:function(e,t,n){"use strict";let i,r;n.d(t,{e1:function(){return b}});var s=n(464027),o=n(625506),a=n(276635),l=n(817446),c=n(259197),d=n(280903),u=n(555840),p=n(473011),m=n(334890),h=n(596731),g=n(918079),f=n(889450);let b="ultra.directives.user-avatar",v=s.module(b,[u.e1,h.e1]),y=g.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,function(e,...t){let[n,i,r,s]=t[0].split(" ").map(e=>parseInt(e,10));return' viewBox="'+[n-r/2,i-s/2,2*r,2*s].join(" ")+'"'}),S={avatar:{permanentUrl:"data:image/svg+xml;base64,"+l.codec.base64.fromBits(l.codec.utf8String.toBits(y))},lastModifiedAt:"",getInitials:a.noop},C=o('<style id="css-bb-user-avatar"></style>').appendTo("head"),E={},I=function(e){e.forEach(e=>{let t=e.id||e.$pk,n=E[t]=E[t]||{};if(null!=e.lastModifiedAt&&e.lastModifiedAt===n.lastModifiedAt||e.isPlaceHolder)return;n.avatarURL=void 0,n.isAvailable=e.isAvailable,n.lastModifiedAt=e.lastModifiedAt;let i=e.avatar&&"default"!==e.avatar.permanentUrl;if(i){let t=e.avatar.permanentUrl;if(e.avatar.permanentUrl.startsWith("http")){let n=(f.Z.isValidDate(e.lastModifiedAt)?e.lastModifiedAt:new Date).getTime();t=(0,p.Ou)(e.avatar.permanentUrl,"ts",n)}n.avatarURL=t}let r=(e.getInitials||a.noop).apply(e);n.initials=!i&&r?r:void 0}),i()};v.config([h.HV+"Provider",function(e){e.onStyleRefresh(function(e,t){t.isAvailable||(e.selector(`bb-user-avatar.u${t.userId}:after`).rule("display","block"),e.selector(`bb-user-avatar.u${t.userId} > div`).rule("opacity",".3"))})}]).run(["$rootScope",u.EA.HV,function(e,t){i=a.debounce(()=>{let e=new d.h;a.forEach(E,(t,n)=>{let i=e.selector(`bb-user-avatar.u${n}`);t.avatarURL?(i.selector(".image:after").rule("background-image",`url("${t.avatarURL}")`).rule("display","block"),i.selector(".image:before").rule("display","none")):t.initials&&(i.selector(".image").rule("display","none"),i.selector(".initials").rule("display","block"),i.selector(".initials:after").rule("content",`"${t.initials}"`)),!1===t.isAvailable&&e.selector(`bb-user-avatar.u${n}:after`).rule("display","block")});let t=e.build();C.text()!==t&&C.text(t)},200),r=a.once(function(){t.$mixHook("after-feed",function(){I(Array.prototype.concat.call([],this))})})}]).directive("bbUserAvatar",function(){return{restrict:"E",template:m,scope:{user:"=?"},link(e,t){r(),t.addClass("avatar element-image"),e.$watch("user",(e,n)=>{e&&(c.rL4.isAllMembers(e)&&a.extend(e,S),t[0].className=t[0].className.split(/\s+/).filter(e=>!/^u\w+$/.test(e)).join(" "),t.addClass(`u${e.id||e.$pk}`),I([e]))})}}})},375507:function(e,t,n){"use strict";n.d(t,{e1:function(){return b}});var i=n(464027),r=n(579633),s=n(984654),o=n(35302),a=n(676954);let l="ultra.components.directives.react-toolkit.username",c={Class:o.K6,attributes:["subtext"],bindingNames:["user","format","showPronouns","showPronunciation","showAccommodation"],renderLocalized:!0,withProvider:!0,withErrorModalBoundary:!1};i.module(l,[a.moduleName]).component("bbUiUsername",(0,s.G5)(c));var d=n(596731),u=n(555840),p=n(516633),m=n(302032),h=n(44417),g=n(396277);function f(e,t){return function(n,i){t(n,i,e)}}let b="ultra.components.directives.bbUsername";class v{initialize(){this.unbind=this.$scope.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email","user.pronouns","user.pronunciation","user.pronunciationAudio","user.preferredDisplayName","user.otherName"],()=>this.update())}update(){var e;if(!this.$scope.user)return;this.user=(e=this.$scope.user)&&{id:e.id,title:e.title,givenName:e.givenName,familyName:e.familyName,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:(0,g.TZ)(e),pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio,email:e.email,ui:e.ui};let t=this.$scope.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(()=>this.updateDom()):this.updateDom(),(null==this.attributes.autoUpdate||"false"===this.attributes.autoUpdate)&&this.unbind()}isAnonymousUser(e){return(0,p.TF)(e)}cleanUpClassNames(e){return e.split(/\s+/).filter(e=>!/^course_user.+$/.test(e)).join(" ")}updateDom(){let e=this.$scope.user;this.showInlineUsername="true"===this.attributes.showInlineUsername,this.showPronouns="true"===this.attributes.showPronouns,this.showPronunciation="true"===this.attributes.showPronunciation,this.isAnonymousUser(e)&&(e.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"anonymous.postedName"}),e.familyName=""),this.element[0].className=this.cleanUpClassNames(this.element[0].className),e.id&&this.element.addClass("course_user"+e.id);let t=this.bbLocalize.getFormatId(r.ILocaleUsernameFormat,this.attributes.format);this.$scope.format=t;try{this.accessibilityName=this.bbLocalize.formatUsernameSync(e,t,this.$scope,{noWrap:!0,noEscape:!0}),this.textAccommodation=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"cr.components.username.accommodationAriaLabel",noWrap:!0})}catch(e){console.error(e)}}constructor(e,t,n,i){this.$scope=e,this.element=t,this.attributes=n,this.bbLocalize=i,t.addClass("username"),this.initialize()}}v=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([f(0,(0,m.tB)("$scope")),f(1,(0,m.tB)("$element")),f(2,(0,m.tB)("$attrs")),f(3,(0,m.tB)(a.serviceName))],v);class y{constructor(){this.controllerAs="un",this.scope={onUsernameClick:"<",user:"="},this.restrict="AE",this.template=h,this.controller=v}}i.module(b,[a.moduleName,d.e1,u.e1,l]).config([d.HV+"Provider",function(e){e.onStyleRefresh(function(e,t){var n,i;let r=t.permissions,s=null===(i=t.course)||void 0===i?void 0:null===(n=i.memberships)||void 0===n?void 0:n.permissions,o=(null==s?void 0:s.viewDueDateException)||(null==s?void 0:s.viewTimeLimitException),a=(null==r?void 0:r.editDueDateException)||(null==r?void 0:r.editTimeLimitException),l=t.accommodation().hasAccommodation&&(o||a);e.selector(`bb-username.course_user${t.userId}:before`).rule("display",l?"inline-block":"none!important").rule("vertical-align",l?"middle":"none"),l&&e.selector(`bb-username.course_user${t.userId} .username-accommodation-content .username-has-accommodation`).rule("display","inline"),e.selector(`bb-username.course_user${t.userId} bb-ui-username`).rule("width",l?"calc(100% - .75rem)":"100%"),e.selector(`.bb-group-user .highlight .course_user${t.userId}`).rule("overflow",l?"visible":"hidden"),e.selector(`.element-card .element-details .course_user${t.userId}`).rule("display",l?"flex":"inline"),e.selector(`.user-info bb-username.course_user${t.userId}`).rule("display",l?"flex":"block")})}]).directive("bbUsername",["$injector",e=>e.instantiate(y)])},394125:function(e,t,n){"use strict";n.d(t,{Ei:function(){return o},e1:function(){return s}});var i=n(464027),r=n(676954);let s="ultra.directives.validate.date",o="bbValidateDate";class a{constructor(e,t){this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=e=>e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),this.getDateParser=(e,t,n,i)=>s=>{let o;if(i.$isEmpty(s))return i.$setValidity("date",!0),null;try{o=this.bbLocalize.parseDateSync(s,r.ILocaleDateFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("date",!1),i.$modelValue}return i.$setValidity("date",!0),"date"===n.type||(s=this.bbLocalize.formatDateSync(o,r.ILocaleDateFormat.Short,e))===i.$viewValue||(i.$setViewValue(s),t.is(":focus")||i.$render()),o},this.getMinDateValidator=(e,t,n,i)=>t=>{let s=this.$parse(n.min)(e),o=i.$isEmpty(t)||t.getTime()>s.getTime();return o?delete i.$error.minDate:i.$error.minDate={dateMin:this.bbLocalize.formatDateSync(s,r.ILocaleDateFormat.Short)},o},this.getMaxDateValidator=(e,t,n,i)=>t=>{let s=this.$parse(n.max)(e),o=i.$isEmpty(t)||t.getTime()<s.getTime();return o?delete i.$error.maxDate:i.$error.maxDate={dateMax:this.bbLocalize.formatDateSync(s,r.ILocaleDateFormat.Short)},o},this.getDateFormatter=(e,t,n,i)=>()=>{i.$setValidity("date",!0);let t=i.$modelValue;return i.$isEmpty(t)?"":"date"===n.type?this.getISODate(t):this.bbLocalize.formatDateSync(t,r.ILocaleDateFormat.Short,e)},this.link=(e,t,n,i)=>{i.$parsers.push(this.getDateParser(e,t,n,i)),i.$formatters.push(this.getDateFormatter(e,t,n,i)),n.min&&(i.$validators.minDateValidator=this.getMinDateValidator(e,t,n,i)),n.max&&(i.$validators.maxDateValidator=this.getMaxDateValidator(e,t,n,i)),t.on("blur",()=>{i.$render()})}}}a.$inject=["$parse",r.serviceName],i.module(s,[r.moduleName]).directive(o,["$parse",r.serviceName,(e,t)=>new a(e,t)])},956553:function(e,t,n){"use strict";n.d(t,{e1:function(){return d}}),n(481518),n(134059);var i=n(276635),r=n(625506),s=n(464027),o=n(676954),a=n(248171),l=n(480489),c=n(786845);let d="ultra.directives.validationMessages";class u{updateMessages(){this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;let e=[];if(this.form.$submitted){let t=i.filter(this.elements,e=>Object.keys(e.$error).length>0);e=i.map(t,"$label");let n=i.merge.apply(null,i.map(t,"$error"))||{},r=Object.keys(n);r.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},r.forEach(e=>{this.scope.onsubmitErrors[e+"Onsubmit"]=n[e]}),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{let t=document.activeElement,n=i.find(this.elements,{$name:t.name});if(n&&n.$errorImmediate&&Object.keys(n.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=n.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!u.mouseIsDown||this.error||this.immediateUpdate){let n=this.immediateUpdate?this.elements:i.filter(this.elements,e=>(e.$touched||e.$dirty||this.scope.checkWhenInit&&this.scope.checkWhenInit())&&(t.name!==e.$name||this.scope.immediate&&this.scope.immediate())),r=i.filter(n,e=>Object.keys(e.$error).length>0),s=i.merge.apply(null,i.map(r,"$error"))||{};s&&Object.keys(s).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=s,e.push.apply(e,i.map(r,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){let e=i.filter(this.elements,e=>Object.keys(e.$warning).length>0),t=i.merge.apply(null,i.map(e,"$warning"))||{};t&&Object.keys(t).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=t,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,i.compact(e)),!0}readAriaLiveMessage(e,t){this.timeout(()=>{"alert"===t?this.scope.$root.$broadcast(c.i_,e.trim()):this.scope.$root.$broadcast(c.$N,e.trim())},this.scope,0,!1)}constructor(e,t,n,i,r,s){this.$rootScope=e,this.scope=t,this.element=n,this.attrs=i,this.form=r,this.timeout=s,this.error=!1,this.immediateUpdate=!1,this.elements=[],u._$rootScope=e,t.labels=[],u.onDirectiveAdded(),t.$on("$destroy",()=>{u.onDirectiveRemoved()});let o=i.for;if(!o)throw Error("`for` attribute is required.");o.split(",").forEach(e=>{let t=r[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),this.elements.push(t)}),t.$watch(this.updateMessages.bind(this)),t.$watch(()=>document.activeElement,(e,t)=>{e!==t&&this.updateMessages()}),t.$watch(()=>t.showErrors),this.elements&&this.elements.length&&t.$watch(()=>this.elements[0].$invalid,(e,t)=>{e&&e!==t?(this.immediateUpdate=!0,this.updateMessages()):this.immediateUpdate=!1})}}u.mouseIsDown=!1,u._directiveCount=0,u.onDirectiveAdded=()=>{let e=0===u._directiveCount;u._directiveCount++,e&&(u.mouseDownHandler||(u.mouseDownHandler=e=>{let t=r(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{t.is("[type=submit]")||(u.mouseIsDown=!0)})}),u.mouseUpHandler||(u.mouseUpHandler=e=>{let t=r(e.target);(t.parents("ng-form").length||t.parents("form").length)&&u._$rootScope.$apply(()=>{u.mouseIsDown=!1})}),r(document).on("mousedown",u.mouseDownHandler),r(document).on("mouseup",u.mouseUpHandler))},u.onDirectiveRemoved=()=>{let e=u._directiveCount<=1;u._directiveCount--,e&&(r(document).off("mousedown",u.mouseDownHandler),r(document).off("mouseup",u.mouseUpHandler))};class p{constructor(e,t,n){this.bbLocalize=e,this.$rootScope=t,this.timeout=n,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=(e,t,n,i)=>(this.bbLocalize.loadBundle("components/directives/validation-messages"),new u(this.$rootScope,e,t,n,i,this.timeout)),this.template=a}}s.module(d,["ngMessages",o.moduleName]).directive("bbValidationMessages",[o.serviceName,"$rootScope",l.H,(e,t,n)=>new p(e,t,n)]).directive("ngModel",()=>({restrict:"A",require:"ngModel",priority:-9999,link:(e,t,n,i)=>{let r=t[0],s=t.parents().last();if(r.hasAttribute("aria-label"))e.$watch(()=>r.getAttribute("aria-label"),e=>i.$label=e);else if(r.hasAttribute("aria-labelledby")){let t=r.getAttribute("aria-labelledby").split(" ")[0],n=s.find("#"+t)[0];n&&e.$watch(()=>n.textContent,e=>i.$label=e)}else{let t=s.find('label[for="'+r.id+'"]')[0];t&&e.$watch(()=>t.textContent,e=>i.$label=e)}}}))},555840:function(e,t,n){"use strict";n.d(t,{_F:function(){return C},YW:function(){return E},ds:function(){return I},oE:function(){return eF},UQ:function(){return w},YN:function(){return A},Sv:function(){return ez},Os:function(){return L},xd:function(){return N},hU:function(){return $},uZ:function(){return M},SF:function(){return eW},N7:function(){return eY},mH:function(){return T},vk:function(){return P},courseContent:function(){return e2},Bh:function(){return D},lZ:function(){return x},OI:function(){return R},Xs:function(){return e9},XY:function(){return tg},xV:function(){return k},lR:function(){return O},jh:function(){return G},U_:function(){return tL},Gn:function(){return F},Rp:function(){return t_},zn:function(){return tU},uy:function(){return _},o6:function(){return B},Ct:function(){return U},WS:function(){return V},aw:function(){return H},Mj:function(){return q},ov:function(){return j},Ki:function(){return W},Fi:function(){return z},e1:function(){return nK},JK:function(){return K},yc:function(){return ne},g8:function(){return Z},k:function(){return Q},YM:function(){return X},AA:function(){return Y},km:function(){return ee},aW:function(){return J},Ut:function(){return et},sO:function(){return en},vn:function(){return nf},M:function(){return ei},Vw:function(){return er},wg:function(){return es},B5:function(){return eo},oP:function(){return eI},YY:function(){return ea},t4:function(){return el},k8:function(){return ec},tV:function(){return eu},Kx:function(){return ed},Mt:function(){return ep},bU:function(){return em},fW:function(){return eh},xJ:function(){return eg},R9:function(){return ef},_h:function(){return eb},L5:function(){return ev},lo:function(){return ey},S5:function(){return eS},BH:function(){return eC},rS:function(){return eE},mD:function(){return ew},EA:function(){return ti}});var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C={};n.r(C),n.d(C,{H:function(){return eD}});var E={};n.r(E),n.d(E,{H:function(){return eL}});var I={};n.r(I),n.d(I,{H:function(){return e$}});var w={};n.r(w),n.d(w,{H:function(){return eV}});var A={};n.r(A),n.d(A,{H:function(){return ej}});var k={};n.r(k),n.d(k,{H:function(){return eQ}});var T={};n.r(T),n.d(T,{iQ:function(){return h},kF:function(){return m}});var P={};n.r(P),n.d(P,{H:function(){return e4}});var D={};n.r(D),n.d(D,{H:function(){return e6}});var x={};n.r(x),n.d(x,{serviceName:function(){return tu},sortInstructorsMembership:function(){return tc}});var R={};n.r(R),n.d(R,{H:function(){return tp}});var L={};n.r(L),n.d(L,{H:function(){return tE}});var N={};n.r(N),n.d(N,{H:function(){return tT}});var $={};n.r($),n.d($,{H:function(){return tP}});var O={};n.r(O),n.d(O,{H:function(){return tD}});var G={};n.r(G),n.d(G,{H:function(){return tx}});var _={};n.r(_),n.d(_,{HV:function(){return tO}});var M={};n.r(M),n.d(M,{M:function(){return tB.Z}});var B={};n.r(B),n.d(B,{H:function(){return tV}});var F={};n.r(F),n.d(F,{H:function(){return tz}});var U={};n.r(U),n.d(U,{H:function(){return tJ}});var V={};n.r(V),n.d(V,{H:function(){return t2}});var H={};n.r(H),n.d(H,{H:function(){return t4}});var q={};n.r(q),n.d(q,{H:function(){return t6}});var j={};n.r(j),n.d(j,{gM:function(){return f},HV:function(){return t5}});var z={};n.r(z),n.d(z,{H:function(){return t3}});var W={};n.r(W),n.d(W,{H:function(){return t8}});var K={};n.r(K),n.d(K,{H:function(){return t9}});var Z={};n.r(Z),n.d(Z,{H:function(){return nn}});var Q={};n.r(Q),n.d(Q,{H:function(){return ns}});var J={};n.r(J),n.d(J,{H:function(){return no}});var Y={};n.r(Y),n.d(Y,{H:function(){return na}});var X={};n.r(X),n.d(X,{H:function(){return nc}});var ee={};n.r(ee),n.d(ee,{H:function(){return nd}});var et={};n.r(et),n.d(et,{H:function(){return nm}});var en={};n.r(en),n.d(en,{_:function(){return ng},H:function(){return nh}});var ei={};n.r(ei),n.d(ei,{H:function(){return nb}});var er={};n.r(er),n.d(er,{Bq:function(){return y},q0:function(){return v},HV:function(){return nv}});var es={};n.r(es),n.d(es,{H:function(){return ny}});var eo={};n.r(eo),n.d(eo,{H:function(){return nS}});var ea={};n.r(ea),n.d(ea,{H:function(){return nC},A:function(){return nE}});var el={};n.r(el),n.d(el,{H:function(){return nI}});var ec={};n.r(ec),n.d(ec,{H:function(){return nA}});var ed={};n.r(ed),n.d(ed,{H:function(){return nk}});var eu={};n.r(eu),n.d(eu,{H:function(){return nT}});var ep={};n.r(ep),n.d(ep,{H:function(){return nP}});var em={};n.r(em),n.d(em,{H:function(){return nD}});var eh={};n.r(eh),n.d(eh,{H:function(){return nx}});var eg={};n.r(eg),n.d(eg,{H:function(){return nR}});var ef={};n.r(ef),n.d(ef,{H:function(){return nL}});var eb={};n.r(eb),n.d(eb,{H:function(){return nN}});var ev={};n.r(ev),n.d(ev,{H:function(){return n$}});var ey={};n.r(ey),n.d(ey,{H:function(){return nO}});var eS={};n.r(eS),n.d(eS,{H:function(){return nG}});var eC={};n.r(eC),n.d(eC,{Xl:function(){return S},uY:function(){return n_.Z},HV:function(){return nM}});var eE={};n.r(eE),n.d(eE,{H:function(){return nF}});var eI={};n.r(eI),n.d(eI,{H:function(){return nq}});var ew={};n.r(ew),n.d(ew,{H:function(){return nz}});var eA=n(733303);n(407537);var ek=n(658895),eT=n(592246),eP=n(376853);let eD=eT.fS,ex=ek.default.apiBasePath+"/v1";eA.Z.factory(eD,["restmod",eP.xQ,(e,t)=>e.model(ex).mix({$extend:{Model:{getAllyConfig(){return this.single(ex+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then(e=>e.isStatusCode(200)?e:{serviceAvailable:!1,freemiumServiceAvailable:!1})},getAllyToken(e,t){let n=ex+`/courses/${e}`+(t?`/ally/content/${t}/token`:"/ally/token");return this.single(n).$fetch().$asPromise()}}}})]);var eR=n(464027);let eL=eT.CS;eA.Z.factory(eL,()=>{let e=ek.default.telemetryApiBasePath+"/v1/browser/interactions";return{$create(t){eR.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:ek.default.telemetryApiTimeoutMS})}}});let eN=eT.vv;eA.Z.factory(eN,["restmod",e=>e.model().mix({lastRun:{serialize:"date"},getRedirectUrl(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},function(e){this.$unwrap(e.data)}).$asPromise()}})]);let e$=eT.jB;eA.Z.factory(e$,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+`/courses/${n}/assignments/attempts/files/${e}/downloadInfo?is_group=${t}`},function(e){return this.$unwrap(e.data)})}}}})}]);let eO=eT.vp;eA.Z.factory(eO,["restmod",eP.xQ,(e,t)=>e.model()]);let eG=eT.dd;eA.Z.factory(eG,["restmod",eP.xQ,(e,t)=>e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:eT.nM},gradedQuestionAttempts:{hasMany:eT.ou,path:"answers/grades"},questions:{hasMany:eT.yu},ui:{mask:!0,init:()=>({})},exceptions:{hasMany:eT.eE,hooks:{"before-request":function(e){e.url=e.url.replace(ek.default.apiBasePath,ek.default.apiBasePath+"/public")}}},userExceptions:{hasMany:eT.eE,path:"exceptions/users"},groupExceptions:{hasMany:eT.eE,path:"exceptions/groups"}})]);var e_=n(259197);let eM=eT.eE;eA.Z.factory(eM,["restmod","$q",eP.xQ,"$ngRedux",(e,t,n,i)=>e.model().mix({$url(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(ek.default.apiBasePath,ek.default.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$hooks:{"after-request":e=>{if("DELETE"===e.config.method){let t=new URL(e.config.url).pathname.match(/\/courses\/([^\/]*)\/assessments\/([^\/]*)\/exceptions\/users\/([^\/]*)/);if(t){let e=t[1],n=t[2],r=t[3],s=e_.Ys.courseMembership.getCourseMembershipByUserId(i.getState(),e,r),o=e_.Ys.assessment.getAssessmentById(i.getState(),n);i.dispatch(e_.Nwg.exceptionDetails.deleteExceptionDetailByColumnIdAndMembershipIdInStore(o.gradableItemId,s.id))}}}},$extend:{Record:{saveException(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})]),n(140846),(i=p||(p={})).Student="STUDENT",i.InstructorComments="INSTRUCTOR_COMMENTS",i.InstructorNotes="INSTRUCTOR_NOTES";let eB=eT.nM;eA.Z.factory(eB,["restmod",eP.xQ,e=>e.model().mix({grade:{hasOne:eT.ou,path:"grades"}})]);var eF=n(996919);let eU=eT.IL;eA.Z.factory(eU,["restmod",eP.xQ,(e,t)=>e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})]);let eV=eT.cg;eA.Z.factory(eV,["restmod",e=>{let t=ek.default.apiBasePath+"/v1/brands";return e.model(t).mix({$extend:{Model:{getCurrent(){return this.single(t+"/current").$fetch()}}}})}]);var eH=n(473011),eq=n(986709);let ej=eT.XN;eA.Z.factory(ej,["restmod","$q",(e,t)=>{let n=ek.default.apiBasePath+"/v1/calendars";return e.model(n).mix({ui:{mask:!0,init:()=>({})},$extend:{Collection:{sortCalendars(){return this.$action(function(){this.sort(function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===eq.J6F.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===eq.J6F.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1})})}},Model:{getOrRegenerateExportCalendarFeed(e){let n=t.defer();return this.$build().$send({method:e?"POST":"GET",url:eH.uI("/webapps/calendar/calendarFeed/url"),transformResponse:e=>e},function(e){n.resolve(e&&e.data)}),n.promise}}}})}]);var ez=n(477996),eW=n(990136);let eK=eT.Zl;eA.Z.factory(eK,["restmod",e=>e.model().mix({calendarItems:{hasMany:eT.zU},dueDateCalendarItems:{hasMany:eT.SO}})]);let eZ=eT.zU;eA.Z.factory(eZ,["restmod",e=>e.model().mix(ez.HV,{})]);let eQ=eT.Oe;eA.Z.factory(eQ,["restmod",e=>{let t=ek.default.apiBasePath+"/v1/calendars/dueDateCalendarItems";return e.model(t).mix(ez.HV)}]);let eJ=eT.SO;eA.Z.factory(eJ,["restmod",e=>e.model().mix(eQ,{})]);var eY=n(312019);let eX=eT.VI;(r=m||(m={})).CourseRoom="COURSE_ROOM",r.UserRoom="USER_ROOM",(s=h||(h={})).Apollo="APOLLO",s.Gemini="GEMINI",eA.Z.factory(eX,["restmod",eP.xQ,(e,t)=>e.model().mix({$extend:{Record:{getLaunchUrl(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then(e=>ek.default.features.collab?e.$response.data.url:e.$response.data.launchUrl)}}}})]);let e0=eT.LV;eA.Z.factory(e0,["restmod",eP.xQ,(e,t)=>e.model().mix({sessions:{hasMany:eT.VI},$extend:{Record:{getVirtualClassroomSession(){return this.sessions.$search({sessionType:m.CourseRoom}).$asPromise().then(e=>e[0]||null)}}}})]);let e1=eT.ZP;eA.Z.factory(e1,["restmod",eP.xQ,(e,t)=>e.model().mix({sessions:{hasMany:eT.VI},$extend:{Record:{getAllCollabSessions(){return this.sessions.$search({expand:"sessionInstances",startTime:new Date().toISOString()}).$asPromise()},getCourseCollabInfo(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances",startTime:new Date().toISOString()}).$asPromise()},enableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},e=>this.$unwrap(e.data)).$asPromise()},disableCourseRoom(e){return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},e=>this.$unwrap(e.data)).$asPromise()},launchDiscussionSession(e,t){return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},e=>this.$unwrap(e.data)).$asPromise()}}}})]);var e2=n(620507);let e4=eT.Cg;eA.Z.factory(e4,["restmod",eP.xQ,(e,t)=>e.model().mix({})]);let e6=eT.Nj;eA.Z.factory(e6,["restmod",eP.xQ,(e,t)=>e.model().mix({data:{belongsTo:eT.xR},ui:{mask:!0,init:()=>({})},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function({data:e}){e.results.forEach(e=>{let t={id:e.userId,isPlaceHolder:!0};e.data=t})}}})]);let e5=eT.uD;eA.Z.factory(e5,["restmod",eP.xQ,(e,t)=>e.model().mix({counts:{hasOne:eT.Jz},messages:{hasMany:eT.nH},usercounts:{hasMany:eT.Nj},$extend:{Record:{save(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])})}}}})]);let e3=eT.Jz;eA.Z.factory(e3,["restmod",eP.xQ,(e,t)=>e.model()]);let e8=eT.iH;eA.Z.factory(e8,["restmod",eP.xQ,(e,t)=>e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"},expiryDate:{serialize:"date"}})]);var e9=n(644922);let e7=eT.M9;eA.Z.factory(e7,["restmod",eP.xQ,(e,t)=>e.model().mix({contents:{hasMany:eT.nH}})]);let te=eT.t6;eA.Z.factory(te,["restmod",eP.xQ,(e,t)=>e.model()]);var tt=n(276635),tn=n(516633),ti=n(435181);let tr=eT.yB;eA.Z.factory(tr,["restmod",ti.HV,"$http","$q","$ngRedux",(e,t,n,i,r)=>{let s=e.model().mix({courseId:{mask:"CU"},latestMessages:{mask:"U",map:"messages"},messages:{mask:"U",hasMany:eT.$c},participants:{mask:!0,hasMany:eT.xR},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},includesAllMembers:{mask:"U"},newParticipantIds:{mask:"R"},participantsWithoutSender:{mask:!0},participantsWithoutLatestSender:{mask:!0},creatorId:{mask:"CUD"},ui:{mask:!0,init:()=>({})},createConversation(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},function(){return this.$save()})},isCategoryIncluded(e){var t;return!!(null===(t=this.recipientCategory)||void 0===t?void 0:t.some(t=>t===e))},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";let t=i.all([n(tt.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then(e=>{let t=e[0];return delete t.data.participantIds,t});e.cache={get(){return t}},Object.defineProperty(this,"participantIds",{get(){return this.participants.map(e=>e.$pk)},set:tt.noop})}},"after-request":function(e){"POST"===e.config.method&&r.dispatch(e_.Nwg.courseMessageSummary.invalidateCourseMessageSummaries())}}});return s.$extendRecord(function(e,n){if(!Object.prototype.hasOwnProperty.call(e,"latestSender")){let n=null;Object.defineProperty(e,"latestSender",{get(){let e=this.latestMessages[0].senderId;if(null!==n&&n.$pk===e)return n;let i=[()=>this.latestMessages[0].sender,()=>{if(this.participants.$resolved)return this.participants.find(e=>e.id===this.latestMessages[0].senderId)},()=>{if(eP.Id.isValid(this.latestMessages[0].senderId)){let e=t.$new(this.latestMessages[0].senderId);return e.$resolve(),e}let e=tn.s3();return this.latestMessages[0].senderId=e,t.$buildRaw({id:e})}];for(let e=0;e<i.length;e++){let t=i[e]();if(void 0!==t)return n=t,t}}})}return{}}),s}]),(o=g||(g={})).Normal="NORMAL",o.System="SYSTEM";let ts=eT.$c;eA.Z.factory(ts,["restmod",eP.xQ,(e,t)=>e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:eT.xR},ui:{mask:!0,init:()=>({})},isSystemMessage(){return"SYSTEM"===this.type},createReply(e){return this.$decorate({"before-request":t=>{t.params={sendEmailToParticipants:e}}},function(){return this.$save()})}})]);var to=n(645085),ta=n(878218),tl=n(789915);function tc(e){e.sort((e,t)=>e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:ti.Uf(e.user,t.user))}let td=/courses\/(_\d+_\d+)/,tu=eT.YJ;eA.Z.factory(tu,["restmod","$q",eP.xQ,"$rootScope","$injector",(e,t,n,i,r)=>{let s;function o(){return s||(s=r.get("$ngRedux")),s}return e.model().mix({course:{belongsTo:eT.VH,key:"courseId"},user:{belongsTo:eT.xR,key:"userId"},officeHours:{hasMany:eT.jp},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{init:{}},availabilityHasBeenBypassed(){return!!this.bypassCourseAvailabilityUntil},courseIsOpen(){return!this.courseIsPrivate()&&!1===this.course.isClosed},courseIsPrivate(){return"effectiveAvailability"in this.course?!this.course.effectiveAvailability:!this.course.isAvailable},courseIsComplete(){return!this.courseIsPrivate()&&!0===this.course.isClosed},isGuestMembership(){return this.role===eq.TsU.Guest},isStudentMembership(){let e=this.role===eq.TsU.Student;return!!(this.isInStudentPreview&&this.isInStudentPreview())||e},isStudentOrGuestMembership(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership(){let e=this.courseRole&&this.courseRole.isActAsInstructor||this.role===eq.TsU.Instructor;return!(this.isInStudentPreview&&this.isInStudentPreview())&&e},isTeachingAssistantMembership(){return this.role===eq.TsU.TeachingAssistant},isInRoleBucket(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted(){return this.accommodation().dueDate.hasAccommodation},accommodation(){return tl.sE.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=this.toLearnTimeAccommodationType(e.timeLimit))},toLearnTimeAccommodationType(e){if(e.type===eq.rWm.Custom){var t;return null!==(t=e.value)&&void 0!==t?t:eq.rWm.NoAccommodation}return e.type},getCourseColorClass(){return to.bb(this)},$extend:{Collection:{getMembershipCount(e){return this.getCounts(e).then(e=>e.count)},getCounts(e,n="/count"){let i=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+n,params:e},e=>{i.resolve(e.data)},e=>{i.reject(e)}),i.promise},getDetailsCount(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount(){return this.getCounts({membershipAvailable:"true"}).then(e=>e.withAccommodationCount)},batchGetCollections(e){let n=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{n.resolve(e.data)},e=>{n.reject(e)}),n.promise}}},$hooks:{"before-fetch-many":function(e){let t=(td.exec(this.$url())||[])[1];t&&i.$broadcast(`course-${t}-memberships-before-fetch`,e)},"after-fetch-many":function(){var e;this.forEach(e=>{1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&tc(e.course.instructorsMembership)});let t=o(),n=(0,ta.L)(this.$response.data),i=null!==(e=this.$response.config.params)&&void 0!==e?e:{},r=Object.keys(i).filter(e=>void 0!==i[e]&&null!==i[e]).map(e=>`${e}=${i[e]}`).join("&"),s=`${this.$url()}?${r}`,a=(0,e_.RAR)(s);if(a){t.dispatch(e_.Nwg.courseMembership.setCourseMembershipsInStore(a,n));return}let l=(0,e_.qDZ)(s);l&&t.dispatch(e_.Nwg.courseMembership.setUserMembershipsInStore(l,n))},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){var e;if(this.userId=this.userId||(this.user||{$pk:void 0}).$pk,null===(e=this.$response)||void 0===e?void 0:e.data){let e=o(),t=(0,ta.L)(this.$response.data);e.dispatch(e_.Nwg.courseMembership.setMembershipInStore(t))}}}})}]);let tp=eT.Wi;eA.Z.factory(tp,["restmod",eP.xQ,(e,t)=>e.model().mix({$extend:{Record:{getEmailPreviewContent(){return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},e=>this.$unwrap({emailBody:e.data.emailBody})).$asPromise()},getCourseInviteUrl(){return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},e=>this.$unwrap({inviteUrl:e.data.inviteUrl})).$asPromise()}}}})]);let tm=eT.nc;eA.Z.factory(tm,["restmod","DSCacheFactory",eP.xQ,(e,t,n)=>e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference(e){return new th(t,this).getPreference(e)},setPreference(e){return new th(t,this).setPreference(e)},deletePreference(e){return new th(t,this).deletePreference(e)}}}})]);class th{setPreference(e){return this._setCachePreference({key:e.key,value:null!=e.value?e.value.toString():"",visibleToStudents:e.visibleToStudents}).$asPromise().then(t=>{let n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})}_setCachePreference(e){let t=this._getPreferenceCacheForCourse(),n=this._setPreferenceOnBackend(e);return t.put(e.key,n),n}_setPreferenceOnBackend(e){if(e.key.length>247)throw Error("Preference key is too long!");if(e.value.length>255)throw Error("Preference value is too long!");let t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()}getPreference(e){let t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then(t=>{let n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})}_getPreferenceWithDefaultAndCache(e){let t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t}_getPreferenceFromBackend(e){if(e.key.length>247)throw Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>255)throw Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then(t=>{t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)})}_getPreferenceCacheForCourse(){if(!this.courseId)throw Error("No courseId has been provided");let e="course.preference.",t=this.DSCacheFactory.get(e+this.courseId);return null==t&&(t=this.DSCacheFactory.createCache(e+this.courseId,{capacity:100})),t}deletePreference(e){return this._deleteCachePreference(e).$asPromise().then(e=>({key:e.key,value:e.value,visibleToStudents:e.visibleToStudents}))}_deleteCachePreference(e){let t=this._getPreferenceCacheForCourse();return t.get(e)?(t.remove(e),this.preferences.$new(e).$destroy().$allow([404])):this.preferences.$new(e)}constructor(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}}var tg=n(240698);let tf=eT.mH;eA.Z.factory(tf,["restmod",eP.xQ,(e,t)=>e.model().mix(ez.HV,{})]);let tb=(e,t)=>{let n="/learn/api/v1/courses/"+e+"/groupsets";return t&&(n+="/"+t),n},tv=eT.x9;eA.Z.factory(tv,["restmod","$q",eP.xQ,(e,t,n)=>e.model().mix({course:{belongsTo:eT.VH,key:"courseId"},modifiedDate:{serialize:"date"},isAvailable:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:eT.VI,path:"collabultra/sessions"},$extend:{Record:{canDelete(){return!this.permissions||this.permissions.delete},canEdit(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection(e,t){return this.findMany(e,t).$asPromise()},batchUpdate(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},function(e){let t=e.data.map(e=>e.statusCode>=200&&e.statusCode<300?eR.fromJson(e.body):e.body);return this.$unwrap({results:t})}).$asPromise()},getGroupsInGroupSet(e,t,n){let{expand:i,limit:r=1e3}=n;return this.$collection().$send({method:"GET",url:tb(e,t)+"/groups",params:{expand:i,limit:r}},function(e){let t=[];return e.data&&e.data.results&&(t=e.data.results),this.$unwrap({results:t})}).$asPromise()}}}})]);let ty=eT.QA;eA.Z.factory(ty,["restmod",eY.H,(e,t)=>e.model().mix({groupAttempts:{hasMany:eT.br,hooks:{"after-fetch-many":function(){let e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];for(let n=0;n<this.length;n++)this[n]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[n]),this[n].attempts&&this[n].attempts.length&&(this[n].attempts=t.$new(e).gradebook.attempts.$decode(this[n].attempts))}}}})]);let tS=eT.$K;eA.Z.factory(tS,["restmod",e=>e.model().mix({$hooks:{"before-request":e=>{e.headers={"Suppress-Session-Timestamp-Update":!0}}}})]);let tC=eT.Xk;eA.Z.factory(tC,["restmod",eP.xQ,(e,t)=>e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})]);let tE=eT.O8;eA.Z.factory(tE,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:eT.$w},me:{hasOne:eT._S},$config:{primaryKey:"name"}})]);let tI=eT._S;eA.Z.factory(tI,["restmod",eP.xQ,(e,t)=>e.model()]);let tw=eT.$w;eA.Z.factory(tw,["restmod",eP.xQ,(e,t)=>e.model().mix({download:{hasOne:eT.gl,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:()=>({})},$url(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},function(e){this.$unwrap(e.data)},function(e){})}}}})]);let tA=eT.gl,tk={};eA.Z.factory(tA,["restmod",eP.xQ,(e,t)=>e.model().mix(tk)]);let tT=eT.QG;eA.Z.factory(tT,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/cloudstorages/tasks").mix(tk)]);let tP=eT.dF;eA.Z.factory(tP,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo(){return this.$send({method:"GET",url:this.$scope.$url()},function(e){this.$unwrap(e.data)}).$allow([403,404]).$asPromise()}}}})]);let tD=eT.cj;eA.Z.factory(tD,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/utilities/entitlements";return e.model(n).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement(){return!!this.uid}}}})}]);let tx=eT.uI;eA.Z.factory(tx,["restmod",e=>e.model(ek.default.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:eT.mH},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){ek.default.features.externalCourse||"GET"!==e.method||e.url!==`${ek.default.apiBasePath}/v1/externalCourses`||(e.cache={get(){return{paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]}}})}}})]);let tR=eT.HB;eA.Z.factory(tR,["restmod",eP.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})}})]);var tL=n(820861),tN=n(454945),t$=n(619034);let tO=eT.br;eA.Z.factory(tO,["restmod",eY.H,eP.xQ,(e,t,n)=>e.model().mix(tL.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor(e){return ek.default.apiBasePath+"/v1/courses/"+tN.j(t,e.$scope)+"/gradebook/groupAttempts/"+e.id}},Record:{getFeedbackToUser(){return this.feedbackToUser},getLastFeedbackAuthor(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt(){return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:this.submittedBy?tt.find(this.attempts,e=>e.userId===this.submittedBy):tt.sortBy(this.attempts,["creationDate"])[0]:null},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost},isAutomaticallySubmitted(){var e,t;return(null===(e=this.attemptReceipt)||void 0===e?void 0:e.submissionType)===eq.qOJ.AutomaticallySubmittedByBrowser||(null===(t=this.attemptReceipt)||void 0===t?void 0:t.submissionType)===eq.qOJ.AutomaticallySubmittedByServer},isLateSubmission(){var e;return null===(e=this.attemptReceipt)||void 0===e?void 0:e.lateSubmission}},Collection:{getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&t$(t.attemptDate).isAfter(e)).length},getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},isFirstAttemptPosted(){var e;return null===(e=this.getFirstAttempt())||void 0===e?void 0:e.isCompleted()},isLastSubmittedAttemptPosted(){var e;return null===(e=this.getLastSubmittedAttempt())||void 0===e?void 0:e.isCompleted()},getAttemptIndexById(e){return this.findIndex(t=>t.id===e)},getAttemptById(e){return tt.find(this,t=>t.id===e)},getFirstAttempt(){return this.length?this[0]:void 0},getLastSubmittedAttempt(){return this.length?this[this.length-1]:void 0}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade),function(e){let t=e.toolAttemptDetail,n=e.attempts;if(!t||!n)return;let i=Object.keys(t)[0];i&&n.forEach(e=>{if(e.toolAttemptDetail)return;let n=e.id,r=tt.cloneDeep(t);if(!r[i])return;e.toolAttemptDetail=r;let s=e.toolAttemptDetail[i].questionAttempts;s&&s.forEach(e=>{e.attemptId=n})})}(this)}}})]);let tG=eT.NC;eA.Z.factory(tG,["restmod",eP.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})]);var t_=n(124854),tM=n(610624),tB=n(374716);let tF=eT.kI;eA.Z.factory(tF,["$ngRedux","restmod",eP.xQ,eY.H,(e,t,n,i)=>t.model().mix({$hooks:{ui:{mask:!0,init:()=>({updateTimestamp:0})},"after-feed":function(){var t,n,i,r;this.calculateDerivedSummaries();let s=null!==(r=null===(i=this.$response)||void 0===i?void 0:null===(n=i.config)||void 0===n?void 0:null===(t=n.params)||void 0===t?void 0:t.allStudents)&&void 0!==r&&r;e.dispatch(e_.Nwg.columnSummary.setColumnSummaryInStore({columnSummary:this.$wrap(),columnSummaryType:s?e_.WYE.Default:e_.WYE.MyStudents}))}},$extend:{Record:{calculateDerivedSummaries(){this.numNeedsGrading=eP.yA(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=eP.yA(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded-this.numUnavailableStudents,this.numSubmissionGradedNeedsPosting=eP.yA(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},isRestricted(){return this.restricted},getStatus(){return this.isRestricted()?tB.Z.Restricted:this.numNeedsGrading>0?tB.Z.NeedsGrading:this.totalNumberOfGradesToPost()>0?tB.Z.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?tB.Z.AllPosted:0===this.numSubmissionsTotal?tB.Z.NothingToGrade:0===this.numNeedsGrading?tB.Z.AllGraded:void 0},isAllGradedAndPosted(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey(){return tM.d()},unpack(e,t){return tt.forOwn(e,(e,t,n)=>{tt.startsWith(t,"$")||"ui"===t||(n[t]=null)}),eP.SY(e,t)}},Collection:{expandingColumns(e,t){let n={};return this.$collection().$on("after-fetch-many",i=>{n=i.data.results.reduce((e,t)=>(e[t.columnId]=t,e),n),e.forEach(e=>{e.id in n?e.summary.$unwrap(n[e.id]):t&&e.summary.$unwrap(t)})})}}}})]);var tU=n(536169);let tV=eT.im;eA.Z.factory(tV,["restmod",eP.xQ,(e,t)=>e.model().mix({ui:{mask:!0,init:()=>({})},$extend:{Record:{getPossiblePoints(){if(this.scaleType===eq.aQo.Score)throw Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})]);var tH=n(669533),tq=n(51914),tj=n(889450);let tz=eT.gw;eA.Z.factory(tz,["restmod",eP.xQ,"$injector","$ngRedux",(e,t,n,i)=>e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",tt.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),tt.isString(e.params.gradeIds)&&(e.params.gradeIds=e.params.gradeIds.split(",")),tt.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,gradeIds:e.params.gradeIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.gradeIds,delete e.params.columnIds},"after-fetch":function(e){let t=n.get(eY.H),r=e.config.params.courseId,s=[],o=this.bulkViewUsers.filter(e=>{var t;return null===(t=e.grades)||void 0===t?void 0:t.length}).flatMap(e=>e.grades).filter(e=>e.submissionResults).reduce((e,t)=>{var n;return{...e,[t.columnId]:[...null!==(n=e[t.columnId])&&void 0!==n?n:[],t.submissionResults]}},{});Object.keys(o).length&&Object.keys(o).forEach(e=>{i.dispatch(e_.Nwg.submissionResults.setAverageSubmissionResultsByColumnId(o[e],r,e))}),this.bulkViewUsers.forEach(e=>{if(e.exceptions&&e.exceptions.forEach(e=>{let t={...e,effectiveDueDate:e.effectiveDueDate?tj.Z.parseStringToDate(e.effectiveDueDate):null,fixedDueDate:e.fixedDueDate?tj.Z.parseStringToDate(e.fixedDueDate):null};s.push(t)}),e.grades){let n=e.grades.map(e=>{var t;let n=null===(t=e.attempts)||void 0===t?void 0:t.find(t=>new Date(t.attemptDate).getTime()===new Date(e.lastAttemptDate).getTime());return{...e.grade,lastAttemptId:null==n?void 0:n.id}});i.dispatch(e_.Nwg.gradebookGrade.setGradesInStore(n)),e.grades.forEach(e=>{let n=e.grade;e.grade=t.$new(r).gradebook.columns.$new(e.columnId).grades.$buildRaw(n),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach(i=>{let s=t.$new(r).gradebook.columns.$new(e.columnId).grades.$new(n.id).attempts.$buildRaw(i);e.grade.attempts.$add(s)}),e.grade.ui.attempt=(0,tq.w)(e.grade.attempts,e.grade,e.grade.column)),e.grade.permissions=this.permissions,e.submissionResults&&e.submissionResults.results[tH.P]&&(e.originalityProcessed=e.submissionResults.results[tH.P].originalityProcessed,e.originalityScore=e.submissionResults.results[tH.P].originalityScore)})}}),s&&s.length>0&&i.dispatch(e_.Nwg.exceptionDetails.setExceptionDetailInStore(r,s))}}})]);var tW=n(78029);let tK=eT.P7;class tZ{static fromValue(e){return tZ[e]}}tZ.ALL={resetShowComments:()=>!0,getValue:()=>"ALL",validate:e=>!0},tZ.BYCOLUMNS={resetShowComments:()=>!1,getValue:()=>"BYCOLUMNS",validate:e=>e&&!!e.length},tZ.HISTORYLOG={resetShowComments:()=>!0,getValue:()=>"HISTORYLOG",validate:e=>!0};class tQ{static fromValue(e){return tQ[e]}}tQ.MYDEVICE={resetContentCollection:()=>!0,getValue:()=>"MYDEVICE",validate:e=>!0,openUrl:e=>{let t=eH.mg();window.location.href=t+e}},tQ.CONTENTCOLLECTION={resetContentCollection:()=>!1,getValue:()=>"CONTENTCOLLECTION",validate:e=>!!e,openUrl:e=>()=>{}},eA.Z.factory(tK,["restmod",eP.xQ,(e,t)=>e.model().mix({grades:{hasMany:eT.e5},columns:{hasMany:eT.WC},attempts:{hasMany:eT.Sp},categories:{hasMany:eT.NC},performancecodes:{hasMany:eT.Q5},schemas:{hasMany:eT.im},bulkView:{hasOne:eT.gw,path:"grades/bulkView"},settings:{hasOne:eT.SX},groupAttempts:{hasMany:eT.br},summaries:{hasMany:eT.kI},$extend:{Record:{getDownloadUrl(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new tW.v({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:{...e,dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()}},function(e){this.$unwrap(e.data)}).$asPromise()},validateCalculatedFormula(e){if(!e)throw new tW.v({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise()},parseUploadedGradebook(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()},importGradebook(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()}}}})]);let tJ=eT.SX;eA.Z.factory(tJ,["restmod",eP.xQ,(e,t)=>e.model()]);let tY=eT.ou,tX=e=>"results"in e;eA.Z.factory(tY,["restmod","$ngRedux",(e,t)=>e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data),this.questionAttempt.visibleQuestionNumber=this.questionNumber},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",tt.merge(e.data,{questionType:this.questionAttempt.questionType}),this.questionNumber=this.questionAttempt.visibleQuestionNumber},"after-fetch-many":function(e){let{data:n}=e;if(tX(n)&&n.results.length>0){let{questionAttempt:{attemptId:e}}=n.results[0];e&&t.dispatch(e_.Nwg.questionAttemptGrade.setGradedQuestionAttempts(e,n))}this.forEach(e=>{e.permissions=this.permissions})}},$extend:{Collection:{setPostStatusAndGroupAttemptId(e){this.forEach(t=>{t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)})}}},questionAttempt:{ignore:"CU"},ui:{init:()=>({}),mask:!0}})]);let t0=eT.Q5;eA.Z.factory(t0,["restmod","$q",eP.xQ,(e,t,n)=>e.model().mix({})]);let t1=eT.f3;eA.Z.factory(t1,["restmod",eP.xQ,e=>e.model().mix({$extend:{hasAttachments(){return!tt.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some(e=>e.attachments.length))},canShowReportPanel(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results[tH.P])}}})]);let t2=eT.XT;eA.Z.factory(t2,["restmod",e=>{let t=ek.default.apiBasePath+"/v1/calendars/institution/calendarItems";return e.model(t).mix(ez.HV)}]);let t4=eT.Q_;eA.Z.factory(t4,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/roles/institutionRoles";return e.model(n)}]);let t6=eT.a2;eA.Z.factory(t6,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/languages";return e.model(n).mix({})}]);let t5=eT.Dy;(a=f||(f={})).Approved="Approved",a.Excluded="Excluded",a.NeedsApproval="NeedsApproval",(l=b||(b={})).Never="Never",l.SSLOnly="SSLOnly",l.Always="Always",eA.Z.factory(t5,["restmod",e=>{let t=ek.default.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},function(e){return this.$unwrap(e.data)}).$allow([404]).$asPromise()}}}})}]);let t3=eT.Lt;eA.Z.factory(t3,["restmod",eP.xQ,e=>{let t=ek.default.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);let t8=eT.Lv;eA.Z.factory(t8,["restmod",e=>{let t=ek.default.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable(){return eq.y67.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=eH.uI(this.iconUrl)}}})}]);let t9=eT.PF;eA.Z.factory(t9,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/users/me/preferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);let t7=eT.qq;eA.Z.factory(t7,["restmod",eP.xQ,e=>e.model()]);var ne=n(330316);let nt=eT.Si;eA.Z.factory(nt,["restmod",eP.xQ,e=>e.model()]);let nn=eT.lU;eA.Z.factory(nn,["restmod",eP.xQ,e=>e.model().mix({courseSettings:{hasMany:eT.Si},organizationSettings:{hasMany:eT.Si},$url:()=>ek.default.apiBasePath+"/v1/notification/settings"})]);let ni=eT.jp;eA.Z.factory(ni,["restmod",e=>e.model().mix(ez.HV,{})]);var nr=n(845882);let ns=eT.RL;eA.Z.factory(ns,["restmod",e=>{let t=ek.default.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){let t=e=>{eR.isDefined(e.internalPovider)&&eR.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};tt.forEach(this.premierList,t),tt.forEach(this.signatureList,t),tt.forEach(this.otherList,t);let n=e=>!e.internalProvider||nr.a$(e);this.premierList=tt.filter(this.premierList,n),this.signatureList=tt.filter(this.signatureList,n),this.otherList=tt.filter(this.otherList,n)}}})}]);let no=eT.hV;eA.Z.factory(no,["restmod",e=>{let t=ek.default.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},function(e){return this.$unwrap(e.data)},function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})}).$allow(["400-599"]).$asPromise()}}}})}]);let na=eT.jh;eA.Z.factory(na,["restmod",eP.xQ,(e,t)=>{let n=ek.default.partnerCloudBasePath+"/v1/courses";return e.model(n).mix({partnerLinkedCourses:{hasMany:eT.lb,path:"providerBindings"},$extend:{Record:{updateProvisioning(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},function(e){this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);let nl=eT.lb;eA.Z.factory(nl,["restmod",eP.xQ,e=>e.model().mix({tools:{hasOne:eT.Xr,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:(e,t)=>t&&t.bindings}}})]);let nc=eT.iT;eA.Z.factory(nc,["restmod",e=>{let t=ek.default.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]),n(244085);let nd=eT.O2;eA.Z.factory(nd,["restmod",e=>{let t=ek.default.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);let nu=eT.Xr;eA.Z.factory(nu,["restmod",eP.xQ,(e,t)=>e.model().mix({})]);let np=eT.Ei;eA.Z.factory(np,["restmod",e=>e.model().mix(ez.HV,{})]);let nm=eT.Bz;eA.Z.factory(nm,["restmod",eP.xQ,e=>{let t=ek.default.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);let nh=eT.WF,ng="Respondus";eA.Z.factory(nh,["restmod","$ngRedux",(e,t)=>{let n=ek.default.apiBasePath+"/public/v1/proctoring/services";return e.model(n).mix({$hooks:{"after-fetch-many":function(e){let n=e.data.results;t.dispatch(e_.Nwg.proctoringServices.setProctoringServicesInStore(n))}}})}]);var nf=n(826841);let nb=eT.AN;eA.Z.factory(nb,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting(){return eq.hRl.Waiting===this.taskStatus}})]),(c=v||(v={})).Sender="SENDER",c.Receiver="RECEIVER",(d=y||(y={})).Completed="completed",d.InProgress="in_progress",d.Exempt="exempt",d.NeedsGrading="needs_grading";let nv=eT.M;eA.Z.factory(nv,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/streams";return e.model(n).mix({$extend:{Collection:{$fetch:()=>{throw Error("fetch StreamContent collection not supported")},$refresh:()=>{throw Error("refresh StreamContent collection not supported")},$create:()=>{throw Error("create StreamContent collection not supported")}},Record:{$fetch(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},function(){return this.$super()})},$resolve:()=>{throw Error("resolve StreamContent not supported")},$save:()=>{throw Error("save StreamContent not supported")},$destroy:()=>{throw Error("destroy StreamContent not supported")}}},$hooks:{"before-request":e=>{e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);let ny=eT.SR;eA.Z.factory(ny,["restmod",eP.xQ,(e,t)=>e.model().mix({now:{serialize:"date"},$url:()=>ek.default.apiBasePath+"/v1/utilities/systemInfo",$extend:{Record:{getLegacyToolUrl(e){if(e in this.classicUrls)return eH.uI(this.classicUrls[e]);throw Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})]);let nS=eT.xI;eA.Z.factory(nS,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/systemPreferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]),n(612809);let nC=eT.HT;function nE(e){return e/60}eA.Z.factory(nC,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){!function(e){e.data.forEach(e=>e.activity=nE(e.activity))}(this)}}})]);let nI=eT.pV;eA.Z.factory(nI,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},function(e){this.$unwrap(e.data)})}},Record:{containsInvalidData(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);let nw=e=>{let t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},nA=eT.xO;eA.Z.factory(nA,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){!function(e){e.courseActivity.forEach(e=>{e.date=nw(e.date),e.activity=nE(e.activity),e.minScore=nE(e.minScore),e.maxScore=nE(e.maxScore),e.stdDev=nE(e.stdDev)})}(this)}}})]);let nk=eT.hl;eA.Z.factory(nk,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})]);let nT=eT.SN;eA.Z.factory(nT,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"},$hooks:{"after-fetch":function(){!function(e){e.courseGrades.forEach(e=>{e.date=nw(e.date)})}(this)}}})]);let nP=eT.fT;eA.Z.factory(nP,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport(e,t,n){let i=n?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+n:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:i},function(e){this.$unwrap(e.data)})}}}})}]);let nD=eT._;eA.Z.factory(nD,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+n},function(e){this.$unwrap(e.data)})}}},modifyDate:{serialize:"date"}})}]);let nx=eT.BI;eA.Z.factory(nx,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},function(e){this.$unwrap(e.data)})}}}})}]);let nR=eT.b5;eA.Z.factory(nR,["restmod",e=>{let t=ek.default.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},function(e){this.$unwrap(e.data)})}}}})}]);let nL=eT.j7;eA.Z.factory(nL,["restmod",eP.xQ,e=>e.model(ek.default.apiBasePath+"/v1/telemetry/notifications")]);let nN=eT._n;eA.Z.factory(nN,["restmod",eP.xQ,e=>e.model().mix({$config:{primaryKey:"notificationId"},$url(){return ek.default.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})]);let n$=eT.se;eA.Z.factory(n$,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){!function(e){e.studentActivity.forEach(e=>{e.date=nw(e.date),e.activity=nE(e.activity)})}(this)}}})]);let nO=eT.sL;eA.Z.factory(nO,["restmod",e=>e.model().mix({$config:{primaryKey:"courseId"},$url(){return ek.default.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"},$hooks:{"after-fetch":function(){!function(e){e.studentGrades.forEach(e=>{e.date=nw(e.date)})}(this)}}})]);let nG=eT.LD;eA.Z.factory(nG,["restmod",eP.xQ,e=>e.model().mix({$url:()=>ek.default.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"})]);var n_=n(186085);(u=S||(S={})).CurrentTerm="current",u.UpcomingTerm="upcoming";let nM=eT.H;eA.Z.factory(nM,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}})]);var nB=n(817426);let nF=eT.C6,nU="UltraUI.";eA.Z.factory(nF,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/themes";return e.model(n).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav(){return(0,nB.F8)(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav(e){this.ui.usePrimaryColorOnAllBaseNav=(0,nB.F8)(e).toString()},getUsePrimaryColorOnLogoBackground(){return(0,nB.F8)(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground(e){this.ui.usePrimaryColorOnLogoBackground=(0,nB.F8)(e).toString()},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch(){return this.$decorate({"before-request":function(e){e.url=n+`/${this.$pk.themeId}/settings`}},function(){return this.$super()})},$save(){return this.$decorate({"before-request":function(e){this.settings=[],Object.keys(this.ui).forEach(e=>{this.settings.push({key:nU+e,value:this.ui[e]})}),e.url=n+`/${this.$pk.themeId}/settings`,e.data.settings=this.settings}},function(){return this.$super()})}},Model:{getDefault(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){this.settings.forEach(e=>{if(e&&e.key){let t=e.key.replace(nU,"");this.ui[t]=e.value}})}}})}]);let nV=eT.h;eA.Z.factory(nV,["restmod",e=>e.model().mix({$extend:{Collection:{getToolById(e){return tt.find(this,["identifier",e])},isToolAvailable(e){return this.$build().$send({method:"GET",url:`${this.$url()}/${e}`}).$allow([403]).$asPromise().then(e=>{var t;return!!(e.$response.data&&(null===(t=e.$response.data.toolEnabledSetting)||void 0===t?void 0:t.isAvailable))})}}}})]);let nH=eT.p5;eA.Z.factory(nH,["restmod",e=>e.model().mix({isTinCan(){return!!(this.learningStandard&&e2.mE.TINCAN===this.learningStandard)}})]);let nq=eT.Tk;eA.Z.factory(nq,["restmod",eP.xQ,(e,t)=>e.model(ek.default.apiBasePath+"/v1/tools")]);let nj=eT.QW;eA.Z.factory(nj,["restmod",eP.xQ,(e,t)=>e.model().mix({$hooks:{"after-destroy":function(){this.previewing=!1,this.user=null}}})]);let nz=eT.L9;eA.Z.factory(nz,["restmod",eP.xQ,(e,t)=>{let n=ek.default.apiBasePath+"/v1/trial/supportTickets";return e.model(n)}]);let nW=eT._K;eA.Z.factory(nW,["restmod",eP.xQ,(e,t)=>e.model().mix({})]);let nK=eA.Z.name},612809:function(e,t,n){"use strict";n.d(t,{H:function(){return a}}),n(407537);var i=n(658895),r=n(592246),s=n(733303),o=n(376853);let a=r.Cd;s.Z.factory(a,["restmod",o.xQ,(e,t)=>{let n=i.default.apiBasePath+"/v1/announcements";return e.model(n)}])},140846:function(e,t,n){"use strict";n.d(t,{H:function(){return l}}),n(407537);var i=n(592246),r=n(733303),s=n(376853),o=n(4695),a=n(986709);let l=i.yu;r.Z.factory(l,["restmod",s.xQ,e=>e.model().mix({ui:{init:()=>({rendered:!1})},$extend:{Record:{getContentIdForGoalAlignment(){return(0,o.xR)(o.F$.Asi,this.id)},getContentTitleForGoalAlignment(){return this.title},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},isPresentationOnly(){return a.QuestionType.PresentationOnly===this.questionType}},Collection:{getInsertIndex(e){let t=-1,n=e.positionBefore,i=e.positionAfter;return null!=n&&(t="start"===n.toLowerCase()?0:this.indexOfItemById(n)),t<0&&null!=i&&("end"===i.toLowerCase()?t=this.length:(t=this.indexOfItemById(i))>=0&&t++),t},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},477996:function(e,t,n){"use strict";n.d(t,{C8:function(){return i},HV:function(){return m},VY:function(){return g},jZ:function(){return h},ji:function(){return f}}),n(407537);var i,r,s=n(464027),o=n(658895),a=n(889450),l=n(592246),c=n(733303),d=n(351876),u=n(376853),p=n(986709);let m=l.WU;function h(e){return Object.values(p.VRt).find(t=>t.toLowerCase()===e.toLowerCase())}function g(){return Object.values(p.VRt)}function f(e){switch(e){case p.VRt.Sunday:return 0;case p.VRt.Monday:return 1;case p.VRt.Tuesday:return 2;case p.VRt.Wednesday:return 3;case p.VRt.Thursday:return 4;case p.VRt.Friday:return 5;case p.VRt.Saturday:return 6}}(r=i||(i={})).Course="Course",r.External="External",c.Z.factory(m,["restmod","RMUtils",u.xQ,(e,t,n)=>{let i=o.default.apiBasePath+"/v1/calendars/calendarItems";return e.model(i).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:()=>({})},$extend:{isDueItem(){return!!this.dynamicCalendarItemProps},isAllDayEvent(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease(){return!(this.permissions&&this.permissions.edit)&&p.hbA.Restricted===this.visibility},getTruncatedLocation(e){return d.Ne(this.location,e)},Record:{$buildUrl(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey(e){return{itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}},unpack:(e,t)=>{let n=e.$response.config;if(e.$isCollection){if("PUT"===n.method&&Array.isArray(t))return t.map(e=>e.statusCode>=200&&e.statusCode<300?s.fromJson(e.body):e.body);e.paging=t&&t.paging,e.permissions=t&&t.permissions;let i=t&&t.results;return i&&i.forEach(e=>{e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=a.Z.getCurrentTimeZoneId())}),i}let i="POST"===n.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=a.Z.getCurrentTimeZoneId()),i}}}})}])},620507:function(e,t,n){"use strict";n.d(t,{$G:function(){return N},ContentHandler:function(){return d.GQk},e6:function(){return S.e6},eP:function(){return s},mE:function(){return o},lY:function(){return O},HV:function(){return G}}),n(407537);var i,r,s,o,a=n(276635),l=n(464027),c=n(658895),d=n(259197),u=n(986709),p=n(825986),m=n(4695),h=n(523827),g=n(363411),f=n(555840),b=n(592246),v=n(376853),y=n(733303),S=n(12838),C=n(973385),E=n(878218),I=n(921167),w=n(800553),A=n(789423);class k{async createContent(e){let t=e.$save().$then(e=>{e.ui.isUploading=!1,e.isAvailable=!1},e=>{if(507===e.$response.status)return this.$q.reject(e);console.error("An error occurred while creating the content:",e)}).$asPromise();await (0,A.h)(t)}constructor(e){this.$q=e,this.key=p.fz.CreateContentCourseModelOperations}}class T{deleteContentHelper(e){this.broadcastChildrenContentForDelete(e).then(()=>{(0,d.gUR)(e.courseId,e.id).then(t=>{t?e.getSoftLinks().$asPromise().then(t=>{t.length?this.$q.all(t.map(t=>this.CourseModel.$new(e.courseId).contents.$new(t.courseContent).$fetch().$asPromise().then(e=>{this.$rootScope.$broadcast("deleteContent",e,!1)}))).then(()=>{this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)}):this.$rootScope.$broadcast("deleteContent",e)})})}broadcastChildrenContentForDelete(e){return e.isFolder()||e.isLearningModule()?e.getChildren({recursive:!0}).$then(e=>e.filter(e=>!e.isCourseLink()).forEach(e=>this.$rootScope.$broadcast("deleteContent",e,!1))).$asPromise():this.$q.when()}deleteContent(e){f.courseContent.ContentHandler.CourseLink.isEqualTo(e.contentHandler)?e.getLinkContentSource().$then(t=>{var n;let i=null==t?void 0:null===(n=t.contentHandler)||void 0===n?void 0:n.toString();u.DXv.Discussion===i?this.deleteContentHelper(t):this.deleteContentHelper(e)}):this.deleteContentHelper(e)}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.CourseModel=n,this.key=p.fz.DeleteContentCourseModelOperations,this.$q=e,this.$rootScope=t,this.CourseModel=n}}class P{conditionalReleaseAsync(e,t,n,i,r){let s=e.conditionalReleaseAsync(t,n,i,r),o="function"==typeof s.$asPromise?s.$asPromise():s;return(0,A.h)(o)}async save(e,t,n=[]){let i={fields:"id",...n.length>0&&{expand:n.join(",")}},r=e.withParams(i).$save(t).$asPromise();await (0,A.h)(r)}constructor(){this.key=p.fz.ConditionalReleaseCourseModelOperations}}var D=n(688454);class x{refresh(e,t){this.scope.$applyAsync(()=>{this.scope.$broadcast(w.a,e,t)})}constructor(e){this.scope=e,this.key=p.fz.ContentFolderRefresher}}var R=n(817426),L=n(364014);let N="create";(i=s||(s={})).OpenFolder="img-icon-folder-open",i.ClosedFolder="img-icon-folder";let $=e=>{if(l.isUndefined(e)||null==e)return null;let t=e.contentHandler.toString();if(f.courseContent.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){let n=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:n.proctoringDownloadUrl,proctoringServiceHandle:n.proctoringServiceHandle,proctoringServiceVendor:n.proctoringServiceVendor,isSecureBrowserRequiredToTake:n.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:n.isSecureBrowserRequiredToReview,isWebcamRequired:n.isWebcamRequired}}return null};function O(e){if(e)return Object.values(u.uXm).find(t=>t.toLowerCase()===e.toLowerCase())}(r=o||(o={})).AICC="AICC",r.CMI5="CMI5",r.Scorm11="SCORM_11",r.Scorm12="SCORM_12",r.Scorm2004SecondEdition="SCORM_2004_2ND_EDITION",r.Scorm2004ThirdEdition="SCORM_2004_3RD_EDITION",r.Scorm2004Fourth="SCORM_2004_4TH_EDITION",r.TINCAN="TINCAN";let G=b.V1,_=b.VH;y.Z.factory(G,["restmod",v.xQ,"$q","$rootScope","$ngRedux",_,g.HV,(e,t,n,i,r,s,o)=>{(0,p.gM)(new P),(0,p.gM)(new k(n)),(0,p.gM)(new T(n,i,s));let l=!1;o.createWaiter("feature.course.content.inline-render").then(e=>l=e),(0,p.gM)(new D.Y(n)),(0,p.gM)(new x(i));let g=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:()=>({hasData:!1,isDeleted:!1,isOpen:!1})},$extend:{Record:{getDeployedAssessment(){var e;if(!this.contentDetail)return;let t=(0,u.S9c)(null===(e=this.contentHandler)||void 0===e?void 0:e.toString());if(t){let e=this.contentDetail[this.contentHandler.toString()];return e.gradingColumn?e:e[t]}},getAssociatedGradingColumn(e){let t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){let e=this.getDeployedAssessment();if(e)return e.gradingColumn}},getDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl(){let e=this.iconUrl.match("^/.*/(.*)_.*..*$"),t=d.GQk.Unknown;if(e)switch(e[1]){case"assignment":t=d.GQk.UltraAssignment;break;case"discussion":t=d.GQk.Discussion;break;case"file":t=d.GQk.File;break;case"folder":t=d.GQk.Folder;break;case"link":t=d.GQk.ExternalLink;break;case"test":t=d.GQk.TestLink}return t},setupAssessmentContentDetail(e,t){let n=this.contentHandler.toString(),i=(0,u.r9o)(n),r=(0,u.S9c)(n);i&&r&&(this.contentDetail={},this.contentDetail[n]={},this.contentDetail[n][r]={deployedAssessmentType:r,assessment:{title:this.title,type:i},deploymentSettings:{feedbackSettings:{[u.M6Z.AfterSubmission]:{options:[u.lrm.InstructorFeedback,u.lrm.UserAnswers,u.lrm.AllAnswers]},[u.M6Z.AfterAttemptGraded]:{options:[u.lrm.Score]}}},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:(0,L.Z)()},permissions:{modify:!0}})},createScormSettings(e){let t={method:"POST",url:this.$url()+"/scormSettings",data:e},i=n.defer();return this.$scope.$collection().$send(t,e=>{i.resolve(e.data)},e=>{i.reject(e)}),i.promise},conditionalReleaseAsync(e,t,n,i){let s=n?"/rules/"+n+"/conditions":"";i&&(s+=`/${i}`);let o={method:e,url:this.$url()+"/adaptiveReleaseRules"+s};if(t&&"DELETE"!==e&&(o.data=t),"GET"===e)return this.$scope.$collection().$send(o).$then(e=>e.$unwrap(e.$response.data));if("DELETE"===e){let e=d.GQk.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[d.GQk.CourseLink.toString()].linkSourceId:this.id;if(t&&t.type)r.dispatch(d.Nwg.content.deleteAdaptiveReleaseRuleInStore(e,t.type));else{if(this.isForcedSequenceItem())return this.removeNonForcedSequenceReleaseCriteria();r.dispatch(d.Nwg.content.deleteAdaptiveReleaseRulesInStore(e))}}return this.$scope.$collection().$send(o)},removeNonForcedSequenceReleaseCriteria(){let e=this.adaptiveReleaseRules.rules[0],t=d.GQk.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[d.GQk.CourseLink.toString()].linkSourceId:this.id,i=`/rules/${e.id}/conditions/`,s={method:"DELETE"},o=[];return e.criteria.filter(e=>e.type!==u.faN.ForcedSequence).forEach(e=>{r.dispatch(d.Nwg.content.deleteAdaptiveReleaseRuleInStore(t,e.type)),s.url=this.$url()+"/adaptiveReleaseRules"+i+e.id,o.push(this.$scope.$collection().$send(s).$asPromise())}),n.all(o).then(()=>{})},getChildren(e){e=e||{};let i=this,r=[];return this.timeout=n.defer(),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",timeout:this.timeout.promise,params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,contentSearchMode:e.contentSearchMode,title:e.title,"courseLinkPickerParam.contentHandlerGroups":e.courseLinkPickerParamContentHandlerGroups,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then(n=>{if(e.resolveLinks&&n.$response.data.results&&n.$response.data.results.length){let e=t.getDataMixin(n.findMany.bind(n),"linkSourceId","linkSource");if(n.$response.data.results.forEach(e=>{d.GQk.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&r.push({linkId:e.id,linkSourceId:e.contentDetail[d.GQk.CourseLink.toString()].linkSourceId})}),r.length)return e(r,{}).then(()=>n)}}).$then(e=>{e.$unwrap(e.$response.data);let t={};r.forEach(e=>{t[e.linkId]=e.linkSource}),e.forEach(e=>{e.depth=i.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])})})},cancelGetChildren(){this.timeout&&this.timeout.resolve()},getClassicContent(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then(e=>{e.$unwrap(e.$response.data)})},getLinkContentSource(e){if(e=e||{},d.GQk.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail){if(this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer)return this.ui.linkSource;let t=this.ui.linkSource;if(this.ui.linkSource=this.$scope.$new(this.contentDetail[d.GQk.CourseLink.toString()].linkSourceId),this.contentDetail[d.GQk.CourseLink.toString()].linkSourceId){let e=this.ui.linkSource.$fetch({expand:"assignedGroups,selfEnrollmentGroups.group"});return t&&(e.contentHandler=t.contentHandler,e.contentDetail=t.contentDetail),e}return this.ui.linkSource}},getChildrenCount(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then(e=>e.$response.data.count)},hasGradedContentItems(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then(e=>e.$response.data.result)},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment(){return(0,m.xR)(m.F$.Content,this.id)},getContentTitleForGoalAlignment(){return this.title},getSibling(e,t){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then(e=>e.$response.data.id?this.$scope.$buildRaw(e.$response.data):null)},getAttemptCount(){let e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.count)},getTimeLimit(){return this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime(){let e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail(){let e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings,t=null,n=null,i=null,r=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(n=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion,i=this.getDeployedAssessment().deploymentSettings.isDueDateEnforced?new Date(this.getAssociatedGradingColumn().dueDate):null);let s={timerCompletion:t,timeLimitSec:n?60*n:null,softLimitSec:r?60*r:null,dueDate:i};return new C.F1(s)},getSoftLinks(e){e=e||{};let t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},function(e){this.$unwrap(e.data),t.softLinks=this})},update(){let e=this.$scope.$build();for(let t of Object.keys(this))e[t]=this[t];return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit(){return d.AaE.canEdit(this)},canEditPartial(){let e=this.canEdit();if(this.contentDetail){let t=this.getDeployedAssessment();if(t){let n=t.permissions;n&&(e=e||n.modifyDueDate||n.view)}}return!!e},canEditAvailability(){return d.AaE.canEditAvailability(this)},canViewAsInstructor(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete(){return this.permissions&&this.permissions.delete},canUpdateReviewState(){var e;return null===(e=this.permissions)||void 0===e?void 0:e.canUpdateReviewState},hasConversation(){return!!this.attachedForumLink},hasDueDateException(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==u.AVG.Normal},hasGradingColumn(){return!!this.getAssociatedGradingColumn()},hasDueDate(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},hasOnlyForcedSequenceConditionalReleaseCriteria(){return!!(!this.adaptiveReleaseRules&&this.isInForcedSequenceModule())||!!this.isForcedSequenceItem()&&1===this.adaptiveReleaseRules.rules[0].criteria.length},isVisible(){return this.visibility&&u.hbA.Visible===this.visibility},isRestricted(){return this.visibility&&u.hbA.Restricted===this.visibility},isStarted(){return this.state===u.aql.Started},isCompleted(){return this.state===u.aql.Completed},isHidden(){return this.visibility&&u.hbA.Hidden===this.visibility},isVisibleToStudents(){return d.AaE.isVisibleToStudents(this)},isHiddenFromStudents(){return d.AaE.isHiddenFromStudents(this)},isConditionalRelease(){return d.lzL.isConditionalRelease(this)},isForcedSequenceModule(){return this.isLearningModule()&&this.contentDetail[f.courseContent.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule(){return this.inSequence},isForcedSequenceItem(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!a.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence(e){this.contentDetail[f.courseContent.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach(t=>{t.inSequence=e,t.children&&t.children.forEach(t=>t.inSequence=e)}),this.children.forEach(t=>{t.isPartiallyVisible=e,e?a.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):a.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(a.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),i.$broadcast("refresh-conditional-release-rules",t)}))},isConditionalReleaseWithVisibleButNotAccessible(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent(){return this.isConditionalRelease()&&!this.isPartiallyVisible&&!this.hasOnlyForcedSequenceConditionalReleaseCriteria()},isConditionalReleaseLocked(){let e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked(){let e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},containsCriteriaWithGradeColumnId(e){var t,n;return null===(n=this.adaptiveReleaseRules)||void 0===n?void 0:null===(t=n.rules)||void 0===t?void 0:t.some(t=>{var n;return null===(n=t.criteria)||void 0===n?void 0:n.some(t=>t.type===u.faN.Grade&&t.gradeColumnId===e)})},getVisibilityAsStudent(){return this.isVisibleToStudents()?u.hbA.Visible:this.isConditionalRelease()?u.hbA.Restricted:u.hbA.Hidden},getContentDisplay(){return h.dI.create(this,{supportsInlineRender:l})},saveAlignedGoals(e){return e&&(this.alignedGoals=e.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().alignedGoals=this.alignedGoals)})},saveAssignedGroups(e=!1){let t=this.getDeployedAssessment(),n=this.contentHandler.toString(),i=(0,u.S9c)(n),r={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},s=!e&&t&&t.deploymentSettings&&t.deploymentSettings.id&&1===t.deploymentSettings.attemptCount;if(s){let e={id:t.deploymentSettings.id,attemptCount:t.deploymentSettings.attemptCount,feedbackSettings:t.deploymentSettings.feedbackSettings};r.contentDetail={[n]:{[i]:{deployedAssessmentType:i,deploymentSettings:e}}}}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:r},function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,s&&(t.gradingColumn.multipleAttempts=e.data.contentDetail[n][i].gradingColumn.multipleAttempts)}).$then(()=>{let e=this.$getPreviousVersion();if(e&&(e.isGroupContent=this.isGroupContent,e.assignedGroups=this.assignedGroups,e.selfEnrollmentGroups=this.selfEnrollmentGroups,s)){let r=e.contentDetail[n][i];r.deploymentSettings.attemptCount=t.deploymentSettings.attemptCount,r.gradingColumn.multipleAttempts=t.gradingColumn.multipleAttempts}})},removeTimeLimit(e){let t=this.contentHandler.toString(),n=(0,u.S9c)(t);if(e&&n)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[n]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:u.sez.Continual,timeLimit:null,softTimeLimit:null}}}}}},function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[t].test.deploymentSettings.timerCompletion=e.data.contentDetail[t].test.deploymentSettings.timerCompletion}).$then(()=>{this.$getPreviousVersion()&&(delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timeLimit,delete this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.softTimeLimit,this.$getPreviousVersion().contentDetail[t].test.deploymentSettings.timerCompletion=this.contentDetail[t].test.deploymentSettings.timerCompletion)})},patchProctoringService(e){let t=this.contentHandler.toString(),i=(0,u.S9c)(t),r=n.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:{[t]:{[i]:{deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}}}}}},e=>r.resolve(e.data),()=>r.reject("Failed to change proctoring service.")),r.promise},updateProctoringSettings(e){let t=n.defer(),i=e=>{if($(this)&&$(e)){let t=e.contentHandler.toString(),n=e.contentDetail[t].test.deploymentSettings,i=this.contentDetail[t].test.deploymentSettings;if(i.proctoringServiceHandle=n.proctoringServiceHandle,i.proctoringServiceVendor=n.proctoringServiceVendor,i.proctoringDownloadUrl=n.proctoringDownloadUrl,i.isSecureBrowserRequiredToTake=n.isSecureBrowserRequiredToTake,i.isSecureBrowserRequiredToReview=n.isSecureBrowserRequiredToReview,i.isWebcamRequired=n.isWebcamRequired,this.$getPreviousVersion()){let e=this.$getPreviousVersion().contentDetail[t].test.deploymentSettings;e.proctoringServiceHandle=n.proctoringServiceHandle,e.proctoringServiceVendor=n.proctoringServiceVendor,e.proctoringDownloadUrl=n.proctoringDownloadUrl,e.isSecureBrowserRequiredToTake=n.isSecureBrowserRequiredToTake,e.isSecureBrowserRequiredToReview=n.isSecureBrowserRequiredToReview,e.isWebcamRequired=n.isWebcamRequired}}};return e?(i(e),t.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},e=>{i(e.data),t.resolve(this)},()=>{t.reject("Failed to fetch latest when updating proctoring settings.")}),t.promise},updateProctoringAssociation(e){return this.patchProctoringService(e).then(e=>this.updateProctoringSettings(e))},getProctoringLaunchLink(e){let t=n.defer(),i=c.default.apiBasePath+"/v1/courses/"+this.courseId+"/contents/"+this.id;return e.attemptId&&(i+="/attempts/"+e.attemptId),i+="/proctoring/launchLink",e.password&&(i+=`?password=${encodeURIComponent(e.password)}`),this.$send({method:"GET",url:i},e=>{if(e){t.resolve(e.data.launchLink);return}t.reject("Failed to fetch assessment launch link.")}).$allow([u.oji.Unauthorized,u.oji.TooManyRequests]).$asPromise().then(e=>{t.reject(e.$response)}),t.promise},getProctoringServiceVendor(){let e=$(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle(){let e=$(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake(){let e=$(this);return null!=e&&!!(e.proctoringServiceHandle===I.j&&e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview(){let e=$(this);return null!=e&&!!(e.proctoringServiceHandle===I.j&&e.isSecureBrowserRequiredToReview)},isWebcamRequired(){let e=$(this);return null!=e&&!!(e.proctoringServiceHandle===I.j&&e.isWebcamRequired)},getProctoringDownloadUrl(){let e=$(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility(e,t=!0){switch(this.adaptiveReleaseRules={startDate:null,endDate:null},e){case u.hbA.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case u.hbA.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case u.hbA.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle(e){this.title=e;let t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder(){return d.GQk.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder(){return!!d.GQk.Folder.isEqualTo(this.contentHandler)||!!d.GQk.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage(){if(this.contentDetail){let e=this.contentDetail[d.GQk.Folder.toString()];if(d.GQk.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)return!0;if(d.GQk.Unknown.isEqualTo(this.contentHandler))return}return!1},isRoot(){return S.e6.Root===this.$pk||S.e6.Interactive===this.$pk},isAssignment(){return d.GQk.UltraAssignment.isEqualTo(this.contentHandler)},isDocument(){return d.AaE.isDocument(this)},isFile(){return d.AaE.isFile(this)},isJournal(){return d.HVT.isJournal(this)},isLink(){return d.AaE.isLink(this)},isCourseLink(){return d.AaE.isCourseLink(this)},isLtiLink(){return d.AaE.isLtiLink(this)},isLtiPlacement(){return d.AaE.isLtiPlacement(this)},isPartnerCloud(){return d.AaE.isPartnerCloud(this)},isPlaceHolderContent(){return d.AaE.isPlaceHolderContent(this)},isTest(){return d.AaE.isTest(this)},isSurvey(){return d.AaE.isSurvey(this)},isScorm(){return d.AaE.isScorm(this)},isGradedScorm(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion(){return d.AaE.isDiscussion(this)},isLearningModule(){return!!d.GQk.LearningModule.isEqualTo(this.contentHandler)||!!d.GQk.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionCourseLink(){return d.AaE.isDiscussionCourseLink(this)},getSafeAssignAttrs(){return this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignOn(){return!!this.contentDetail&&!!this.contentDetail[this.contentHandler.toString()].safeAssignOptions},isSafeAssignEnabled(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts(){return d.GQk.UltraAssignment.isEqualTo(this.contentHandler)||d.GQk.TestLink.isEqualTo(this.contentHandler)||d.GQk.SurveyLink.isEqualTo(this.contentHandler)||d.GQk.LtiLink.isEqualTo(this.contentHandler)||d.GQk.LtiPlacement.startsWith(this.contentHandler)||d.GQk.PartnerCloud.isEqualTo(this.contentHandler)||d.GQk.Discussion.isEqualTo(this.contentHandler)||d.GQk.CourseLink.isEqualTo(this.contentHandler)||d.GQk.Journal.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn(){return d.GQk.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex(e){this.$moveTo(e),this.$reveal()},findInTreeById(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache(e,t,n=R.cY.getMaxCourseFolderDepth()+1){return(null==t||t.id!==e)&&(t=this.findLoadedNodeById(e,n)),t},findLoadedNodeById(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id&&!Number.isNaN(this.depth))return this;if(this.children){t--;for(let n=0;n<this.children.length;n++){let i=this.children[n].findLoadedNodeById(e,t);if(i)return i}}},moveTo(e,t,n){if(this.id===t||this.id===n)return;let i=e.children.find(e=>e.id===this.id);i&&(e.children.$remove(i),e.children.fixPositions()),this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(n=void 0);let r=e.children.getInsertionIndex(t,n,!1,e.hasMoreChildren);null!=t&&0===r&&(t="start"),null==n||r!==e.children.length||e.hasMoreChildren||(n="end"),e.children.$add(this,r),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=n,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0,function e(t,n){if(!n)return;let i=t+1;n.forEach(t=>{t.depth=i,e(i,t.children)})}(this.depth,this.children)},shouldRestrict(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},updateState(e,t=!1){var s;let o=n.when(this);return(null===(s=this.permissions)||void 0===s?void 0:s.canHaveReviewState)?(this.state=e,t&&(o=this.$send({method:"PATCH",url:`${this.$url()}/states/me`,data:{state:e}}).$asPromise()),o.then(()=>(i.$broadcast(w.G,this,e),r.dispatch(d.Nwg.contentReviewState.getContentReviewState(this.courseId,this.id,!0)),this))):o}},Collection:{indexOfItemById(e){return this.$indexOf(t=>(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder)},buildAndRevealAtPosition(e,t){let n=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(n>-1){let i=this.$build(t);return i.addAndRevealAtIndex(n),null!=e.positionBefore&&(i.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(i.positionAfter=e.positionAfter),i}},getInsertionIndex(e,t,n,i){let r=null==n||n,s=-1;return null!=e&&(s="start"===e.toLowerCase()?0:this.indexOfItemById(e),!r&&s<0&&(s=0)),s<0&&null!=t&&("end"===t.toLowerCase()?null==i||i||(s=this.length):(s=this.indexOfItemById(t))>=0&&s++,!r&&s<0&&(s=this.length)),s},fixPositions(){for(let e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){var t,n,i;if(200===e.status&&(!e.config.params||!e.config.params.fields)&&(e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null),(null===(t=e.config)||void 0===t?void 0:t.method)==="GET"||(null===(n=e.config)||void 0===n?void 0:n.method)==="JSONP")){if(null===(i=e.data)||void 0===i?void 0:i.results){let t=e.data.results.map(e=>(0,E.L)(e));r.dispatch(d.Nwg.content.setContents(t));return}if(e.data){let t=[(0,E.L)(e.data)];r.dispatch(d.Nwg.content.setContents(t))}}},"before-request":function(e){if(!["/ROOT","/count","/softLinks"].some(t=>a.endsWith(e.url,t))&&"DELETE"!==e.method){let t="gradebookCategory";e.params&&e.params.expand?a.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}("PATCH"===e.method||"PUT"===e.method)&&e.data&&e.data.title&&this.safeAssignOptions&&(e.data.safeAssignOptions=this.safeAssignOptions)},"before-render":function(e){if(e.contentDetail){let t=this.getDeployedAssessment.call(e);if(t){let e=t.gradingColumn;e&&!e.peerGrading&&t&&t.peerSettings&&delete t.peerSettings}}},"after-save":e=>{let t=(0,E.L)(e.data);r.dispatch(d.Nwg.content.persistContentSync(t))}}});return g.$extendRecord(function(e,t){if(t.contentHandler&&d.GQk.CourseLink.isEqualTo(t.contentHandler))return{getDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()},hasReport(){return!1}}}),g.$extendRecord(function(e,t){if(t.contentHandler&&d.GQk.LtiLink.isEqualTo(t.contentHandler)||(null==t?void 0:t.contentHandler)&&d.GQk.PartnerCloud.isEqualTo(t.contentHandler))return{getDueDate(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate(){return this.hasGradingColumn()}}}),g.$extendRecord((e,t)=>{if(t.contentHandler&&d.GQk.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn(e){let t=this.getScormGradebookItems(),n=null;return(n=e?t.find(t=>t.columnId===e):t.find(e=>e.root)||t[0])&&n.gradingColumn},getDueDate(){let e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate(){return this.hasGradingColumn()},getScormGradebookItems(){return d.f_.getScormGradebookItems(this)},getScormLearningStandard(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport(){let e={method:"GET",url:this.$url()+"/scormReport"},t=n.defer();return this.$scope.$collection().$send(e,e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise},isTinCan(){let e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!!(e&&"TINCAN"===e.learningStandard)},hasReport(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle(e){this.title=e;let t=this.getScormGradebookItems().find(e=>e.root);t&&(t.title=e,t.gradingColumn.columnName=e)}}}),g}])},688454:function(e,t,n){"use strict";n.d(t,{H:function(){return o},Y:function(){return a}});var i=n(825986),r=n(789423),s=n(986709);class o{isParentInLearningModule(e,t){var n;return!!(null===(n=t.children)||void 0===n?void 0:n.some(t=>e.parentId===t.id))}isInLearningModule(e,t){return e.parentId===t.id||this.isParentInLearningModule(e,t)}getParentFolderInLearningModule(e,t){var n;return null===(n=t.children)||void 0===n?void 0:n.find(t=>e.parentId===t.id)}updateCourseLinksForContents(e,t){e.forEach(e=>{var n,i,r;(null===(n=e.children)||void 0===n?void 0:n.length)?this.updateCourseLinksForContents(e.children,t):t.includes(null===(r=e.ui)||void 0===r?void 0:null===(i=r.linkSource)||void 0===i?void 0:i.id)&&e.visibility!==s.hbA.Visible&&e.$fetch().$asPromise().then(()=>{e.getLinkContentSource({fromServer:!0})})})}refreshCourseLinksVisibility(e,t,n=[]){return e.forEach(e=>{var i,r,o;if(null===(i=e.children)||void 0===i?void 0:i.length)return this.refreshCourseLinksVisibility(e.children,t,n);e.isCourseLink()&&e.visibility!==s.hbA.Visible&&t===(null===(o=e.ui)||void 0===o?void 0:null===(r=o.linkSource)||void 0===r?void 0:r.id)&&n.push(e.$fetch().$asPromise().then(()=>{e.getLinkContentSource({fromServer:!0})}))}),this.$q.all(n).then(()=>this.$q.resolve())}refreshCourseLinksWhichTargetIsInLearningModule(e,t,n){var i,r;return n&&(null==e?void 0:e.isInForcedSequenceModule())?this.refreshCourseLinksVisibility(t.$scope,null===(r=t.ui)||void 0===r?void 0:null===(i=r.linkSource)||void 0===i?void 0:i.id):this.$q.resolve()}refreshChildren(e,t,n){if(!e||!(null==t?void 0:t.children))return this.$q.resolve();let i=this.getParentFolderInLearningModule(e,t);if(e&&t.isForcedSequenceModule()&&n&&this.isInLearningModule(e,t)){var r,s;let n=[t.$fetch().$asPromise(),null===(r=t.getChildren({limit:t.children.length+1}))||void 0===r?void 0:r.$asPromise()];return(null==i?void 0:i.children)&&n.push(null===(s=i.getChildren({limit:i.children.length+1}))||void 0===s?void 0:s.$asPromise()),this.$q.all(n).then(([,n,r])=>{n.forEach((e,i)=>{var r,s;let o=null===(r=t.children)||void 0===r?void 0:r.findIndex(t=>t.id===e.id);o>=0&&(n[i].ui=null===(s=t.children[o])||void 0===s?void 0:s.ui,n[i]=Object.assign(t.children[o],n[i]))}),i&&r&&r.forEach((e,t)=>{let n=i.children.findIndex(t=>t.id===e.id);-1!==n&&(i.children[n]=Object.assign(i.children[n],r[t]))});let s=[e.id],o=t.children.findIndex(t=>t.id===e.id);-1!==o&&t.children[o+1]&&s.push(t.children[o+1].id),this.updateCourseLinksForContents(t.$scope,s.filter(Boolean))})}return this.$q.resolve()}constructor(e){this.$q=e}}class a{refreshChildren(e,t,n){let i=this.angularRefresher.refreshChildren(e,t,n);return(0,r.h)(i)}refreshCourseLinksWhichTargetIsInLearningModule(e,t,n){let i=this.angularRefresher.refreshCourseLinksWhichTargetIsInLearningModule(n,e,t);return(0,r.h)(i)}constructor(e){this.$q=e,this.key=i.fz.LearningModuleRefreshChildrenOperations,this.angularRefresher=new o(this.$q)}}},990136:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},ec:function(){return d},mA:function(){return s}});var i,r,s,o,a=n(592246),l=n(733303),c=n(376853);class d{getLocalizableCategoryNameKey(){return this.categoryKey}getMediumCategoryIconOrDefault(){return this.mediumIconsByCategory[this.category]||"document-blank"}getCategoryIconName(){return this.categoryImage?this.categoryImage:"document-blank"}toString(){return this.category}static parse(e){if(!e)return null;let t=Object.values(d);for(let n=0;n<t.length;n++)if(t[n].toString().toLowerCase()===e.toLowerCase())return t[n]}constructor(e,t,n){this.category=e,this.categoryKey=t,this.categoryImage=n,this.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"}}}d.Assessment=new d("Assessment","ultra.convert.category.assessment","test"),d.Announcements=new d("Announcements","ultra.convert.category.announcements","announcement"),d.Blog=new d("Blog","ultra.convert.category.blog","blog"),d.Collab=new d("Collab","ultra.convert.category.collab"),d.Course=new d("Course","ultra.convert.category.course","course"),d.CourseLink=new d("CourseLink","ultra.convert.category.courseLink","link"),d.CourseSettings=new d("CourseSettings","ultra.convert.category.courseSettings","settings"),d.Content=new d("Content","ultra.convert.category.content","document-blank"),d.ContentSettings=new d("ContentSettings","ultra.convert.category.contentSettings","settings"),d.DiscussionBoard=new d("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),d.Gradebook=new d("Gradebook","ultra.convert.category.gradebook","grades"),d.Group=new d("Group","ultra.convert.category.group","groups"),d.Message=new d("Message","ultra.convert.course.message.unsupported","messages"),d.ProgressTracking=new d("ProgressTracking","ultra.convert.category.progressTracking"),d.ReleaseSettings=new d("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),d.Rubric=new d("Rubric","ultra.convert.category.rubric","rubric"),d.TableOfContents=new d("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),d.Task=new d("Task","ultra.convert.category.task"),d.Wiki=new d("Wiki","ultra.convert.category.wiki","wiki"),(i=s||(s={})).Success="Success",i.Failure="Failure",i.Partial="Partial",i.Unavailable="Unavailable",(r=o||(o={})).Waiting="WAITING",r.Assigned="ASSIGNED",r.Running="RUNNING",r.Complete="COMPLETE",r.CompleteErrors="COMPLETE_ERRORS",r.Incomplete="INCOMPLETE";let u=a.oP;l.Z.factory(u,["restmod",c.xQ,(e,t)=>e.model().mix({$config:{primaryKey:"taskId"}})])},312019:function(e,t,n){"use strict";n.d(t,{H:function(){return u}}),n(407537);var i=n(276635),r=n(658895),s=n(341177),o=n(592246),a=n(555840),l=n(733303),c=n(376853),d=n(986709);let u=o.VH;l.Z.factory(u,["restmod","$q","$http",c.xQ,(e,t,n,l)=>{let c=l.createHooksToFetchParent("course"),u=e.model(r.default.apiBasePath+"/v1/courses").mix({announcements:{hasMany:o.vp},assessments:{hasMany:o.dd},calendarItems:{hasMany:o.zU,path:"calendars/calendarItems"},calendars:{hasOne:o.Zl},collab:{hasOne:o.LV},collabUltra:{hasOne:o.ZP,path:"collabultra"},contents:{hasMany:o.V1},conversions:{hasMany:o.oP,path:"convertToUltra"},forums:{hasMany:o.uD,path:"discussionboards/default/forums"},entitlements:{hasMany:o.Xk},gradebook:{hasOne:o.P7},instructorsMembership:{mask:"CU",hasMany:o.YJ,path:"memberships?roleBucket="+d.O8v.Teaching},exports:{hasMany:o.iH},ltiPlacements:{hasMany:o.Lv},memberships:{hasMany:o.YJ,hooks:c},membershipInvites:{hasMany:o.Wi,path:"membershipInvites"},messageFolders:{hasMany:o.M9},conversations:{hasMany:o.yB},notifications:{hasMany:o.qq},preferences:{hasMany:o.nc},schedule:{hasMany:o.mH},term:{belongsTo:o.H,key:"termId"},users:{hasMany:o.YJ,hooks:c},groups:{hasMany:o.x9},rubrics:{hasMany:o.gg,path:"rubrics"},analyticsReports:{hasMany:o.vv,path:"analyticsReports"},tools:{hasMany:o.h,path:"tools"},contentHandlers:{hasMany:o.h,path:"contentHandlers"},indicators:{mask:!0,hasMany:o.$K,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:o.p5,path:"scormReportContents"},studentPreview:{hasOne:o.QW,path:"spreview"},conversationCounts:{hasOne:o.yB,path:"/conversations/counts"},ui:{mask:!0,init:()=>({convertToUltraTaskStatus:"?"})},isUndecided(){return d.S2N.Undecided===this.ultraStatus},isClassic(){return d.S2N.Undecided===this.ultraStatus||d.S2N.Classic===this.ultraStatus},isUltraConfirmed(){return d.S2N.Ultra===this.ultraStatus},isUltra(){return d.S2N.Ultra===this.ultraStatus||this.isUltraPreview()},isUltraPreview(){return d.S2N.UltraPreview===this.ultraStatus},setUltraStatusDecided(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.S2N.Ultra}},function(e){this.ultraStatus=e.data.ultraStatus}).$asPromise()},chooseClassicCourseView(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:d.S2N.Classic}},function(e){this.$unwrap(e.data)}).$asPromise()},isOpen(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic(){return this.isOpen()&&this.isClassic()},isOpenNonClassic(){return this.isOpen()&&!this.isClassic()},isPrivate(){return!1===this.isAvailable},appearsAsPrivate(){return"effectiveAvailabilityUnprivileged"in this&&!this.effectiveAvailabilityUnprivileged},isComplete(){return!0===this.isAvailable&&!0===this.isClosed},getStatus(){return this.isAvailable?this.isClosed?s.D.Complete:s.D.Open:s.D.Private},setStatus(e,t){s.D.Complete===e?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=s.D.Complete):s.D.Open===e?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=s.D.Open):s.D.Private===e&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=s.D.Private),t&&(this.effectiveAvailability=t.effectiveAvailability,this.effectiveAvailabilityUnprivileged=t.effectiveAvailabilityUnprivileged)},canAccess(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus(){return this.permissions.chooseUltraStatus},canExport(){return this.permissions.export&&!this.isUltraPreview()},canArchive(){return this.permissions.archive&&!this.isUltraPreview()},canViewAutoArchive(){return this.permissions.viewAutoArchive},canCopy(){return this.permissions.copy},canImport(){return this.permissions.import},convertToUltraCourse(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$asPromise()},undoCourseConversion(){return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle,this.ui.showConversionInProgress=!0,this.ui.showConversionComplete=!1}).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus(){return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},e=>{this.ui.convertToUltraTaskId=e.data.taskId,this.ui.convertToUltraTaskStatus=e.data.taskStatus,this.ui.conversionTaskTitle=e.data.taskTitle}).$allow([404,403]).$asPromise()},getInstructors(){return(this.instructorsMembership||[]).map(e=>e.user)},getBaseRoute(){return this.isOrganization?"base.organizations":"base.courses"},importContents(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+encodeURIComponent(e)+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},function(e){this.$unwrap(e.data)}).$asPromise()},copyCourse(e,t,n,i,r,s){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentItems:t.contentItems,announcementItems:t.announcementItems,assessmentItems:t.assessmentItems,rubricItems:t.rubricItems,schemaItems:t.schemaItems,targetContentId:n,positionBefore:i,positionAfter:r,shouldSendNotifyEmail:s}},function(e){this.$unwrap(e.data)}).$asPromise()},getImportCopyTaskStatus(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},function(e){this.$unwrap(e.data)}).$allow([404]).$asPromise()},getGranularCopyTaskStatus(e=[]){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},function(e){this.$unwrap(e.data)}).$allow([404]).$asPromise()},getTaskErrorDetailMessages(e,t){return t=t||this.$scope.$url()+`/${this.id}/ultraConversionReports/${e}/messages`,this.$scope.$build().$send({method:"GET",url:t},function(e){this.$unwrap(e.data)}).$asPromise()},canConvert(){return this.permissions.convert},hasSchedule(){return!i.isEmpty(this.schedule)},getLocale(){return this.isLocaleEnforced&&this.locale},isToolAvailable(e){return this.tools.isToolAvailable(e)},getAnnouncementsCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},function(e){this.$unwrap(e.data)}).$asPromise()},getCourseGroupSetCount(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},function(e){this.$unwrap(e.data)}).$asPromise()},getChildrenCourses(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(r.default.apiBasePath,r.default.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then(e=>e.$response.data.results&&e.$response.data.results)},attendanceRecordsExist(){return this.$scope.$build().$send({method:"GET",url:`${this.$scope.$url()}/${this.$pk}/attendanceRecords`,params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then(e=>e.$response.data.results&&e.$response.data.results.length>0)},$extend:{Model:{findCourseByCourseId(e,t=!1){let n=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(n=n.$allow([404])),n.$asPromise().then(e=>{if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data})}}},$hooks:{"after-fetch":function(){a.lZ.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return u.mixinCourses=l.getDataMixin(u.findMany.bind(u),"courseId","course"),u}])},644922:function(e,t,n){"use strict";n.d(t,{Cs:function(){return r},HV:function(){return p},OO:function(){return u}});var i,r,s=n(592246),o=n(733303),a=n(376853),l=n(84741),c=n(259197),d=n(625506);function u(e){let t=parseInt(e,10)+1,n=Object.keys(r);return n.length<t&&(t=n.length-1),r[n[t]]}(i=r||(r={})).Discussion="0",i.Comment="1",i.Reply="2",i.ClassConversation="3";let p=s.nH;o.Z.factory(p,["restmod","$q","$ngRedux",a.xQ,l.HV,(e,t,n,i,r)=>e.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:s.t6},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:()=>({isEdit:!1})},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this.forEach(e=>{e.type="0",e.parent=e,e.discussion=e,e.states.readStateInd=e.messageStatus.isRead})},"after-destroy":function(e){e.data&&this.$unwrap(e.data)},"after-request":e=>{var t,i,r,s;(null==e?void 0:null===(t=e.config)||void 0===t?void 0:t.method)==="PATCH"&&(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.data)&&(null==e?void 0:null===(s=e.config)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.allowGrading)===!1&&n.dispatch(c.Nwg.gradebookSchema.invalidateData())}},$extend:{Record:{getReplies(e,n){if(n&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=()=>t(e=>e(this.replies)),this.replies;let i=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},function(e){this.$unwrap(e.data),i.replies=this,i.ui.count=e.data.paging.count,this.forEach(e=>{e.type=u(i.type),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead})})},saveReply(e,t={}){let n=this.$scope.$url()+"/"+this.id+"/replies?"+d.param(t);return this.$scope.$build().$send({method:"POST",url:n,data:e.$wrap()},function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()})},getRepliesCount(e={}){let t=this.$scope.$url()+"/"+this.id+"/replies/count?"+d.param(e),n=this;return this.$scope.$build().$send({method:"GET",url:t},function(e){n.ui.count=e.data.count},function(){n.ui.count=0})},updateMessageStatus(e,t={}){let n=this.$scope.$url()+"/"+this.id+"/states?"+d.param(t);return this.$scope.$build().$send({method:"PATCH",url:n,data:e.$wrap()},function(e){return this.states=this.$unwrap(e.data),this.states},function(e){400===e.status||e.$response&&e.$response.status})},copy(e){Object.getOwnPropertyNames(e).filter(e=>"$"!==e[0]).forEach(t=>{this[t]=e[t]})}},Collection:{batchGetReplies(e){let n="?";e&&Object.keys(e).forEach(t=>{n+=t+"="+e[t]+"&"});let i=t.defer(),s=[],o=n=>{let i=t.defer();return r.performBatch(()=>{t.all(n.map(t=>t.getReplies(e,!0).$asPromise())).then(i.resolve)}),i.promise.then(e=>(e.forEach((e,t)=>{let i=n[t];e.forEach(e=>{e.type=u(i.type),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead,s.push(e)})}),s))};return o(this).then(o).then(i.resolve),i.promise}}}})])},789915:function(e,t,n){"use strict";n.d(t,{Et:function(){return r},sE:function(){return u}});var i,r,s=n(986709);(i=r||(r={})).Add="Add",i.Delete="Delete",i.ValueChange="ValueChange",i.NoChange="NoChange";class o{equals(e){return null==e?this.hasNoAccommodation():this.type===s.rWm.Custom?this.value===e.value:this===e||this.type===e.type}hasNoAccommodation(){return!1}get hasAccommodation(){return!this.hasNoAccommodation()}constructor(e,t){this.type=e,this.value=t}}class a extends o{compare(e){return this.equals(e)?"NoChange":this.hasAccommodation?"Add":"Delete"}}class l extends a{hasNoAccommodation(){return!0}constructor(){super(s.AVG.Normal)}}class c extends o{compare(e){return this.equals(e)?"NoChange":this.hasAccommodation?e.hasAccommodation?"ValueChange":"Add":"Delete"}toKey(){switch(this.type){case s.rWm.NoAccommodation:return"NoAccommodation";case s.rWm.Unlimited:return"Unlimited";default:return"Custom"}}}class d extends c{hasNoAccommodation(){return!0}constructor(){super(s.rWm.NoAccommodation)}}class u{static fromTypes(e,t){let n=new u;return n.dueDate=null==e||e===s.AVG.Normal?new l:new a(e),n.timeLimit=function(e){if(null==e||e===s.rWm.NoAccommodation)return new d;if(e!==s.rWm.Unlimited){let t=parseInt(e+"",10);return new c(s.rWm.Custom,t)}return new c(e)}(t),n}clone(){return this.timeLimit.type===s.rWm.Custom?u.fromTypes(this.dueDate.type,this.timeLimit.value):u.fromTypes(this.dueDate.type,this.timeLimit.type)}equals(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)}compare(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}}get hasAccommodation(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation}constructor(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}}},240698:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},M4:function(){return l},M9:function(){return c},rC:function(){return o}}),n(407537);var i=n(658895),r=n(733303),s=n(592246);let o=1e3,a={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},l={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},c={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},d=s.W8,u=i.default.apiBasePath+"/v1/roles/courseRoles";r.Z.factory(d,["restmod",e=>e.model(u).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames(e){return this.forEach(t=>{t.isRemovable?e?t.localizedRoleName=t.orgName.rawValue:t.localizedRoleName=t.courseName.rawValue:e?t.localizedRoleName="global.organization.role."+t.identifier:t.localizedRoleName="global.course.role."+t.identifier}),this},sortByStudentFirst(e){return this.$action(function(){this.sort(function(t,n){let i,r;let s=t.identifier,o=n.identifier;return s in a&&o in a?a[s]-a[o]:s in a&&!(o in a)?-1:!(s in a)&&o in a?1:("organization"===e?(i=t.orgName.languageKey,r=n.orgName.languageKey):(i=t.courseName.languageKey,r=n.courseName.languageKey),i>r)?1:i<r?-1:0})})}}}})])},996919:function(e,t,n){"use strict";n.d(t,{CR:function(){return i},ed:function(){return s},jp:function(){return r},qS:function(){return o}});let i="bbml-updated",r="bb-bbml-editor-force-bbml-update",s="bb-bbml-editor-id-generated";class o{}},820861:function(e,t,n){"use strict";n.r(t),n.d(t,{ToolAttemptDetailItemEx:function(){return b},getQuestionAttempts:function(){return C},isGroupAttempt:function(){return S},moduleName:function(){return g},serviceName:function(){return f}}),n(407537);var i=n(276635),r=n(658895),s=n(312019),o=n(592246),a=n(733303),l=n(454945),c=n(619034),d=n(259197),u=n(376853),p=n(973385),m=n(878218),h=n(986709);let g="ultra.components.services.models.grade.gradeAttempt",f=o.Sp;class b{get elapsedDuration(){return c.duration(c(this.gradeAttempt.attemptDate).diff(c(this.gradeAttempt.creationDate)))}get elapsedSec(){return Math.ceil(this.elapsedDuration.asSeconds())}get softTimeLimitSecond(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSeconds}needAttention(){return!i.isUndefined(this.toolAttemptDetailItem.timeLimitSeconds)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)}getExceedTime(){return Math.floor(c.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())}isCompleted(){return this.gradeAttempt.isCompleted()}isTimerCompletionH(){return this.toolAttemptDetailItem.timerCompletion===h.sez.HardStop}isTimerCompletionC(){return this.toolAttemptDetailItem.timerCompletion===h.sez.Continual}getLastModifyTime(e){return i.maxBy(e.saveTimes,e=>e.date).date}isAnsweredAfterSoftTimeLimit(e){return!i.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)}getQuestionsAnsweredAfterSoftTimeLimit(){return i.filter(this.toolAttemptDetailItem.questionAttempts,e=>this.isAnsweredAfterSoftTimeLimit(e))}constructor(e,t){this.gradeAttempt=e,this.toolAttemptDetailItem=t,this._softTimeLimitDate=c(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+b.GRACE_PERIOD_SECOND,this._graceDate=c(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=c(this.gradeAttempt.attemptDate).isBetween(c(this.gradeAttempt.creationDate),c(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=i.filter(this.toolAttemptDetailItem.questionAttempts,e=>!i.isEmpty(e.saveTimes)&&c(this.getLastModifyTime(e)).isBetween(this._softTimeLimitDate,this._graceDate)).length>0}}b.GRACE_PERIOD_SECOND=60;let v=function(e){i.forEach(e,(e,t)=>{e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds})},y=(e,t)=>{t.length>0&&e.dispatch(d.Nwg.questionAttempt.setQuestionAttemptsInStore(t))};function S(e){return void 0!==e.attempts}let C=e=>{var t,n,i;let r=null!==(n=(e.toolAttemptDetail?Object.keys(e.toolAttemptDetail):[])[0])&&void 0!==n?n:d.u$1.Test.toString(),s=null===(t=e.toolAttemptDetail)||void 0===t?void 0:t[r],o=null!==(i=null==s?void 0:s.questionAttempts)&&void 0!==i?i:[];return S(e)&&e.attempts.forEach(e=>{o=o.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e.id}))}),o};a.Z.factory(f,["restmod",u.xQ,s.H,"$ngRedux",(e,t,n,s)=>e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},"attemptReceipt.submissionDate":{serialize:"date"},originality:{hasOne:o.f3,path:"submissionResults"},assessment:{hasOne:o.dd,path:"assessment"},stagedAttemptGrades:{init(){return[]}},$hooks:{"after-fetch":function(){y(s,C(this.$wrap())),v(this.toolAttemptDetail)},"after-fetch-many":function(){let e=[];i.forEach(this,t=>{e=e.concat(C(t)),v(t.toolAttemptDetail)}),y(s,e)},"after-save":e=>{let t=(0,m.L)(e.data);s.dispatch(d.Nwg.gradebookAttempt.setGradeAttemptInStore(t))}},$extend:{Scope:{$destroyUrlFor(e){return r.default.apiBasePath+"/v1/courses/"+l.j(n,e.$scope)+"/gradebook/attempts/"+e.id}},Record:{isPostable(){return this.readyToPost&&(h.I$9.NeedsGrading===this.status||h.I$9.NeedsMoreGrading===this.status)},isCompleted(){return h.I$9.Completed===this.status},isGraded(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable(e){let t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress(){return h.I$9.InProgress===this.status||h.I$9.InMoreProgress===this.status},isSubmitted(){return!this.isInProgress()},isNeedsGrading(){return h.I$9.NeedsGrading===this.status||h.I$9.NeedsMoreGrading===this.status},isReconciled(){return null!=this.reconciliationMode},getToolAttemptDetailItem(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx(e){let t=this.getToolAttemptDetailItem(e);return null!=t?new b(this,t):null},getTimedTestAttemptDetail(){let e=this.getTimedTestApiData();return e?new p.F1(e):null},getTimedTestAttemptDetailWithDueDate(e){return new p.F1({...this.getTimedTestApiData(),dueDate:e})},getTimedTestApiData(){let e=this.getToolAttemptDetailItem(d.u$1.Test);return null==e?null:{elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion}},getFeedbackToUser(){return this.feedbackToUser},getGroupIndividualFeedbackToUser(){return this.groupAttemptId&&this.overrideStatus===h.c4$.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor(){return this.lastFeedbackAuthor},isPrePostGrade(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade(){return this.isCompleted()&&this.readyToPost&&null!=this.userId},isAutomaticallySubmitted(){var e,t;return(null===(e=this.attemptReceipt)||void 0===e?void 0:e.submissionType)===h.qOJ.AutomaticallySubmittedByBrowser||(null===(t=this.attemptReceipt)||void 0===t?void 0:t.submissionType)===h.qOJ.AutomaticallySubmittedByServer},isLateSubmission(){var e;return null===(e=this.attemptReceipt)||void 0===e?void 0:e.lateSubmission}},Collection:{getNumAttemptsToGrade(){return this.filter(e=>e.isNeedsGrading()&&!e.isPostable()).length},getNumAttemptsToReconcile(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost(){return this.filter(e=>e.isPostable()).length},getNumAttemptsSubmittedLate(e){return this.filter(t=>t.isSubmitted()&&c(t.attemptDate).isAfter(e)).length},getNumAttemptsSubmitted(){return this.filter(e=>e.isSubmitted()).length},getNumOfGradedAttempts(){return this.filter(e=>e.isGraded()).length},isAllGradedAndPosted(){return this.length>0&&this.every(e=>e.isCompleted())},isAtLeastOneGradedAndPosted(){return this.length>0&&this.some(e=>e.isCompleted())},isFirstAttemptPosted(){var e;return null===(e=this.getFirstAttempt())||void 0===e?void 0:e.isCompleted()},isLastSubmittedAttemptPosted(){var e;return null===(e=this.getLastSubmittedAttempt())||void 0===e?void 0:e.isCompleted()},getAttemptIndexById(e){return i.findIndex(this,t=>{var n;return(null!==(n=t.groupAttemptId)&&void 0!==n?n:t.id)===e})},getFirstAttempt(){return this.length?this[0]:void 0},getLastSubmittedAttempt(){return this.length?this[this.length-1]:void 0}}}})])},973385:function(e,t,n){"use strict";n.d(t,{F1:function(){return c},Ir:function(){return o},yP:function(){return s}});var i,r,s,o,a=n(986709),l=n(3636);class c{get testType(){if(!this.apiData.timeLimitSec)return this.apiData.dueDate?"ENFORCED_DUE_DATE":"NOT_TIMED";switch(this.apiData.timerCompletion||""){case a.sez.Continual:return"UNLIMITED_EXTRA";case a.sez.HardStop:return this.apiData.softLimitSec?"LIMITED_EXTRA":"NO_EXTRA";default:return this.apiData.dueDate?"ENFORCED_DUE_DATE":"NOT_TIMED"}}get adaptedTime(){switch(this.testType){case"NO_EXTRA":return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case"UNLIMITED_EXTRA":return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case"LIMITED_EXTRA":return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case"ENFORCED_DUE_DATE":return{elapsedSeconds:l.Z.getServerTimeAsEpochTime(),softlimitSeconds:this.dueDateAsEpochTime,hardlimitSeconds:this.dueDateAsEpochTime};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}}get dueDateAsEpochTime(){return this.apiData.dueDate?this.apiData.dueDate.getTime()/1e3:null}get stages(){if(this.dueDateAsEpochTime&&!this.withinDueDatelimit)return["SE"];switch(this.testType){case"NO_EXTRA":return this.getStagesForNoExtraTimeTest();case"UNLIMITED_EXTRA":return this.getStagesForUnlimitedExtraTimeTest();case"LIMITED_EXTRA":return this.getStagesForLimitedExtraTimeTest();case"ENFORCED_DUE_DATE":return this.getStagesForEnforcedDueDateTest()}}getStagesForNoExtraTimeTest(){return"NO_EXTRA"!==this.testType?void 0:this.dueDateIsSoonerThanHardTimeLimit?["S0_ENFORCED_DUE_DATE"]:this.withinHardlimit?["S0_NO_EXTRA"]:["SE"]}getStagesForUnlimitedExtraTimeTest(){if("UNLIMITED_EXTRA"===this.testType)return this.dueDateIsSoonerThanSoftTimeLimit?["S0_ENFORCED_DUE_DATE"]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?["S0_UNLIMITED_EXTRA","S0_ENFORCED_DUE_DATE"]:["S0_ENFORCED_DUE_DATE"]:this.withinLimit?["S0_UNLIMITED_EXTRA","S1_UNLIMITED_EXTRA"]:["S1_UNLIMITED_EXTRA"]}getStagesForLimitedExtraTimeTest(){if("LIMITED_EXTRA"===this.testType)return this.dueDateIsSoonerThanSoftTimeLimit?["S0_ENFORCED_DUE_DATE"]:this.dueDateIsSoonerThanHardTimeLimit?this.withinLimit?["S0_LIMITED_EXTRA","S0_ENFORCED_DUE_DATE"]:["S0_ENFORCED_DUE_DATE"]:this.withinLimit?["S0_LIMITED_EXTRA","S1_LIMITED_EXTRA"]:this.withinHardlimit?["S1_LIMITED_EXTRA"]:["SE"]}getStagesForEnforcedDueDateTest(){return"ENFORCED_DUE_DATE"!==this.testType?void 0:this.withinDueDatelimit?["S0_ENFORCED_DUE_DATE"]:["SE"]}get hasTimeLimit(){return"ENFORCED_DUE_DATE"!==this.testType&&"NOT_TIMED"!==this.testType}get hasExtraTime(){return"LIMITED_EXTRA"===this.testType||"UNLIMITED_EXTRA"===this.testType}get hasLimitedExtraTime(){return"LIMITED_EXTRA"===this.testType}get hasUnlimitedExtraTime(){return"UNLIMITED_EXTRA"===this.testType}get withinLimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds}get withinHardlimit(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds}get withinDueDatelimit(){return this.dueDateAsEpochTime&&l.Z.getServerTimeAsEpochTime()<this.dueDateAsEpochTime}get dueDateIsSoonerThanHardTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.hardlimitSeconds)}get dueDateIsSoonerThanSoftTimeLimit(){return this.dueDateIsSoonerThanTimeLimit(this.adaptedTime.softlimitSeconds)}dueDateIsSoonerThanTimeLimit(e){var t;return this.withinDueDatelimit&&this.dueDateAsEpochTime-l.Z.getServerTimeAsEpochTime()<e-(null!==(t=this.adaptedTime.elapsedSeconds)&&void 0!==t?t:0)}get willAutoSubmit(){return"NO_EXTRA"===this.testType||"LIMITED_EXTRA"===this.testType||"ENFORCED_DUE_DATE"===this.testType}get displayedTimeLimitSeconds(){return this.adaptedTime.softlimitSeconds}get displayedExtraTimeSeconds(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds}getSubmissionRuleText(e,t){switch(this.testType){case"NO_EXTRA":return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case"UNLIMITED_EXTRA":return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case"LIMITED_EXTRA":return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}}constructor(e){this.apiData=e}}(i=s||(s={})).Stage0NoExtraTime="S0_NO_EXTRA",i.Stage0UnlimitedExtraTime="S0_UNLIMITED_EXTRA",i.Stage1UnlimitedExtraTime="S1_UNLIMITED_EXTRA",i.Stage0LimitedExtraTime="S0_LIMITED_EXTRA",i.Stage1LimitedExtraTime="S1_LIMITED_EXTRA",i.StageE="SE",i.StageEnforcedDueDate="S0_ENFORCED_DUE_DATE",(r=o||(o={})).NoExtraTime="NO_EXTRA",r.UnlimitedExtraTime="UNLIMITED_EXTRA",r.LimitedExtraTime="LIMITED_EXTRA",r.EnforcedDueDateTest="ENFORCED_DUE_DATE",r.NotATimedTest="NOT_TIMED"},124854:function(e,t,n){"use strict";n.r(t),n.d(t,{AttemptAggregationModel:function(){return i},CREATE_COLUMN_ID:function(){return C},defaultAttemptAggregationModel:function(){return A},getAttemptAggregationModelLabelKey:function(){return T},getAttemptAggregationModelStudentLabelKey:function(){return P},moduleName:function(){return y},parseAttemptAggregationModel:function(){return k},parseForumId:function(){return D},serviceName:function(){return S}}),n(407537);var i,r,s=n(276635),o=n(259197),a=n(986709),l=n(312019),c=n(536169),d=n(244085),u=n(592246),p=n(733303),m=n(619034),h=n(826841),g=n(3636),f=n(878218),b=n(669533),v=n(83991);let y="ultra.components.services.models.grade.gradeColumn",S=u.WC,C="create",E=Symbol("forceFetchSummary"),I=[a.oji.Unauthorized,a.oji.Forbidden,a.oji.TooManyRequests],w=e=>!!e&&"attemptDate"in e;(r=i||(i={})).Average="AVERAGE",r.First="FIRST",r.Highest="HIGHEST",r.Last="LAST",r.Lowest="LOWEST";let A="AVERAGE";function k(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}function T(e){return"components.services.grade.aggregation-model."+e.toLowerCase()}function P(e){return"course.content.assessment.overview.gradeBasedOn."+e.toLowerCase()}function D(e){let t=e.split("/");return t[t.length-1]}p.Z.factory(S,["$http","$ngRedux","restmod","$rootScope","$q",l.H,d.H,c.H,(e,t,n,i,r,l,c,d)=>n.model().mix({grades:{hasMany:u.e5},summary:{hasOne:u.kI,hooks:{"before-request":function(e){!this.$owner[E]&&this.$owner.isCalculated()&&(e.cache={get(){return{}}})}}},groupAssociations:{hasMany:u.QA},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},peerReviewDueDate:{serialize:"date"},ui:{mask:!0,init:()=>({})},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){let t="gradebookCategory";e.params&&e.params.expand?s.includes(e.params.expand,t)||(e.params.expand+=`,${t}`):e.params={expand:t,...e.params}}},"before-save":e=>{e.params||(e.params={}),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){var n,i,r,s,a;if(w(e.data)){let{courseId:r,gradeId:s}=e.data;if(r&&s&&(null===(n=e.config)||void 0===n?void 0:n.method)==="POST"){let n=e.data;t.dispatch(o.Nwg.gradebookAttempt.setGradeAttemptInStore(n,r,null===(i=o.Ys.gradebookGrade.getGradebookGradeById(t.getState(),s)[0])||void 0===i?void 0:i.columnId,!0))}}else{if((null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.method)==="PATCH"){if(this.gradingSchemaId!==(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.gradingSchemaId)&&t.dispatch(o.Nwg.gradebookSchema.invalidateData()),null===(a=e.data)||void 0===a?void 0:a.externalGrade){let n=e.data.id,i=o.Ys.gradebookGrade.getGradebookGradesByColumnId(t.getState(),n);t.dispatch(o.Nwg.gradebookGrade.setInvalidatedGradesInStore(i))}let n=(0,f.L)(e.data);t.dispatch(o.Nwg.gradebookColumn.addGradebookColumnToStore(n))}e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach(e=>{h.F(e.rubricDefinition)})}if(e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics")){let n=(0,f.L)(e.data);t.dispatch(o.Nwg.gradebookColumn.setGradebookColumnInStore(n))}},"after-create":function(e){let n=(0,f.L)(e.data);t.dispatch(o.Nwg.gradebookColumn.addGradebookColumnToStore(n))}},$extend:{Record:{isTest(){return o.u$1.Test.isEqualTo(this.scoreProviderHandle)},isSurvey(){return o.u$1.Survey.isEqualTo(this.scoreProviderHandle)},isAssignment(){return o.u$1.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated(){return a.eNW.NonCalculated!==this.calculationType},isOffline(){return!!this.userCreatedColumn},isPeerSubmissionTest(){return o.u$1.PeerSubmissionsTest.isEqualTo(this.scoreProviderHandle)},seemsAttemptBased(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion(){return o.u$1.Discussion.isEqualTo(this.scoreProviderHandle)},isJournal(){return o.u$1.Journal.isEqualTo(this.scoreProviderHandle)},isScorm(){return o.u$1.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO(){if(this.isScorm()){let e=this.ui&&this.ui.content||null,t=e&&!e.isConditionalReleaseLocked()&&e.getScormGradebookItems()||[],n=t&&t.find(e=>e.columnId===this.id);return!!(n&&!n.root)}return!1},isAttendance(){return o.u$1.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible(){return!!this.visible},isHidden(){return!this.visible},isVisibleToStudents(){return this.isVisible()},isHiddenFromStudents(){return this.isHidden()},isGroupContent(){return!!this.groupContent},isMultipleAttempts(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt(){return 1===this.multipleAttempts},isUnlimitedAttempts(){return 0===this.multipleAttempts},isCollectExternalSubmissions(){return!!this.collectExternalSubmissions},lateAttemptCreationDisallowed(){return!!this.isLateAttemptCreationDisallowed},getNumMissing(){return this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent(){return this.isVisibleToStudents()?a.hbA.Visible:a.hbA.Hidden},setVisibility(e){switch(e){case a.hbA.Visible:this.visible=!0;break;case a.hbA.Hidden:this.visible=!1}},canEdit(){return this.permissions&&this.permissions.edit},postReadyGrades(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfGradesPosted)},postReadyGroupAttempts(e){return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},e=>{this.ui.numOfAttemptsPosted=e.data.count}).$asPromise().then(e=>{var t;return null===(t=e.ui)||void 0===t?void 0:t.numOfAttemptsPosted})},getGroupGrade(t,n){let i=n?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",i&&{params:i}).then(e=>{let t=d.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map(e=>this.grades.$buildRaw(e))),t})},getGroupAttemptByGroupAssociationId(e,t=!1,n){return this.groupAssociations.$new(e).groupAttempts.$fetch({expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0}).$asPromise().then(e=>{var t;let i;return e&&n&&(i=e.find(e=>e.id===n)),null!==(t=null!=i?i:e.find(e=>e.isInProgress()))&&void 0!==t?t:e[0]})},getGradeIdToAttempt(e,t){let n;let i={};return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},function(e){Object.keys(e.data.lookup).forEach(n=>{t?e.data.lookup[n]=this.grades.$new(n).groupAttempts.$decode(e.data.lookup[n]):this.grades.$new(n).attempts.$decode(e.data.lookup[n]).some(e=>!e.deletedAttempt)&&(i[n]=this.grades.$new(n).attempts.$decode(e.data.lookup[n]))}),e.data.lookup=i,n=e.data}).$asPromise().then(()=>n)},loadReviewableAttempts(e){return e.reviewableAttemptsOnly=!0,this.getGradeIdToAttempt(e,!1)},getContentGroupIdToGroupAttempt(e){let t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},function(e){Object.keys(e.data.lookup).forEach(t=>{let n=e.data.lookup[t][0];n.submissionResults&&n.submissionResults.results[b.P]&&(n.originalityProcessed=n.submissionResults.results[b.P].originalityProcessed,n.originalityScore=n.submissionResults.results[b.P].originalityScore),e.data.lookup[t]=l.$new(this.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t].forEach(e=>{var t;e.attempts=l.$new(this.courseId).gradebook.attempts.$decode(null!==(t=e.attempts)&&void 0!==t?t:[])})}),t=e.data}).$asPromise().then(()=>t)},hasEvaluations(){return this.getGradeIdToAttempt({}).then(e=>{let t=!1;return e&&e.lookup&&s.each(Object.keys(e.lookup),n=>(s.each(e.lookup[n],e=>(e&&e.rubricEvaluation&&(t=!0),!t)),!t)),t})},launchAttempt(e,t,n,i){return n&&(e.groupId=i),this.$send({method:"POST",url:this.$url()+(n?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},function(e){n?this.createdAttempt=l.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):this.createdAttempt=l.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)}).$allow(I).$asPromise().then(e=>{var t;return!(I.indexOf(null==e?void 0:null===(t=e.$response)||void 0===t?void 0:t.status)>-1)&&(null==e?void 0:e.createdAttempt)?e.createdAttempt:e})},countAttempts(){let e=r.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},t=>{let n=null;return t.data&&(n=t.data.count),e.resolve(n)},t=>e.reject(t)).$allow([403]),e.promise},timeUntilDueDate(e){if(this.dueDate){let t=m(this.dueDate),n=m(g.Z.getServerTime());return t.diff(n,e)}return null},daysUntilDueDate(){return this.timeUntilDueDate("days")},isLate(){return!!this.dueDate&&this.dueDate<=g.Z.getServerTime()},isUserReconciler(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(t=>t.userId===e&&t.canReconcile))},isUserDelegatedGrader(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(t=>t.userId===e&&!t.canReconcile&&t.graderType!==a.xI1.None))},forceDelete(){if(!this.contentId)return(o.u$1.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?c.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then(()=>(i.$broadcast("bb-delete-column",this),t.dispatch(o.Nwg.gradebookColumn.removeGradebookColumnFromStore(this.id)),this));throw Error("Content based column must be deleted by deleting associated content")},hasRubricAssociation(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation(e){e?this.rubricAssociations=[{rubricId:e}]:this.rubricAssociations=[]},setMaxPossiblePoints(e){Number.isFinite(e)?this.possible=e:this.possible=v.cQ.GRADE_DEFAULT_POINTS},forceResolveSummary(){return this[E]=!0,this.summary.$resolve().$then(()=>{delete this[E]})},forceFetchSummary(e={}){return this[E]=!0,this.summary.$fetch(e).$then(()=>{delete this[E]})},alwaysOverride(){let e=!1;return[o.u$1.Test,o.u$1.UltraAssignment,o.u$1.Discussion,o.u$1.Scorm,o.u$1.PeerSubmissionsTest,o.u$1.Survey].forEach(t=>{t.isEqualTo(this.scoreProviderHandle)&&(e=!0)}),e},isQuestionAnalysisAvailable(){return this.isAssignment()||this.isTest()},isAnonymousGrading(){return this.anonymousGrading},canSeeFinalGrade(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{attachRelatedContentsByScoreProviderHandle(e){if(!this.length)return r.when(this);let t=l.$new(this[0].courseId),n=this.filter(t=>e.isEqualTo(t.scoreProviderHandle)&&!t.restricted),i=Array.from(new Set(n.filter(e=>!!e.contentId).map(e=>e.contentId)).values()).map(e=>t.contents.$find(e).$suppressErrorDialog().$asPromise());return r.all(i).then(e=>(n.forEach(t=>{t.ui.content=e.find(e=>e.id===t.contentId)}),this))},indexOfItemById(e){return this.$indexOf(t=>t.id===e)}}}})])},83470:function(e,t,n){"use strict";function i(e){let t=e.summary.numStudentSubmissions(),n=e.summary.numStudentsNeedsGrading+e.summary.numStudentsPosted+e.summary.numStudentsSubmissionGradedNeedsPosting;return e.summary.numEligibleToBeGraded?e.summary.numEligibleToBeGraded-(e.groupContent?t:n):0}function r(e){return!!e.visible&&i(e)>0&&!e.isAttendance()}n.d(t,{y:function(){return r},z:function(){return i}})},536169:function(e,t,n){"use strict";n.d(t,{H:function(){return p}}),n(407537);var i=n(276635),r=n(464027),s=n(619034),o=n(592246),a=n(733303),l=n(3636),c=n(376853),d=n(259197),u=n(986709);let p=o.e5;a.Z.factory(p,["restmod",c.xQ,"$ngRedux",(e,t,n)=>e.model().mix({$hooks:{"after-request":function(){this.$response.data.results?n.dispatch(d.Nwg.gradebookGrade.setInvalidatedGradesInStore(this.$response.data.results)):"PATCH"===this.$response.config.method&&n.dispatch(d.Nwg.gradebookGrade.setGradesInStore([this.$response.data]))}},attempts:{hasMany:o.Sp,hooks:{"after-fetch-many":function(){this.forEach(e=>{e.permissions=this.permissions})}}},column:{ignore:"CU"},groupAttempts:{hasMany:o.br},user:{belongsTo:o.xR},ui:{mask:!0,init:()=>({currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1})},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing(e){return!!(!this.isGraded()&&(e||r.isUndefined(e)&&!this.isSubmitted()))&&!!this.column&&!!this.column.dueDate&&s(this.column.dueDate).isBefore(l.Z.getServerTime())},isGraded(){return null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade)},isOverrideGrade(){return u.WTZ.NoOverride!==this.manualStatus&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost(){return u.WTZ.NoOverride===this.manualStatus&&this.isGraded()&&!this.hasGradeBeenPosted||u.WTZ.ReadyToPost===this.manualStatus},isPosted(){return!this.isCalculatedColumnGrade&&(u.WTZ.NoOverride===this.manualStatus&&(this.hasGradeBeenPosted||!Object.prototype.hasOwnProperty.call(this,"hasGradeBeenPosted")&&this.isGraded())||u.WTZ.IsPosted===this.manualStatus)},isSubmitted(){return!!(this.column&&this.column.seemsAttemptBased())&&u.EyR.NeedsGrading===this.status},isUpcoming(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return s(this.column.dueDate).isAfter(l.Z.getServerTime());if(this.column.seemsAttemptBased())return!0}return!1},isInProgress(){return u.WTZ.GradingInProgress===this.manualStatus},hasInstructorComments(){var e,t;let n,i;return!!this.isGraded()&&(this.column.seemsAttemptBased()&&(n=this.ui&&this.ui.attempt,i=this.attempts),!!((null==n?void 0:null===(e=n.feedbackToUser)||void 0===e?void 0:e.displayText)||(null==i?void 0:i.length)&&this.hasSomeFeedbackToUser(i))||null!==(t=this.instructorFeedback)&&void 0!==t&&!!t.displayText)},hasSomeFeedbackToUser(e){return e.some(e=>{var t;return!!(null===(t=e.feedbackToUser)||void 0===t?void 0:t.displayText)})},saveComment(e,t,n,r){let s=t?{userId:t}:{};return(n&&(s=i.merge(s,n)),i.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,r)?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:s},function(e){this.instructorFeedback=e.data.instructorFeedback}):this.withParams(s).$save(["instructorFeedback"])},hasAttempts(){return!!this.firstAttemptId},postReadyGrades(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(e=>e.ui.numOfGradesPosted)},getScore(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isOverride(){var e,t;return null!==(t=null===(e=this.displayGrade)||void 0===e?void 0:e.isOverride)&&void 0!==t&&t},isPastDueZero(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach(t=>{n(t,e.permissions)}):n(t,e.permissions),t;function n(e,t){e.permissions=t}}}}})])},592246:function(e,t,n){"use strict";n.d(t,{$K:function(){return W},$c:function(){return B},$w:function(){return J},AN:function(){return N},BI:function(){return eJ},Bz:function(){return eO},C6:function(){return e5},CS:function(){return i},Cd:function(){return eH},Cg:function(){return R},Dy:function(){return ey},Ei:function(){return E},H:function(){return e6},HB:function(){return ei},HT:function(){return eq},IL:function(){return p},Jz:function(){return O},L9:function(){return e9},LD:function(){return e4},LV:function(){return w},Lt:function(){return eS},Lv:function(){return eC},M:function(){return eB},M9:function(){return _},NC:function(){return eo},Nj:function(){return P},O2:function(){return eN},O8:function(){return Q},Oe:function(){return y},P7:function(){return ep},PF:function(){return eE},Q5:function(){return eh},QA:function(){return z},QG:function(){return X},QW:function(){return eV},Q_:function(){return eb},RL:function(){return eT},SN:function(){return eW},SO:function(){return v},SR:function(){return eF},SX:function(){return em},Si:function(){return eA},Sp:function(){return er},Tk:function(){return e8},V1:function(){return T},VH:function(){return I},VI:function(){return k},W8:function(){return H},WC:function(){return ea},WF:function(){return eG},WU:function(){return g},Wi:function(){return U},XN:function(){return h},XT:function(){return S},Xk:function(){return Z},Xr:function(){return e$},YJ:function(){return F},ZP:function(){return A},Zl:function(){return f},_:function(){return eQ},_K:function(){return e7},_S:function(){return ee},_n:function(){return e0},a2:function(){return ev},b5:function(){return eY},br:function(){return es},cg:function(){return m},cj:function(){return en},dF:function(){return et},dd:function(){return l},e5:function(){return ec},eE:function(){return c},f3:function(){return ef},fS:function(){return a},fT:function(){return eZ},gg:function(){return e_},gl:function(){return Y},gw:function(){return eu},h:function(){return e3},hV:function(){return eP},hl:function(){return eK},iH:function(){return x},iT:function(){return eR},im:function(){return ed},j7:function(){return eX},jB:function(){return s},jh:function(){return eD},jp:function(){return C},kI:function(){return el},lU:function(){return ek},lb:function(){return ex},mG:function(){return eL},mH:function(){return q},nH:function(){return G},nM:function(){return u},nc:function(){return V},oP:function(){return L},ou:function(){return eg},p5:function(){return eM},pV:function(){return ej},q6:function(){return ew},qq:function(){return eI},sL:function(){return e2},se:function(){return e1},t6:function(){return D},uD:function(){return $},uI:function(){return K},vp:function(){return o},vv:function(){return r},x9:function(){return j},xI:function(){return eU},xO:function(){return ez},xR:function(){return te},yB:function(){return M},yu:function(){return d},zU:function(){return b}});let i="AnalyticsEventModel",r="AnalyticsForLearnModel",s="AnnotationsModel",o="AnnouncementModel",a="AllyModel",l="AssessmentDetail",c="AssessmentExceptionModel",d="Question",u="QuestionAttempt",p="BlockedUserModel",m="BrandModel",h="CalendarModel",g="CalendarItemModel",f="CourseCalendarsModel",b="CourseCalendarItemModel",v="CourseDueDateCalendarItemModel",y="DueDateCalendarItemModel",S="InstitutionCalendarItemModel",C="OfficeHoursModel",E="PersonalCalendarItemModel",I="CourseModel",w="CourseCollab",A="CourseCollabUltra",k="CourseCollabSession",T="CourseContentModel",P="CourseEngagementParticipant",D="CourseEngagementUserStateModel",x="CourseExportModel",R="CourseConditionalReleaseModel",L="ConversionTaskModel",N="ScheduledTaskModel",$="CourseForumModel",O="CourseForumCountModel",G="CourseMessageModel",_="CourseMessageFolderModel",M="CourseConversationModel",B="CourseConversationMessageModel",F="CourseMembershipModel",U="CourseMembershipInviteModel",V="CoursePreferenceModel",H="CourseRole",q="CourseScheduleModel",j="CourseGroupModel",z="CourseGroupAssociationModel",W="CourseIndicatorModel",K="ExternalCourse",Z="CourseEntitlementModel",Q="CloudDriveModel",J="CloudDriveContent",Y="CloudDriveDownloadMessage",X="CloudDriveTask",ee="CloudDriveMeModel",et="CollabUltraPing",en="EntitlementModel",ei="FileModel",er="GradeAttemptModel",es="GradeGroupAttemptModel",eo="GradeCategoryModel",ea="GradeColumnModel",el="ColumnSummaryModel",ec="GradeDetailModel",ed="GradeSchemaModel",eu="GradeBulkViewModel",ep="GradebookModel",em="GradebookSettingsModel",eh="GradeNotationModel",eg="GradedQuestionAttemptModel",ef="GradedOriginalityModel",eb="InstitutionRoleModel",ev="LanguagesModel",ey="LtiDomainConfigModel",eS="LtiSettingsModel",eC="LtiPlacementModel",eE="MyPreferenceModel",eI="NotificationModel",ew="NotificationGeneralSettingsModel",eA="NotificationSettingModel",ek="NotificationSettingsContainerModel",eT="PartnerModel",eP="PartnerStatusModel",eD="PartnerCourseModel",ex="PartnerLinkedCourseModel",eR="PartnerContentIdModel",eL="PartnerGradeModel",eN="PartnerSettingsModel",e$="PartnerToolModel",eO="PrivacyPolicyModel",eG="ProctoringServiceModel",e_="Rubric",eM="ScormReportItemModel",eB="StreamModel",eF="SystemInfoModel",eU="SystemPreferenceModel",eV="StudentPreviewModel",eH="TargetedNotificationModel",eq="TelemetryActivityVsGradeModel",ej="TelemetryContentActivityInDetailModel",ez="TelemetryCourseActivityModel",eW="TelemetryCourseGradesModel",eK="TelemetryCourseNotificationsModel",eZ="TelemetryDiscussionActivityModel",eQ="TelemetryDiscussionXrayModel",eJ="TelemetryMultimediaActivityInDetailModel",eY="TelemetryMultimediaStatisticsModel",eX="TelemetryNotificationsModel",e0="TelemetryNotificationUsersModel",e1="TelemetryStudentActivityModel",e2="TelemetryStudentGradesModel",e4="TelemetrySufficientDataModel",e6="TermModel",e5="ThemeModel",e3="ToolAvailabilityModel",e8="ToolsModel",e9="TrialSupportTicketsModel",e7="UploadingFile",te="UserModel"},733303:function(e,t,n){"use strict";n(407537),n(144152);var i=n(464027),r=n(376853),s=n(84741);let o=i.module("ultra.models",["restmod","angular-data.DSCacheFactory",r.e1,s.e1]);t.Z=o},330316:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},jj:function(){return s}}),n(407537);var i,r,s,o,a,l,c=n(658895),d=n(592246),u=n(733303),p=n(376853);(o=i||(i={})).Digest="D",o.Immediate="I",o.None="N",(a=r||(r={})).Enabled="A",a.Disabled="N",(l=s||(s={})).Everyone="E",l.Instructor="I";let m=d.q6;u.Z.factory(m,["restmod",p.xQ,e=>e.model().mix({$url:()=>c.default.apiBasePath+"/v1/notification/settings/generalSettings/course"})])},244085:function(e,t,n){"use strict";n.d(t,{H:function(){return o}}),n(407537);var i=n(658895),r=n(592246),s=n(733303);let o=r.mG;s.Z.factory(o,["restmod",e=>{let t=i.default.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},function(e){}).$asPromise()}}}})}])},826841:function(e,t,n){"use strict";n.d(t,{F:function(){return l},H:function(){return a}}),n(407537);var i=n(4695),r=n(592246),s=n(733303),o=n(376853);let a=r.gg;function l(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort((e,t)=>e.position-t.position),e.rows&&e.rows.length>0&&(e.rows.sort((e,t)=>e.position-t.position),e.rows.forEach(e=>{e.cells&&e.cells.length>0&&e.cells.sort((e,t)=>e.position-t.position)}))}function c(e){e.rows&&e.rows.length>0&&e.rows.forEach(t=>{t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=()=>t.header})}s.Z.factory(a,["restmod",o.xQ,(e,t)=>e.model().mix({$extend:{Record:{canDelete(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment(){return(0,i.xR)(i.F$.Rubric,this.id)},getContentTitleForGoalAlignment(){return this.title},saveAlignedGoals(e,t){let n;return t&&(n=t.map(e=>({goalId:e.id,isVisibleToStudent:!0,goal:e}))),e&&(this.rows=this.rows.map(t=>(t.id===e&&(t.alignedGoals=n),t))),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then(()=>{this.$getPreviousVersion()&&(this.$getPreviousVersion().rows=this.rows)})}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(l(e.data),c(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach(e=>{e.rows&&e.columnHeaders&&(l(e),c(e))}))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach((e,t)=>{e.position=t}),e.data.rows&&e.data.rows.forEach((e,t)=>{e.position=t,e.cells.forEach((e,t)=>{e.position=t})})}}})])},435181:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},Uf:function(){return p}}),n(407537);var i=n(276635),r=n(464027),s=n(658895),o=n(733303),a=n(592246),l=n(376853),c=n(351876),d=n(934455),u=n(986709);function p(e,t){if(!e&&!t)return 0;if(e&&!t)return -1;if(!e&&t)return 1;if(e&&t){if(e.familyName&&!t.familyName)return -1;if(!e.familyName&&t.familyName)return 1;if((e.familyName||t.familyName)&&e.familyName!==t.familyName){if(e.familyName&&t.familyName)return e.familyName.localeCompare(t.familyName)}else{if(!e.givenName&&!t.givenName)return 0;if(e.givenName&&!t.givenName)return -1;if(!e.givenName&&t.givenName)return 1;if((e.givenName||t.givenName)&&e.givenName!==t.givenName){if(e.givenName&&t.givenName)return e.givenName.localeCompare(t.givenName)}else{if(e.userName&&!t.userName)return -1;if(!e.userName&&t.userName)return 1;if(!e.userName&&!t.userName)return 0;if(e.userName&&t.userName)return e.userName.localeCompare(t.userName)}}}return 0}let m=a.xR,h=s.default.apiBasePath+"/v1/users";o.Z.factory(m,["$http","restmod","$q",l.xQ,(e,t,n,s)=>{let o=t.model(h).mix({calendarItems:{hasMany:a.Ei},memberships:{hasMany:a.YJ,hooks:{"before-fetch-many":function(t){t.params=t.params||{},i.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);let n=t.params.limit,s=t.params.offset,o=(t,i,a)=>e.get(t,{params:i}).then(e=>{if(!e||200!==e.status||!e.data||!e.data.results||!e.data.paging)return e;a=a||[];let i=e.data.results,l=e.data.paging;if(!((a=a.concat(i)).length>=n||i.length<l.limit)){let i=r.extend(r.copy(e.config.params),{offset:(s||0)+a.length});return a.length<n&&(i.limit=n-a.length),delete i.includeCount,o(t,i,a)}return e.data.results=a,e.data.paging.limit=n,e.data.paging.offset=s,e});t.cache={get:()=>o(t.url,t.params)}}}},blocks:{hasMany:a.IL},birthDate:{encode:e=>new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)),decode:e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0,0)}},isGuest(){return Array.isArray(this.systemRoles)&&this.systemRoles[0]===u.LJK.Guest},isAnonymousStudent(){return this.ui&&this.ui.anonymousStudent},isInstructor(){return this.memberships.some(e=>e.isActAsInstructorMembership())},isStudent(){return this.memberships.some(e=>e.isStudentMembership())},getInitials(){if(this.givenName&&this.familyName&&!c.bj(this.givenName)&&!c.bj(this.familyName)&&!c.DR(this.givenName)&&!c.DR(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection(e){let t=n.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},e=>{t.resolve(e.data)},e=>{t.reject(e)}),t.promise}}}});return o.getUserConfiguration=function(){let e=n.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:{visibleOnly:!0,[d.n]:Number.MAX_VALUE}},t=>{e.resolve(t.data)},t=>{e.reject(t)}).$allow([403]),e.promise},o.mixinUsers=s.getDataMixin((e,t)=>o.findMany(e,t,[404]),"userId","user"),o.getAnonymousStudent=e=>o.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}}),o}])},376853:function(e,t,n){"use strict";let i;n.d(t,{GH:function(){return m},Id:function(){return v},SY:function(){return b},e1:function(){return h},xQ:function(){return g},yA:function(){return f}}),n(407537),n(9576),n(578352);var r=n(625506),s=n(464027),o=n(276635),a=n(889450),l=n(618758),c=n(852127),d=n(84741),u=n(860995),p=n(473011);let m=e=>e,h="ultra.model.utilities",g="ultra.model.utilities.Utilities";function f(e,t){return null!=e?e:t}function b(e,t){return e.$isCollection?"PUT"===e.$response.config.method&&Array.isArray(t)?t.map(e=>e.statusCode>=200&&e.statusCode<300?s.fromJson(e.body):e.body):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results):t}class v{static isValid(e){return!o.isEmpty(e)&&/^_\d+_\d+$/.test(e)}}s.module(h,["restmod",c.e1,d.e1,l.e1]).factory(g,["$http","$q",(e,t)=>({getDataMixin:(e,n,i)=>(r,s)=>{let o=(s=s||{}).path||"",a=s.overrideIdKey,l=s.params;return t.when(r).then(r=>{let c=t.defer();if(null==r||0===r.length)return c.resolve(r),c.promise;let d={};r.forEach(e=>{let t=(o+"."+(a||n)).split(".").reduce((e,t)=>t?e&&e[t]:e,e);t&&(d[t]=d[t]||[]).push(e)});let u=Object.keys(d);return e(u,l).$asPromise().then(e=>{e.forEach((e,t)=>{d[u[t]].forEach(t=>{!function(e,t,n){let i=t.split(".");for(let t=0;t<i.length-1;t++)i[t]&&(e=e&&e[i[t]]);e&&(e[i[i.length-1]]=n)}(t,o+"."+(s.overrideResultKey||i),e)})}),c.resolve(r)}),c.promise})},createHooksToFetchParent:function(){function n(n,i){n.cache={get:()=>t.all([e(o.omit(n,"cache")),i.$resolve().$asPromise()]).then(([e])=>e)}}let i={"before-fetch-many":function(e){n(e,this.$scope.$scope)},"before-fetch":function(e){n(e,this.$scope.$scope.$scope)}};return function(e){return{"after-fetch-many":function(){this.forEach(t=>t[e]=this.$scope.$scope)},"after-fetch":function(){this[e]=this.$scope.$scope.$scope},...i}}}()})]).factory("DateSerializer",()=>({encode:e=>a.Z.parseDateToISOString(e),decode:e=>a.Z.parseStringToDate(e)})).filter("localDate",()=>e=>a.Z.convertToLocalDate(e)).factory("BbRestmodFindMany",["restmod","$q",d.HV,"restmod.Preload",(e,t,n)=>e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany(e,i,r){let o=this.$collection();return o.$always(()=>n.performBatch(n=>t.all(e.map(e=>{let t=this.$new(e).$fetch(s.extend({[d.aA]:n},i));return(r||[]).length>0?t.$allow(r).$asPromise():t.$asPromise()}))).then(e=>{e.forEach(e=>o.push(e))}))}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map(t=>{let n=s.copy(e.params);return delete n.ids,{method:"GET",relativeUrl:t+(n&&"?"+r.param(n)||"")}}),e.params&&delete e.params.ids}}})]).factory("BbApiStyle",["restmod",e=>e.mixin(function(){this.setProperty("style","BB").setProperty("primaryKey","id")})]).factory("BbEncodeUrl",["restmod","inflector",(e,t)=>e.mixin({$extend:{Model:{encodeUrlName(e){return t.camelize(e)}}}})]).factory("BbUi",["restmod",e=>e.mixin({ui:{mask:!0,init:()=>({})}})]).factory("BbWithParams",["restmod",e=>e.mixin({$extend:{Record:{withParams(e,t){let n=function(i){i.params||(i.params={}),Object.keys(e).forEach(n=>{t?i.params[n]=t(i.params[n],e[n],n):i.params[n]=e[n]}),this.$off("before-request",n)};return this.$on("before-request",n),this}}}})]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",c.HV,l.HV,(e,t,n,i,r,s)=>e.mixin({$hooks:{"after-request-error":function(){this.__bb_suppressErrorDialog||setTimeout(()=>{this.$then(()=>{},s.handle)})}}})]).factory("BbCheckStatusCode",["restmod",e=>e.mixin({$extend:{Resource:{isStatusCode(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})]).factory("BbPermissions",["restmod","restmod.Preload",e=>e.mixin({$extend:{Record:{canCreate(){return this.permissions&&this.permissions.create},canEdit(){return this.permissions&&this.permissions.edit},canDelete(){return this.permissions&&this.permissions.delete}}}})]).factory("BbPermissionsMask",["restmod",e=>e.mixin({permissions:{mask:"CU"}})]).factory("$ExtendRecord",["RMUtils",function(e){let t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(n,i){let r=this.$super.apply(this,arguments);if(void 0===this.$type)throw Error("NOT_FOUND_$MODEL");return(this.$type[t]||[]).some(t=>{let i=t(r,n);return!!i&&(e.extendOverriden(r,i),!0)}),r}}}}]).factory("BbExpandParams",["restmod",e=>{let t=function(e){return!!o.isString(e)&&""!==e.trim()},n=function(e){return Array.isArray(e)?e.filter(t):o.isString(e)?e.split(",").filter(t):[]},i=function(e){let t=n(e.config&&e.config.params&&e.config.params.expand);return new Set(t)},r=function(e,t=new Set){let i=n(e);return i.length<=0||i.every(e=>t.has(e))},s=Symbol("$expand_params"),a=function(e){return r(e&&e.expand||"",this[s])?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[s]=i(e)}},$extend:{"Record.$fetchIfNotExpanded":a,"Collection.$fetchIfNotExpanded":a}})}]).factory("BbExcludeCourseActivity",["restmod","$injector",(e,t)=>e.mixin({$hooks:{"before-request":function(e){let n=t.get(u.HV),i=e.url,r="GET"===e.method,s=!!n.courseId,o=/\/courses\/_\d+_1(\/gradebook\/(schemas|grades|columns|categories|summaries|attempts)|\/memberships|\/messageFolders|\/attendanceRecords|\/conversations|\/contents\/_\d)/.test(i);!s&&r&&o&&(e.url=(0,p.Ou)(i,"isExcludedFromCourseUserActivity","true"))}}})]).config(["restmodProvider",e=>{function t(e){e=e||[];let t=this.$promise=this.$promise||i.when(this),n=i.defer();return this.$promise=n.promise,t.then(e=>{n.resolve(e)},t=>{e.some(e=>{let n=[0];if("number"==typeof e)n[0]=e;else if("string"==typeof e){let t=e.split("-");n[0]=parseInt(t[0],10),n[1]=parseInt(t[1]||t[0],10)}return n[1]=n[1]||n[0],t&&t.$response.status>=n[0]&&t.$response.status<=n[1]})?n.resolve(t):n.reject(t)}),this}function n(){if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally(()=>{this.__bb_suppressErrorDialog=!1})}function r(e,t){let n=Object.create(null);return Object.keys(e).forEach(i=>{if("$"===i[0])return;let r=e[i];s.equals(r,t[i])||(n[i]=t[i])}),Object.keys(t).forEach(i=>{if("$"===i[0]||n[i])return;let r=t[i];s.equals(r,e[i])||(n[i]=r)}),function e(t,n){let i;let r=Object.keys(t),o=[];for(let a=0;a<r.length;a++)i=n?n+"."+r[a]:r[a],o.push(i),"$"!==r[a].charAt(0)&&t[r[a]]&&"object"==typeof t[r[a]]&&!s.isArray(t[r[a]])&&(o=o.concat(e(t[r[a]],i)));return o}(n,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase("BbExcludeCourseActivity"),e.rebase({$extend:{"Model.$mixHook":function(e,t,n){let i=this,r="$mixHook_"+e,s=r+"_hook";i[r]=i[r]||[],i[r].push(t),i[s]=i[s]||(0,o.once)(function(){i.mix({$hooks:{[e](...e){(i[r]||[]).forEach(t=>t&&t.apply(this,e))}}})}),i[s]();let a=(0,o.once)(()=>{(0,o.remove)(i[r],e=>e===t)});return n&&n.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":b,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":n,"Collection.$suppressErrorDialog":n,"Record.$revert":function(e){let t=e||this.$_ultra_previous_version,n=r(t,this.$encode("U")),i=this.constructor.$buildRaw(t);return n.forEach(e=>{this[e]=i[e]}),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return r(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){let t=r(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};let e=function(t){let n=this.$_ultra_patchHolder.changedKeys,i=this.$_ultra_patchHolder.data;n.forEach(e=>{t.data[e]=i[e]}),this.$off("before-update",e)};this.$on("before-update",e),this.$save(t)}else{let e={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[e])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce((e,t)=>(e["$"+t]=function(...e){let n=this.$collection();return n.push.apply(n,this[t].apply(this,e)),n},e),{})}})}]).run(["$q",e=>{i=e}])},842891:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c},t6:function(){return p}}),n(3744);var i=n(464027),r=n(625506),s=n(495794),o=n(385847),a=n(324686),l=n(88818);let c="ultra.services.accessibility",d="accessibility";class u{applyAccessibilityHandlingForPanel(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()}revertAccessibilityHandling(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()}_setActivePanel(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),r(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}_restoreActivePanel(){this.panelInfoStack.length<2&&(this._setActivePanel(r(document.body)),this._setActivePanel(r(document.body))),this.panelInfoStack.pop().panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,r(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()}ariaHideBackgroundElements(e=!0){let t=r('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")}ariaShowBackgroundElements(){if(this.backgroundElementsStack.length<1)throw r(".hide-in-background").attr("aria-hidden","false"),Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");this.backgroundElementsStack.pop().attr("aria-hidden","false")}setFocusOverrideOnPanel(e,t){if(!t)throw Error("A panel selector is required to override focus on a panel");for(let n=this.panelInfoStack.length-1;n>=0;n--)if(this.panelInfoStack[n].panelElement.find(t).addBack(t).length){this.panelInfoStack[n].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}}_storeFocusedElement(){let e=r(document.activeElement);!p.isLastNavigationByKeyboard&&p.lastClickedElement&&p.lastClickedElement.length&&(e=p.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e)}_restoreFocusedElement(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){let e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}let e=this.activePanel.data(this.FOCUSED_ELEMENT);e&&0!==e.length&&e.focus(),e&&e.length&&r(document.activeElement).is(e)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT)}_applyTabCapture(){this.activePanel.on("keydown",e=>{if(e.keyCode===o.Mf&&!this.currentPanelInfo.tabCalled){let e=this.activePanel.data("axMutationObserver");e||((e=new MutationObserver(()=>{this.currentPanelInfo.tabCalled=!1})).observe(this.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),this.activePanel.data("axMutationObserver",e));let t=r(this.activePanel).find("*").addBack();this._conditionallyUpdateSkipLinkFocus(),r(":tabbable, .ax-tabbable").not(".bb-ax-background-tabindex").add(r('a[tabindex!="-1"]').filter(function(){return 0===r(this).height()&&0===r(this).width()})).filter(function(){return 0===r(this).closest(".focus-handling-disabled").size()}).add(r('div.editor-element[tabindex!="-1"]')).not(t).not(r(".pagehelp-directive-link")).add(r('div.panel-wrap[tabindex!="-1"]')).each(function(){r(this).data("originalTabindex",this.getAttribute("tabindex"))}).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),this.currentPanelInfo.tabCalled=!0}})}_revertTabCapture(e,t){let n=t||r(document);n.find(".bb-ax-background-tabindex").each(function(){let e=r(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")}).removeClass("bb-ax-background-tabindex"),n.find("[data-ax-service-tab-capture-hack]").each(function(){let e=r(this);e.attr("tabindex",e.attr("data-ax-service-tab-capture-hack"))}),n.data("axMutationObserver")&&n.data("axMutationObserver").disconnect()}_revertTabCaptureForActivePanel(){this._revertTabCapture(this.currentPanelInfo)}_conditionallyUpdateSkipLinkFocus(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)}constructor(e){this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:r(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=()=>!!r(document.activeElement).closest(`.ms-FocusTrapZone, .${l.kIl}`).length,this.focusCorrectElementOnPanel=function(e=this.activePanel){this.isFocusDelayed=!1;let t=r(".ms-Callout");if(t&&t.length)return;let n=r(".ms-Modal");if(n&&n.length)return;let i=r(".datepicker-dropdown");if(i&&i.length)return;let o=r('div[class*="MuiDialogcontainer"]');if(o&&o.length)return;let a=r('div[data-analytics-id="course.outline.oneDriveFilePickerLTIModal"]');if(null==a?void 0:a.length)return;let l=r('div[class*="MuiPopoverroot"]');if(null==l?void 0:l.length)return;let c=r('div[class*="MuiDrawerroot"]');if((null==c?void 0:c.length)||this.isFocusedElementInFocusTrap())return;let d=e.find("[bb-focus]");if(d&&d.length){let e=d.first();if(e.trigger("focus"),this.elementHasFocus(e))return}let u=e.find("h1").filter(":visible");if(u&&u.length){let e=u.first();if(s.Zl(e),this.elementHasFocus(e))return}let p=e.find(":tabbable:not(.bb-close, .non-first-focus):first");p&&p.length&&(p.trigger("focus"),this.elementHasFocus(p))||s.Zl(e)},this.elementHasFocus=e=>e.is(r(document.activeElement)),this.isElementInActivePanel=e=>e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||this.isElementInPanel(this.activePanel,e),this.isElementInPanel=(e,t)=>e.is(t)||r.contains(e[0],r(t)[0]),this.applyFocusinHandler=()=>{r("body").off("focusin.axService"),r("body").on("focusin.axService",e=>{let t=r(e.target);this.isFocusDelayed||this.isElementInActivePanel(t)||this.focusCorrectElementOnPanel(this.activePanel)})},this.removeFocusinHandler=()=>{r("body").off("focusin.axService")},this.backgroundElementsStack=[],a.B(),this.applyFocusinHandler();let t=e=>{this.isElementInActivePanel(r(e.target))||this.removeFocusinHandler()};r("body").on("mousedown",t),e.$on("$destroy",()=>{r("body").off("mousedown",t)})}}u.isLastNavigationByKeyboard=!1,u.$inject=["$rootScope"];class p extends u{}i.module(c,[]).service(d,u)},669128:function(e,t,n){"use strict";n.d(t,{$_:function(){return u},Zh:function(){return d},e1:function(){return l},HV:function(){return c}});var i=n(464027),r=n(555840),s=n(312019),o=n(789915);class a{set groups(e){if(this.dueDateGroups=[],this.timeLimitGroups=[],null==e){this._groups=[];return}this._groups=e.filter(e=>(e.accommodation=o.sE.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&this.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&this.timeLimitGroups.push(e),e.accommodation.hasAccommodation))}get groups(){return this._groups}sortGroups(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)}refreshGroups(){null!=this.content&&(this.groups=this.content.assignedGroups)}set memberships(e){if(this.dueDateMembers=[],this.timeLimitMembers=[],null==e){this._memberships=[];return}this._memberships=e.filter(e=>{let t=e.accommodation();return t.dueDate.hasAccommodation&&this.dueDateMembers.push(e),t.timeLimit.hasAccommodation&&this.timeLimitMembers.push(e),t.hasAccommodation})}get memberships(){return this._memberships}get nGroups(){return this.groups.length}get nGroupsDueDate(){return this.groups.filter(e=>e.accommodation.dueDate.hasAccommodation).length}get nGroupsTimeLimit(){return this.groups.filter(e=>e.accommodation.timeLimit.hasAccommodation).length}get nUsers(){return this.counts.withAccommodationCount}get nUsersDueDate(){return this.counts.dueDateAccommodationCount}get nUsersTimeLimit(){return this.counts.timeLimitAccommodationCount}get isGroupContent(){if(null==this.content)return!1;let e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length}get nInstances(){return this.isGroupContent?this.nGroups:this.nUsers}get nInstancesDueDate(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate}get nInstancesTimeLimit(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit}get nInstancesShown(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}}get showAccommodation(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation}get showDueDateAccommodation(){return null!=this.content&&this.content.hasDueDate()&&this.content.getDueDate()&&this.hasDueDateAccommodation}get showTimeLimitAccommodation(){return null!=this.content&&this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation}get hasAccommodation(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation}get hasDueDateAccommodation(){return this.nInstancesDueDate>0}get hasTimeLimitAccommodation(){return this.nInstancesTimeLimit>0}constructor(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}}let l="ultra.services.accommodation.Service",c="accommodationService",d=["id","isAvailable","role","user.*","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions","user.rowStatus"],u=[...d,"displayOrder"],p=["alignedGoals","assignedGroups","isGroupContent"];class m{createContentAccommodation(e){let t=new a(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t}getContentAccommodation(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])}forceNewContentAccommodation(e){null!=e&&(this._invalidCache[e.id]=!0)}invalidateContentAccommodationOtherThan(e){null!=e&&Object.keys(this._cache).forEach(t=>{t!==e.id&&(this._invalidCache[t]=!0)})}refreshAccommodation(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))}fetchGroupsOrCounts(e){if(null!=e.content){if(null!=e.content.isGroupContent&&!e.isGroupContent){this.fetchCount(e.content.courseId,e);return}e.content.$fetch({fields:p.join(","),expand:"selfEnrollmentGroups.group"}).$then(t=>{e.refreshGroups(),e.isGroupContent||this.fetchCount(t.courseId,e)})}}sortGroupsByTitle(e){e.sortGroups((e,t)=>e.groupTitle.localeCompare(t.groupTitle))}fetchCount(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then(e=>{t.counts=e})}fetchMemberships(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then(e=>t.memberships=e)}constructor(e){this.courseModel=e,this._cache={},this._invalidCache={}}}m.$inject=[s.H],i.module(l,[r.e1]).service(c,class extends m{})},748382:function(e,t,n){"use strict";n.d(t,{HV:function(){return E},e1:function(){return C}});var i=n(276635),r=n(564470),s=n(860995),o=n(129609),a=n(729913),l=n(676954),c=n(658895),d=n(985536),u=n(555840),p=n(473011),m=n(302032),h=n(789423),g=n(825986),f=n(411832),b=n(12838),v=n(872491),y=n(567361);function S(e,t){return function(n,i){t(n,i,e)}}let C="ultra.service.ally",E="ally",I="privileged";class w{isAvailable(){return(0,h.h)(this.service.isAvailableFull())}isAllySupportedContentItem(e){return this.service.isAllySupportedContentItem(e)}getXythosIdFromContentItem(e){return this.service.getXythosIdFromContentItem(e)}update(e,t,n){this.service.update(e,t,n)}isAllyInstructor(){return this.service.isAllyInstructor()}constructor(e){this.service=e,this.key=g.fz.Ally}}class A{getContentById(e){let t=this.contextCourse.course,n=this.contentService.findRootNode(t,u.courseContent.e6.Root);return this.contentService.getContentInContentTree(n,t.courseId,e).then(e=>e.content)}downloadAlternativeFormat(e){window.open(e,"_blank","noopener")}updateReviewStateForLaunchedContent(e){(0,v.dZ)(e)}getAllySettings(){return this._allyConfig?this.$q.resolve(this._allyConfig):this.allyModel.getAllyConfig().then(e=>this._allyConfig=e)}getExpireMillisFromToken(e){return 1e3*d(e.authToken).exp}isAvailable(){return this.getAllySettings().then(e=>e.serviceAvailable||e.freemiumServiceAvailable)}isAvailableFull(){return this.getAllySettings().then(e=>e.serviceAvailable)}getXythosIdFromContentFileUrl(e){let t=/(?:xid|_xy)-([^&]*)/.exec(e),n=t&&t[1];return n&&"_"!==n.substr(0,1)&&(n="_"+n),n}getXythosIdFromContentItem(e){let t=i.get(e,"contentDetail['resource/x-bb-file'].file.permanentUrl");if(t)return this.getXythosIdFromContentFileUrl(t)}isAllySupportedContentItem(e){return e.isFile()&&!e.isConditionalReleaseLocked()}disable(){this._allyConfig?(this._allyConfig.serviceAvailable=!1,this._allyConfig.freemiumServiceAvailable=!1):this._allyConfig={freemiumServiceAvailable:!1,serviceAvailable:!1}}ensureAlly(){let e=this,t=this.$q.defer();return this.ally?t.resolve():this.getAllySettings().then(n=>{if(n.serviceAvailable||n.freemiumServiceAvailable){let i;let r=!1,s=(e,n)=>{r||(e?t.resolve():(this.disable(),n&&console.error(n),t.reject()),r=!0,this.$timeout.cancel(i))};i=this.$timeout(()=>{s(!1,"Ally initialization timed out.  Disabling Ally Service.")},c.default.allyInitializationTimeout||1e4);let o=n.freemiumServiceAvailable?n.freemiumJavascriptUrl:n.javascriptUrl;this.bbScriptLoader.getScript(o,{attributes:{"data-ally-loader":""},exports:"ally"}).then(t=>{e.ally=t;try{e.ally.ready(()=>{s(!0)})}catch(e){console.error(e),s(!1,"Ally initialization error.  Disabling Ally Service.")}}).catch(()=>{s(!1,"Failed to load ally.js.  Disabling Ally Service.")})}else t.resolve()}),t.promise}getRole(){return this.entitlementService.isEntitled(b.eo.ModifyContent)?I:"unprivileged"}isAllyInstructor(){return this.getRole()===I}destroyCurrentAllyInstance(){this.cachedTokensMap.clear();let e=this.$q.defer();return this._xythosIdToInstructorFeedbackUpdateCallbackMap.clear(),this.allyUI?this.allyUI.destroy().then(()=>{e.resolve()}):e.resolve(),e.promise}ensureAllyUI(e){if(this.allyLoadInProgressPromise)return this.allyLoadInProgressPromise;let t="string"==typeof e?e:this.bbLocalize.getLocale(e),n=this.$q.defer();return this.allyLoadInProgressPromise=n.promise,this.ensureAlly().then(()=>{this.getAllySettings().then(e=>{if(e.serviceAvailable&&(this.currentCourseId!==this.contextCourse.courseId||this.currentLocale!==t)){this.currentCourseId!==this.contextCourse.courseId&&(this._xythosIdToContentIdMap={}),this.currentCourseId=this.contextCourse.courseId,this.currentLocale=t;let i={alternativeformats:{callbacks:{closed(){},formatGenerated:e=>this.downloadAlternativeFormat(e.url),alternativeFormatAccessed:e=>{let t=e.contentId;return this.getContentById(t).then(e=>{this.updateReviewStateForLaunchedContent(e)})}}},client:{auth:this.getToken.bind(this),baseUrl:p.SV(e.ltiUrl),clientId:e.clientId},courseId:this.currentCourseId,locale:this.currentLocale,platformName:"learn",role:this.getRole(),instructorfeedback:{callbacks:{closed:()=>{this.allyUI.client.clearAllFromCache(),this.allyUI.update()},deleted:e=>void 0,replacedFile:(e,t)=>void 0,updated:e=>{this.instructorFeedbackUpdateCallback(e)},fixHtmlIssue:()=>void 0}}};c.default.features.devtools_allyMock&&(this.allyMock=this.ally.ui.$mock(this._mockCourses,void 0),i.client.jQuery=this.allyMock),this.destroyCurrentAllyInstance().then(()=>{this.allyUI=this.ally.ui(i),this.allyUI.autoUpdate({domWatch:c.default.allyAutoUpdateInterval||500}).then(()=>{this.allyLoadInProgressPromise=void 0,n.resolve()})})}else this.allyLoadInProgressPromise=void 0,n.resolve()})}).catch(()=>{this.allyLoadInProgressPromise=void 0,n.reject()}),this.allyLoadInProgressPromise}update(e,t,n){this.isAvailable().then(i=>{if(i){let i="string"==typeof e?e:this.bbLocalize.getLocale(e);this.ensureAllyUI(i).then(()=>{t&&n&&(this._xythosIdToContentIdMap[n]=t,this.allyUI.client.clearFileIdFromCache(n)),this.registerMockFileReference(n)})}})}registerMockFileReference(e){c.default.features.devtools_allyMock&&e&&(i.merge(this._mockCourses,{[this.currentCourseId]:{File:{[e]:{availableAlternativeFormats:["Tts","Epub","Translation","Braille","Html"],creator:null,decorative:null,description:"mock file",id:e,isVersioned:!1,libraryReference:null,name:"mockfile",producer:null,results:{},score:.75,size:12345,suggestions:{},type:"pdf"}},RichContent:{}}}),this.allyMock.set(this._mockCourses))}fileUploadEvent(){!this._clearCacheInterval&&this.isAllyInstructor()&&(this._clearCacheInterval=this.$interval(()=>{this.allyUI&&this.allyUI.client&&this.allyUI.client.clearAllFromCache()},c.default.allyClearCacheInterval||1e4,0,!1))}getIndexMapFromBbML(e){let t=new Map;if(!e)return t;let n=e.match(/(<a[^>]+)/gi)||[],i=0;return n.forEach(e=>{if(e.includes('data-bbfile="')){let n=e.match(/href="[^"]+xid-([0-9_]+)/)||[];n.length>=2&&("_"!==n[1].substr(0,1)&&(n[1]="_"+n[1]),t.set(n[1],i)),i++}}),t}instructorFeedbackUpdateCallback(e){let t=this._xythosIdToInstructorFeedbackUpdateCallbackMap.get(e.id);t&&t(e)}onUpdate(e,t,n){e===r.H1.InstructorFeedback&&this._xythosIdToInstructorFeedbackUpdateCallbackMap.set(t,n)}destroyListeners(e){this._xythosIdToInstructorFeedbackUpdateCallbackMap.delete(e)}getReactService(e){return{getXythosIdFromContentFileUrl:this.getXythosIdFromContentFileUrl.bind(this),update:(t,n)=>this.update(e,t,n),isAvailable:()=>(0,h.h)(this.isAvailableFull()),getIndexMapFromBbML:this.getIndexMapFromBbML.bind(this),onUpdate:this.onUpdate.bind(this),destroyListeners:this.destroyListeners.bind(this)}}constructor(e,t,n,i,r,s,o,a,l,c){this.$q=e,this.$timeout=t,this.$interval=n,this.allyModel=i,this.contextCourse=r,this.contextCourseMembership=s,this.bbLocalize=o,this.bbScriptLoader=a,this.entitlementService=l,this.contentService=c,this.cachedTokensMap=new Map,this._mockCourses={},this._xythosIdToContentIdMap={},this._xythosIdToInstructorFeedbackUpdateCallbackMap=new Map,this.getToken=e=>{let t=e?this._xythosIdToContentIdMap[e]:void 0;return this.cachedTokensMap.has(e)&&Date.now()<this.cachedTokensMap.get(e).exp?this.$q.resolve(this.cachedTokensMap.get(e).token):this.allyModel.getAllyToken(this.contextCourse.courseId,t).then(t=>{let n=this.getExpireMillisFromToken(t),i={bearer:t.authToken};return this.cachedTokensMap.set(e,{token:i,exp:n}),i})},(0,g.gM)(new w(this))}}A=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([S(0,(0,m.tB)("$q")),S(1,(0,m.tB)("$timeout")),S(2,(0,m.tB)("$interval")),S(3,(0,m.tB)(u._F.H)),S(4,(0,m.tB)(s.HV)),S(5,(0,m.tB)(o.HV)),S(6,(0,m.tB)(l.serviceName)),S(7,(0,m.tB)(a.HV)),S(8,(0,m.tB)(f.HV)),S(9,(0,m.tB)(y.HV))],A),angular.module(C,[s.e1,o.e1,l.moduleName,a.e1,f.e1,y.e1]).service(E,A)},274476:function(e,t,n){"use strict";n.d(t,{VL:function(){return i}});let i="ANALYTICS_HISTORY";t.ZP=new class{setStorage(e,t){return this.browserStorage=e,this.storageType=t,this.getHistoryFromStorage().then(e=>(e&&(this.analytics=e.concat(this.analytics),this.setMaxHistorySize(this.maxHistorySize)),e))}addHistory(e){var t;this.analytics.push({action:e.action,analyticsId:e.analyticsId,screenDimension:e.screenDimension,timestamp:new Date().toUTCString()}),this.analytics.length>this.maxHistorySize&&this.analytics.shift(),null===(t=this.browserStorage)||void 0===t||t.saveToStorage(this.storageKey,this.analytics,this.storageType)}getHistoryFromStorage(){return this.browserStorage?(this.historyRestoredPromise=Promise.resolve(this.browserStorage.getFromStorage(this.storageKey,this.storageType)),this.historyRestoredPromise):Promise.resolve(void 0)}async getHistory(){return await this.historyRestoredPromise,this.analytics}clearHistory(){var e;this.historyRestoredPromise=null,this.analytics=[],null===(e=this.browserStorage)||void 0===e||e.saveToStorage(this.storageKey,this.analytics,this.storageType)}setMaxHistorySize(e){e>0&&Number.isInteger(e)&&(this.maxHistorySize=e,this.analytics=this.analytics.slice(-this.maxHistorySize))}constructor(){this.analytics=[],this.maxHistorySize=30,this.storageKey=i}}},109504:function(e,t,n){"use strict";function i(e){var t;return!!(null==e?void 0:null===(t=e.closest)||void 0===t?void 0:t.call(e,"[data-no-angulartics-click]"))}function r(e){if(e&&e.length)return e.closest("[bb-click-to-invoke-child]").length>0?e.attr("analytics-id"):e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function s(e){if(e&&e.length)return e.closest("[analytics-id]").attr("analytics-id")||(e.attr("[bb-click-to-invoke-child]")||e.closest("[bb-click-to-invoke-child]").length>0?e.find("[analytics-id]").attr("analytics-id")||e.closest("[bb-click-to-invoke-child]").find("[analytics-id]").attr("analytics-id"):void 0)}n.d(t,{$o:function(){return function e(t){if(t&&t.length)return t.attr("analytics-context")||e(t.parent())}},CY:function(){return function e(t){if(t&&t.length)switch((t.prop("tagName")||"").toLowerCase()){case"a":case"input":case"button":return r(t);default:return e(t.parent())}}},IK:function(){return r},X_:function(){return function e(t){return!!t&&!!t.length&&(t.hasClass("bb-editor")||t.is("[analytics-on]")||e(t.parent()))}},c1:function(){return i},li:function(){return s}})},934455:function(e,t,n){"use strict";n.d(t,{e:function(){return o},n:function(){return a}});var i=n(464027),r=n(276635),s=n(658895);let o="ultra.components.services.angular.http.ease",a="shelfLifeInEase";class l{enqueue(e){e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;let t=this.$q.defer(),n=new Date().getTime();if(!r.some(this._queue,(i,r)=>{let s;return!!i&&(i.completedAt&&n-i.completedAt>i.shelfLifeInEase?(this._queue[r]=void 0,!1):((i.originalUrl||i.url)===(e.originalUrl||e.url)&&(s=this.isServableBy(i,e)),!!s&&(i.httpEaseResponseQ.promise.then(e=>{this.$q.when(s(e)).then(e=>{t.resolve(e)})}),!0)))})){let n="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally(()=>{e.completedAt=new Date().getTime()}),this._queue[n]=e,t.resolve()}return t.promise}getHttpInterceptor(){let e=e=>t=>{let n=t.config||t;return this.isDebouncable(n)?e(n,t):this.$q.when(t)};return{request:e(e=>e.cache?e:this.enqueue(e).then(t=>void 0===t?e:r.extend(e,{method:"JSONP",cache:{get:()=>t}}))),responseError:e=>{let t=e.config;return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([e.status,JSON.parse(JSON.stringify(e.data)),{}]),this.$q.reject(e)},response:e((e,t)=>(e.httpEaseResponseQ&&e.httpEaseResponseQ.resolve([t.status,void 0===t.data?void 0:JSON.parse(JSON.stringify(t.data)),{}]),this.$q.when(t)))}}isDebouncable(e){return s.default.features.httpEase&&"GET"===e.method&&/^(http.+)?(\/learn\/api\/.*)$/.test(e.url)}isServableBy(e,t){if(e.method!==t.method)return null;let n=(()=>{let n=e=>{let t=[];return r(e).keys().sortBy().value().forEach(n=>{"expand"!==n&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(e[n])}`)}),t.join("&")};return n(e.params)===n(t.params)})(),i=(()=>{let n={};return((e.params||{}).expand||"").split(",").forEach(e=>{""!==e&&(n[e]=e)}),((t.params||{}).expand||"").split(",").every(e=>""===e||Object.prototype.hasOwnProperty.call(n,e))})();if(n&&i)return this.$log.debug(`Eased ${t.url}`,e,t),e=>e;this.$log.warn(`Concurrent Requests Captured - "${t.method} ${t.url}" (with different parameters). Please consider to merge them for performance`)}constructor(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}}l.$inject=["$q","$log"];let c=i.module(o,["ng"]);s.default.features.learnApiCaching||c.config(["$httpProvider",function(e){e.interceptors.push(["$injector",e=>e.instantiate(l).getHttpInterceptor()])}])},751597:function(e,t,n){"use strict";n.d(t,{HV:function(){return b},NZ:function(){return r},c$:function(){return E},dr:function(){return I},e:function(){return w},e1:function(){return f},l6:function(){return C},xU:function(){return S}});var i,r,s=n(276635),o=n(464027),a=n(555840),l=n(65783),c=n(676954),d=n(259197),u=n(986709),p=n(280903),m=n(302032),h=n(57218);function g(e,t){return function(n,i){t(n,i,e)}}let f="ultra.services.assessment",b="assessment",v="assessment-exception",y="components.services.assessment.feedbackModeDisplay.afterIndividualGradePosted",S="components.services.assessment.feedbackModeDisplay.noneSpecified",C="course.content.assessment.feedbackOption",E=[u.lrm.UserAnswers,u.lrm.InstructorFeedback,u.lrm.Score,u.lrm.CorrectAnswers],I={[u.lrm.UserAnswers]:{visible:"visible",invisible:"invisible"},[u.lrm.InstructorFeedback]:{visible:"feedback",invisible:"feedback"},[u.lrm.Score]:{visible:"grade",invisible:"grade"},[u.lrm.CorrectAnswers]:{visible:"check-circle",invisible:"check-circle"}};(i=r||(r={})).FOLDER="folder",i.ASSESSMENT="assessment",i.BANK="bank";class w{static isAssessment(e){return a.courseContent.ContentHandler.TestLink.isEqualTo(e.contentHandler)||a.courseContent.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)}static isExternalSubmissionsAssessment(e){return d.AaE.isExternalSubmissionsAssessment(e)}static isExternalSubmissionByDeployedAssessment(e){var t;return!!(null==e?void 0:null===(t=e.deploymentSettings)||void 0===t?void 0:t.isCollectExternalSubmissions)}static getQuestionsForAttempt(e,t){if(!e.getToolAttemptDetailItem(t))return[];let n=e.getToolAttemptDetailItem(t).questionAttempts;return n&&n.length>0?n.map(e=>e.question):[]}static studentCanViewAttemptGradeAndFeedback(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):this.studentCanViewAttemptResults(e)}static studentCanViewAttemptResults(e){return!!(null==e?void 0:e.isCompleted())}static attemptHasFeedback(e){let t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText}static groupAttemptHasIndividualFeedback(e){let t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText}static canViewAssessmentException(e,t,n,i){return!e&&!t&&n&&!i}static getSubmissionListAllExceptions(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()}static initAssessmentExceptionsIndicators(e,t){return null==e||null==t||void 0===t.getDeployedAssessment()?null:this.getSubmissionListAllExceptions(e,t).then(n=>this.generateCssStyle(e,t,n))}static generateCssStyle(e,t,n){let i={},r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),s=this.setAssessmentExceptionStyleTag(r.id)();return n.length&&n.forEach(t=>{this.setAssessmentExceptionClass(s,e.id,t,!0,i)}),s}static updateAssessmentExceptionIndicator(e,t,n=!0,i){if(null==e||null==t)return;let r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),s=this.setAssessmentExceptionStyleTag(r.id)();this.setAssessmentExceptionClass(s,e.id,i,n)}static setAssessmentExceptionStyleTag(e){let t="css_assessment_exceptions"+e;return s.once(()=>{let e=o.element(document).find(`#${t}`);return 0===e.length&&(e=o.element(`<style id="${t}"></style>`).appendTo("head")),e})}static setAssessmentExceptionClass(e,t,n,i=!0,r){let o;let a=new p.h,l=i?"inline-block":"none",c=n.target.id,d=n.target.type;d===u.Crd.User&&a.selector(`.cc${t} .${v} bb-username.course_user${c}:before`).rule("display",l),d===u.Crd.Group&&(a.selector(`.cc${t} .${v} .show-exceptions.submission_row_group${c}:before`).rule("display",l),a.selector(`.cc${t} .slick_title${c} .${v} .show-exceptions:before`).rule("display",l),a.selector(`.cc${t} .assign_group${c}.show-exceptions:before`).rule("display",l)),r&&(r[c]=a.build(),o=s(r).sortBy().map((e,t)=>e).join("\n")),o&&o!==e.text()&&e.text(o),o||(o=e.text(),e.text([o,a.build()].join("\n")))}static getSubmissionRowException(e,t,n,i){let r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return n===u.Crd.Group?r.groupExceptions.$new(i).$resolve().$allow([404]).$asPromise():n===u.Crd.User?r.userExceptions.$new(i).$resolve().$allow([404]).$asPromise():void 0}static deleteException(e,t,n,i){let r=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return n===u.Crd.User?r.userExceptions.$new(i).deleteException():n===u.Crd.Group?r.groupExceptions.$new(i).deleteException():void 0}static setSubmissionRowException(e,t,n,i,r){let s=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o={start:r.start,end:r.end,attempts:r.attempts};return n===u.Crd.User?s.userExceptions.$new(i).saveException(o):n===u.Crd.Group?s.groupExceptions.$new(i).saveException(o):void 0}static isFeedbackOptionEnabled(e,t){let{mode:n}=d.eu1.getFeedbackModeByOption(e,t);return null!=n}isUserAnswersOption(e){return e===u.lrm.UserAnswers}getFeedbackModeLabelByOption(e,t){let{mode:n,associatedDate:i}=d.eu1.getFeedbackModeByOption(e,t);return n?this.localizeService.loadBundle("components/services/assessment").then(()=>{switch(n){case u.M6Z.AfterAttemptGraded:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterPosted"});case u.M6Z.AfterDueDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.afterDueDate"});case u.M6Z.AfterSubmission:{let t=e===u.lrm.Score||e===u.lrm.CorrectAnswers;return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:t?y:"components.services.assessment.feedbackModeDisplay.afterSubmission"})}case u.M6Z.OnSpecifiedDate:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"components.services.assessment.feedbackModeDisplay.onSpecificDate",params:{date:i},noWrap:!0});case u.M6Z.AfterIndividualGradeIsPosted:return this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:y});default:console.error(`Feedback mode: ${n} is not yet supported`)}}):this.$q.resolve(null)}getFeedbackModeLabels(e,t){let n=e.map(e=>this.getFeedbackModeLabelByOption(e,t));return this.$q.all(n)}isAfterIndividualGradeIsPostedFeedbackMode(e,t){switch(e){case u.lrm.UserAnswers:return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterIndividualGradeIsPosted;case u.lrm.CorrectAnswers:case u.lrm.Score:return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterSubmission;default:return!1}}isAfterAllGradesArePostedFeedbackMode(e,t){return d.eu1.getFeedbackModeByOption(e,t).mode===u.M6Z.AfterAttemptGraded}isExternallyRefQuestionsAPIError(e){return 409===e.status&&s.includes(e.code,u.BnC)}openHasExternallyRefQuestionsModal(e){let t=this.$rootScope.$new();t.translateOpts={title:{key:`components.services.assessment.modal.error-external-questions.${e.toString()}.title`}},t.descriptionKey=`components.services.assessment.modal.error-external-questions.${e.toString()}.description`;let n={scope:t,template:h,resolve:{translations:[c.serviceName,e=>e.loadBundle("components/services/assessment")]}};this.modal.open(n)}launchAttempt(e,t,n,i){let r={scoreProviderHandle:d.u$1.Test,status:u.I$9.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:u.IQK.Test,password:t}}},s=n?this.GroupAttemptModel.$build(r):this.AttemptModel.$build(r);return e.launchAttempt(s,{},n,i).then(e=>{var t,n;return(null==e?void 0:null===(n=e.$response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.status)===u.oji.Forbidden?e.$asPromise():e.$fetch({expand:"toolAttemptDetail,alignedGoals"}).$asPromise()})}constructor(e,t,n,i,r,s){this.modal=e,this.$rootScope=t,this.$q=n,this.localizeService=i,this.AttemptModel=r,this.GroupAttemptModel=s}}w=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([g(0,(0,m.tB)(l.HV)),g(1,(0,m.tB)("$rootScope")),g(2,(0,m.tB)("$q")),g(3,(0,m.tB)(c.serviceName)),g(4,(0,m.tB)(a.U_.serviceName)),g(5,(0,m.tB)(a.uy.HV))],w),o.module(f,[l.e1]).service(b,w)},302990:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(464027),r=n(302032),s=n(563060),o=n(649955),a=n(808361),l=n(920092),c=n(51914),d=n(259197);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.services.assessment.attemptSelectionService",m="attemptSelectionService";class h{goToMultipleAttemptsGrading(e,t){let{attemptId:n,groupAttemptId:i,columnId:r,courseId:o,gradeId:a,userId:l}=e,u=t.isGroupContent(),p=!u&&this.scoreProviderHelperService.isFlexGradingAvailable(t,{})?s.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:s.RK.SUBMISSION_GRADING;return(d.u$1.Survey.isEqualTo(t.scoreProviderHandle)&&(p=s.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING),u&&(p=s.RK.GROUP_SUBMISSION_GRADING),(n||i)&&a)?this.ultraStateService.goPeekState(p,{...e}):(t.anonymousGrading?t.grades.$find(a).$asPromise():this.gradeService.loadGrade({columnId:r,courseId:o,userId:l,gradeQueryParams:{userId:l,includeUnpostedGrade:!0}},!1)).then(n=>n.attempts.$fetch().$asPromise().then(i=>{let r=(0,c.w)(i,n,t),s=u?r.groupAttemptId:r.id;return this.ultraStateService.goPeekState(p,{...e,attemptId:s,gradeId:n.id,groupAttemptId:u?s:void 0})}))}constructor(e,t,n){this.gradeService=e,this.ultraStateService=t,this.scoreProviderHelperService=n}}h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,r.tB)(o.HV)),u(1,(0,r.tB)(a.HV)),u(2,(0,r.tB)(l.HV))],h),i.module(p,[o.e1,a.e1]).service(m,h)},51914:function(e,t,n){"use strict";n.d(t,{m:function(){return s},w:function(){return o}});var i=n(124854);let r=e=>(0,i.parseAttemptAggregationModel)(e)||i.defaultAttemptAggregationModel,s=(e,t)=>{switch(e){case i.AttemptAggregationModel.Average:return t.lastAttemptId;case i.AttemptAggregationModel.First:return t.firstAttemptId;case i.AttemptAggregationModel.Highest:return t.highestAttemptId;case i.AttemptAggregationModel.Last:return t.lastAttemptId;case i.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}},o=(e,t,n)=>{let o=e.filter(e=>!e.isInProgress()),a=o.filter(e=>{var t;return(null===(t=e.grade)||void 0===t?void 0:t.trim().length)===0}),l=0===a.length,c=l?o[o.length-1]:a[a.length-1];if(null==n?void 0:n.anonymousGrading)return c;let d=r(null==n?void 0:n.aggregationModel),u=s(d,t),p=o.find(e=>e.id===u);if(!p)return c;switch(d){case i.AttemptAggregationModel.Average:return c;case i.AttemptAggregationModel.Highest:case i.AttemptAggregationModel.Lowest:return l?p:c;case i.AttemptAggregationModel.First:case i.AttemptAggregationModel.Last:return p;default:return c}}},745367:function(e,t,n){"use strict";n.d(t,{YG:function(){return r},f8:function(){return s}});let i="peer-review-assigned";function r(e,t){return e.$broadcast(i,t.listIndex,t.reviewableAttempt)}function s(e,t){return e.$on(i,t)}},96710:function(e,t,n){"use strict";n.d(t,{HV:function(){return w},e1:function(){return I}});var i=n(889450),r=n(325135),s=n(464027),o=n(825986),a=n(789423),l=n(259197),c=n(986709),d=n(276635),u=n(118717),p=n(302032),m=n(563060),h=n(808361),g=n(891886),f=n(65783),b=n(676954),v=n(362767),y=n(499574),S=n(745367);function C(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function E(e,t){return function(n,i){t(n,i,e)}}let I="ultra.components.services.assessment.peerReview",w="peerReview";class A{initPeerContentObject(){this.subscribeToReduxStore();let{courseId:e,contentId:t,columnId:n}=this,i=[];return this.content||i.push(this.loadContents({courseId:e,contentId:t}).then(()=>this)),this.column||i.push(this.loadGradebookColumn({courseId:e,columnId:n}).then(()=>this)),this.$q.all(i).then(()=>this)}subscribeToReduxStore(){this.unsubscribeFromReduxStore=this.$ngRedux.connect(e=>{var t;let n=this.courseId,i=this.columnId,r=this.contextUser.userId,s=(0,d.sortBy)(l.Ys.gradebookAttempt.getReviewableGradebookAttempts(e,n,i,r),["delegatedGraderOrder"]),o=l.Ys.gradebookAttempt.getDeletedReviewableGradebookAttempts(e,i);return{reviewableAttemptsOnly:s,deletedAttemptsOnly:o,content:l.Ys.content.getContentById(e,this.contentId),column:l.Ys.gradebookColumn.getGradebookColumnById(e,i),assessmentHasEnoughSubmissions:null===(t=l.Ys.assessment.getAssessmentByContentId(e,this.contentId))||void 0===t?void 0:t.hasEnoughPeerSubmissions}},e=>(0,u.DE)({assignNewAttemptForPeerReview:l.Nwg.gradebookAttempt.assignNewAttemptForPeerReview,loadGradebookAttemptsByColumnId:l.Nwg.gradebookAttempt.loadGradebookAttemptsByColumnId,loadGradebookColumn:l.Nwg.gradebookColumn.loadGradebookColumn,loadContents:l.Nwg.content.loadContents},e))(this)}canPeerViewAttempt(e,t){if(!this.peerGrading||!t)return!1;let n=this.reviewableAttempts.some(e=>e.id===t.id),i=this.contextUser.userId===t.userId;return!!(n||i)}canDelegatedReconcileAttempt(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)}canPeerReviewAttempt(e,t){return this.canPeerViewAttempt(e,t)&&t.userId!==this.contextUser.userId&&!this.canDelegatedReconcileAttempt(e)}canPeerAddFeedbackToAttempt(e,t){return this.canPeerReviewAttempt(e,t)&&!t.isReconciled()&&c.I$9.Completed!==t.status}get completedPeerReviews(){return this.peerGrading?this.reviewableAttempts.filter(e=>c.I$9.Completed===(null==e?void 0:e.status)).length:0}openNotEnoughStudentSubmissionsModal(){let e=this.$rootScope.$new();e.translateOpts={title:{key:"components.services.peer-review.modal.error-not-enough-submissions.title"}},e.descriptionKey="components.services.peer-review.modal.error-not-enough-submissions.description";let t={scope:e,template:y,resolve:{translations:[b.serviceName,e=>e.loadBundle("components/services/peer-review")]}};this.modal.open(t)}getReviewableAttemptByDelegatedGraderOrder(e){return this.reviewableAttempts.find(t=>t.delegatedGraderOrder===e)}assignNewPeerReview(){if(!this.peerGrading||this.reviewableAttempts.length===this.numOfPeerReviewsToComplete)return this.$q.resolve(null);let e=this.hasDeletedAttempts?this.deletedAttempts[0].delegatedGraderOrder:null;return this.$q.when(this.assignNewAttemptForPeerReview({courseId:this.column.courseId,columnId:this.column.id,userId:this.contextUser.userId})).then(()=>{let t=null!=e?e:this.reviewableAttempts.length-1;return(0,S.YG)(this.$rootScope,{listIndex:t,reviewableAttempt:this.reviewableAttempts[t]}),this.reviewableAttempts[t]}).catch(e=>{throw e instanceof l.jMP&&this.openNotEnoughStudentSubmissionsModal(),e})}navigateToPeerReview(e){if(!this.peerGrading)return this.$q.resolve();if(null===this.getReviewableAttemptByDelegatedGraderOrder(e))return this.$q.reject(Error("Cannot navigate to a row that does not exist"));let t=this.getReviewableAttemptByDelegatedGraderOrder(e),n={courseId:this.column.courseId,columnId:this.column.id,userId:this.contextUser.userId,attemptId:null==t?void 0:t.id,gradeId:null==t?void 0:t.gradeId,initialPeerIndex:e};return this.ultraState.goPeekState(`${m.eJ.ASSESSMENT_PEER_GRADING}`,n)}loadReviewableAttempts(){var e;return!this.peerGrading||this.loadReviewableAttemptsPromise||this.hasLoadedReviewableAttempts?null!==(e=this.loadReviewableAttemptsPromise)&&void 0!==e?e:this.$q.resolve(this):(this.loadReviewableAttemptsPromise=this.$q.when(this.loadGradebookAttemptsByColumnId({courseId:this.column.courseId,columnId:this.column.id,reviewableAttemptsOnly:!0})).then(()=>(this.hasLoadedReviewableAttempts=!0,this)),this.loadReviewableAttemptsPromise)}get reviewableAttempts(){var e;return this.peerGrading&&null!==(e=this.reviewableAttemptsOnly)&&void 0!==e?e:[]}get deletedAttempts(){var e;return this.peerGrading&&null!==(e=this.deletedAttemptsOnly)&&void 0!==e?e:[]}get hasEnoughSubmissionsForPeerAssessment(){var e;return null!==(e=this.assessmentHasEnoughSubmissions)&&void 0!==e&&e}get hasDeletedAttempts(){return this.deletedAttempts.length>0}get numberOfLatePeerReviews(){return this.peerGrading?this.reviewableAttempts.filter(e=>this.isAfterPeerReviewDueDate(e.attemptLastGradedDate)&&c.I$9.Completed===e.status).length:null}get numberOfStartedPeerReviews(){return this.peerGrading?this.reviewableAttempts.filter(e=>c.I$9.NeedsGrading===e.status).length+this.deletedAttempts.length:null}get peerGrading(){var e;return!!(null===(e=this.column)||void 0===e?void 0:e.peerGrading)}get numOfPeerReviewsToComplete(){var e;return this.peerGrading?null===(e=this.content.peerSettings)||void 0===e?void 0:e.peerReviewsPerStudent:null}parseCurrentStringToDateAndMemoize(e){return i.Z.parseStringToDate(e)}get peerSubmissionDueDate(){return this.peerGrading?this.parseCurrentStringToDateAndMemoize(this.column.dueDate):null}get peerReviewDueDate(){var e;return this.peerGrading?this.parseCurrentStringToDateAndMemoize(null===(e=this.content.peerSettings)||void 0===e?void 0:e.peerReviewDueDate):null}get allowLatePeerReviews(){return!!this.peerGrading&&!!this.content.peerSettings.allowLatePeerReviews}get isPeerGradingConfigured(){return!!this.peerGrading&&null!=this.numOfPeerReviewsToComplete&&null!=this.peerReviewDueDate}get isInPeerReviewWindow(){return!this.isAfterPeerReviewDueDate()&&this.isAfterPeerSubmissionDueDate()}get isAfterPeerReviewWindow(){return this.isAfterPeerReviewDueDate()}isAfterPeerReviewDueDate(e){var t;if(!this.peerGrading)return!1;let n=null!==(t=i.Z.parseStringToDate(e))&&void 0!==t?t:new Date;return i.Z.isWithinDateRange(n,{end:null,start:this.peerReviewDueDate},!1)}isAfterPeerSubmissionDueDate(e){var t;if(!this.peerGrading)return!1;let n=null!==(t=i.Z.parseStringToDate(e))&&void 0!==t?t:new Date;return i.Z.isWithinDateRange(n,{end:null,start:this.peerSubmissionDueDate},!1)}constructor(e,t,n,i,r,s,o,a,l,c,d){this.$rootScope=e,this.$ngRedux=t,this.localizeService=n,this.contextUser=i,this.modal=r,this.ultraState=s,this.context=o,this.$q=a,this.courseId=l,this.contentId=c,this.columnId=d,this.reviewableAttemptsOnly=[],this.deletedAttemptsOnly=[],this.hasLoadedReviewableAttempts=!1}}C([(0,r.LRUMemoize)()],A.prototype,"parseCurrentStringToDateAndMemoize",null),A=C([E(0,(0,p.tB)("$rootScope")),E(1,(0,p.tB)("$ngRedux")),E(2,(0,p.tB)(b.serviceName)),E(3,(0,p.tB)(g.HV)),E(4,(0,p.tB)(f.HV)),E(5,(0,p.tB)(h.HV)),E(6,(0,p.tB)(v.HV)),E(7,(0,p.tB)("$q")),E(8,(0,p.tB)("courseId")),E(9,(0,p.tB)("contentId")),E(10,(0,p.tB)("columnId"))],A);class k{getOrCreatePeerContentFromContent(e){return(0,a.h)(this.service.getOrCreatePeerContentFromContent(e))}constructor(e){this.service=e,this.key=o.fz.PeerReview}}class T{getPeerContent(e){return this.peerContentMap.get(e)}createPeerContent(e,t,n){let i=this.$injector.instantiate(A,{courseId:e,contentId:t,columnId:n});return this.peerContentMap.set(t,i),i.initPeerContentObject()}getOrCreatePeerContent(e,t,n){let i=this.getPeerContent(t);return i?this.$q.resolve(i):this.createPeerContent(e,t,n)}getDeployedAssessment(e){return(null==e?void 0:e.contentDetail)&&e.getDeployedAssessment()}getOrCreatePeerContentFromContent(e){var t,n;if(!e)return this.$q.resolve(null);let{courseId:i,id:r}=e,s=null===(n=this.getDeployedAssessment(e))||void 0===n?void 0:null===(t=n.gradingColumn)||void 0===t?void 0:t.id;return i&&r&&s?this.getOrCreatePeerContent(i,r,s):this.$q.resolve(null)}getOrCreatePeerContentWithAttemptsFromContent(e){return this.getOrCreatePeerContentFromContent(e).then(e=>null==e?void 0:e.loadReviewableAttempts())}getOrCreatePeerContentFromColumn(e){if(!e)return this.$q.resolve(null);let{courseId:t,contentId:n,id:i}=e;return t&&n&&i?this.getOrCreatePeerContent(t,n,i):this.$q.resolve(null)}getOrCreatePeerContentWithAttemptsFromColumn(e){return this.getOrCreatePeerContentFromColumn(e).then(e=>null==e?void 0:e.loadReviewableAttempts())}isPeerEvaluationItem(e){return l.u$1.PeerEvaluationTest.isEqualTo(e)}wrapPeerEvaluationItemTitle(e,t){return this.localizeService.translateSync({locale:t,key:"components.services.peer-review.peerEvaluationTitleWrapper",params:{itemTitle:e},noWrap:!0,noEscape:!0})}constructor(e,t,n){this.$injector=e,this.$q=t,this.localizeService=n,this.peerContentMap=new Map,(0,o.gM)(new k(this))}}T=C([E(0,(0,p.tB)("$injector")),E(1,(0,p.tB)("$q")),E(2,(0,p.tB)(b.serviceName))],T),s.module(I,[b.moduleName,g.e1,f.e1,h.e1,v.e1]).service(w,T)},84741:function(e,t,n){"use strict";n.d(t,{e1:function(){return c},HV:function(){return d},aA:function(){return u}});var i=n(276635),r=n(464027),s=n(658895),o=n(480489);let a=[];function l(){return a[a.length-1]}let c="ultra.service.batch-utility-rest-api",d="ultra.service.batch-utility-rest-api.service",u="batch-utility-rest-api-param",p=[];function m(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}class h{constructor(e,t,n,i){this.position=e,this.deferred=t,this.reqConfig=n,this.token=i}}let g=0;r.module(c,["ng",o.e]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",(e,t)=>{let n={};return{request(o){let a=e.get("$q");if(o.params&&o.params[u]&&RegExp("^"+m(o.params[u].baseUrl)).test(o.url)){let c=a.defer(),d=o.params[u];if(delete o.params[u],d.trackId=d.trackId||""+g++,!Object.prototype.hasOwnProperty.call(n,d.trackId)){var l;n[d.trackId]={token:d,queue:[]},d.sendDeferred.promise.then((l=d.trackId,function(){let o=n[l],a=RegExp("^"+m(o.token.baseUrl));(s.default.features.batchRestAPI||o.token.batchUrl!==s.default.apiBasePath+"/v1/utilities/batch")&&1!==o.queue.length?o.queue.length>1?e.get("$http")({method:"PUT",url:o.token.batchUrl,data:o.queue.map((e,n)=>{let r=e.reqConfig;return t.debug(`${r.method} ${r.url} will be sent by batch request "${o.token.batchUrl}?xb=${o.token.trackId}[${n}]"`),{method:r.method,relativeUrl:r.url.replace(a,"")+"?"+i(r.params).omitBy(i.isUndefined).map((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`).value().join("&"),body:r.data}}),params:{xb:l}}).then(e=>{o.queue.forEach(t=>{let n=t.reqConfig,i=e.data[t.position];t.deferred.resolve(r.extend({},n,{method:"JSONP",cache:{get:()=>[i.statusCode,i.body,i.headers]}}))}),o.token.finalDeferred.resolve(e.data),delete n[l]}):(o.token.finalDeferred.resolve([]),delete n[l]):(delete n[l],e.get("$q").all(o.queue.map(t=>{let n=function(e){return t.deferred.resolve(r.extend({},t.reqConfig,{method:"JSONP",cache:{get:()=>[e.status,e.data,e.headers]}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(s.default.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(n,n)})).then(e=>{o.token.finalDeferred.resolve(e)}))}))}return n[d.trackId].queue.push(new h(n[d.trackId].queue.length,c,o,d)),c.promise}return a.when(o)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){let t=function(t){var n;return p.length>0&&(t.params=t.params||{},Object.prototype.hasOwnProperty.call(t.params,u)||(t.params[u]=i.last(p))),l()&&l().$emit("BEFORE_REQUEST",t),void 0!==(n=(t.params||{})[u])&&(n.totalRequests=(n.totalRequests||0)+1),e(t)};return!function(...e){i.each(e,function(e){t[e]=function(n,i){return t(r.extend({},i||{},{method:e,url:n}))}})}("get","delete","head","jsonp"),!function(...e){i.each(e,function(e){t[e]=function(n,i,s){return t(r.extend({},s||{},{method:e,url:n,data:i}))}})}("post","put","patch"),!function(...n){i.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get(){return e[n]},set(t){e[n]=t}})})}("defaults","pendingRequests"),t}])}]).factory(d,["$rootScope","$q","$log",o.H,function(e,t,n,r){return{performBatch(e,t,n){let i=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));p.push(i);let r=this.awaitBatch(e);return i.autoSend=!0,r()},awaitBatch(e){if(0===p.length)throw Error("No batch token in current context! Please invoke in the callstack of performBatch");let r=i.last(p);return r.autoSend=!1,()=>{let s;i.last(p)!==r&&p.push(r),r.autoSend=!0;try{s=e(r)}catch(e){n.error(e)}return p.pop(),r.autoSend&&r.send(),s?t.resolve(s):r.finalDeferred.promise}},newToken(e=s.default.apiBasePath+"/v1/utilities/batch",n=s.default.apiBasePath+"/"){let i=t.defer();return{send(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:i,batchUrl:e,baseUrl:n,autoSend:!1,promise:i.promise,totalRequests:0}}}}])},51398:function(e,t,n){"use strict";n.d(t,{$:function(){return i}});let i=e=>{if(!e||""===e)return!1;let t=e.toLowerCase().replace("_","-");return t.startsWith("ar")||t.startsWith("he")||"en-sc"===t||"en-sa"===t}},676954:function(e,t,n){"use strict";n.d(t,{ILocaleUsernameFormat:function(){return a.ILocaleUsernameFormat},Service:function(){return y},localeQuerystringRegex:function(){return f},moduleName:function(){return m},providerName:function(){return g},serviceName:function(){return h}});var i=n(276635),r=n(464027),s=n(658895),o=n(179949),a=n(579633),l=n(51398),c=n(422375),d=n(707769),u=n(259197);function p(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}n.o(a,"ILocaleComposedDurationFormat")&&n.d(t,{ILocaleComposedDurationFormat:function(){return a.ILocaleComposedDurationFormat}}),n.o(a,"ILocaleDateFormat")&&n.d(t,{ILocaleDateFormat:function(){return a.ILocaleDateFormat}}),n.o(a,"ILocaleDatetimeFormat")&&n.d(t,{ILocaleDatetimeFormat:function(){return a.ILocaleDatetimeFormat}}),n.o(a,"ILocaleTimeFormat")&&n.d(t,{ILocaleTimeFormat:function(){return a.ILocaleTimeFormat}}),n.o(a,"ILocaleTimezoneFormat")&&n.d(t,{ILocaleTimezoneFormat:function(){return a.ILocaleTimezoneFormat}}),n.o(a,"LocaleCategory")&&n.d(t,{LocaleCategory:function(){return a.LocaleCategory}}),n.o(a,"PreferredDisplayName")&&n.d(t,{PreferredDisplayName:function(){return a.PreferredDisplayName}});let m="ultra.services.BbLocalize",h="bbLocalize",g=h+"Provider",f=/setLang=([^&]*)/,b=function(e,t,n){let i=n.value;n.value=function(...e){return this.$q.when(i.apply(this,e))}};class v{isRTL(e){if(!s.default.features.rightToLeftSupport)return!1;let t=this.getAppLocale();return(0,l.$)(t)}getDecimalStringForScope(e){let t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)}getGroupingStringForScope(e){let t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)}setUltraLocaleData(e){this.frmt.setUltraLocaleData(this.normalizeLocaleData(e))}normalizeLocaleData(e){let t={};for(let n of Object.keys(e))t[this.preProcessFormatterLocale(n)]=e[n];return t}isValidNumber(e,t){let n=this.getLocale(t);return this.frmt.number.isValidSync(e,n)}loadBundle(e,t){return null==t&&(t=this.getLocale(null)),this.intl.addBundles("locales/[locale]/"+e+".json"),this.intl.loadBundles(t)}loadAllBundles(e){return this.intl.loadBundles(e)}insertLocaleData(e,t){return this.intl.storeLocaleData(e,t)}resetLocaleData(){return this.intl.reset()}translateSync(e){let t=e?{...e.params}:{};return Object.keys(t).forEach(e=>{void 0===t[e]&&(t[e]="")}),t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)}translate(e){let t=e?e.params:{};return t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape}),this.intl.translate(e.locale||this.getLocale(null),e.key,t)}_getFormatter(e){return this.frmt.getFormatterSync(e)}getAppLocale(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)}getAppLocaleISO(){return this.getUserLocale()||this.defaultLocale}getLocale(e){if(!e)return this.getAppLocale();let t=e.locale;for(;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()}getUserLocale(){return this.userLocale}getCourseLocale(e){if(!(0,u.Si$)(e)&&e.locale&&e.isLocaleEnforced)return e.locale}getNormalizedCourseLocale(e){return this.getCourseLocale(e)?this.intl.normalizeLocale(e.locale):this.getAppLocale()}preProcessFormatterLocale(e){return this.frmt.preProcessFormatterLocale(e)}getPreferredLocales(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))}validateLocale(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0}setLocale(e,t){return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then(()=>{this.$rootScope.$broadcast("$translateChangeSuccess",{language:t})})}setUserLocale(e){this.userLocale=e}setSystemDefaultLocale(e){this.defaultLocale=e}addOverride(e,t){this.overrideLoader.addOverrideBundle(e,t)}loadLocale(e){return this.frmt.loadLocale(e)}formatNumber(e,t,n){let i=this.getLocale(t);return this.frmt.number.format(e,i,n)}formatNumberSync(e,t,n){let i=this.getLocale(t);return this.frmt.number.formatSync(e,i,n)}regroupNumber(e,t){let n=this.getLocale(t);return this.frmt.number.regroup(e,n)}regroupNumberSync(e,t){let n=this.getLocale(t);return this.frmt.number.regroupSync(e,n)}parseNumber(e,t){let n=this.getLocale(t);return this.frmt.number.parse(e,n)}parseNumberSync(e,t){let n=this.getLocale(t);return this.frmt.number.parseSync(e,n)}formatDate(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDate(e,t,i)}formatDateSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDateSync(e,t,i)}parseDate(e,t,n,i){let r=this.getLocale(n);return this.frmt.datetime.parseDate(e,t,r,i)}parseDateSync(e,t,n,i){let r=this.getLocale(n);return this.frmt.datetime.parseDateSync(e,t,r,i)}formatTime(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTime(e,t,i)}formatTimeSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimeSync(e,t,i)}getDayPeriodsFormatSync(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated}getTimePattern(e,t){let n=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,n)}getTimePatternSync(e,t){let n=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,n)}parseTime(e,t,n,i){let r=this.getLocale(n);return this.frmt.datetime.parseTime(e,t,r,i)}parseTimeSync(e,t,n,i){let r=this.getLocale(n);return this.frmt.datetime.parseTimeSync(e,t,r,i)}formatDatetime(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDatetime(e,t,i)}formatDatetimeSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatDatetimeSync(e,t,i)}formatDurationBetweenSync(e,t,n,i){let r=this.getLocale(n);return this.frmt.datetime.formatDurationBetweenSync(e,t,r,i)}formatDuration(e,t,n,i){let r=this.getLocale(t);return this.frmt.datetime.formatDuration(e,r,n,i)}formatComposedDurationSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatComposedDurationSync(e,t,i)}formatTimezone(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimezone(e,t,i)}formatTimezoneSync(e,t,n){let i=this.getLocale(n);return this.frmt.datetime.formatTimezoneSync(e,t,i)}formatUsername(e,t,n,i){let r=this.getLocale(n);return this.frmt.username.format(e,t,r,i)}formatUsernameSync(e,t,n,i){let r=this.getLocale(n);return this.frmt.username.formatSync(e,t,r,i)}formatUsernameList(e,t,n,i){let r=this.getLocale(n);return this.frmt.username.formatList(e,t,r,i)}formatItems(e,t,n,i,r){let s=this.getLocale(n);return this.frmt.items.format(e,e.length,t,s,i,r)}formatItemsSync(e,t,n,i,r,s){let o=this.getLocale(i);return this.frmt.items.formatSync(e,t,n,o,r,s)}getFormatEnum(e,t){if(!t)return null;let n=e[t=t.charAt(0).toUpperCase()+t.slice(1)];if(null==n)throw Error("Invalid format `"+t+"` is used");return n}getFormatId(e,t){if(null==t)return 0;let n=e[t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)];if(null==n)throw Error("Invalid format `"+t+"` is used");return n}formatPercentage(e,t){let n=this.getLocale(t);return this.frmt.number.format(e,n,{style:"percent"})}formatPercentageSync(e,t,n){let i=this.getLocale(t);return this.frmt.number.formatSync(e,i,{style:"percent",maximumFractionDigits:n})}formatCurrency(e,t,n,i){let r=this.getLocale(t);return this.frmt.currency.format(e,r,n,i)}formatCurrencySync(e,t,n,i){let r=this.getLocale(t);return this.frmt.currency.formatSync(e,r,n,i)}getReactBabelfishParams(e){return{locale:this.getLocale(e),babelfishInstance:this.intl,babelfishFormatter:this.frmt,isRtl:this.isRTL()}}constructor(e,t){this.$q=e,this.$rootScope=t,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=c.Z.getInstance(),this.frmt=new o.Z(this.intl,{production:v.production,urlRoot:v.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=d.h.getInstance()}}v.$inject=["$q","$rootScope"],v.production=!1,v.urlRoot=".",v.defaultDecimalPrecision=a.Number.defaultDecimalPrecision,v.minDecimalPrecision=1,v.maxDecimalPrecision=4,p([b],v.prototype,"loadBundle",null),p([b],v.prototype,"translate",null),p([b],v.prototype,"formatNumber",null),p([b],v.prototype,"regroupNumber",null),p([b],v.prototype,"parseNumber",null),p([b],v.prototype,"formatUsername",null),p([b],v.prototype,"formatUsernameList",null),p([b],v.prototype,"formatPercentage",null);class y extends v{}r.module(m,[]).provider(h,class{setOptions(e={}){i.forOwn(e,(e,t)=>{v[t]=e})}constructor(){this.$get=["$injector",e=>e.instantiate(v)]}})},886739:function(e,t,n){"use strict";n.r(t),n.d(t,{BbOffcanvasController:function(){return u},Controller:function(){return p},controllerName:function(){return l},moduleName:function(){return a},requireName:function(){return d},template:function(){return c}});var i=n(464027),r=n(786430),s=n(302032);function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.controllers.bbOffcanvas",l="BbOffcavasController",c="",d="components/services/bb-offcanvas/bb-offcanvas-controller";class u{constructor(e,t,n){let i=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||n,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling,banner:e.banner});t.addBbOffcanvasElementPromise(i,e.stateName)}}u=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,s.tB)("offCanvasArgs")),o(1,(0,s.tB)(r.HV)),o(2,(0,s.tB)("$scope"))],u);class p extends u{}i.module(a,[r.e1]).controller(l,u)},786430:function(e,t,n){"use strict";n.d(t,{AE:function(){return v},HV:function(){return h},e1:function(){return m},gQ:function(){return f},mP:function(){return g}}),n(80788);var i=n(625506),r=n(464027),s=n(658895),o=n(842891),a=n(676954),l=n(480489),c=n(94237),d=n(302032),u=n(88818);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.services.BbOffcanvas",h="bbOffcanvas",g="OffCanvasPanelClosed",f="OffCanvasPanelOpened";class b{open(e){return this.openOffcanvas(e)}openOffcanvas(e){return this.$q.when(e.template).then(t=>{let n=i(t);if(n.length>1&&!s.default.production)throw Error("Current page has multiple root element! Please refactor the page to have only one root element");n.attr("data-base-state-name",e.stateName),0===this.openElements.length&&1===this.openElementsPromise.length&&n.addClass("first");let r=e.scope||this.$rootScope,a=(r.$newOffcanvasScope||r.$new).apply(r);this.$rootScope.bbOffcanvasOpened=!1,this.bbOffcanvasOpening=!0;let l=e.opened,d=e.close,p=this;if(e.trapFocus=!1,e.open=()=>{e.disableFocusHandling||p.accessibility.applyAccessibilityHandlingForPanel(n)},o.t6.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){p.$compile(n)(a);let t=(...e)=>{p.$rootScope.bbOffcanvasOpened=!0,p.bbOffcanvasOpening=!1,l&&l.apply(this,e),o.t6.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),p.$rootScope.$broadcast(f)};p.$rootScope.$$phase?t():p.$rootScope.$apply(t),p.accessibility.isElementInActivePanel(i(document.activeElement))||p.accessibility.focusCorrectElementOnPanel(n),n.hasClass("peek")&&n.hasClass("overlay-disabled")&&!e.disableFocusHandling&&p.enableFocusSkipLinks(a)},e.close=(...t)=>(n.hasClass("peek")&&n.hasClass("overlay-disabled")&&!e.disableFocusHandling&&this.disableFocusSkipLinks(),d.apply(this,t)),e.closed=()=>{e.disableFocusHandling||this.accessibility.revertAccessibilityHandling(),document.removeEventListener(u.ei$,y),document.removeEventListener(u.hU$,S),this.$rootScope.$broadcast(g)},e.overlay||n.addClass("overlay-disabled"),e.disableFocusHandling){n.addClass("focus-handling-disabled"),n.attr("role","region"),n.attr("aria-label",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.panel"}));let e=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.focusJumpLink"});n.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+e+"</button>")}n.bbOffcanvas(e);let m=new v(n,this.accessibility);e.banner&&c.C.pushBanner({state:{stateName:e.stateName,panelClass:e.panelClass},orphan:()=>{m.setBanner()(void 0)},adopt:m.setBanner()}),m.open();let h=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:"global.close"}),b=n.find(".bb-close");b&&b.length>0&&(b[0].setAttribute("aria-label",h),b[0].setAttribute("analytics-id",`bb-close.${e.pageTitle}`),n.find(".top-border").length>0&&b.addClass("has-top-border")),n.attr("data-page-title",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(a),key:e.pageTitle}));let y=()=>{m.hideCloseButton()},S=()=>{m.showCloseButton()};return document.addEventListener(u.ei$,y),document.addEventListener(u.hU$,S),m})}addBbOffcanvasElement(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()}addBbOffcanvasElementPromise(e,t){this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then(e=>{e.name=t,this.addBbOffcanvasElement(e),this.openElementsPromise.pop()},()=>{this.openElementsPromise.pop()})}close(e){for(;0!==this.openElements.length;){let t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(g)}synchronizeOffcanvasDepth(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)}getElement(e){return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(t=>t.name===e)[0])}getTopElement(){return this.getNthElementFromTop(0)}getNthElementFromTop(e){let t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)}getCoursePanel(){return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(()=>this.openElements.filter(e=>{let t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length})[0])}showTopPanelCloseButton(){this.getTopElement().then(e=>{e&&e.showCloseButton()})}expandTopPanel(){this.getTopElement().then(e=>{e&&!e.isPanelExpanded()&&e.expandPanel()})}shrinkTopPanel(){return this.getTopElement().then(e=>{e&&e.isPanelExpanded()&&e.expandPanel()})}safeFocus(e){if(this.bbOffcanvasOpening){let t=this.$rootScope.$watch(()=>this.bbOffcanvasOpening,n=>{!1===n&&(t(),this.timeout(()=>{e.focus()},this.$rootScope,0,!1))})}else this.timeout(()=>{e.focus()},this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1}enableFocusSkipLinks(e){this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then(t=>{let[n,i]=t;if(null!=n&&null!=i){let t=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:i.getElement().attr("data-page-title")}}),r=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:n.getElement().attr("data-page-title")}});n.enableFocusSkipLink(i,t),i.enableFocusSkipLink(n,r)}})}disableFocusSkipLinks(){this.getTopElement().then(e=>{e&&e.disableFocusSkipLink()}),this.getNthElementFromTop(1).then(e=>{e&&e.disableFocusSkipLink()})}constructor(e,t,n,i,r,s){this.$compile=e,this.$q=t,this.$rootScope=n,this.accessibility=i,this.bbLocalize=r,this.timeout=s,this.document=document,this.openElements=[],this.openElementsPromise=[]}}b=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,d.tB)("$compile")),p(1,(0,d.tB)("$q")),p(2,(0,d.tB)("$rootScope")),p(3,(0,d.tB)(o.HV)),p(4,(0,d.tB)(a.serviceName)),p(5,(0,d.tB)(l.H))],b);class v{getElement(){return this.element}open(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")}close(){this.element.bbOffcanvas("remove")}setBanner(){return i(this.element)[0].setBanner}expandPanel(){this.element.bbOffcanvas("expandPanel")}isPanelExpanded(){return this.element.hasClass("full")}hideCloseButton(){this.element.find(".bb-close").addClass("bb-close-hide")}showCloseButton(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")}enableFocusSkipLink(e,t){this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",()=>{this.element.hasClass("peek")?this.accessibility.revertAccessibilityHandling():(this.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),this.accessibility.focusCorrectElementOnPanel(e.getElement()))})}disableFocusSkipLink(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")}constructor(e,t,n){this.element=e,this.accessibility=t,this.name=n}}r.module(m,[o.e1,a.moduleName,l.e]).service(h,b)},298898:function(e,t,n){"use strict";n.d(t,{KC:function(){return v},e1:function(){return m},HV:function(){return h}});var i=n(464027),r=n(12838),s=n(351876),o=n(224888),a=n(473011),l=n(610624),c=n(88818),d=n(259197),u=n(302032);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.services.bbml-editor",h="bbMLEditorService",g="file",f="embedded-unsafe-html",b="http://localhost";class v{static get VERSION_INDICATOR_PREFIX(){return'<!-- {"bbMLEditorVersion":'}static get CURRENT_VERSION_INDICATOR(){return v.VERSION_INDICATOR_PREFIX+"1} -->"}static get EMBEDDED_LINK_PREFIX(){return"https://"}getBbMLFileType(e){let t=e.dataset;return(null==t?void 0:t.bbtype)||g}convertBbMLToContentBlocks(e){var t;let n=new Set,i=[],o=!1;s.Ny(e,v.VERSION_INDICATOR_PREFIX)&&(o=!0);let a=document.createElement("div");a.innerHTML=e;for(let e=0;e<a.children.length;e++){let s;let o=a.children[e];if("A"===o.tagName&&this.getBbMLFileType(o)===g)(s=this.convertBbMLToFileBlock(o)).blockType=r.Pq.File;else if("DIV"===o.tagName){let e=o.innerHTML.trim();e&&(s={blockType:r.Pq.Text,textBlock:e,id:this.getBlockIdFromBbML(o)})}else if("A"===o.tagName&&this.getBbMLFileType(o)===f){let e;let{dataset:n,href:i}=o;if(null==n?void 0:n.bbfile)try{e=null===(t=JSON.parse(n.bbfile))||void 0===t?void 0:t.linkName}catch(e){}s={blockType:r.Pq.Html,textBlock:"",fileBlock:{downloadUrl:i,file:{fileName:e}},id:this.getBlockIdFromBbML(o)}}s&&!n.has(s.id)&&(n.add(s.id),i.push(s))}return o||0!==i.length||(this.contains(e,v.EMBEDDED_LINK_PREFIX)||(o=!0),i.push({blockType:r.Pq.Text,textBlock:e,id:this.generateBlockId()})),{contentBlocks:i,isBbmlEditorCompliant:o}}contains(e,t){return(e||"").indexOf(t)>-1}convertBbMLToFileBlock(e){let t=e.dataset,n={file:{}},i=null;if(null==t?void 0:t.bbfile)try{var r;let e=JSON.parse(t.bbfile);n.isDecorative=e.isDecorative,n.alternativeText=e.alternativeText,n.linkName=e.linkName,n.currentMimeType=e.mimeType,n.render=null!==(r=e.render)&&void 0!==r?r:d.I_d.Inline,n.ui={isRenderedInline:(0,c.tqK)(n.render)},n.viewerData={},e.bbFileUuid&&(n.viewerData.bbFileUuid=e.bbFileUuid),e.viewerUuid&&(n.viewerData.viewerUuid=e.viewerUuid),e.viewerUrl&&(n.viewerData.viewerUrl=e.viewerUrl),e.viewerTimeToWait&&(n.viewerData.viewerTimeToWait=parseInt(e.viewerTimeToWait+"",10))}catch(e){}n.linkName||(n.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),n.currentMimeType||(n.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),n.ui||(n.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(n)}),i=this.getBlockIdFromBbML(e);let s=e.href;return 0===s.indexOf(b)&&(s=(0,a.uI)(s.substr(b.length))),n.downloadUrl=s,this.fileViewer.initUiField(n),{fileBlock:n,id:i}}getBlockIdFromBbML(e){let t=e.dataset;return(null==t?void 0:t.bbid)?t.bbid:e.id?e.id:this.generateBlockId()}convertContentBlocksToBbML(e,t){let n=document.createElement("div");if(e.forEach(e=>{var t,i;if(e.blockType===r.Pq.File){let t=document.createElement("a"),r=t.dataset;if(t.href=e.fileBlock.downloadUrl,r.bbid=e.id,e.fileBlock.ui){let t={};t.render=null!==(i=e.fileBlock.render)&&void 0!==i?i:d.I_d.Inline,null!=e.fileBlock.isDecorative&&(t.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(t.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(t.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(t.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(t.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(t.viewerUuid=e.fileBlock.viewerData.viewerUuid)),r.bbfile=JSON.stringify(t)}t.innerHTML=e.fileBlock.linkName,n.appendChild(t)}else if(e.blockType===r.Pq.Text&&e.textBlock){let t=document.createElement("div");t.dataset.bbid=e.id,t.innerHTML=e.textBlock,n.appendChild(t)}else if(e.blockType===r.Pq.Html&&(null==e?void 0:null===(t=e.fileBlock)||void 0===t?void 0:t.downloadUrl)){let t=document.createElement("a"),{downloadUrl:i,file:r}=e.fileBlock,{fileName:s}=r,o=t.dataset;o.bbid=e.id,o.bbfile=JSON.stringify({linkName:s}),o.bbtype=f,t.href=i,n.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),n.innerHTML){let i="";return t&&e&&e.length&&(i=v.CURRENT_VERSION_INDICATOR),i+n.innerHTML}return n.innerHTML}generateBlockId(){return"bbml-editor-id_"+l.V()}writeBbMLLink(e,t,n){if(0===n.length)return;let i="";n.length>1&&(i+="<ul>"),n.forEach(e=>{n.length>1&&(i+="<li>"),"lti"===e.type?i+='<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":i+='<a href="'+e.url+'" target="_blank">'+e.title+"</a>",n.length>1&&(i+="</li>")}),n.length>1&&(i+="</ul>")}constructor(e,t,n){this.$q=e,this.DSCacheFactory=t,this.fileViewer=n}}v=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,u.tB)("$q")),p(1,(0,u.tB)("DSCacheFactory")),p(2,(0,u.tB)(o.HV))],v),i.module(m,["angular-data.DSCacheFactory",o.e1]).service(h,v)},46840:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(479323),r=n(259197),s=n(860995),o=n(676954),a=n(480489),l=n(302032);function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.services.rte-insert-image",u="rteInsertImageService";class p{getImagePluginConfig(e,t,n,i){return{openInsertImageModal:r=>this.openInsertImageModal(e,t,r,n,i),getImageRenderData:()=>this.getImageRenderData()}}openInsertImageModal(e,t,n,r,s){let o=this.bbLocalize.getReactBabelfishParams(e),a={babelfishInstance:o.babelfishInstance,babelfishFormatInstance:o.babelfishFormatter,isRtl:o.isRtl,locale:o.locale},l=r.append('<div class="insert-image-modal" />').find(".insert-image-modal"),c=this.$ngRedux;return i.Kd.render(l[0],c,{courseId:this.contextCourse.courseId,contentId:t,bbml:n,localeProps:a,aiImage:s.aiImage}).finally(()=>l.remove())}async getImageRenderData(){return this.unsplashSettings?{unsplash:{applicationId:this.unsplashSettings.applicationId}}:this.isLoadingUnsplashSettings?new Promise((e,t)=>{this.timeout(()=>this.getImageRenderData().then(e,t),this.$rootScope,100)}):(await this.getUnsplashSettings(),this.getImageRenderData())}subscribeToReduxChanges(){let e=this.$ngRedux.connect(e=>({unsplashSettings:r.Ys.unsplash.getSettings(e,this.contextCourse.courseId),isLoadingUnsplashSettings:r.Ys.unsplash.isLoadingSettings(e,this.contextCourse.courseId)}),e=>({getUnsplashSettings:()=>e(r.Nwg.unsplash.getSettings(this.contextCourse.courseId))}))(this);this.$rootScope.$on("$destroy",e)}constructor(e,t,n,i,r,s){this.$q=e,this.$rootScope=t,this.$ngRedux=n,this.contextCourse=i,this.timeout=r,this.bbLocalize=s,this.isLoadingUnsplashSettings=!1,this.unsplashSettings=void 0,this.getUnsplashSettings=()=>Promise.reject(Error("Not mapped from redux")),this.subscribeToReduxChanges()}}p=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,l.tB)("$q")),c(1,(0,l.tB)("$rootScope")),c(2,(0,l.tB)("$ngRedux")),c(3,(0,l.tB)(s.HV)),c(4,(0,l.tB)(a.H)),c(5,(0,l.tB)(o.serviceName))],p),angular.module(d,[s.e1,a.e,o.moduleName]).service(u,p)},633340:function(e,t,n){"use strict";n.d(t,{HV:function(){return y},e1:function(){return v}}),n(909588);var i=n(464027),r=n(259197),s=n(986709),o=n(676954),a=n(567361),l=n(362767),c=n(411832),d=n(291830),u=n(45680),p=n(555840),m=n(808361),h=n(860995),g=n(817426),f=n(302032);function b(e,t){return function(n,i){t(n,i,e)}}let v="ultra.service.blog",y="blogService";class S{subscribeToRedux(){this.$ngRedux.connect(null,e=>({loadBlog:t=>e(r.Nwg.blog.blogs.loadBlog(t)),persistContent:(t,n)=>e(r.Nwg.content.persistContent(t,n)),loadGradebookColumn:(t,n)=>e(r.Nwg.gradebookColumn.loadGradebookColumn({courseId:t,columnId:n.gradeColumnId})),persistGradebookColumn:(t,n)=>e(r.Nwg.gradebookColumn.persistGradebookColumn(t,n)),loadGradebookGrade:(t,n,i,s={})=>e(r.Nwg.gradebookGrade.loadBulkView(t,[n],{membershipIds:[i]},s))}))(this)}createContent(e){let{courseId:t,parentId:n,positionBefore:i,positionAfter:r,root:s}=e;return this.contentService.makeContentInContentTree(s,t,n,i,r).then(({content:e,...t})=>(this.createdContent=e,{content:e,...t}))}updateContent(e,t,n){return e.$patch(n).$then(()=>{this.$rootScope.$broadcast("content-update",e),this.$rootScope.$broadcast("attempt-base-content-update",e,t)}).$asPromise()}fetchContent(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups"}).$asPromise()}fetchBlog(e,t,n=!1){return this.$q.resolve(this.loadBlog({courseId:e,blogId:t,expandHasEntries:n})).then(e=>e.blog)}patchBlogContent(e,t,n,i){let r={id:t,courseId:e,contentHandler:d.Z.Journal,contentDetail:{[d.Z.Journal.toString()]:{blog:n}}},s={id:t,courseId:e,contentHandler:d.Z.Journal,contentDetail:{[d.Z.Journal.toString()]:{blog:i}}};return this.$q.resolve(this.persistContent(r,s)).then(e=>e.contents)}patchGradebookColumn(e,t){return this.$q.resolve(this.persistGradebookColumn(e,t)).then(e=>e.gradebookColumn)}patchBlogGrading(e,t,n,i,r,s){let o=!n.gradingAllowed&&!i.gradingAllowed,a=n.gradingAllowed&&!i.gradingAllowed,l=!n.gradingAllowed&&i.gradingAllowed,c=n.entryModificationAllowed!==i.entryModificationAllowed,u=n.commentModificationAllowed!==i.commentModificationAllowed;return!o||c||u?a||c||u?this.patchBlogContent(e,t,n,i).then(e=>null):l?this.patchBlogContent(e,t,n,i).then(n=>{let i=n[t].contentDetail[d.Z.Journal.toString()];return s.id=i.blog.gradeColumnId,s.courseId=e,this.patchGradebookColumn({},s)}):this.patchGradebookColumn(r,s):this.$q.resolve(null)}loadBlogGradebookColumn(e,t){return t&&t.gradeColumnId?this.$q.resolve(this.loadGradebookColumn(e,t).then(e=>e.gradebookColumn)):this.$q.resolve(null)}savePrompt(e,t){let n=e.description,i=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],r=(0,g.BD)(t,i);return e.description=this.contentService.truncateDescription(r,a.t6.MAX_LENGTH_IN_CONTENT_ITEM),e.$patch(["contentDetail"]).$asPromise().then(()=>{this.$rootScope.$broadcast("content-update",e)}).catch(()=>{e.description=n})}loadBlogGradebookGrade(e,t,n,i={}){return this.$q.resolve(this.loadGradebookGrade(e,t,n,i))}deleteIfEmpty(){let{contentId:e}=this.ultraState.getCurrentUrlParams(),t=this.findCreatedContent(e);return t?t.$asPromise().then(e=>e.id?e.$fetch().$asPromise():e).then(e=>{var t,n;let i=null==e?void 0:null===(n=e.contentDetail)||void 0===n?void 0:null===(t=n[s.DXv.Journal])||void 0===t?void 0:t.blog;i&&this.isDefaultBlog(i)&&this.$rootScope.$broadcast("deleteContent",e),this.createdContent=null}):(this.createdContent=null,this.$q.resolve())}findCreatedContent(e){if(e&&this.createdContent&&("create"===e&&!this.createdContent.id||e===this.createdContent.id))return this.createdContent}getDefaultBlog(){return{title:"",description:{rawText:""},commentModificationAllowed:!0,entryModificationAllowed:!0}}isDefaultBlog(e){let t=this.isDefaultTitle(e.title)&&!e.description.rawText,n=this.getDefaultBlog(),i=e.commentModificationAllowed===n.commentModificationAllowed&&e.entryModificationAllowed===n.entryModificationAllowed&&!e.gradeColumnId;return t&&i}isDefaultTitle(e){if(!e)return!0;let t=this.currentCourseService.course,n=this.bbLocalize.getNormalizedCourseLocale(t);return this.bbLocalize.translateSync({locale:n,key:"components.directives.header.placeholder.x-bb-journallink",params:{date:this.context.getServerTime()},noWrap:!0})===e}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$ngRedux=i,this.$modal=r,this.courseModel=s,this.UserModel=o,this.context=a,this.contentService=l,this.ultraState=c,this.gradebookPermissionService=d,this.entitlementService=u,this.currentCourseService=p,this.createdContent=null,this.subscribeToRedux()}}S=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([b(0,(0,f.tB)(o.serviceName)),b(1,(0,f.tB)("$rootScope")),b(2,(0,f.tB)("$q")),b(3,(0,f.tB)("$ngRedux")),b(4,(0,f.tB)("$modal")),b(5,(0,f.tB)(p.N7.H)),b(6,(0,f.tB)(p.EA.HV)),b(7,(0,f.tB)(l.HV)),b(8,(0,f.tB)(a.HV)),b(9,(0,f.tB)(m.HV)),b(10,(0,f.tB)(u.HV)),b(11,(0,f.tB)(c.HV)),b(12,(0,f.tB)(h.HV))],S),i.module(v,[p.e1,o.moduleName,l.e1,a.e1,m.e1,u.e1,c.e1,p.e1,h.e1]).service(y,S)},492901:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u},iE:function(){return i}}),n(144152);var i,r,s=n(464027),o=n(942522),a=n(817446),l=n(362767),c=n(808361),d=n(891886);let u="ultra.components.services.browserStorage",p="browserStorage";(r=i||(i={})).LocalStorage="localStorage",r.SessionStorage="sessionStorage";class m{serializeCurrentRouteScopes(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,function(e,t){if((!t||!(t instanceof Array)||!(t.length>=1e9))&&"_userModel"!==e&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t})}deserializeCurrentRouteScopes(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)}deleteCurrentRouteScopes(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)}_getCurrentRouterStateObject(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}}saveToStorage(e,t,n,i){let r=this._getBrowserStorageCache(n);r.removeExpired();let s=o.stringify(t,i);return this._getUserEncryptionPassword().then(t=>this._encrypt(t,s).then(t=>{try{return r.put(this._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===this.QUOTA_EXCEEDED_ERR||e.code===this.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),this.saveToStorage=(e,t,n)=>this.$q.when(void 0)}}))}getFromStorage(e,t,n){let i=this._getBrowserStorageCache(t).get(this._toSortedKeyJSON(e));return null!=i?this._getUserEncryptionPassword().then(e=>this._decrypt(e,i).then(e=>o.parse(e,n))):this.$q.when(void 0)}updateStorageKey(e,t,n,i){return this.getFromStorage(e,n).then(r=>{this.deleteFromStorage(e,n);let s=i||r;if(s)return this.saveToStorage(t,s,n)})}deleteFromStorage(e,t){let n=this._getBrowserStorageCache(t);return n.removeExpired(),!!n.remove(this._toSortedKeyJSON(e))}_toSortedKeyJSON(e){return JSON.stringify(e,(e,t)=>"object"!=typeof t?t:Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}))}_getBrowserStorageCache(e){let t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId,n=this.DSCacheFactory.get(t);if(!n)switch(e){case"localStorage":n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:"localStorage".toString()});break;case"sessionStorage":n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:"sessionStorage".toString()})}return n}_getUserEncryptionPassword(){this._sjclForceReady();let e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then(e=>(e.value&&!e.$resolved&&e.$save(),e.value))}_sjclForceReady(){if(!this.sjcl.random.isReady()){let e=[];for(let t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}}_encrypt(e,t){return this._isEncryptNativeSupported.then(n=>n?this._subtleCryptoEncrypt(e,t).then(e=>({SubtleCryptoEncrypted:e})):this.$q.when(this.sjcl.encrypt(e,t)).then(e=>({SjclCipherEncrypted:e})))}_decrypt(e,t){return this._isEncryptNativeSupported.then(n=>n?this._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):this.$q.when(this.sjcl.decrypt(e,t.SjclCipherEncrypted)))}_subtleCryptoEncrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{let n=this.crypto.getRandomValues(new Uint8Array(16));return this.crypto.subtle.encrypt({name:"AES-CBC",iv:n},e,this._stringToArrayBuffer(t)).then(e=>({vector:this._arrayBufferToBase64(n),encrypted:this._arrayBufferToBase64(e)}))})}_subtleCryptoDecrypt(e,t){return this._subtleCryptoGetPasswordKey(e).then(e=>{let n=this._base64ToArrayBuffer(t.vector);return this.crypto.subtle.decrypt({name:"AES-CBC",iv:n},e,this._base64ToArrayBuffer(t.encrypted)).then(e=>this._arrayBufferToString(e))})}_subtleCryptoGetPasswordKey(e){return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then(e=>this.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"]))}_arrayBufferToString(e,t){let n=t&&new Uint8Array(e)||new Uint16Array(e),i="";for(let e=0;e<n.length;e++)i+=String.fromCharCode(n[e]);return i}_arrayBufferToBase64(e){return window.btoa(this._arrayBufferToString(e,!0))}_stringToArrayBuffer(e,t){let n=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),i=t&&new Uint8Array(n)||new Uint16Array(n);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return n}_base64ToArrayBuffer(e){return this._stringToArrayBuffer(window.atob(e),!0)}constructor(e,t,n,i,r,s){this.$rootScope=e,this.$q=t,this.DSCacheFactory=n,this.context=i,this.ultraState=r,this.contextUser=s,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=a,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=this.crypto&&this.crypto.subtle?this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer("x")).then(()=>this.$q.when(!0)).catch(()=>this.$q.when(!1)):this.$q.when(!1)}}m.$inject=["$rootScope","$q","DSCacheFactory",l.HV,c.HV,d.HV],s.module(u,["angular-data.DSCacheFactory",l.e1,c.e1]).service(p,m)},983109:function(e,t,n){"use strict";n.d(t,{e1:function(){return y},HV:function(){return S}});var i,r,s=n(464027),o=n(729913),a=n(676954),l=n(555840),c=n(610761),d=n(905620),u=n(658895),p=n(473011);let m="cloud.account.tokens";(i=r||(r={}))[i.Uninitialized=0]="Uninitialized",i[i.Initialized=1]="Initialized",i[i.Failed=2]="Failed";class h{get isInitialized(){return 1===this.status}init(){let e=this.$q.defer(),t=this.loaderUrl||"https://cloud-storage-integration.blackboardcdn.com/loader/js/loader.js",n=t.substring(0,t.indexOf("/loader"));if(1===this.status)e.resolve();else if(2===this.status)e.resolve();else{let i;let r=!1,s=0,o=0,a=()=>{r||0===s||0===o||(1===s?this.status=1:this.status=2,e.resolve(),r=!0,this.$timeout.cancel(i))};i=this.$timeout(()=>{this.authenticator||(o=2,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),this.explorer||(s=2,console.error("CloudStorageIntegration initialization timed out.  Disabling CloudStorageIntegration Service.")),a()},u.default.cloudStorageIntegrationInitializationTimeout||1e4),this.$q.all({CloudStorageIntegration:this.bbScriptLoader.getScript(t,{exports:"CloudStorageIntegration"}).then(e=>{this.explorer=e.explorer,s=1,a()}),CloudStorageIntegrationAuth:this.bbScriptLoader.getScript(n+"/authenticator/js/cloud-storage-integration-authenticator.js",{exports:"CloudStorageIntegration"}).then(e=>{this.authenticator=e.authenticator,o=1,a()})}).catch(()=>{this.authenticator||(o=2,console.error("Failed to load cloudStorageIntegration authenticator. Disabling Authenticator Service.")),this.explorer||(s=2,console.error("Failed to load cloudStorageIntegration.  Disabling CloudStorageIntegration Service.")),a()})}return e.promise}getExplorer(e){let t=e?this.explorerInstance_multi:this.explorerInstance_single;if(!t){let n={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"],text_direction:this.bbLocalize.isRTL(this.$rootScope)?"rtl":"ltr",show_dummy_provider:this.showDummyProvider};(this.enabledServices||[]).length>0&&(n.services=this.enabledServices),this.apiUrl&&(n.base_url=p.SV(this.apiUrl)),this.useLoaderExplorer&&(n.use_loader_explorer=this.useLoaderExplorer),n.persist="none",(t=this.explorer(n)).on("success",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(e),this.currentChooserPromiseObject=null)}),t.on("cancel",()=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.resolve(),this.currentChooserPromiseObject=null)}),t.on("error",e=>{this.currentChooserPromiseObject&&(this.currentChooserPromiseObject.reject(e),this.currentChooserPromiseObject=null)}),t.on("addAccount",e=>{this.preference.getPreference(m).then(t=>{let n=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e.id);n.push(e),this.preference.setPreference(m,JSON.stringify(n))}).catch(()=>{let t=[];t.push(e),this.preference.setPreference(m,JSON.stringify(t))})}),t.on("deleteAccount",e=>{this.preference.getPreference(m).then(t=>{let n=this.deleteCloudStorageIntegrationAccount(JSON.parse(t.value),e);this.preference.setPreference(m,JSON.stringify(n))})}),e?this.explorerInstance_multi=t:this.explorerInstance_single=t}return t}openFilePicker(e,t){if(this.currentChooserPromiseObject){let e=this.$q.defer();return e.reject(Error("multiple explorer instances are not allowed")),e.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then(()=>{if(1===this.status){let n=this.getExplorer(t);return this.preference.getPreference(m,"[]",!0).then(t=>{let i=JSON.parse(t.value).map(e=>e.bearer_token.key);n.update({locale:e,tokens:i}),n.choose()}).catch(t=>{console.error(t),n.update({locale:e,tokens:[]}),n.choose()})}}),this.currentChooserPromiseObject.promise}getCloudStorageIntegrationInfo(){return{client_id:this.clientId,base_url:this.apiUrl}}deleteCloudStorageIntegrationAccount(e,t){return e.filter(e=>e.id!==t)}constructor(e,t,n,i,r,s){this.$q=e,this.bbLocalize=t,this.$timeout=n,this.bbScriptLoader=i,this.preference=r,this.$rootScope=s,this.credentials={},this.status=0,this.enabledServices=u.default.cloudStorageIntegrationServices,this.showDummyProvider=!1}}var g=n(302032),f=n(825986),b=n(789423);function v(e,t){return function(n,i){t(n,i,e)}}let y="ultra.service.cloud.drive",S="cloudDrive";class C{openFilePicker(e,t){return(0,b.h)(this.cloudDriveStorage.openFilePicker(e,t))}constructor(e){this.cloudDriveStorage=e}}class E{isCloudServiceAvailable(){return(0,b.h)(this.service.isCloudServiceAvailable())}get cloudDriveStorage(){return new C(this.service.cloudDriveStorage)}constructor(e,t,n){this.service=e,this.CloudDriveModel=t,this.CloudDriveTaskModel=n,this.key=f.fz.CloudDriveService}}class I{cloudDriveStorageFactory(e){let t=new h(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences,this.$rootScope);return t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t}getCloudDrivesInfo(){let e=this.$q.defer();return this.cloudDrivesInfo?e.resolve():this.CloudDriveModel.$collection().$fetch().$then(t=>{this.cloudDrivesInfo=t,s.forEach(this.cloudDrivesInfo,e=>{"cloudstorageintegration"===e.name&&(this.cloudDriveStorage=this.cloudDriveStorageFactory(e))}),e.resolve()},t=>{e.reject(t)}),e.promise}initializeCloudDrive(){let e=this.$q.defer();return this.getCloudDrivesInfo().then(()=>{this.cloudDriveStorage?this.cloudDriveStorage.isInitialized&&this.currentLocale===this.bbLocalize.getAppLocale()?e.resolve(this.cloudDriveStorage):(this.currentLocale=this.bbLocalize.getAppLocale(),this.cloudDriveStorage.init().then(()=>{e.resolve(this.cloudDriveStorage)})):e.reject("No such cloud drive!")}),e.promise}isCloudServiceAvailable(){let e=this.$q.defer();return this.initializeCloudDrive().then(t=>{e.resolve(t.isInitialized)}).catch(()=>{e.resolve(!1)}),e.promise}getDriveUserInfo(){let e=this.$q.defer(),t=this.cloudDriveStorage.driveUserInfo,n=this.cloudDriveStorage.accessToken;return t?e.resolve(t):n?e.resolve(this.CloudDriveModel.$new("CloudStorageIntegration").me.$fetch({accessToken:n}).$asPromise()):e.resolve(),e.promise}constructor(e,t,n,i,r,s,o,a,l){this.$rootScope=e,this.$q=t,this.$timeout=n,this.bbLocalize=i,this.CloudDriveModel=r,this.CloudDriveTaskModel=s,this.windowSize=o,this.bbScriptLoader=a,this.preferences=l,this.isGettingFilesInfo=!1,this.currentLocale=this.bbLocalize.getAppLocale(),(0,f.gM)(new E(this,r,s))}}I=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([v(0,(0,g.tB)("$rootScope")),v(1,(0,g.tB)("$q")),v(2,(0,g.tB)("$timeout")),v(3,(0,g.tB)(a.serviceName)),v(4,(0,g.tB)(l.Os.H)),v(5,(0,g.tB)(l.xd.H)),v(6,(0,g.tB)(c.HV)),v(7,(0,g.tB)(o.HV)),v(8,(0,g.tB)(d.HV))],I),s.module(y,[l.e1,c.e1,o.e1,d.e1]).service(S,I)},656064:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(464027),r=n(14454),s=n(808361),o=n(480489),a=n(563060),l=n(351876),c=n(302032);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultraUi.components.services.contentCollection",p="ContentCollection";class m{handleContentCollectionResponse(e,t=null){this.postMessageDispatcherService.registerEventHandler("classic-picker-cancel",(t,n)=>{this.timeoutService(()=>{l.pn(this.stateService.current.name,"peek.content-collection-picker")&&this.stateService.leavePeekState(this.stateService.current.name),window!==n&&n.close()},e,0)},e),this.postMessageDispatcherService.registerEventHandler("classic-picker-submit",(n,i)=>{this.timeoutService(()=>{t?e.$emit("bb-bbml-editor-add-from-content-collection",t,n.items):this.getCcFilesDeferred.resolve(n.items),l.pn(this.stateService.current.name,"peek.content-collection-picker")&&this.stateService.leavePeekState(this.stateService.current.name),window!==i&&i.close()},e,0)},e,!0)}getOpenContentCollectionFunction(e){return t=>{this.handleContentCollectionResponse(e),this.getCcFilesDeferred=this.$q.defer(),this.getCcFilesDeferred.promise.then(e=>{t(e)}),this.stateService.goPeekState(a.xh.CONTENT_COLLECTION_PICKER,{pickerType:"File",multi:"true"})}}constructor(e,t,n,i){this.$q=e,this.postMessageDispatcherService=t,this.stateService=n,this.timeoutService=i}}m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,c.tB)("$q")),d(1,(0,c.tB)(r.HV)),d(2,(0,c.tB)(s.HV)),d(3,(0,c.tB)(o.H))],m),i.module(u,[]).service(p,m)},567361:function(e,t,n){"use strict";n.d(t,{$_:function(){return I},HV:function(){return A},Ro:function(){return k},e1:function(){return w},pr:function(){return P},t6:function(){return R}});var i=n(464027),r=n(276635),s=n(751597),o=n(716865),a=n(852127),l=n(555840),c=n(610624),d=n(473011),u=n(262197),p=n(259197),m=n(12838),h=n(728042),g=n(986709),f=n(88818),b=n(825986),v=n(789423),y=n(398321),S=n(827536),C=n(688454),E=n(800553);let I=9e5,w="ultra.services.content",A="contentService",k="content-update";class T extends u.v{static getInstance(){return T._instance}classConversationIndicatorRemoved(e,t,n,i){this.$emitEvent(T.CLASS_CONVERSATION_INDICATOR_REMOVED,e,t,n,i)}groupConversationIndicatorRemoved(e,t,n,i){this.$emitEvent(T.GROUP_CONVERSATION_INDICATOR_REMOVED,e,t,n,i)}$onClassConversationIndicatorRemoved(e){return super.$onEvent(T.CLASS_CONVERSATION_INDICATOR_REMOVED,e)}$onGroupConversationIndicatorRemoved(e){return super.$onEvent(T.GROUP_CONVERSATION_INDICATOR_REMOVED,e)}constructor(){if(T._instance)throw Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");super(),T._instance=this}}function P(e,t){return e.$on("rootNodeElementFetched",t)}T._instance=new T,T.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",T.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed";class D{generateDeleteConfirmationKey(e,t,n){let i=this.service.generateDeleteConfirmationKey(e,t,n);return(0,v.h)(i)}findParentAndRefresh(e,t,n){this.service.findParentAndRefresh(e,t,n)}constructor(e){this.service=e,this.key=b.fz.Content}}class x{subscribeToRedux(e){e.connect(null,e=>({deleteContentInStore:t=>e(p.Nwg.content.deleteContentInStore(t)),loadContents:t=>e(p.Nwg.content.loadContents(t))}))(this)}truncateDescription(e,t){if(t=t||x.MAX_LENGTH,!e||e.length<=t)return e;let n=" ...";t-=n.length;let i=e.lastIndexOf(" ",t);return i<=0&&(i=t),e.substr(0,i)+n}findRootNode(e,t,n){let i=this.getCacheKey(t,e.$pk)+(null!=n?n:""),r=this.rootNodeCache.get(i);return r||(r=e.contents.$find(t.toString()),this.rootNodeCache.put(i,r),function(e,t,n){e.$broadcast("rootNodeElementFetched",t,n)}(this.$rootScope,e.$pk,t)),r}findContentItem(e,t){return e.contents.$find(t,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group"}).$allow([403])}getCacheKey(e,t){return e.toString()+t}getSettings(e){return this.settingsCache.get(e)}putSettings(e,t){return this.settingsCache.put(e,t)}removeSettings(e){return this.settingsCache.remove(e)}getCourseIndicators(e){return this.indicatorsCache.get(`courseId_${e}`)}putCourseIndicators(e,t){return this.indicatorsCache.put(`courseId_${e}`,t)}removeCourseIndicators(e){return this.indicatorsCache.remove(`courseId_${e}`)}refreshContentInCache(e){if(!e)return;let t=e.courseId,n=(0,S.k)();for(let i=0;i<n.length;i++){let r=n[i],s=this.getCacheKey(r,t),o=this.rootNodeCache.get(s);if(o&&this.updateCachedContent(o,e)){this.rootNodeCache.put(s,o);return}}}updateCachedContent(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(let n=0;n<e.children.length;n++){let i=e.children[n];if(this.updateCachedContent(i,t))return!0}return!1}getOrMakeContentInContentTree(e,t,n,i,r,s){return n?this.getContentInContentTree(e,t,n):this.makeContentInContentTree(e,t,i,r,s)}getContentInContentTree(e,t,n){let i,r;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise())).then(()=>{if(n)return(i=e.findInTreeById(n))?!i.isSafeAssignOn()&&(i.isTest()||i.isAssignment())&&i.$fetch({fields:"safeAssignOptions"}):i=this.CourseModel.$new(t).contents.$find(n,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group"}).$allow([403]),i.$asPromise()}).then(()=>{if(null==i?void 0:i.parentId)return(r=e.findInTreeById(i.parentId))||(r=this.CourseModel.$new(t).contents.$find(i.parentId)),r.$asPromise()}).then(()=>({content:i,parentFolder:r}))}makeContentInContentTree(e,t,n,i,r,s){let o,a;return e.$asPromise().then(e=>(e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise())).then(()=>(a=this.getParentFolder(n,t,e)).$asPromise()).then(()=>(a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise())).then(()=>{let e=a.children.indexOfItemById(void 0);return!s&&e>=0&&a.children[e].positionBefore===i&&a.children[e].positionAfter===r?o=a.children[e]:(o=a.children.$build(),(e=a.children.getInsertionIndex(i,r,!0,a.hasMoreChildren))>=0&&o.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=i&&(o.positionBefore=i),null!=r&&null==i&&(o.positionAfter=r),o.parentId=n||a&&a.id,o.depth=a&&null!=a.depth?a.depth+1:void 0,o.courseId=t,{content:o,parentFolder:a}})}isCourseContentLinkWithLinkSourceId(e,t){if(!e.contentDetail)return!1;let n=e.contentDetail[e.contentHandler.toString()];return!!n&&e.isCourseLink()&&n.linkSourceId===t}addOrUpdateContentInCourseLink(e,t,n){var i,r;if(n>-1&&(null===(i=e.children)||void 0===i?void 0:i.length)>=n)return e.children.splice(n,0,t),e.children.paging.count++,this.$q.when();let s=[];return null===(r=e.children)||void 0===r||r.forEach(e=>{e.id===t.id&&s.push(e.$fetch().$asPromise())}),this.$q.when(s).then(()=>{})}getParentFolder(e,t,n){let i;return e?(i=n.findInTreeById(e))||(i=this.CourseModel.$new(t).contents.$find(e).$allow([g.oji.Forbidden])):i=n,i}makeSoftLinkContentInContentTree(e,t,n,i,r,s){return this.makeContentInContentTree(t,n,i,r,s).then(t=>{let n=t.content;return e&&e.$pk&&(n.contentHandler=l.courseContent.ContentHandler.CourseLink,n.ui.linkSource=e),n.id=null,n.description=e.description,n.title=e.title,n.courseId=e.courseId,n.isAvailable=e.isAvailable,n.visibility=e.visibility,n.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},n})}isEmpty(e){return!e||0===e.trim().length}parseForumId(e){let t=e.split("/");return t[t.length-1]}determineVisibility(e,t){return e?g.hbA.Visible:g.hbA.Hidden}generateDeleteConfirmationKey(e,t,n){let i=this.$q.defer();return e.ui.modalShowType=o.y_.UserChoice.toString(),(e.isFolder()||e.isLearningModule())&&!e.isRoot()?e.isBbPage()?(e.ui.deleteConfirmationKey=m.GQ.Page.toString(),(0,p.gUR)(e.courseId,e.id).then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+this.getHasCourseLinkSuffix(n),e.ui.modalShowType=o.y_.Always.toString())}).catch(()=>{}).finally(()=>{i.resolve(e)})):e.getChildren().$then(async r=>{if(r&&r.length>0){if(await (0,p.gUR)(e.courseId,e.id))e.ui.deleteConfirmationKey=e.contentHandler+this.getHasCourseLinkSuffix(n)+"-and-content",i.resolve(e);else{let n=r.filter(e=>e&&e.isDiscussion()).length;e.hasGradedContentItems().then(s=>{s?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":n===r.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:n>0?t===y.m.Discussions?e.ui.deleteConfirmationKey=e.contentHandler+"-no-discussions":e.ui.deleteConfirmationKey=e.contentHandler+"-contains-discussions":e.ui.deleteConfirmationKey=e.contentHandler+"-no-discussions",i.resolve(e)})}}else(0,p.gUR)(e.courseId,e.id).then(t=>{t?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.contentHandler+this.getHasCourseLinkSuffix(n)):e.ui.deleteConfirmationKey=e.contentHandler+"-empty",i.resolve(e)})}):e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&m.GQ.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then(t=>{t.contentIds.length>1?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",i.resolve(e)):this.checkForAttempts(e,i,n)}).catch(t=>{this.errorModal.handleApiError(t.$response),i.reject(e)}):this.checkForAttempts(e,i,n),i.promise}getHasCourseLinkSuffix(e){return e?"-has-org-links":"-has-course-links"}getCourseLinkSuffix(e){return e?"-org-link":"-course-link"}checkForAttempts(e,t,n){e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),(0,p.gUR)(e.courseId,e.id).then(t=>{t&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+this.getHasCourseLinkSuffix(n),e.ui.modalShowType=o.y_.Always.toString())}).catch(()=>{}).finally(()=>{if(e.canHaveAttempts()&&e.hasGradingColumn())e.ui.modalShowType=o.y_.Always.toString(),e.getAttemptCount().then(n=>{n>0&&(e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-data"),t.resolve(e)}).catch(n=>{403===n.$response.status?(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-unknown",t.resolve(e)):(this.errorModal.handleApiError(n.$response),t.reject(e))});else if(m.GQ.Discussion.isEqualTo(e.contentHandler))e.$fetch().$then(n=>{var i;e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),n.contentDetail[m.GQ.Discussion.toString()]&&(null===(i=n.genericReadOnlyData)||void 0===i?void 0:i.hasGradeColumn)&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded"),t.resolve(e)});else if(e.isJournal())e.$fetch().$then(n=>{let i=n.contentDetail[m.GQ.Journal.toString()].blog;i&&i.gradingAllowed&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded"),t.resolve(e)});else if(m.GQ.CourseLink.isEqualTo(e.contentHandler)){var i,r;let s=e.getLinkContentSource();if(m.GQ.Discussion.isEqualTo(null==s?void 0:s.contentHandler))e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),s.contentDetail[m.GQ.Discussion.toString()]&&(null===(i=s.genericReadOnlyData)||void 0===i?void 0:i.hasGradeColumn)&&(e.ui.modalShowType=o.y_.Always.toString(),e.ui.deleteConfirmationKey=e.ui.deleteConfirmationKey+"-graded");else{let t=this.getCourseLinkSuffix(n),i=(null==s?void 0:s.isBbPage())?e.ui.deleteConfirmationKey=m.GQ.Page.toString():null==s?void 0:null===(r=s.getContentDisplay())||void 0===r?void 0:r.deleteKey();i?e.ui.deleteConfirmationKey=i+t:e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+t}e.ui.modalShowType=o.y_.Always.toString(),t.resolve(e)}else t.resolve(e)})}deleteContent(e){if(e.id){e.ui.isDeleted=!0;let t={};return(e.isGroupContent||e.isFolder())&&(t.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(t.deleteGrades=!0),e.withParams(t).$destroy().$suppressErrorDialog().$asPromise().then(t=>(this.deleteContentInStore&&this.deleteContentInStore(e.id),t)).catch(t=>{e.ui.isDeleted=!1;let n=t.$response;return this.assessment.isExternallyRefQuestionsAPIError(n.data)?this.assessment.openHasExternallyRefQuestionsModal(this.getExternallyRefQuestionsModalType(e.contentHandler)):this.errorModal.handleApiError(n),this.$q.reject(n)})}return this.$q.when()}getExternallyRefQuestionsModalType(e){return m.GQ.Folder.isEqualTo(e)?s.NZ.FOLDER:s.NZ.ASSESSMENT}canOnlyCreateDiscussion(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion}canCreateAllContent(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create}convertBbMLToAttemptFileContentBlocks(e){let t=[];return this.convertBbMLToContentBlocks(e).forEach(e=>{"attemptFileBlock"in e&&t.push(e.attemptFileBlock)}),t}convertAttemptFileContentBlocksToBbML(e){let t=[];return e.forEach(e=>{t.push({attemptFileBlock:e})}),this.convertContentBlocksToBbML(t,"question1 ")}convertBbMLToContentBlocks(e){let t=[],n=document.createElement("div");n.innerHTML=e;for(let e=0;e<n.children.length;e++){let i=n.children[e];if("A"===i.tagName)t.push(this.convertBbMLToFileBlock(i));else if("DIV"===i.tagName){let e=this.getBlockIdFromBbML(i);t.push({textBlock:i.innerHTML.trim(),id:e})}}return t}convertBbMLToFileBlock(e){let t={file:{}};if(e.dataset&&e.dataset.bbfile)try{let n=JSON.parse(e.dataset.bbfile);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:(0,f.tqK)(n.render)},t.linkName=n.linkName,t.currentMimeType=n.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{let n=JSON.parse(e.dataset.bbmedia);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:(0,f.tqK)(n.render)}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));let n=e.href;0===n.indexOf("http://localhost")&&(n=d.uI(n.substr(16))),t.downloadUrl=n;let i=n.match(/xid-(\d+_\d+)/);return i&&(t.id=i[1]),{attemptFileBlock:t,id:this.getBlockIdFromBbML(e)}}convertContentBlocksToBbML(e,t){let n=document.createElement("div");return e.forEach(e=>{if("attemptFileBlock"in e){let t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){let n={};e.attemptFileBlock.ui.isRenderedInline?n.render=p.I_d.Inline:n.render=p.I_d.Attachment,e.attemptFileBlock.alternativeText&&(n.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(n.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(n.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(n)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,n.appendChild(t)}else if("textBlock"in e){let t=document.createElement("div");e.id&&(t.id=e.id),t.innerHTML=e.textBlock,n.appendChild(t)}e.isNewToBbML&&delete e.isNewToBbML}),(t||"")+n.innerHTML}getBlockIdFromBbML(e){return e.id?e.id:this.generateBlockId()}generateBlockId(){return"bbml-editor-id_"+c.V()}fetchIndicatorsPerRequest(e){let t=this.fetchIndicatorsPromiseCache[e];return t||(t=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then(t=>(this.putCourseIndicators(e,t),t),e=>{401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")}).finally(()=>{delete this.fetchIndicatorsPromiseCache[e]}),this.fetchIndicatorsPromiseCache[e]=t),t}fetchIndicators(e,t){if(t)return this.fetchIndicatorsPerRequest(e);let n=this.getCourseIndicators(e);return n?this.$q.when(n):this.fetchIndicatorsPerRequest(e)}getCourseContentCache(e,t){let n=this.getCourseIndicators(e);return n?n.filter(e=>e.contentId===t)[0]:null}setClassConversationHasIndicatorToFalseInCache(e,t,n){let i=this.getCourseIndicators(e);if(i){let s=r.find(i,e=>e.contentId===t);s&&(s.classConversationHasIndicator=!1,s.groupIds||(i=r.filter(i,e=>e.contentId!==t)),this.putCourseIndicators(e,i),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!s.groupIds,n))}}removeGroupIdFromIndicatorCache(e,t,n,i){if(!n)return null;let s=this.getCourseIndicators(e);if(s){let o=r.find(s,e=>e.contentId===t);if(o){if(o.groupIds=r.filter(o.groupIds,e=>n!==e),o.groupIds&&0===o.groupIds.length){delete o.groupIds,o.classConversationHasIndicator||(s=r.filter(s,e=>e.contentId!==t)),this.putCourseIndicators(e,s),this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,o.classConversationHasIndicator,i);return}this.putCourseIndicators(e,s)}}}clearContentGroups(e,t){let n=this.$q.defer();if(e.assignedGroups){if(e.assignedGroups.some(e=>!e.group))throw Error("Expected group to be expanded on content group assignments when clearing groups.");let i=e.assignedGroups.filter(e=>!e.group.groupSetId).map(e=>({method:"DELETE",relativeUrl:e.groupId}));i.length>0&&t.groups.batchUpdate(i),e.isGroupContent=!1,e.assignedGroups=[],e.saveAssignedGroups(!0).$asPromise().then(()=>{this.$rootScope.$broadcast(k,e),n.resolve(e)})}else n.resolve(e);return n.promise}updateVisibility(e){this.loadContents({courseId:e.courseId,contentId:l.courseContent.ContentHandler.CourseLink.isEqualTo(e.contentHandler)?e.getLinkContentSource().id:e.id,fetchAssociatedCourseLinks:!0})}findParentAndRefresh(e,t,n){if(void 0===e.id||void 0===e.parentId||void 0===e.courseId)return;this.$rootScope.$broadcast(E.G,e,n);let i=this.CourseModel.$new(e.courseId),r=this.findRootNode(i,l.courseContent.e6.Root),s=r.findLoadedNodeByIdAndCache(e.id),o=r.findLoadedNodeByIdAndCache(e.parentId);this.childrenRefresher.refreshChildren(s,o,t)}getReferencesCount(e){var t,n,i;let r=e.courseId,s=null===(i=e.contentDetail)||void 0===i?void 0:null===(n=i[g.DXv.File])||void 0===n?void 0:null===(t=n.file)||void 0===t?void 0:t.xid;return r&&s?this.$q.when((0,p.Ffc)({courseId:r,resourceXid:s})):this.$q.when({usageCount:0})}constructor(e,t,n,i,r,s,o,a){this.$q=e,this.DSCacheFactory=t,this.CourseModel=n,this.PartnerContentIdModel=i,this.errorModal=r,this.assessment=s,this.$rootScope=o,this.$ngRedux=a,this.checkShouldAddOrUpdateChildInCourseLink=(e,t,n)=>{var i;return this.$q.when(null===(i=e.children)||void 0===i?void 0:i.filter(e=>!!e.children&&this.isCourseContentLinkWithLinkSourceId(e,t.parentId)).forEach(e=>{if(!e.children||!(e.children.filter(e=>this.isCourseContentLinkWithLinkSourceId(e,t.parentId)).length>0))return this.addOrUpdateContentInCourseLink(e,t,n);this.checkShouldAddOrUpdateChildInCourseLink(e,t,n)}))},this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:I,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=T.getInstance(),h.Z.OnRootScope(o,"content-update",(e,t)=>this.refreshContentInCache(t)),this.subscribeToRedux(a),(0,b.gM)(new D(this)),this.childrenRefresher=new C.H(this.$q)}}x.MAX_LENGTH=60,x.MAX_LENGTH_IN_CONTENT_ITEM=750,x.$inject=["$q","DSCacheFactory",l.N7.H,l.YM.H,a.HV,s.HV,"$rootScope","$ngRedux"];class R extends x{}i.module(w,["angular-data.DSCacheFactory",l.e1,a.e1,s.e1]).service(A,x)},362767:function(e,t,n){"use strict";n.d(t,{HV:function(){return C},e1:function(){return S}});var i,r,s=n(276635),o=n(464027),a=n(12838),l=n(83991),c=n(411832),d=n(891886),u=n(860995),p=n(905620),m=n(129609),h=n(555840),g=n(3636),f=n(825986),b=n(789423),v=n(302032);function y(e,t){return function(n,i){t(n,i,e)}}let S="ultra.service.context",C="context";(i=r||(r={})).Administrator="administrator",i.NonStudent="nonstudent",i.Student="student",i.ClassicNonStudent="classicnonstudent",i.ClassicStudent="classicstudent";class E{isTelemetryEnabled(){return(0,b.h)(this.service.isTelemetryEnabled())}constructor(e){this.service=e,this.key=f.fz.Context}}class I{get course(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}}get courseId(){return this.currentCourse.courseId}set courseId(e){this.currentCourse.load(e)}registerCourseContextDetection(){let e=this;this.$rootScope.$on(u.An,(t,n)=>{e.courseId=n.id})}overrideHelpVariant(e){this.helpVariantOverride=e}guessHelpVariant(){let e=[];if(this.helpVariantOverride){let e=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([e])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&e.push(this.course.model.isClassic()?"classicnonstudent":"nonstudent"),this.getHelpVariantDependencies().then(t=>{let n=t[0],i=t[1];if(n&&e.push("administrator"),this.course&&this.course.model)n&&e.push(this.course.model.isClassic()?"classicnonstudent":"nonstudent");else{let t="student";i.some(e=>!e.isStudentOrGuestMembership())&&(t="nonstudent"),e.push(t)}return 0===e.length&&e.push(this.course&&this.course.model&&this.course.model.isClassic()?"classicstudent":"student"),s.uniq(e)})}getSystemInfo(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo}getTheme(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme}getServerTime(){return g.Z.getServerTime()}getServerTimeAsEpochTime(){return g.Z.getServerTimeAsEpochTime()}getPrivacyPolicyUrls(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy}getCourseId(){return this.currentCourse.courseId}getCurrentUserId(){return this.currentUser.userId}userHasGradebookModificationEntitlement(){let e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(l.SE.ModifyGradebook,e).then(e=>e):this.$q.when(!1)}getBrand(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand}getUiVersion(){return window.__initialContext&&window.__initialContext.uiVersion||""}getPreference(e,t){return this.preferenceService.getPreference(e,t)}getUltraConversionReportId(){return this.course.model.ultraConversionReportId}isTelemetryEnabled(){return this.getSystemInfo().$asPromise().then(e=>e.telemetryEnabled)}setPreference(e,t,n){return this.preferenceService.setPreference(e,t,n)}constructor(e,t,n,i,r,o,l,c,d,u,p){this.$rootScope=e,this.$q=t,this.currentUser=n,this.EntitlementService=i,this.currentCourse=r,this.currentCourseMembership=o,this.preferenceService=l,this.BrandModel=c,this.SystemInfoModel=d,this.PrivacyPolicyModel=u,this.ThemeModel=p,this.helpVariantOverride=null,this.getHelpVariantDependencies=s.memoize(function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(a.lP.ViewAdminTop),this.currentUser.getMemberships()])}),this.registerCourseContextDetection(),this._course=new class{get model(){return r.course}get membership(){return o.courseMembership}},(0,f.gM)(new E(this))}}I=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([y(0,(0,v.tB)("$rootScope")),y(1,(0,v.tB)("$q")),y(2,(0,v.tB)(d.HV)),y(3,(0,v.tB)(c.HV)),y(4,(0,v.tB)(u.HV)),y(5,(0,v.tB)(m.HV)),y(6,(0,v.tB)(p.HV)),y(7,(0,v.tB)(h.UQ.H)),y(8,(0,v.tB)(h.wg.H)),y(9,(0,v.tB)(h.Ut.H)),y(10,(0,v.tB)(h.rS.H))],I),o.module(S,[h.e1,d.e1,c.e1,u.e1,m.e1,p.e1]).service(C,I)},891886:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),r=n(555840),s=n(435181),o=n(348669),a=n(302032);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.service.context.user",d="contextUser";class u{get userId(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user.id:this._userId||null}get userModel(){return this.studentPreview.isInIframeOfPreviewMode()?this.studentPreview.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)}getMemberships(){return this._userModel||(this._userModel=this.getInitialUserModel()),this._userModel.memberships.$fetch({limit:1e4,expand:"course.effectiveAvailability,course.permissions,courseRole"}).$asPromise()}getRoles(){return this.UserModel.$find("me",{expand:"systemRoles,insRoles"}).$asPromise()}update(){return this.UserModel.$find("me",{expand:"systemRoles"}).$then(e=>this._setUserModel(e))}getInitialUserModel(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})}_setUserId(e){return this._userId=e,this._userId}_setUserModel(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel}constructor(e,t,n){this.$window=e,this.UserModel=t,this.studentPreview=n}}u=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([l(0,(0,a.tB)("$window")),l(1,(0,a.tB)(s.HV)),l(2,(0,a.tB)(o.HV))],u),i.module(c,[r.e1,o.e1]).service(d,u)},523827:function(e,t,n){"use strict";n.d(t,{dI:function(){return L},s6:function(){return A}});var i,r,s=n(464027),o=n(276635),a=n(555840),l=n(291830),c=n(473011),d=n(563060),u=n(986709),p=n(259197),m=n(88818),h=n(866176);(i=r||(r={})).BbPage="resource/x-bb-page",i.LtiLaunch="ltilaunch",i.ScormLaunch="scormlaunch",i.ContentUrl="contenturl",i.FileUrl="fileurl",i.None="none";let g=e=>{switch(e){case"resource/x-bb-page":return"resource/x-bb-page";case"ltilaunch":return"ltilaunch";case"scormlaunch":return"scormlaunch";case"contenturl":return"contenturl";case"fileurl":return"fileurl";case"none":return"none"}};class f{deleteKey(){return this.content.contentHandler.toString()}iconClass(){let e=l.Z.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null}linkAction(){let e=this.content.contentHandler;return this.isFromCourseLink&&(e=l.Z.CourseLink),g(e.toString())||e.toString()}viewHandler(){return this.content.contentHandler.toString()}getTargetCourseContentDisplay(){return null}getEditSref(){return null}getEditState(){return null}getEditStateParams(){return null}usesEditButton(){return null!=this.getEditSref()}canUseEditButton(){return this.usesEditButton()&&!!(this.content.permissions&&(this.content.permissions.edit||this.content.permissions.modifyAvailability))}canDownload(){return!1}isLtiLink(){return!1}contentUrl(){throw Error("contentUrl() is not supported for "+this.content.contentHandler.toString())}supportsConversations(){return!1}isXplorLtiLink(){return!1}getContentProgressRoute(){}constructor(e,t){this.content=e,this.isFromCourseLink=t}}class b extends f{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}}class v extends f{getEditState(){return"gradebook-item.assignment"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'}supportsConversations(){return!0}}class y extends f{deleteKey(){if(this.content.getAssociatedGradingColumn){let e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)return e.gradebookCategory.title===u.bu3.Assignment?l.Z.UltraAssignment.toString():l.Z.TestLink.toString()}return this.content.contentHandler.toString()}getEditState(){return d.RK.GRADEBOOK_ITEM_ASSESSMENT}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}}canUseEditButton(){let e=this.content.getDeployedAssessment().permissions;return!!(e&&(e.modify||e.view))}getEditSref(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'}supportsConversations(){return!0}}class S extends f{getEditState(){return"discussion.view.with-grading"}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class C extends f{getTargetCourseContentDisplay(){return this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler?L.normalize(this.targetContent.contentHandler.toString())===l.Z.Discussion.toString()?new S(this.targetContent,!0):new f(this.targetContent,!0):new f(this.content,!0)}constructor(e){super(e),this.content=e,e.contentDetail&&(this.targetContent=e.getLinkContentSource())}}class E extends f{getEditState(){return d.Re.EDIT_FILE}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}canDownload(){var e,t;if(p.lzL.isConditionalReleaseLocked(this.content))return!1;if(!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return!0;let n=null===(t=this.content.contentDetail)||void 0===t?void 0:t[a.courseContent.ContentHandler.File.toString()];return(0,u.lMq)(null==n?void 0:n.fileAssociationMode)}linkAction(){var e;if(!this.content.contentDetail||!(null===(e=this.options)||void 0===e?void 0:e.supportsInlineRender))return"contenturl";let t=this.content.contentDetail[a.courseContent.ContentHandler.File.toString()],n=null==t?void 0:t.fileAssociationMode,i=(null==t?void 0:t.file)&&(0,m.c16)(t.file,this.content.description);return i&&"LINK"!==n&&(0,m.QaU)(i,!0)?"fileurl":"contenturl"}contentUrl(){var e,t;if(p.lzL.isConditionalReleaseLocked(this.content))return;let n=null===(e=this.content.contentDetail)||void 0===e?void 0:e[a.courseContent.ContentHandler.File.toString()];return c.uI(null==n?void 0:null===(t=n.file)||void 0===t?void 0:t.permanentUrl)}getContentProgressRoute(){return{stateName:d.Re.PREVIEW_FILE,args:{id:this.content.id,courseId:this.content.courseId,view:h.GJ.Progress}}}constructor(e,t){super(e),this.options=t}}class I extends f{getEditState(){return d.XO.EDIT_FOLDER}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class w extends f{getEditState(){return"content-manage.edit.learning-module"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class A extends I{static get EDIT_STATE_SREF(){return d.XO.DOCUMENT}getEditState(){return A.EDIT_STATE_SREF}getIconClass(){return l.Z.Document.iconClass}supportsConversations(){return!0}linkAction(){return"resource/x-bb-page"}viewHandler(){return l.Z.Page.toString()}getContentProgressRoute(){return{stateName:d.XO.DOCUMENT,args:{id:this.content.id,courseId:this.content.courseId,view:h.GJ.Progress}}}}class k extends f{getEditState(){return"content-manage.edit.link"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}contentUrl(){let e=a.courseContent.ContentHandler.ExternalLink.toString(),t=(0,o.get)(this.content,["contentDetail",e,"url"],null);return t&&(t=(0,o.unescape)(t)),k.PROTOCOL_CHECK.test(t)?t:"http://"+t}linkAction(){return"contenturl"}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}k.PROTOCOL_CHECK=/^\w+\:{1}/;class T extends f{isCloudDocument(){var e;return this.content.contentDetail&&p.fq8.CloudDocument===(null===(e=this.getContentDetail())||void 0===e?void 0:e.itemOrigin)}getContentDetail(){var e;return this.content.contentDetail[null===(e=this.content.contentHandler)||void 0===e?void 0:e.toString()]}getEditState(){return this.isCloudDocument()?d.Z5.Lti.LTI_LAUNCH_PEEK:"content-manage.edit.lti"}getEditStateParams(){if(this.isCloudDocument()){var e;let t=c.uI(null===(e=this.getContentDetail())||void 0===e?void 0:e.launchLink);return t=c.Ou(t,"from_ultra","true"),{courseId:this.content.courseId,contentId:this.content.id,toolHref:t}}return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return"ltilaunch"}isLtiLink(){return!0}isXplorLtiLink(){var e,t,n,i,r;let s=null===(r=this.content)||void 0===r?void 0:null===(i=r.contentDetail)||void 0===i?void 0:null===(e=i[null===(n=this.content)||void 0===n?void 0:null===(t=n.contentHandler)||void 0===t?void 0:t.toString()])||void 0===e?void 0:e.url;return s&&s.indexOf("://xplor")>-1}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class P extends f{deleteKey(){return l.Z.LtiPlacement.toString()}getEditState(){return"content-manage.edit.placement"}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}linkAction(){return"ltilaunch"}isLtiLink(){return!0}supportsConversations(){return!0}canUseEditButton(){return super.canUseEditButton()&&s.isDefined(this.content.contentDetail)&&s.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&s.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class D extends f{getEditState(){return"scorm-settings"}getEditStateParams(){return{contentId:this.content.id}}getEditSref(){return this.getEditState()+"({contentId:content.id})"}linkAction(){return"scormlaunch"}supportsConversations(){return!0}getContentProgressRoute(){return{stateName:d.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,args:{id:this.content.id,courseId:this.content.courseId}}}}class x extends f{getEditState(){return d.Z5.Journal.JOURNAL_VIEW_WITH_PARTICIPATION}getEditStateParams(){return{courseId:this.content.courseId,contentId:this.content.id}}getEditSref(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"}}class R extends f{linkAction(){return"ltilaunch"}isLtiLink(){return!0}getEditState(){return d.qN.EDIT_PARTNER_CONTENT}getEditStateParams(){return{id:this.content.id}}getEditSref(){return this.getEditState()+"({id:content.id})"}supportsConversations(){return!0}}class L{static normalize(e){return null!=e&&0===e.indexOf(l.Z.LtiPlacement.toString())?l.Z.LtiPlacement.toString():e}static matchesHandlers(e,t){let n=this.normalize(e);return(0,o.findIndex)(t,e=>n===e.toString())>=0}static create(e,t){var n;switch(this.normalize(null===(n=e.contentHandler)||void 0===n?void 0:n.toString())){case l.Z.ClassicAssignment.toString():return new b(e);case l.Z.File.toString():return new E(e,t);case l.Z.Folder.toString():if(e.contentDetail){let t=e.contentDetail[l.Z.Folder.toString()];if(null==t?void 0:t.isBbPage)return new A(e)}return new I(e);case l.Z.ExternalLink.toString():return new k(e);case l.Z.LtiLink.toString():return new T(e);case l.Z.LtiPlacement.toString():return new P(e);case l.Z.Page.toString():return new A(e);case l.Z.PartnerCloud.toString():return new R(e);case l.Z.TestLink.toString():return new y(e);case l.Z.RusticiScorm.toString():return new D(e);case l.Z.UltraAssignment.toString():return new v(e);case l.Z.Discussion.toString():return new S(e);case l.Z.CourseLink.toString():return new C(e).getTargetCourseContentDisplay();case l.Z.LearningModule.toString():return new w(e);case l.Z.Journal.toString():return new x(e);default:return new f(e)}}}},651930:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(464027),r=n(555840),s=n(699868),o=n(259197),a=n(986709),l=n(825986),c=n(789423),d=n(196409),u=n(302032);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.components.services.courseContentIconService",h="courseContentIconService",g="-a|-c|-o|-hc".replace(/-/g,""),f=RegExp(`-(${g})$`,"g");class b{getIconClass(e){return(0,c.h)(this.service.getIconClass(e))}constructor(e){this.service=e,this.key=l.fz.ContentIcon}}class v{matchLtiPlacementHandler(e){return o.ddT.isLtiPlacement(e)?a.DXv.LtiPlacement:e}getIconClass(e){let t;let n=r.courseContent.ContentHandler,i="";if(null==e?void 0:e.contentHandler){var s,a;let l=e.contentHandler.toString(),c=n.parse(this.matchLtiPlacementHandler(l));i=null==c?void 0:c.iconClass;let d=e.getAssociatedGradingColumn?e.getAssociatedGradingColumn():null;if(null==d?void 0:null===(s=d.gradebookCategory)||void 0===s?void 0:s.title)i=this.getColumnIconClassAsString(d);else if(e.contentDetail){if(n.File.isEqualTo(c)){let t=e.contentDetail[n.File.toString()]&&e.contentDetail[n.File.toString()].file&&e.contentDetail[n.File.toString()].file.mimeType||"";i=v.fileMIMETypeToIconClass[t]=v.fileMIMETypeToIconClass[t]||(0,o.RMg)(t)}if(n.CourseLink.isEqualTo(c)&&(t=e.getLinkContentSource().$then(e=>{if(!e.contentHandler)return i;let t=n.parse(e.contentHandler.toString());i=null==t?void 0:t.iconClass})),n.LtiLink.isEqualTo(c)){let t=o.ddT.isCloudDocument(e),r=o.ddT.getCloudDocumentType(e);t&&r&&(i=this.getIconByDocumentType(r,n))}}n.Folder.isEqualTo(c)&&(i=e.contentDetail&&e.contentDetail[n.Folder.toString()]&&e.contentDetail[n.Folder.toString()].isBbPage?n.Document.iconClass:(null===(a=e.ui)||void 0===a?void 0:a.isOpen)?r.courseContent.eP.OpenFolder:r.courseContent.eP.ClosedFolder)}return t?t.$asPromise().then(()=>this.$q.when(i||v.DEFAULT_ICON_CLASS)):this.$q.when(i||v.DEFAULT_ICON_CLASS)}getColumnIconClassAsString(e){var t,n,i;let r="",l=(null===(t=e.isDiscussion)||void 0===t?void 0:t.call(e))||(null===(n=e.isJournal)||void 0===n?void 0:n.call(e));if(e.externalGrade?r=v.GRADE_OVERALL_ICON_CLASS:e.calculationType&&a.eNW.NonCalculated!==e.calculationType?r=v.GRADE_CALCULATIONS_ICON_CLASS:e.gradebookCategory&&e.gradebookCategory.title&&!l&&(r=this.gradeColumnCategory.getCategoryIcon(e.gradebookCategory)),(""===r||r===s.q6.DEFAULT_ICON_FOR_CATEGORY&&l)&&e.scoreProviderHandle){let t=o.u$1.parse(e.scoreProviderHandle.toString());null!=t&&(r=t.iconClass,(null===(i=e.isScormSCO)||void 0===i?void 0:i.call(e))&&(r+=v.SCORM_SCO_ICON_CLASS_SUFFIX))}return r}getColumnIconClass(e){var t;let n="";return n=(null===(t=e.scoreProviderHandle)||void 0===t?void 0:t.toString())===r.courseContent.ContentHandler.LtiLink.handle?o.u$1.LTILink.iconClass:this.getColumnIconClassAsString(e),this.$q.when(n||v.DEFAULT_ICON_CLASS)}getIconName(e){return e.replace("img-icon-","")}getIconNameForLocalization(e){return e.replace(f,"")}constructor(e,t,n){this.$q=e,this.gradeColumnCategory=t,this.ltiService=n,this.getIconByDocumentType=(e,t)=>{switch(e){case a.rz_.Embedded:return t.CloudDocumentPlacement.iconClass;case a.rz_.EmbeddedGoogle:return t.GoogleDocumentPlacement.iconClass;case a.rz_.CloudCollaboration:return t.CollaborativeCloudDocumentPlacement.iconClass;case a.rz_.CloudCollaborationGoogle:return t.CollaborativeGoogleCloudDocumentPlacement.iconClass;default:return""}},(0,l.gM)(new b(this))}}v.DEFAULT_ICON_CLASS="img-icon-document-blank",v.GRADE_OVERALL_ICON_CLASS="img-icon-overall-grade",v.GRADE_CALCULATIONS_ICON_CLASS="img-icon-calculation",v.SCORM_SCO_ICON_CLASS_SUFFIX="-sco",v.fileMIMETypeToIconClass=Object.create(null),v=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,u.tB)("$q")),p(1,(0,u.tB)(s.HV)),p(2,(0,u.tB)(d.HV))],v),i.module(m,[s.e1,d.e1]).service(h,v)},991410:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(276635),r=n(464027),s=n(555840),o=n(891886),a=n(649955),l=n(78029),c=n(986709),d=n(676954);let u="ultra.components.services.courseContent",p="courseContent";class m{loadContentAndGrades(e){let t;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else if(e.contentId){let n=e.contentExtraExpand?","+e.contentExtraExpand:"";t=e.course.contents.$find(e.contentId,{expand:"assignedGroups,selfEnrollmentGroups.group"+n}).$asPromise()}else throw new l.v({message:"Content or contentId must be provided."});if(!this.contextUser.userId)throw new l.v({message:"There is no userId in the context."});return t.then(t=>{let n=new h;if(n.courseContent=t,n.groupMembers=[],e.column)n.gradingColumn=e.column;else{if(e.skipGradeAndRubrics)return n;n.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId))}return n.gradingColumn.rubricAssociations||n.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then(e=>{n.gradingColumn.rubricAssociations=e.rubricAssociations}),this.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:s.Rp.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:n.gradingColumn,content:n.courseContent,userId:this.contextUser.userId},!0).then(r=>{if(n.submitter=this.contextUser.userModel,r){if(n.gradeDetail=r,n.attempt=r.ui.attempt,n.groupAttempt=r.ui.groupAttempt,t.isGroupContent)return this.getGroupMembers(e.course,t,n.groupAttempt).then(e=>(n.groupMembers=e,n.groupAttempt&&(n.submitter=i.find(e,e=>e.id===n.groupAttempt.submittedBy),!n.submitter&&(n.submitter=null,n.groupAttempt.submittedBy)))?this.UserModel.$find(n.groupAttempt.submittedBy).$then(e=>{n.submitter=e||null},e=>this.$log.error(e.$response)).$asPromise().then(()=>n):n)}else if(t.isGroupContent)return this.getGroupMembers(e.course,t).then(e=>(n.groupMembers=e,n));return n})})}getGroupMembers(e,t,n){return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then(t=>e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:c.O8v.Taking}).$asPromise().then(e=>this.sortGroupMembers(e,t))):this.$q.when([])}sortGroupMembers(e,t){let n={},i=[],r=t.memberships||t.members;e.forEach(e=>{e.user&&(e.user.ui=e.user.ui||{},n[e.user.id]=e.user)});let s=[];return r.forEach(e=>{let t=n[e.userId||e];if(t){let e=this.bbLocalize.formatUsername(t,d.ILocaleUsernameFormat.Short,this.$rootScope);s.push(e),e.then(e=>{t.ui.formatUserName=e})}}),this.$q.all(s).then(()=>((r=r.filter(e=>!!n[e.userId||e])).sort((e,t)=>{let i=e.userId||e,r=t.userId||t;return n[i].ui.formatUserName.localeCompare(n[r].ui.formatUserName)}),r.forEach(e=>{let t=e.userId||e;n[t]&&(i.push(n[t]),delete n[t])}),i))}constructor(e,t,n,i,r,s,o){this.$q=e,this.$rootScope=t,this.$log=n,this.grade=i,this.contextUser=r,this.UserModel=s,this.bbLocalize=o,this.contentDataResult=new h}}m.$inject=["$q","$rootScope","$log",a.HV,o.HV,s.EA.HV,d.serviceName];class h{}r.module(u,[s.e1,o.e1]).service(p,m)},341253:function(e,t,n){"use strict";n.d(t,{IG:function(){return C},XN:function(){return g},e1:function(){return d},e2:function(){return p}});var i=n(302032),r=n(860995),s=n(808361),o=n(676954),a=n(817426);function l(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.service.course-context.title-handle",u="coursePageTitleHandling",p=u+"Provider",m={},h={};function g(e,t){h[e]={handlerClass:t}}function f(e){let t=h[e];if(!t)throw Error(`Handler '${e}' not registered`);return t}function b(e,t,n,i){e&&(n=n||[],Object.keys(e).forEach(r=>{if(i&&r in t||n.some(e=>r===e))return;let s=e[r];t[r]=s}))}class v{get provides(){return this.$args.provides||"BasePageTitleHandler"}get instance(){return this.$instance?this.$instance:this.getHandler()}get args(){return this.$args}config(e){return new y(this,e||{})}clean(){return this.instance.clean(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this.$instance=null,this}setDefaultHandler(e){return this.$args.provides=e,this.isInitialized()&&(this.$instance=this.getHandler(this.provides)),this}isInitialized(e){if(this.injector)return!0;if(e)throw Error("Provider not initialized")}registerHandler(e,t){g(e,t)}getHandlerRegistry(e){return f(e||this.provides)}getHandlerClass(e){var t;return null===(t=f(e||this.provides))||void 0===t?void 0:t.handlerClass}getHandler(e,t){if(this.isInitialized(!0)){let n=e||this.provides;if(n===this.$args.provides&&this.$instance)return this.$instance;let i=this.getHandlerRegistry(n);return i.handler||(i.handler=this.injector.instantiate(i.handlerClass),i.handler.getProviderConfig=()=>this.args,i.handler.args={...this.args}),t&&(this.$args.provides=n,this.$instance=i.handler),i.handler}}constructor(e){this.injector=e,this.providerName=u,this.$args={},this.$get=["$injector",e=>e.instantiate(v)]}}v=l([c(0,(0,i.tB)("$injector"))],v);class y{build(e){var t;let n=e.injector||this.provider.injector;if(delete e.injector,!n)throw Error("No injector to build Handler");let i=n.get(this.provider.providerName);return this.args.provides&&this.args.provides!==i.provides&&(i.instance.stopListeningOnAll(),i.setDefaultHandler(this.args.provides)),(null===(t=this.args.clean)||void 0===t||t)&&i.clean(),b(this.args,i.args,["clean"]),this.instance=i.instance.build(e),this}process(e,...t){return this.isBuilt(!0),this.instance.process(e,...t)}isBuilt(e){if(this.instance)return!0;if(e)throw Error("Handler not initialized")}constructor(e,t){this.provider=e,this.args=t}}class S{get pageTitle(){return this.args.pageTitle}set pageTitle(e){this.args.pageTitle=e}get name(){return this.args.name}set name(e){this.args.name=e}build(e){return b(e,this.args),b(this.getProviderConfig(),this.args),this.args.listenOn&&(Array.isArray(this.args.listenOn)?this.args.listenOn.forEach(e=>{this.listenOn(e)}):this.listenOn(this.args.listenOn)),this}clean(){return this.stopListeningOnAll(),Object.keys(this.args).forEach(e=>{delete this.args[e]}),this}getUltraPageName(){let e=this.pageTitle||"base.ultra";return this.args.resolveOrgCourseKey&&this.pageTitle?this.translateCourseOrg(e.substring(0,e.length-7)):this.translate(e)}translateCourseOrg(e){let t="organizations"===this.ultraState.getCurrentUrlParams().coursesOrOrganizations,n=(0,a.Df)(t,a.r9.AppendSection);return this.translate(n(e))}translate(e){return this.bbLocalize.translate({locale:this.$rootScope.index.locale,key:e})}process(e,...t){return this.getUltraPageName().then(e=>{this.$rootScope.index.title=`${e}`})}listenOn(e,t=!0){this.stopListeningOn(e);let n=null;n=Array.isArray(t)?(e,...n)=>{if(t.some(e=>this.ultraState.current.name===e))return this.process(e,...n)}:t?(e,...t)=>{if(this.name===this.ultraState.current.name)return this.process(e,...t)}:(e,...t)=>this.process(e,...t);let i=this.$rootScope.$on(e,n);return m[e]=i,i}stopListeningOn(e){if(Object.keys(m).includes(e))return m[e](),delete m[e],!0}stopListeningOnAll(){Object.keys(m).forEach(e=>{m[e](),delete m[e]})}constructor(e,t,n,i){this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i}}S=l([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(s.HV)),c(3,(0,i.tB)(o.serviceName))],S);class C extends S{process(e,...t){return this.getUltraPageName().then(e=>{this.$rootScope.index.title=`${e} / ${this.currentCourse.course.name}`})}constructor(e,t,n,i,r){super(e,t,n,i),this.$injector=e,this.$rootScope=t,this.ultraState=n,this.bbLocalize=i,this.currentCourse=r}}C=l([c(0,(0,i.tB)("$injector")),c(1,(0,i.tB)("$rootScope")),c(2,(0,i.tB)(s.HV)),c(3,(0,i.tB)(o.serviceName)),c(4,(0,i.tB)(r.HV))],C),g("BasePageTitleHandler",S),g("CoursePageTitleHandler",C);let E=[s.e1,o.moduleName];angular.module(d,E).provider(u,class extends v{})},289319:function(e,t,n){"use strict";n.d(t,{AX:function(){return y},D$:function(){return v},H2:function(){return b},HV:function(){return h},e1:function(){return m},e2:function(){return g},gc:function(){return f}});var i=n(555840),r=n(763017),s=n(808361),o=n(860995),a=n(866176),l=n(986709),c=n(302032),d=n(728042),u=n(391489);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.service.course-context.content",h="currentContentModel",g=h+"Provider",f=r.uh,b=m,v=h,y=g;class S{get contentId(){return this._contentId}get content(){return this._content}connectToRedux(){this.$ngRedux.connect(null,e=>({dispatchContentOpened:t=>{e((0,a.sh)(t))},dispatchContentClosed:t=>{e((0,a.p7)(t))}}))(this)}setCurrentContent(e){e!==this.content&&(e||this.content)&&(this.content&&this.dispatchContentClosed(this.content),this._contentId=e?e.id:null,this._content=e,this.content&&this.dispatchContentOpened(this.content))}clear(){this.setCurrentContent(null)}load(e,t){return e?this.contentId===t&&this.content?this.content.$asPromise():this.loadContent(e,t).then(e=>(this.setCurrentContent(e),e.$asPromise())).catch(e=>this.$q.reject(e)):this.$q.when(null)}loadContent(e,t){return e.$find(t).$allow([404]).$asPromise().then(e=>{let n=e.$response;return n&&n.status===l.oji.NotFound?this.$q.reject(Error(`Content  ${t} not found`)):e.$asPromise()})}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.$ngRedux=n,this.dispatchContentOpened=()=>{},this.dispatchContentClosed=()=>{},this.onStateHasContentInContextChanged=(e,t,n)=>{n&&!t&&this.clear()},this.connectToRedux(),d.Z.OnRootScope(t,u.N.$stateHasContentInContextChanged,this.onStateHasContentInContextChanged)}}S=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,c.tB)("$q")),p(1,(0,c.tB)("$rootScope")),p(2,(0,c.tB)("$ngRedux"))],S);let C=[i.e1];angular.module(m,C).provider(h,class{constructor(){this.$get=["$injector",e=>e.instantiate(S)],this.name=f,this.resolve=["$q",s.HV,h,o.gc,(e,t,n,r)=>{var s;let o=null!==(s=t.nextParams.contentId)&&void 0!==s?s:t.nextParams.id;return o&&o!==i.courseContent.$G?n.load(r.contents,o):e.resolve(void 0)}]}})},129609:function(e,t,n){"use strict";n.d(t,{HV:function(){return g},e1:function(){return h},e2:function(){return f},gc:function(){return b}});var i=n(312019),r=n(555840),s=n(986709),o=n(728042),a=n(763017),l=n(302032),c=n(891886),d=n(348669),u=n(825986),p=n(860995);function m(e,t){return function(n,i){t(n,i,e)}}let h="ultra.service.course-context.membership",g="currentCourseMembership",f=g+"Provider",b=a.lZ;class v{isActAsInstructorMembership(){return this.service.isActAsInstructorMembership()}isStudentMembership(){return this.service.isStudentMembership()}constructor(e){this.service=e,this.key=u.fz.CurrentCourseMembership}}class y{get courseMembership(){return this._courseMembership}clear(){this._courseMembership=null}load(e){return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course&&this.courseMembership.userId===this.currentUser.userId?e.id!==this.courseMembership.course.id?this.$q.reject(Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then(e=>(this._courseMembership=e,this._courseMembership.isInStudentPreview=()=>this.studentPreview.isInIframeOfPreviewMode(),e)):this.$q.reject(Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(Error("Cannot load course membership because no course model was provided"))}hasCourseMembership(){return!!(this.courseMembership&&this.courseMembership.$response.status!==s.oji.NotFound)}availabilityHasBeenBypassed(){return this.courseMembership&&this.courseMembership.availabilityHasBeenBypassed()}courseIsOpen(){return this.courseMembership&&this.courseMembership.courseIsOpen()}courseIsPrivate(){return this.courseMembership&&this.courseMembership.courseIsPrivate()}courseIsComplete(){return this.courseMembership&&this.courseMembership.courseIsComplete()}isStudentMembership(){return this.courseMembership&&this.courseMembership.isStudentMembership()}isGuestMembership(){return this.courseMembership&&this.courseMembership.isGuestMembership()}isStudentOrGuestMembership(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()}isActAsInstructorMembership(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()}isTeachingAssistantMembership(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()}isInRoleBucket(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)}isDueDateExcepted(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()}constructor(e,t,n,i,r){this.$q=e,this.$rootScope=t,this.currentUser=n,this.studentPreview=i,this.CourseModel=r;let s=this;o.Z.OnRootScope(t,p.An,(e,t,n)=>{(null==t||null===t.id)&&s.clear()}),(0,u.gM)(new v(this))}}y=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([m(0,(0,l.tB)("$q")),m(1,(0,l.tB)("$rootScope")),m(2,(0,l.tB)(c.HV)),m(3,(0,l.tB)(d.HV)),m(4,(0,l.tB)(i.H))],y);let S=[c.e1,r.e1,d.e1];angular.module(h,S).provider(g,class{constructor(){this.$get=["$injector",e=>e.instantiate(y)],this.name=b,this.resolve=[a.c6,d.HV,g,"$q",(e,t,n)=>t.init(e).then(()=>n.load(e))]}})},860995:function(e,t,n){"use strict";n.d(t,{An:function(){return C},e1:function(){return v},e2:function(){return S},gc:function(){return E},HV:function(){return y}});var i=n(555840),r=n(728042),s=n(391489),o=n(276635),a=n(986709);class l{destroy(){this._cache={},this.offHookUserModel()}miss(e){return e.filter(e=>!(e in this._cache))}hit(e){let t=[].concat(e),n=this.miss(t);return o.isEmpty(n)}get(e,t){let n=this._cache[e];return!n&&t?t:n}invalidate(e){delete this._cache[e]}cache(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)}fetchUsers(e,t,n){let i=n.defer(),r=this.miss([].concat(e));return o.isEmpty(r)?i.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(r,{},[a.oji.NotFound]).$then(e=>{i.resolve(this)})),i.promise}offHookUserModel(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)}constructor(){this._cache={},this.hookUserModel=o.once(e=>{let t=this;return this.offHookUserModelFunc||(this.offHookUserModelFunc=e.$mixHook("after-feed",function(){t.cache(this.id,this)})),this.offHookUserModelFunc})}}class c extends l{constructor(e){super(),this.courseId=e}}var d=n(302032),u=n(435181),p=n(312019),m=n(676954),h=n(246233),g=n(763017),f=n(212374);function b(e,t){return function(n,i){t(n,i,e)}}let v="ultra.service.course-context.course",y="currentCourseModel",S=y+"Provider",C=v+"."+y+".changed",E=g.c6;class I{get courseId(){return this._courseId}get course(){return this._courseModel}get usersCache(){return this._usersCache}load(e){return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then(t=>this.$q.all([this.loadLocalizationBundle(t),this.entitlementCache.loadCourseEntitlements(e)]).then(()=>(this.update(e,t),this._courseModel)),e=>this.$q.reject(Object.assign(e||{},{goToBasePage:!0}))):this.$q.when(null)}loadCourse(e){return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then(t=>{let n=t.$response;if(n&&404===n.status){let t=Error("Course "+e+" not found");return Object.assign(t,{goToBasePage:!0,errorModalConfig:{response:n,template:f}}),this.$q.reject(t)}return t})}loadLocalizationBundle(e){let t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])}clear(){this.update(null,null)}update(e,t){let n=this.courseId,i=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new c(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(C,{id:e,model:t},{id:n,model:i})}refreshStudentPreviewStatus(){return this._courseModel.studentPreview.$fetch()}constructor(e,t,n,i,o,a){this.$q=e,this.$rootScope=t,this.bbLocalize=n,this.entitlementCache=i,this.CourseModel=o,this.UserModel=a;let l=this;r.Z.OnRootScope(t,s.N.$stateHasCourseInContextChanged,(e,t,n)=>{n&&!t&&l.clear()})}}I=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([b(0,(0,d.tB)("$q")),b(1,(0,d.tB)("$rootScope")),b(2,(0,d.tB)(m.serviceName)),b(3,(0,d.tB)(h.HV)),b(4,(0,d.tB)(p.H)),b(5,(0,d.tB)(u.HV))],I);let w=[i.e1,m.moduleName,h.e1];angular.module(v,w).provider(y,class{constructor(){this.$get=["$injector",e=>e.instantiate(I)],this.name=E,this.resolve=["$state",y,(e,t)=>{let n=e.nextParams.courseId;return t.load(n)}]}})},763017:function(e,t,n){"use strict";n.d(t,{c6:function(){return i},lZ:function(){return r},uh:function(){return s},vI:function(){return o}});let i="currentCourse",r="membership",s="currentContent",o="studentPreviewStatus"},52306:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),r=n(658895),s=n(555840),o=n(553374),a=n(986709);let l="ultra.service.course.conversion",c="courseConversion";class d{_getConversionTask(e){return this.ScheduledTaskModel.$find(e)}isPreview(e){return!e.isOpen()&&e.isUltraPreview()}isConversionComplete(e){return!e||e===a.hRl.Complete||e===a.hRl.CompleteErrors}isConversionSuccess(e){return!e||e===a.hRl.Complete}setCheckConversionIntervalIfNotExist(e,t){this.taskCache[e.courseId]||this.setCheckConversionInterval(e,t)}setCheckConversionInterval(e,t){let n=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&n&&(t=n.onCompleteCallback),e.refreshConvertToUltraStatus().then(n=>{this.queuedTaskCache[e.courseId]=n.ui.convertToUltraTaskId,this._getConversionTask(this.queuedTaskCache[e.courseId]).$then(n=>{this.setUpIntervalToPollForConversionTaskCompletion(n,e,t)})})}setUpIntervalToPollForConversionTaskCompletion(e,t,n){let i=e.taskTitle;if(i&&(i.indexOf("ConvertTOUltraQueuedOperation")>=0||i.indexOf("UndoUltraQueuedOperation")>=0)){let i;if(i=()=>{this._getConversionTask(e.taskId).$then(e=>{let n=e.taskStatus.toString(),i=this.isConversionComplete(n),r=this.isConversionSuccess(n);if(i){let s=this.cancelConversionInterval(t);this.removeQueuedTaskFromCache(t),s&&s.onCompleteCallback&&s.onCompleteCallback(n,{complete:i,success:r,taskId:e.taskId,taskTitle:e.taskTitle})}})},!this.taskCache[t.courseId]){let e=r.default.production?6e4:6e3;this.taskCache[t.courseId]={interval:this.interval(()=>{i()},this.$rootScope,e),onCompleteCallback:n}}}}cancelConversionInterval(e){let t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t}removeQueuedTaskFromCache(e){delete this.queuedTaskCache[e.courseId]}constructor(e,t,n,i,r,s){this.interval=e,this.CourseModel=t,this.$modal=n,this.$q=i,this.$rootScope=r,this.ScheduledTaskModel=s,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}}d.$inject=[o.H,s.N7.H,"$modal","$q","$rootScope",s.M.H],i.module(l,[s.e1,o.e]).service(c,d)},942435:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u}});var i=n(464027),r=n(728042),s=n(516633),o=n(555840),a=n(986709),l=n(259197),c=n(302032);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultra.service.courseMembership",p="courseMembership";class m{subscribeToRedux(){this.$ngRedux.connect(null,e=>({loadCourseMembershipByUserId:(t,n)=>e(l.Nwg.courseMembership.loadCourseMembershipByUserId(t,n))}))(this)}getMembershipByUserId(e,t){let n=l.Ys.courseMembership.getCourseMembershipByUserId(this.$ngRedux.getState(),e,t);return(null==n?void 0:n.courseRole)?this.$q.resolve(n):this.$q.when(this.loadCourseMembershipByUserId(e,t))}getUserCourseAvailabilities(e){if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);let t=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then(n=>{n.forEach(t=>{this.userCourseAvailabilities[e][t.userId]=t.isAvailable}),this.userCourseAvailabilities[e][l.rL4.getAllMembersFakeUserId()]=!0,this.userCourseAvailabilities[e][s.s3()]=!1,t.resolve(this.userCourseAvailabilities[e])}),t.promise}getMsgToolAvailability(e,t){if(!e)return;if(t||null==this.msgToolAvailability[e.id]){if(e.isUltra())this.msgToolAvailability[e.id]=!0;else{let t=this.fetchToolAvailabilityPromiseCache[e.id];return t||(t=e.tools.$find("messages").$asPromise().then(t=>(this.msgToolAvailability[e.id]=t.isVisible,t.isVisible),e=>{console.error("Fetch ToolAvailability error!")}).finally(()=>{delete this.fetchToolAvailabilityPromiseCache[e.id]}),this.fetchToolAvailabilityPromiseCache[e.id]=t),t}}let n=this.$q.defer();return n.resolve(this.msgToolAvailability[e.id]),n.promise}isUserCourseAvailable(e,t){return this.userCourseAvailabilities[e][t]}createGuestMembership(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:a.TsU.Guest})}constructor(e,t,n,i,s){this.$q=e,this.$rootScope=t,this.$ngRedux=n,this.CourseModel=i,this.CourseMembershipModel=s,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},this.subscribeToRedux(),r.Z.OnRootScope(this.$rootScope,"membership.update",(e,t,n,i,r,s,o,a)=>{this.getUserCourseAvailabilities(a).then(()=>{this.userCourseAvailabilities[a][o.id]=t.isAvailable})}),r.Z.OnRootScope(this.$rootScope,"deleteMembership",(e,t,n,i)=>{this.getUserCourseAvailabilities(i).then(()=>{this.userCourseAvailabilities[i][t.id]=!1})}),r.Z.OnRootScope(this.$rootScope,"roster.enroll.new.membership",(e,t,n,i)=>{this.getUserCourseAvailabilities(n).then(()=>{this.userCourseAvailabilities[n][i]=t.isAvailable})})}}m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,c.tB)("$q")),d(1,(0,c.tB)("$rootScope")),d(2,(0,c.tB)("$ngRedux")),d(3,(0,c.tB)(o.N7.H)),d(4,(0,c.tB)(o.lZ.serviceName))],m),i.module(u,[o.e1]).service(p,m)},197584:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return o}}),n(464027);var i,r=n(302032),s=n(480489);let o="debounceServiceModule",a="debounceService";class l{asDebounced(e,t,n){let i;return(...r)=>{i&&this.$timeout.cancel(i),i=this.$timeout(()=>{i=null,e(...r)},t,n)}}constructor(e){this.$timeout=e}}l=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,r.tB)(s.H),function(e,t){i(e,t,0)})],l),angular.module(o,[s.e]).service(a,class extends l{})},483708:function(e,t,n){"use strict";var i=n(276635),r=n(274476),s=n(473011),o=n(658895),a=n(99035);let l=e=>{switch(e){case a.in.Debug:return"DEBUG";case a.in.Error:return"ERROR";case a.in.Information:return"INFO";case a.in.Warning:return"WARN";default:return"UNKN"}};t.ZP=new class{getHistory(){return r.ZP.getHistory()}getSiteId(){return this.context?this.context.getSystemInfo().siteId:null}getUserAgent(){return navigator.userAgent}getUser(){return this.userService?this.userService.userModel:null}init(e,t,n,i,s){this.context=e,this.userService=t,this.getTraceMessages=s,r.ZP.setStorage(n,i)}async getDebugInfoRaw(){var e,t;let n=this.getUser(),i=await this.getHistory();return{userAgent:this.getUserAgent(),siteId:this.getSiteId(),siteDomain:s.mg(),buildNumber:o.default.buildInfo.buildNumber,ultraVersion:o.default.buildInfo.ultraVersion,learnVersion:o.default.buildInfo.learnVersion,userId:null!==(e=null==n?void 0:n.id)&&void 0!==e?e:null,userName:null!==(t=null==n?void 0:n.userName)&&void 0!==t?t:null,analyticsHistory:i,generatedTime:new Date().toUTCString(),traces:this.getTraceMessages()}}async getDebugInfoFriendly(){let e=await this.getDebugInfoRaw(),t=[],n={innerHeight:null,innerWidth:null,outerHeight:null,outerWidth:null},r=!1;return t.push("===== Basic Session Info ===="),t.push(`Debug Exported at: ${e.generatedTime}`),t.push(`User Agent: ${e.userAgent}`),t.push(`Site Domain: ${e.siteDomain}`),t.push(`Build Number: ${e.buildNumber}`),t.push(`Ultra Version: ${e.ultraVersion}`),t.push(`Learn Version: ${e.learnVersion}`),e.siteId?t.push(`Learn Site ID: ${e.siteId}`):t.push("Learn Site ID: site id unavailable, no context provided"),e.userId?t.push(`User: ${e.userName} (${e.userId})`):t.push("User: user id unavailable, no context provided"),t.push("===== Recent Analytics History (oldest first) ====="),e.analyticsHistory.forEach(e=>{e.screenDimension&&!i.isEqual(n,e.screenDimension)&&(t.push(`${e.timestamp}: Screen Size ${r?"changed to ":"is "} ${e.screenDimension.innerHeight} x ${e.screenDimension.innerWidth}`),Object.assign(n,e.screenDimension),r=!0),"click"===e.action?t.push(`${e.timestamp}: clicked on ${e.analyticsId}`):"pageview"===e.action?t.push(`${e.timestamp}: navigated to ${e.analyticsId}`):"request error"===e.action&&t.push(`${e.timestamp}: Request error: ${e.analyticsId}`)}),t.push("===== Recent Trace Messages (oldest first) ====="),e.traces.forEach(e=>{let n=[`${l(e.level)}	`,new Date(e.ts).toISOString(),`[${e.topic}]`,e.message,e.exception?JSON.stringify(e.exception):null,e.context?JSON.stringify(e.context):null];t.push(n.join(" "))}),t}constructor(){this.getTraceMessages=()=>[]}}},847153:function(e,t,n){"use strict";n.d(t,{mE:function(){return l},tE:function(){return a}});var i=n(99035);class r{push(e){if(this.messages.push(e),this.messages.length>this.capacity){var t;let e=this.messages.shift();this.truncatedAt=null!==(t=null==e?void 0:e.ts)&&void 0!==t?t:null}}getTruncationRecord(){return this.truncatedAt?{topic:"tracing.debug-info-sink",ts:this.truncatedAt,level:this.level,message:"Trace queue truncated",context:{}}:null}getMessages(){let e=this.getTruncationRecord();return[...e?[e]:[],...this.messages]}clear(){this.messages=[]}constructor(e,t){this.level=e,this.capacity=t,this.messages=[],this.truncatedAt=null}}let s=new Map;for(let e of Object.values(i.in))s.set(e,new r(e,25));let o=e=>{let t=s.get(e.level);null==t||t.push(e)},a=()=>{i.HE.addSink(o),i.HE.addSink(i.xj)},l=()=>{let e=Object.values(i.in).flatMap(e=>{var t,n;return null!==(n=null===(t=s.get(e))||void 0===t?void 0:t.getMessages())&&void 0!==n?n:[]});return e.sort((e,t)=>e.ts-t.ts),e}},257663:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),r=n(567361),s=n(12838),o=n(83991),a=n(411832),l=n(555840);let c="ultra.components.services.discussionPermission",d="discussionPermission";class u{canCreateAllContent(e){if(e){let t;let n=this.CourseModel.$new(e),i=this.content.findRootNode(n,l.courseContent.e6.Interactive);return i.$then(()=>{(t=i.children)||(t=i.getChildren({limit:0}))}).$asPromise().then(()=>t.$asPromise().then(()=>t.permissions&&t.permissions.create))}return this.$q.when(!1)}hasEditPermission(e){return this.entitlement.hasCourseEntitlement(s.eo.ModifyContent,e)}hasEditAvailabilityPermission(e){return this.entitlement.hasCourseEntitlement(s.eo.ModifyContentAvailability,e)}hasEditDueDatePermission(e){return this.entitlement.hasCourseEntitlement(o.SE.ModifyItemDueDate,e)}hasGradingPermission(e){return this.entitlement.hasCourseEntitlement(o.SE.ModifyGradebook,e)}canDeleteDiscussion(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()}areAnyGroupEntitled(e){return this.entitlement.areAnyEntitled([s.pQ.CreateGroups,s.pQ.DeleteGroups,s.pQ.ManageGroupMembership,s.pQ.ModifyGroups,s.pQ.ViewGroups],e)}constructor(e,t,n,i){this.$q=e,this.content=t,this.CourseModel=n,this.entitlement=i}}u.$inject=["$q",r.HV,l.N7.H,a.HV],i.module(c,[r.e1,l.e1,a.e1]).service(d,u)},808611:function(e,t,n){"use strict";n.d(t,{HV:function(){return w},Qx:function(){return A},e1:function(){return I}});var i=n(276635),r=n(464027),s=n(12838),o=n(555840),a=n(676954),l=n(516633),c=n(658895),d=n(567361),u=n(362767),p=n(860995),m=n(129609),h=n(891886),g=n(808361),f=n(411832),b=n(257663);n(909588);var v=n(302032),y=n(83991),S=n(986709),C=n(817426);function E(e,t){return function(n,i){t(n,i,e)}}let I="ultra.service.discussion",w="discussionService",A="default";class k{init(e){let t=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(t===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=t,this.redirectedFromStream="base.recentActivity"===this.ultraState.getBaseState(),this.reloaded=!this.ultraState.current.name,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[l.s3()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then(e=>{e.forEach(e=>{let t=e.role.toString();t in o.XY.M4?this.userCourseRoles[e.userId]=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:o.XY.M4[t]}):this.userCourseRoles[e.userId]=t,this.userCourseAvailabilities[e.userId]=e.isAvailable})}),this.resolveCourse().then(e=>{let t;this.course=e,this.outlineRoot=this.contentService.findRootNode(this.course,o.courseContent.e6.Root),this.engagementRoot=this.contentService.findRootNode(this.course,o.courseContent.e6.Interactive);let n=this.ultraState.nextParams.columnId;t=n&&n!==o.Rp.CREATE_COLUMN_ID?this.course.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise():this.$q.when();let i=this.$q.when();this.ultraState.getBaseState()===c.default.defaultBasePage&&(i=this.courseMembership.load(this.course));let r=this.course.id;return this.$q.all([t,this.entitlementService.hasCourseEntitlement(s.s7.ViewAssessment,r),this.discussionPermission.hasEditPermission(r),this.entitlementService.hasCourseEntitlement(y.SE.Observe,r),this.entitlementService.hasCourseEntitlement(y.SE.ViewGradebookMetaData,r),this.entitlementService.hasCourseEntitlement(y.SE.ViewAttempts,r),i])}).then(([e,t,n,i,r,s])=>{e&&(this.column=e),this.canViewAssessments=t,this.hasEditPermission=n,this.canObserveGradebook=i,this.canViewGradebook=r,this.canViewAttempts=s})}destroy(){this.persistNewDiscussionDefer?this.persistNewDiscussionDefer.promise.then(()=>{this.clearDiscussionOnExit()}):this.clearDiscussionOnExit()}clearDiscussionOnExit(){this.initCount--,this.initCount>0||(this.deleteEmptyDiscussionOnExit(),this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0,this.redirectedFromStream=void 0,this.reloaded=void 0)}loadDiscussion(e,t,n){return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then(()=>this.loadSoftContent()).then(()=>(e&&(i.merge(this.hardLinkContent,e),!n&&this.hasGroups()?this.hardLinkContent.assignedGroups.some(e=>this.groupId===e.groupId)||(this.groupId=this.hardLinkContent.assignedGroups[0].groupId):this.groupId=""),this.doLoadDiscussion(t)))}doLoadDiscussion(e=this.forumId){return this.course.forums.$new(e).messages.$fetch().$asPromise().then(e=>{this.currentDiscussion=e.find(e=>!e.groupId)})}createDiscussion(){let e=this.ultraState.params,t=this.ultraState.includes("**.course.outline.**")?void 0:e.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,t,e.positionBefore,e.positionAfter)]).then(([e,t])=>{this.currentDiscussion=e,this.hardLinkContent=t.content,this.hardLinkContent.contentHandler=o.courseContent.ContentHandler.Discussion,this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.isAvailable=this.currentDiscussion.isAvailable})}newDiscussionPersist(e){let t=[{tag:"table",replacementText:this.bbLocalize.translateSync({key:"course.content.tablePlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)})},{tag:"math",replacementText:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder",locale:this.bbLocalize.getLocale(this.$rootScope)}),replacementTextPlural:this.bbLocalize.translateSync({key:"course.content.mathPlaceholder.plural",locale:this.bbLocalize.getLocale(this.$rootScope)})}],n=(0,C.BD)(this.currentDiscussion.body.rawText,t),i=this.contentService.truncateDescription(n,d.t6.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=i,this.currentDiscussion.$patch(["aiState","body","plaintextDescription"]).$asPromise().then(()=>this.doLoadDiscussion(e)).then(()=>{this.hardLinkContent.title=this.currentDiscussion.subject,this.hardLinkContent.description=i,this.softLinkContent&&(this.softLinkContent.title=this.currentDiscussion.subject,this.softLinkContent.description=i)})}loadHardContent(e=!1){if(this.loadHardContentP)return this.loadHardContentP;let t=`${e?"":"alignedGoals,"}assignedGroups.group,selfEnrollmentGroups.group`;return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:t}).$asPromise().then(e=>this.hardLinkContent=e)}loadSoftContent(){return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then(e=>{if(e.length)return this.contentService.getOrMakeContentInContentTree(this.outlineRoot,this.course.id,e[0].courseContent).then(e=>this.softLinkContent=e.content)}):this.$q.when()}addOrUpdateDiscussionInCourseLink(e=!1){if(e){var t;let e=null===(t=this.softLinkContent)||void 0===t?void 0:t.id;return this.contentService.getContentInContentTree(this.outlineRoot,this.currentCourseId,e).then(({parentFolder:t})=>{if(t){let n=e?t.children.indexOfItemById(e):-1;return this.contentService.checkShouldAddOrUpdateChildInCourseLink(this.outlineRoot,this.softLinkContent,n)}})}return this.contentService.checkShouldAddOrUpdateChildInCourseLink(this.outlineRoot,this.softLinkContent,-1)}async persistNew(){try{this.persistNewDiscussionDefer=this.$q.defer(),this.updateHardLinkContent(this.currentDiscussion);let e=await this.hardLinkContent.$save().$asPromise();if(this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),await this.currentDiscussion.$save().$asPromise(),!await this.discussionPermission.canCreateAllContent(this.currentCourseId)){await this.ultraState.search("contentId",this.currentContentId);return}let{parentId:t,positionBefore:n,positionAfter:i}=this.ultraState.params;this.ultraState.includes("**.course.engagement.**")&&(t=this.outlineRoot.id,n=null,i=null);let r=await this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,t,n,i);r&&(this.softLinkContent=r,this.softLinkContent.title=this.hardLinkContent.title,await this.softLinkContent.$save().$asPromise()),await this.ultraState.search("contentId",this.currentContentId)}finally{this.persistNewDiscussionDefer.resolve(),await this.addOrUpdateDiscussionInCourseLink(!0)}}get body(){var e,t;return null===(t=this.currentDiscussion)||void 0===t?void 0:null===(e=t.body)||void 0===e?void 0:e.rawText}get discussion(){if(this.currentDiscussion&&this.currentDiscussion.ui){var e;return null===(e=this.currentDiscussion.ui)||void 0===e?void 0:e.replies}return""}setAiState(e){this.currentDiscussion&&(this.currentDiscussion.aiState=e),this.hardLinkContent&&(this.hardLinkContent.aiState=e),this.softLinkContent&&(this.softLinkContent.aiState=e)}isDefaultTitle(){var e,t;return((null===(e=this.softLinkContent)||void 0===e?void 0:e.title)||(null===(t=this.hardLinkContent)||void 0===t?void 0:t.title))===this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$rootScope),key:"components.directives.header.placeholder.x-bb-forumlink",params:{date:this.context.getServerTime()},noWrap:!0})}isEmptyDiscussion(){var e;return!this.body&&!(null===(e=this.discussion)||void 0===e?void 0:e.length)&&this.isDefaultTitle()}deleteEmptyDiscussionOnExit(){if(this.isEmptyDiscussion()){let e=this.ultraState.includes("**.course.outline.**")||this.ultraState.includes("**.engagement.**");this.deleteEmptyDiscussion(e)}}deleteEmptyDiscussion(e){var t,n;this.softLinkContent&&this.softLinkContent.id&&this.$rootScope.$broadcast("deleteContent",this.softLinkContent,!1),(null===(t=this.currentDiscussion)||void 0===t?void 0:t.gradedColumn)&&(null===(n=this.currentDiscussion)||void 0===n?void 0:n.gradedColumn.id)&&this.$rootScope.$broadcast("bb-delete-column",this.currentDiscussion.gradedColumn),this.$rootScope.$broadcast("deleteContent",this.hardLinkContent,e)}expandUsersInParticipants(e,t=!1){if(i.isEmpty(e))return this.$q.when(e);let n=e[0];if(null==n||null==n.userId)return this.$q.when(e);let r=e.map(e=>e.userId);return(!t||this.contextCourse.usersCache.hit(r)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then(()=>this.contextCourse.usersCache.fetchUsers(r,this.UserModel,this.$q).then(t=>(e.forEach(e=>{e.data=t.get(e.userId)}),this.$q.when(e))))}getParticipantCount(e=null){return this.loadHardContent().then(()=>(e||(e=this.forumId),this.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:this.groupId}).$then(e=>this.expandUsersInParticipants(e)).$asPromise())).then(e=>{this.participantCount=e.filter(e=>e.topLevelReplyCount+e.secondLevelReplyCount>0).length})}queryParticipants(e,t,n="",i=!1){let r={limit:t,q:n,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(r).$asPromise().then(e=>this.expandUsersInParticipants(e,i))}async queryParticipant(e,t){let n=await this.course.forums.$new(e).usercounts.$fetch({userIds:[t],offset:0}).$asPromise(),i=n.map(e=>e.userId),r=await this.contextCourse.usersCache.fetchUsers(i,this.UserModel,this.$q);return n.forEach(e=>{e.data=r.get(e.userId),e.data||(e.data=l.Bv(this.$rootScope,this.bbLocalize))}),this.$q.when(n[0])}isPostFirstSatisfied(e,t=this.forumId){return this.loadHardContent().then(()=>this.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then(e=>this.expandUsersInParticipants(e)).$asPromise()).then(t=>{let n=t.find(t=>t.data.id===e);return!!(n&&n.topLevelReplyCount)})}refreshParticipationGrade(){if(this.hasNoGroups()){this.column=void 0;return}return this.resolveColumn().then(e=>{e&&(this.column=e,this.column.summary&&this.column.summary.$fetch&&(this.getParticipantCount(),this.column.summary.$fetch({groupId:this.groupId})))})}saveContent(){return this.hardLinkContent.$patch().$then(()=>(this.softLinkContent&&this.softLinkContent.id&&(this.softLinkContent.title=this.hardLinkContent.title,this.softLinkContent.applyAvailabilitySettings(this.hardLinkContent),this.softLinkContent.$patch().$then(()=>{this.$rootScope.$broadcast("content-update",this.softLinkContent)})),this.$rootScope.$broadcast("content-update",this.hardLinkContent),this.broadcastGradebookColumnUpdate(),this.addOrUpdateDiscussionInCourseLink())).$asPromise()}saveTopic(){return this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,d.t6.MAX_LENGTH_IN_CONTENT_ITEM),this.currentDiscussion.$patch(["aiState"]).$then(()=>{this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent),this.broadcastGradebookColumnUpdate()),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))}).$asPromise()}broadcastGradebookColumnUpdate(){this.$rootScope.$broadcast("attempt-base-content-update",this.hardLinkContent,this.course.id)}loadGroup(e,t){if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){let e={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:null!=t?t:"components.directives.conversation.classConversation"}),index:0,groupId:A,extraClass:""};this.assignedGroupsFiltersArray=Array(e),this.selectedGroup=e}if(this.hasGroups()){let t=!1,n=e?1:0,i=this.hardLinkContent.assignedGroups.map(i=>{let r={name:!e||this.hasEditPermission?i.groupTitle:this.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:n++,groupId:i.groupId,isInGroupSet:!!(i.group&&i.group.groupSetId)};return this.redirectedFromStream&&!this.reloaded&&this.redirectToNeedGradingGroup(i.groupId,r),this.groupId&&this.groupId===r.groupId&&(this.selectedGroup=r,t=!0),r});this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(i):i,t||!this.assignedGroupsFiltersArray.length||(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""}async redirectToNeedGradingGroup(e,t){this.$q.when((async()=>{await this.resolveColumn();let n=await this.column.summary.$fetch({groupId:e}).$asPromise();(null==n?void 0:n.numStudentsNeedsGrading)>0&&(this.groupId=e,this.selectedGroup=t,this.refreshParticipationGrade(),this.$rootScope.$broadcast("group-change",this.groupId))})())}clearGroups(){this.hardLinkContent&&this.contentService.clearContentGroups(this.hardLinkContent,this.course).then(()=>{this.groupId="",this.$rootScope.$broadcast("discussion-group-content-update",this.hardLinkContent),this.$rootScope.$broadcast("load-participants")})}isGroupDiscussion(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)}hasGroups(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length}hasNoGroups(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length}isOpenFromConversation(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0}get forumId(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)}get alignedGoalsCount(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0}updateHardLinkContent(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,d.t6.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}}buildDiscussion(){return this.engagementRoot.$asPromise().then(()=>{let e=!1;this.contentService.canOnlyCreateDiscussion(this.engagementRoot)&&(e=!0);let t=this.contextUser.userModel;return this.course.forums.$new().messages.$build({courseId:this.contextCourse.courseId,userId:t.id,postedName:t.userName,subject:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:e})})}stopActivityAfterDueDate(){var e,t,n,i,r;let s=this.context.getServerTime(),o=this.isGroupDiscussion()&&(null===(e=this.hardLinkContent)||void 0===e?void 0:e.dueDateExceptionType)===S.AVG.Unlimited,a=!this.isGroupDiscussion()&&this.courseMembership.isDueDateExcepted();return this.courseMembership.isStudentMembership()&&!o&&!a&&(null===(n=this.currentDiscussion)||void 0===n?void 0:null===(t=n.gradedColumn)||void 0===t?void 0:t.enforceDueDate)&&s>(null===(r=this.currentDiscussion)||void 0===r?void 0:null===(i=r.gradedColumn)||void 0===i?void 0:i.dueDate)}updateDiscussion(e){let t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})}resolveCourse(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()}refetchColumn(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()}hasViewGradebookColumnPermission(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook}resolveColumn(){return this.column?this.column.$asPromise():this.loadDiscussion().then(()=>this.currentDiscussion.gradedColumn?this.hasViewGradebookColumnPermission()?this.course.gradebook.columns.$new(this.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():this.$q.when(this.currentDiscussion.gradedColumn):void 0)}get isGradedDiscussion(){return this.currentDiscussion&&this.currentDiscussion.allowGrading}set groupId(e){let t=this._groupId;r.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup&&this.ultraState.search("groupId",this._groupId),this.ultraState.search("disGroupId",this._groupId))}get groupId(){return this._groupId===A?"":this._groupId}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=i,this.courseModel=r,this.UserModel=s,this.context=o,this.contentService=a,this.ultraState=l,this.entitlementService=c,this.discussionPermission=d,this.contextUser=u,this.courseMembership=p,this.contextCourse=m,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",(e,t)=>{this.hardLinkContent&&(this.hardLinkContent.applyGroupSettings(t),this.softLinkContent&&this.softLinkContent.id&&this.softLinkContent.applyGroupSettings(this.hardLinkContent))})}}k=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([E(0,(0,v.tB)(a.serviceName)),E(1,(0,v.tB)("$rootScope")),E(2,(0,v.tB)("$q")),E(3,(0,v.tB)("$modal")),E(4,(0,v.tB)(o.N7.H)),E(5,(0,v.tB)(o.EA.HV)),E(6,(0,v.tB)(u.HV)),E(7,(0,v.tB)(d.HV)),E(8,(0,v.tB)(g.HV)),E(9,(0,v.tB)(f.HV)),E(10,(0,v.tB)(b.HV)),E(11,(0,v.tB)(h.HV)),E(12,(0,v.tB)(m.HV)),E(13,(0,v.tB)(p.HV))],k),r.module(I,[o.e1,a.moduleName,u.e1,d.e1,g.e1,f.e1,b.e1,o.e1]).service(w,k)},219809:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},Pw:function(){return r},e1:function(){return c},ns:function(){return u}});var i,r,s=n(276635),o=n(464027),a=n(676954),l=n(625506);let c="ultra.services.dragDrop",d="dragDropService";(i=r||(r={})).Top="TOP",i.Bottom="BOTTOM",i.Folder="FOLDER",i.Self="SELF";class u{createDropPlaceholderElement(e){this.dropPlaceholderElement=l('<div class="dragdropplaceholder js-no-file-drop" style="height: '+e.height()+"px; width: "+e.width()+'px"></div>')}setDropTarget(e){this.lastDropTargetId=this.currentDropTargetId,this.currentDropTargetId=e}clearDropTarget(){this.setDropTarget(void 0)}isCurrentDropTarget(e){return this.currentDropTargetId===e}isNotSameDropTarget(){return this.currentDropTargetId!==this.lastDropTargetId}scrollDragDropItemsContainer(e,t){let n=this._getScrollingContainerElement();if(n){let i=e<u.SCROLLING_CONSTANTS.scrollZoneHeight,r=e>n.height()-u.SCROLLING_CONSTANTS.scrollZoneHeight,s=n.scrollTop();i?n.scrollTop(s-t):r&&n.scrollTop(s+t)}}_getScrollingContainerElement(){let e=u.SCROLL_CONTAINERS_SELECTORS.map(e=>this.originalElement.closest(e));return s.find(e,e=>this._elementHasScrollbar(e))}_elementHasScrollbar(e){return e.get(0).scrollHeight>e.innerHeight()}constructor(e,t){this.$timeout=e,this.bbLocalize=t,this.dragHoverClass="dz-drag-hover",this.dragElementSelector=".drag-element",this.onFolderClass="on-folder",this.onNestedFolderClass="on-nested-folder",this.originalElementClass="drag-element-original",this.movableElementClass="drag-element-movable",this.queuedScreenReaderMessages="",this.bbLocalize.loadBundle("components/services/drag-drop").then(()=>{this.folderDepthMessageKey="components.services.drag-drop.folderDepthMessage"})}}u.SCROLLING_CONSTANTS={scrollZoneHeight:200,mouseInteractionDistanceToScroll:30,keyboardInteractionDistanceToScroll:200},u.SCROLL_CONTAINERS_SELECTORS=[".panel-wrap",".panel-content"],u.$inject=["$timeout",a.serviceName],o.module(c,[a.moduleName]).service(d,u)},593415:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return l}});var i,r=n(825986),s=n(302032),o=n(625506);let a="menuCloserService",l="ultra.services.menuCloser";class c{closeAnyOpenAngularMenus(){this.service.closeAnyOpenAngularMenus()}constructor(e){this.service=e,this.key=r.fz.AngularMenuCloserService}}class d{closeAnyOpenAngularMenus(){let e=o(".f-open-dropdown");e.length>0&&window.Foundation.libs.dropdown.close(e),this.$rootScope.$broadcast("foundation-offcanvas-close-panel")}constructor(e){this.$rootScope=e,(0,r.gM)(new c(this))}}d=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,s.tB)("$rootScope"),function(e,t){i(e,t,0)})],d),angular.module(l,[]).service(a,d)},402184:function(e,t,n){"use strict";n.d(t,{H:function(){return c},e:function(){return l}});var i=n(464027),r=n(553374),s=n(495794),o=n(385847),a=n(625506);let l="ultra.services.dropdownInit",c="dropdownInitService";i.module(l,[r.e]).factory(c,[r.H,e=>{let t=(e,t)=>{t.focus()};return(n,i)=>{n.find("[data-dropdown]").each((n,r)=>{let l=a(r),c=a("#"+l.attr("data-dropdown"));if(!c.length)return;l.attr("aria-haspopup","true"),c.attr("role")||(c.attr("role","menu"),c.find("li a").each(function(){a(this).attr("role")||a(this).attr("role","menuitem")})),c.off("keydown.fndtn.dropdown"),c.on("keydown.fndtn.dropdown",e=>{if(c.hasClass("open")){let n,i=!0,r=c.find("li a:focus").closest("li");if(0===r.length&&(r=c.find(":focus"),i=!1),(e.keyCode!==o.hY||c.hasClass("bb-foundation-dropdown-close-esc-override"))&&(e.keyCode!==o.Mf||c.hasClass("bb-foundation-dropdown-tab-override"))){if(e.keyCode===o.WV||e.keyCode===o.UP||e.keyCode===o.Mf)return i?(e.keyCode!==o.WV&&(e.keyCode!==o.Mf||e.shiftKey)?e.keyCode!==o.UP&&(e.keyCode!==o.Mf||!e.shiftKey)||(n=r.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==n.length||(n=c.find(":tabbable").closest("li").not(".scroll-control").last()):(n=r.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==n.length||(n=c.find(":tabbable").closest("li").not(".scroll-control").first()),n.length>0&&n.find(":tabbable").focus()):e.keyCode!==o.WV&&(e.keyCode!==o.Mf||e.shiftKey)?(e.keyCode===o.UP||e.keyCode===o.Mf&&e.shiftKey)&&s.gW(c,r):s.Bv(c,r),!1}else l.click(),e.keyCode===o.hY&&(t(c,l),e.stopPropagation())}});let d=!0;c.off("keyup.fndtn.dropdown"),c.on("keyup.fndtn.dropdown",e=>{if((e.keyCode===o.K5||e.keyCode===o.L_)&&!c.hasClass("bb-foundation-dropdown-enter-override")){if(!d)return d=!0,!1;if(a(e.target).closest("input[type=checkbox]").length||a(e.target).closest("button").length||"-1"===a(e.target).attr("tabindex"))return!0;if(c.hasClass("open")){let e=c.find("li a:focus").closest("li");return e.length>0?e.find("a").click():l.click(),t(c,l),!1}}}),l.off("keydown.fndtn.dropdown"),l.on("keydown.fndtn.dropdown",e=>{if((e.keyCode===o.K5||e.keyCode===o.L_)&&!c.hasClass("open")){l.click(),d=!1;let e=c.find("li a:focus").closest("li");return 0===e.length&&(e=c.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),e.find("a:visible").length?e.find("a:visible").focus():c.find(":tabbable").first().focus(),!1}}),l.off("click.fndtn.dropdown"),l.on("click.fndtn.dropdown",t=>{let n=c.find("li a:focus").closest("li");0===n.length&&(n=c.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));let r=e(()=>{"false"===c.attr("aria-hidden")&&(n.find("a:visible").length?n.find("a:visible").focus():c.find("*:focus").length||c.find(":tabbable").first().focus(),e.cancel(r))},i,50,100,!1)})})}}])},246233:function(e,t,n){"use strict";n.d(t,{HV:function(){return o},cy:function(){return a},e1:function(){return s}});var i=n(464027),r=n(555840);let s="ultra.service.entitlementCache",o="entitlementCache",a="SYSTEM_ENTITLEMENTS";class l{fetchSystemEntitlements(){return this.EntitlementModel.$collection().$fetch().$asPromise()}fetchCourseEntitlements(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()}loadCourseEntitlements(e){if(!e||this.hasCachedCourseEntitlements(e))return this.$q.resolve();let t=this.$q.defer();return!this.entitlementDefers.has(e)&&(this.entitlementDefers.set(e,new Set),(e===a?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then(t=>{let n=t.filter(e=>e.hasEntitlement()).map(e=>e.uid);this.entitlements.set(e,new Set(n)),this.entitlementDefers.get(e).forEach(e=>e.resolve())},t=>this.entitlementDefers.get(e).forEach(e=>e.reject(t))).finally(()=>this.entitlementDefers.delete(e))),this.entitlementDefers.get(e).add(t),t.promise}getCachedCourseEntitlements(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set}hasCachedCourseEntitlements(e){return this.entitlements.has(e)}clearEntitlementCache(e){this.entitlements.delete(e)}constructor(e,t,n){this.$q=e,this.CourseModel=t,this.EntitlementModel=n,this.entitlements=new Map,this.entitlementDefers=new Map}}l.$inject=["$q",r.N7.H,r.lR.H],i.module(s,[r.e1]).service(o,l)},411832:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),r=n(658895),s=n(246233),o=n(860995),a=n(825986),l=n(789423),c=n(872491);let d="ultra.service.entitlement",u="entitlement";class p{hasSystemEntitlement(e){return(0,l.h)(this.service.hasSystemEntitlement(e))}constructor(e){this.service=e,this.key=a.fz.Entitlement}}class m{isEntitled(e,t=this.currentCourse.courseId){if(!t)return r.default.production||console.error(Error("There is no course in context. Check the configuration.")),!1;if(!r.default.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw Error(`Cached entitlements should exist for course with ID, ${t}, but none were found.
        Make sure the entitlement resolver is configured for this route,
        or use async hasCourseEntitlement methods that guarantee the cache initializes.`);return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())}areAllEntitled(e,t=this.currentCourse.courseId){return e.every(e=>this.isEntitled(e,t))}areAnyEntitled(e,t=this.currentCourse.courseId){return e.some(e=>this.isEntitled(e,t))}hasCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.isEntitled(e,t))}hasAllCourseEntitlements(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAllEntitled(e,t))}hasAnyCourseEntitlement(e,t=this.currentCourse.courseId){return this.entitlementCache.loadCourseEntitlements(t).then(()=>this.areAnyEntitled(e,t))}hasSystemEntitlement(e){return this.entitlementCache.loadCourseEntitlements(s.cy).then(()=>this.isEntitled(e,s.cy))}hasAnySystemEntitlements(e){return this.entitlementCache.loadCourseEntitlements(s.cy).then(()=>this.areAnyEntitled(e,s.cy))}constructor(e,t){this.entitlementCache=e,this.currentCourse=t,this.isUserEntitledToRetrieveCourseProgressConfiguration=e=>this.isEntitled(c.NT.ViewConfiguration)||e,(0,a.gM)(new p(this))}}m.$inject=[s.HV,o.HV],i.module(d,[s.e1,o.e1]).service(u,m)},618758:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),r=n(658895),s=n(852127),o=n(473011),a=n(259197);let l="ultra.service.errorHandler",c="errorHandler",d=e=>()=>{let t;let n=e.connect(e=>({}),a.Nwg.app)((e,n)=>{t=n});try{t&&t.clearError&&t.clearError()}finally{n()}},u=(e,t,n,i,s)=>a=>{if(a&&a.$response){if(401===a.$response.status){let n=e.get("$location").url(),i=n?"/?new_loc="+encodeURIComponent(r.default.basePath+n):"/";t.location.href=o.uI(i)}else 403===a.$response.status?s.handleApiError(a.$response,()=>{n.$broadcast("no-permission-course"),d(i)()}):-2===a.$response.status?"undefined"!=typeof NREUM&&NREUM.noticeError(a.$response.data):s.handleApiError(a.$response,d(i))}},p=e=>t=>{let n;return e.subscribe(()=>{let i=a.Ys.app.getAppError(e.getState());i&&n!==i&&t({$response:{status:"api"===i.type?i.status:-2,data:i.originalException}}),n=i})};i.module(l,[]).factory(c,["$injector",e=>{let t=t=>e.invoke(["$injector","$window","$rootScope","$ngRedux",s.HV,u])(t);return{handle:t,subscribe:()=>e.invoke(["$ngRedux",e=>p(e)(t)])}}])},852127:function(e,t,n){"use strict";n.d(t,{B6:function(){return E},e1:function(){return L},HV:function(){return N}});var i=n(276635),r=n(464027),s=n(202784),o=n.n(s),a=n(658895),l=n(676954),c=n(65783),d=n(986709),u=n(410628),p=n(217347),m=n(238145),h=n.n(m),g=n(847969),f=n(42196);let b=e=>{let{sessionDebug:t}=e,n=(0,u.q)(),[i,r]=o().useState(!1);return i?o().createElement(o().Fragment,null,o().createElement(h(),null,n("supportPanel.sessionDebug.submissionButtonLabel"),o().createElement(g.AnalyticsTooltip,{analyticsId:"errorModal.sessionDebug.information.tooltip",title:n("supportPanel.sessionDebug.modalInformationText"),PopperProps:{style:{zIndex:1000100}}},o().createElement(g.AnalyticsIconButton,{analyticsId:"errorModal.sessionDebug.information.tooltip"},o().createElement(f.d,null)))),o().createElement(p.I,{sessionDebug:t})):o().createElement(g.AnalyticsLink,{tabIndex:0,analyticsId:"erroModal.sessionDebug.showInput.link",onClick:()=>r(!0)},n("supportPanel.sessionDebug.submissionButtonLabel"))};var v=n(984654),y=n(483708);let S="ultra.components.directives.sessionDebugModalButton";r.module(S,[l.moduleName]).component("bbSessionDebugModalButton",(0,v.G5)({Class:e=>{let[t,n]=s.useState("");return s.useEffect(()=>{y.ZP.getDebugInfoFriendly().then(e=>n(e.join("\r\n")))},[]),s.createElement(b,{sessionDebug:t})},renderLocalized:!0,withProvider:!0,withErrorModalBoundary:!1}));var C=n(207274),E=n(2491),I=n(768188),w=n(411886),A=n(956065),k=n(445178),T=n(919191),P=n(980311),D=n(511403),x=n(491146),R=n(677993);let L="ultra.components.services.errorModal",N="errorModal";class ${onErrorResponse(e){this.handlers.push(e)}handleApiError(e,t){var n,r,s,o,a,l;if(!e||null==e.status||this.$window.document.getElementsByClassName("ms-Panel").length)return;let c={response:e,errorHandler:t};if(e.status===d.oji.Forbidden)(null===(n=e.data)||void 0===n?void 0:n.message)==="Question could not be created with existing attempt(s)"?c.template=C:c.template=E;else if(e.status===d.oji.NotFound)i.includes(null===(r=e.data)||void 0===r?void 0:r.message,"No course content found for content id")?c.template=I:c.template=w;else if(e.status===d.oji.Conflict)c.template=A;else if(507===e.status)c.template=k;else if(e.status>=400&&e.status<=599){if(e.status===d.oji.BadRequest&&(null===(s=e.data)||void 0===s?void 0:s.code)===$.COURSE_IS_CLOSED_CODE)c.template=T;else if(e.status===d.oji.BadRequest&&(i.includes(null===(o=e.data)||void 0===o?void 0:o.message,"The input was too large")||(null===(a=e.data)||void 0===a?void 0:a.code)===d.WYQ))c.template=x;else if((null===(l=e.data)||void 0===l?void 0:l.code)===d.bSh)c.template=P;else{let t;this.handlers.some(n=>(t=this.$injector.invoke(n,void 0,{response:e}))&&void 0!==t.tpl),c.template=t&&t.tpl||D,c.scope=t&&t.scope}}c.template&&this.openModal(c)}showDefaultErrorModal(){this.openModal({template:w})}handleError(e,t){e&&this.openModal({errorString:e,template:R,errorHandler:t})}getReactErrorBoundary(){return this.reactErrorBoundary}openModal(e){if(this.isModalClosed){if(!e||!e.template)throw Error("Modal configuration template was not supplied");let t=e.scope||this.$rootScope;a.default.errorDetails&&((t=this.$rootScope.$new()).response=e.response),t.errorString=e.errorString;let n={template:e.template,scope:t,resolve:{translations:[l.serviceName,e=>e.loadBundle("components/services/error-modal")]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(n),this.modalInstance.result.then(()=>{},()=>{this.isModalClosed=!0,e.errorHandler&&e.errorHandler()})}}constructor(){this.isModalClosed=!0,this.handlers=[],this.$get=[c.HV,"$rootScope","$q","$window","$injector",function(e,t,n,i,r){return this.$modal=e,this.$rootScope=t,this.$q=n,this.$injector=r,this.$window=i,window.addEventListener("show-debug-error-modal",()=>{this.showDefaultErrorModal()}),this}]}}$.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed",r.module(L,[l.moduleName,c.e1,S]).provider(N,$)},578953:function(e,t,n){"use strict";n.d(t,{e:function(){return s}});var i=n(464027),r=n(601983);let s="ultra.services.errorHandler",o=["$delegate","$injector",(e,t)=>{let n;return Object.assign(function(i,s){e(i,s),n||(n=t.get(r.HV)),"undefined"!=typeof NREUM&&NREUM.noticeError(i)},e)}];i.module(s,[r.e1]).config(["$provide",e=>{e.decorator("$exceptionHandler",o)}])},729913:function(e,t,n){"use strict";n.d(t,{HV:function(){return r},e1:function(){return i}});let i="external.script.loader",r="externalScriptLoader";class s{_createScriptElement(){return document.createElement("script")}_appendScriptElement(e){document.head.appendChild(e)}_getWindowProperty(e){return window[e]}getScript(e,t={}){if(this.scripts[e])return this.scripts[e];let n=this.$q.defer();try{this.scripts[e]=n.promise;let i=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),r=this._createScriptElement();if(r.type="text/javascript",r.src=e+i,t.attributes)for(let e of Object.keys(t.attributes))r.setAttribute(e,t.attributes[e]);let s=this;r.onload=function(){t.exports?n.resolve(s._getWindowProperty(t.exports)):n.resolve()},r.onerror=function(){n.reject(Error(`error loading script: ${e}`))},this._appendScriptElement(r)}catch(e){n.reject(e)}return n.promise}constructor(e){this.$q=e,this.scripts={}}}s.$inject=["$q"],angular.module(i,[]).service(r,s)},363411:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},HV:function(){return l}});var i=n(302032),r=n(259197);class s{wait(){if(!this.defered){let e=this.service.isFeatureEnabledStrict(this.flagKey);if(void 0!==e)return this.$q.resolve(e);this.deregister=this.scope.$on("feature-flag-values-updated",this.featureFlagsUpdated.bind(this)),this.service.loadFeatureFlagValue(this.flagKey),this.defered=this.$q.defer()}return this.defered.promise}featureFlagsUpdated(){let e=this.service.isFeatureEnabledStrict(this.flagKey);if(void 0!==e){var t,n;null===(t=this.deregister)||void 0===t||t.call(this),this.deregister=void 0,null===(n=this.defered)||void 0===n||n.resolve(e)}}constructor(e,t,n,i){this.flagKey=e,this.scope=i,this.$q=n,this.service=t}}function o(e,t){return function(n,i){t(n,i,e)}}let a="ultra.service.feature.flags",l="featureFlags";class c{subscribeToRedux(){let e=this.$ngRedux.connect(e=>({flagValues:r.Ys.featureFlags.getFeatureFlagValues(e)}),e=>({loadFeatureFlagValueByKey:t=>e(r.Nwg.featureFlags.loadFeatureFlagValueByKey({flagKey:t}))}))(this);this.$rootScope.$on("$destroy",e)}loadFeatureFlagValue(e){return this.loadFeatureFlagValueByKey(e)}isFeatureEnabled(e){var t;return(null===(t=this.flagValues)||void 0===t?void 0:t[e])?this.isFlagValueTrue(this.flagValues[e].flagValue):(this.loadFeatureFlagValue(e),!1)}isFeatureEnabledStrict(e){var t;if(null===(t=this.flagValues)||void 0===t?void 0:t[e])return this.isFlagValueTrueStrict(this.flagValues[e]);this.loadFeatureFlagValue(e)}isFlagValueTrue(e){return"true"===e}isFlagValueTrueStrict(e){if(e&&(void 0!==e.flagValue||!e.isLoading))return this.isFlagValueTrue(e.flagValue)}createWaiter(e){return new s(e,this,this.$q,this.$rootScope).wait()}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux();let i=e.$watch(()=>this.flagValues,e=>this.$rootScope.$broadcast("feature-flag-values-updated",e));this.$rootScope.$on("$destroy",()=>i())}}c=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([o(0,(0,i.tB)("$rootScope")),o(1,(0,i.tB)("$q")),o(2,(0,i.tB)("$ngRedux"))],c),angular.module(a,[]).service(l,c)},603094:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),r=n(259197),s=n(302032),o=n(118717);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.service.upload.settings",c="uploadSettings";class d{fetchFileUploadSettings(){return this.$q.when(this.getFileUploadSettings())}subscribeToRedux(){this.$ngRedux.connect(e=>({fileUploadSettings:r.Ys.fileUploadSettings.getFileUploadSettings(e)}),e=>(0,o.DE)({getFileUploadSettings:r.Nwg.fileUploadSettings.loadFileUploadSettings},e))(this)}getSettings(){return this.fileUploadSettings}constructor(e,t){this.$q=e,this.$ngRedux=t,this.subscribeToRedux()}}d=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,s.tB)("$q")),a(1,(0,s.tB)("$ngRedux"))],d),i.module(l,[]).service(c,d)},196636:function(e,t,n){"use strict";n.d(t,{e1:function(){return o},iK:function(){return l},xQ:function(){return a}});var i,r,s=n(676954);let o="fileUtility",a="FileUtilFactory";(i=r||(r={})).bytes="components.directives.fileUpload.bytes",i.GB="components.directives.fileUpload.GB",i.KB="components.directives.fileUpload.KB",i.MB="components.directives.fileUpload.MB";class l{getLocalizedSize(e,t,n=1){let i=this.calculateSize(e),r=this.bbLocalize.translateSync({locale:t,key:i.sizeLabel}),s=this.bbLocalize.translateSync({locale:t,key:"global.localizedNumber",params:{number:"components.directives.fileUpload.bytes"===i.sizeLabel?i.size:parseFloat(i.size.toFixed(n))},noWrap:!0});return this.bbLocalize.translateSync({locale:t,key:"components.directives.fileUpload.sizeOutput",params:{size:s,label:r},noWrap:!0,noEscape:!0})}constructor(e,t){this.bbLocalize=e,this.$q=t,this.calculateSize=e=>{let t="components.directives.fileUpload.bytes";return e>1e3&&(t="components.directives.fileUpload.KB",(e/=1e3)>1e3&&(t="components.directives.fileUpload.MB",(e/=1e3)>1e3&&(e/=1e3,t="components.directives.fileUpload.GB"))),{size:e,sizeLabel:t}}}}l.$inject=[s.serviceName,"$q"],angular.module(o,[s.moduleName]).factory(a,["$injector",e=>function(){return e.instantiate(l)}])},224888:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(464027),r=n(193905),s=n(259197),o=n(88818),a=n(625506);let l="ultra.components.services.fileViewer",c="fileViewer",d="audio",u="image",p="video";class m{constructor(e){this.$sce=e,this.canFileBeRenderedInline=e=>{if(!e)return!1;let t=this.getMediaSubType(e),n=this.getMediaType(e);switch(n){case u:return["jpeg","gif","png"].indexOf(t)>-1;case d:case p:{let t=document.createElement(n);return t.canPlayType&&!!t.canPlayType(e)}}return(0,o.ZOk)(e)},this.getMediaSubType=e=>{var t;return null!==(t=null==e?void 0:e.substring(e.indexOf("/")+1))&&void 0!==t?t:null},this.getMediaType=e=>{var t;return null!==(t=null==e?void 0:e.substring(0,e.indexOf("/")))&&void 0!==t?t:null},this.isMediaFile=e=>a.inArray(e,[u,p,d])>=0,this.shouldRenderInlineByDefault=e=>{let t=!1,n=this.getMediaType(e.currentMimeType);return n?t=this.isMediaFile(n):(0,o.ZOk)(e.currentMimeType)&&(t=!0),t},this.isAudioFile=e=>e===d,this.isImageFile=e=>e===u,this.isVideoFile=e=>e===p,this.initUiField=e=>{null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=this.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=(0,s.RMg)(e.currentMimeType);let{currentMimeType:t}=e;e.ui.mediaType=this.getMediaType(t),e.ui.mediaSubtype=this.getMediaSubType(t),e.ui.canBeRenderedInline=this.canFileBeRenderedInline(t),e.ui.safeAltText=e.alternativeText?r.Z.HTML(e.alternativeText):""}}}m.$inject=["$sce"],i.module(l,[]).service(c,m)},282310:function(e,t,n){"use strict";let i;n.d(t,{U1:function(){return C},e1:function(){return y},HV:function(){return S}});var r,s=n(464027),o=n(786430),a=n(362767),l=n(860995),c=n(480489),d=n(302032),u=n(658895),p=n(640359);let m=u.default.features.devtools_disableFtue?-1:2,h="ftue.",g=".visited",f="hide",b="show";class v{shouldShow(e,t,n){return u.default.disableAllFtueGuidance?this.$q.when(!1):n?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then(t=>{let n=t[0],i=t[1],r=t[2];return i&&n!==i?this.$q.when(!1):this.shouldShowImpl(e,r)})}shouldShowImpl(e,t){if(t>m)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));let n=++t<=m;return sessionStorage.setItem(this.getSessionStorageKey(e),n?b:f),this.setSessionNumber(e,t).then(()=>n),this.$q.when(n)}hide(e,t){sessionStorage.setItem(this.getSessionStorageKey(e),f),t&&this.getSessionNumber(e).then(t=>{this.setSessionNumber(e,++t)})}getSessionNumber(e){return this.context.getPreference(h+e+g,"0").then(e=>{let t=parseInt(e.value,10);return Number.isNaN(t)?0:t})}isLastSessionCurrent(e){let t=sessionStorage.getItem(this.getSessionStorageKey(e));return t===b||t===f}isShownInCurrentSession(e){return sessionStorage.getItem(this.getSessionStorageKey(e))!==f}setSessionNumber(e,t){return this.context.setPreference(h+e+g,t.toString())}getSessionStorageKey(e){return h+e+".show."+p.u(this.context.sessionId)}constructor(e,t,n,i){this.$q=e,this.context=t,this.offCanvas=n,this.contextCourse=i}}let y="ultra.service.firstTimeHelper",S="firstTimeHelper",C=/[_-]/g,E=Symbol("default");class I{shouldShow(e,t,n){return this.convertAngularPromise((i.get(e)||i.get(E)).shouldShow(e,t,n))}hasBeenShown(e){return(i.get(e)||i.get(E)).getSessionNumber(e).then(e=>e>0)}hide(e,t){(i.get(e)||i.get(E)).hide(e,t)}hasMultiTargetSupport(e){return!!e&&0===e.toLowerCase().indexOf("predict.")}convertAngularPromise(e){return new Promise((t,n)=>{e.then(t).catch(n)})}constructor(e){this.timeout=e,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}}I=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(r=(0,d.tB)(c.H),function(e,t){r(e,t,0)})],I),s.module(y,[a.e1,l.e1,o.e1]).run(["$q",a.HV,l.HV,o.HV,(e,t,n,r)=>{let s=new v(e,t,r,n);i=new Map().set(E,s)}]).service(S,I)},276326:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),r=n(555840),s=n(302032),o=n(259197),a=n(118717);function l(e,t){return function(n,i){t(n,i,e)}}let c="ultra.service.gradable-item-user-option",d="gradableItemUserOptionService";class u{subscribeToRedux(){let e=this.$ngRedux.connect(null,e=>(0,a.DE)({persistGradableItemUserOptionByMembershipId:o.Nwg.gradableItemUserOption.persistGradableItemUserOptionByMembershipId,deleteGradableItemUserOptionByMembershipId:o.Nwg.gradableItemUserOption.deleteGradableItemUserOptionByMembershipId,persistGradableItemUserOptionByGroupId:o.Nwg.gradableItemUserOption.persistGradableItemUserOptionByGroupId,deleteGradableItemUserOptionByGroupId:o.Nwg.gradableItemUserOption.deleteGradableItemUserOptionByGroupId,fetchGradableItemUserOption:o.Nwg.gradableItemUserOption.fetchGradableItemUserOption,fetchGradableItemUserOptionCount:o.Nwg.gradableItemUserOption.fetchGradableItemUserOptionCount,fetchGradableItemUserOptionExceptions:o.Nwg.gradableItemUserOption.fetchGradableItemUserOptionExceptions},e))(this);this.$rootScope.$on("$destroy",e)}updateGradableItemUserOptionByMembershipId(e,t){return this.$q.when(this.persistGradableItemUserOptionByMembershipId(e,t)).then(e=>e.item)}removeGradableItemUserOptionByMembershipId(e){return this.$q.when(this.deleteGradableItemUserOptionByMembershipId(e))}updateGradableItemUserOptionByGroupId(e,t){return this.$q.when(this.persistGradableItemUserOptionByGroupId(e,t)).then(e=>e.item)}removeGradableItemUserOptionByGroupId(e){return this.$q.when(this.deleteGradableItemUserOptionByGroupId(e))}getGradableItemUserOption(e){let{courseId:t,columnId:n,membershipIds:i,groupIds:r}=e,s={};return i&&(s.membershipIds=i),r&&(s.groupIds=r),this.$q.resolve(this.fetchGradableItemUserOption({courseId:t,columnId:n},s))}getGradableItemUserOptionExceptions(e,t,n,i){return this.$q.resolve(this.fetchGradableItemUserOptionExceptions({courseId:e,membershipId:t},{columnId:n,isExcludedFromCourseUserActivity:i}))}getGradableItemUserOptionCount(e,t){return this.$q.resolve(this.fetchGradableItemUserOptionCount({courseId:e,columnId:t},{}))}getGradableItemUserOptionByMembershipId(e,t){return o.Ys.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,t)}getGradableItemUserOptionByGroupId(e,t){return o.Ys.gradableItemUserOption.getGradableItemUserOptionByColumnAndGroupId(this.$ngRedux.getState(),e,t)}getGradableItemUserOptionByGroupOrMembershipId(e){let{columnId:t,groupId:n,membershipId:i}=e;if(!t)throw Error("You must provide column ID");if(n)return this.getGradableItemUserOptionByGroupId(t,n);if(i)return this.getGradableItemUserOptionByMembershipId(t,i);throw Error("You must provide either group ID or membership ID")}getGradableItemUserOptionByUserId(e,t,n){var i;let r=null===(i=o.Ys.courseMembership.getCourseMembershipsByUserIds(this.$ngRedux.getState(),t,[n])[0])||void 0===i?void 0:i.id;return o.Ys.gradableItemUserOption.getGradableItemUserOptionByColumnAndMembershipId(this.$ngRedux.getState(),e,r)}constructor(e,t,n){this.$rootScope=e,this.$q=t,this.$ngRedux=n,this.subscribeToRedux()}}u=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([l(0,(0,s.tB)("$rootScope")),l(1,(0,s.tB)("$q")),l(2,(0,s.tB)("$ngRedux"))],u),i.module(c,[r.e1]).service(d,u)},699868:function(e,t,n){"use strict";n.d(t,{HV:function(){return p},e1:function(){return u},q6:function(){return m}});var i=n(276635),r=n(464027),s=n(555840),o=n(302032),a=n(411832),l=n(83991),c=n(986709);function d(e,t){return function(n,i){t(n,i,e)}}let u="ultra.components.services.gradebookColumnCategory.Service",p="gradeColumnCategoryService";class m{getIconByGradebookCategory(e,t){let n=null;return null==e||((!1===t||e===c.bu3.Attendance)&&e in m.ICON_NAME_BY_CATEGORY_TITLE&&(n=m.ICON_NAME_BY_CATEGORY_TITLE[e]),n||(n=m.DEFAULT_ICON_FOR_CATEGORY)),n}getCategoryIcon(e){let t=m.DEFAULT_ICON_FOR_CATEGORY;return e&&e.title&&(t=this.getIconByGradebookCategory(e.title,e.isUserDefined)),t}loadGradeCategories(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()}getOrLoadCategoriesForCourse(e,t){return this.userCanViewGradebookCategories(e).then(n=>(t||!this.categoriesByCourse[e])&&n?this.loadGradeCategories(e).then(t=>(this.reorderCategories(t,0),this.categoriesByCourse[e]=t,t)):this.categoriesByCourse[e])}userCanViewGradebookCategories(e){return this.entitlementService.hasAnyCourseEntitlement([l.SE.ViewGradebookMetaData,l.SE.ViewUserGrades],e)}getFilteredCategoriesForCourse(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then(e=>i.filter(e,t))}updateCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){let n=this.categoriesByCourse[e],r=i.findIndex(n,e=>e.id===t.id);-1===r?n.splice(0,0,t):n.splice(r,1,t)}}deleteCategoriesForCourse(e,t){if(this.categoriesByCourse[e]){let n=this.categoriesByCourse[e],r=i.findIndex(n,e=>e.id===t.id);r>-1&&n.splice(r,1)}}reorderCategories(e,t){let n=e.length;for(let i=t;i<n;++i){let t=e[i];t.isUserDefined&&(e.splice(i,1),e.unshift(t))}}constructor(e,t,n,i){this.$q=e,this.$rootScope=t,this.entitlementService=n,this.CourseModel=i,this.categoriesByCourse={}}}m.DEFAULT_ICON_FOR_CATEGORY="custom-item",m.ICON_NAME_BY_CATEGORY_TITLE=Object.freeze({[c.bu3.Assignment]:"assignment",[c.bu3.Attendance]:"attendance",[c.bu3.Blog]:"blog",[c.bu3.Discussion]:"discussion",[c.bu3.Exam]:"exam",[c.bu3.Homework]:"homework",[c.bu3.Journal]:"journal",[c.bu3.Presentation]:"presentation",[c.bu3.Quiz]:"quiz",[c.bu3.Survey]:"survey",[c.bu3.Test]:"test"}),m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([d(0,(0,o.tB)("$q")),d(1,(0,o.tB)("$rootScope")),d(2,(0,o.tB)(a.HV)),d(3,(0,o.tB)(s.N7.H))],m),r.module(u,[a.e1]).service(p,m)},609222:function(e,t,n){"use strict";n.d(t,{FN:function(){return a},Ks:function(){return s},Pp:function(){return c},Z7:function(){return o},gZ:function(){return l}});let i="assessment:reload-on-attempt-feedback-save",r="single-attempt-grading-list:reload-on-feedback-save",s="grade-comment-update";function o(e,t,n){return e.$broadcast(i,t,n)}function a(e,t){return e.$on(i,t)}function l(e,t){return e.$broadcast(r,t)}function c(e,t){return e.$on(r,t)}},371515:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var i=n(742854),r=n(649955),s=n(986709);class o{init(e,t){this.column=e;let n=e=>{this.schema=e,this.scaleType=null==e?void 0:e.scaleType};return t?this.$q.when(n(t)):this.schemaService.loadGradeSchema(e).then(e=>{n(e)})}shouldShowTotalPoints(){var e,t;return(null!=this._displayValue||(null===(e=this.schema)||void 0===e?void 0:e.scaleType)===s.aQo.Score)&&(null===(t=this.schema)||void 0===t?void 0:t.scaleType)===s.aQo.Score&&!this.isDisplayValueTooLargeForTotalPoints()}isDisplayValueTooLargeForTotalPoints(){return this._displayValue&&this._displayValue.toString().length>r.t6.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL+r.t6.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL+2}set displayGrade(e){if(e){var t,n;if(this.displayValue=this.grade.getGradeToDisplay(e,this.scope,null===(t=this.schema)||void 0===t?void 0:t.scaleType),this._nonFormattedScore=e.score,this._perfCode=e.perfCode,this._perfCode){this.perfCodeDesc=this._perfCode.description,this._parsedValue=this.grade.getGradeToDisplay({perfCode:this._perfCode},this.scope,s.aQo.Score);return}switch(this.perfCodeDesc="",null===(n=this.schema)||void 0===n?void 0:n.scaleType){case s.aQo.Tabular:{let e=null;if(this.column.externalGrade&&this.gradeDetail&&this.gradeDetail.isOverrideGrade()){let t=this.gradeDetail.pointsPossible||this.column.possible||100;e={score:this._nonFormattedScore&&this._nonFormattedScore*t/100}}else e={score:this._nonFormattedScore};this._parsedValue=this.grade.getGradeToDisplay(e,this.scope,s.aQo.Score);break}case s.aQo.Percent:{let e=null;e=this.column.externalGrade?{score:this._nonFormattedScore}:{score:this._nonFormattedScore&&this._nonFormattedScore/100*this.column.possible},this._parsedValue=this.grade.getGradeToDisplay(e,this.scope,s.aQo.Score);break}case s.aQo.Score:this._parsedValue=this.displayValue;break;case s.aQo.Complete:this._parsedValue=this.grade.getGradeToDisplay({...e,grade:null},this.scope,this.schema.scaleType);break;case s.aQo.Text:this._parsedValue=e.grade}}}get displayValue(){return this._displayValue}set displayValue(e){this.wasValueErased=this.grade.wasGradeCleared(this.displayValue,e),this._displayValue=e}get parsedValue(){return this._parsedValue}set parsedValue(e){this._parsedValue=e}get gradeDetail(){return this._gradeDetail}set gradeDetail(e){this._gradeDetail=e}hasPerfCode(){return!!this._perfCode}getGradeColor(){var e,t,n;return(null===(t=this.gradeDetail)||void 0===t?void 0:null===(e=t.displayGrade)||void 0===e?void 0:e.isOverride)&&this.column.externalGrade||this.scaleType===s.aQo.Text||(null===(n=this.gradeDetail)||void 0===n?void 0:n.isExempt)?"gray":this.displayValue?this.scaleType!==s.aQo.Percent?this.getGradeColorScoreSchema():this.grade.getPercentileColor(this._nonFormattedScore):void 0}getGradeColorScoreSchema(){let e=this.gradeDetail?this.gradeDetail.pointsPossible:this.column.possible;if(e>0){let t=this._nonFormattedScore/e*100;return this.grade.getPercentileColor(t)}return"na"}constructor(e,t,n,i,r){this.grade=e,this.$q=t,this._gradeDetail=n,this.scope=i,this.schemaService=r,this.wasValueErased=!1}}o.$inject=[r.HV,"$q","gradeDetail","scope",i.HV]},507009:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(276635),r=n(464027),s=n(728042),o=n(555840);let a="ultra.components.services.grade.gradeNotation.Service",l="gradeNotationService";class c{getGradeNotationsMap(e,t){if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);let n=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then(t=>{this.courseGradeNotationMap[e]=t,n.resolve(t)}),n.promise}isValidPerformanceCodeGrade(e,t){return!(!t||i.isEmpty(e))&&!!i.find(e,e=>e.code===t)}constructor(e,t,n){this.$q=e,this.$rootScope=t,this.CourseModel=n,this.courseGradeNotationMap={},s.Z.OnRootScope(t,"grade-notation-update",(e,t)=>{this.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then(e=>{this.courseGradeNotationMap[t]=e,this.$rootScope.$broadcast("grade-notation-cache-update",t)})})}}c.$inject=["$q","$rootScope",o.N7.H],r.module(a,[]).service(l,c)},742854:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(276635),r=n(464027),s=n(676954),o=n(78029),a=n(555840),l=n(986709),c=n(259197),d=n(302032);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.components.services.grade.gradeSchema.Service",m="gradeSchemaService";class h{loadSchemas(e,t,n){if(e instanceof this.CourseModel||(e=this.CourseModel.$new(e)),!(e.$pk||e.id))throw new o.v({message:"Invalid course identifier. A primary key or id must be provided."});let r=e.gradebook.schemas.$refresh().$asPromise(),s=this.bbLocalize.loadBundle("components/services/grade"),a=this.$q.defer();return this.$q.all({gradeSchemas:r,bundle:s}).then(e=>{let t=i.filter(e.gradeSchemas,e=>e.scaleType!==l.aQo.Text||n);t.forEach(e=>{if(e.localizableTitle){let t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title}),a.resolve(t)}),(0,a.promise).then(e=>t&&t.length?e.filter(e=>t.some(t=>t===e.scaleType)):e)}loadSchemaForColumn(e){return this.loadSchemas(e.courseId).then(t=>i.find(t,t=>t.id===e.gradingSchemaId))}loadGradeSchema(e){let t=e.courseId;if(t){let n=this.loadSchemas(t,[],!0);return this.$q.when(n).then(t=>i.find(t,t=>t.id===e.gradingSchemaId))}throw new o.v({message:"Valid grade column object not provided."})}invalidateSchemaDataInStore(){this.$ngRedux.dispatch(c.Nwg.gradebookSchema.invalidateData())}constructor(e,t,n,i,r){this.$ngRedux=e,this.$q=t,this.CourseModel=i,this.bbLocalize=r}}h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,d.tB)("$ngRedux")),u(1,(0,d.tB)("$q")),u(2,(0,d.tB)("DSCacheFactory")),u(3,(0,d.tB)(a.N7.H)),u(4,(0,d.tB)(s.serviceName))],h),r.module(p,["angular-data.DSCacheFactory"]).service(m,h)},649955:function(e,t,n){"use strict";n.d(t,{HV:function(){return _},JH:function(){return U},Lg:function(){return M},ML:function(){return Q},S:function(){return F},U0:function(){return z},UF:function(){return j},Ui:function(){return V},Vo:function(){return H},e1:function(){return G},gB:function(){return Z},mF:function(){return B},t6:function(){return J},wI:function(){return W},wM:function(){return q}});var i,r,s,o,a=n(276635),l=n(464027),c=n(897437),d=n(259197),u=n(84741),p=n(676954),m=n(756124),h=n(362767),g=n(860995),f=n(891886),b=n(411832),v=n(78029),y=n(742854),S=n(45680),C=n(555840),E=n(619034),I=n(507009),w=n(601541),A=n(610624),k=n(808361),T=n(51914),P=n(302032),D=n(83991),x=n(986709),R=n(800553),L=n(124854),N=n(625506);function $(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function O(e,t){return function(n,i){t(n,i,e)}}let G="ultra.services.grade",_="grade",M="course.grades.gradebook-item.submission.grade-status-change",B="course.grades.gradebook-item.submission.flex-grading-change",F="course.grades.gradebook-item.submission.grade-exempt-change",U="bb-update-column",V="bb-update-attendance-column",H="bb-update-attendance-as-grade",q="placeholder";(i=s||(s={})).Possible="possible",i.Text="text";class j{subscribeToRedux(){let e=this.$ngRedux.connect(e=>{let t=d.Ys.systemPreference.getSystemPreferenceByKey(e,"gradepill.color.preference.settings");return t&&t.value&&t.value!==this.colorSettings.colorPreference?{colorSettings:{colorPreference:t.value,...JSON.parse(t.value)}}:{}},e=>({loadColorPreference:()=>e(d.Nwg.systemPreference.loadSystemPreference({key:"gradepill.color.preference.settings"}))}))(this);this.$rootScope.$on("$destroy",e)}loadColumnsAndGrades(e){let t=this.CourseModel.$new(e.courseId),n=`associatedRubrics,collectExternalSubmissions${e.includeIsLateAttemptCreationDisallowed?",isLateAttemptCreationDisallowed":""}`,i=this.loadColumns(t,e.includeExternal,{expand:n,includeInvisible:!!e.includeInvisible}).then(t=>e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t),r=this.loadGrades(t,e.userId,e.gradeQueryParams);return this.$q.all([i,r]).then(n=>{let i=n[0]||[],r=n[1]||[],s=[],o=a.keyBy(r,e=>e.columnId);return i.forEach(e=>{let t=o[e.id];t?t.column=e:t=this.GradeModel.$build({column:e}),s.push(t)}),this._loadAttempts(s,t,e.attemptQueryParams).then(e=>e)})}loadGrade(e,t){let n,i;let r=this.CourseModel.$new(e.courseId);if(e.column)i=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else if(e.columnId)i=r.gradebook.columns.$find(e.columnId).$asPromise();else throw new v.v({message:"Column or columnId must be provided."});return i.then(i=>(a.merge(e.gradeQueryParams,{userId:e.userId}),i.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then(s=>(n=s[0])?(n.column=i,t)?this.loadAttempt(n,r,e.attemptQueryParams,e.content):this.$q.when(n):this.$q.when(null))))}loadCurrentColumnsAndGrades(e,t,n,i,r){let s=e||this.contextCourse.courseId,o=r||this.contextUser.userId;return this.loadColumnsAndGrades({courseId:s,userId:o,includeExternal:!0,includeInvisible:!!t,includeIsLateAttemptCreationDisallowed:!!n,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:C.Rp.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:i})}loadColumns(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));let i=e=>t?e:e.filter(e=>!e.externalGrade),r=e.gradebook.columns;return(r?r.length:0)>(n&&"offset"in n?n.offset:0)?r.$refresh(n).$asPromise().then(i):r.$fetch(n).$asPromise().then(i)}loadGrades(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));let i=a.merge({userId:t},n);return i.limit=100,e.gradebook.grades.$fetch(i).$asPromise().then(n=>n.paging.nextPage?(i.offset=n.paging.offset+n.paging.limit,this.loadGrades(e,t,i)):e.gradebook.grades)}loadColumnGrades(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()}loadColumn(e,t,n){return t instanceof this.CourseModel||(t=this.CourseModel.$new(t)),t.gradebook.columns.$find(e,{expand:"associatedRubrics"}).$allow(n?[x.oji.NotFound,x.oji.Forbidden]:[]).$asPromise().then(e=>{var t,i;return((null==e?void 0:null===(t=e.$response)||void 0===t?void 0:t.status)===x.oji.NotFound||(null==e?void 0:null===(i=e.$response)||void 0===i?void 0:i.status)===x.oji.Forbidden)&&n?null:e})}loadOverallGradeColumn(e){return this.loadColumn("finalGrade",e,!0)}loadRubricAssociation(e,t){return this.loadColumn(e,t).then(e=>e&&e.hasRubricAssociation()?t.rubrics.$find(e.getAssociatedRubricId()).$asPromise():null)}loadBulkViewRows(e,t,n,i,r){let s=[],o=[];e.forEach(e=>{o.push(e.id);let n=this.$injector.instantiate(K,{column:t});n.user=e.user,n.membership=e,n.dueDate=t.dueDate,n.hasDueDateException=e.isDueDateExcepted(),s.push(n)});let l=a.keyBy(s,e=>e.user.id),c={courseId:t.courseId,membershipIds:o,columnIds:[t.id]};return i&&(c=a.merge(c,i)),this.fetchBulkView(c).then(e=>this.processBulkViewRows(e,l,t,n,r))}loadAnonymousBulkViewRows(e,t,n,i,r){let s=[],o=[];e.forEach(e=>{o.push(e.id);let n=this.$injector.instantiate(K,{column:t});n.user=this.UserModel.getAnonymousStudent(e.id),n.grade=e,n.dueDate=t.dueDate,s.push(n)});let l=a.keyBy(s,e=>e.grade.id),c={courseId:t.courseId,gradeIds:o,columnIds:[t.id]};return i&&(c=a.merge(c,i)),this.fetchBulkView(c).then(e=>this.processBulkViewRows(e,l,t,n,r))}fetchBulkView(e){return this.CourseModel.$new(e.courseId).gradebook.bulkView.$fetch(e).$asPromise()}processBulkViewRows(e,t,n,i,r){e.bulkViewUsers.forEach(e=>{let s=n.anonymousGrading?e.gradeId:e.studentId,o=t[s];r&&!r(o)?delete t[s]:W(o,e,i)});let s=a.values(t);return this.originalityReportService.setOriginalityAverageScore(s,n.id),s}loadCustomizedBulkViewRows(e,t,n,i,r,s){if(d.u$1.Discussion.isEqualTo(t.scoreProviderHandle)){let r=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then(s=>{let o=a.merge(a.clone(i),{limit:e.length}),l=a.merge(a.clone(o),{dateBefore:t.dueDate}),c=(e,t)=>{if(e&&e.length){let n={};e.forEach(e=>{n[e.data.id]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}}),s.forEach(e=>{if(n&&n[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});let i=n[e.user.id];t?(e.participation.totalComment=i.totalComment,e.participation.totalReply=i.totalReply):(e.participation.comment=i.comment,e.participation.reply=i.reply)}})}};this.$q.all([this.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(l).$allow([400]).$then(e=>{c(e)}).$asPromise(),this.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(o).$allow([400]).$then(e=>{c(e,!0)}).$asPromise()]).then(()=>r.resolve(s)).catch(r.reject)}).catch(r.reject),r.promise}let o="attempts";return r&&(o+=",submissionResults"),this.loadBulkViewRows(e,t,null,{expand:o,includeInProgress:!!s})}loadAnonymousStudentRows(e){return this.retrieveAnonymousStudentRows(e,null)}loadAnonymousStudentRowsNeedsGrading(e){return this.retrieveAnonymousStudentRows(e,{status:"NEEDS_GRADING",readyToPost:!1})}retrieveAnonymousStudentRows(e,t){let n={expand:"toolAttemptDetail,viewUrl",...t};return e.getGradeIdToAttempt(n).then(e=>e.lookup).then(t=>{let n=[];return Object.keys(t).forEach(i=>{let r=t[i];if(a.remove(r,e=>e.isInProgress()),r.length>0){let t=this.createAnonymousStudentRow(e,r,i);n.push(t)}}),n})}createBlankSubmissionListRow(e){let t=this.$injector.instantiate(K,{column:e});return t.user=this.UserModel.getAnonymousStudent(""),t.id=q,t}generatePeerRow(e,t,n){let i=this.createAnonymousStudentRowWithoutId(t,e,n);return e.length>0&&(i.delegatedGraderOrder=e[0].delegatedGraderOrder),i}createAnonymousStudentRow(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,n)}createAnonymousStudentRowWithoutId(e,t,n){return this.createAnonymousStudentRowImpl(e,t,n,"")}createAnonymousStudentRowImpl(e,t,n,i){let r=this.$injector.instantiate(K,{column:e}),s=t[t.length-1],o=t.reverse().find(e=>e.displayGrade&&null!=e.displayGrade.score);return r.user=this.UserModel.getAnonymousStudent(i),r.dueDate=e.dueDate,r.attemptCount=t.length,r.lastAttemptDate=s.attemptDate,r.grade=this.GradeModel.$build({id:n,user:r.user,attempts:t,displayGrade:o&&o.displayGrade||{},manualStatus:o&&o.status||x.WTZ.NoOverride}),r}loadAnonymousStudentGrade(e,t){let n=e.grades.$new(t).attempts,i=this.UserModel.getAnonymousStudent(t);return n.$fetch().$asPromise().then(n=>this.GradeModel.$build({pointsPossible:e.possible,id:t,user:i,attempts:n}))}loadGroupRows(e,t,n,i,r,s){let o={},l=[],c=a.keyBy(n,e=>e.user.id);return(i.ui&&i.ui.content&&i.ui.content.assignedGroups&&i.ui.content.assignedGroups.some(e=>!!e.groupAssociationId)?this.$q.when(i.ui.content):e.contents.$find(i.contentId,{expand:"assignedGroups"}).$asPromise()).then(n=>{let d={};return n&&n.assignedGroups&&n.assignedGroups.forEach(e=>{d[e.groupId]=e.groupAssociationId,!t&&s&&s===e.groupId&&(t=[e])}),l=t.map(t=>(o[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then(e=>{let t=this.$injector.instantiate(K,{column:i});t.group=e,t.groupDetailsShown=!1,t.dueDate=i.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=d[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter(e=>!!e.userId&&!!c[e.userId]&&(e.ui||(e.ui={}),e.ui.user=c[e.userId].user,e.ui.dueDateExceptionType=c[e.userId].dueDateExceptionType,e.ui.hasDueDateException=c[e.userId].isDueDateExcepted(),e.ui.courseRole=c[e.userId].courseRole,!0))),t.hasDueDateException=t.group.memberships.some(e=>c[e.userId].isDueDateExcepted()),o[e.id]=t}).$asPromise())),this.$q.all(l).then(()=>{let e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return r&&(e+=",submissionResults"),i.getContentGroupIdToGroupAttempt({expand:e}).then(e=>{let t;let n={};a.values(e.lookup).forEach(e=>{n[e[0].groupId]=e});let r=[];return this.batchService.performBatch(()=>{r=(t=a.values(o)).map(e=>{var t;let r=(null===(t=n[e.group.id])||void 0===t?void 0:t.length)>0?n[e.group.id].length-1:0;return this.updateOneGroupRow(e,i,{expand:!0,groupAttempts:n[e.group.id],currentAttemptIndex:r})})}),this.$q.all(r).then(()=>this.originalityReportService.setOriginalityAverageScore(t,i.id)),this.$q.all(r).then(()=>this.sortGroupMembers(t))})})})}getOverallGradeJson(e){let t=N(N.parseHTML(e)),n={};if("math"===t.prop("nodeName")){let e=t.children();if(e&&e.length>0){let t=N(e[0]);if("mi"===t.prop("nodeName")){let e=t.text(),i=(e=(e=e.replace("@X@BBCalColElem(","")).replace(")@X@","")).indexOf(":")+1;n=JSON.parse(e.substring(i))}}}return n}sortGroupMembers(e){let t=[];return e.forEach(e=>{let n=[];e.group.memberships&&(e.group.memberships.forEach(e=>{n.push(this.bbLocalize.formatUsername(e.ui.user,p.ILocaleUsernameFormat.Short,this.$rootScope).then(t=>{e.ui.formatUserName=t}))}),t.push(this.$q.all(n).then(()=>{e.group.memberships.sort((e,t)=>e.ui.formatUserName.localeCompare(t.ui.formatUserName)),e.group.ui.users=[],e.group.memberships.forEach(t=>{e.group.ui.users.push(t.ui.user)})})))}),this.$q.all(t).then(()=>e)}updateOneGroupRow(e,t,n={expand:!0}){return t.getGroupGrade(e.group.ui.groupAssociationId,n.expand).then(t=>{var i,r;let s=n.currentAttemptIndex||0,o=n.groupAttempts&&n.groupAttempts[s]||(null===(i=e.grade)||void 0===i?void 0:i.ui.groupAttempt);if(e.grade=t,(null==n?void 0:null===(r=n.groupAttempts)||void 0===r?void 0:r.length)>0){let t=0,i=0;n.groupAttempts.forEach(e=>{var n,r,s;(null===(s=e.originality)||void 0===s?void 0:null===(r=s.results)||void 0===r?void 0:null===(n=r[x._Nl])||void 0===n?void 0:n.originalityProcessed)&&(t+=e.originality.results[x._Nl].originalityScore,i+=1)}),i>0&&(e.originalityScore=t/i,e.originalityProcessed=!0)}else o&&(e.originalityScore=o.originalityScore,e.originalityProcessed=o.originalityProcessed);return this.setGroupAttemptsOnRow(e,n.groupAttempts||[o],n.grade,n.grades||t.groupMembersGrades,n.attempt,s),e})}setGroupAttemptsOnRow(e,t,n,i,r,s){let o,l={rawText:"",displayText:""};n&&n.instructorFeedback?l=n.instructorFeedback:i&&i.length&&i[0].instructorFeedback&&(l=i[0].instructorFeedback);let c=0;(null==t?void 0:t[s])?(t.forEach(t=>{e.grade.groupAttempts.push(t),(x.I$9.NeedsGrading===t.status||x.I$9.NeedsMoreGrading===t.status||x.I$9.Completed===t.status)&&(c+=1)}),o=t[s]):(o=this.GradeGroupAttemptModel.$buildRaw({}),e.grade.groupAttempts.push(o)),e.attemptCount=c,e.lastAttemptDate=o.attemptDate,e.grade.instructorFeedback=l,e.grade.ui={groupAttempt:o,currentAttemptIndex:s},e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;let d=a.keyBy(e.group.memberships,e=>e.userId);if(i)i.forEach(e=>{let t=d[e.user.$pk];t&&(t.ui.gradeDetail=e)});else if(r){let t=o.attempts.map((e,t)=>{let n;return e.id===r.id?((n=r).userId=e.userId,d[n.userId].ui.gradeDetail.displayGrade=n.displayGrade,d[n.userId].ui.gradeDetail.ui.attempt=n):n=e,n});e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=x.I$9.NeedsGrading),e.grade.ui.groupAttempt.attempts=t}else n?e.group.memberships=e.group.memberships.map(e=>{let t=e.userId===n.user.$pk?n:e.ui.gradeDetail;return e.ui.gradeDetail=t,e}):o.attempts&&o.attempts.forEach(t=>{d[t.userId].ui.gradeDetail.displayGrade=t.displayGrade,d[t.userId].ui.gradeDetail.ui.attempt=t,d[t.userId].ui.gradeDetail.manualStatus=e.grade.manualStatus});e.group.memberships=a.values(d)}_loadAttempts(e,t,n){let i=[];return e.forEach(e=>{i.push(this.loadAttempt(e,t,n))}),this.$q.all(i)}loadAttempt(e,t,n={},i){let r;let s=a.clone(n);if(s&&s.attemptId)r=s.attemptId,delete s.attemptId;else{let t=C.Rp.parseAttemptAggregationModel(e.column&&e.column.aggregationModel);s&&s.overrideAggregationModel&&(t=s.overrideAggregationModel,delete s.overrideAggregationModel),r=(0,T.m)(t,e)}if(e.column&&x.eNW.NonCalculated===e.column.calculationType){let n;let o=t.gradebook.attempts,a=i&&i.isGroupContent,l=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(a&&!i.isDiscussion()){if(!l)return this.$q.when(e);n=e.column.getGroupAttemptByGroupAssociationId(l,!1,r)}else{if(!r)return this.$q.when(e);n=o.$find(r,s).$asPromise()}return n.then(t=>(a?t&&t.id&&(e.ui.groupAttempt=t,e.ui.attempt=t&&t.attempts&&t.attempts.length&&t.attempts[0]):e.ui.attempt=t,e))}return this.$q.when(e)}loadColumnAttempts(e,t={},n){return e.getGradeIdToAttempt(t,n)}loadUsersFinalGradeForCourse(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then(e=>e[0])}loadColumnSummary(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()}loadGradebookSettings(e){let t=this.gbSettingsCache.get(e);if(!t){let t=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:t}),t}return this.$q.when(t.promise)}loadDefaultGradebookSettings(){return this.GradebookSettingsModel.$build({afterDecimal:j.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:j.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})}formatPoints(e,t,n,i){null==n&&(n="text");let r=n;return this.bbLocalize.loadBundle("components/services/grade").then(()=>this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.services.grade.points_"+r,params:{points:i,possible:e},noWrap:!0}))}parseGrade(e,t,n){if(!e)return"";if((null==t?void 0:t.scaleType)===x.aQo.Text)return e;let i=this.bbLocalize.parseNumberSync(e,n);return Number.isNaN(i)?e:i.toString()}getGradeToDisplay(e,t,n){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){let i=this.bbLocalize.formatNumberSync(e.score,t,{round:"truncate",maximumFractionDigits:j.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return n&&n===x.aQo.Percent&&(i=this.bbLocalize.formatPercentageSync(e.score/100,t,j.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL)),i}}getHighestPossibleScore(e,t,n){let i=this.$q.defer();switch(e.scaleType){case x.aQo.Tabular:return i.resolve(e.symbols[0].symbol),i.promise;case x.aQo.Percent:return this.bbLocalize.formatPercentage(1,n);case x.aQo.Score:{let e=t.possible;return this.formatPoints(e,n,"text")}default:return i.resolve("N/A"),i.promise}}validateGrade(e,t,n){let i=this.loadDefaultGradebookSettings(),r=this.bbLocalize.loadBundle("components/services/grade"),s=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([r,s]).then(r=>{let s=e.gradeValue.getGrade(),o=!1,a=r[1];return s?(o=this.isValidNumericGrade(s,i,t))||!e.column||!e.column.externalGrade||(o=this.notation.isValidPerformanceCodeGrade(a,s)):o=!(n&&n.notAllowEmptyString),o})}clearGroupGrade(e,t,n){let i=this.CourseModel.$new(e.id).gradebook.columns.$new(t.id);return this.batchService.performBatch(()=>this.$q.all(n.map(e=>{let t=i.grades.$new(e.ui.gradeDetail.id);return t.manualGrade=j.CLEAR_GRADE_CHARACTER,t.$patch(["manualGrade"]).$asPromise()}))).then(()=>i.grades)}saveGrade(e,t,n,i){if(!e.courseId||!e.column||!e.gradeValue)throw Error("A valid courseId, column, and grade value are required.");if(e.column.seemsAttemptBased()){let r=[],s=[];i&&i.group&&i.group.memberships&&i.group.memberships.forEach(t=>{t.ui&&t.ui.gradeDetail&&(r.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&s.push(t.ui.gradeDetail.id))}),(null==n||null==n.id)&&t||n&&n.isInProgress()?(i.group?e.gradeIds=r:e.gradeId=t.id,!e.userId&&i.userId&&(e.userId=i.userId),e.clearGrade&&(e.setGradeToEmpty=!0)):n&&n.id&&t?(e.clearGrade&&(i.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),n instanceof this.GradeAttemptModel?(e.attemptId=n.id,n.groupAttemptId&&(e.override=!0),e.setGradeToEmpty&&(e.gradeId=t.id)):(e.groupAttemptId=n.id,s.length&&(e.gradeIdsNeedClear=s))):i&&i.userId?e.userId=i.userId:i&&i.group&&i.group.id&&!(null==e?void 0:e.groupAttemptId)&&(e.gradeIds=r)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=i.userId:null==t?e.userId=i.userId:(e.userId||(e.userId=i.userId),e.gradeId=t.id);return this._save(e)}save(e){return this._save(e)}_save(e){if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then(()=>this.updateAttempt(e))):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then(()=>this.updateGroupAttempt(e));if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw Error("A valid userId must be specified when creating a new grade.")}canSaveGradeDetail(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))}createAndUpdateGradesForGroupMembers(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch(()=>this.$q.all((e.gradeIdsNeedClear||e.gradeIds).map(n=>{let i=t.$buildRaw({id:n});return t.$add(i),this.setGradeValueOnGrade(e,i,!!e.gradeIdsNeedClear||e.setGradeToEmpty),i.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()}))).then(()=>t.$asPromise()):t.$asPromise()}createGradeSubmission(e,t,n){return new c.Z(e,t,n)}wasGradeCleared(e,t){let n=e&&e.length,i=t&&t.length;return n>0&&!i}updateAttempt(e){if(!e.attemptId)throw Error("Attempt id is not set");let t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()}updateGroupAttempt(e){if(!e.groupAttemptId)throw Error("Group attempt id is not set");let t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()}isReadyToPost(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)}setGradeOnAttempt(e,t){e.setAttemptToEmpty?(t.score=null,t.status=x.I$9.NeedsGrading,t.grade=j.CLEAR_GRADE_CHARACTER,t.rubricEvaluation=null):(e.gradeValue.isNumeric?t.score=parseFloat(e.gradeValue.getGrade()):t.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(t.rubricEvaluation=e.rubricEvaluation),t.readyToPost=this.isReadyToPost(e.column),t.readyToPost||(t.status=x.I$9.Completed)),e.override&&(t.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(t.reconciliationMode=x.Kp$.Custom)}isDelegatedAndEntitledReconciler(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)}createGradeForUserAndSave(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()}updateGrade(e){let t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0,expand:"lastFeedbackAuthor"}).$patch().$asPromise()}setGradeValueOnGrade(e,t,n){if(n)t.manualGrade=j.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)t.perfCodeId=e.perfCodeId;else{let n=e.gradeValue;n.isNumeric?(t.pointsPossible=e.pointsPossible,t.manualScore=parseFloat(n.getGrade())):t.manualGrade=n.getGrade()}}isValidNumericGrade(e,t,n){let i;let r=this.bbLocalize.parseNumberSync(e,n);return!Number.isNaN(r)&&(!t||null==t.beforeDecimal||!((i=Math.floor(r).toString()).length>t.beforeDecimal))&&(!t||null==t.afterDecimal||null==i||!(r.toString().substring(i.length+1).length>t.afterDecimal))}static isValidFormat(e,t){let n=e.indexOf("."),i=0,r=e.length;return n>-1&&(i=r-n-1,r=0),r<=t.beforeDecimal&&n<=t.beforeDecimal&&i<=t.afterDecimal}static mapSchemaSymbols(e){if(e.scaleType===x.aQo.Tabular)return e.symbols.map(e=>e.symbol.toLocaleLowerCase())}findOverallGrade(e){return a.find(e,e=>e.externalGrade)}needsToSetupOverall(e,t){let n=this.findOverallGrade(e);return this.$q.when(!n)}fetchNeedsToSetupOverallGrade(e){let t=e instanceof this.CourseModel?e.id:e;return this.loadOverallGradeColumn(e).then(e=>this.needsToSetupOverall(e?[e]:[],t))}setDeleteConfirmationHandle(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")}calculateRankingsMap(e,t){let n,i;let r={},s=e.length;for(let o=0;o<s;o++)i=o/s,n=t?10*Math.floor(10*i):Math.floor(100*i),r[e[o].displayGrade.score]=n;return r}getPercentileColor(e){return D.cQ.getPercentileColor(e,this.colorSettings.isColorEnabled)}isRubricGradeOverridden(e,t,n,i){let r=e&&e.displayGrade&&e.displayGrade.isOverride;i&&i.memberships&&i.memberships.forEach(e=>{e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(r=!0)});let s=null!=n.rubricAssociations&&n.rubricAssociations.length>0&&n.rubricAssociations[0],o=t&&t.rubricEvaluation,a=!!(t&&t.groupAttemptId);return!!t&&!a&&null!=t.score&&!!t.readyToPost&&!!s&&(!o||o.rubricAssociationId!==s.id||t.score!==o.totalScore)||r&&(s||!d.u$1.UltraAssignment.isEqualTo(n.scoreProviderHandle)&&!d.u$1.Discussion.isEqualTo(n.scoreProviderHandle))}canGrade(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()}canUserReconcile(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)}hasItemsToReconcile(e){return e.summary.numSubmissionsNeedsReconciling>0}canPostGrades(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;let n=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?n&&this.gradebookPermissionService.canDeanonymizeGrades(e.id)&&D.cQ.canPostAnonymousGradesAsDelegatedGrader(this.contextUser.userId,t.anonymousGrading,t.distributedGrading,t.delegatedGraders):n}getPostAllGradeConfirmationNeededStringsKey(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"}pointToPercentage(e,t){return 100*e/t}percentageToPoint(e,t){return e*t/100}gradeDetailToPercentage(e){if(!e)return e;let t=a.assignInWith({},e);if(e.displayGrade&&void 0!==e.manualScore){let n=this.pointToPercentage(e.manualScore,m.m(e.pointsPossible,5));t.manualScore=m.m(n,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t}percentageToGradeDetail(e,t){if(!e)return e;let n=e.manualScore;e.manualScore&&(n=this.percentageToPoint(e.manualScore,t));let i=a.assignInWith({},e);return i.manualScore=n,i.displayGrade.score=n,i.pointsPossible=t,i}truncateGradeDetail(e){let t=a.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=m.m(e.manualScore,2),t.displayGrade.score=t.manualScore),t}toFixedGradeDetail(e){let t=a.assignInWith({},e);return e.displayGrade&&void 0!==e.manualScore&&(t.manualScore=parseFloat(e.manualScore.toFixed(2)),t.displayGrade.score=t.manualScore),t}refreshCourseContents(e){this.loadGrade({courseId:e.courseId,columnId:e.getAssociatedGradingColumn().id,userId:this.contextUser.userId,includeExternal:!0},!0).then(e=>{e.isGraded()&&this.$rootScope.$broadcast(R.a)})}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I){this.$q=e,this.$rootScope=t,this.$injector=n,this.cacheFactory=i,this.$ngRedux=r,this.CourseModel=s,this.GradeAttemptModel=o,this.GradebookSettingsModel=a,this.GradeGroupAttemptModel=l,this.GradeModel=c,this.ColumnModel=d,this.UserModel=u,this.GradeBulkViewModel=p,this.context=m,this.bbLocalize=h,this.ultraState=g,this.batchService=f,this.entitlement=b,this.notation=v,this.schemaService=y,this.gradebookPermissionService=S,this.originalityReportService=C,this.contextUser=E,this.contextCourse=I,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.loadColorPreference=()=>{},this.colorSettings={isColorEnabled:!0,colorPreference:""},this.gbSettingsCache=i.createCache("gbSettings"),this.subscribeToRedux(),this.loadColorPreference()}}function z(e,t,n){return(0,x.ZYv)(d.nPi,{courseId:e,columnId:t,groupId:n})}function W(e,t,n){let{peerReviewsCountsPerColumn:i,grades:[r]}=t;e.originalityProcessed=r.originalityProcessed,e.originalityScore=r.originalityScore,e.grade=r.grade,e.grade.user=e.user,e.attemptCount=r.attemptCount,e.lastAttemptDate=r.lastAttemptDate,e.attemptsReadyToPost=r.attemptsReadyToPost,(null==i?void 0:i[e.Column.id])&&(e.peerReviewCounts=null==i?void 0:i[e.Column.id]),(null==n?void 0:n.lookup[r.grade.id])&&(e.grade.attempts=n.lookup[r.grade.id])}j.TEXT_SCHEMA_CHARACTER_LENGTH=32,j.CLEAR_GRADE_CHARACTER="-",j.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,j.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,j=$([O(0,(0,P.tB)("$q")),O(1,(0,P.tB)("$rootScope")),O(2,(0,P.tB)("$injector")),O(3,(0,P.tB)("DSCacheFactory")),O(4,(0,P.tB)("$ngRedux")),O(5,(0,P.tB)(C.N7.H)),O(6,(0,P.tB)(C.U_.serviceName)),O(7,(0,P.tB)(C.Ct.H)),O(8,(0,P.tB)(C.uy.HV)),O(9,(0,P.tB)(C.zn.H)),O(10,(0,P.tB)(C.Rp.serviceName)),O(11,(0,P.tB)(C.EA.HV)),O(12,(0,P.tB)(C.Gn.H)),O(13,(0,P.tB)(h.HV)),O(14,(0,P.tB)(p.serviceName)),O(15,(0,P.tB)(k.HV)),O(16,(0,P.tB)(u.HV)),O(17,(0,P.tB)(b.HV)),O(18,(0,P.tB)(I.HV)),O(19,(0,P.tB)(y.HV)),O(20,(0,P.tB)(S.HV)),O(21,(0,P.tB)(w.HV)),O(22,(0,P.tB)(f.HV)),O(23,(0,P.tB)(g.HV))],j),(r=o||(o={}))[r.None=0]="None",r[r.Graded=1]="Graded",r[r.MultiStatus=2]="MultiStatus",r[r.NeedGrade=3]="NeedGrade",r[r.Opened=4]="Opened",r[r.Unopend=5]="Unopend",r[r.Posted=6]="Posted",r[r.Completed=7]="Completed",r[r.Unknown=8]="Unknown";class K{get numOfPeerReviewsCompleted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completed)&&void 0!==t?t:0}get numOfPeerReviewsCompletedLate(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.completedLate)&&void 0!==t?t:0}get numOfPeerReviewsStarted(){var e,t;return null!==(t=null===(e=this.peerReviewCounts)||void 0===e?void 0:e.started)&&void 0!==t?t:0}get Column(){return this.column}isCurrentUserReconciler(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)}isCurrentUserDelegatedGrader(){return this.column&&this.column.isUserDelegatedGrader(this.contextUser.userId)}isDiscussion(){return this.column.isDiscussion()}isOverdue(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0}getLateSubmissionCount(e){var t,n;if(l.isDefined(this.lateSubmissionCount))return this.lateSubmissionCount;let i=null!=e?e:this.dueDate;return this.group?this.lateSubmissionCount=null===(t=this.grade)||void 0===t?void 0:t.groupAttempts.getNumAttemptsSubmittedLate(this.dueDate):this.lateSubmissionCount=null===(n=this.grade)||void 0===n?void 0:n.attempts.getNumAttemptsSubmittedLate(i),this.lateSubmissionCount}isStatusComplete(){var e;return this.isDiscussion()||this.grade&&!this.grade.attempts?this.isCompleted():this.checkIfStatusComplete(null===(e=this.grade)||void 0===e?void 0:e.attempts)}isGroupStatusComplete(e){var t;return e?this.isCompleted():this.checkIfStatusComplete(null===(t=this.grade)||void 0===t?void 0:t.groupAttempts)}checkIfStatusComplete(e){if(this.column.anonymousGrading)return!1;if(Z(this.column.aggregationModel))return this.isFirstOrLastAttemptWithAGradeAndCompleted();if(Q(this.column.aggregationModel))return this.isLastAttemptWithAGradeAndCompleted();let t=this.assessmentException?this.assessmentException.attempts:this.column.multipleAttempts;return!!this.grade&&!!e&&(e.isAllGradedAndPosted()||this.grade.isPosted())&&e.getNumOfGradedAttempts()===t}shouldShowNothingToGradeStatus(){if((Z(this.column.aggregationModel)||Q(this.column.aggregationModel))&&!this.column.anonymousGrading){var e;let t=null===(e=this.grade)||void 0===e?void 0:e.attempts;return!(t&&t.length&&t.find(e=>e.isCompleted()))}return!0}isFirstAttemptGradedAndPosted(){var e,t;let n=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return null==n?void 0:n.isFirstAttemptPosted()}isFirstAttemptGradedAndGradeObjectPosted(){var e,t,n,i;let r=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return(null==r?void 0:null===(n=r.getFirstAttempt())||void 0===n?void 0:n.isGraded())&&(null===(i=this.grade)||void 0===i?void 0:i.isPosted())}isLastAttemptGradedAndPosted(){var e,t;let n=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return null==n?void 0:n.isLastSubmittedAttemptPosted()}isLastAttemptGradedAndGradeObjectPosted(){var e,t,n,i;let r=this.group?null===(e=this.grade)||void 0===e?void 0:e.groupAttempts:null===(t=this.grade)||void 0===t?void 0:t.attempts;return(null==r?void 0:null===(n=r.getLastSubmittedAttempt())||void 0===n?void 0:n.isGraded())&&(null===(i=this.grade)||void 0===i?void 0:i.isPosted())}hasUnlimitedDueDateAccommodation(){var e,t;return this.group?!!(null===(t=this.group.memberships)||void 0===t?void 0:t.some(e=>{var t;return(null===(t=e.ui)||void 0===t?void 0:t.dueDateExceptionType)===x.AVG.Unlimited})):(null===(e=this.membership)||void 0===e?void 0:e.dueDateExceptionType)===x.AVG.Unlimited}isStatusNothingToGrade(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()}isGroupStatusNothingToGrade(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()}isFirstAttemptWithAGradeAndCompleted(){return Z(this.column.aggregationModel)&&(this.isFirstAttemptGradedAndPosted()||this.isFirstAttemptGradedAndGradeObjectPosted())}isLastAttemptWithAGradeAndCompleted(){return Q(this.column.aggregationModel)&&(this.isLastAttemptGradedAndPosted()||this.isLastAttemptGradedAndGradeObjectPosted())}isFirstOrLastAttemptWithAGradeAndCompleted(){return this.isFirstAttemptWithAGradeAndCompleted()||this.isLastAttemptWithAGradeAndCompleted()}isStatusAttemptsToReconcile(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0}isStatusAttemptsToGrade(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0}isGroupStatusAttemptsToGrade(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:!(!this.column.anonymousGrading&&this.isFirstOrLastAttemptWithAGradeAndCompleted())&&this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0}hasGroupUsersForGrading(){var e,t;return null!==(t=this.group)&&void 0!==t&&null!==(e=t.memberships)&&void 0!==e&&!!e.length&&this.group.memberships.some(e=>{var t,n;return!(null===(n=e.ui)||void 0===n?void 0:null===(t=n.gradeDetail)||void 0===t?void 0:t.isGraded())})}isStatusToPost(){return this.isDiscussion()?this.needsPosting():!this.column.anonymousGrading&&this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}isGroupStatusToPost(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()}overrideToPost(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()}isMultipleStatus(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())}isNothingToGradeStatus(e){let t=this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile(),n=this.isMultipleStatus()||this.isStatusToPost()||this.overrideToPost();return(!t||!!e)&&(!e||!!n||!t)&&n}hasGroupAttempts(){return this.grade&&this.grade.groupAttempts.length&&a.every(this.grade.groupAttempts,e=>!!e.id)}get RowStatus(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8}hasNoSubmissions(){return!this.attemptCount||0===this.attemptCount}hasNoParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply}hasNoTotalParticipation(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply}hasLateParticipation(){var e;return!(null===(e=this.grade)||void 0===e?void 0:e.isExempt)&&this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0}inProgress(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&x.I$9.InProgress===this.grade.ui.groupAttempt.status:this.grade&&this.grade.ui&&this.grade.ui.attempt&&x.I$9.InProgress===this.grade.ui.attempt.status}isLate(e){if(!this.hasUnlimitedDueDateAccommodation()){let t=E(this.context.getServerTime()),n=null!=e?e:this.dueDate;return this.hasNoSubmissions()&&t.isAfter(n)||E(this.lastAttemptDate).isAfter(n)}return!1}isSubmittedLate(e){if(!this.hasUnlimitedDueDateAccommodation()){let t=null!=e?e:this.dueDate;return!this.hasNoSubmissions()&&E(this.lastAttemptDate).isAfter(t)&&!this.inProgress()}return!1}isCompleted(){return!!(!this.group&&this.grade&&this.grade.isGraded()&&this.grade.isPosted())||!!this.group&&!!this.group.memberships&&this.group.memberships.length>0&&this.group.memberships.every(e=>e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted())}needsPosting(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){let e=0,t=0;if(this.group.memberships.forEach(n=>{n.ui&&n.ui.gradeDetail&&(n.ui.gradeDetail.isReadyToPost()?t++:n.ui.gradeDetail.isPosted()&&e++)}),t>0&&e+t===this.group.memberships.length)return!0}return!1}needsGrading(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()}deleteAllAttempts(){this.grade.attempts.$fetch().$then(e=>{e.forEach(e=>{e.$destroy()}),this.attemptCount=0,this.lastAttemptDate=null})}getLastAttempt(){var e,t;if(null===(t=this.grade)||void 0===t?void 0:null===(e=t.attempts)||void 0===e?void 0:e.length)return this.grade.attempts[this.grade.attempts.length-1]}getLastGroupAttempt(){var e,t;if(null===(t=this.grade)||void 0===t?void 0:null===(e=t.groupAttempts)||void 0===e?void 0:e.length)return this.grade.groupAttempts[this.grade.groupAttempts.length-1]}isGroupAttemptDraft(){var e,t;return!!(null===(t=this.grade)||void 0===t?void 0:null===(e=t.groupAttempts)||void 0===e?void 0:e.some(e=>!e.isSubmitted()))}constructor(e,t,n){this.column=e,this.context=t,this.contextUser=n,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=A.d(),this.hasDueDateException=!1}}function Z(e){return(0,L.parseAttemptAggregationModel)(e)===L.AttemptAggregationModel.First}function Q(e){return(0,L.parseAttemptAggregationModel)(e)===L.AttemptAggregationModel.Last}K=$([O(0,(0,P.tB)("column")),O(1,(0,P.tB)(h.HV)),O(2,(0,P.tB)(f.HV))],K);class J extends j{}l.module(G,["angular-data.DSCacheFactory",C.e1,h.e1,k.e1,I.e1,y.e1,S.e1,w.e1]).service(_,j)},897437:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(986709),r=class{getGrade(){return this.grade}constructor(e,t){(null==t?void 0:t.scaleType)===i.aQo.Text?this.isNumeric=!1:this.isNumeric=!Number.isNaN(parseFloat(e)),this.grade=e}},s=class{constructor(e,t,n){this.column=e,this.courseId=e.courseId,this.gradeValue=new r(t,n)}}},45680:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(83991),r=n(464027),s=n(362767),o=n(860995),a=n(891886),l=n(411832),c=n(12838),d=n(302032);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.components.services.gradebookPermission",m="gradebookPermission";class h{isEntitled(e,t){return this.entitlementService.isEntitled(e,t)}canDeanonymizeGrades(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)}canEnterFeedback(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)}canEnterGrades(e){return this.canExecute(e)}canViewAssessmentException(e){return this.isEntitled(c.iL.ViewException,e)}canDelegatedEnterAttemptFeedback(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()}canDelegatedEnterAttemptGrades(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()}canDelegatedModifyAttempt(e,t){return!!(!e.delegatedGrading||!t||e.isUserReconciler(this.currentUser.userId))||!t.isReconciled()}canDelegatedReconcileAttempt(e){return e.delegatedGrading&&e.isUserReconciler(this.currentUser.userId)}canExecute(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)}canModify(e){return this.isEntitled(i.SE.ModifyGradebook,e)}canModifyItemDueDate(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)}canObserve(e){return this.isEntitled(i.SE.Observe,e)}canOverrideGrades(e){return this.canExecute(e)}canPostGrades(e,t){let n=t||this.context.column,i=e||this.currentCourse.courseId;return n&&n.delegatedGrading?n.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",i):this.isEntitled("course.gradebook-grades.publish.EXECUTE",i)}canView(e){return this.isEntitled(i.SE.ViewGradebookMetaData,e)}hasItemExceptionView(e){return this.entitlementService.isEntitled(i.SE.ViewException,e)}hasAssessmentExceptionView(e){return this.entitlementService.isEntitled(c.iL.ViewException,e)}canViewAttempts(e){return this.isEntitled(i.SE.ViewAttempts,e)}canViewGrades(e){return this.isEntitled("course.gradebook-grades.VIEW",e)}canViewBulkDownload(e){return this.isEntitled(i.SE.ViewGrades,e)}canViewAnonymousBulkDownload(e){return this.entitlementService.areAllEntitled([i.SE.ViewGrades,i.SE.ExportGradebookData],e)}constructor(e,t,n,i){this.context=e,this.currentCourse=t,this.currentUser=n,this.entitlementService=i}}h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,d.tB)(s.HV)),u(1,(0,d.tB)(o.HV)),u(2,(0,d.tB)(a.HV)),u(3,(0,d.tB)(l.HV))],h),r.module(p,[l.e1,o.e1,s.e1]).service(m,h)},812479:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i,r,s=n(658895),o=n(473011),a=n(302032),l=n(362767);function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.services.institutionApi",u="institutionApi";(i=r||(r={})).V1="1.0",i.V2="2.0";class p{importIP(){return Promise.all([n.e(98290),n.e(62101),n.e(22258)]).then(n.bind(n,189056)).then(({default:e})=>e)}canEditFetch(e){return this.$q.when(this.importIP().then(t=>t.pageService.canEditFetch("2.0",e)))}getEffectivePageVariantId(e){return this.$q.when(this.importIP().then(t=>t.pageService.getEffectivePageVariantId(e)))}getModuleVisibility(e){return this.$q.when(this.importIP().then(t=>t.moduleService.getModuleVisibility(e)))}constructor(e,t,n){this.$http=e,this.$q=t,this.context=n,this.getUserCanEdit=e=>this.canEditFetch(e).then(({canEdit:e})=>e,()=>!1),this.getUserCanView=e=>this.canEditFetch(e).then(({ipHasVisible:e})=>e>0,()=>!1),this.getEffectiveVariantIdWithPermissions=()=>{let e=this.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return this.getEffectivePageVariantId(t).then(e=>this.canEditFetch(e).then(({canEdit:t,ipHasVisible:n})=>({variantId:e,canEdit:t,canView:n>0}))).catch(()=>({variantId:void 0,canEdit:!1,canView:!1}))},this.getModuleIsVisible=e=>this.getModuleVisibility(e).then(({visible:e})=>e,()=>!1),this.getHealth=()=>{if(this.ipHealthPromise)return this.ipHealthPromise;let e=o.uI(s.default.institutionApiBasePath+"/health");return this.ipHealthPromise=this.$http.get(e,this._getConfig())},this._getConfig=()=>({headers:{Accept:`application/json; version=${"2.0".toString()}`}})}}p=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,a.tB)("$http")),c(1,(0,a.tB)("$q")),c(2,(0,a.tB)(l.HV))],p),angular.module(d,[l.e1]).service(u,p)},94237:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var i=n(202784),r=n(928316),s=n(610624),o=n(292050);let a=()=>{let[e]=i.useState((0,s.V)()),[t,n]=i.useState(!1),r=i.useRef();return i.createElement("div",{ref:r,className:`course-banner-integration-container${t?"":" no-integration-content"}`},i.createElement(o.$2,{portalId:e,selector:"course.banner.top",onContentsChanged:e=>{n(!!e),r.current.dispatchEvent(new CustomEvent("banner-resize",{bubbles:!0}))}}))},l=new class{watchBanner(e){return this.subscriptions.push(e),setTimeout(()=>e(this.currentBanner)),()=>this.subscriptions=this.subscriptions.filter(t=>t!==e)}notifySubscribers(){this.subscriptions.forEach(e=>e(this.currentBanner))}constructor(){this.subscriptions=[],this.createBanner=()=>{if(this.currentBanner)return this.currentBanner;let e=document.createElement("div");return r.render(i.createElement(a,null),e),this.currentBanner=e,this.notifySubscribers(),this.currentBanner},this.destroyBanner=()=>{if(!this.currentBanner){console.warn("There is no integration banner present to unmount.");return}r.unmountComponentAtNode(this.currentBanner),this.currentBanner=null,this.notifySubscribers()},this.currentPanelBanner=()=>{if(this.bannerStack.length)return this.bannerStack[this.bannerStack.length-1].state},this.pushBanner=e=>{this.bannerStack.push(e),1!==this.bannerStack.length&&this.bannerStack[this.bannerStack.length-2].orphan()},this.popBanner=e=>{this.bannerStack=this.bannerStack.filter(t=>t.state.stateName!==e),this.bannerStack.length?this.bannerStack[this.bannerStack.length-1].adopt(this.currentBanner):this.destroyBanner()},this.bannerStack=[]}}},968761:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(202784),r=n(740594),s=n(571447),o=n(292050),a=n(847969),l=n(563060);let c=e=>{let[t,n]=(0,i.useState)("#");return(0,i.useEffect)(()=>{n(l.Nd.getHref(l.BJ.INTEGRATION_BASE,{routeName:e}))},[e]),t},d="integration",u=e=>{let{isRtl:t,to:n,analyticsId:r,className:s,children:o,...l}=e,u=c(n),p=r?`${d}.${r}`:`${d}.link`;return i.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:t},i.createElement(a.AnalyticsLink,{...l,className:`uef-link ${s}`,analyticsId:p,href:u},o))},p="integration",m=e=>{let{analyticsId:t,children:n,isRtl:r,to:s,...o}=e,l=c(s),d=t?`${p}.${t}`:`${p}.button.link`;return i.createElement(a.AnalyticsJssThemeProvider,{theme:"light",isRtl:r},i.createElement(a.AnalyticsPrimaryButton,{...o,analyticsId:d,href:l,variant:"contained",color:"primary"},n))},h=/^[a-z0-9-]*$/i,g=new Map([["uef--base-nav-button","integration-navigation-button-content themed-background-primary-alt-fill-only theme-border-left-active"],["uef--base-nav-button-v2","integration-navigation-button-content-v2 themed-background-primary-alt-fill-only theme-border-left-active"],["uef--button","button button--primary"],["uef--button--secondary","button button--secondary"]]),f=new Map([["classname",e=>(0,o.PV)(e,g)]]);var b=new class{init(e){this.initializeWhitelist(),this.integrationService.addIntegrationMessageType(s.ul,this.onIntegrationRegistration),this.bbLocalize=e}initializeWhitelist(){o.yW.addGlobalComponent(s.EA.Link,{props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,n)=>i.createElement(u,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",n," "),transformers:f}),o.yW.addGlobalComponent(s.EA.ButtonLink,{props:{to:!0,className:!1},isValid:(e,t)=>!!this.isRouteRegistered(e.props.to,t)||(console.warn(`${e.props.to} has not been registered`),!1),render:(e,t,n)=>i.createElement(m,{...t,isRtl:this.bbLocalize.isRTL(null)}," ",n," "),transformers:f})}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registeredRoutes.values())}getRecordForRoute(e){return Array.from(this.registeredRoutes.values()).find(t=>t.routes.indexOf(e)>=0)}isValidRouteName(e){return h.test(e)}validateBaseNavigationRequest(e){return this.getRecordForRoute(e.routeName)?{type:s.ul,status:s.xR.Failure,error:s.Jg.ExistingRouteName,errorMessage:`${e.routeName} as already been registered`}:this.isValidRouteName(e.routeName)?{type:s.ul,status:s.xR.Success}:{type:s.ul,status:s.xR.Failure,error:s.Jg.InvalidRouteName,errorMessage:`${e.routeName} has invalid characters in it.`}}isRouteRegistered(e,t){var n;let i=null===(n=this.registeredRoutes.get(t))||void 0===n?void 0:n.routes;return!!i&&-1!==i.indexOf(e)}constructor(e){this.integrationService=e,this.onIntegrationRegistration=(e,t)=>{let n=this.validateBaseNavigationRequest(e);if(n.status!==s.xR.Success){this.integrationService.sendMessage(n,t);return}this.registeredRoutes.set(t.id,{integrationId:t.id,routes:[e.routeName],displayName:e.displayName,initialContents:e.initialContents}),this.listeners.forEach(e=>{try{e(this.registeredRoutes.get(t.id))}catch(e){console.error(e)}}),this.integrationService.sendMessage(n,t)},this.registeredRoutes=new Map,this.listeners=new Set}}(r.Z)},555072:function(e,t,n){"use strict";n.d(t,{G2:function(){return a}});var i=n(198022),r=n(740594),s=n(292050),o=n(571447);let a="course.outline.details",l={attributes:o.hj,classNameMappings:new Map(Object.entries({"uef--course-details--element":"element-details","uef--course-details--image":"element-image","uef--course-details--element-card":"element-card","uef--course-details--name":"name","uef--course-details--content":"content","uef--course-details--link":"blue-link","uef--course-details--container":"element-card-container","uef--course-details--menu-container":"select-wrapper content"}))},c={attributes:[...o.hj,"disabled"],classNameMappings:new Map(Object.entries({"uef--button":"button button--primary","uef--button--secondary":"button button--secondary","uef--button--course-details":"element-card","uef--button--disabled":"disabled"})),classNameDefault:"uef--button--classless"};t.ZP=new class{init(){this.integrationService.addIntegrationMessageType(o.eB,this.onIntegrationRegistration),this.initializeWhitelist()}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registrations.values()).map(e=>({selectorData:{},registrationRecord:e}))}initializeWhitelist(){this.componentManager.setCustomWhiteList(a,"div",l),this.componentManager.setCustomWhiteList(a,"button",c)}notifyListeners(e){this.listeners.forEach(t=>{try{t(this.registrations.get(e))}catch(e){console.error(e)}})}hasRegistrationName(e){return Array.from(this.registrations.values()).some(t=>t.registrationName===e)}validateRegistrationRequest(e){return this.hasRegistrationName(e.registrationName)?{type:o.eB,registrationName:e.registrationName,error:o.IK.ExistingRegistration,status:o.OZ.Failure}:{type:o.eB,registrationName:e.registrationName,registrationId:(0,i.v4)(),status:o.OZ.Success}}constructor(e,t){this.registrations=new Map,this.listeners=new Set,this.onIntegrationRegistration=(e,t)=>{let n=this.validateRegistrationRequest(e);if(n.status!==o.OZ.Success){this.integrationService.sendMessage(n,t);return}this.registrations.set(n.registrationId,{integrationId:t.id,registrationId:n.registrationId,registrationName:n.registrationName}),this.notifyListeners(n.registrationId),this.integrationService.sendMessage(n,t)},this.integrationService=e,this.componentManager=t}}(r.Z,s.yW)},302626:function(e,t,n){"use strict";n.d(t,{vf:function(){return a}});var i=n(198022),r=n(740594),s=n(292050),o=n(571447);let a="group.collaboration.tool",l={attributes:[...o.hj,"disabled"],classNameMappings:new Map(Object.entries({"group--collaboration--tool--uef--button":"button super-clear icon"})),classNameDefault:"uef--button--classless"};t.ZP=new class{init(){this.integrationService.addIntegrationMessageType(o.JZ,this.onIntegrationRegistration),this.initializeWhitelist()}onIntegrationAdded(e){return this.listeners.add(e),()=>{this.removeIntegrationAdded(e)}}removeIntegrationAdded(e){this.listeners.delete(e)}getRegisteredRecords(){return Array.from(this.registrations.values()).map(e=>({selectorData:{},registrationRecord:e}))}populateRegisteredRecords(e,t,n,i,r){let s=this.getRegisteredRecords();return s.forEach(s=>{s&&(s.selectorData={courseId:null!=e?e:"",contentId:null!=t?t:"",locale:null!=n?n:"",forumId:null!=i?i:"",groupId:null!=r?r:""})}),s}initializeWhitelist(){this.componentManager.setCustomWhiteList(a,"button",l)}notifyListeners(e){this.listeners.forEach(t=>{try{let n=this.registrations.get(e);n&&t(n)}catch(e){console.error(e)}})}hasRegistrationName(e){return Array.from(this.registrations.values()).some(t=>t.registrationName===e)}validateRegistrationRequest(e){return this.hasRegistrationName(e.registrationName)?{type:o.JZ,registrationName:e.registrationName,error:o.f4.ExistingRegistration,status:o.F7.Failure}:{type:o.JZ,registrationName:e.registrationName,registrationId:(0,i.v4)(),status:o.F7.Success}}constructor(e,t){this.registrations=new Map,this.listeners=new Set,this.onIntegrationRegistration=(e,t)=>{if(e.type===o.JZ&&"registrationName"in e){let n=this.validateRegistrationRequest(e);if(n.status!==o.F7.Success){this.integrationService.sendMessage(n,t);return}n.registrationId&&(this.registrations.set(n.registrationId,{integrationId:t.id,registrationId:n.registrationId,registrationName:n.registrationName}),this.notifyListeners(n.registrationId),this.integrationService.sendMessage(n,t))}},this.integrationService=e,this.componentManager=t}}(r.Z,s.yW)},140442:function(e,t,n){"use strict";var i=n(740594),r=n(262197),s=n(571447),o=n(292050),a=n(442057),l=n(745906);class c extends r.v{init(){this.integrationService.addIntegrationMessageType(s.SC,this.registerAsHelpProvider),this.helpRequestMessenger=this.createMessenger(s.A0,{includeProcessingEvent:!1})}async sendHelp(e,t){await this.helpRequestMessenger.sendMessage({type:s.Fm,eventType:s.A0,helpUrl:t,currentRouteName:this.currentRoute},e)}constructor(e,t,n){super(),this.integrationService=e,this.routeListenerService=t,this.createMessenger=n,this.updateRoute=e=>{this.currentRoute=e},this.registerAsHelpProvider=(e,t)=>{let n=o.aJ.getHelpProvider(e.id);if(!e.id||n){n?console.warn(`Cannot register provider: Provider already exists with an id of ${e.id}`):console.warn("Cannot register provider: no id was specified"),this.integrationService.sendMessage({type:s.SC,id:e.id,status:s.xR.Failure},t);return}let i={iconUrl:e.iconUrl,providerId:e.id,providerType:e.providerType,integrationId:t.id,displayName:e.displayName};o.aJ.addHelpProvider(i),this.integrationService.sendMessage({type:s.SC,id:e.id,status:s.xR.Success,iconUrl:e.iconUrl},t);let r=o.aJ.getProviderByType(s._n.Auxiliary),a=o.aJ.getProviderByType(s._n.Primary);this.$emitEvent(this.helpChangedEvent,{auxiliaryProviders:r,primaryProviders:a})},this.helpChangedEvent="helpChanged",this.routeListenerService.subscribe(this.updateRoute)}}t.Z=new c(i.Z,a.ZP,l.ZP)},909987:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var i=n(740594),r=n(571447),s=n(259197),o=n(669533),a=n(118717),l=n(745906);let c=new class{init(e,t){this.integrationService.addIntegrationMessageType(r.m1,this.registerOriginalityProvider),this.ngRedux=t,this.subscribeToRedux(t),this.localizationService=e,this.integrationService.addIntegrationMessageType(r.m1,this.registerOriginalityProvider),this.saveSettingsMessenger=(0,l.ZP)(r.gQ,{})}subscribeToRedux(e){e.connect(()=>({}),e=>(0,a.DE)({loadSubmissionServices:s.Nwg.submissionServices.loadSubmissionServices,saveSubmissionService:s.Nwg.submissionServices.saveSubmissionService},e))(this)}addIntegration(e){this.listeners.set(e.submissionServicesUniqueHandle,e)}removeIntegration(e){this.listeners.delete(e.submissionServicesUniqueHandle)}async fetchDefaultOriginalityReportSubmissionService(e,t){await this.loadSubmissionServices(e,t);let n=s.Ys.submissionServices.getDefaultOriginalityReportSubmissionService(this.ngRedux.getState(),t);if(n&&(n.uniqueHandle===o.P||this.listeners.get(n.uniqueHandle)))return n}getOriginalityIntegrationByUniqueId(e){return this.listeners.get(e)}constructor(e){this.integrationService=e,this.registerOriginalityProvider=(e,t)=>{if(!e.submissionServicesUniqueHandle){console.warn("Cannot register provider: no submissionServicesUniqueHandle was specified"),this.integrationService.sendMessage({type:r.m1,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:r.xR.Failure,errorMessage:"submissionServicesUniqueHandle should be provided"},t);return}let n={submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,integrationId:t.id};this.addIntegration(n),this.integrationService.sendMessage({type:r.m1,submissionServicesUniqueHandle:e.submissionServicesUniqueHandle,status:r.xR.Success},t)},this.saveOriginalityConfiguration=async(e,t)=>{let n=this.listeners.get(t.uniqueHandle);if(!n)throw Error(`No listener registered for ${t.uniqueHandle}`);try{let s=await this.saveSettingsMessenger.sendMessage({type:r.gQ,contentId:e.id,contentHandle:e.contentHandler.toString(),enabled:t.capabilities.OriginalityReport.enabled},n.integrationId);if(s.success){var i;await this.saveSubmissionService(e.courseId,null===(i=e.getAssociatedGradingColumn())||void 0===i?void 0:i.id,t)}return s}catch(e){return{success:!1,error:this.localizationService.translateSync({key:"course.content.originalityReport.settings.errorSavingSettings",locale:this.localizationService.getAppLocale(),noWrap:!0,params:{integrationDisplayName:t.displayName}})}}},this.listeners=new Map}}(i.Z)},667341:function(e,t,n){"use strict";var i=n(118717),r=n(259197),s=n(571447),o=n(740594),a=n(745906);t.Z=new class{init(e){this.integrationService.addIntegrationMessageType(s.PO,this.registerProctoringProvider),this.correlatedMessenger=(0,a.ZP)(s.Ul,{}),this.ngRedux=e,this.subscribeToRedux(e)}getProctoringIntegration(e){return this.listeners.get(e)}addIntegration(e){this.listeners.set(e.proctoringPlacementHandle,e)}hasIntegration(e){return void 0!==this.getProctoringIntegration(e)}subscribeToRedux(e){e.connect(null,e=>(0,i.DE)({loadProctoringServices:r.Nwg.proctoringServices.loadProctoringServices},e))(this)}async loadAvailableProctoringServices(){return await this.loadProctoringServices(),r.Ys.proctoringServices.getAvailableProctoringServices(this.ngRedux.getState())}async loadAvailableProctoringServicesWithIntegration(){return(await this.loadAvailableProctoringServices()).filter(e=>this.hasIntegration(e.handle))}async loadProctoringService(e){return e?(await this.loadProctoringServices(),r.Ys.proctoringServices.getProctoringServices(this.ngRedux.getState()).find(t=>t.handle===e)):Promise.resolve(void 0)}async promptIntegrationToSaveSettings(e,t,n,i){let r=this.getProctoringIntegration(e);if(!r)throw Error(`No proctoring UEF integration registered for ${e}, or it is currently unavailable.`);return this.correlatedMessenger.sendMessage({type:s.Ul,courseUuid:t,contentId:n,enabled:i,proctoringPlacementHandle:e},r.integrationId)}constructor(e){this.integrationService=e,this.registerProctoringProvider=(e,t)=>{if(!e.proctoringPlacementHandle){console.warn("Cannot register provider: proctoringPlacementHandle was not specified"),this.integrationService.sendMessage({type:s.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:s.xR.Failure,error:s.oi.MissingPlacementHandle,errorMessage:"proctoringPlacementHandle was not provided"},t);return}if(this.hasIntegration(e.proctoringPlacementHandle)){console.warn(`Cannot register provider: ${e.proctoringPlacementHandle} already registered`),this.integrationService.sendMessage({type:s.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:s.xR.Failure,error:s.oi.ExistingRegistration,errorMessage:"proctoringPlacementHandle already registered"},t);return}this.addIntegration({proctoringPlacementHandle:e.proctoringPlacementHandle,integrationId:t.id}),this.integrationService.sendMessage({type:s.PO,proctoringPlacementHandle:e.proctoringPlacementHandle,status:s.xR.Success},t)},this.listeners=new Map}}(o.Z)},745906:function(e,t,n){"use strict";var i=n(740594),r=n(198022);let s={includeProcessingEvent:!0};class o{sendMessage(e,t){return new Promise((n,i)=>{let r=this.generateId(),s=this.createMessageTimeout(r,i);this.integrationService.sendMessage({...e,correlationId:r,timeout:5e3},t),this.activeMessages.set(r,{integrationId:t,timeoutId:s,resolvePromise:n,rejectPromise:i})})}correlatedMessageResponseCallback(e,t){let n=this.getCorrelatedMessage(e,t.id);n&&(this.activeMessages.delete(e.correlationId),window.clearTimeout(n.timeoutId),n.resolvePromise(e))}correlatedMessageProcessingCallback(e,t){let n=this.getCorrelatedMessage(e,t.id);n&&(window.clearTimeout(n.timeoutId),n.timeoutId=this.createMessageTimeout(e.correlationId,n.rejectPromise))}createMessageTimeout(e,t){return window.setTimeout(()=>{this.activeMessages.delete(e);let n=`Correlated message '${e}' timed out`;console.warn(n),t(Error(n))},5e3)}getCorrelatedMessage(e,t){let n=e.correlationId,i=this.activeMessages.get(n);return i?i.integrationId!==t?(console.error(`Correlated message '${n}' does not belong to '${t}'`),null):i:(console.error(`Couldn't find a correlated message with correlation id '${n}'`),null)}constructor(e,t,n,i){this.integrationService=e,this.generateId=t,this.activeMessages=new Map,this.integrationService.addIntegrationMessageType(`${n}:response`,this.correlatedMessageResponseCallback.bind(this)),i.includeProcessingEvent&&this.integrationService.addIntegrationMessageType(`${n}:processing`,this.correlatedMessageProcessingCallback.bind(this))}}t.ZP=(e,t={})=>new o(i.Z,r.v4,e,{...s,...t})},936867:function(e,t,n){"use strict";n.d(t,{HV:function(){return o},e1:function(){return s}});var i=n(464027),r=n(221524);let s="ultra.components.services.event-emitter",o="integration-event-emitter";i.module(s,[]).service(o,class{_triggerForceClick(e){i.element(e).trigger(r.Z.integrationForceClick)}constructor(){this.emitIntegrationEvent=e=>{e.originalEvent||(e.originalEvent=e.originalEvent||{}),e.originalEvent.manualFireFlag||(this._triggerForceClick(e.target),e.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=e=>(e.on("click",this.emitIntegrationEventOnClickHandler),()=>{e.off("click",e.selector,this.emitIntegrationEventOnClickHandler)}),this.emitIntegrationEventOnClickHandler=e=>this.emitIntegrationEvent(e)}})},221524:function(e,t,n){"use strict";var i=n(464027),r=n(658895),s=n(740594),o=n(109504),a=n(571447),l=n(158550),c=n(625506);t.Z=new class{addClickListener(){r.default.unitTesting||(c(document).on("click",this.onClick),c(document).on(this.integrationForceClick,this.onClick))}addHoverListener(){r.default.unitTesting||c(document).on("mouseover",this.onHover)}_sendEventMessage(e,t){e&&this.integrationService.sendEventMessage({type:a.Fm,eventType:t,analyticsId:e})}constructor(e){this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=e=>{if(e.originalEvent&&e.originalEvent.manualFireFlag)return;let t=i.element(e.target),n=(0,o.IK)(t)||(0,o.CY)(t.parent());this._sendEventMessage(n,a.Kj.Click)},this.onHover=e=>{let t=i.element(e.target),n=(0,o.li)(t);n!==this.lastHoverElementId&&(this.lastHoverElementId=n,this._sendEventMessage(n,a.Kj.Hover))},(0,l.subscribeToFramework)("Ultra",(e,t)=>{e===l.AnalyticsEventTypes.CLICK_EVENT?this._sendEventMessage(t.analyticsId,a.Kj.Click):e===l.AnalyticsEventTypes.HOVER_EVENT&&this._sendEventMessage(t.analyticsId,a.Kj.Hover)})}}(s.Z)},740594:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var i=n(276635),r=n(986709),s=n(259197),o=n(473011),a=n(878218),l=n(292050),c=n(571447);class d{constructor(){this.subscribeToEvents=(e,t)=>{e.subscriptions.forEach(e=>{if(!this.checkIfValidSubscription(e)){console.warn(`Received subscription to invalid event type ${e}`);return}let n=this.subscriptions.get(e)||new Set;n.add(t),this.subscriptions.set(e,n);let i=this.subscribeCallbacks.get(e);i&&i.forEach(e=>e(t))})},this.unsubscribeFromEvents=(e,t)=>{e.subscriptions.forEach(e=>{if(!this.subscriptions.has(e)){console.warn(`Integration is not subscribed to ${e}, not unsubscribing`);return}let n=this.subscriptions.get(e);n.delete(t),this.subscriptions.set(e,n);let i=this.unsubscribeCallbacks.get(e);i&&i.forEach(e=>e(t))})},this.onSubscriptionEventCallback=(e,t)=>{let n=this.subscribeCallbacks.get(e)||[];return n.push(t),this.subscribeCallbacks.set(e,n),()=>this.removeCallback(e,t,this.subscribeCallbacks)},this.onUnsubscriptionEventCallback=(e,t)=>{let n=this.unsubscribeCallbacks.get(e)||[];return n.push(t),this.unsubscribeCallbacks.set(e,n),()=>this.removeCallback(e,t,this.unsubscribeCallbacks)},this.getSubscribedIntegrations=e=>this.subscriptions.get(e)||new Set,this.checkIfValidSubscription=e=>Object.values(c.Kj).some(t=>t===e),this.removeCallback=(e,t,n)=>{if(!n.has(e))return;let i=n.get(e);i.splice(i.indexOf(t),1),n.set(e,i)},this.subscriptions=new Map,this.subscribeCallbacks=new Map,this.unsubscribeCallbacks=new Map}}var u=n(442057),p=n(625506),m=new class{async init(e){if(this.window=e,this.document=e.document,this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),null;try{let e=await (0,r.yZB)(s.nPi,{query:{type:r.TK1.UltraUI}});return this.window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.initIntegrationSubscriptionCallbacks(),this.loadIntegrations(e),e}catch(e){return null}}loadIntegrations(e){!e||this.integrations&&this.integrations.size>0||e.results.forEach(e=>{if(e.availability.available!==r.y67.Yes)return;let t=p(`<iframe id="${e.id}" src="${(0,o.uI)(e.launchLink)}"></iframe>`).hide();this.document.body.appendChild(t[0]),this.integrations.set(e.id,{id:e.id,hasAuthorized:!1,iframe:t[0],url:e.url,authScopes:new Set})})}isSafeMode(){return"true"===(0,o.re)("noExtensions",this.window.location.href)}addIntegrationMessageType(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)}addSubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onSubscriptionEventCallback(e,t)}addUnsubscriptionEventCallback(e,t){return this.integrationSubscriptionManager.onUnsubscriptionEventCallback(e,t)}initIntegrationMessageTypes(){this.addIntegrationMessageType(c.RC,this.sendAuthorizedMessage),this.addIntegrationMessageType(c.c9,this.integrationSubscriptionManager.subscribeToEvents),this.addIntegrationMessageType(c.Vd,this.integrationSubscriptionManager.unsubscribeFromEvents)}initIntegrationSubscriptionCallbacks(){this.addSubscriptionEventCallback(c.Kj.PortalNew,e=>{l.hE.getUnownedPortals().forEach(t=>{e.integrationChannel.postMessage({type:c.Fm,eventType:c.Kj.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData})})}),this.addSubscriptionEventCallback(c.Kj.Route,e=>{let t=u.ZP.getCurrentRoute();this.sendMessage({type:c.Fm,eventType:c.Kj.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)})}sendEventMessage(e,t){let n=this.integrationSubscriptionManager.getSubscribedIntegrations(e.eventType);n&&(t?[this.findIntegration(t)]:n).forEach(t=>{t&&this.sendMessage((0,a.H)(e),t)})}findIntegration(e){return this.integrations.get(e)}sendMessage(e,t){((0,i.isString)(t)?this.findIntegration(t):t).integrationChannel.postMessage((0,a.H)(e))}constructor(){this.helloMessageListener=e=>{var t,n,i;let r=Array.from(this.integrations.values()).find(t=>t.iframe.contentWindow===e.source);if(!r&&(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.type)!==c.j6)return;if((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.type)!==c.j6){console.warn(`Received unexpected postMessage. Expected event type [${c.j6}], but got [${null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.type}] instead`,e);return}if(!r){console.warn("Could not find a valid integration for message -- did the event come from an unexpected frame?");return}let s=(0,o.SV)(r.url);if((0,o.SV)(r.url)!==e.origin){console.warn(`Message came from origin [${e.origin}], but we were expecting [${s}]. Authorization requests must come from the same origin that was configured in the LTI placement.`);return}let a=new MessageChannel;r.integrationChannel=a.port1,r.integrationChannel.onmessage=e=>{this.onIntegrationMessage(e.data,r)},r.iframe.contentWindow.postMessage({type:c.j6},e.origin,[a.port2])},this.onIntegrationMessage=(e,t)=>{if(!e)return;let n=l.Md.authScopes.get(e.type);if(n&&!n(e,t))return;let i=this.integrationMessageEvents.get(e.type);i?i(e,t):console.warn(`No valid method to call with provided event type ${e.type}.`)},this.sendAuthorizedMessage=async(e,t)=>{if(!e||!e.token)return this.sendAuthorizationError(t,"Received authorized message without token");let n=e.token;try{let e=await (0,s._Ae)(n);if(null==e.scope){let e=`Could not authenticate, no auth scopes provided for ${t}`;return this.sendAuthorizationError(t,e)}let i=new Set(e.scope.split(/\s+/));this.checkPremiumAccess(t,i),t.authScopes=i,t.integrationChannel.postMessage({type:c.RC})}catch(s){let e=s.error&&s.error.error,n="invalid_request"===e,i=s.error&&s.error.error_description,r=n?"Expired or invalid token.":`Server side error occurred: ${e}, ${i}`;return this.sendAuthorizationError(t,r)}},this.checkPremiumAccess=(e,t)=>{t.has(c.hq)||this.sendAuthorizationError(e,"This integration does not have UEF access enabled.")},this.sendAuthorizationError=(e,t)=>{let n={type:c.Mi,errorInformation:t};this.sendMessage(n,e),this.removeIframe(e)},this.removeIframe=e=>{this.document.body.querySelector(`#${e.iframe.id}`).remove()},this.sendRouteEvent=e=>{let t=u.ZP.getCurrentRoute();this.sendMessage({type:c.Fm,eventType:c.Kj.Route,routeName:t.currentRouteName,routeData:t.currentParams},e)},this.integrations=new Map,this.integrationMessageEvents=new Map,this.integrationSubscriptionManager=new d}}},553374:function(e,t,n){"use strict";n.d(t,{H:function(){return o},e:function(){return s}});var i=n(464027),r=n(658895);let s="ultra.services.interval",o="interval";i.module(s,[]).factory(o,["$interval",e=>{let t=(t,n,i,s,o)=>{if(!r.default.production&&i<5e3&&!s&&(null==o||o)){if(i<1e3)throw Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+Error().stack)}let a=e(t,i,s,o);return a.__bb_unregister_scope_destroy__=n.$on("$destroy",()=>{e.cancel(a)}),a};return t.cancel=t=>{t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},888917:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),r=n(302032),s=n(891886),o=n(905620),a=n(812479),l=n(808361);function c(e,t){return function(n,i){t(n,i,e)}}let d="ultra.service.context.landingPage",u="landingPageService",p="base.recentActivity";class m{navigateToLandingPage(){return this.convertLandingPageToRoute().then(e=>this.ultraState.go(e))}convertLandingPageToRoute(){return this.currentUser.userModel.$asPromise().then(e=>{switch(e.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return this.getInstitutionPageRoute();case"CourseList":return"base.courses";default:return p}})}getInstitutionPageRoute(){let e=this.$q.defer(),t=this.$timeout(()=>e.resolve(p),6e3);return this.institutionApi.getHealth().then(()=>this.institutionApi.getEffectiveVariantIdWithPermissions()).then(({canEdit:e,canView:t})=>e?"base.institution-page-admin":t?"base.institution-page":p).catch(()=>p).then(n=>{this.$timeout.cancel(t),e.resolve(n)}),e.promise}constructor(e,t,n,i,r,s){this.$q=e,this.$timeout=t,this.currentUser=n,this.preferences=i,this.institutionApi=r,this.ultraState=s}}m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([c(0,(0,r.tB)("$q")),c(1,(0,r.tB)("$timeout")),c(2,(0,r.tB)(s.HV)),c(3,(0,r.tB)(o.HV)),c(4,(0,r.tB)(a.HV)),c(5,(0,r.tB)(l.HV))],m),i.module(d,[s.e1,o.e1,a.e1,l.e1]).service(u,m)},261015:function(e,t,n){"use strict";n.d(t,{Dh:function(){return s},Q2:function(){return o},ks:function(){return r}});var i=n(276635);let r="learnApiCacheMessageService";class s{constructor(){this.listen=i.noop,this.clearCache=i.noop}}class o{constructor(e){this.$rootScope=e,this.init=()=>{this.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=()=>this.$rootScope.$on("$stateChangeStart",(e,t,n,i)=>{-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(i.name)&&this.clearCache()}),this.clearCache=e=>this.cacheServiceCallback({type:"clear",pattern:e}),this.listen=e=>{this.cacheServiceCallback=e},this.init()}}o.$inject=["$rootScope"]},145394:function(e,t,n){"use strict";n.d(t,{e:function(){return S}});var i=n(276635),r=n(261015);let s="learnApiCacheService",o="learnApiCache.CacheRules",a=["DELETE","PUT","POST","PATCH","JSONP"],l="/learn/api/v1",c="_\\d+_\\d+";function d(e=""){return Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}let u="ultra-session-event-existing-window",p="ultra-session-event-new-window",m="ultra-session-updating-storage",h=e=>[u,p].some(t=>t===e.key),g=e=>{if(e.newValue){if(e.key===u)null==window.sessionStorage.getItem(m)&&(window.sessionStorage.setItem(m,"updating"),setTimeout(()=>{window.localStorage.setItem(p,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(p),window.sessionStorage.removeItem(m)})),window.localStorage.setItem(p,JSON.stringify(window.sessionStorage));else if(e.key===p&&!window.sessionStorage.length){let t=JSON.parse(e.newValue);for(let e of Object.keys(t))window.sessionStorage.setItem(e,t[e])}}},f=()=>(window.addEventListener("storage",g,!1),()=>{window.removeEventListener("storage",g)}),b=()=>{localStorage.setItem(u,u),localStorage.removeItem(u)};var v=n(658895);let y="ultra.components.services.learn.api.cacheRules",S="ultra.components.services.learn.api.cache";angular.module(y,[]).constant(o,new class{constructor(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:`courses/${c}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${c}`,methods:a,onUpdate:(e,t)=>{t(/users\/.*/)}},{url:`courses/${c}/contents/${c}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/contents/ROOT/children`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/convertToUltra/conversionStatus`,methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/convertToUltra`),r=n.match(i);t(RegExp(`courses/${r[1]}`))}},{url:`courses/${c}/tools`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${c}/assessments/${c}/questions`,methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:`courses/${c}/discussionboards/default/forums/${c}/messages/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/discussionboards/default/forums/(${c})`),r=n.match(i);t(RegExp(`courses/${r[1]}/discussionboards/default/forums/${r[2]}/messages`))}},{url:`courses/${c}/gradebook/attempts/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook`),r=n.match(i);t(RegExp(`courses/${r[1]}/gradebook/.*`))}},{url:`courses/${c}/gradebook/attempts/${c}/assessment/answers/${c}/grades`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook`),r=n.match(i);t(RegExp(`courses/${r[1]}/gradebook/.*`))}},{url:`courses/${c}/gradebook/columns/${c}`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/grades`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/grades/${c}/attempts`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/columns/${c}/.+`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook/columns/(${c})`),r=n.match(i);t(RegExp(`courses/${r[1]}/gradebook/columns/${r[2]}/.*`)),t(RegExp(`courses/${r[1]}/memberships.*`))}},{url:`courses/${c}/gradebook/columns/${c}/summary`,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:`courses/${c}/gradebook/grades/bulkView`,methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:`courses/${c}/gradebook/groupAttempts/${c}/activities`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/gradebook/groupAttempts/(${c})`),r=n.match(i);t(RegExp(`courses/${r[1]}/gradebook/groupAttempts/${r[2]}/.*`)),t(RegExp(`courses/${r[1]}/gradebook/columns/.*`))}},{url:`courses/${c}/memberships/${c}`,methods:a,onUpdate:(e,t)=>{let n=e.url,i=RegExp(`courses/(${c})/memberships`),r=n.match(i);t(RegExp(`courses/${r[1]}.*`)),t(RegExp(`users/${c}/memberships`))}},{url:`courses/${c}/memberships`,methods:["GET"],duration:this.cacheTimes.SHORT},{url:`courses/${c}/users/${c}`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`courses/${c}/telemetry/reports/activityVsGrade`,methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:`courses/${c}/preferences/.*`,methods:a,duration:this.cacheTimes.DO_NOT_CACHE,onUpdate:(e,t)=>{t(RegExp(`courses/${c}/telemetry/reports/activityVsGrade`))}},{url:`users/${c}`,methods:a,onUpdate:(e,t)=>{t(/users\/.*/)}},{url:`users/(?:me|${c})`,methods:["GET"],duration:this.cacheTimes.LONG},{url:`users/${c}/memberships`,methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]}});let C=angular.module(S,[y]);v.default.features.learnApiCaching?C.provider(s,[o,class{getRule(e,t){return this.requestCachingRules.find(n=>{let i=n.urlRegex?n.urlRegex:RegExp(n.url+"$","i");return n.methods.indexOf(t.toUpperCase())>-1&&i.test(e)})}handleRequest(e){return this.resolveCachedEntry(e)||e}handleResponse(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;let t=e.config.method.toUpperCase(),n=e.config.url,i=this.getRule(n,t),r=this.makeKeyFromResponse(e);return i&&!this.requestCache.has(r)&&this.insertCacheEntry({...e},i.duration),this.resolveEasing(e),e}getCacheEntry(e){let t;let n=this.makeKeyFromRequest(e),i=this.lookupExpandedCacheEntry(e);if(i?t=i:this.requestCache.has(n)&&(t=this.requestCache.get(n)),t){if(!this.isCacheExpired(t))return t;this.removeCacheEntries(t.baseUrl)}return{}}getCleanUrl(e){return e.slice(e.indexOf(l)+l.length+1)}insertCacheEntry(e,t){let n=this.makeKeyFromResponse(e),i=e.config.url,r={documentUrl:URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),baseUrl:i,fetchedAt:Date.now(),ttl:t};if(this.requestCache.set(n,r),e.config.params&&e.config.params.expand){let t=e.config.params.expand;if(this.cachedExpandedRequests.has(i)){let e=this.cachedExpandedRequests.get(i);this.cachedExpandedRequests.set(i,[...e,{cacheKey:n,expand:t}])}else this.cachedExpandedRequests.set(i,[{cacheKey:n,expand:t}])}}getEffectiveTTL(e){return this.cachingEnabled?e.ttl:Math.min(this.cacheRules.cacheTimes.INSTANT,e.ttl)}isCacheExpired(e){return Date.now()>e.fetchedAt+this.getEffectiveTTL(e)}isApiUrl(e){return e.indexOf(l)>-1}lookupExpandedCacheEntry(e){let t=e.url,n=e.params;if(n&&n.expand&&this.cachedExpandedRequests.has(t)){let e=this.cachedExpandedRequests.get(t).find(e=>{let t=n.expand.split(","),r=e.expand.split(",");return!i.difference(t,r).length});if(e)return this.requestCache.get(e.cacheKey)}}makeKeyFromRequest(e){let t=this.getCleanUrl(e.url);e.params=e.params||{};let{fields:n,expand:i,...r}=e.params,s=d(n);return JSON.stringify({url:t,expand:d(i),fields:s,rest:r})}makeKeyFromResponse(e){return this.makeKeyFromRequest(e.config)}resolveCachedEntry(e){if(e.url.match(/^blob/))return e;let t=this.getCacheEntry(e);return t&&t.documentUrl?{...e,url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}:e}resolveEasing(e){let t=this.makeKeyFromResponse(e),n=this.queuedRequests.get(t);if(n){let t=this.resolveCachedEntry(e.config);n.pendingRequestConfig.resolve(t)}}constructor(e){this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=()=>{this.cachingEnabled=!1},this.$get=["$q","$log",r.ks,function(e,t,n){n.listen(e=>{"clear"===e.type&&this.removeCacheEntries(e.pattern||".*")});let i=n=>{let i=this.makeKeyFromRequest(n);if(!this.queuedRequests.has(i)){let t=e.defer();return t.promise.finally(()=>{this.queuedRequests.delete(i)}),this.queuedRequests.set(i,{pendingRequestConfig:t}),e.resolve(n)}return t.info(`Easing ${i}`),this.queuedRequests.get(i).pendingRequestConfig.promise};return{request:e=>{if("GET"!==e.method||!this.isApiUrl(e.url)||e.cache)return e;let t=this.handleRequest(e);return t.url.match(/^blob/)?t:i(t).then(e=>e)},requestError:n=>(t.error("requestError: ",n),e.reject(n)),response:e=>{if(e.config.url.match(/^blob/)){let t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return"GET"!==e.config.method||!this.isApiUrl(e.config.url)||e.config.cache?e:this.handleResponse(e)},responseError:t=>{if(!t||!t.config)return e.reject(t);let n=this.makeKeyFromResponse(t);return this.queuedRequests.has(n)&&this.queuedRequests.get(n).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=e=>{this.requestCache.forEach((t,n)=>{(e instanceof RegExp?e:RegExp(`${e}$`)).test(t.baseUrl)&&(this.requestCache.delete(n),this.cachedExpandedRequests.delete(t.baseUrl),this.queuedRequests.has(n)&&(this.queuedRequests.get(n).pendingRequestConfig.reject(`Canceled Easing: ${n}`),this.queuedRequests.delete(n)),URL.revokeObjectURL(t.documentUrl))})},this.requestCachingRules=e.rules,setInterval(()=>{this.requestCache.forEach(e=>{this.isCacheExpired(e)&&this.removeCacheEntries(e.baseUrl)})},this.cacheRules.cacheTimes.MEDIUM)}}]).service(r.ks,r.Q2).config(["$provide","$httpProvider","learnApiCacheServiceProvider",(e,t,n)=>{window.addEventListener("storage",e=>{h(e)&&n.disableCaching()}),f(),b(),e.decorator("$http",["$delegate",e=>{let t=function(t){if(null!=t.cache)return e(t);let i=n.getRule(t.url,t.method.toUpperCase());return i&&i.onUpdate&&"function"==typeof i.onUpdate&&i.onUpdate(t,n.removeCacheEntries),-1!==a.indexOf(t.method.toUpperCase())&&n.removeCacheEntries(t.url),e(t)};return function(...e){i.each(e,function(e){t[e]=function(n,i){return t(angular.extend({},i||{},{method:e,url:n}))}})}("delete","get","head","jsonp"),function(...e){i.each(e,function(e){t[e]=function(n,i,r){return t(angular.extend({},r||{},{method:e,url:n,data:i}))}})}("post","put","patch"),function(...n){i.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get(){return e[n]},set(t){e[n]=t}})})}("defaults","pendingRequests"),t}]),URL&&Object.prototype.hasOwnProperty.call(URL,"createObjectURL")&&t.interceptors.push(s)}]):C.provider(s,[class{constructor(){this.$get=[function(){return{}}]}}]).service(r.ks,r.Dh)},601983:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return o}});var i=n(464027),r=n(658895),s=n(637638);let o="ultra.services.logger",a="logger";class l{logToServer(e,t,n){if(e){let i="string"==typeof e?Error(e):e,s={applicationId:r.default.telemetryAppId,component:"",message:i.message,data:n,cause:i.stack,level:t};s.cause||(s.cause="Stack trace is unavailable"),this.queue.enqueue(()=>this.$http.post(r.default.telemetryApiBasePath+"/v1/browser/logs",s,{timeout:r.default.telemetryApiTimeoutMS}).catch(e=>{console.error("Failed to send logs to server. \nResponse: "+e+" Status: "+e.status)}))}else console.error("Unable to send empty log entry to server")}debug(e,t){this.logToServer(e,"debug",t)}info(e,t){this.logToServer(e,"info",t)}error(e,t){this.logToServer(e,"error",t)}critical(e,t){this.logToServer(e,"critical",t)}warn(e,t){this.logToServer(e,"warn",t)}constructor(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}}l.$inject=["$http",s.HV],i.module(o,[s.e1]).service(a,l)},196409:function(e,t,n){"use strict";n.d(t,{HV:function(){return N},e1:function(){return L}});var i=n(276635),r=n(464027),s=n(555840),o=n(825986),a=n(523827),l=n(860995),c=n(676954),d=n(65783),u=n(14454),p=n(808361),m=n(12838),h=n(473011),g=n(891886),f=n(860870),b=n(788815),v=n(289319),y=n(411832),S=n(480489),C=n(610624),E=n(986709),I=n(144958),w=n(563060),A=n(845882),k=n(789423),T=n(259197),P=n(740594),D=n(571447),x=n(302032);function R(e,t){return function(n,i){t(n,i,e)}}let L="ultra.components.services.lti",N="lti";class ${getDomainConfigStatusType(e){let t=this.service.getDomainConfigStatusType(e);return t?t.toString():null}getPlacements(e,t=!1){return(0,k.h)(this.service.getPlacements(e,t))}async ltiLaunch({courseId:e,contentId:t,content:n,showPreLaunchPanel:i}){return this.service.ltiLaunch({courseId:e,contentId:t,content:n,showPreLaunchPanel:i})}constructor(e){this.service=e,this.key=o.fz.Lti}}class O{get contentReviewState(){var e;return null!==(e=this.currentContentReviewState)&&void 0!==e?e:E.aql.None}connectToRedux(){this.$ngRedux.connect(e=>({currentContentReviewState:T.Ys.contentReviewState.getContentReviewStateForContextUser(e,this.currentContent.contentId)}))(this)}configureAndInitInlineLaunch(e,t){var n;let i=this.$q.defer(),r=this.contextCourse.courseId||this.$stateParams.courseId,s=null!==(n=this.$stateParams.contentId)&&void 0!==n?n:this.$stateParams.id,o=(0,I.Ic)({bbFileData:e,courseId:r,contentId:s});if(o.linkType){if(!m.GQ.ExternalLink.isEqualTo(o.linkType)&&t&&t.preventDefault(),o.linkRefId)return this.ltiLaunch(o)}else i.reject({errorMessage:"Failed to render the iframe from src"});return i.promise}getPlacements(e,t=!1){if(t)return this.PlacementModel.$search(e).$asPromise();let n=this.placementsCache.get(r.toJson(e||{}));return n||(n={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(r.toJson(e||{}),n)),n.promise}getAvailablePlacements(e,t=!1){return this.getPlacements(e,t).then(e=>e.filter(e=>e.isAvailable()))}ltiLaunch(e){let t;let n=this.$q.defer();if(e.gradeDetail&&T.u$1.PartnerCloud.isEqualTo(e.gradeDetail.column.scoreProviderHandle)){var r;t=(null===(r=e.gradeDetail.ui)||void 0===r?void 0:r.attempt)?e.gradeDetail.ui.attempt.groupAttemptId?e.gradeDetail.ui.attempt.groupAttemptId:e.gradeDetail.ui.attempt.id:e.gradeDetail.lastAttemptId,this._getMembership(e.courseId).then(i=>{let r=(0,A.YD)({gradableItemId:e.gradeDetail.column.id,courseId:e.gradeDetail.column.courseId,attemptId:t,membershipId:i.id,linkId:e.gradeDetail.column.linkId});this.launch(r,!0),n.resolve()})}else this.$q.all([this.entitlement.hasCourseEntitlement(m.lP.ViewAdmin,e.courseId),this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId)]).then(([t,r])=>{if(!r||!e.showPreLaunchPanel||t)return this._ltiLaunch(i.merge(e,{content:r})).then(n.resolve,n.reject);this._getMembership(e.courseId).then(t=>{if(!(this._isGradable(r)&&this._isStudentInCourse(t)))return this._ltiLaunch(i.merge(e,{content:r})).then(n.resolve,n.reject);this.stateService.goPeekState(w.UM.LTI_LAUNCH,{courseId:r.courseId,contentId:r.id}).then(()=>{e.showPreLaunchPanel||this.markCompleted(r.id,r.courseId,r),n.resolve()}).catch(e=>{n.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})})})}).catch(e=>{n.reject({errorMessage:"Failed to get entitlement or course content",errorResponse:e})});return n.promise}markCompleted(e,t,n){return(n?this.$q.resolve(n):this._getContent(t,null,e,null,null)).then(e=>{var t;return(this.currentContent.setCurrentContent(e),e&&(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState)&&e.state!==E.aql.Completed&&e.inSequence)?e.updateState(E.aql.Completed,!0):e})}launch(e,t=!1,n,i,r){e=h.uI(e),e=h.Ou(e,"from_ultra","true");let s=h.hi(e),o=this.contextCourse.courseId||this.$stateParams.courseId||s.course_id,a=this.$stateParams.contentId||this.$stateParams.id||s.content_id||s.parentId;if(t){var l,c;return P.Z.sendEventMessage({type:D.Fm,eventType:D.Kj.LtiLaunch,launchData:{courseId:o,coursesOrOrganizations:(null===(c=this.contextCourse)||void 0===c?void 0:null===(l=c.course)||void 0===l?void 0:l.isOrganization)?"organizations":"courses",isLaunchedInNewWindow:!0,toolHref:e}}),this.$window.open(e),this.timeout(()=>this.markCompleted(a,o),this.$rootScope,3e3),"lti-service: Link was launched in a new window."}return n?e:(i?this.stateService.goPeekState(w.UM.LTI_LAUNCH_PEEK,{toolHref:e,courseId:o,contentId:a}).then(()=>{r&&this.stateService.goPeekState(w.UM.LTI_EDIT_CLOUD_DOCUMENT)}):this.stateService.goPeekState(w.UM.LTI_LAUNCH_FRAME,{toolHref:e}),this.timeout(()=>this.markCompleted(a,o),this.$rootScope,3e3),"lti-service: Link was launched in a peek panel.")}_ltiLaunch(e){let t;if(e.content){t=this.getLaunchLinkFromContent(e.content);let n=this.getDomainConfigStatusType(e.content);if(!t){if(n&&s.ov.gM.NeedsApproval===n){let t=this.$rootScope.$new();return t.email=this._getSupportEmail(e.content),t.hasEmail=!!t.email,this.modalService.open({scope:t,template:f,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content/course-content")]}}),this.$q.resolve()}return this.$q.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}if(void 0!==this.placementExists(e.content)&&!this.placementExists(e.content)||!T.ddT.isAssociatedDeploymentApproved(e.content))return this.$q.reject({errorMessage:"The placement of this LTI Link does not exist"})}else t={link:this._getLaunchLinkFromLinkRef(e)};return this._initLaunchTarget(i.merge(e,{launchLink:t}))}_initLaunchTarget(e){let t=(0,I.Rl)(e.linkRefId);if(e.content)return this._launchFromContent(e.content,e.launchLink,t,e.launchSettings);if(m.GQ.LtiPlacement.isEqualTo(e.linkType))return this._getPlacementById(e.linkRefId).then(t=>{let n=e.launchLink.link,i=t.launchInNewWindow;return h.eY(t.url)||(n=h.Ou(n,"target_override","window"),i=!0),E.TK1.ContentItemMessage===t.type&&(m.i3.Inline!==this.$stateParams.mode?(this.$stateParams.position&&(n=h.Ou(n,"position",this.$stateParams.position)),this.$stateParams.parentId&&(n=h.Ou(n,"content_id",this.$stateParams.parentId)),n=h.Ou(n,"inline","false")):(n=h.Ou(n,"inline","true"),this.$stateParams.id&&(n=h.Ou(n,"content_id",this.$stateParams.id)))),this.launch(n,i)},()=>this.launch(e.launchLink.link));if(m.GQ.PartnerCloud.isEqualTo(e.linkType))return this.PartnerSettingsModel.getSettingsById(t).then(t=>this.launch(e.launchLink.link,!t.responsive));if(m.GQ.LtiLink.isEqualTo(e.linkType)){let t=e.launchLink.link;return!e.launchInNewWindow&&e.url&&h.eY(e.url)?this.$q.resolve(this.launch(t,!1,e.renderAsEmbed)):this.$q.resolve(this.launch(t,!0))}}_launchFromContent(e,t,n,i){let r=e.contentHandler;if(m.GQ.LtiPlacement.startsWith(r)||m.GQ.LtiLink.isEqualTo(r)){let n=T.fq8.CloudDocument===e.contentDetail[r.toString()].itemOrigin;return this.$q.resolve(this.launch(t.link,t.launchNewWindow,!1,n,i))}if(m.GQ.PartnerCloud.isEqualTo(r)){let i=e.contentDetail;return!n&&i&&i[m.GQ.PartnerCloud.handle]&&(n=i[m.GQ.PartnerCloud.handle].providerId),this.PartnerSettingsModel.getSettingsById(n).then(e=>this.launch(t.link,!e.responsive))}}getLaunchLinkFromContent(e){return(0,I.Qk)(e)}_getPlacementById(e){let t=this.placementCache.get(e);return t||(t={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then(()=>{this.placementCache.put(e,t)}),t.promise}_getLaunchLinkFromLinkRef(e){return(0,I.Mo)(e)}getDomainConfigStatusType(e){var t,n,i;return(null===(i=e.contentDetail)||void 0===i?void 0:null===(n=i[e.contentHandler.toString()])||void 0===n?void 0:null===(t=n.domainConfig)||void 0===t?void 0:t.statusType)?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null}ltiToolProviderExists(e){var t,n;return null===(n=e.contentDetail)||void 0===n?void 0:null===(t=n[e.contentHandler.toString()])||void 0===t?void 0:t.existsLTIProvider}placementExists(e){var t,n;return null===(n=e.contentDetail)||void 0===n?void 0:null===(t=n[e.contentHandler.toString()])||void 0===t?void 0:t.existsPlacement}ltiEditColumn(e){this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then(t=>{e.ui.content=t;let n=a.dI.create(t).getEditState();this.stateService.goPeekState(n,{id:t.id})})}isLTILink(e){return null!=e.scoreProviderHandle&&(T.u$1.PartnerCloud.isEqualTo(e.scoreProviderHandle)||T.u$1.LTILink.isEqualTo(e.scoreProviderHandle))}populateNewPlacement(e,t){let n=s.courseContent.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=E.hbA.Hidden,e.contentHandler=new s.courseContent.ContentHandler(n,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[n]={},e.title=t.name.trim().substr(0,333),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,250))}_isStudentInCourse(e){return e.isStudentMembership()}_isGradable(e){return!!e&&!!e.contentDetail&&!!e.contentDetail[e.contentHandler.toString()]&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn}_getContent(e,t,n,i,r){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():r&&m.GQ.PartnerCloud.isEqualTo(i)?this.PartnerContentIdModel.getContentIds(e,r).then(t=>t.contentIds&&t.contentIds.length>0?this.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():this.$q.when(null)):this.$q.when(null)}_getMembership(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}_getSupportEmail(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null}convertInlineLTILinkToBbMLLink(e){return e.map(e=>{let t=e.data;if(m.GQ.LtiLink.isEqualTo(e.data.linkType)){var n,s;(null===(s=e.data)||void 0===s?void 0:null===(n=s.target)||void 0===n?void 0:n.toLowerCase())==="iframe"&&(t.bbtype="embedded-app",e.data.height&&(t.height=e.data.height),e.data.width&&(t.width=e.data.width),delete t.target),t.linkRefUuid||(t.linkRefUuid=(0,C.V)())}let o={type:r.isDefined(t)&&!m.GQ.ExternalLink.isEqualTo(t.linkType)?"lti":"external",title:e.title,url:"",data:i.escape(r.toJson(r.isDefined(t)?t:{}))};return r.isDefined(t)&&m.GQ.ExternalLink.isEqualTo(t.linkType)&&(o.url=t.url),o})}isEmbeddedGradable(e){let t=!1;return e.forEach(e=>{e.data.gradable&&(t=!0)}),t}isGradableContentStarted(){return this.currentContent.content&&this._isGradable(this.currentContent.content)&&this.contentReviewState===E.aql.Started}returnToContentState(){let e=this.stateService.current.name.split(".peek."),t=1;e.length>2&&(t=e[e.length-2]===w.cw.CONTENT_MARKET?2:1);let n=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(n)}_registerEmbedLinkEventHandler(e,t){this.postMessageDispatcherService.registerEventHandler("embedded-links",(t,n)=>{window!==n&&n.close(),this.returnToContentState();let i=t=>{e(this.convertInlineLTILinkToBbMLLink(t).map(e=>({data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title})))};this.isEmbeddedGradable(t.items)?this.showEmbeddedNotGradableModal(i,t.items):i(t.items)},t,!0)}getOpenContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState(w.cw.CONTENT_MARKET,{mode:"inline"})}}getOpenSystemContentMarketConf(e){return t=>{this._registerEmbedLinkEventHandler(t,e),this.stateService.goPeekState("system-content-market",{mode:"inline"})}}getEditorPluginOptions(e){return{getEmbedSrc:this.configureAndInitInlineLaunch.bind(this),openContentMarket:this.getOpenContentMarketConf(e)}}getYoutubeEditorPluginOptions(){return{courseId:this.contextCourse.courseId,getEmbedSrc:this.configureAndInitInlineLaunch.bind(this)}}showEmbeddedNotGradableModal(e,t){let n=this.$rootScope.$new(!0),i=this.modalService.open({scope:n,template:b,resolve:{translations:[c.serviceName,e=>e.loadBundle("features/course/content-market/content-market")]}});n.dismissCallback=()=>{e(t),i.dismiss()}}constructor(e,t,n,i,r,s,a,l,c,d,u,p,m,h,g,f,b,v,y){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=r,this.$ngRedux=s,this.contextCourse=a,this.bbLocalize=l,this.modalService=c,this.postMessageDispatcherService=d,this.stateService=u,this.CourseModel=p,this.PartnerContentIdModel=m,this.PartnerSettingsModel=h,this.PlacementModel=g,this.contextUser=f,this.currentContent=b,this.entitlement=v,this.timeout=y,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=r.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=r.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),(0,o.gM)(new $(this)),this.connectToRedux()}}O=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([R(0,(0,x.tB)("$q")),R(1,(0,x.tB)("$rootScope")),R(2,(0,x.tB)("$stateParams")),R(3,(0,x.tB)("$window")),R(4,(0,x.tB)("DSCacheFactory")),R(5,(0,x.tB)("$ngRedux")),R(6,(0,x.tB)(l.HV)),R(7,(0,x.tB)(c.serviceName)),R(8,(0,x.tB)(d.HV)),R(9,(0,x.tB)(u.HV)),R(10,(0,x.tB)(p.HV)),R(11,(0,x.tB)(s.N7.H)),R(12,(0,x.tB)(s.YM.H)),R(13,(0,x.tB)(s.km.H)),R(14,(0,x.tB)(s.Ki.H)),R(15,(0,x.tB)(g.HV)),R(16,(0,x.tB)(v.HV)),R(17,(0,x.tB)(y.HV)),R(18,(0,x.tB)(S.H))],O),r.module(L,[l.e1,u.e1,p.e1,v.e1,s.e1]).service(N,O).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},706551:function(e,t,n){"use strict";n.d(t,{HV:function(){return s},e1:function(){return r}});var i=n(464027);let r="ultra.services.messaging",s="crossWindowMessaging";class o{_onMessage({data:e}){this.$rootScope.$broadcast(e.type,e.message)}postMessage(e,t){this.broadcastChannel.postMessage({type:e,message:t})}constructor(e){this.$rootScope=e,this.broadcastChannel=new BroadcastChannel("ultra.crossWindowMessagingService"),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",()=>{this.broadcastChannel.close(),this.broadcastChannel.removeEventListener("message",this.onMessage)})}}o.$inject=["$rootScope"],i.module(r,[]).service(s,o)},233090:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(464027),r=n(302032),s=n(411832),o=n(808361),a=n(363411),l=n(776517),c=n(12838),d=n(563060),u=n(259197);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultraUi.components.services.mobileEventHandlerService",h="mobileEventHandlerService";class g{registerHandler(e){(0,l.Dd)()&&this.featureFlagService.createWaiter(u.x40.CourseSettingsConsole).then(t=>{let n=this.entitlementService.isEntitled(c.s7.ViewCourseSettingsConsole),i={type:e,status:l.rJ.Success,permission:{showCourseSettingsPanel:t&&n}},r=(0,l.Rw)(i);this.correlationIds[e]=r.correlationId,r.response.subscribe(e=>{e.event===l.tw.OpenCourseSettings&&this.ultraStateService.goPeekState(d.Z5.Course.SETTINGS)})})}clearHandler(e){this.correlationIds[e]&&((0,l.GS)(this.correlationIds[e]),delete this.correlationIds[e])}constructor(e,t,n){this.featureFlagService=e,this.entitlementService=t,this.ultraStateService=n,this.correlationIds={}}}g=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,r.tB)(a.HV)),p(1,(0,r.tB)(s.HV)),p(2,(0,r.tB)(o.HV))],g),i.module(m,[]).service(h,g)},65783:function(e,t,n){"use strict";n.d(t,{e1:function(){return h},HV:function(){return g}});var i=n(464027),r=n(786430),s=n(842891),o=n(714762),a=n(883447),l=n(371607),c=n(687102),d=n(823513),u=n(311822);class p{get started(){return this._started}set started(e){this._started=e,this.startedCallback&&this.startedCallback(e)}start(){u.gk.getInstance().addOnModalDisplayingChanged(this.onReactModalChanged),this.modalStackedMap.addTopListener(this.onAngularModalChanged)}onStateChanged(e){this.startedCallback=e}updateGuidanceState(){this.started=!this.hasReactModal&&!this.hasAngularModal}constructor(e){this.modalStackedMap=e,this.hasAngularModal=!1,this.hasReactModal=!1,this._started=!0,this.onReactModalChanged=e=>{this.hasReactModal=e,this.updateGuidanceState()},this.onAngularModalChanged=e=>{this.hasAngularModal=!!e,this.updateGuidanceState()},d._k.addWatcher(this)}}var m=n(625506);let h="mm.foundation.modal",g="$modal";i.module(h,[r.e1]).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:l,link(n){n.animate=!1,t(function(){n.animate=!0}),n.close=function(t){let n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:c,link(e,n,i){e.windowClass=i.windowClass||"",t(function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].querySelector("div").focus()})}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope",r.HV,s.HV,function(e,t,n,r,s,l,c){let d,u;let p="modal-open",h=a.Z,g={};function f(){let e=-1,t=h.keys();for(let n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function b(e,t){let i=n.find("body").eq(0),r=h.get(e).value;h.remove(e),v(r.modalDomEl,r.modalScope,300,function(){r.modalScope.$destroy(),i.toggleClass(p,h.length()>0),function(e){if(d&&-1===f()){let t=u;v(d,u,150,function(){t.$destroy(),t=null,e()}),d=void 0,u=void 0}else e()}(t),c.revertAccessibilityHandling()})}function v(e,n,i,r){let s=t(a,i);function a(){!a.done&&(a.done=!0,e.remove(),r&&r())}o.q(e,function(){t.cancel(s),a(),n.$apply()}),n.animate=!1}return s.$watch(f,function(e){u&&(u.index=e)}),g.open=function(t,o){h.add(t,{deferred:o.deferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard});let a=n.find("body").eq(0),b=f();b>=0&&!d&&((u=s.$new(!0)).index=b,d=r("<div modal-backdrop></div>")(u),a.append(d));let v=i.element('<div class="reveal-modal" style="z-index:-1""></div>');a.append(v[0]);let y=parseInt(getComputedStyle(v[0]).top,10)||0;v.remove();let S=(e.pageYOffset||0)+y;function C(e){let t;27===e.which&&(t=h.top())&&t.value.keyboard&&s.$apply(function(){g.dismiss(t.key)})}return l.getTopElement().then(e=>{let n=i.element('<div modal-window style="visibility: visible; top:'+S+'px;"></div>');n.attr("window-class",o.windowClass),n.attr("index",h.length()-1),n.attr("animate","animate"),e&&e.name&&n.attr("data-base-state-name",e.name),n.append(o.content);let s=r(n)(o.scope);c.applyAccessibilityHandlingForPanel(s),h.top().value.modalDomEl=s,s&&!h.get(t).value.modalDomEl&&(h.get(t).value.modalDomEl=s),a.append(s),a.addClass(p)}),u&&(u.darkenBackdrop=o.darkenBackdrop),n.bind("keydown",C),o.scope.$on("$destroy",function(){m(document).off("keydown",C)}),h},g.close=function(e,t){if(!h.get(e))return;let n=h.get(e).value;n&&b(e,()=>{n.deferred.resolve(t)})},g.dismiss=function(e,t){if(!h.get(e))return;let n=h.get(e).value;n&&b(e,()=>{n.deferred.reject(t)})},g.dismissAll=function(e){let t=this.getTop();for(;t;)this.dismiss(t.key,e),t=this.getTop()},g.getTop=function(){return h.top()},g}]).provider(g,function(){let e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,r,s,o,l,c){new p(a.Z).start();let d={};return d.open=function(s){let o=r.defer(),a=r.defer(),d={result:o.promise,opened:a.promise,close(e){c.close(d,e)},dismiss(e){c.dismiss(d,e)}};if((s=i.extend({},e.options,s)).resolve=s.resolve||{},!s.template)throw Error("Template is required. Use requireJs to load template string if needed.");let u=r.all([r.when(s.template)].concat(function(e){let n=[];return i.forEach(e,function(e,s){(i.isFunction(e)||i.isArray(e))&&n.push(r.when(t.invoke(e)))}),n}(s.resolve)));return u.then(function(e){let t=(s.scope||n).$new();t.$close=d.close,t.$dismiss=d.dismiss;let r={},a=1;s.controller&&(r.$scope=t,r.$modalInstance=d,i.forEach(s.resolve,function(t,n){r[n]=e[a++]}),l(s.controller,r)),c.open(d,{scope:t,deferred:o,content:e[0],backdrop:s.backdrop,keyboard:s.keyboard,windowClass:s.windowClass,darkenBackdrop:s.darkenBackdrop})},function(e){o.reject(e)}),u.then(function(){a.resolve(!0)},function(){a.reject(!1)}),d},d}]};return e})},883447:function(e,t,n){"use strict";let i=(()=>{let e=[],t=[];function n(){return e[e.length-1]}function i(){let e=n();t.forEach(t=>t(e))}return{add:function(t,n){e.push({key:t,value:n}),i()},addTopListener:function(e){t.push(e)},get:function(t){let n;for(let i=0;i<e.length;i++)if(t===e[i].key){n=e[i];break}return n},keys:function(){let t=[];for(let n=0;n<e.length;n++)t.push(e[n].key);return t},top:n,remove:function(t){let n=-1;for(let i=0;i<e.length;i++)if(t===e[i].key){n=i;break}let r=e.splice(n,1)[0];return i(),r},removeTop:function(){let t=e.splice(e.length-1,1)[0];return i(),t},length:function(){return e.length}}})();t.Z=i},669533:function(e,t,n){"use strict";n.d(t,{P:function(){return o},W:function(){return r}});var i,r,s=n(986709);(i=r||(r={})).None="",i.SafeAssign="SafeAssign",i.Integration="Integration";let o=s._Nl},601541:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p}});var i=n(276635),r=n(464027),s=n(555840),o=n(676954),a=n(473011),l=n(909987),c=n(302032),d=n(669533);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.service.originalityReport",m="originalityReport";class h{setCourseContent(e,t){this.courseContent=e,this.isPrivileged=t}clearCourseContent(){this.courseContent=void 0,this.isPrivileged=void 0}updateReport(e,t,n){this.columnId=n,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map(e=>i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"]))),this.fetchOriginality())}clearReport(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0}isSafeAssignEnabled(e){var t;return!!(null===(t=null!=e?e:this.courseContent)||void 0===t?void 0:t.isSafeAssignEnabled())}isOriginalityAvailableForContentType(e){var t;return!!(null===(t=null!=e?e:this.courseContent)||void 0===t?void 0:t.isTest())}retrieveOriginalityIntegration(e){var t;if(!this.isOriginalityAvailableForContentType(e))return this.$q.resolve(void 0);let n=e||this.courseContent;return n?(this.setCourseContent(n,!0),this.$q.when(l.Z.fetchDefaultOriginalityReportSubmissionService(n.courseId,null===(t=n.getAssociatedGradingColumn())||void 0===t?void 0:t.id)).then(e=>(this.defaultOriginalityIntegrationService=e,this.portalIntegrationId=this.getOriginalityIntegrationByUniqueId(null==e?void 0:e.uniqueHandle),e))):this.$q.resolve(void 0)}fetchIsOriginalityIntegrationEnabled(e){return this.isOriginalityAvailableForContentType(e)?this.retrieveOriginalityIntegration(e).then(e=>e?this.isOriginalityIntegrationEnabled():this.$q.resolve(!1)):this.$q.resolve(!1)}fetchIsOriginalityEnabled(e){return this.isOriginalityAvailableForContentType(e)?this.fetchIsOriginalityIntegrationEnabled(e).then(e=>e):this.$q.resolve(!1)}isOriginalityIntegrationEnabled(){var e,t;let n=this.defaultOriginalityIntegrationService;return!!(null==n?void 0:null===(t=n.capabilities)||void 0===t?void 0:null===(e=t.OriginalityReport)||void 0===e?void 0:e.enabled)}saveOriginalityConfiguration(e){return this.$q.when(l.Z.saveOriginalityConfiguration(this.courseContent,e))}isOriginalityReportEnabled(){return this.defaultOriginalityIntegrationService&&this.defaultOriginalityIntegrationService.uniqueHandle!==d.P?this.isOriginalityIntegrationEnabled():this.isSafeAssignEnabled()}getCurrentOriginalityReportProviderType(e){return e?e.uniqueHandle===d.P?d.W.SafeAssign:d.W.Integration:d.W.None}getOriginalityDisplayName(){var e;return null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.displayName}isOriginalityReportProviderActive(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)!==d.W.None}isSafeAssignActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.W.SafeAssign}isIntegrationActiveOriginalityProvider(){return this.getCurrentOriginalityReportProviderType(this.defaultOriginalityIntegrationService)===d.W.Integration}getOriginalityReportLinkAnalyticsId(){var e;let t=null===(e=this.defaultOriginalityIntegrationService)||void 0===e?void 0:e.uniqueHandle;return t?`course.content.originalityReport.settings.${t}.link`:"course.content.originalityReport.settings.link"}getOriginalityReportLinkText(e){let t=this.defaultOriginalityIntegrationService,n=null==t?void 0:t.displayName;return n?this.isOriginalityReportEnabled()?this.localizeProviderLinkText("course.content.originalityReport.settings.providerEnabled",n):e?this.localizeProviderLinkText("course.content.originalityReport.settings.enableProvider",n):this.localizeProviderLinkText("course.content.originalityReport.settings.providerDisabled",n):this.localize.translateSync({locale:this.localize.getAppLocale(),key:"course.content.originalityReport.settings.originalityDisabled",noWrap:!0})}localizeProviderLinkText(e,t){return this.localize.translateSync({locale:this.localize.getAppLocale(),key:e,noWrap:!0,params:{originalityProvider:t},noEscape:!0})}canStudentViewReports(){return this.courseContent&&this.courseContent.canStudentViewReports()}isReportSectionOpen(){var e;return this.openOriginalityReport&&((null===(e=this.originality)||void 0===e?void 0:e.canShowReportPanel())||this.isOriginalityIntegrationEnabled())}shouldFetchOriginality(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()}setOriginalityAverageScore(e,t){let n=0,r=0;e.forEach(e=>{e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(n+=1,r+=e.originalityScore)}),n&&(this.columnOriginalityAverageScoreDict[t]=r/n)}fetchOriginality(){let e=this.attempt;e.originality.$fetch().$then(t=>{this.attempt===e&&(this.originality=t,this.generateReport())})}hasValidReports(){return this.reports&&this.reports.some(e=>!e.invalid)}generateReport(){let e=this.originality.answerOriginalities;if(this.gradedQuestionAttempts&&this.isPrivileged&&this.gradedQuestionAttempts.some((e,t)=>e.questionAttempt.question.position!==t+1)){let t=i.sortBy(this.gradedQuestionAttempts,e=>e.questionAttempt.question.position),n=[];i.map(t,"questionAttempt.visibleQuestionNumber").forEach((e,t)=>n[e-1]=t),e.forEach(e=>e.order=n[e.order-1]+1),e.sort((e,t)=>e.order-t.order)}this.reports=i.flatMap(e,e=>e.attachments.map(t=>({...t,isQuestionAnswerContent:!0,visibleQuestionNumber:e.order}))),this.originality.attemptOriginality&&this.reports.push(...this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()}calculateScore(){let e=this.reports.filter(e=>!e.invalid),t=0;this.personalMaxScore=e[0].score,this.personalMaxScoreReportName=e[0].name,e.forEach(e=>{e.reportLink=(0,a.uI)(e.reportLink),this.personalMaxScore<e.score&&(this.personalMaxScore=e.score,this.personalMaxScoreReportName=e.name),t+=e.score}),this.personalAverageScore=Math.floor(t/e.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))}getOriginalityIntegrationByUniqueId(e){var t;return null===(t=l.Z.getOriginalityIntegrationByUniqueId(e))||void 0===t?void 0:t.integrationId}constructor(e,t){this.localize=e,this.$q=t,this.columnOriginalityAverageScoreDict={}}}h=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,c.tB)(o.serviceName)),u(1,(0,c.tB)("$q"))],h),r.module(p,[s.e1]).service(m,h)},115775:function(e,t,n){"use strict";n.d(t,{e1:function(){return m},HV:function(){return h}});var i=n(464027),r=n(555840),s=n(860995),o=n(852127),a=n(676954),l=n(808361),c=n(12838),d=n(845882),u=n(625506),p=n(473011);let m="ultra.components.services.partner",h="partner";class g{getPartnerCloudStatus(e,t=!1){if(u("body").hasClass("bb-within-uia-test"))return this.$q.when({enabled:!1,userCloudProvisioned:!1});if(t)return this.PartnerStatusModel.getStatus(e);let n=this.partnerStatusCache.get("status");return n||(n={promise:this.PartnerStatusModel.getStatus(e)},this.partnerStatusCache.put("status",n)),n.promise}resetPartnerCloudStatus(){this.partnerStatusCache.removeAll()}getPartners(e,t=!1){if(t)return this.PartnerModel.getPartnersByType(e);let n=this.partnersCache.get(e);return n||(n={promise:this.PartnerModel.getPartnersByType(e)},this.partnersCache.put(e,n)),n.promise}getLinkedPartners(e,t=!1){if(t)return this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise();let n=this.partnerLinkedCoursesCache.get(e);return n||(n={promise:this.PartnerCourseModel.$new(e).partnerLinkedCourses.$search().$allow(["400-599"]).$asPromise()},this.partnerLinkedCoursesCache.put(e,n)),n.promise}launchPartner(e,t){e.toolProvider.available?d.a$(e)?this._launchBrowseLink(e.browseContentLink):this._checkProvisioningAndLaunch(e,t):e.toolProvider.compatible?this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderNotConfigured"})):this.errorModalService.handleError(this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.errorProviderIncompatible"}))}_checkProvisioningAndLaunch(e,t){this._getProvisioningCheckResult(e.providerId,t).then(t=>{let n;t.status?(n={partnerId:e.providerId,toolType:"browse",partnerTitle:d.Pr(e)},c.i3.Inline===this.$stateParams.mode?n.mode=this.$stateParams.mode:(n.partnerParentId=this.$stateParams.parentId,n.position=this.$stateParams.position)):(n={partnerId:e.providerId,toolType:"partnerProvisioning",partnerTitle:this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$rootScope),key:"course.partnerList.partnerProvisioning"}),partnerParentId:this.$stateParams.parentId},this.ultraStateService.current.name.indexOf("peek.books-and-tools")>=0&&(n.returnState="base.courses.peek.course.outline.peek.books-and-tools")),this.ultraStateService.goPeekState("partner-tool.tool",n)})}_getProvisioningCheckResult(e,t){return i.isDefined(t)?this.$q.when({status:t}):this.PartnerCourseModel.$new(this.contextCourse.courseId).updateProvisioning(e)}_launchBrowseLink(e){let t=p.uI(e.url);switch(this.$stateParams.parentId&&(t=p.Ou(t,"content_id",this.$stateParams.parentId)),e.target){case"_self":this._windowLocationAssign(t);break;case"_blank":this.$window.open(t)}}_windowLocationAssign(e){this.$window.location.assign(e)}constructor(e,t,n,i,r,s,o,a,l,c,d,u){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=i,this.cacheFactory=r,this.contextCourse=s,this.errorModalService=o,this.localizeService=a,this.ultraStateService=l,this.PartnerCourseModel=c,this.PartnerModel=d,this.PartnerStatusModel=u,this.shortMaxAge=5e3,this.partnerStatusCache=r.createCache("PartnerStatusCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnersCache=r.createCache("PartnersCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge}),this.partnerLinkedCoursesCache=r.createCache("PartnerLinkedCoursesCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}}g.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",s.HV,o.HV,a.serviceName,l.HV,r.AA.H,r.k.H,r.aW.H],i.module(m,[s.e1,o.e1,a.moduleName,l.e1,r.e1]).service(h,g)},14454:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(276635),r=n(464027),s=n(610624),o=n(473011);let a="ultraUi.components.services.postMessageDispatcher",l="postMessageDispatcher";class c{callEventHandler(e,t){i.forOwn(this.eventHandlers,n=>{n.messageId===e&&n.eventHandler(t,window)})}registerEventHandler(e,t,n,r=!1){if(r){let t=[];i.forOwn(this.eventHandlers,(n,i)=>{n.messageId===e&&t.push(i)}),t.forEach(e=>{this.removeEventHandler(e)})}let o=s.d();this.eventHandlers[o]={eventHandler:t,messageId:e},this.handleEventListener(),n.$on("$destroy",()=>{this.removeEventHandler(o),this.handleEventListener()})}removeEventHandler(e){this.eventHandlers[e]&&delete this.eventHandlers[e]}getDispatcherStatus(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}}testDispatcherEventHandler(e){this.superEventHandler(e)}handleEventListener(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()}addEventListener(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0}removeEventListener(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1}constructor(e){this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=e=>{e.origin===o.mg()&&e.data&&e.data.messageId&&i.forOwn(this.eventHandlers,t=>{t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)})}}}c.$inject=["$window"],r.module(a,[]).service(l,c)},905620:function(e,t,n){"use strict";n.d(t,{HV:function(){return a},e1:function(){return o}});var i=n(555840),r=n(302032);function s(e,t){return function(n,i){t(n,i,e)}}let o="ultra.service.preference",a="preferenceService";class l{getPreference(e,t,n){let i=this.$q.defer();return n||!Object.prototype.hasOwnProperty.call(this.preferences,e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then(n=>{if(n.$response&&404===n.$response.status){if(void 0===t){i.reject(n);return}this._addPreferenceToCache(e,t),i.resolve(this.preferences[e])}else this.preferences[n.key]=n,i.resolve(n)},e=>{i.reject(e)}):i.resolve(this.preferences[e]),i.promise}_addPreferenceToCache(e,t,n){let i=this.MyPreferenceModel.$new(e);i.key=e,i.value=t,i.isRequired=!n,this.preferences[e]=i}setPreference(e,t,n){if(e.length>250)throw Error("Preference key is too long!");return this._addPreferenceToCache(e,t,n),this.preferences[e].$save().$asPromise()}constructor(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}}l=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([s(0,(0,r.tB)("$q")),s(1,(0,r.tB)(i.JK.H))],l),angular.module(o,[i.e1]).service(a,l)},921167:function(e,t,n){"use strict";var i,r;n.d(t,{_:function(){return i},j:function(){return s}}),(r=i||(i={})).None="",r.Respondus="Respondus",r.IMS="IMS";let s="rs-lockdown"},296520:function(e,t,n){"use strict";n.d(t,{HV:function(){return E},e1:function(){return C}});var i=n(464027),r=n(555840),s=n(808361),o=n(473011),a=n(65783),l=n(676954),c=n(567361),d=n(860995),u=n(196409),p=n(667341),m=n(259197),h=n(986709),g=n(144958),f=n(563060),b=n(921167),v=n(302032);n(900805);var y=n(625506);function S(e,t){return function(n,i){t(n,i,e)}}let C="ultra.components.services.proctoring",E="proctoring",I={Respondus:"respondus"},w="components.services.proctoring.overview.",A="components.services.proctoring.delivery.",k="components.services.proctoring.settings.",T="components.services.proctoring.page.";class P{getBooksAndToolsDescription(e){return"components.services.proctoring.booksAndTools."+I[e.vendor]+".description"}getProctoringServices(){let e=this.$q.defer();return this.ProctoringServicesModel.$search({"availability.available":"Yes"}).$allow(["400-599"]).$asPromise().then(t=>{t.$response&&t.$response.status>=400?e.resolve([]):e.resolve(t)},()=>e.resolve([])),e.promise}getProctoringAssessmentSettingsText(e){return k+I[e]+".toolLink"}getProctoringAssessmentSettingsRequirementsText(e){return e.getProctoringServiceHandle()&&e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?k+I[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":k+I[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewBrowserText(e){return e.isSecureBrowserRequiredToTake()?w+I[e.getProctoringServiceVendor()]+".browser":null}getProctoringOverviewRequirementsText(e){return e.isSecureBrowserRequiredToTake()?e.isWebcamRequired()?w+I[e.getProctoringServiceVendor()]+".secureBrowserAndWebcamRequired":w+I[e.getProctoringServiceVendor()]+".secureBrowserRequired":null}getProctoringOverviewDownloadText(e){return e.getProctoringDownloadUrl()?w+I[e.getProctoringServiceVendor()]+".downloadBrowser":null}openProctoringLTITool(e,t){let n="/webapps/assessment/controller/proctoring/launchProctoringSettings?proctoring_svc_id="+e.id+"&course_id="+this.contextCourse.courseId;t&&(n+="&content_id="+t.id);let i={toolHref:o.uI(n)};t&&t.title&&t.title.length>0&&(i.toolSubtitle=t.title),this.ultraState.goPeekState("proctoring-lti-tool",i)}getProctoringReviewButtonText(e){return A+"review."+I[e]+".reviewResults"}getProctoringReviewDownloadText(e){return A+"review."+I[e]+".download"}getProctoringPageRequirementsText(e){return T+I[e]+".requirements"}getProctoringPageDownloadText(e){return T+I[e]+".download"}getProctoringPageBrowserText(e){return T+I[e]+".browser"}getSecureBbEditorOptions(e){return this.ultraState.current.name===f.Zo.BASE_PROCTORING_ATTEMPT&&(e.attachment=!1,e.image=!1,e.youtubeVideo=!1,e.video=!1,e.contentMarket=!1),e}handleProctoredAssessmentClose(e,t){if("Respondus"===e.getProctoringServiceVendor())o.fL(o.uI("/ultra/proctoring/close?rldbsm=1&rldbxb=1"));else if(t){let t={handle:e.getProctoringServiceHandle(),linkType:m.GQk.LtiPlacement},n=(0,g.Mo)(t);n=o.Ou(n,"custom_proctoring_end_assessment_return","true"),n=o.Ou(n,"course_id",e.courseId),n=o.Ou(n,"content_id",e.id),n=o.Ou(n,"from_ultra","true"),this.ultraState.leavePeekState().then(()=>{this.ltiService.launch(n)})}else this.ultraState.goPeekState(f.eJ.ASSESSMENT_OVERVIEW,{contentId:e.id})}getProctoringServiceByHandle(e){return this.$q.resolve(p.Z.loadProctoringService(e))}fetchProctoringServices(){return this.$q.resolve(p.Z.loadAvailableProctoringServices())}fetchProctoringServiceIntegrations(){return this.$q.resolve(p.Z.loadAvailableProctoringServicesWithIntegration())}getCurrentProctoringProviderType(e){return e?e===b.j?b._.Respondus:b._.IMS:b._.None}isRespondusProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===b._.Respondus}isIMSProctoringServiceProvider(e){return this.getCurrentProctoringProviderType(e.handle)===b._.IMS}isProctoringServiceUnavailable(e,t){return this.isProctoringPlacementUnavailable(e,t)||this.isProctoringUEFUnavailable(e,t)}isProctoringPlacementUnavailable(e,t){return!!e&&(null==t||t.availability.available===h.y67.No)}isProctoringUEFUnavailable(e,t){return!!e&&!this.isRespondusProctoringServiceProvider(t)&&!this.getProctoringServiceIntegrationId(t)}getProctoringServiceIntegrationId(e){var t;if(e)return null===(t=p.Z.getProctoringIntegration(e.handle))||void 0===t?void 0:t.integrationId}promptIntegrationToSave(e,t,n,i){return this.$q.resolve(p.Z.promptIntegrationToSaveSettings(e,t,n,i))}openRespondusProctoringLaunchLink(e){let t="respondus-iframe",n="data:text/plain,";if(y(`#${t}`).remove(),e.startsWith(n)){let i=`<iframe src="data://text/plain,${e.substring(n.length)}" id="${t}" style="display:none"></iframe>`;this.createRespondusIFrameAndSetLocation(i)}else this.setRespondusWindowLocation(e)}createRespondusIFrameAndSetLocation(e){document.body.appendChild(y(e)[0])}setRespondusWindowLocation(e){this.$window.location.assign(e)}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p){this.$q=e,this.$rootScope=t,this.$sce=n,this.$window=i,this.CourseModel=r,this.CourseContentModel=s,this.ProctoringServicesModel=o,this.modal=a,this.contentService=l,this.contextCourse=c,this.localize=d,this.ultraState=u,this.ltiService=p}}P=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([S(0,(0,v.tB)("$q")),S(1,(0,v.tB)("$rootScope")),S(2,(0,v.tB)("$sce")),S(3,(0,v.tB)("$window")),S(4,(0,v.tB)(r.N7.H)),S(5,(0,v.tB)(r.courseContent.HV)),S(6,(0,v.tB)(r.sO.H)),S(7,(0,v.tB)(a.HV)),S(8,(0,v.tB)(c.HV)),S(9,(0,v.tB)(d.HV)),S(10,(0,v.tB)(l.serviceName)),S(11,(0,v.tB)(s.HV)),S(12,(0,v.tB)(u.HV))],P),i.module(C,["ngSanitize",c.e1,l.moduleName,a.e1,s.e1,d.e1,u.e1]).service(E,P)},637638:function(e,t,n){"use strict";n.d(t,{HV:function(){return s},e1:function(){return r}});var i=n(464027);let r="ultra.service.promiseQueue",s="promiseQueue";class o{enqueue(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")}enqueueArray(e){if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach(e=>{this.queue.push(e)}),this.processQueue()}processQueue(e){if(this.processing)return;let t=this.queue.shift();if(t){this.processing=!0;let n=e;try{t(e).then(e=>{n=e}).finally(()=>{this.processing=!1,this.processQueue(n)})}catch(e){throw this.processing=!1,e}}}_processQueue(){return this.processQueue()}constructor(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}}i.module(r,[]).service(s,class{getQueue(e){let t=this.queues[e];return t||(t=this.queues[e]=new o),t}constructor(){this.queues=Object.create(null)}})},442057:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c},i$:function(){return s}});var i,r,s,o=n(464027),a=n(302032),l=n(391489);let c="ultra.components.services.route.routeListener",d="routeListener";class u{addRouteListener(){this.$rootScope.$on(l.N.$stateChangeSuccess,(e,t,n)=>{let i=t.name;p.emitRouteEvent(0,i,n)}),this.$rootScope.$on(l.N.$stateChangeStart,(e,t,n)=>{let i=t.name;p.emitRouteEvent(1,i,n)})}constructor(e){this.$rootScope=e}}u=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([(i=(0,a.tB)("$rootScope"),function(e,t){i(e,t,0)})],u),o.module(c,[]).service(d,u),(r=s||(s={}))[r.Changed=0]="Changed",r[r.Changing=1]="Changing";let p=new class{subscribe(e,t=0){return this.subscribers[t].push(e),()=>{this.subscribers[t]=this.subscribers[t].filter(t=>t!==e)}}emitRouteEvent(e,t,n){this.subscribers[e].forEach(e=>e(t,n))}getCurrentRoute(){return this.currentRoute}constructor(){this.subscribers={0:[],1:[]},this.subscribe((e,t)=>{this.currentRoute={currentRouteName:e,currentParams:t}})}};t.ZP=p},968362:function(e,t,n){"use strict";n.d(t,{S8:function(){return L},zf:function(){return x},iX:function(){return D},fY:function(){return R},MS:function(){return P},e1:function(){return k},HV:function(){return T}});var i=n(276635),r=n(464027),s=n(676954),o=n(362767),a=n(860995),l=n(129609),c=n(891886),d=n(651930),u=n(649955),p=n(555840),m=n(808361),h=n(411832),g=n(897437),f=n(751597),b=n(83991),v=n(749444),y=n(302032),S=n(610624),C=n(986709),E=n(376853),I=n(825986);class w{async persistRubricEvaluation(e){var t,n;return{success:(null===(n=(await this.rubricService.persistRubricEvaluation(e)).attemptInfo)||void 0===n?void 0:null===(t=n.$response)||void 0===t?void 0:t.status)===200}}getRubricEvaluationPayload(){return this.rubricService.getBaseRubricEvaluationPayload()}async reset(e,t){await this.rubricService.loadRubricEvaluationData({columnId:e,...t})}constructor(e){this.rubricService=e,this.key=I.fz.Rubric}}function A(e,t){return function(n,i){t(n,i,e)}}let k="ultra.services.rubric",T="rubric",P="rubric-eval-save",D="remove-peek-override",x="remove-inline-override",R="rubric-grade-update",L=255,N=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}];class ${resolveStateParams(){return{...this.ultraState.params,...this.loadParams}}loadRubricEvaluationData(e={}){this.loadParams=e,this.updateIsStudentView();let t=this.getParamsFromUrl();if(!t)return this.$q.resolve(void 0);let n=this.currentCourse.course.contents.$find(t.contentId,{expand:"assignedGroups"}).$asPromise(),i=this.currentCourse.course.gradebook.columns.$find(t.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([n,i]).then(([e,n])=>(this.isGroupContent=!!t.groupIdParam,this.content=e,this.isExternalSubmission=f.e.isExternalSubmissionsAssessment(e),this.gradingColumn=n,this.currentUserId=this.isStudentView&&!t.userId?this.contextUser.userId:t.userId,this.rubricAssociation=this.gradingColumn.getRubricAssociation(),this.gradebookSettings=this.grade.loadDefaultGradebookSettings(),this.course=this.currentCourse.course,this.$q.all([this.loadRowException(),this.gradingColumn.hasRubricAssociation()?this.loadRubricData():[]])))}loadRowException(){if(!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()&&!this.isStudentView){let e,t;return this.isGroupContent?(t=this.resolveStateParams().groupId,e=C.Crd.Group):(t=this.resolveStateParams().userId,e=C.Crd.User),this.$q.when(f.e.getSubmissionRowException(this.course,this.content,e,t)).then(e=>{this.exceptionAttempts=!!e.attempts})}return this.$q.resolve()}loadRubricViewData(){this.updateIsStudentView();let e=this.getParamsFromUrl();if(!e)return this.$q.resolve(void 0);let t=this.currentCourse.course.contents.$find(e.contentId).$asPromise(),n=this.currentCourse.course.gradebook.columns.$find(e.columnId,{expand:"associatedRubrics"}).$asPromise();return this.$q.all([t,n]).then(([e,t])=>{this.content=e,this.gradingColumn=t})}getParamsFromUrl(){var e;let t=this.resolveStateParams(),{userId:n,columnId:i,assignmentId:r,groupId:s,disGroupId:o}=t,a=!s&&(n||this.isStudentView),l=null!==(e=t.contentId)&&void 0!==e?e:r;return a&&i&&l?{userId:n,columnId:i,contentId:l}:!a&&(s||o)&&l?{groupIdParam:s||o,contentId:l,columnId:i}:null}shouldRenderRubricEvaluation(){return!this.isStudentView||!!(this.gradingColumn&&this.gradingColumn.hasRubricAssociation())&&this.gradingColumn.getRubricAssociation().isWithEvaluations&&(this.attempt&&this.attempt.isCompleted()||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}loadRubricData(){if(this.currentUserId&&(!this.isGroupContent||this.isStudentView)){if(this.group=null,this.gradingColumn.anonymousGrading){if(!this.shouldRenderRubricEvaluation())return;return this.grade.loadAnonymousStudentGrade(this.gradingColumn,this.currentUserId).then(e=>this.loadGradeData([e]))}return this.gradingColumn.grades.$refresh({userId:this.currentUserId}).$asPromise().then(e=>this.loadGradeData(e))}if(this.isGroupContent)return this.course.contents.$find(this.gradingColumn.contentId,{expand:"assignedGroups"}).$asPromise().then(e=>this.course.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise().then(t=>this.grade.loadGroupRows(this.course,e.assignedGroups,t,this.gradingColumn,e.isSafeAssignEnabled()).then(e=>{if(this.groupSubmission=i.find(e,e=>"grade"in e&&e.attemptCount>0&&(e.group.id===this.resolveStateParams().groupId||e.group.id===this.resolveStateParams().disGroupId)),this.groupSubmission){var t,n;this.group=this.groupSubmission.group,this.gradeDetail=this.groupSubmission.grade,this.isGradingInProgress=C.WTZ.GradingInProgress===this.gradeDetail.manualStatus;let e=null===(n=this.gradeDetail.groupAttempts)||void 0===n?void 0:n.getAttemptById(null===(t=this.resolveStateParams())||void 0===t?void 0:t.attemptId);if(e)return this.loadAttemptData(e)}})))}loadGradeData(e){if(e.length<=0&&(null!=this.resolveStateParams().gradeId||e[0].id!==this.resolveStateParams().gradeId))return;this.gradeDetail=e[0],this.isGradingInProgress=C.WTZ.GradingInProgress===this.gradeDetail.manualStatus,this.gradeDetail.column=this.gradingColumn;let t=this.resolveStateParams().attemptId&&!this.isGroupContent?{attemptId:this.resolveStateParams().attemptId}:{expand:"attempts"};return this.grade.loadAttempt(this.gradeDetail,this.course,t,this.content).then(e=>{var t,n;let i=(null===(t=e.ui)||void 0===t?void 0:t.groupAttempt)||(null===(n=e.ui)||void 0===n?void 0:n.attempt);if(i)return this.loadAttemptData(i)})}loadAttemptData(e){this.attempt=e,this.attempt.rubricEvaluation&&this.attempt.rubricEvaluation.rubricAssociationId===this.rubricAssociation.id||(this.attempt.rubricEvaluation=this.createRubricEvaluation(this.rubricAssociation.id,this.gradeDetail.userId,this.gradingColumn.possible)),this.rubricEvaluation={...this.attempt.rubricEvaluation,maxScore:this.gradeDetail.pointsPossible}}getBaseRubricEvaluationPayload(){var e,t;return{maxScore:this.rubricEvaluation.maxScore,isEditable:this.isEditable(),isStudent:this.isStudentView,isOverrideAvailable:this.isOverrideAvailable(),grade:this.getGrade(),shouldUpdateCriterionFeedback:!1,isMultipleAttempts:this.isMultipleAttempts(),isGroupGradeMultiple:null===(e=this.gradeDetail.ui)||void 0===e?void 0:e.isGroupGradeMultiple,isGradingInProgress:this.isGradingInProgress,isExternalSubmission:this.isExternalSubmission,isGradeOverridden:this.isGradeOverridden(),isAnonymousGrading:this.gradingColumn.anonymousGrading,criteria:this.getCriteriaPayload(this.gradingColumn,this.rubricEvaluation),getGradingPillColor:this.getPercentileColor,contentIconName:this.getIconName(),smallTitle:this.content.title,shouldUndoOverride:!1,shouldEmptyRubric:!1,okConfirmationClicked:!1,isSavingRubric:!1,decimalsLength:u.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType,rubricId:null===(t=this.rubricAssociation)||void 0===t?void 0:t.rubricId}}getBaseRubricViewPayload(){return{maxScore:this.gradingColumn.possible,criteria:this.getCriteriaPayload(this.gradingColumn),contentIconName:this.getIconName(),smallTitle:this.content.title,decimalsLength:u.UF.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,rubricType:this.gradingColumn.getAssociatedRubric().rubricType}}getIconName(){let e=this.contentIcon.getColumnIconClassAsString(this.gradingColumn);return this.contentIcon.getIconName(e)}isEditable(){return(!(this.gradingColumn.delegatedGrading&&this.attempt.isReconciled())||!!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&!this.isStudentView&&this.entitlement.isEntitled(b.SE.AllGrading,this.course.id)&&!this.course.isComplete()}isOverrideAvailable(){return(!this.gradingColumn.delegatedGrading||!!this.isDelegatedAndEntitledReconciler(this.gradingColumn))&&this.isEditable()&&this.entitlement.isEntitled(b.SE.OverrideGrade,this.course.id)}getGrade(){var e,t,n,i,r,s,o;if(this.isMultipleAttempts()||this.gradingColumn.anonymousGrading&&!this.isGradeOverridden())return(null===(s=this.attempt.displayGrade)||void 0===s?void 0:null===(r=s.score)||void 0===r?void 0:r.toString())?this.rubricEvaluation.totalScore.toString():"";if(this.isGradeOverridden()&&!(null===(e=this.gradeDetail.ui)||void 0===e?void 0:e.groupAttempt)&&!this.isGradingInProgress)return this.gradingColumn.anonymousGrading?this.gradeDetail.ui.attempt.grade.toString():this.gradeDetail.manualScore.toString();if(this.isGradeOverridden()&&(null===(t=this.gradeDetail.ui)||void 0===t?void 0:t.groupAttempt)&&!this.isGradingInProgress){let e=[...new Set(null===(o=this.gradeDetail.groupMembersGrades)||void 0===o?void 0:o.map(e=>e.manualScore))];return 1===e.length?e[0].toString():this.gradeDetail.displayGrade.score.toString()}return(null===(i=this.rubricEvaluation)||void 0===i?void 0:null===(n=i.cells)||void 0===n?void 0:n.length)>0&&this.rubricEvaluation.totalScore?this.rubricEvaluation.totalScore.toString():""}isMultipleAttempts(){return(this.gradingColumn.isMultipleAttempts()||this.exceptionAttempts)&&!this.gradingColumn.isDiscussion()&&!this.gradingColumn.isJournal()}isGradeOverridden(){return this.grade.isRubricGradeOverridden(this.gradeDetail,this.attempt,this.gradingColumn)}createRubricCopy(e){let t=this.CourseModel.$new(e.courseId),n={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType,aiState:e.aiState,aiAcceptingUser:e.aiAcceptingUser};return t.rubrics.$build(n)}cloneRows(e){return i.map(e,e=>({cells:this.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position,rowPoints:e.rowPoints}))}cloneCells(e){return i.map(e,e=>({position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax,startPointRange:e.startPointRange,endPointRange:e.endPointRange,numericPoints:e.numericPoints}))}cloneHeaders(e){return i.map(e,e=>({position:e.position,header:e.header}))}incrementTitle(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,s.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,L)}processColumnHeader(e,t){for(let n=0;n<$.templateColumnCount;n++)e.push({position:n,header:this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.template.column"+(n+1)})})}processRow(e,t,n){for(let i=0;i<$.templateRowCount;i++){let r=[];this.processCell(n,r),e.push({position:i,header:this.bbLocalize.translateSync({locale:null!=t?t:this.bbLocalize.getAppLocale(),key:"components.services.rubric.template.criteria",params:{idx:i+1},noWrap:!0}),percentage:Math.floor(100/$.templateRowCount),cells:r})}}updateRubricRows(e,t){let n=this.cloneRows(e);for(let e=0;e<n.length;e++)switch(t){case C.Tgr.PERCENTAGE:n[e].percentage=this.generateCriterionPercentage(n.length,e),n[e].cells=this.processPercentageCells(n[e].cells);break;case C.Tgr.PERCENTAGE_RANGE:n[e].percentage=this.generateCriterionPercentage(n.length,e),n[e].cells=this.processPercentageRangeCells(n[e].cells);break;case C.Tgr.POINTS:n[e].rowPoints=0,n[e].cells=this.processPointsCells(n[e].cells);break;case C.Tgr.POINTS_RANGE:n[e].rowPoints=0,n[e].cells=this.processPointsRangeCells(n[e].cells);break;default:this.unrecognizedRubric()}return n}processPercentage(e,t){return Math.floor(100-100/e*t)}generateCriterionPercentage(e,t){return t+1===e?Math.floor(100/e)+100%e:Math.floor(100-100/e*(e-1))}processPercentageRangeCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,percentageMin:this.processPercentage(n,e+1),percentageMax:this.processPercentage(n,e)};return t}processPercentageCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,percentage:this.processPercentage(n,e)};return t}processPointsCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,numericPoints:0};return t}processPointsRangeCells(e){let t=this.cloneCells(e),n=e.length;for(let e=0;e<n;e++)t[e]={position:e,description:t[e].description,startPointRange:0,endPointRange:0};return t}processCell(e,t){switch(e){case C.Tgr.PERCENTAGE:for(let e=0;e<$.templateColumnCount;e++)t.push({position:e,description:"",percentage:this.processPercentage($.templateColumnCount,e)});break;case C.Tgr.PERCENTAGE_RANGE:N.forEach((e,n)=>{t.push({position:n,description:"",percentageMin:e.min,percentageMax:e.max})});break;default:this.unrecognizedRubric()}}generateDefaultRubric(e){if(null!=this.rubricTemplate&&this.rubricTemplate.courseId===e.id){let t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then(()=>{this.rubricTemplate={courseId:e.id,title:"",rows:[],columnHeaders:[],permissions:{edit:!0,delete:!0},rubricType:C.Tgr.PERCENTAGE},this.processColumnHeader(this.rubricTemplate.columnHeaders,e.locale),this.processRow(this.rubricTemplate.rows,e.locale,this.rubricTemplate.rubricType);let t=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(t).$asPromise()})}cacheGeneratedRubric(e){let t=Math.floor(1e6*Math.random()).toString();return this.generatedRubricCache[t]=e,t}buildCachedGeneratedRubric(e,t){let n=this.generatedRubricCache[t];if(!n)return this.$q.reject(Error("Could not find cached generated rubric"));let r=i.cloneDeep(n);return r.permissions={edit:!0,delete:!0},e.rubrics.$build(r).$asPromise()}getCriteriaPayload(e,t){let n=e.getAssociatedRubric();return this.getCriteriaPayloadForRubric(n,e,t)}getCriteriaPayloadForRubric(e,t,n){var i;let r=(0,v.O4)(e),s=null!==(i=null==t?void 0:t.possible)&&void 0!==i?i:r;return e.rows.map(t=>{var i;let o;let a=0;a=this.isPointsOrPointsRangeRubric(e)?0===r?0:s*t.rowPoints/r:s*t.percentage/r,(null==n?void 0:n.cells)&&(o=n.cells.find(e=>e.rubricRowId===t.id));let l=this.getAchievementsPayload(t.cells,e,a,r,s,o),c=this.isPointsOrPointsRangeRubric(e)?a:t.percentage;return{id:t.id,title:t.header,value:c,feedback:null==o?void 0:null===(i=o.feedback)||void 0===i?void 0:i.rawText,achievements:l}})}getAchievementsPayload(e,t,n,i,r,s){return e.map((e,o)=>{let a=(null==s?void 0:s.rubricCellId)===e.id,l={id:e.id,title:t.columnHeaders[o].header,description:e.description,isSelected:a};switch(t.rubricType){case C.Tgr.PERCENTAGE:l.value=e.percentage,l.score=n*e.percentage/i;break;case C.Tgr.POINTS:l.value=e.numericPoints,l.score=0===i?0:r*e.numericPoints/i;break;case C.Tgr.PERCENTAGE_RANGE:l.rangeScore={minValue:e.percentageMin,maxValue:e.percentageMax},l.rangeScoreValue=a?null==s?void 0:s.selectedPercent:null;break;case C.Tgr.POINTS_RANGE:l.rangeScore={minValue:0===i?0:r*e.startPointRange/i,maxValue:0===i?0:r*e.endPointRange/i},l.rangeScoreValue=a?n*s.selectedPercent:null;break;default:this.unrecognizedRubric()}return l})}isPointsOrPointsRangeRubric(e){return e.rubricType===C.Tgr.POINTS||e.rubricType===C.Tgr.POINTS_RANGE}isPercentageOrPercentageRangeRubric(e){return e.rubricType===C.Tgr.PERCENTAGE||e.rubricType===C.Tgr.PERCENTAGE_RANGE}changeRubricType(e,t){e.rows=this.updateRubricRows(e.rows,e.rubricType)}insertNewCriteriaAt(e,t){var n,i;if(!e.rows||!e.columnHeaders)throw Error("Provided rubric is missing either rows or column headers");let r=this.generateNewRow(e.rubricType,e.rows[0].cells);return null===(n=e.rows)||void 0===n||n.splice(t,0,r),null===(i=e.rows)||void 0===i||i.forEach((e,t)=>{e.position=t}),e}deleteCriteriaAt(e,t){if(1===e.rows.length)throw Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach((e,t)=>{e.position=t}),e}balanceCriteriaPercentages(e){e.rows.forEach(t=>{t.percentage=Math.floor(100/e.rows.length)}),i.last(e.rows).percentage+=100-e.rows.reduce((e,t)=>e+t.percentage,0)}insertNewColumnAt(e,t){var n;if(!e.rows||!e.columnHeaders)throw Error("Provided rubric is missing either rows or column headers");return e.columnHeaders.splice(t,0,{position:t,header:""}),null===(n=e.rows)||void 0===n||n.forEach(n=>{switch(e.rubricType){case C.Tgr.PERCENTAGE:this.insertNewPercentRubricColumn(n,t);break;case C.Tgr.PERCENTAGE_RANGE:this.insertNewPercentRangeRubricColumn(n,t);break;case C.Tgr.POINTS:this.insertNewPointsRubricColumn(n,t);break;case C.Tgr.POINTS_RANGE:this.insertNewPointsRangeRubricColumn(n,t);break;default:this.unrecognizedRubric()}}),e}deleteColumnAt(e,t){var n,i,r;if((null===(n=e.columnHeaders)||void 0===n?void 0:n.length)===1)throw Error("Cannot remove last column");return null===(i=e.columnHeaders)||void 0===i||i.splice(t,1),null===(r=e.rows)||void 0===r||r.forEach(n=>{if(n.cells.splice(t,1),e.rubricType!==C.Tgr.PERCENTAGE)return e;0===t&&(n.cells[0].percentage=100)}),e}createRubricEvaluation(e,t,n){return{rubricAssociationId:e,userId:t,maxScore:n,totalScore:0,cells:[]}}initiateUiState(e,t){e.ui&&(e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1)}mapRubricToGrid(e){var t;return(null===(t=e.ui)||void 0===t?void 0:t.columnHeaders)==null&&(e.ui.columnHeaders=[]),e.columnHeaders.forEach((t,n)=>{e.ui.columnHeaders[n]?e.ui.columnHeaders[n].uuid||(e.ui.columnHeaders[n].uuid=(0,S.V)()):e.ui.columnHeaders[n]={uuid:(0,S.V)()}}),null==e.ui.rows&&(e.ui.rows=[]),e.rows.forEach((t,n)=>{e.ui.rows[n]?e.ui.rows[n].uuid||(e.ui.rows[n].uuid=(0,S.V)()):e.ui.rows[n]={uuid:(0,S.V)()}}),{rows:e.rows.map((t,n)=>({id:e.ui.rows[n].uuid,data:t})),columns:e.columnHeaders.map((t,n)=>({id:e.ui.columnHeaders[n].uuid,data:t}))}}insertNewPercentRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:n}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let i=e.cells[t+1]?e.cells[t+1].percentage:0,r=Math.floor((e.cells[t-1].percentage-i)/2);e.cells[t].percentage=e.cells[t-1].percentage-r}insertNewPercentRangeRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,i=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:n,percentageMax:i}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let r=e.cells[t+1]?e.cells[t+1].percentageMin:0,s=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-r)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-s)/2)}insertNewPointsRubricColumn(e,t){let n=t<e.cells.length?e.cells[t].numericPoints:e.cells[t-1].numericPoints;if(e.cells.splice(t,0,{position:0,description:"",numericPoints:n}),e.cells.forEach((e,t)=>{e.position=t}),0===t)return;let i=e.cells[t+1]?e.cells[t+1].numericPoints:0;e.cells[t].numericPoints=Math.round((e.cells[t-1].numericPoints+i)*50)/100}insertNewPointsRangeRubricColumn(e,t){e.cells.splice(t,0,{position:t,description:"",startPointRange:0,endPointRange:0}),e.cells.forEach((e,t)=>{e.position=t})}generateNewRow(e,t){switch(e){case C.Tgr.PERCENTAGE:return this.generateNewPercentageRow(t);case C.Tgr.PERCENTAGE_RANGE:return this.generateNewPercentageRangeRow(t);case C.Tgr.POINTS:case C.Tgr.POINTS_RANGE:return this.generateNewPointsTypeRow(t);default:this.unrecognizedRubric()}}generateNewPercentageRangeRow(e){let t={header:"",percentage:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})}),t}generateNewPercentageRow(e){let t={header:"",percentage:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",percentage:e.percentage})}),t}generateNewPointsTypeRow(e){let t={header:"",rowPoints:0,cells:[]};return e.forEach((e,n)=>{t.cells.push({position:n,description:"",numericPoints:e.numericPoints,startPointRange:e.startPointRange,endPointRange:e.endPointRange})}),t}unrecognizedRubric(){throw Error("Invalid rubric type, please go check RubricType for more detail")}persistRubricEvaluation(e){return this.$q(t=>this.performPersistRubricEvaluation(e).then(e=>{t({gradingColumn:this.gradingColumn,attemptInfo:e})}))}rubricFeedbackIsInvalidForSave(e){return e.some(e=>"number"!=typeof e.scoreValue&&e.hasUnsavedFeedback&&""!==e.feedback&&null!=e.feedback)}rubricHasUnsavedFeedback(e){return e.some(e=>"number"==typeof e.scoreValue&&e.hasUnsavedFeedback)}performPersistRubricEvaluation(e){if("grade"in e&&""===e.grade)return this.attempt.score=null,this.persistCleared(e);let t="isGradeOverridden"in e;if(t&&e.isGradeOverridden&&!this.gradingColumn.anonymousGrading)return this.persistOverriden(e);let n="grade"in e&&"criteria"in e,i="criterionFeedbackWasUpdated"in e&&n;return t&&!e.isGradeOverridden&&n||n||i||this.gradingColumn.anonymousGrading?(this.attempt.score=e.grade,this.persistRubricEvaluationData(e)):this.$q.resolve(void 0)}persistCleared(e){var t;let n=this.rubricEvaluation;n.cells=this.getCells(e);let i=new g.Z(this.gradingColumn,null);return i.clearGrade=!0,i.setGradeToEmpty=!0,i.rubricEvaluation=n,this.grade.saveGrade(i,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:null!==(t=this.group)&&void 0!==t?t:void 0})}persistOverriden(e){let t=!this.gradingColumn.anonymousGrading&&this.gradeDetail.displayGrade.isOverride,n=this.group?this.CourseModel.$new(this.course.id).gradebook.groupAttempts.$new(this.attempt.id):this.CourseModel.$new(this.course.id).gradebook.attempts.$new(this.attempt.id),i=(0,E.GH)(n);i.rubricEvaluation=this.rubricEvaluation;let r=new g.Z(this.gradingColumn,String(e.grade));return this.isDelegatedAndEntitledReconciler(r.column)?this.saveOverridenGrade(r):this.gradingColumn.isDiscussion()&&t?i.$asPromise().then(()=>this.saveOverridenGrade(r)):i.$patch().$asPromise().then(()=>this.saveOverridenGrade(r))}isDelegatedAndEntitledReconciler(e){return e.delegatedGrading&&e.isUserReconciler(this.contextUser.userId)}persistRubricEvaluationData(e){let t=this.rubricEvaluation;t.totalScore=e.rubricGrade,t.cells=this.getCells(e),t.overrideScore=-1;let n=new g.Z(this.gradingColumn,String(this.attempt.score));return(n.rubricEvaluation=t,this.isSingleAttempt()?n.setGradeToEmpty=!0:(n.setGradeToEmpty=!1,this.isGroupContent||(n.attemptId=this.attempt.id)),null==this.attempt.score&&(n.clearGrade=!0),this.isSingleAttempt())?this.grade.saveGrade(n,this.gradeDetail,this.attempt,{userId:this.currentUserId,group:this.group}):this.grade.saveGrade(n,this.gradeDetail,this.attempt)}getCells(e){var t;let n=[];return null===(t=e.criteria)||void 0===t||t.forEach(t=>{t.achievements.forEach(i=>{if(i.isSelected){var r;let s=null!==(r=i.rangeScoreValue)&&void 0!==r?r:i.value;e.rubricType===C.Tgr.POINTS_RANGE&&(s=0===t.value?0:i.rangeScoreValue/t.value),n.push({rubricCellId:i.id,rubricRowId:t.id,selectedPercent:s,feedback:{rawText:t.feedback}})}})}),n}updateIsStudentView(){var e;this.isStudentView=null!==(e=this.isStudentView)&&void 0!==e?e:this.membership.isStudentMembership()}isSingleAttempt(){return this.gradingColumn&&(this.gradingColumn.isSingleAttempt()&&!this.exceptionAttempts||this.gradingColumn.isDiscussion()||this.gradingColumn.isJournal())}saveOverridenGrade(e){return this.gradingColumn.anonymousGrading?this.$q.resolve(void 0):this.grade.saveGrade(e,this.gradeDetail,void 0,{userId:this.currentUserId,group:this.group}).then(()=>{if((this.gradingColumn.isAssignment()||this.gradingColumn.isDiscussion())&&this.gradeDetail.isPosted&&this.gradeDetail.isPosted()&&this.attempt.readyToPost)return this.group?this.gradingColumn.postReadyGroupAttempts({groupAssociationId:this.attempt.groupAssociationId}):this.gradeDetail.postReadyGrades()})}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p){this.$rootScope=e,this.$q=t,this.context=n,this.bbLocalize=i,this.CourseModel=r,this.RubricModel=s,this.grade=o,this.currentCourse=a,this.membership=l,this.ultraState=c,this.contextUser=d,this.entitlement=u,this.contentIcon=p,this.generatedRubricCache={},this.getPercentileColor=e=>this.grade.getPercentileColor(e),this.bbLocalize.loadBundle("components/services/rubric"),this.updateIsStudentView(),(0,I.gM)(new w(this))}}$.templateRowCount=4,$.templateColumnCount=4,$=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([A(0,(0,y.tB)("$rootScope")),A(1,(0,y.tB)("$q")),A(2,(0,y.tB)(o.HV)),A(3,(0,y.tB)(s.serviceName)),A(4,(0,y.tB)(p.N7.H)),A(5,(0,y.tB)(p.vn.H)),A(6,(0,y.tB)(u.HV)),A(7,(0,y.tB)(a.HV)),A(8,(0,y.tB)(l.HV)),A(9,(0,y.tB)(m.HV)),A(10,(0,y.tB)(c.HV)),A(11,(0,y.tB)(h.HV)),A(12,(0,y.tB)(d.HV))],$),r.module(k,[o.e1,s.moduleName,p.e1,u.e1,d.e1]).service(T,$)},920092:function(e,t,n){"use strict";n.d(t,{HV:function(){return y},e1:function(){return v},tU:function(){return r}});var i,r,s=n(464027),o=n(563060),a=n(555840),l=n(259197),c=n(808361),d=n(45680),u=n(891886),p=n(302032),m=n(751597),h=n(363411),g=n(986709);function f(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function b(e,t){return function(n,i){t(n,i,e)}}let v="ultra.components.services.scoreProviderHelper",y="scoreProviderHelper";function S(e){return!e.getScore()||e.isOverrideGrade()}function C(e){var t,n;if(!(null==e?void 0:e.attempts)&&!(null==e?void 0:e.groupAttempts))return!1;let i=null==e?void 0:null===(t=e.attempts)||void 0===t?void 0:t.some(e=>null==e?void 0:e.isSubmitted()),r=null==e?void 0:null===(n=e.groupAttempts)||void 0===n?void 0:n.some(e=>(null==e?void 0:e.id)&&(null==e?void 0:e.isSubmitted()));return i||r}(i=r||(r={}))[i.GenerateStateParams=0]="GenerateStateParams",i[i.GenerateStateRef=1]="GenerateStateRef",i[i.GoToState=2]="GoToState";class E{getScoreProviderHandle(){return null}openStateRef(e,t){return null}studentViewStateRef(e,t){return null}editStateRef(e,t){return null}gradingStateRef(e,t,n,i){return null}gradingWithRubricStateRef(e,t){return null}gradingWithFeedbackStateRef(e,t,n){return null}getSubmissionsListStateRef(e,t){return null}getAttemptReceiptSearchStateRef(e,t){return null}supportsOverall(){return!1}supportsEdit(){return!0}supportsViewItem(){return!1}supportsExternalEdit(){return!1}takeActionOnStateRef(e,t,n){switch(n){case 2:this.ultraState.goPeekState(e,t);break;case 0:return s.toJson({state:e,args:t});default:return this.generateStateRef(e,t)}}generateStateRef(e,t){return t?e+"("+s.toJson(t)+")":e}isFlexGradingAvailable(e){var t;return null!==(t=!(null==e?void 0:e.groupId)&&!(null==e?void 0:e.delegatedGrading)&&this.featureFlags.isFeatureEnabledStrict(l.x40.FlexibleAttemptGradingM1))&&void 0!==t&&t}constructor(e,t){this.ultraState=e,this.featureFlags=t}}E=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV))],E);class I extends E{openStateRef(e,t){return this.takeActionOnStateRef("assessment.open",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)}supportsOverall(){return!0}constructor(e,t){super(e,t)}}I=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV))],I);class w extends I{getScoreProviderHandle(){return l.u$1.Survey}editStateRef(e,t){return e.assessmentType="survey",e.gradeitemView="details",this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}gradingStateRef(e,t,n,i){var r,s;let a=null==n?void 0:n.hasAttempts(),l=this.flexGradingRoute,c=C(n),d=m.e.isExternalSubmissionsAssessment(null==e?void 0:null===(r=e.ui)||void 0===r?void 0:r.content),u=null==e?void 0:e.isUserReconciler(this.currentUser.userId),p=this.gradebookPermissionService.canExecute()&&!u;return d?c||!p?((null==t?void 0:t.groupId)&&(l=o.RK.GROUP_SUBMISSION_GRADING),this.takeActionOnStateRef(l,t,i)):this.takeActionOnStateRef(o.RK.CREATE_OFFLINE_ATTEMPT,t,i):(!u||!a||(null==e?void 0:e.peerGrading)||(null===(s=this.ultraState.current.peekViewName)||void 0===s?void 0:s.startsWith(o.RK.RECONCILE_GRADE))?(null==t?void 0:t.groupId)&&c?l=o.RK.GROUP_SUBMISSION_GRADING:n&&!c&&(a||!a&&(!(null==n?void 0:n.isSubmitted())||S(n)))&&(l=o.RK.GRADE_AND_FEEDBACK):l=o.RK.RECONCILE_GRADE,this.takeActionOnStateRef(l,t,i))}gradingWithFeedbackStateRef(e,t,n){return this.takeActionOnStateRef(this.flexGradingRoute,e,n)}getSubmissionsListStateRef(e,t){return e.assessmentType="survey",e.gradeitemView="students",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}getAttemptReceiptSearchStateRef(e,t){return this.takeActionOnStateRef(this.flexGradingRoute,e,t)}constructor(e,t,n,i){super(e,t),this.gradebookPermissionService=n,this.currentUser=i,this.flexGradingRoute=o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,t.loadFeatureFlagValue(l.x40.FlexibleAttemptGradingM1)}}w.$inject=[],w=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV)),b(2,(0,p.tB)(d.HV)),b(3,(0,p.tB)(u.HV))],w);class A extends I{getScoreProviderHandle(){return[l.u$1.Test,l.u$1.PeerSubmissionsTest,l.u$1.PeerEvaluationTest]}editStateRef(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}gradingStateRef(e,t,n,i){var r,s,a;let l=t,c=null==n?void 0:n.hasAttempts(),d=this.isFlexGradingAvailable({groupId:null==t?void 0:t.groupId,delegatedGrading:e.delegatedGrading}),u=d?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:o.RK.SUBMISSION_GRADING,p=C(n),h=m.e.isExternalSubmissionsAssessment(null==e?void 0:null===(r=e.ui)||void 0===r?void 0:r.content),g=null==e?void 0:e.isUserReconciler(this.currentUser.userId),f=(null==n?void 0:null===(s=n.attempts)||void 0===s?void 0:s.length)>e.multipleAttempts,b=!d&&(e.isMultipleAttempts()||f)&&p;if(b&&!(null==t?void 0:t.attemptId))return this.takeActionOnStateRef(o.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT,t,i);b&&(l=null);let v=this.gradebookPermissionService.canExecute()&&!g;return h?p||!v?((null==t?void 0:t.groupId)&&(u=o.RK.GROUP_SUBMISSION_GRADING),this.takeActionOnStateRef(u,l,i)):this.takeActionOnStateRef(o.RK.CREATE_OFFLINE_ATTEMPT,t,i):(!g||!c||(null==e?void 0:e.peerGrading)||(null===(a=this.ultraState.current.peekViewName)||void 0===a?void 0:a.startsWith(o.RK.RECONCILE_GRADE))?(null==t?void 0:t.groupId)&&p?u=o.RK.GROUP_SUBMISSION_GRADING:n&&!p&&(c||!c&&(!(null==n?void 0:n.isSubmitted())||S(n)))&&(u=o.RK.GRADE_AND_FEEDBACK):u=o.RK.RECONCILE_GRADE,this.takeActionOnStateRef(u,l,i))}gradingWithFeedbackStateRef(e,t,n){let i=e&&e.groupId?o.RK.GROUP_SUBMISSION_GRADING:o.RK.SUBMISSION_GRADING;return this.takeActionOnStateRef(this.isFlexGradingAvailable({groupId:null==e?void 0:e.groupId,delegatedGrading:t.delegatedGrading})?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:`${i}.assessment-submission-feedback-tab`,e,n)}gradingWithRubricStateRef(e,t){let n=(null==e?void 0:e.groupId)?o.RK.GROUP_SUBMISSION_GRADING:o.RK.SUBMISSION_GRADING;return this.takeActionOnStateRef(this.isFlexGradingAvailable(e)?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:`${n}.inline-rubric`,null,t)}getSubmissionsListStateRef(e,t){return e.assessmentType="test",e.gradeitemView="students",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.RK.GRADEBOOK_ITEM_ASSESSMENT,e,t)}getAttemptReceiptSearchStateRef(e,t){let n=this.isFlexGradingAvailable(e)?o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:o.RK.SUBMISSION_GRADING;return(null==e?void 0:e.groupId)&&(n=o.RK.GROUP_SUBMISSION_GRADING),this.takeActionOnStateRef(n,e,t)}constructor(e,t,n,i){super(e,t),this.gradebookPermissionService=n,this.currentUser=i,t.loadFeatureFlagValue(l.x40.FlexibleAttemptGradingM1)}}A.$inject=[],A=f([b(0,(0,p.tB)(c.HV)),b(1,(0,p.tB)(h.HV)),b(2,(0,p.tB)(d.HV)),b(3,(0,p.tB)(u.HV))],A);class k{buildDelegateMap(e,t){if(this.delegates[e.toString()])throw Error("There is already a registered delegate for "+e.toString());this.delegates[e.toString()]=t,e.contentHandlers.forEach(n=>{if(this.contentHandlerToDelegateMap[n]){if(this.contentHandlerToDelegateMap[n]!==t)throw Error("There is already a registered delegate for "+e.toString())}else this.contentHandlerToDelegateMap[n]=t})}getDelegate(e){return e&&this.delegates[e.toString()]||T.NULL_DELEGATE}getDelegateByContentHandler(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||T.NULL_DELEGATE}isSupported(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()}getSupportedHandles(){return Object.keys(this.delegates).map(e=>l.u$1.parse(e))}openStateRef(e,t,n){return this.getDelegateByContentHandler(e).openStateRef(t,n)}getSubmissionListStateRef(e,t,n){return this.getDelegate(e).getSubmissionsListStateRef(t,n)}getSubmissionListStateRefByContentHandler(e,t,n){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,n)}getAttemptReceiptSearchStateRef(e,t,n){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).getAttemptReceiptSearchStateRef(t,n)}studentViewStateRef(e,t,n){return this.getDelegate(e).studentViewStateRef(t,n)}editStateRef(e,t,n){return this.getDelegate(e).editStateRef(t,n)}gradingStateRef(e,t,n,i){return this.getDelegate(null==e?void 0:e.scoreProviderHandle).gradingStateRef(e,n,t,i)}gradingWithRubricStateRef(e,t,n){return this.getDelegate(e).gradingWithRubricStateRef(t,n)}gradingWithFeedbackStateRef(e,t,n,i){return this.getDelegate(e).gradingWithFeedbackStateRef(t,n,i)}getNeedsGradingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsGradingIcon):null}getNeedsReconcilingIconByContentHandler(e){let t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?(Array.isArray(t)&&(t=t[0]),t.needsReconcilingIcon):null}supportsOverall(e){return this.getDelegate(e).supportsOverall()}supportsEdit(e){return this.getDelegate(e).supportsEdit()}supportsViewItem(e){return this.getDelegate(e).supportsViewItem()}supportsExternalEdit(e){return!!e&&!!(a.courseContent.ContentHandler.PartnerCloud.isEqualTo(e.toString())||a.courseContent.ContentHandler.LtiLink.isEqualTo(e.toString()))&&this.getDelegate(e).supportsExternalEdit()}isFlexGradingAvailable(e,t){return this.getDelegate(e.scoreProviderHandle).isFlexGradingAvailable({groupId:t.groupId,delegatedGrading:e.delegatedGrading})}constructor(e,t){this.$rootScope=e,this.$injector=t,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),k.SCORE_PROVIDER_DELEGATES.forEach(e=>{let t=this.$injector.instantiate(e),n=t.getScoreProviderHandle();Array.isArray(n)?n.forEach(e=>{this.buildDelegateMap(e,t)}):this.buildDelegateMap(n,t)})}}k.$inject=["$rootScope","$injector"],k.SCORE_PROVIDER_DELEGATES=[class extends E{getScoreProviderHandle(){return l.u$1.UltraAssignment}openStateRef(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)}editStateRef(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)}gradingStateRef(e,t,n,i){t.gradeitemView="students";let r="assignment-grading",s=null==n?void 0:n.hasAttempts(),a=C(n);return!n||(!s||a)&&(s||(null==n?void 0:n.isSubmitted())||a)||(r=o.RK.GRADE_AND_FEEDBACK),this.takeActionOnStateRef(r,t,i)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef("gradebook-item.assignment",e,t)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Attendance}openStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}gradingStateRef(e,t,n,i){return this.takeActionOnStateRef("attendance",t,i)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef("attendance",e,t)}supportsEdit(){return!1}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Discussion}openStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}gradingStateRef(e,t,n,i){return this.takeActionOnStateRef(o.Jy.SUBMISSION_LIST,t,i)}editStateRef(e,t){return this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}getSubmissionsListStateRef(e,t){return e.view="participants",(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.Jy.DISCUSSION_VIEW_WITH_GRADING,e,t)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Journal}openStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"journal"},t)}editStateRef(e,t){return this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,e,t)}getSubmissionsListStateRef(e,t){return(null==e?void 0:e.needsGrading)&&(delete e.needsGrading,e.gradingStatus=g.qr.NeedsGrading),this.takeActionOnStateRef(o.Eg.JOURNAL_VIEW_WITH_PARTICIPATION,{...e,view:"participants"},t)}gradingStateRef(e,t,n,i){var r;let s=n.memberId,a=e.contentId,l=(null==n?void 0:n.memberId)||t.membershipId,c=(null==n?void 0:null===(r=n.user)||void 0===r?void 0:r.$pk)||(null==n?void 0:n.userId)||t.userId;return this.takeActionOnStateRef(o.Eg.JOURNAL_PARTICIPATION_DETAIL,{...t,participantId:s,contentId:a,singleMembershipId:l,singleUserId:c},i)}supportsOverall(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.LTILink}openStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsExternalEdit(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.PartnerCloud}openStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}studentViewStateRef(e,t){let n;return n=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:l.u$1.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef(o.UM.LTI_LAUNCH,n,t)}editStateRef(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)}getSubmissionsListStateRef(e,t){return this.takeActionOnStateRef(o.UM.LTI_LAUNCH,{courseId:e.courseId,contentId:e.contentId},t)}supportsOverall(){return!0}supportsViewItem(){return!0}supportsEdit(){return!1}supportsExternalEdit(){return!0}},class extends E{getScoreProviderHandle(){return l.u$1.Scorm}studentViewStateRef(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)}openStateRef(e,t){return this.takeActionOnStateRef("scorm.open",e,t)}editStateRef(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)}gradingStateRef(e,t,n,i){var r;let s=o.RK.SUBMISSION_GRADING,a=null==n?void 0:n.hasAttempts(),l=C(n),c=(null==n?void 0:null===(r=n.attempts)||void 0===r?void 0:r.length)>e.multipleAttempts;if(n&&!l&&(a||!a&&(!(null==n?void 0:n.isSubmitted())||S(n))))s=o.RK.GRADE_AND_FEEDBACK;else if(this.isFlexGradingAvailable({groupId:null==t?void 0:t.groupId,delegatedGrading:e.delegatedGrading}))s=o.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING;else if((e.isMultipleAttempts()||c)&&l){if(t.attemptId)return this.takeActionOnStateRef(s,null,i);s=o.BQ.COURSE_GRADES_MULTIPLE_ATTEMPT}return this.takeActionOnStateRef(s,t,i)}gradingWithFeedbackStateRef(e,t,n){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,n)}getSubmissionsListStateRef(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)}supportsOverall(){return!0}isFlexGradingAvailable(e){return!1}},A,w],k.NULL_DELEGATE=new class extends E{}(null,null);class T extends k{}s.module(v,[c.e1,d.e1,u.e1]).service(y,k)},420595:function(e,t,n){"use strict";n.d(t,{HV:function(){return I},e1:function(){return E},sq:function(){return w}});var i=n(276635),r=n(464027),s=n(555840),o=n(825986),a=n(523827),l=n(129609),c=n(65783),d=n(808361),u=n(649955),p=n(920092),m=n(12838),h=n(473011),g=n(891886),f=n(259197),b=n(302032),v=n(866176),y=n(800553),S=n(118717);function C(e,t){return function(n,i){t(n,i,e)}}let E="ultra.components.services.scorm",I="scorm",w="geolocation *; microphone *; camera *; midi *; encrypted-media *";class A{scormLaunch({contentId:e,courseId:t,content:n,showPreLaunchPanel:i}){return this.service.scormLaunch({contentId:e,courseId:t,content:n,showPreLaunchPanel:i})}constructor(e){this.service=e,this.key=o.fz.Scorm}}class k{subscribeToReduxChanges(){this.$ngRedux.connect(null,e=>(0,S.DE)({updateContentReviewState:f.Nwg.contentReviewState.persistContentReviewState},e))(this)}isScormAvailable(e){let t=this.scormAvailabilityCache[e];if(t){var n;return this.$q.when(null===(n=t.toolEnabledSetting)||void 0===n?void 0:n.isAvailable)}return this.CourseModel.$new(e).contentHandlers.$find(m.GQ.RusticiScorm.toString()).$allow([403]).$asPromise().then(t=>{var n;return null===(n=(this.scormAvailabilityCache[e]=t).toolEnabledSetting)||void 0===n?void 0:n.isAvailable})}async scormLaunch(e){let t=this.$q.defer(),[n,s]=await this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null]);if(e.showPreLaunchPanel&&this.isGradable(n)){if(n.canEdit()){let n=r.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(f.u$1.Scorm,{courseId:e.courseId,contentId:e.contentId},p.tU.GenerateStateParams));this.ultraState.goPeekState(n.state,n.args).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})}else this.isStudentInCourse(s)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:n.courseId,contentId:n.id}).then(()=>{t.resolve()}).catch(e=>{t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})}else this.launchScormLink(i.merge(e,{content:n}),t);return t.promise}refreshContents(e,t){this.getContent(e,null,t).then(e=>{this.gradeService.refreshCourseContents(e)})}markContentAsViewed(e,t){return t?this.getContent(e,null,t).then(e=>{var t;if(!(null===(t=e.permissions)||void 0===t?void 0:t.canHaveReviewState))return;let n=(0,v.w4)(e);n&&(this.updateContentReviewState(e.courseId,e.id,n),e.inSequence&&this.$rootScope.$broadcast(y.G,e,n))}):this.$q.when()}launch(e,t,n,i=!1){e=h.uI(e),e=h.Ou(e,"from_ultra","true"),i?(this.$window.open(e),this.markContentAsViewed(t,n)):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:n}).then(()=>{this.markContentAsViewed(t,n)})}launchScormLink(e,t){let n;e.content&&(n=this.getLaunchLinkFromContent(e.content)),n&&(this.determineLaunchTarget(i.merge(e,{launchLink:n})),t.resolve())}determineLaunchTarget(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)}getLaunchLinkFromContent(e){let t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null}scormEditColumn(e){this.getContent(e.courseId,e.ui.content,e.contentId).then(t=>{e.ui.content=t;let n=a.dI.create(t).getEditState();this.ultraState.goPeekState(n,{contentId:t.id})})}isStudentInCourse(e){return e.isStudentMembership()}isGradable(e){return!!e.getScormGradebookItems().length}getContent(e,t,n){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():this.$q.when(null)}getMembership(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()}loadScormGrade({courseId:e,column:t,grade:n}){return(n?n.$asPromise&&n.$asPromise()||this.$q.when(n):this.gradeService.loadGrade({gradeQueryParams:{},courseId:e,column:t,userId:this.contextUser.userId},!1)).then(t=>t&&t.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then(e=>e.length&&e.reduce((e,t)=>e.attemptDate>t.attemptDate?e:t)).then(e=>e&&e.id).then(n=>{if(!n)return t;let i=this.CourseModel.$new(e);return this.gradeService.loadAttempt(t,i,{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:n})}))}constructor(e,t,n,i,r,s,a,l,c,d,u,p){this.$q=e,this.$rootScope=t,this.$window=n,this.$ngRedux=i,this.cacheFactory=r,this.contextCourseMembership=s,this.modalService=a,this.ultraState=l,this.gradeService=c,this.scoreProviderHelper=d,this.CourseModel=u,this.contextUser=p,this.scormAvailabilityCache={},this.subscribeToReduxChanges(),(0,o.gM)(new A(this))}}k=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([C(0,(0,b.tB)("$q")),C(1,(0,b.tB)("$rootScope")),C(2,(0,b.tB)("$window")),C(3,(0,b.tB)("$ngRedux")),C(4,(0,b.tB)("DSCacheFactory")),C(5,(0,b.tB)(l.HV)),C(6,(0,b.tB)(c.HV)),C(7,(0,b.tB)(d.HV)),C(8,(0,b.tB)(u.HV)),C(9,(0,b.tB)(p.HV)),C(10,(0,b.tB)(s.N7.H)),C(11,(0,b.tB)(g.HV))],k),r.module(E,[l.e1,d.e1,p.e1,u.e1,s.e1]).service(I,k).config(["$compileProvider",e=>{e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},346936:function(e,t,n){"use strict";n.d(t,{e1:function(){return a},HV:function(){return l}});var i=n(625506),r=n(276635);class s{start(){this.state="start",this.frame=1,this.startCallback=i.noop,this.nextFrame()}loadComplete(){this.afterWaiting(()=>{this.state="success",this.frame=1,this.nextFrame()})}loadError(){this.afterWaiting(()=>{this.state="error",this.frame=1,this.nextFrame()})}reset(){this.state="reset",this.frame=20,this.nextFrame()}afterWaiting(e){"start"===this.state&&20===this.frame||"reset"===this.state?e():this.startCallback=()=>{e(),this.startCallback=null}}constructor(e,t){this.element=e,this.settings=t,this.nextFrame=r.throttle(()=>{window.requestAnimationFrame(()=>{e.setAttribute("keyframe",this.state+"-"+("00"+(this.frame=Math.min(this.frame+1,20))).substr(-2)),this.frame<20?this.nextFrame():(this[this.state+"Callback"]||this.settings[this.state+"Callback"]||i.noop)()})},50),this.settings=i.extend({successCallback:i.noop,errorCallback:i.noop,canvasSize:54},t),i(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}}i.fn.inlineLoader=function(e){return this.addClass("xloader2").each(function(){this.InlineLoader=new s(this,e)}),this};var o=n(464027);let a="ultra.components.services.spinner",l="spinner";class c{initInlineLoader(e,t){return e.inlineLoader(t),new d(e,this.$rootScope)}constructor(e){this.$rootScope=e}}c.$inject=["$rootScope"];class d{start(){this.element[0].InlineLoader.start()}complete(){this.element[0].InlineLoader.loadComplete()}error(){this.element[0].InlineLoader.loadError()}reset(){this.element[0].InlineLoader.reset()}animate(e){this.start(),e.then(()=>{this.complete()},()=>{this.error()})}constructor(e,t){this.element=e,this.$rootScope=t}}o.module(a,[]).service(l,c)},65286:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(555840),r=n(905620),s=n(891886),o=n(936472),a=n(986709),l=n(302032),c=n(728042),d=n(645085),u=n(259197);function p(e,t){return function(n,i){t(n,i,e)}}let m="ultra.service.stream.settings",h="streamSettings",g="ultraui.stream.settings.v2",f={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL",StudentsMissedDueDates:"TEL"};class b{initializeSettings(){return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then(()=>this._loadUserSettings())}subscribeToRedux(){let e=this.store.connect(e=>{let t=u.Ys.notificationMethodSetting.getAdminNotificationMethodSettings(e),n=u.Ys.systemPreference.getSystemPreferenceByKey(e,o.uZ),i=this._transformRegistrySettings(n);return{adminNotificationSettings:t.concat(i)}},e=>({loadAdminNotificationSettings:()=>this.$q.all([e(u.Nwg.notificationMethodSetting.loadAdminNotificationMethodSettings()),e(u.Nwg.systemPreference.loadSystemPreference({key:o.uZ,shouldLoadWhilePending:!0}))])}))(this);this.$rootScope.$on("$destroy",e)}_transformRegistrySettings(e){let t=o.xZ;e&&e.value&&(t=JSON.parse(e.value));let n=[];return t.settings.forEach(e=>{n.push({context:a.afs.Course,source:o.sF,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})}),n}_getUserMemberships(){return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.currentUserService.getMemberships().then(e=>(this.userMemberships={},e.forEach(e=>{this.userMemberships[e.id]=e}),Object.values(this.userMemberships)))}reloadStreamMemberships(){return this.userMemberships=null,this._getUserMemberships()}save(e){if(!e)return this.$q.resolve();Object.keys(e).forEach(t=>{e[t].definition||(e[t].definition=o.zt.find(e=>e.id===t))});let t=Object.keys(e).map(t=>({id:e[t].definition.id,isEnabled:e[t].isEnabled}));return this.preferenceService.setPreference(g,angular.toJson({version:3,settings:t})).then(()=>this._loadUserSettings())}_loadLegacyUserSettings(){return this.preferenceService.getPreference("ultraui.stream.settings",null).then(e=>{if(!e||!e.value)return!1;let t=angular.fromJson(e.value);return this.userSettings=o.zt.reduce((e,n)=>{let i=f[n.id];return{...e,[n.id]:{definition:n,isEnabled:!!i&&"N"!==t[i]}}},{}),!0})}_loadUserSettings(){return this.preferenceService.getPreference(g,null).then(e=>{if(!e||!e.value)return this._loadLegacyUserSettings().then(e=>{if(!e)return this._loadDefaultSettings()});let t=angular.fromJson(e.value);this.userSettings={},t.settings.forEach(e=>{let t=o.zt.find(t=>t.id===e.id);t&&(this.userSettings[e.id]={isEnabled:e.isEnabled,definition:t})})})}_loadDefaultSettings(){return this.loadAdminNotificationSettings().then(()=>{this.userSettings=o.zt.reduce((e,t)=>{let n=t.defaultSetting(this.adminNotificationSettings);return e[t.id]={isEnabled:n,definition:t},e},{})})}getUserSettings(){return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then(()=>this.userSettings)}_hasUserSettings(){return null!==this.userSettings}_updateMembership(e){this.userMemberships={...this.userMemberships,[e.id]:{...this.userMemberships[e.id],...e}}}hidden(e){if(!e)return!1;let t=this.userMemberships?Object.values(this.userMemberships).find(t=>t.course.$pk===e.courseId):null;if(t&&t.userHasHidden)return!0;if(t&&(e.courseColorClass=(0,d.bb)(t)),!this.userSettings||!this.adminNotificationSettings)return!1;let n=!1;for(let t of Object.keys(this.userSettings)){let i=this.userSettings[t];if(i.definition.canHandle(e)&&(n=!0,i.definition.isStreamEntryVisible(i.isEnabled,this.adminNotificationSettings,e)))return!1}return n}getLoadedUserSettings(e){let t=[];return this._hasUserSettings()&&e&&e.forEach(e=>{let n=this.userSettings[e];n&&t.push({...n,isEnabled:!!n.isEnabled})}),t}constructor(e,t,n,i,r,s){this.$rootScope=e,this.$q=t,this.preferenceService=n,this.UserModel=i,this.currentUserService=r,this.store=s,this.userSettings=null,c.Z.OnRootScope(this.$rootScope,"membership-hidden-status-update",(e,t)=>{this._updateMembership(t),this.$rootScope.$broadcast("stream-settings-updated")}),this.subscribeToRedux()}}b=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([p(0,(0,l.tB)("$rootScope")),p(1,(0,l.tB)("$q")),p(2,(0,l.tB)(r.HV)),p(3,(0,l.tB)(i.EA.HV)),p(4,(0,l.tB)(s.HV)),p(5,(0,l.tB)("$ngRedux"))],b),angular.module(m,[r.e1]).service(h,b)},348669:function(e,t,n){"use strict";n.d(t,{HV:function(){return b},SA:function(){return S},e1:function(){return f},e2:function(){return v},gc:function(){return y}});var i=n(302032),r=n(728042),s=n(473011),o=n(391489),a=n(435181),l=n(763017),c=n(65783),d=n(676954),u=n(246233),p=n(478459),m=n(660144),h=n(776517);function g(e,t){return function(n,i){t(n,i,e)}}let f="ultra.service.studentPreview",b="studentPreview",v=b+"Provider",y=l.vI,S="TOGGLE-PREVIEW",C="in-preview-mode-parent";class E{get course(){return this._course}get previewStatus(){return this._previewStatus}get previewUrl(){return this._previewUrl}load(){return this.course.studentPreview.$fetch().$asPromise().then(e=>(this._previewStatus=e,this.updateClasses(),e.courseMembershipId)?this.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then(t=>(e.user=this.UserModel.$buildRaw(e.user),e.user.memberships.push(this.course.memberships.$buildRaw(t)),e)):this.$q.when(e))}init(e){var t;return(null===(t=this.course)||void 0===t?void 0:t.id)===e.id&&this.previewStatus?this.$q.resolve(this.previewStatus):(this._course=e,this.setPreviewUrl(),this.load())}setPreviewUrl(){let e=(0,s.uI)(`/ultra/courses/${this.course.id}/outline/?inPreviewMode=true`);this._previewUrl=this.$sce.trustAsResourceUrl(e)}openStartPreviewModal(){let e=this.$rootScope.$new();return e.courseOrgTokenPrefix=this.course.isOrganization?"components.services.organization":"components.services",document.body.classList.add("dialog-pop-up-in-preview-mode"),this.modal.open({scope:e,template:m,resolve:{translations:[d.serviceName,e=>e.loadBundle("components/services/student-preview")]}}).result}updateClasses(){var e;(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)?document.body.classList.add(C):(document.body.classList.remove(C),document.body.classList.remove("has-footer-in-preview-mode"))}showToastNotification(e){this.toast.show({messageKey:e,icon:"icon-check",toastStatus:"success"})}exitPreviewMode(e=!1){return this.entitlementCache.clearEntitlementCache(this.course.id),this.$q.all([this.course.studentPreview.withParams({discardData:e}).$destroy().$asPromise(),this.localize.loadBundle("components/services/student-preview")]).then(e=>this.entitlementCache.loadCourseEntitlements(this.course.id).then(()=>{this.$rootScope.$broadcast(S,!1),this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.previewEnded"),this._previewStatus=e[0],this.updateClasses(),(0,h.sA)(h.Cs.StudentPreviewClosed)}))}launchPreviewMode(){return this.openStartPreviewModal().then(()=>this.course.studentPreview.$save().$asPromise().then(e=>{this._previewStatus=e,this.$rootScope.$broadcast(S,!0),this.updateClasses(),(0,h.sA)(h.Cs.StudentPreviewOpened)}))}resetPreviewMode(){return this.course.studentPreview.withParams({discardData:!0}).$destroy().$asPromise().then(()=>this.course.studentPreview.$save().$asPromise().then(()=>{this.setPreviewUrl(),this.showToastNotification("components.services.studentPreview.activityReset")}))}isInIframeOfPreviewMode(){var e;return(null===(e=this.previewStatus)||void 0===e?void 0:e.previewing)&&window.top!==window}constructor(e,t,n,i,s,a,l,c){this.$q=e,this.$rootScope=t,this.$sce=n,this.entitlementCache=i,this.localize=s,this.modal=a,this.toast=l,this.UserModel=c,r.Z.OnRootScope(this.$rootScope,o.N.$stateHasCourseInContextChanged,(e,t,n)=>{var i;n&&!t&&(null===(i=this.previewStatus)||void 0===i?void 0:i.previewing)&&this.exitPreviewMode()})}}E=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([g(0,(0,i.tB)("$q")),g(1,(0,i.tB)("$rootScope")),g(2,(0,i.tB)("$sce")),g(3,(0,i.tB)(u.HV)),g(4,(0,i.tB)(d.serviceName)),g(5,(0,i.tB)(c.HV)),g(6,(0,i.tB)(p.HV)),g(7,(0,i.tB)(a.HV))],E),angular.module(f,[u.e1,d.moduleName,c.e1,p.e1]).provider(b,class{constructor(){this.$get=["$injector",e=>e.instantiate(E)],this.name=y,this.resolve=[l.c6,b,(e,t)=>t.init(e)]}})},272907:function(e,t,n){"use strict";n.d(t,{HV:function(){return h},e1:function(){return m}});var i=n(276635),r=n(464027),s=n(411832),o=n(12838),a=n(83991),l=n(676954),c=n(555840),d=n(619034),u=n(563060),p=n(751597);let m="ultra.service.telemetry",h="telemetry";class g{loadActivityVsGradeData(e){return this.ActivityVsGradeModel.$find(e).$allow([404]).$asPromise()}loadStudentGradeData(e,t){return this.StudentGradesModel.$find(e,t?{userId:t}:{}).$allow([404,400]).$asPromise()}loadCourseGradeData(e){return this.CourseGradesModel.$find(e).$allow([404,400]).$asPromise()}loadStudentActivityData(e,t){return this.StudentActivityModel.$find(e,t?{userId:t}:{}).$allow([400]).$asPromise()}loadContentActivityInDetailData(e,t){return this.ContentActivityInDetailModel.$collection().getContentActivityInDetail(e,t).$asPromise()}loadMultimediaActivityInDetailData(e,t){return this.MultimediaActivityInDetailModel.$collection().getMultimediaActivityInDetail(e,t).$asPromise()}loadMultimediaStatisticsData(e,t){return this.MultimediaStatisticsModel.getMultimediaStatistics(e,t).$asPromise()}loadCourseActivityData(e){return this.CourseActivityModel.$find(e).$allow([400]).$asPromise()}loadNotificationUsers(e,t,n){let r={};return t&&(r.limit=t),n&&(r.offset=n),this.NotificationUsers.$find(e,r).$asPromise().then(e=>i.keyBy(e.users,"userId"))}loadNotifications(e,t,n,i){return this.getNotificationsPromise(e,t,n,i).promise}loadDiscussionActivityData(e,t,n){return n?this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t,n).$asPromise():this.TelemetryDiscussionActivityModel.getDiscussionActivityReport(e,t).$asPromise()}loadDiscussionXrayReport(e,t,n){return this.TelemetryDiscussionXrayModel.getDiscussionXrayReport(e,t,n).$asPromise()}hasSufficientActivityData(e){return this.getSufficientDataPromise().promise.then(t=>!!t&&!!t.coursesWithActivity&&i.includes(t.coursesWithActivity,e))}hasSufficientGradeData(e){return this.getSufficientDataPromise().promise.then(t=>!!t&&!!t.coursesWithGrades&&i.includes(t.coursesWithGrades,e))}canViewAllUserData(e){return this.entitlement.hasCourseEntitlement(a.SE.ViewGrades,e)}formatMessageRecipients(e){return(e||[]).map(e=>e.id).join(",")}determineContentSupportsActivityData(e){let t=this.$q.defer();return p.e.isExternalSubmissionsAssessment(e)?t.resolve(!1):this.contentSupportsActivityData(e)?this.canViewAllUserData(e.courseId).then(e=>{t.resolve(e)}).catch(e=>{t.reject(e)}):t.resolve(!1),t.promise}contentSupportsActivityData(e){return(o.GQ.TestLink.isEqualTo(e.contentHandler)||o.GQ.UltraAssignment.isEqualTo(e.contentHandler)||o.GQ.SurveyLink.isEqualTo(e.contentHandler))&&e.hasGradingColumn()}determinePanelSref(e,t){return this.canViewAllUserData(e).then(n=>n?this.createPanelSref(u.s6.INSTRUCTOR_CLASS,e,t):this.createPanelSref(u.s6.STUDENT_PROGRESS,e,t))}createPanelSref(e,t,n){let i=e.toString(),r='({ courseId: "'+t+'"';return n&&(r+=', notificationId: "'+n+'"'),i+(r+=" })")}exportFilename(e,t,n,i,r){let s="";e&&(s=e.courseId+"_");let o=this.bbLocalize.formatDateSync(new Date,l.ILocaleDateFormat.ISO).replace(/[^0-9]/g,""),a="";t&&n&&t.id!==n.id&&(a=t.userName+"_");let c="";return r&&(c=r.replace(/\s+/g,"_")+"_"),s+a+c+o+(i?"_"+i:"")}getSufficientDataPromise(){let e=this.sufficientDataCache.get(this.SUFFICIENT_DATA_KEY);return e||(e={promise:this.SufficientDataModel.$new().$fetch().$allow([404,400]).$asPromise()},this.sufficientDataCache.put(this.SUFFICIENT_DATA_KEY,e)),e}getNotificationsPromise(e,t,n,i){let r=e+t+n+i,s=this.notificationsCache.get(r);if(!s){let o={};t&&(o.userId=t),n&&(o.includeDismissed=n),i&&(o.notificationType=i),(s={promise:this.CourseNotificationsModel.$find(e,o).$asPromise()}).promise.then(e=>(e.currentStudent.forEach(e=>{e.ui={createdDay:d.utc(e.created).startOf("day").toDate()}}),e)),this.notificationsCache.put(r,s)}return s}constructor(e,t,n,i,r,s,o,a,l,c,d,u,p,m,h,g,f){this.cacheFactory=e,this.$q=t,this.entitlement=n,this.bbLocalize=i,this.ActivityVsGradeModel=r,this.ContentActivityInDetailModel=s,this.CourseActivityModel=o,this.CourseGradesModel=a,this.CourseNotificationsModel=l,this.MultimediaActivityInDetailModel=c,this.MultimediaStatisticsModel=d,this.NotificationUsers=u,this.StudentActivityModel=p,this.StudentGradesModel=m,this.SufficientDataModel=h,this.TelemetryDiscussionActivityModel=g,this.TelemetryDiscussionXrayModel=f,this.SUFFICIENT_DATA_KEY="SufficientData",this.sufficientDataCache=e.createCache("sufficientTelemetryData"),this.notificationsCache=e.createCache("notifications")}}g.$inject=["DSCacheFactory","$q",s.HV,l.serviceName,c.YY.H,c.t4.H,c.k8.H,c.tV.H,c.Kx.H,c.fW.H,c.xJ.H,c._h.H,c.L5.H,c.lo.H,c.S5.H,c.Mt.H,c.bU.H],r.module(m,[c.e1,s.e1]).service(h,g)},480489:function(e,t,n){"use strict";n.d(t,{H:function(){return s},e:function(){return r}});var i=n(464027);let r="ultra.services.timeout",s="timeout";i.module(r,[]).factory(s,["$timeout",e=>{let t=(t,n,i,r)=>{let s=e(function(...e){return s.__bb_unregister_scope_destroy__&&(s.__bb_unregister_scope_destroy__(),s.__bb_unregister_scope_destroy__=null),t.apply(this,e)},i,r);return s.__bb_unregister_scope_destroy__=n.$on("$destroy",()=>{e.cancel(s)}),s};return t.cancel=t=>(t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)),t}])},478459:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},e1:function(){return d}});var i=n(464027),r=n(714762),s=n(676954),o=n(392691),a=n(786845),l=n(79743),c=n(780012);let d="ultra.services.toast",u="toast";class p{show(e){if(!e)throw Error("args is required");if(!e.messageKey)throw Error("messageKey is required");this.setUpToast({bundlePromise:e.bundle?this.localize.loadBundle(e.bundle):this.$q.when(),createScope:()=>{let t=this.$rootScope.$new(!0);return t.message=this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.messageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.shortMessage=e.shortMessageKey&&this.localize.translateSync({locale:e.locale||this.localize.getLocale(t),key:e.shortMessageKey,params:e.translationParams,noWrap:!0,noEscape:!0}),t.icon=e.icon||"icon-alert-triangle",t.toastClass=e.toastClass,t.toastStatus=e.toastStatus,t},triggerToastClose:(t,n,i,r)=>{n.$root.$broadcast(a.$N,n.message);let s=()=>{if(n.isActive){let n=e.durationMS||p.DEFAULT_DISPLAY_MS;this.toastQueue.length>1&&(n=Math.min(p.RUSH_DISPLAY_MS,n)),new Date().getTime()-t.startTime>=n?r():this.$timeout(s,1e3,!1)}};s(),this.$timeout(()=>{i.addClass("is-active")},0,!1)},onCloseToast:this.closeToast,template:l})}showLoading(e){if(!e)throw Error("args is required");if(!e.trayId)throw Error("messageKey is required");return e.promise.then(()=>e.promise.done=!0),this.setUpToast({bundlePromise:this.$q.when(),createScope:()=>{let t=this.$rootScope.$new(!0);return t.trayId=e.trayId,t.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,t},triggerToastClose:(t,n,i,r,s)=>{e.promise.then(()=>{r()},()=>{s()}),n.$root.$broadcast(o.gJ.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:c,footerCss:e.footerCss,promise:e.promise})}setUpToast(e){let t;let n=this.$q.defer(),r=this.toastQueue[this.toastQueue.length-1]||this.$q.when();return this.toastQueue.push(n.promise),this.$q.all([r,e.bundlePromise]).then(()=>{let r;if(n.startTime=new Date().getTime(),e.promise&&e.promise.done){n.resolve();return}let s=e.createScope(),o=()=>{e.onCloseToast&&e.onCloseToast(s,r),this.cleanUpToast(n,s,r)};return t=()=>{this.cancelToast(n,s,r)},s.isActive=!0,s.toastClicked=()=>{o()},r=this.$compile(e.template)(s),i.element(document.body).append(r),r.addClass(e.footerCss),e.triggerToastClose(n,s,r,o,t),n.promise}).then(()=>{this.toastQueue.shift()}),()=>t&&t()}closeToast(e,t){e.isActive&&t.removeClass("is-active")}cleanUpToast(e,t,n){t.isActive&&(t.isActive=!1,r.c(n,()=>{this.cancelToast(e,t,n)}))}cancelToast(e,t,n){e.resolve(),n.remove(),t.$destroy()}constructor(e,t,n,i,r){this.$compile=e,this.$q=t,this.$rootScope=n,this.$timeout=i,this.localize=r,this.toastQueue=[]}}p.DEFAULT_DISPLAY_MS=6e3,p.RUSH_DISPLAY_MS=3e3,p.$inject=["$compile","$q","$rootScope","$timeout",s.serviceName],i.module(d,[s.moduleName,o.e1]).service(u,p)},734345:function(e,t,n){"use strict";let i,r;var s=n(640359);class o{static getBasePageStorageKey(){return i||(i="ultra.ui.basepage."+s.u(o.userId)),i}static getPeekPageStorageKey(){return r||(r="ultra.ui.peekpage."+s.u(o.userId)),r}}t.Z=o},19935:function(e,t,n){"use strict";n.d(t,{HV:function(){return m},e1:function(){return p},e2:function(){return g},gc:function(){return h}});var i=n(464027),r=n(302032),s=n(986709),o=n(860995),a=n(808361),l=n(563060),c=n(259197),d=n(363411);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.service.canActivateState",m="canActivateState",h="canActivateStateResolve",g=m+"Provider";class f{byToolIdAvailability(e){let t=this.$q.defer(),n=c.Ys.courseTools.getCourseTool(this.$ngRedux.getState(),this.currentCourse.courseId,e);return n&&n.toolEnabledSetting.isAvailable?t.resolve():n&&!n.toolEnabledSetting.isAvailable?(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.resolve()):this.loadCourseToolConfiguration(this.currentCourse.courseId,s.XF0.Messages).then(({toolEnabledSetting:e})=>{e.isAvailable||(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.resolve())}).catch(()=>{this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),t.reject("Error loading course tool configuration")}),t.promise}byFeatureFlag(e){this.featureFlagService.createWaiter(e).then(e=>{e||this.ultraState.goCurrentBasePage()}).catch(()=>{this.ultraState.goCurrentBasePage()})}bySafeAssignPluginStatus(){this.loadSafeAssignPluginStatus().then(e=>{e.status||this.ultraState.goCurrentBasePage()}).catch(e=>{console.error("Error loading safe assign direct submit:",e),this.ultraState.goCurrentBasePage()})}getSafeAssignCourseSettingsIsEnabled(e){return this.$q.when(this.loadSafeAssignCourseSettings(e)).then(e=>{let{payload:t}=e;return t.enabledSaOnCourse&&"Y"===t.pluginStatus&&t.registered},e=>(console.error("Error loading safe assign direct submit course settings:",e),!1))}isSafeAssignPluginStatusEnabled(){return this.$q.when(this.loadSafeAssignPluginStatus()).then(e=>e.status).catch(e=>(console.error("Error loading safe assign direct submit status:",e),!1))}byMessageToolAvailableForAnyCourse(){let e=this.$q.defer(),t=c.Ys.ultraSettings.getUltraSettings(this.$ngRedux.getState());return t.ultraSettings&&t.ultraSettings.isCourseMessagesToolEnabledInAnyCourses?e.resolve():t.ultraSettings&&!t.ultraSettings.isCourseMessagesToolEnabledInAnyCourses?(this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.resolve()):this.loadUltraSetting().then(({ultraSettings:t})=>{t.isCourseMessagesToolEnabledInAnyCourses||this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.resolve()}).catch(()=>{this.ultraState.goToRoute(l.Z5.Base.BASE_COURSES),e.reject("Error loading ultra settings")}),e.promise}subscribeToReduxChanges(){let e=this.$ngRedux.connect(null,e=>({loadCourseToolConfiguration:(t,n)=>e(c.Nwg.courseTools.loadCourseToolConfiguration(t,n)),loadUltraSetting:()=>e(c.Nwg.ultraSettings.loadUltraSetting()),loadSafeAssignPluginStatus:()=>e(c.Nwg.directSubmitPluginStatus.loadSafeAssignPluginStatus()),loadSafeAssignCourseSettings:t=>e(c.Nwg.directSubmitCourseSettings.loadSafeAssignCourseSettings(t))}))(this);this.$scope.$on("$destroy",e)}constructor(e,t,n,i,r,s){this.$scope=e,this.ultraState=t,this.$ngRedux=n,this.$q=i,this.featureFlagService=r,this.currentCourse=s,this.subscribeToReduxChanges()}}f=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,r.tB)("$rootScope")),u(1,(0,r.tB)(a.HV)),u(2,(0,r.tB)("$ngRedux")),u(3,(0,r.tB)("$q")),u(4,(0,r.tB)(d.HV)),u(5,(0,r.tB)(o.HV))],f),i.module(p,[a.e1,o.e1,d.e1]).provider(m,class{constructor(){this.$get=["$injector",e=>e.instantiate(f)],this.name=h,this.resolve=[m,e=>e.byMessageToolAvailableForAnyCourse()]}})},391489:function(e,t,n){"use strict";var i,r,s,o;n.d(t,{G:function(){return r},N:function(){return i}}),(s=i||(i={})).$stateChangeError="$stateChangeError",s.$stateChangeStart="$stateChangeStart",s.$stateChangeSuccess="$stateChangeSuccess",s.$stateNotFound="$stateNotFound",s.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged",s.$stateHasContentInContextChanged="$stateHasContentInContextChanged",(o=r||(r={})).$locationChangeStart="$locationChangeStart",o.$locationChangeSuccess="$locationChangeSuccess"},808361:function(e,t,n){"use strict";n.d(t,{HV:function(){return A},e1:function(){return w},e2:function(){return k},qt:function(){return P}}),n(788093),n(84683);var i=n(276635),r=n(464027),s=n(728042),o=n(734345),a=n(676954),l=n(886739),c=n(786430),d=n(658895),u=n(362767),p=n(763017),m=n(411832),h=n(480489),g=n(852127),f=n(391489),b=n(473011),v=n(776517),y=n(222994),S=n(94237),C=n(563060),E=n(789423),I=n(625506);let w="ultra.router",A="ultraState",k=A+"Provider",T="DefaultBasePage",P=".peek.";function D(e){e&&Object.keys(e).forEach(t=>{let n=e[t];Array.isArray(n)&&(e[t]=Array.from(new Set(n)),1===e[t].length&&(e[t]=n[0]))})}function x(e,t){let n=/^(\^)?(\??)(\w+)/.exec(e),i={searchParents:!1,optional:!1,name:t};return n&&(i.searchParents="^"===n[1],i.optional="?"===n[2],i.name=n[3]?n[3]:t),i}class R{baseState(e,t){return window.top!==window&&b.re("inPreviewMode",window.location.href)&&(t.require=()=>n.e(48239).then(n.bind(n,348239)),t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t),(t.resolve=t.resolve||{}).childrenStates=[()=>{this.registerPeekStates(t)}],this.$stateProvider.state(t),this}peekState(e,t){let n=(t=this.getStateWithName(e,t)).name.split(".")[0];return this.peekStates[n]=this.peekStates[n]&&this.peekStates[n].concat(t)||[t],this}state(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this}registerPeekStates(e){if(e&&e.peekStates){let t={};if(t.name=e.name+".peek",!(Object.prototype.hasOwnProperty.call(this.addedStates,t.name)||null!=this.$state.get(t.name))){let i;t.onExit=[c.HV,A,(e,n)=>{i&&S.C.popBanner(t.name),e.close(t.name)}],t.resolve={offCanvasArgs:[A,n=>{let r=R.getPanelStateNameFromNextState(n.next.name,t.name),s=n.get(r),o=S.C.currentPanelBanner(),a=o&&"full"!==o.panelClass&&"full"===s.panelClass;return(2===r.split(P).length||a)&&(i=S.C.createBanner()),{banner:i,panelClass:s&&s.panelClass||"peek",pageTitle:s&&s.pageTitle,template:y.replace("{0}",this._getPanelName(e)),close:()=>(this.$rootScope.bbOffcanvasOpened&&n.go(e.name),!1),stateName:t.name,overlay:null==s||null==s.overlay||s.overlay}}]},e.peekViewName?(t.views={},t.views[e.peekViewName]={require:()=>Promise.resolve().then(n.bind(n,886739))}):t.require=()=>Promise.resolve().then(n.bind(n,886739)),this.$stateProvider.state(t)}this.createAllPeekStates(e,e.peekStates)}}createAllPeekStates(e,t){let n=e.name+P;t.forEach(t=>{(this.peekStates[t]||[]).forEach(t=>{this._checkAbsoluteUrl(t);let i=n+t.name;if(Object.prototype.hasOwnProperty.call(this.addedStates,i)||null!=this.$state.get(i))return;let s=r.copy(t);s.name=i,s.abstract||(s.urlHandler=["$location",A,"$match",(t,n,r)=>{var s,a;let l=e=>{let t=e.split("."),n=i.split(".");return t.forEach((e,t)=>{n[t]=e}),n.join(".")};if(!(null==n.$current.navigable||n.includes(e.name))&&(null===(s=n.get(n.$current.name))||void 0===s||!s.onChildStateEnter)&&(null===(a=n.get(i))||void 0===a||!a.onChildStateEnter))return!1;{let e;e=this._isAbsoluteUrl(t.url())?l(sessionStorage.getItem(o.Z.getBasePageStorageKey())||this.defaultBasePage):i,null==n.get(e)&&(e=l(this.defaultBasePage)),n.$current.name!==e&&n.transitionTo(e,r,{location:!1})}}]),s.views||(s.views={},s.views[this._getPanelName(e)]={template:s.template,controller:s.controller,require:s.require}),delete s.template,delete s.controller,delete s.require,s.getPageTitle&&(s.pageTitle=s.getPageTitle());let a=()=>{s.peekStates&&s.peekStates.length>0&&("full"===s.panelClass||s.allowChildPeekStates?this.registerPeekStates(s):this.createAllPeekStates(e,s.peekStates))};this.initAllStates?(this.$stateProvider.state(s),a()):((s.resolve=s.resolve||{}).childrenStates=[a],this.$stateProvider.state(s),s.peekStates&&s.peekStates.length>0&&!("full"===s.panelClass||s.allowChildPeekStates)&&this.createAllPeekStates(e,s.peekStates))})})}static getPanelStateNameFromNextState(e,t){let n=e.indexOf(P,t.length);return -1!==n?e.substr(0,n):e}_getPanelName(e){return e.name.split(".").join("-").concat("-panel@")}_checkAbsoluteUrl(e){if(e.url&&0===e.url.indexOf("^")){let t=e.url.match(/\/:[a-zA-Z]+/),n=e.url;t&&(n=n.substring(0,t.index));let i=(n=n.substring(1)).match(/\(\?:([^\)]*)/);i?i[1].split("|").forEach(e=>{this.absoluteUrls.push(`/${e}`)}):-1===this.absoluteUrls.indexOf(n)&&this.absoluteUrls.push(n)}}_isAbsoluteUrl(e){return i.find(this.absoluteUrls,t=>0===e.indexOf(t))}createAllStates(){this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach(e=>{this.registerPeekStates(e)})}createAllStatesOnInit(){this.initAllStates=!0}getStateWithName(e,t){return r.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t}_initStateEntitlements(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)}_initSystemEntitlementChecks(e){e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",m.HV,(t,n)=>n.hasSystemEntitlement(e.systemEntitlement).then(this._configureStateChangeCallback(t))])}_configureStateChangeCallback(e){return t=>{let n=e.defer();return t?n.resolve():n.reject({userNotEntitled:!0}),n.promise}}_ensureCourseIdParam(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")}_guardEntitlementInjectable(e){let t=Array.isArray(e)?e.slice(0,e.length-1):[];return["$q","$injector",A,...t,(n,r,s,...o)=>{let a=i.zipObject(t,o);return this._ensureCourseIdParam(n,s).then(()=>{try{return r.invoke(e,void 0,a)}catch(e){return n.reject(e)}}).then(this._configureStateChangeCallback(n)).catch(()=>n.reject({userNotEntitled:!0}))}]}_getDefaultEntitlementInjectable(e){return[m.HV,A,(t,n)=>"string"==typeof e?t.hasCourseEntitlement(e,n.nextParams.courseId):t.hasAnyCourseEntitlement(e,n.nextParams.courseId)]}_initCourseEntitlementChecks(e){let t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&Object.prototype.hasOwnProperty.call(e.resolve,"courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))}constructor(e,t){this.$stateProvider=e,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce","$window",c.HV,u.HV,T,h.H,g.HV,(e,t,n,i,r,a,l,c,u,p)=>{this.$state=t,this.$rootScope=e,this.defaultBasePage=c,this.context=l,this.timeout=u;let m=this.baseStates.map(e=>e.name);if(s.Z.OnRootScope(e,f.N.$stateChangeSuccess,(e,t)=>{r.top===r.self&&-1!==m.indexOf(t.name)&&(l.basePage=t.name,sessionStorage.setItem(o.Z.getBasePageStorageKey(),l.basePage))}),s.Z.OnRootScope(e,f.N.$stateChangeSuccess,(e,t,n,i,r)=>{if(i.name&&t.name&&i.name.split(P).length<t.name.split(P).length)return;let s=""===i.name,o=i.panelClass||"peek",l=t.panelClass||"peek";this.timeout(()=>{"peek"!==o||"full"!==l||s||a.expandTopPanel(),"full"===o&&"peek"===l&&a.shrinkTopPanel()},this.$rootScope,0,!1)}),s.Z.OnRootScope(e,f.N.$stateChangeStart,(e,i,r,s,o)=>{t.next=i,D(r),t.nextParams=r,s&&(t.prev={name:s.name}),D(o),t.prevParams=o,i.routingFunction&&(e.preventDefault(),n.invoke(i.routingFunction))}),s.Z.OnRootScope(e,f.N.$stateChangeError,(e,n,r,s,o,a)=>{if(a.errorModalConfig&&p.openModal(a.modalConfig),a&&a.userNotEntitled)t.go(c);else if(a.goToBasePage)t.goCurrentBasePage();else if(a.isExpectedBehavior);else{if(b.re("inPreviewMode",window.location.href)){let e=i.trustAsResourceUrl(b.uI(`/ultra/courses/${t.nextParams.courseId}/outline/?inPreviewMode=true`));I(window.parent.document).find("#preview-iframe").attr("src",e)}if(!d.default.production)throw console.error("$stateChangeError when moving from "+s.name+" to "+n.name),a}}),this.initAllStates)this.createAllStates();else{this.registerPeekStates(t.get(this.defaultBasePage));let e=t.get(sessionStorage.getItem(o.Z.getBasePageStorageKey())||this.defaultBasePage);e&&e.name!==this.defaultBasePage&&this.registerPeekStates(e)}return t}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],e.decorator("resolve",function(e,t){let n=t?t(e):e.resolve;return n.childrenStates&&n.childrenStates.length>0&&n.childrenStates.push(i.once(n.childrenStates.pop())),n}),e.decorator("resolve",function(e,t){let n=t?t(e):e.resolve;for(let e of Object.keys(n)){let t=n[e],r=x(e,e);r.optional&&(delete n[e],n[e=r.name]=t);let s=function(e){if(i.isString(e))return e;let t=e[e.length-1];return i.isString(t)?t:""}(t);if(s){let t=x(s,e);t.searchParents?n[e]=[t.name,e=>e&&e.isLazy?e():e]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(r.optional){let t=n[e],r=t.slice?t.slice(0,t.length-1):[];n[e]=["$injector",...r,(e,...n)=>{let s=i.once(()=>{let i={};for(let e=0;e<r.length;e++)i[r[e]]=n[e];return e.invoke(t,void 0,i)});return s.isLazy=!0,s}]}}return n}),e.decorator("url",function(e,n){let i=n(e);return i&&(i.exec=function(n,...s){let o=this.regexp.source;RegExp(o.substr(0,o.length-1)+"/").test(n)&&t.invoke(e.resolve.childrenStates||[r.noop]);let a=s?[n].concat(s):[n];return i.constructor.prototype.exec.apply(this,a)}),i}),(t=>{let n=this;e.state=function(...e){return n.addedStates["string"==typeof e[0]?e[0]:e[0].name]=!0,t.apply(this,e)}})(e.state)}}R.$inject=["$stateProvider","$injector"],r.module(w,["ui.router","oc.lazyLoad",u.e1,c.e1,l.moduleName,h.e]).provider(A,R).constant(T,d.default.defaultBasePage).config(["$provide","$ocLazyLoadProvider",(e,t)=>{e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad","$rootScope",u.HV,c.HV,(e,t,n,s,o,l,d,u,m)=>{t.goPeekState=(...e)=>{if(t.current.onChildStateEnter){let n=e[0],i=t.current.onChildStateEnter(t,n);if(i)return t.go(i.stateName,{...i.args,...e[1]},e[2])}return m.getTopElement().then(n=>{let i=n&&n.name||u.basePage;return t.getPeekStateName(e[0],i).then(n=>(e[0]=n,t.go.apply(t,e)))})},t.leavePeekState=e=>{null==e&&(e=t.current.name);let n=e.lastIndexOf(P);return -1!==n?t.go(e.substring(0,n)):s.when()},t.peekHref=(e,n,i)=>(i?s.when(new c.AE(null,null,i)):m.getTopElement()).then(r=>(i=r&&r.name||u.basePage,t.getPeekStateName(e,i).then(e=>t.href(e,n)))),t.isPeekPanelOpen=()=>-1!==t.current.name.indexOf(".peek."),t.getPeekStateName=(n,i)=>i===u.basePage?s.when(i+P+n):m.getElement(i).then(()=>{let e=R.getPanelStateNameFromNextState(t.current.name,i),r=e.lastIndexOf(P),s=t.current.name.substring(r+P.length).split(".")[0],o=n.split(".")[0];if(s===o)return t.current.name.substring(0,r+P.length)+n;let a=n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),l=RegExp("(^|\\.)"+a+"(\\.|$)"),c=e.search(l);if(-1!==c){let t=RegExp("(^|\\.)"+a+"(\\.)");return c=e.search(t)?c+1:c,e.substring(0,c+n.length)}let d=t.get(e);return"full"===d.panelClass||d.allowChildPeekStates&&-1!==d.peekStates.indexOf(o)?e+P+n:e.substring(0,r+P.length)+n}).then(n=>{let i=function(n){if(!t.get(n.join("."))){let e=n.pop();i(n),n.push(e)}e.invoke((t.get(n.join("."))&&t.get(n.join(".")).resolve||{}).childrenStates||[r.noop])};return i(n.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),n}),t.goCurrentBasePage=()=>t.go(t.getBaseState()),t.goToRoute=(e,n)=>t.go(e,n),t.getBaseState=()=>u.basePage,t.search=(e,n,i)=>{let s=t.params;if(r.isString(e)&&n?s[e]=n:Object.keys(e).forEach(t=>{s[t]=e[t]}),t.current.name)return t.go(t.current.name,s,i)},t.getCurrentUrlParams=()=>{let e=t.$current.url.parameters(),n=Object.create(null);return e.forEach(e=>{t.params[e]&&(n[e]=t.params[e])}),n},t.requireAllStates=function(){let e=this,t=this.get(),n=[];return t.forEach(t=>{t&&null!=t.name&&n.push(e.requireState(t.name))}),s.all(n)},t.requireState=function(t){let n=this,o=t.split("."),c=[];for(let e=0;e<o.length;e++)c.push(o.slice(0,e+1).join("."));let d=()=>{let t=c.shift();if(null==t)return!0;let o=n.get(t);if(!o)return d();let u=[],p=[];if(o.require&&(r.isArray(o.require)||(o.require=[o.require]),u=u.concat(o.require),p.push(o)),o.views&&r.isObject(o.views)&&Object.keys(o.views).forEach(e=>{let t=o.views[e];t.require&&(r.isArray(t.require)||(t.require=[t.require]),u=u.concat(t.require),p.push(t))}),u.length<1)return d();let m=s.defer(),h=[],g=new Map,f=u.map(async t=>{var n;let i=(null===(n=t.$inject)||void 0===n?void 0:n.length)?await e.invoke(t):await t();return i&&g.set(t,i),i});return s.all(i.compact(f)).then(()=>{p.forEach(e=>{r.isArray(e.require)&&(e.require.forEach(t=>{let n=g.get(t),i=n.panelDefinition||{},s=i&&i.moduleName||n.moduleName;s&&h.push(l.load({name:s}));let c=i&&i.template||n.template;c&&!e.template&&(e.template=c);let d=i&&i.templateProvider||n.templateProvider;d&&(e.templateProvider=d);let u=i&&i.controllerName||n.controllerName;u&&!e.controller&&(e.controller=u);let p=i&&i.resolve;p&&(e.resolve=r.extend(e.resolve||{},p));let m=i&&i.translations;m&&(e.resolve=r.extend(e.resolve||{},{loadedTranslations:["$q",a.serviceName,(e,t)=>e.all(m.map(e=>t.loadBundle(e)))]}));let f=i&&i.pageTitle;f&&!o.pageTitle&&(o.pageTitle=f)}),e.require=!1)}),s.all(i.compact(h)).then(()=>{m.resolve(d())},e=>{m.reject(e)})},e=>{m.reject(e)}),m.promise};return d()};let h=t.transitionTo;t.transitionTo=function(...e){let t=this,n=e[0];return r.isObject(n)&&(n=n.self.name),s.all([this.requireState(n)]).then(()=>h.apply(t,e))};let g=t.href;t.href=(e,t,n)=>g(e,t,r.extend(n||{},{absolute:!0})),t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}};let b=(e,n)=>!!n&&!!n.name&&(e===p.c6&&"resolve"in n&&e in n.resolve||e===p.uh&&"resolve"in n&&e in n.resolve||b(e,t.get(i.dropRight(n.name.split(".")).join("."))));return t.hasCourseInContext=e=>b(p.c6,e),t.hasContentInContext=e=>b(p.uh,e),C.Nd.setRouteHandler({goPeekState:(e,...n)=>(0,E.h)(t.goPeekState(e,...n)),goToRoute:(e,n)=>(0,E.h)(t.goToRoute(e,n)),leavePeekState:e=>(0,E.h)(t.leavePeekState(e)),getPeekHref:(e,n,i)=>(0,E.h)(t.peekHref(e,n,i)),getHref:(e,n,i)=>t.href(e,n,i),search:(e,n)=>(0,E.h)(t.search(e,null,n)),onRouteChanging:e=>d.$on(f.N.$stateChangeStart,(t,n,i,r,s)=>{e({toState:n,toParams:i,fromState:r,fromParams:s,preventRouteChange:t.preventDefault.bind(t)})})}),t}])}]),r.module(w).run(["$rootScope",A,u.HV,T,function(e,t,n,i){let r=sessionStorage.getItem(o.Z.getBasePageStorageKey());r?n.basePage=r:n.basePage=i,e.$on(f.N.$stateChangeSuccess,(n,i,r,s,o)=>{let a=t.hasCourseInContext(s),l=t.hasCourseInContext(i);a!==l&&e.$broadcast(f.N.$stateHasCourseInContextChanged,l,a);let c=t.hasContentInContext(s),d=t.hasContentInContext(i);c!==d&&e.$broadcast(f.N.$stateHasContentInContextChanged,d,c);let u=i.name&&(0,v.zb)(i.name),p=s.name&&(0,v.zb)(s.name);(0,v.ku)(u,p)})}])},754923:function(e,t,n){"use strict";n.d(t,{HV:function(){return c},e1:function(){return l}});var i=n(362767),r=n(411832),s=n(302032),o=n(12838);function a(e,t){return function(n,i){t(n,i,e)}}let l="ultra.components.services.unsafe-html",c="unsafe-html";class d{hasEditUnsafeHtmlPermission(e){return e?this.entitlementService.hasSystemEntitlement(o.jx.Modify):this.entitlementService.hasCourseEntitlement(o.jx.Modify)}isAlternateDomainConfigured(){return this.contextService.getSystemInfo().alternateDomainConfigured}canEditUnsafeHtml(e=!1){return this.hasEditUnsafeHtmlPermission(e).then(e=>e&&this.isAlternateDomainConfigured())}constructor(e,t){this.contextService=e,this.entitlementService=t}}d=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([a(0,(0,s.tB)(i.HV)),a(1,(0,s.tB)(r.HV))],d),angular.module(l,[i.e1,r.e1]).service(c,d)},610761:function(e,t,n){"use strict";n.d(t,{HV:function(){return l},e1:function(){return a}});var i=n(464027),r=n(276635),s=n(45367),o=n(625506);let a="ultra.services.windowSize",l="windowSizeService";class c{isSmallBreakpoint(){return this.currentWindowSizeEm<=s.YJ}isMediumBreakpoint(){return this.currentWindowSizeEm>s.YJ&&this.currentWindowSizeEm<=s.MR}isLargeBreakpoint(){return this.currentWindowSizeEm>s.MR}getBreakpointSize(){return this.currentWindowSizeEm<=s.YJ?"small":this.currentWindowSizeEm<=s.MR?"medium":"large"}isWindowSizeAtLeast(e){return this.currentWindowSizeEm>=e}constructor(e){this.$rootScope=e,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=o(window).width()/parseFloat(o("html").css("font-size"));let t=(0,r.throttle)(()=>{let e=window.innerWidth/parseFloat(o("html").css("font-size"));e!==this.currentWindowSizeEm&&this.$rootScope.$apply(()=>{this.currentWindowSizeEm=e,this.$rootScope.$broadcast("window-resize",this.currentWindowSizeEm)})},100);window.addEventListener("resize",t)}}c.$inject=["$rootScope"],i.module(a,[]).service(l,c)},24032:function(e,t,n){"use strict";var i,r;n.d(t,{E:function(){return i}}),(r=i||(i={})).ASCENDING="ascending",r.DESCENDING="descending",r.NONE="none",r.OTHER="other"},667094:function(e,t){"use strict";var n,i;(i=n||(n={})).ModifyException="course.assessment.exceptions.MODIFY",i.ViewException="course.assessment.exceptions.VIEW",t.Z=n},374716:function(e,t){"use strict";var n,i;(i=n||(n={})).NothingToGrade="NOTHING_TO_GRADE",i.NeedsGrading="NEEDS_GRADING",i.NeedsPosting="NEEDS_POSTING",i.AllPosted="ALL_POSTED",i.AllGraded="ALL_GRADED",i.Restricted="RESTRICTED",t.Z=n},291830:function(e,t,n){"use strict";var i=n(259197);t.Z=i.GQk},827536:function(e,t,n){"use strict";var i,r;n.d(t,{k:function(){return s}}),(r=i||(i={})).Root="ROOT",r.Interactive="INTERACTIVE",r.Indirect="INDIRECT";let s=()=>Object.values(i);t.Z=i},519636:function(e,t,n){"use strict";var i,r;n.d(t,{L:function(){return s}}),(r=i||(i={})).Discussions="discussions",r.Participants="participants",r.StudentActivity="studentActivity";let s=e=>Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase());t.Z=i},711976:function(e,t){"use strict";var n,i;(i=n||(n={})).Assign="assign",i.Unassign="unassign",i.Delete="delete",i.Retain="retain",t.Z=n},12838:function(e,t,n){"use strict";n.d(t,{mV:function(){return W},iL:function(){return K.Z},Pq:function(){return G},uo:function(){return Z},MN:function(){return _.Z},eo:function(){return Q},GQ:function(){return M.Z},e6:function(){return B.Z},MQ:function(){return U},s7:function(){return J},hI:function(){return D},b0:function(){return Y},kZ:function(){return V.Z},Zg:function(){return X},pQ:function(){return ee},i3:function(){return H.Z},e3:function(){return q},GZ:function(){return z},lP:function(){return en.Z},dF:function(){return ei},ZG:function(){return j},jH:function(){return er},jx:function(){return et}}),(f=b||(b={})).Text="textBlock",f.Html="htmlBlock",f.File="fileBlock",f.AttemptFile="attemptFileBlock";var i,r,s,o,a,l,c,d,u,p,m,h,g,f,b,v,y,S,C,E,I,w,A,k,T,P,D,x,R,L,N,$,O,G=b;(i=v||(v={})).SingleText="SingleText",i.SingleFile="SingleFile",i.TextAndFiles="TextAndFiles",(r=y||(y={})).Add="ADD",r.Subtract="SUBTRACT",r.Multiply="MULTIPLY",r.Divide="DIVIDE",r.Open_Parenthesis="OPEN_PARENTHESIS",r.Close_Parenthesis="CLOSE_PARENTHESIS",r.Value="VALUE";var _=n(374716),M=n(291830),B=n(827536);class F{constructor(e,t){this.keys=t,this.value=e,this.keys.buttonKey||(this.keys.buttonKey="base.courses.conversion.ok")}}F.ConversionInProgress=new F("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),F.ConversionComplete=new F("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),F.OrgConversionInProgress=new F("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),F.OrgConversionComplete=new F("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),F.StudentTryAgain=new F("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),F.StudentNoLongerAccessible=new F("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),F.ParticipantTryAgain=new F("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),F.ParticipantNoLongerAccessible=new F("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),F.None=new F("None",{titleKey:"",bodyKey:""});var U=F,V=n(519636);(s=S||(S={})).Assignment="Assignment",s.Test="Test",s.Exam="Exam",s.Homework="Homework",s.Presentation="Presentation",s.Survey="Survey",s.Quiz="Quiz",(o=C||(C={})).Letter="Letter",o.Percentage="Percentage",o.Points="Points",o.Text="Text",o.CompleteIncomplete="Complete/Incomplete";var H=n(610419);(a=E||(E={})).Email="email",a.Mobile="mobile",a.SMS="sms",a.Voice="voice",a.Dashboard="dashboard";var q=E;n(587176),(l=I||(I={})).Available="AVAILABLE",l.Opened="OPENED",l.Started="STARTED",l.Saved="SAVED",l.Submitted="SUBMITTED";var j=I;n(186085),(c=w||(w={})).SingleOccurrence="S",c.PeriodicOccurrence="P";var z=w;(d=A||(A={})).ViewPostedCourseAnnouncement="course.announcements.VIEW",d.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",d.CreateCourseAnnouncement="course.announcements.CREATE",d.ModifyCourseAnnouncement="course.announcements.MODIFY",d.DeleteCourseAnnouncement="course.announcements.DELETE",d.ViewPostedSystemAnnouncement="system.announcements.VIEW",d.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",d.CreateSystemAnnouncement="system.announcements.CREATE",d.ModifySystemAnnouncement="system.announcements.MODIFY",d.DeleteSystemAnnouncement="system.announcements.DELETE";var W=A,K=n(667094);(k||(k={})).ViewCalendar="course.calendar.VIEW";var Z=k;(u=T||(T={})).CreateContent="course.content.CREATE",u.DeleteContent="course.content.DELETE",u.ModifyContent="course.content.MODIFY",u.ViewContent="course.content.VIEW",u.ViewAsDesigner="course.content.designer.VIEW",u.DeployAssessment="course.content.assessment.deploy.EXECUTE",u.ModifyContentAvailability="course.content.availability.MODIFY";var Q=T;(p=P||(P={})).DeleteAdaptiveRelease="course.adaptiverelease.DELETE",p.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",p.ViewAdaptiveRelease="course.adaptiverelease.VIEW",p.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",p.DeleteAssessment="course.assessment.DELETE",p.ModifyAssessment="course.assessment.MODIFY",p.ViewAssessment="course.assessment.VIEW",p.ModifyAttendance="course.attendance.MODIFY",p.ViewAttendance="course.attendance.VIEW",p.ViewChildCourse="course.children.VIEW",p.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",p.ModifyDueDateException="course.duedate-exception.MODIFY",p.ViewTimeLimitAccomodation="course.timelimit-exception.VIEW",p.ViewDueDateException="course.duedate-exception.VIEW",p.ViewPreviewStudent="course.user-impersonate.EXECUTE",p.ModifyBannerImage="course.banner.MODIFY",p.ModifyBannerVisibility="course.banner.visibility.MODIFY",p.ViewFileManagement="course.coursefiles.EXECUTE",p.ViewAnalyticsInstructorReport="course.statistics.report.VIEW",p.ViewAnalyticsStudentReport="course.tools.VIEW",p.ViewCourseSettingsConsole="course.configure-properties.EXECUTE",p.ViewGradebookMetaData="course.gradebook-metadata.VIEW",p.DurationConfiguration="course.configure-duration.EXECUTE",p.ToolConfiguration="system.configure-tools.EXECUTE",p.ViewAchievements="course.achievements.VIEW",p.ModifyAchievements="course.achievements.MODIFY";var J=P;(D||(D={})).CourseExportArchiveWithPassword="course.archive.user.password.EXECUTE",(m=x||(x={})).CreateRubrics="course.rubrics.CREATE",m.ModifyRubrics="course.rubrics.MODIFY",m.ViewRubrics="course.rubrics.VIEW";var Y=x;(R||(R={})).EmailAllUsers="course.email-all-users.EXECUTE";var X=R;(h=L||(L={})).CreateGroups="course.groups.CREATE",h.DeleteGroups="course.groups.DELETE",h.ModifyGroups="course.groups.MODIFY",h.ViewGroups="course.groups.VIEW",h.ViewGroupsAsAdmin="course.groups.admin.VIEW",h.ManageGroupMembership="course.group-user.manage.EXECUTE";var ee=L;(N||(N={})).Modify="content.embedded-iframe.MODIFY";var et=N,en=n(256334);(g=$||($={})).CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",g.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",g.ViewBrand="system.portaloptions.brand.VIEW",g.CreateBrand="system.portaloptions.brand.CREATE",g.ModifyBrand="system.portaloptions.brand.MODIFY",g.DeleteBrand="system.portaloptions.brand.DELETE",g.ModifyUltraThemeData="system.ultra.themedata.MODIFY",g.ViewBuildingBlock="system.buildingblocks.VIEW",g.CreateMessage="course.conversations.message.CREATE",g.ViewCourseEnrollments="system.user.course.enrollment.VIEW",g.ViewMaterialSettings="course.content.designer.VIEW";var ei=$;(O||(O={})).ModifyContent="content.trustedcontent.MODIFY";var er=O},610419:function(e,t){"use strict";var n,i;(i=n||(n={})).Outline="outline",i.Inline="inline",t.Z=n},587176:function(e,t){"use strict";var n,i;(i=n||(n={})).NotStarted="NotStarted",i.Started="Started",i.Completed="Completed",i.PastDue="PastDue",i.Unavailable="Unavailable",t.Z=n},256334:function(e,t){"use strict";var n,i;(i=n||(n={})).ViewAdmin="system.admin.VIEW",i.ViewAdminTop="system.administration.top.VIEW",i.ViewAdminSupportPanel="system.admin.support.panel.VIEW",i.ModifyCustomCss="system.ultra.customCSS.MODIFY",i.ViewBrands="system.portaloptions.brand.VIEW",i.CreateBrand="system.portaloptions.brand.CREATE",i.ModifyBrand="system.portaloptions.brand.MODIFY",i.DeleteBrand="system.portaloptions.brand.DELETE",t.Z=n},186085:function(e,t){"use strict";var n,i;(i=n||(n={})).Continuous="CONTINUOUS",i.DateRange="DATE_RANGE",i.FixedNumDays="FIXED_NUM_DAYS",t.Z=n},14482:function(e,t,n){"use strict";n.d(t,{e:function(){return h}}),n(788093);var i=n(625506),r=n(464027),s=n(12838),o=n(676954),a=n(812479),l=n(555840),c=n(65286),d=n(808361),u=n(19935),p=n(473011),m=n(563060);let h="ultra.base.routes";r.module(h,[o.moduleName,l.e1,u.e1]).config([d.e2,u.e2,(e,t)=>{e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":r.noop},peekStates:[m.Z5.Calendar.CALENDAR_SETTINGS,m.Z5.Calendar.CREATE_EVENT,m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Calendar.OFFICE_HOURS,"content-manage","assignment","assessment","course",m.Z5.Lti.LTI,"scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:()=>Promise.all([n.e(79069),n.e(23608),n.e(85790),n.e(71103),n.e(54769)]).then(n.bind(n,956848)),pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/calendar/base-calendar")],"?courseMembershipsLoader":r.noop},peekStates:[m.Z5.Calendar.CALENDAR_SETTINGS,m.Z5.Calendar.CREATE_EVENT,m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Calendar.OFFICE_HOURS,m.Z5.Lti.LTI,m.Z5.Lti.LTI_LAUNCH_PEEK,"content-manage","assignment","course","assessment","scorm-overview"],require:()=>Promise.all([n.e(79069),n.e(23608),n.e(85790),n.e(71103),n.e(54769)]).then(n.bind(n,956848)),pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([n.e(42641),n.e(87844),n.e(22019),n.e(5252),n.e(83670)]).then(n.bind(n,697416)),pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/grades/base-grades")],"?courseMembershipsLoader":[r.noop]},require:()=>Promise.all([n.e(42641),n.e(87844),n.e(91263),n.e(23608),n.e(89069)]).then(n.bind(n,855066)),peekStates:["assessment","assignment",m.Z5.Grade.GRADE_AND_FEEDBACK,"gradebook-item","telemetry","course","discussion",m.Z5.Lti.LTI,"scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",m.Z5.Journal.JOURNAL,m.Z5.Telemetry.INSTRUCTOR_CLASS,m.Z5.Telemetry.INSTRUCTOR_DETAILS,m.Z5.Telemetry.STUDENT_PROGRESS,"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/messages/base-messages")],[u.gc]:t.resolve},require:()=>Promise.all([n.e(42641),n.e(87844),n.e(4302),n.e(60747),n.e(10570),n.e(13980)]).then(n.bind(n,671641)),peekStates:["create-message","edit-message",m.Z5.Course.COURSE_MESSAGE,"course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/courses/base-courses")]},peekStates:["course","external",m.Z5.Calendar.COURSE_SCHEDULE,m.Z5.Course.EDIT_BANNER],peekViewName:"courses-base",require:()=>Promise.all([n.e(42641),n.e(87844),n.e(22019),n.e(5252),n.e(83670)]).then(n.bind(n,697416)),pageTitle:"base.nav.organizations"}).baseState(m.Z5.Profile.PROFILE_BASE,{url:"^/profile",resolve:{userConfiguration:["$q",l.EA.HV,(e,t)=>t.getUserConfiguration().then(t=>e.resolve(t)).catch(t=>e.resolve(void 0))],translations:[o.serviceName,e=>e.loadBundle("features/base/profile/base-profile")],isMobileDistributorActive:["$q",l.g8.H,(e,t)=>t.$build().courseSettings.$new(s.e3.Mobile).$fetch().$allow([400]).$then(e=>!!e.settings)],memberships:[c.HV,e=>e.reloadStreamMemberships()]},require:()=>Promise.all([n.e(19338),n.e(17538),n.e(69448),n.e(8068),n.e(77246)]).then(n.bind(n,630406)),peekStates:["notification-settings",m.Z5.Profile.UPDATE_AVATAR_PEEK,m.Z5.Profile.UPDATE_PROFILE_PEEK,m.Z5.Profile.UPDATE_LANGUAGE_PEEK,m.Z5.Profile.UPDATE_PASSWORD_PEEK,"privacy"],pageTitle:"base.nav.profile",onEnter:["$location",e=>{e.search("noCache",null)}]}).baseState("base.recentActivity",{resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/stream/base-stream")],memberships:[c.HV,e=>e.reloadStreamMemberships()],"?courseMembershipsLoader":r.noop},peekStates:["announcement",m.Z5.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment","content-manage","content-group","course","discussions",m.Z5.Calendar.EDIT_EVENT,m.Z5.Calendar.VIEW_EVENT,"gradebook-item","stream-message","telemetry",m.Z5.Lti.LTI,"content-group-enroll","notification-create","notification-settings","scorm-overview","scorm-launch-frame","scorm",m.Z5.Telemetry.INSTRUCTOR_CLASS,m.Z5.Telemetry.INSTRUCTOR_DETAILS,m.Z5.Telemetry.STUDENT_HIGH_PERFORMANCE,m.Z5.Telemetry.STUDENT_LOW_ACTIVITY,m.Z5.Telemetry.STUDENT_LOW_GRADES,m.Z5.Telemetry.STUDENT_PROGRESS,m.Z5.Telemetry.STUDENT_FIND_A_STUDY_PARTNER],peekViewName:"base-recentActivity-base",url:"^/stream",require:()=>Promise.all([n.e(80580),n.e(34928),n.e(99298),n.e(67849),n.e(48624)]).then(n.bind(n,761858)),pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/tools/base-tools")]},peekStates:[m.Z5.Lti.LTI],require:()=>n.e(37470).then(n.bind(n,437470)),pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/admin/base-admin")]},systemEntitlement:s.lP.ViewAdmin,onEnter:()=>{i("body").addClass("base-admin-open")},onExit:()=>{i("body").removeClass("base-admin-open")},url:"^/admin",require:()=>n.e(27492).then(n.bind(n,927492)),peekStates:["course","localization","brands","notification-admin",m.Z5.Admin.ULTRA_SETTINGS_PEEK,m.Z5.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:()=>n.e(3890).then(n.bind(n,903890)),pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[o.serviceName,e=>e.loadBundle("features/base/admin/localization")],enterCheck:[d.HV,"$stateParams",(e,t)=>{if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState(m.Z5.Admin.ULTRA_SETTINGS_PEEK,{url:"/ultra-settings",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(61056),n.e(22258),n.e(90119),n.e(94996)]).then(n.bind(n,609437)),pageTitle:"base.nav.ultra-settings-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:()=>n.e(87397).then(n.bind(n,287397)),pageTitle:"base.nav.notification-admin",panelClass:"full"}).peekState(m.Z5.Admin.ULTRA_EDIT_APPROVED_PRONOUNS_PEEK,{url:"/edit-pronouns",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(61056),n.e(22258),n.e(90119),n.e(62402)]).then(n.bind(n,612313)),pageTitle:"base.nav.edit-pronouns-admin",panelClass:"peek"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:()=>n.e(10430).then(n.bind(n,310430))}).baseState("base.institution-page",{url:"^/institution-page",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(15025)]).then(n.bind(n,15025)),peekStates:["allLinks",m.Z5.Lti.LTI],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[a.HV,d.HV,(e,t)=>e.getEffectiveVariantIdWithPermissions().then(({variantId:e,canView:n})=>{if(n)return e;t.goToRoute("base.recentActivity")},()=>t.goToRoute("base.recentActivity"))]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:()=>Promise.all([n.e(98290),n.e(62101),n.e(22258),n.e(15025)]).then(n.bind(n,15025)),peekStates:["allLinks","editModule","editPageImage","createModule",m.Z5.Lti.LTI,"brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[a.HV,d.HV,"$stateParams",(e,t,n)=>e.getUserCanEdit("default").then(e=>(e||t.goToRoute("base.recentActivity"),n.variantId),()=>t.goToRoute("base.recentActivity"))],testResolver:["ipVariantId",e=>e]}}).state("institution",{onEnter:()=>{window.location.href=p.uI("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:()=>n.e(1464).then(n.bind(n,801464)),pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:()=>n.e(1464).then(n.bind(n,801464)),pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[o.serviceName,e=>e.loadBundle("features/course/course-catalog")]}}).baseState(m.Z5.Integration.INTEGRATION_BASE,{url:"^/integration/:routeName?params",require:()=>n.e(76839).then(n.bind(n,876839))})}])},89503:function(e,t,n){"use strict";n.d(t,{BP:function(){return l},Kn:function(){return i},Mc:function(){return o},dX:function(){return a},j7:function(){return s},sg:function(){return r}});let i="EVENT_ATTEMPT_SAVING_START",r="EVENT_ATTEMPT_SAVING_DONE",s="EVENT_ATTEMPT_SUBMITTING_START",o="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE",l="bb-assessment-persist-pending-saves"},401760:function(e,t,n){"use strict";n.d(t,{db:function(){return c},e1:function(){return l},ef:function(){return d}});var i=n(464027),r=n(4695),s=n(676954),o=n(808361),a=n(245779);let l="ultra.course.content.assessment.question-goal-alignment",c="question-goal-alignment",d="question-goal-alignment-for-student",u=["course","goal-alignment","goal"];class p extends a.Z{resolveGoalAlignableContent(){return["$q","currentCourse",s.serviceName,o.HV,(e,t,n,i)=>e.all([t.assessments.$buildRaw({id:i.nextParams.assessmentId}).questions.$find(i.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),n.loadBundle(`features/${u.join("/")}`)]).then(([e])=>this.setupGoalAlignableContent(e,n))]}getPeekStateName(){return c}getOverrideSubTitle(){return[s.serviceName,o.HV,(e,t)=>e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})]}setupGoalAlignableContent(e,t){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${u.join(".")}.goalsAlignedWithThisQuestion`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:(null==e?void 0:e.alignedGoals)||[]}]}constructor(...e){super(...e),this.url="/goalAlignment/:assessmentId/:questionId/:questionIndex",this.panelClass="peek assessment-question-goal-peek"}}p.$inject=["$injector","$q"];class m extends p{resolveGoalAlignableContent(){return["$q","currentCourse","contentData",s.serviceName,o.HV,(e,t,n,s,o)=>{let a=e.when(null);return n.courseContent.isGroupContent&&n.groupAttempt?a=t.gradebook.groupAttempts.$find(n.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!n.courseContent.isGroupContent&&n.attempt&&(a=t.gradebook.attempts.$find(n.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),e.all([a,s.loadBundle(`features/${u.join("/")}`),s.loadBundle("components/directives/assessment/assessment-question")]).then(([e])=>{let t={};if(e){let s=e.getToolAttemptDetailItem(n.gradingColumn.scoreProviderHandle);(s&&s.questionAttempts||[]).forEach(e=>{e.question&&e.question.id===o.nextParams.questionId&&(t=i.extend(e.question,{getContentIdForGoalAlignment(){return(0,r.xR)(r.F$.Asi,e.question.id)},isCurrentUserEligibleToAlignGoals(){return!1}}))})}return this.setupGoalAlignableContent(t,s)})}]}getPeekStateName(){return d}}i.module(l,[o.e1,s.moduleName]).config([o.e2,e=>{[new p,new m].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}])},665673:function(e,t,n){"use strict";n.d(t,{e:function(){return E}}),n(788093);var i=n(464027),r=n(676954),s=n(860995),o=n(289319),a=n(808361),l=n(259197),c=n(563060),d=n(363411),u=n(986709),p=n(620507),m=n(567361),h=n(302032);function g(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function f(e,t,n){var i=g(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function b(e,t){return function(n,i){t(n,i,e)}}let v={moduleName:"ultra.document.create.react",controllerName:"ultra.document.create.react.controller",serviceName:"ultra.document.create.react.service"};var y=new WeakMap;class S{async createAndOpenDocument(){var e;if((e=g(this,y,"get")).get?!e.get.call(this):!e.value)try{f(this,y,!0);let e=await this.createPage();e.id&&(await this.createDocument(e.id),await this.openDocument(e.id))}finally{f(this,y,!1)}}async createPage(){var e;let{content:t}=await this.contentService.makeContentInContentTree(this.contentService.findRootNode(this.currentCourseService.course,p.e6.Root),this.currentCourseService.courseId,this.ultraState.params.parentId,this.ultraState.params.positionBefore,this.ultraState.params.positionAfter);return Object.assign(t,{title:this.localize.translateSync({key:"documents.panel.newTitle",params:{date:new Date},noEscape:!0,noWrap:!0,locale:null!==(e=this.localize.getCourseLocale(this.currentCourseService.course))&&void 0!==e?e:this.localize.getAppLocale()}),isAvailable:!1,isPartiallyVisible:!1,visibility:u.hbA.Hidden,contentHandler:l.GQk.Folder,contentDetail:{[l.GQk.Folder.toString()]:{isBbPage:!0}}}),t.$save().$asPromise()}async createDocument(e){let{content:t}=await this.contentService.makeContentInContentTree(this.contentService.findRootNode(this.currentCourseService.course,p.e6.Root),this.currentCourseService.courseId,e);return Object.assign(t,{contentHandler:l.GQk.Document,title:"ultraDocumentBody"}),t.$save().$asPromise()}openDocument(e){let t=c.SS.Document({id:e,view:"content"});return this.ultraState.goPeekState(t.routeName,t.getArgs(),{location:"replace"})}constructor(e,t,n,i){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(this,y),y.set(this,{writable:!0,value:void 0}),this.contentService=e,this.ultraState=t,this.localize=n,this.currentCourseService=i,f(this,y,!1)}}async function C(e,t){await t.createWaiter(l.x40.ReactDocuments)&&await e.createAndOpenDocument()}S=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([b(0,(0,h.tB)(m.HV)),b(1,(0,h.tB)(a.HV)),b(2,(0,h.tB)(r.serviceName)),b(3,(0,h.tB)(s.HV))],S),C.$inject=[v.serviceName,d.HV],angular.module(v.moduleName,[m.e1,s.e1,r.moduleName,a.e1]).service(v.serviceName,S).controller(v.controllerName,class{});let E="ultra.course.contentCreate.routes";async function I(e){return await e.createWaiter(l.x40.ReactDocuments)?v:Promise.all([n.e(62101),n.e(4302),n.e(80118),n.e(12820),n.e(8242)]).then(n.bind(n,321287))}async function w(e){return await e.createWaiter(l.x40.ReactDocuments)?n.e(51287).then(n.bind(n,151287)):Promise.all([n.e(62101),n.e(4302),n.e(80118),n.e(12820),n.e(8242)]).then(n.bind(n,321287))}I.$inject=[d.HV],w.$inject=[d.HV],i.module(E,[r.moduleName,s.e1,o.e1,a.e1,d.e1,v.moduleName]).config([a.e2,s.e2,o.e2,(e,t,i)=>{e.peekState("content-manage.create.document",{panelClass:"full",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")],[s.gc]:t.resolve,[o.gc]:i.resolve,[C.name]:C},reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:I,peekStates:[c.XO.DOCUMENT,"document-settings","conversations","edit-file-settings",c.BQ.COURSE_MESSAGE,c.UM.LTI,c.cw.CONTENT_MARKET,c.xh.CONTENT_COLLECTION,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL,c.xh.CONTENT_COLLECTION_PICKER,c.XO.GENERATE_DOCUMENT_QUESTIONS,c.Jp.EDIT_QUESTION_BANK],pageTitle:"course.content.document.title"}).peekState(c.XO.DOCUMENT,{panelClass:"full",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")],[s.gc]:t.resolve,[o.gc]:i.resolve},peekViewName:"document-peek@",url:"/document/:id?courseId&view",require:w,peekStates:["document-settings","conversations","edit-file-settings",c.BQ.COURSE_MESSAGE,c.UM.LTI,c.cw.CONTENT_MARKET,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL,c.xh.CONTENT_COLLECTION_PICKER,c.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,c.XO.GENERATE_DOCUMENT_QUESTIONS,c.Jp.EDIT_QUESTION_BANK],pageTitle:"course.content.document.title"}).peekState(c.rJ.WEB_LINK_LAUNCH_FRAME,{panelClass:"full",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")],[s.gc]:t.resolve},url:"/launchFrame?contentId&toolHref",require:()=>n.e(69561).then(n.bind(n,469561)),pageTitle:"courseCore.course.webLinkLaunchFrame.title"}).peekState("document-settings",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/document-settings/:id",params:{focusEleId:null},require:()=>Promise.all([n.e(80118),n.e(36005)]).then(n.bind(n,536005)),peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS],pageTitle:"course.content.document.settings.header"}).peekState(c.XO.GENERATE_DOCUMENT_QUESTIONS,{url:"/generate-document-questions",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")],[o.gc]:i.resolve},require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(59373)]).then(n.bind(n,63022))],pageTitle:"course.content.document.generateQuestions.pageTitle",panelClass:"full"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState(c.XO.CREATE_CONTENT_PEEK_PANEL,{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},peekStates:["discussion","gradebook-item",c.Eg.JOURNAL],require:[()=>Promise.all([n.e(80118),n.e(4816)]).then(n.bind(n,204816)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder",require:[()=>Promise.all([n.e(80118),n.e(43436)]).then(n.bind(n,143436)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.createFolder"}).peekState(c.XO.CREATE_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules",require:[()=>Promise.all([n.e(80118),n.e(28173)]).then(n.bind(n,528173)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.createLearningModule"}).peekState("content-manage.create.link",{panelClass:"full",resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([n.e(80118),n.e(77612),n.e(11788)]).then(n.bind(n,777612)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS],pageTitle:"course.content.createLink"}).peekState("content-manage.create.link.legacyVersion",{panelClass:"peek",resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link",require:[()=>Promise.all([n.e(80118),n.e(77612),n.e(11788)]).then(n.bind(n,777612)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti",require:[()=>Promise.all([n.e(80118),n.e(71433),n.e(41054)]).then(n.bind(n,71433)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file",require:[()=>Promise.all([n.e(80118),n.e(88856),n.e(53754)]).then(n.bind(n,788856)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/folder/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(43436)]).then(n.bind(n,143436)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekStates:[c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState(c.XO.EDIT_LEARNING_MODULE_PEEK_PANEL,{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/learning-modules/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(28173)]).then(n.bind(n,528173)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekStates:[c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editLearningModule"}).peekState("content-manage.edit.file",{resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/file/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(88856),n.e(53754)]).then(n.bind(n,788856)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/link/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(77612),n.e(11788)]).then(n.bind(n,777612)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/lti/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(71433),n.e(41054)]).then(n.bind(n,71433)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editLti"}).peekState(c.qN.EDIT_PARTNER_CONTENT,{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/partner-cloud/:id?focusEleId",require:[()=>Promise.all([n.e(80118),n.e(81709),n.e(20101)]).then(n.bind(n,81709)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"partner-cloud-goal-peek",allowChildPeekStates:!0,peekStates:[c.mL.ADD_GOALS,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],pageTitle:"course.content.editPartnerContent"}).peekState("content-manage.edit.placement",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])]},url:"/placement/:id",require:[()=>Promise.all([n.e(80118),n.e(23035)]).then(n.bind(n,223035)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],peekViewName:"placement-goal-peek",peekStates:[c.mL.ADD_GOALS,c.XO.CONDITIONAL_RELEASE_PEEK_PANEL],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])]},url:"/import?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>n.e(74757).then(n.bind(n,174757)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.import.title"}).peekState(c.XO.COPY_CONTENT_PEEK_PANEL,{resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content")])]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter",require:[()=>Promise.all([n.e(87844),n.e(58836),n.e(41474),n.e(32274)]).then(n.bind(n,541474)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],pageTitle:"course.content.copy.title",panelClass:"full"}).peekState(c.XO.IMPORT_REPORT_PEEK_PANEL,{resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/importReport/:id",require:()=>Promise.all([n.e(59831),n.e(87181)]).then(n.bind(n,707996)),pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState(c.XO.COPY_REPORT_PEEK_PANEL,{resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyReport/:id",require:()=>Promise.all([n.e(59831),n.e(99894)]).then(n.bind(n,841460)),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(c.XO.COPY_DETAILS_PEEK_PANEL,{resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},url:"/copyDetails",require:()=>Promise.all([n.e(59831),n.e(99894)]).then(n.bind(n,841460)),pageTitle:"ultra.convert.analysis.copyDetailsTitle"}).peekState(c.XO.GENERIC_STUDENT_PROGRES_PEEK_PANEL,{panelClass:"full",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/progress/:id",require:()=>Promise.all([n.e(80118),n.e(13826)]).then(n.bind(n,413826)),pageTitle:"course.content.progress.pageTitle",peekStates:[c.BQ.COURSE_MESSAGE,c.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES],allowChildPeekStates:!0,peekViewName:"progress-peek@"}).peekState(c.XO.CONTENT_PICKER,{panelClass:"full",url:"/picker?exclude&contentItems&announcementItems&assessmentItems&&rubricItems&schemaItems",require:()=>Promise.all([n.e(58836),n.e(22275)]).then(n.bind(n,629798)),pageTitle:"course.content.picker.pageTitle"})}])},417526:function(e,t,n){"use strict";n.d(t,{HV:function(){return u},Ze:function(){return p},_b:function(){return m},e1:function(){return d}});var i=n(464027),r=n(4695),s=n(676954),o=n(108762),a=n(808361),l=n(245779),c=n(986709);let d="ultra.course.content.assessment.content-goal-alignment",u="ultra.course.content.assessment.content-goal-alignment.service",p="content-goal-alignment",m="content-goal-alignment-for-student",h=["course","goal-alignment","goal"],g="refreshCache",f="loadGradingColumn",b=(e,t=!1,n)=>{var i,r;let s=new Set;return null!==(r=null==e?void 0:null===(i=e.flatMap)||void 0===i?void 0:i.call(e,e=>{var i,r,o;let a=null!==(o=null==e?void 0:null===(r=e.alignedGoals)||void 0===r?void 0:null===(i=r.filter)||void 0===i?void 0:i.call(r,e=>!(!(null==e?void 0:e.goalId)||t&&s.has(e.goalId))&&(s.add(e.goalId),!0)))&&void 0!==o?o:[];return n?a.map(t=>n(t,e)):a}))&&void 0!==r?r:[]};class v{isReady(){return null!==this.cachedGoalAlignment||this.isLoading}updataState(){this.cachedGoalAlignment=null,this.isLoading=!0}getData(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];let e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment}updateData(e){return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach(e=>{e.resolve(this.cachedGoalAlignment)}),this.defers=null,this.cachedGoalAlignment}cleanData(){this.cachedGoalAlignment=null,this.isLoading=!1}constructor(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}}class y extends l.Z{getCache(e){return y.cache=y.cache||new v(e)}resolveGoalAlignableContent(){return["$q","currentContent","currentCourse","currentColumn",s.serviceName,"$injector",g,f,(e,t,n,r,s,a,l=!1,d=!0)=>{if(t&&!t.id)return e.when([]);let u=this.getCache(e);return!l&&u.isReady()?e.when(u.getData()):(u.updataState(),e.when(null).then(()=>{if(!t)return a.invoke(o.Z.currentContent,null,{currentCourse:n,translations:{}}).then(e=>{t=e})}).then(()=>{if(!r&&d)return a.invoke(o.Z.currentColumn,null,{currentCourse:n,currentContent:t}).then(e=>{r=e})}).then(()=>{var o,a,l;let d=null==t?void 0:null===(l=t.getDeployedAssessment)||void 0===l?void 0:null===(a=l.call(t))||void 0===a?void 0:null===(o=a.assessment)||void 0===o?void 0:o.id;return e.all([n.contents.$find(t.id,{expand:"alignedGoals,permissions"}).$asPromise(),d?n.assessments.$buildRaw({id:d}).questions.$fetch({expand:"alignedGoals"}).$asPromise():e.resolve([]),(null==r?void 0:r.id)?n.gradebook.columns.$find(r.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.permissions,rubricAssociations.rubricDefinition.rows.alignedGoals"}).$asPromise():e.resolve(),s.loadBundle(`features/${h.join("/")}`)]).then(([e,t,r])=>{let o=1,a=t.map(e=>{if(c.QuestionType.PresentationOnly!==e.questionType){let t=o++;return i.extend(e,{getContentTitleForGoalAlignment:()=>s.translateSync({locale:n.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})})}return e});return this.groupGoals(n.contents.$buildRaw(e),a,r,s)})}).then(e=>u.updateData(e)))}]}getPeekStateName(){return p}getGroupedGoalsContentTitle(e){return e.isAssignment()?"goalsAlignedWithAssignment":e.isJournal()?"goalsAlignedWithJournal":e.isTest()?"goalsAlignedWithTest":"alignedGoalsDefaultTitle"}groupGoals(e,t,n,i){var s,o,a;let l=null==n?void 0:null===(o=n.rubricAssociations)||void 0===o?void 0:null===(s=o[0])||void 0===s?void 0:s.rubricDefinition,c=this.getGroupedGoalsContentTitle(e);return[{getContentTitleForGoalAlignment:()=>i.translateSync({locale:null,key:`${h.join(".")}.${c}`}),getContentIdForGoalAlignment:()=>(0,r.xR)(r.F$.Content,e.id),isCurrentUserEligibleToAlignGoals:()=>{var t;return!!(null===(t=e.isCurrentUserEligibleToAlignGoals)||void 0===t?void 0:t.call(e))},alignedGoals:null!==(a=null==e?void 0:e.alignedGoals)&&void 0!==a?a:[],coreContent:e},{getContentTitleForGoalAlignment:()=>i.translateSync({locale:null,key:`${h.join(".")}.goalsAlignedWithQuestions`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()+".all.questions"},isCurrentUserEligibleToAlignGoals(){return!1},alignedGoals:b(t,!0)},{getContentTitleForGoalAlignment:()=>i.translateSync({locale:null,key:`${h.join(".")}.goalsAlignedWithRubric`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()+".all.rubricrows"},isCurrentUserEligibleToAlignGoals(){return!1},alignedGoals:b(null==l?void 0:l.rows,!1,(e,t)=>{let{header:n,id:i}=t;return{...e,getContentTitleForGoalAlignment:()=>n,getContentIdForGoalAlignment:()=>`blackboard.plugin.rubric.api.core.data.RubricRow;${i}`}})}]}getOverrideSubTitle(){return["currentContent",e=>(null==e?void 0:e.title)||""]}constructor(...e){super(...e),this.panelClass="peek content-assessment-goal-peek"}}y.$inject=["$injector","$q"];class S extends y{resolveGoalAlignableContent(e){return["$q","currentCourse","contentData",s.serviceName,(t,n,s,o)=>{let a=t.when(null);return e?a=t.when(e):s.courseContent.isGroupContent&&s.groupAttempt?a=s.gradingColumn.getGroupAttemptByGroupAssociationId(s.courseContent.assignedGroups[0].groupAssociationId):!s.courseContent.isGroupContent&&s.attempt&&(a=n.gradebook.attempts.$find(s.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([s.courseContent.alignedGoals?s.courseContent.$asPromise():n.contents.$find(s.courseContent.id,{expand:"alignedGoals"}).$asPromise(),a,n.gradebook.columns.$find(s.gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.permissions,rubricAssociations.rubricDefinition.rows.alignedGoals"}).$allow([c.oji.Forbidden]).$asPromise(),o.loadBundle(`features/${h.join("/")}`),o.loadBundle("components/directives/assessment/assessment-question")]).then(([e,t,a])=>{let l=[];if(t&&t.$pk){let e=t.getToolAttemptDetailItem(s.gradingColumn.scoreProviderHandle);(e&&e.questionAttempts||[]).forEach(e=>{l.push(i.extend(e.question,{getContentTitleForGoalAlignment:()=>o.translateSync({locale:n.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}}),getContentIdForGoalAlignment(){return(0,r.xR)(r.F$.Asi,this.id)},isCurrentUserEligibleToAlignGoals(){return!1}}))})}return this.groupGoals(e,l,a,o)})}]}getPeekStateName(){return m}getOverrideSubTitle(){return["contentData",e=>e.courseContent&&e.courseContent.title||""]}}i.module(d,[a.e1,s.moduleName]).config([a.e2,e=>{[new y,new S].forEach(t=>{e.peekState(t.getPeekStateName(),t)})}]).value(g,!1).value(f,!0).service(u,["$injector",s.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents(t,n,i,s=!1,o=!0){return e.invoke(new y().resolveGoalAlignableContent(),null,{currentCourse:t,currentContent:n,currentColumn:i,[g]:s,[f]:o}).then(e=>(this.alignedGoalsCount=(0,r.z6)(e),[e,this.alignedGoalsCount]))},resolveGoalAlignableContentsForStudent(t,n,i){return e.invoke(new S().resolveGoalAlignableContent(i),null,{currentCourse:t,contentData:n}).then(e=>[e,(0,r.z6)(e)])}}}])},937131:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(464027),r=n(984654),s=n(676954),o=n(514461);let a="ultra.components.directives.moving-member-alert",l={Class:o.LI,renderLocalized:!0,withProvider:!0};i.module(a,[s.moduleName]).component("bbMovingMemberAlertBanner",(0,r.G5)(l))},175070:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},Rn:function(){return u},e1:function(){return c}});var i=n(464027),r=n(676954),s=n(555840),o=n(808361),a=n(245779),l=n(4695);let c="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",u="no-grade-content-goal-alignment",p=["course","goal-alignment","goal"];class m extends a.Z{resolveGoalAlignableContent(){return["$q",r.serviceName,"$injector",o.HV,s.N7.H,(e,t,n,i,r)=>{let s,o;let a=null;return(i.nextParams&&i.nextParams.contentId&&(a=i.nextParams.contentId),i.nextParams&&i.nextParams.id&&(a=i.nextParams.id),a&&"create"!==a)?r.$find(i.nextParams.courseId).$asPromise().then(e=>(s=e,e.contents.$find(a).$asPromise())).then(e=>{o=e}).then(()=>e.all([s.contents.$find(o.id,{expand:"alignedGoals,permissions"}).$asPromise(),t.loadBundle(`features/${p.join("/")}`)]).then(([e])=>this.groupGoals(s.contents.$buildRaw(e),t))):e.when([])}]}getPeekStateName(){return u}groupGoals(e,t){let n="alignedGoalsDefaultTitle";return e.isDiscussion()?n="goalsAlignedWithDiscussion":e.isDocument()?n="goalsAlignedWithDocument":e.isFile()?n="goalsAlignedWithFile":e.isLink()?n="goalsAlignedWithLink":e.isLtiLink()?n="goalsAlignedWithLtiLink":e.isLtiPlacement()&&(n="goalsAlignedWithLtiPlacement"),[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${p.join(".")}.${n}`}),getContentIdForGoalAlignment:()=>(0,l.xR)(l.F$.Content,e.id),isCurrentUserEligibleToAlignGoals:()=>{var t;return!!(null===(t=e.isCurrentUserEligibleToAlignGoals)||void 0===t?void 0:t.call(e))},alignedGoals:(null==e?void 0:e.alignedGoals)||[],coreContent:e}]}getOverrideSubTitle(){return[o.HV,s.N7.H,(e,t)=>{let n=null;return(e.nextParams&&e.nextParams.contentId&&(n=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(n=e.nextParams.id),n)?t.$find(e.nextParams.courseId).$asPromise().then(e=>e.contents.$find(n).$asPromise()).then(e=>e.title):""}]}constructor(...e){super(...e),this.panelClass="peek no-grade-content-goal-peek"}}m.$inject=["$injector","$q"],i.module(c,[o.e1,r.moduleName]).config([o.e2,e=>{let t=new m;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",r.serviceName,function(e){return{resolveGoalAlignableContents(){return e.invoke(new m().resolveGoalAlignableContent(),null,{}).then(e=>[e,(0,l.z6)(e)])}}}])},526842:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),r=n(676954),s=n(808361);let o="ultra.course.conversion.router";i.module(o,[s.e1,r.moduleName]).config([s.e2,e=>{e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:()=>Promise.all([n.e(59831),n.e(80920)]).then(n.bind(n,135420)),pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/convert-and-import")]},require:[()=>Promise.all([n.e(35135),n.e(34810),n.e(37844)]).then(n.bind(n,634810)),()=>Promise.all([n.e(35135),n.e(34810),n.e(48260)]).then(n.bind(n,901311))],pageTitle:"ultra.convert.analysis.pageTitle"})}])},104627:function(e,t,n){"use strict";n.d(t,{i:function(){return Z}});var i=n(464027),r=n(221789),s=n(227488),o=n(194044),a=n(716865),l=n(189165),c=n(890532),d=n(677315),u=n(555840),p=n(591537),m=n(259197);let h="ultra.directives.webLinkItem";class g{constructor(e){this.CourseModel=e,this.replace=!0,this.restrict="E",this.scope={content:"=",targetContent:"=?",prefix:"=",aria:"=?",tabbable:"=?"},this.template=p,this.link=(e,t)=>{let n=e.$watch("targetContent.contentHandler",t=>{null!=t&&(e.$emit("click-to-invoke-child-directive-init"),n())});!e.targetContent&&e.content&&e.content.contentDetail&&(e.targetContent=e.content.getLinkContentSource(),e.targetContent.$then(()=>{e.content.description=e.targetContent.description})),e.ariaDescribedBy="content-item-icon-"+e.content.id,e.content.ui.hasIndicator&&(e.ariaDescribedBy+=" activity-indicator-"+e.content.id),m.AaE.isNotAccessibleButVisibleForcedSequenceItem(e.content)?(e.aria=!0,e.tabbable=!0):(e.aria=!1,e.tabbable=!1)}}}g.$inject=[u.N7.H],i.module(h,[]).directive("bbWebLinkItem",["$injector",e=>e.instantiate(g)]);var f=n(215941),b=n(256678),v=n(624877),y=n(549897),S=n(979026),C=n(40750),E=n(979377),I=n(130279),w=n(117633),A=n(744637),k=n(504503),T=n(984654),P=n(88818);let D="ultra.features.course.content.banners.bbForcedSequenceWarningBanner",x={Class:P.WGK,withThemeProvider:!0,renderLocalized:!0};i.module(D,[]).component("bbForcedSequenceWarningBanner",(0,T.G5)(x));var R=n(401138),L=n(108266),N=n(956607);n(785106);var $=n(96710),O=n(676954),G=n(786430),_=n(567361),M=n(991410),B=n(129609),F=n(860995),U=n(411832),V=n(742854),H=n(196409),q=n(296520),j=n(420595),z=n(480489),W=n(808361),K=n(610761);n(782803),n(530644),n(131476),n(900189),n(473611),n(789029),n(424651),n(60499),n(377192),n(422866),n(491393),n(312488),n(192494),n(77216),n(563699),n(88501);let Z="removed.angular.outline.deps";i.module(Z,[l.e,r.e1,s.e1,D,E.e1,M.e1,y.e1,N.e1,U.e1,I.e1,w.e1,A.e1,H.e1,G.e1,q.e1,o.e1,j.e1,a.e1,c.e1,d.e1,v.e1,_.e1,f.e1,b.e1,B.e1,F.e1,S.e1,C.e1,V.e1,k.e1,O.moduleName,R.e1,$.e1,L.e1,z.e,W.e1,h,K.e1])},596731:function(e,t,n){"use strict";n.d(t,{HV:function(){return d},e1:function(){return c}});var i=n(464027),r=n(276635),s=n(280903),o=n(808361),a=n(786430),l=n(555840);let c="ultra.course.coursemembershipmarkups",d="ultra.course.coursemembershipmarkups.service",u="bbCourseMembershipMarkups";i.module(c,[l.e1,o.e1,a.e1]).run([a.HV,o.HV,l.lZ.serviceName,"$rootScope",function(e,t,n,i){i.$on(a.gQ,()=>{t.params.courseId&&e.getTopElement().then(e=>{e.getElement().addClass("cc"+t.params.courseId)})}),n.$mixHook("after-fetch-many",function(){let e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&i.$broadcast(`course-${e}-memberships-after-fetch`,Array.prototype.slice.apply(this))})}]).provider(d,class{onStyleRefresh(e){this.fn.push(e)}$get(){return this}constructor(){this.fn=[]}}).directive(u,[d,function(e){return{restrict:"A",scope:!1,link(t,n,o){let a=o[u],l=`css_course_${a}_membership`,c={},d=r.once(()=>{let e=i.element(document).find(`#${l}`);return 0===e.length&&(e=i.element(`<style id="${l}"></style>`).appendTo("head"),t.$on("$destroy",()=>{e.remove()})),e});t.$root.$on(`course-${a}-memberships-after-fetch`,(t,n)=>{t.preventDefault();let i=d();(n=r(n).filter(e=>null!=(e.userId||e.user.id)).map(e=>(e.userId=e.userId||e.user.id,e)).value()).forEach(t=>{let n=new s.h,i=n.selector(`.cc${a}`);e.fn.forEach(e=>{e(i,t)}),c[t.id]=n.build()});let o=r(c).sortBy().map((e,t)=>e).join("\n");o!==i.text()&&i.text(o)}),t.$on(`course-${a}-memberships-before-fetch`,(e,t)=>{e.preventDefault();let n=t.params||{};n.fields&&(n.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")})}}}])},653796:function(e,t,n){"use strict";n.d(t,{e:function(){return L}});var i=n(464027),r=n(12838),s=n(676954),o=n(786430),a=n(567361),l=n(52306),c=n(504537),d=n(942435),u=n(555840),p=n(808361),m=n(860995),h=n(341253),g=n(129609),f=n(261015),b=n(19935),v=n(246233),y=n(563060),S=n(348669),C=n(941124),E=n(458967),I=n(363411),w=n(411832),A=n(891886),k=n(986709),T=n(776517),P=n(233090),D=n(259197),x=n(518806),R=n(625506);let L="ultra.course.routes";i.module(L,[c.e1,d.e1,m.e1,g.e1,S.e1,h.e1,b.e1,P.e1]).config([p.e2,m.e2,g.e2,S.e2,h.e2,(e,t,i,c,d)=>{e.peekState(y.Z5.Course.COURSE,{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708)),resolve:{currentColumn:()=>null,[m.gc]:t.resolve,[g.gc]:i.resolve,currentCourseId:["$state",e=>e.nextParams.courseId],courseEntitlementsLoader:["currentCourseId",v.HV,(e,t)=>t.loadCourseEntitlements(e)],"?courseMembershipsLoader":["currentCourseId",u.N7.H,(e,t)=>t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()],isOrganization:[m.gc,p.HV,(e,t)=>(t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization)],[S.gc]:c.resolve,abstractCourseResolve:[m.gc,p.HV,g.gc,w.HV,async(e,t,n,i)=>{if(x.lU.handleSelfEnrollmentPageRedirect(n,i,e)){var r;if(!(null===(r=t.next.name)||void 0===r?void 0:r.endsWith(y.BQ.COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL)))throw await t.goPeekState(y.BQ.COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL,{courseId:t.nextParams.courseId,legacyUrl:`/webapps/blackboard/execute/enrollCourse?course_id=${t.nextParams.courseId}&context=Course`}),{isExpectedBehavior:!0}}}]},onEnter:[g.HV,e=>{var t,n;let i=null==e?void 0:null===(n=e.courseMembership)||void 0===n?void 0:null===(t=n.courseRole)||void 0===t?void 0:t.identifier;i&&((0,C.sI)({courseRole:i}),(0,E.Aq)({courseRole:i}))}],onExit:["$rootScope","$stateParams","membership",s.serviceName,o.HV,m.HV,l.HV,f.ks,A.HV,g.HV,(e,t,n,i,r,s,o,a,l,c)=>{e.bbOffcanvasOpened=!1,r.close("course"),s.course.isClassic()&&e.$broadcast("reloadCourse",t.courseId);let d=n.isStudentMembership(),u=!l.userModel.isGuest();!d&&u&&c.courseMembership.$fetch().$allow([404]).$asPromise().then(e=>{e.isStudentMembership()&&a.clearCache("users/"+l.userId+"/memberships")}),o.showPreviewAlert=!0,R(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"),(0,C.pl)(),(0,E.xH)()}]}).peekState(y.Z5.Course.COURSE_ANNOUNCEMENT_LIST,{url:"/announcements",views:{"course@":{require:[()=>Promise.all([n.e(34928),n.e(33861)]).then(n.bind(n,133861))],resolve:{"announcement-translations":[s.serviceName,e=>e.loadBundle("features/course/announcements/announcement-list")]}}},peekStates:[y.Z5.Announcement.ANNOUNCEMENT_DETAIL,y.Z5.Course.SETTINGS],panelClass:"full",peekViewName:"announcement-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.outline.announcements.title",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.AnnouncementListOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.AnnouncementListOpened)}]}).peekState(y.Z5.Course.COURSE_ANALYTICS,{url:"/analytics",views:{"course@":{require:[()=>Promise.all([n.e(42641),n.e(5552),n.e(28141),n.e(82414)]).then(n.bind(n,99647)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"analytics-translations":[s.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.headerLabel"}).peekState(y.Z5.Course.COURSE_ANALYTICS_REPORTS,{url:"/reports",views:{"analytics@":{require:[()=>Promise.all([n.e(42641),n.e(28141),n.e(77112)]).then(n.bind(n,199431)),()=>Promise.all([n.e(42641),n.e(5552),n.e(28141),n.e(82414)]).then(n.bind(n,99647)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"analytics-translations":[s.serviceName,e=>e.loadBundle("features/course/analytics/course-analytics")]}}},panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.premiumReportsHeaderLabel",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseAnalyticsPremiumReportsOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseAnalyticsPremiumReportsOpened)}],peekStates:[y.Z5.Course.SETTINGS]}).peekState(y.Z5.Course.COURSE_ANALYTICS_SCORM_REPORTS,{url:"/scormReports",resolve:{[m.gc]:t.resolve},views:{"analytics@":{require:[()=>n.e(14889).then(n.bind(n,514889)),()=>Promise.all([n.e(42641),n.e(5552),n.e(28141),n.e(82414)]).then(n.bind(n,99647))],resolve:{"scorm-report-analytics-translations":[s.serviceName,e=>e.loadBundle("features/course/content/scorm/scorm")]}}},onEnter:[P.HV,e=>{e.registerHandler(T.Cs.QuestionAnalyticsScormReportOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.QuestionAnalyticsScormReportOpened)}],peekStates:["scorm-analytics-report",y.Z5.Course.SETTINGS],panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.analytics.title.scormReports"}).peekState(y.Z5.Course.COURSE_ANALYTICS_QUESTION_ANALYSIS,{url:"/questionAnalysis",views:{"analytics@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(11599),n.e(94979)]).then(n.bind(n,581908)),resolve:{"question-analysis-translations":[s.serviceName,e=>e.loadBundle("features/course/question-analysis")]}}},peekViewName:"question-analysis-report-list",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.QuestionAnalysisOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.QuestionAnalysisOpened)}],peekStates:["question-analysis",y.Z5.Course.SETTINGS],panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState(y.Z5.Course.COURSE_ANALYTICS_ACTIVITY,{url:"/courseActivity",views:{"analytics@":{require:()=>Promise.all([n.e(19760),n.e(26453),n.e(80580),n.e(5552),n.e(11449),n.e(68402),n.e(54296),n.e(30970),n.e(49048)]).then(n.bind(n,549048)),resolve:{translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])],[m.gc]:t.resolve}}},peekStates:[y.BQ.COURSE_MESSAGE,"event-create","telemetry-settings",y.vs.INSTRUCTOR_DETAILS,y.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,y.Z5.Course.SETTINGS],onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseActivityAnalyticsOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseActivityAnalyticsOpened)}],peekViewName:"telemetry-instructor-class-base@",panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler",resolveOrgCourseKey:!0}),pageTitle:"components.directives.telemetry.courseActivityHeaderTitle.course"}).peekState(y.Z5.Course.COURSE_CALENDAR,{url:"/calendar",views:{"course@":{require:[()=>Promise.all([n.e(79069),n.e(87844),n.e(60747),n.e(23608),n.e(81708),n.e(71103),n.e(83889)]).then(n.bind(n,651021)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"calendar-translations":[s.serviceName,e=>e.loadBundle("features/course/calendar/course-calendar")]}}},resolve:{courseEntitlement:["$q",m.gc,g.gc,w.HV,async(e,t,n,i)=>x.lU.handleSelfEnrollmentPageRedirect(n,i,t)?e.resolve(!0):i.isEntitled(r.uo.ViewCalendar)]},onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseCalendarOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseCalendarOpened)}],peekStates:[y.Z5.Calendar.CREATE_EVENT,y.Z5.Calendar.EDIT_EVENT,y.Z5.Calendar.VIEW_EVENT,y.Z5.Calendar.COURSE_SCHEDULE,y.Z5.Calendar.OFFICE_HOURS,y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH_PEEK,"conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview",y.Z5.Course.SETTINGS],panelClass:"full",peekViewName:"calendar-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.calendar.headerLabel"}).peekState(y.Z5.Course.COURSE_ENGAGEMENT,{url:"/engagement",resolve:{"engagement-translations":[s.serviceName,e=>e.loadBundle("features/course/engagement/course-engagement")]},views:{"course@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(83749),n.e(19661),n.e(839),n.e(28805),n.e(54404)]).then(n.bind(n,454404))}},panelClass:"full",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.DiscussionBoardOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.DiscussionBoardOpened)}],peekStates:["content-manage","conversion-analysis","discussion",y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"content-group-enroll","discussion-settings",y.Z5.Telemetry.DISCUSSION_FORUM_INSIGHTS,"course-group","discussions-settings",y.Z5.Course.SETTINGS],peekViewName:"engagement-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.engagement.headerLabel"}).peekState(y.Z5.Course.COURSE_GRADES,{url:`/grades?${y.fI.join("&")}`,views:{"course@":{require:[()=>Promise.all([n.e(4302),n.e(91263),n.e(10151),n.e(45136),n.e(29225),n.e(79123)]).then(n.bind(n,984823)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"grades-translations":[s.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]}}},resolve:{courseEntitlement:["$q","membership",w.HV,(e,t,n)=>t.isStudentMembership()?e.resolve(!0):n.isEntitled("course.gradebook-metadata.VIEW")]},onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseGradeOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseGradeOpened)}],peekStates:[y.Z5.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",y.Z5.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,"assignment-grading",y.Z5.Grade.SUBMISSION_GRADING,y.eJ.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"group-submission-grading","grade-item","grade-setting",y.Z5.Grade.GRADING_SCHEMA,"grade-download-setting","grade-upload-setting",y.Z5.Grade.GRADE_AND_FEEDBACK,"conversion-analysis","content-manage",y.Z5.Lti.LTI,"discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",y.Z5.Grade.RECONCILE_GRADE,"grades-bulk-download",y.Z5.Grade.DOWNLOAD_TEST_RESULTS,y.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,y.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,y.Z5.Journal.JOURNAL_PARTICIPATION_DETAIL,y.Z5.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,y.Z5.Grade.ATTEMPT_RECEIPT_SEARCH,y.Z5.Course.SETTINGS,y.Z5.Grade.PER_ASSESSMENT_SETTINGS,y.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,y.Z5.Grade.GRADABLE_ITEM_STATISTICS,y.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,y.Z5.Grade.STUDENT_GRADE_AND_FEEDBACK],panelClass:"full",peekViewName:"grades-panel-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.grades.instructorHeaderLabel"}).peekState(y.Z5.Course.COURSE_MESSAGES,{url:"/messages",views:{"course@":{require:[()=>Promise.all([n.e(42641),n.e(87844),n.e(4302),n.e(60747),n.e(47413),n.e(10570),n.e(20728)]).then(n.bind(n,761508)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"messages-translations":[s.serviceName,e=>e.loadBundle("features/course/messages/course-messages")],canActivate:[b.HV,e=>{e.byToolIdAvailability(k.XF0.Messages)}]}}},panelClass:"full",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseMessageListOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseMessageListOpened)}],peekStates:["create-message","edit-message","conversion-analysis",y.Z5.Course.SETTINGS],pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.messages.headerLabel"}).peekState(y.Z5.Course.COURSE_GROUPS,{url:"/groups",views:{"course@":{require:[()=>n.e(29825).then(n.bind(n,329825))],resolve:{"groups-translations":[s.serviceName,e=>e.loadBundle("features/course/groups/group-set-list")]}}},resolve:{courseEntitlement:["$q",m.gc,g.gc,w.HV,async(e,t,n,i)=>x.lU.handleSelfEnrollmentPageRedirect(n,i,t)?e.resolve(!0):i.isEntitled(r.pQ.ViewGroupsAsAdmin)]},panelClass:"full",peekStates:[y.Z5.Group.GROUP_MEMBERS_LIST,y.Z5.Group.GROUP_SPACE,y.Z5.Group.EXPORT_GROUP_SET,y.Z5.Group.IMPORT_GROUP_SET,y.Z5.Group.VIEW_GROUP_ENROLL,y.Z5.Group.VIEW,y.Z5.Group.IMPORT_GROUP_MEMBERS,y.Z5.Group.GROUP_SET_DETAIL,y.Z5.Group.COURSE_GROUP_ENROLL,y.BQ.COURSE_MESSAGE],pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.groupWorkspace.pageTitle",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseGroupsOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseGroupsOpened)}]}).peekState(y.Z5.Course.COURSE_GROUPS_STUDENT,{url:"/groups/enrollments",views:{"course@":{require:[()=>n.e(77520).then(n.bind(n,977520))],resolve:{"groups-translations":[s.serviceName,e=>e.loadBundle("features/course/groups/self-enroll/self-enroll-controller")]}}},panelClass:"full",peekStates:[y.Z5.Group.GROUP_MEMBERS_LIST,y.Z5.Group.GROUP_SPACE,y.BQ.COURSE_MESSAGE],pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.groupWorkspace.pageTitle",onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseGroupsStudentOpened)}],onExit:[P.HV,e=>{e.clearHandler(T.Cs.CourseGroupsStudentOpened)}]}).peekState(y.Z5.Course.COURSE_ACHIEVEMENTS,{url:"/achievements",views:{"course@":{require:()=>n.e(89745).then(n.bind(n,389745))}},panelClass:"full",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.title.achievements",resolve:{canActivateState:[b.HV,e=>{e.byFeatureFlag(D.x40.Achievements)}]}}).peekState(y.Z5.Course.COURSE_OUTLINE,{url:"/outline?legacyUrl?enrollmentMessage?inPreviewMode?search?searchedContentId",views:{"course@":{require:[()=>Promise.all([n.e(87844),n.e(80580),n.e(34928),n.e(23608),n.e(99298),n.e(83749),n.e(26935),n.e(51615),n.e(67849),n.e(62194),n.e(50862)]).then(n.bind(n,743325)),()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{isClassicCourse:[m.gc,p.HV,(e,t)=>{if(!e.isUltra())return t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],translations:["$q",s.serviceName,(e,t)=>e.all([t.loadBundle("features/course/outline/course-outline"),t.loadBundle("features/course/course-overview/course-overview")])]}}},onEnter:[P.HV,e=>{e.registerHandler(T.Cs.CourseContentOpened)}],onExit:["$rootScope",p.HV,P.HV,(e,t,n)=>{"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh"),n.clearHandler(T.Cs.CourseContentOpened)}],peekStates:[y.Z5.Announcement.ANNOUNCEMENT_DETAIL,"assignment","assessment-settings","question-analysis","question-banks",y.Z5.SafeAssign.SAFE_ASSIGN,"assessment-safe-assign-settings","bulk-edit-content",y.XO.FILE_MANAGEMENT_PANEL,y.Re.PREVIEW_FILE,y.Z5.Calendar.COURSE_SCHEDULE,"content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description",y.Z5.Calendar.VIEW_EVENT,"exports","gradebook-item","import-report",y.Z5.Course.COURSE_MESSAGE,"roster","collab","stream-message","assessment",y.Z5.ContentMarket.CONTENT_MARKET,y.Z5.ContentCollection.CONTENT_COLLECTION,"document-settings","partner-tool",y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH_PEEK,"discussion-settings","conversations","books-and-tools","rubric",y.Z5.Telemetry.CONTENT_ACTIVITY_IN_DETAIL,y.Z5.Telemetry.DISCUSSION_FORUM_INSIGHTS,"overall-grade","attendance","attendance-student-view","course-group-enroll",y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,"course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report",y.Z5.Course.EDIT_BANNER,y.Z5.CourseTasks.COURSE_TASKS_LOGS,y.Z5.Group.IMPORT_GROUP_SET,y.Z5.Group.EXPORT_GROUP_SET,y.Z5.Group.IMPORT_GROUP_MEMBERS,y.Z5.Group.GROUP_MEMBERS_LIST,y.Z5.Group.GROUP_SPACE,y.Z5.Course.SETTINGS,y.Z5.Content.CONTENT_SEARCH],peekViewName:"content-create-base",pageTitleHandler:d.config({listenOn:"update-course-name",provides:"CoursePageTitleHandler"}),pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:()=>Promise.all([n.e(12820),n.e(47691)]).then(n.bind(n,678727)),panelClass:"full",peekStates:[y.Z5.Lti.LTI],resolve:{currentContent:[p.HV,m.gc,"$q",(e,t,n)=>{let i=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(i&&i!==u.courseContent.$G)return t.contents.$find(i).$asPromise()}]}}).peekState(y.Z5.Content.CONDITIONAL_RELEASE_PEEK_PANEL,{url:"/conditionalRelease?contentId",pageTitle:"course.conditionalRelease.panelTitle",require:[()=>n.e(71790).then(n.bind(n,971790)),()=>Promise.all([n.e(87844),n.e(80580),n.e(34928),n.e(23608),n.e(99298),n.e(83749),n.e(26935),n.e(51615),n.e(67849),n.e(62194),n.e(50862)]).then(n.bind(n,743325))],panelClass:"peek",peekStates:["group-set-list"],peekViewName:"conditional-release-peek",allowChildPeekStates:!0,resolve:{[m.gc]:t.resolve,currentContent:[p.HV,"currentCourse",a.HV,(e,t,n)=>{let i=e.nextParams.contentId,r=n.findRootNode(t,u.courseContent.e6.Root);return n.getOrMakeContentInContentTree(r,t.id,i).then(e=>e.content)}],translations:[s.serviceName,e=>e.loadBundle("features/course/conditional-release/conditional-release")]}}).peekState(y.Z5.Course.COURSE_CLASSIC,{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[()=>Promise.all([n.e(87844),n.e(60747),n.e(81708),n.e(87383)]).then(n.bind(n,581708))],resolve:{"outline-translations":[s.serviceName,e=>e.loadBundle("features/course/outline/course-outline")]},peekStates:[y.Z5.Telemetry.CONTENT_ACTIVITY_IN_DETAIL],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState(y.BQ.COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL,{url:"/ultra-course-self-enroll?legacyUrl?enrollmentMessage",require:[()=>n.e(69114).then(n.bind(n,469114))],peekViewName:"ultra-course-self-enroll-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[()=>n.e(83417).then(n.bind(n,783417))],resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&mimeType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[()=>n.e(82197).then(n.bind(n,582197))],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full",courseEntitlement:r.eo.ViewAsDesigner}).peekState(y.XO.GENERATE_STRUCTURE,{url:"/generate?positionBefore?positionAfter",require:[()=>n.e(31726).then(n.bind(n,131726))],pageTitle:"course.outline.operation.generateStructure",panelClass:"full",courseEntitlement:r.eo.ViewAsDesigner}).peekState(y.XO.FILE_MANAGEMENT_PANEL,{url:"/fileManagement",require:[()=>n.e(84015).then(n.bind(n,684015))],pageTitle:"course.outline.unusedFiles",panelClass:"full",courseEntitlement:r.s7.ViewFileManagement,resolve:{canActivate:[b.HV,e=>{e.byFeatureFlag(D.x40.UnusedFileManagement)}]}}).peekState(y.Re.PREVIEW_FILE,{url:"/file/:id?view",require:[()=>Promise.all([n.e(80118),n.e(12820),n.e(13171)]).then(n.bind(n,648918))],pageTitle:"course.content.file",panelClass:"full",allowChildPeekStates:!0,peekViewName:"file-preview-peek",peekStates:[y.Re.PREVIEW_FILE_EDIT,y.BQ.COURSE_MESSAGE,y.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES]}).peekState(y.Re.PREVIEW_FILE_EDIT,{resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/content/course-content")]},url:"/edit",require:[()=>Promise.all([n.e(80118),n.e(88856),n.e(53754)]).then(n.bind(n,788856)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))],allowChildPeekStates:!0,peekViewName:"file-goal-peek",peekStates:["goal-picker-legacy",y.XO.CONDITIONAL_RELEASE_PEEK_PANEL],panelClass:"peek",pageTitle:"course.content.file"}).peekState(y.Z5.Course.EDIT_BANNER,{url:"/editBanner?id",resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/edit-banner/edit-banner")]},require:()=>Promise.all([n.e(87844),n.e(90749)]).then(n.bind(n,890749)),pageTitle:"course.editBanner.panelTitle"}).peekState(y.Z5.Course.SETTINGS,{url:"/{courseOrOrganization:(?:course-settings|organization-settings)}",peekViewName:"course-settings-base",require:()=>n.e(64428).then(n.bind(n,264428)),panelClass:"full",pageTitle:"course.settings.headerLabel",courseEntitlement:[r.s7.ViewCourseSettingsConsole],resolve:{translations:[s.serviceName,e=>e.loadBundle("features/course/settings/settings")],isOrganization:[m.gc,p.HV,(e,t)=>{let n=e.isOrganization?"organization":"course";t.next.pageTitle=`${n}.settings.headerLabel`,t.nextParams.courseOrOrganization=`${n}-settings`}],isEntitled:[p.HV,I.HV,(e,t)=>{t.createWaiter(D.x40.CourseSettingsConsole).then(t=>{t||e.goCurrentBasePage()})}]}}).peekState(y.Z5.Content.CONTENT_SEARCH,{url:"/content-search",require:()=>Promise.all([n.e(83749),n.e(22065)]).then(n.bind(n,722065)),pageTitle:"courseCore.components.contentSearch.searchBox.contentSearchMenu",peekStates:["gradebook-item","content-manage","assessment","assignment","conversations",y.Re.PREVIEW_FILE,y.Z5.Lti.LTI,y.Z5.Lti.LTI_LAUNCH,y.Z5.Lti.LTI_LAUNCH_PEEK,y.Z5.Lti.LTI_LAUNCH_FRAME,y.Z5.Scorm.GRADEBOOK_ITEM_SCORM_SUBMISSIONS,y.Z5.Scorm.SCORM_LAUNCH_FRAME,y.Z5.Scorm.SCORM_OVERVIEW,y.Z5.Content.DOCUMENT,y.Z5.Journal.JOURNAL],peekViewName:"content-search-panel",allowChildPeekStates:!0,panelClass:"full",onExit:[p.HV,e=>{let{nextParams:t}=e;t.search=void 0,t.searchedContentId=void 0}]})}])},363961:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),r=n(676954),s=n(808361);let o="ultra.course.description.router";i.module(o,[s.e1,r.moduleName]).config([s.e2,e=>{e.peekState("description",{url:"/description",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/description/course-description")]},require:()=>n.e(90554).then(n.bind(n,390554)),pageTitle:"course.description.header"})}])},625977:function(e,t,n){"use strict";n.d(t,{e:function(){return h}});var i=n(464027),r=n(676954),s=n(860995),o=n(175070),a=n(257663),l=n(555840),c=n(808361),d=n(808611),u=n(786430),p=n(563060),m=n(289319);let h="ultra.course.engagement.router";i.module(h,[r.moduleName,c.e1,a.e1,o.e1,d.e1,s.e1,m.e1]).config([c.e2,s.e2,m.e2,(e,t,i)=>{e.peekState(p.Jy.DISCUSSION,{abstract:!0,url:"/discussion",resolve:{translations:["$q",r.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}],[s.gc]:t.resolve,canCreateAllContent:[a.HV,c.HV,(e,t)=>e.canCreateAllContent(t.nextParams.courseId)],hasEditAvailabilityPermission:[a.HV,c.HV,(e,t)=>e.hasEditAvailabilityPermission(t.nextParams.courseId)]}}).peekState(p.Jy.DISCUSSION_VIEW,{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(42641),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(12820),n.e(45136),n.e(31350),n.e(27666),n.e(24655),n.e(59977)]).then(n.bind(n,261548)),resolve:{translations:["$q",r.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}]}).peekState(p.Jy.DISCUSSION_VIEW_WITH_GRADING,{url:"?view&disGroupId&gradingStatus&submissionStatus",panelClass:"full",views:{"engagement-edit@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(19661),n.e(839),n.e(28805),n.e(44786)]).then(n.bind(n,144786))},"engagement-grade@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(86504)]).then(n.bind(n,357561))},"engagement-analytics@":{require:()=>n.e(27571).then(n.bind(n,527571))}},onEnter:[c.HV,u.HV,(e,t)=>{e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],peekStates:[p.XO.CONDITIONAL_RELEASE_PEEK_PANEL,p.cw.CONTENT_MARKET,"course-group",p.Jy.DISCUSSION_DETAILS,p.Jy.DISCUSSION_PARTICIPANTS,p.Jy.DISCUSSION_SETTINGS,p.Jy.DISCUSSION_GENERATE,o.Rn,p.UM.LTI,p.BQ.COURSE_MESSAGE,p.mg.RUBRIC,p.mg.RUBRIC_EVALUATION,p.mg.RUBRIC_GENERATE,p.mg.RUBRIC_VIEW,"submission-list","view-exceptions",p.Jy.DISCUSSION_FEEDBACK,p.Jy.DISCUSSIONS_SETTINGS,p.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,p.BQ.EDIT_ENROLLMENT,p.RK.PER_GRADABLE_ITEM_SETTINGS],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:{[m.gc]:i.resolve,currentColumn:[c.HV,s.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==l.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState(p.Jy.SUBMISSION_LIST,{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(19661),n.e(839),n.e(86535)]).then(n.bind(n,586535)),resolve:{translations:["$q",r.serviceName,(e,t)=>{let n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("components/directives/grade/submission-list")),n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),n.push(t.loadBundle("components/directives/discussion")),e.all(n)}],[s.gc]:t.resolve,currentColumn:[c.HV,s.gc,(e,t)=>{let n=e.nextParams.columnId;if(n&&n!==l.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise()}],[m.gc]:i.resolve,memberships:[s.gc,e=>(e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise())]},pageTitle:"course.engagement.submissionTitle",peekStates:[p.BQ.COURSE_MESSAGE,p.Jy.DISCUSSION_FEEDBACK,"rubric-evaluation",p.BQ.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,p.BQ.EDIT_ENROLLMENT],peekViewName:"engagement-submissions-peek@"}).peekState(p.Jy.DISCUSSION_SETTINGS,{url:"/settings?contentId&focusEleId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(46295)]).then(n.bind(n,978533)),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy",p.mg.RUBRIC,p.mg.RUBRIC_GENERATE,p.mg.RUBRIC_VIEW]}).peekState(p.Jy.DISCUSSION_PARTICIPANTS,{url:"/participants",require:()=>n.e(75243).then(n.bind(n,175243)),pageTitle:"course.engagement.participantsTitle"}).peekState(p.Jy.DISCUSSION_DETAILS,{url:"/details",require:()=>Promise.all([n.e(91263),n.e(79179)]).then(n.bind(n,470455)),pageTitle:"course.engagement.discussionDetailsTitle",peekStates:[p.Jy.DISCUSSION_FEEDBACK]}).peekState(p.Jy.DISCUSSION_FEEDBACK,{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[()=>Promise.all([n.e(34446),n.e(37543)]).then(n.bind(n,237543)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(86504)]).then(n.bind(n,357561))],resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")],offCanvasArgs:["offCanvasArgs",e=>(e.overlay=!1,e.disableFocusHandling=!0,e)],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[d.HV,"currentCourseMemberships",(e,t)=>e.init(t)]},onExit:[d.HV,e=>{e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"}).peekState(p.Jy.DISCUSSIONS_SETTINGS,{url:"/discussions-settings",require:()=>Promise.all([n.e(31350),n.e(96702)]).then(n.bind(n,248271))}).peekState(p.Jy.DISCUSSION_GENERATE,{url:"/generate?defaultGenerateTitle",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(10151),n.e(45136),n.e(31350),n.e(27666),n.e(47648)]).then(n.bind(n,348201)),pageTitle:"course.engagement.generate.pageTitle",panelClass:"full"})}])},495683:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(464027),r=n(676954),s=n(808361);let o="ultra.course.exports.router";i.module(o,[s.e1,r.moduleName]).config([s.e2,e=>{e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[r.serviceName,e=>e.loadBundle("features/course/exports/course-export")]},require:()=>Promise.all([n.e(26935),n.e(34692)]).then(n.bind(n,626935)),pageTitle:"course.export.exportPanel.head"})}])},245779:function(e,t,n){"use strict";var i=n(276635),r=n(676954);t.Z=class{getOverrideSubTitle(){return[()=>null]}constructor(){this.panelClass="peek",this.url="/goalAlignment",this.require=()=>n.e(20210).then(n.bind(n,620210)),this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[r.serviceName,e=>e.loadBundle("features/course/goal-alignment/goal")],goalAlignableContents:(()=>{let e=this.resolveGoalAlignableContent(),t=e[e.length-1];return e[e.length-1]=function(...e){return t.apply(null,e).then(e=>i.isArray(e)?e:[e])},e})(),overrideSubTitle:this.getOverrideSubTitle()}}}},4695:function(e,t,n){"use strict";var i,r;n.d(t,{DW:function(){return u},F$:function(){return i},Kk:function(){return h},PC:function(){return p},_L:function(){return a},bX:function(){return c},qU:function(){return o},v6:function(){return s},xR:function(){return d},z6:function(){return m}});let s="bb-goal-selection-changed",o="bb-goal-alignment-saved",a="bb-goal-alignment-legacy-picker-saved";function l(e){var t;let n=null===(t=e.split(";"))||void 0===t?void 0:t[0];return Object.values(i).find(e=>e===n)}function c(e){return"blackboard.data.qti.asi.AsiObject"===l(e)}function d(e,t){return`${e};${t}`}function u(e){var t,n;if(!l(e))throw Error("Event is not a goal alignment event");return null===(n=e.split)||void 0===n?void 0:null===(t=n.call(e,";"))||void 0===t?void 0:t[1]}function p(e){var t;let n=(null==e?void 0:null===(t=e.getContentIdForGoalAlignment)||void 0===t?void 0:t.call(e))||"";return`${s};${n}`}(r=i||(i={})).Asi="blackboard.data.qti.asi.AsiObject",r.Content="blackboard.data.content.Content",r.Rubric="blackboard.plugin.rubric.api.core.data.Rubric";let m=e=>{let t=e.flatMap(e=>{var t;return null==e?void 0:null===(t=e.alignedGoals)||void 0===t?void 0:t.map(e=>e.goalId).filter(e=>!!e)});return new Set(t).size},h=({$scope:e,contents:t,goalCount:n})=>{0===e.goalAlignedContents.length&&(e.goalAlignedContents=t),e.alignedGoalsCount=n,e.alignedGoalsIsLoaded=!0}},443707:function(e,t,n){"use strict";n.d(t,{e:function(){return C}});var i=n(464027),r=n(563060),s=n(12838),o=n(83991),a=n(786430),l=n(362767),c=n(417526),d=n(401760),u=n(108762),p=n(676954),m=n(555840),h=n(808361),g=n(860995),f=n(129609),b=n(341253),v=n(447192),y=n(740646),S=n(871405);let C="ultra.course.grades.router";i.module(C,[p.moduleName,h.e1,c.e1,d.e1,g.e1,b.e1]).config([h.e2,g.e2,f.e2,b.e2,(e,t,i,b)=>{e.peekState("gradebook-item",{abstract:!0,require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(60747),n.e(12820),n.e(83749),n.e(35969)]).then(n.bind(n,837942)),resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/gradebook-item/gradebook-item")],[g.gc]:t.resolve,currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent}}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([n.e(80118),n.e(10901),n.e(60866)]).then(n.bind(n,110901)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))]},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(61515)]).then(n.bind(n,539599))}},peekStates:[r.eJ.ASSESSMENT_AUTO_GENERATE,"assignment-grading","assessment-settings","conversations",r.Z5.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",c.Ze,r.Z5.Rubric.RUBRIC,"rubric-list",r.Z5.Rubric.RUBRIC_EVALUATION,r.Z5.Rubric.RUBRIC_GENERATE,"view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])]},onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[()=>Promise.all([n.e(80118),n.e(10901),n.e(60866)]).then(n.bind(n,110901)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(82589),n.e(58836),n.e(8628),n.e(86727),n.e(47431),n.e(41474),n.e(77612),n.e(10901),n.e(71433),n.e(88856),n.e(4816),n.e(81709),n.e(21039)]).then(n.bind(n,906918))]},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(61515)]).then(n.bind(n,539599))}},peekStates:["assignment-grading","assessment-settings","conversations",r.Z5.Course.COURSE_MESSAGE,"course-group","editAssignmentFileAttachment",c.Ze,r.Z5.Rubric.RUBRIC,"rubric-list",r.Z5.Rubric.RUBRIC_EVALUATION,r.Z5.Rubric.RUBRIC_GENERATE,"view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:()=>n.e(83417).then(n.bind(n,783417)),resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/media-widget/media-widget")]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState(r.Z5.Course.COURSE_GRADES_MULTIPLE_ATTEMPT,{panelClass:"peek",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[g.gc]:t.resolve,currentContent:u.Z.nullContent,currentColumn:u.Z.currentColumn},url:"/multiple-attempt-grading?columnId&gradeId&userId&groupId",params:{hasException:!1},reloadOnSearch:!1,require:[()=>Promise.all([n.e(87844),n.e(60747),n.e(64210),n.e(51633)]).then(n.bind(n,264210)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(91263),n.e(60747),n.e(33979),n.e(3780),n.e(64210),n.e(96902)]).then(n.bind(n,838019))],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:[r.Z5.Grade.SUBMISSION_GRADING,r.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING]}).peekState(r.Z5.Grade.RECONCILE_GRADE,{panelClass:"full",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],[g.gc]:t.resolve,currentContent:u.Z.nullContent,currentColumn:u.Z.currentColumn},url:"/reconcile-grade?columnId&gradeId&userId",require:[()=>n.e(60180).then(n.bind(n,160180)),()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(33979),n.e(3780),n.e(15653)]).then(n.bind(n,315653))],pageTitle:"course.grades.reconcile-grade.title",peekStates:[r.Z5.Grade.SUBMISSION_GRADING,r.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING],peekViewName:"reconcile-grade-peek"}).peekState(r.Z5.Grade.PER_ASSESSMENT_SETTINGS,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:u.Z.currentContent,currentColumn:u.Z.currentColumn,[g.gc]:t.resolve},url:"/per-assessment-settings?userId&columnId&membershipId&contentId",require:[()=>Promise.all([n.e(31151),n.e(93149)]).then(n.bind(n,393149)),()=>Promise.all([n.e(60979),n.e(31151),n.e(60379)]).then(n.bind(n,245304))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState(r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:u.Z.currentContent,currentColumn:u.Z.currentColumn,[g.gc]:t.resolve},url:"/per-assessment-group-settings?groupId&columnId&userId&contentId",require:[()=>Promise.all([n.e(31151),n.e(42494)]).then(n.bind(n,242494)),()=>Promise.all([n.e(60979),n.e(31151),n.e(60379)]).then(n.bind(n,245304))],pageTitle:"course.grades.per-assessment-settings.title"}).peekState(r.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,{panelClass:"peek",courseEntitlement:o.SE.ModifyGradebook,url:"/per-gradable-item-settings?userId&columnId&courseId",require:()=>n.e(91431).then(n.bind(n,991431)),pageTitle:"components.directives.grade.submission-list-row.per-gradable-item.title",template:"<gradable-item-exempt-settings>"}).peekState(r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,{panelClass:"full",courseEntitlement:o.SE.ModifyGradebook,resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")],currentContent:u.Z.currentContent,currentColumn:u.Z.currentColumn,[g.gc]:t.resolve},url:"/attempt-log?userId&columnId&gradeId&contentId",require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(46835)]).then(n.bind(n,57952)),peekViewName:"attempt-log-peek",pageTitle:"components.directives.grade.submission-list-row.per-assessment.attemptLog"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:()=>n.e(88948).then(n.bind(n,88948)),peekViewName:"originality-report-peek"}).peekState(r.Z5.Grade.SUBMISSION_GRADING,{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],[f.gc]:i.resolve,currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId&membershipId",onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(60747),n.e(79084),n.e(29292)]).then(n.bind(n,179084)),()=>Promise.all([n.e(98290),n.e(21749),n.e(42641),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(61496),n.e(33979),n.e(3780),n.e(8628),n.e(48076),n.e(35259),n.e(96926),n.e(79084),n.e(5252),n.e(66621),n.e(23177)]).then(n.bind(n,136928))],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1},peekViewName:"submission-grading-peek",peekStates:[r.Z5.Assessment.ASSESSMENT_SETTINGS,r.Z5.Grade.SUBMISSION_DEEP_LINK,r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,"assessment-submission-feedback","originality-report",r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,r.Z5.ContentMarket.CONTENT_MARKET]}).peekState(r.Z5.Grade.SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${r.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013)]).then(n.bind(n,867589))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.Z5.Lti.LTI,r.Z5.Grade.SUBMISSION_DEEP_LINK,r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG]}).peekState(r.Z5.Grade.SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${r.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(44246)]).then(n.bind(n,244246))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(r.Z5.Grade.SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${r.Z5.Grade.SUBMISSION_GRADING}@`]:{require:()=>n.e(5076).then(n.bind(n,905076))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(r.Z5.Grade.GROUP_SUBMISSION_GRADING,{panelClass:"full",params:{userId:null},resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])],currentColumn:u.Z.currentColumn,currentContent:u.Z.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId&groupAttemptId&userId",onEnter:[a.HV,h.HV,(e,t)=>{t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(66621)]).then(n.bind(n,266621)),()=>Promise.all([n.e(98290),n.e(21749),n.e(42641),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(61496),n.e(33979),n.e(3780),n.e(8628),n.e(48076),n.e(35259),n.e(96926),n.e(79084),n.e(5252),n.e(66621),n.e(23177)]).then(n.bind(n,136928))],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:[r.Z5.Assessment.ASSESSMENT_SETTINGS,r.Z5.Grade.SUBMISSION_DEEP_LINK,r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,"originality-report",r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,r.Z5.ContentMarket.CONTENT_MARKET]}).peekState(r.Z5.Grade.GROUP_SUBMISSION_GRADING_FEEDBACK_TAB,{url:"/inline-feedback?attemptId&userId&mode",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${r.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013)]).then(n.bind(n,867589))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,r.Z5.Lti.LTI,r.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(r.Z5.Grade.GROUP_SUBMISSION_GRADING_RUBRICS_TAB,{url:"/inline-rubric",pageTitle:"course.rubricInline.title",panelClass:"full",views:{[`${r.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(44246)]).then(n.bind(n,244246))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,r.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState(r.Z5.Grade.GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB,{url:"/originality-report",pageTitle:"course.content.originalityReport.routeDefinition.routeTitle",panelClass:"full",views:{[`${r.Z5.Grade.GROUP_SUBMISSION_GRADING}@`]:{require:()=>n.e(5076).then(n.bind(n,905076))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,r.Z5.Grade.SUBMISSION_DEEP_LINK]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/submissions-grading")],currentColumn:["currentColumn",m.N7.H,h.HV,(e,t,n)=>{if(null!=e)return e.$asPromise();let i=n.nextParams.columnId,r=n.nextParams.courseId;return t.$find(r).gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(96926),n.e(62758)]).then(n.bind(n,396926)),()=>Promise.all([n.e(98290),n.e(21749),n.e(42641),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(91263),n.e(60747),n.e(61496),n.e(33979),n.e(3780),n.e(8628),n.e(48076),n.e(35259),n.e(96926),n.e(79084),n.e(5252),n.e(66621),n.e(23177)]).then(n.bind(n,136928))],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/offline-grades/:columnId?courseId&gradeitemView&q",views:{"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(35131)]).then(n.bind(n,394028))}},peekStates:[r.RK.OFFLINE_GRADE_AND_FEEDBACK],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.instructorHeaderLabel"}).peekState(r.RK.OFFLINE_GRADE_AND_FEEDBACK,{panelClass:"peek",url:"/offline-feedback?userId&sortParam",require:()=>n.e(43982).then(n.bind(n,43982)),pageTitle:"course.grades.gradebook-item.non-attempt-grades.pageTitle"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:m.Rp.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(20768),n.e(92777)]).then(n.bind(n,92777))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(35131)]).then(n.bind(n,394028))}},courseEntitlement:o.SE.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState(r.RK.GRADEBOOK_ITEM_ASSESSMENT,{panelClass:"full",courseEntitlement:[s.s7.ViewAssessment,o.SE.ViewAttempts],resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])]},onEnter:[a.HV,h.HV,"currentColumn",l.HV,(e,t,n,i)=>{i.column=n,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",l.HV,(e,t)=>{e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId&autoPostGrades&gradingStatus&submissionStatus",params:{contentId:m.courseContent.$G,isCreateState:!1},views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(4302),n.e(10151),n.e(80118),n.e(60979),n.e(55357),n.e(61496),n.e(82589),n.e(98377),n.e(47431),n.e(85828)]).then(n.bind(n,11490))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(67696),n.e(61515)]).then(n.bind(n,539599))},"gradebook-item-student-activity@":{require:()=>Promise.all([n.e(19760),n.e(80580),n.e(11449),n.e(96967)]).then(n.bind(n,296967))},"gradebook-item-question-analysis@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(11599),n.e(19579)]).then(n.bind(n,596997)),resolve:{"question-analysis-translations":[p.serviceName,e=>e.loadBundle("features/course/question-analysis")]}}},peekStates:[r.Z5.Grade.CREATE_OFFLINE_ATTEMPT,"assessment-settings",r.eJ.ASSESSMENT_AUTO_GENERATE,r.eJ.ASSESSMENT_AUTO_GENERATE_QUESTION,"question-analysis","question-analysis-report",r.Z5.Grade.RECONCILE_GRADE,"multiple-attempt-grading",r.Z5.Grade.SUBMISSION_GRADING,"group-submission-grading",r.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"course-group",r.XO.CONDITIONAL_RELEASE_PEEK_PANEL,c.Ze,d.db,"conversations",r.Z5.Course.COURSE_MESSAGE,"edit-file-settings",r.Z5.Rubric.RUBRIC,"rubric-list",r.Z5.Rubric.RUBRIC_EVALUATION,r.Z5.Rubric.RUBRIC_GENERATE,"view-exceptions",r.Z5.ContentMarket.CONTENT_MARKET,r.Z5.Lti.LTI,"proctoring-lti-tool",r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING,r.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,r.Z5.Grade.GRADE_AND_FEEDBACK,"grades-bulk-download",r.Z5.Grade.DOWNLOAD_TEST_RESULTS],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])]},require:()=>Promise.all([n.e(60979),n.e(92589)]).then(n.bind(n,897647)),pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},require:()=>Promise.all([n.e(60979),n.e(92589)]).then(n.bind(n,897647)),pageTitle:"course.grades.gradeItem.editItem"}).peekState(r.Z5.Grade.GRADE_ITEM_OVERALL_GRADE,{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/overallGrade?isExternalGrade&columnId&gradeitemView",views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(20768),n.e(54526)]).then(n.bind(n,54526))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(35131)]).then(n.bind(n,394028))}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState(r.Z5.Grade.GRADE_ITEM_TOTAL_CALCULATION,{panelClass:"full",resolve:{translations:["$q",p.serviceName,(e,t)=>e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])]},onExit:["$rootScope",e=>{e.$broadcast("deadline-refresh")}],url:"/totalCalculation?columnId&gradeitemView&isExternalGrade&positionBefore&positionAfter",views:{"gradebook-item-details@":{require:()=>Promise.all([n.e(20768),n.e(54526)]).then(n.bind(n,54526))},"gradebook-item-students@":{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(91263),n.e(35131)]).then(n.bind(n,394028))}},peekStates:["total-calculation-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.totalCalculation.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>n.e(13984).then(n.bind(n,113984)),pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("total-calculation-settings",{url:"/totalCalculationSettings",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>n.e(13984).then(n.bind(n,113984)),pageTitle:"course.grades.totalCalculation.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/overall-grade")]},panelClass:"peek",require:()=>n.e(59225).then(n.bind(n,159225)),pageTitle:"course.grades.overallGrade.pageTitle"}).peekState(r.Z5.Grade.GRADE_DOWNLOAD_SETTINGS,{url:"/grade-download-setting",require:()=>n.e(27496).then(n.bind(n,927496)),pageTitle:"course.grades.settings.title",peekViewName:"grades-download-peek",peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")],contentCollectionAvailability:[m.oP.H,e=>e.$new("bbcms").$resolve().$asPromise()]},url:"/grade-upload-setting",require:()=>n.e(15554).then(n.bind(n,815554)),pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:o.SE.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},url:"/grade-settings",require:()=>Promise.all([n.e(5552),n.e(89996)]).then(n.bind(n,889996)),pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:[r.Z5.Rubric.RUBRIC,r.Z5.Rubric.RUBRIC_GENERATE,r.Z5.Grade.GRADEBOOK_ITEM,r.Z5.Telemetry.INSTRUCTOR_CLASS,r.Z5.Grade.GRADING_SCHEMA],allowChildPeekStates:!0}).peekState(r.Z5.Grade.GRADE_AND_FEEDBACK,{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/grade-and-feedback")],[g.gc]:t.resolve,currentColumn:[g.gc,h.HV,(e,t)=>{let n=t.nextParams.columnId;return e.gradebook.columns.$find(n).$asPromise()}]},url:"/grade-and-feedback?columnId?userId?courseId?feedbackType",require:()=>Promise.all([n.e(87844),n.e(60747),n.e(33979),n.e(35259),n.e(2383)]).then(n.bind(n,723046)),pageTitle:"course.grades.grade-and-feedback.title"}).peekState(r.Z5.Grade.STUDENT_GRADE_AND_FEEDBACK,{url:"/student-grade-and-feedback?courseId&columnId&contentId&scaleType",require:()=>n.e(68671).then(n.bind(n,768671)),pageTitle:"course.grades.grade-and-feedback.title",template:"<student-grade-and-feedback />"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/group/course-group")]},courseEntitlement:s.pQ.ViewGroupsAsAdmin,require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(87844),n.e(4302),n.e(60747),n.e(10151),n.e(60979),n.e(82589),n.e(18196),n.e(8456)]).then(n.bind(n,208456)),pageTitle:"course.content.courseGroup.title",peekStates:[r.Z5.Course.COURSE_MESSAGE,r.xp.IMPORT_GROUP_MEMBERS,r.xp.EXPORT_GROUP_SET,r.xp.GROUP_SPACE],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/content/assignment/rubric-list")],[g.gc]:t.resolve,currentContent:u.Z.currentContent},panelClass:"peek",require:()=>Promise.all([n.e(10151),n.e(63096)]).then(n.bind(n,552463)),pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:[r.Z5.Rubric.RUBRIC],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:()=>n.e(16509).then(n.bind(n,516509)),resolve:{[g.gc]:t.resolve,currentContent:u.Z.currentContent},allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[()=>n.e(52400).then(n.bind(n,452400))],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"}).peekState(r.Z5.Grade.DOWNLOAD_TEST_RESULTS,{url:"/download-test-results?columnId",require:[()=>n.e(4172).then(n.bind(n,604172))],pageTitle:"course.grades.download-test-results.pageTitle",panelClass:"peek"}).peekState(r.Z5.Grade.GRADABLE_ITEM_STATISTICS,{url:"/column-statistics?columnId",require:[()=>n.e(71879).then(n.bind(n,271879))],pageTitle:"components.directives.grade.grid.statisticsMenuLabel",panelClass:"full"}).peekState(r.Z5.Course.COURSE_GRADES_VIEW_INDIVIDUAL_GRADES,{url:"/individual-grades?userId&membershipId&studentTabId",require:[()=>Promise.all([n.e(4302),n.e(91263),n.e(45136),n.e(29225),n.e(53435)]).then(n.bind(n,83353))],courseEntitlement:"course.gradebook-metadata.VIEW",peekStates:[r.Z5.Course.ACCOMMODATION,"assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading",r.Z5.Grade.PER_GRADABLE_ITEM_SETTINGS,"assignment-grading",r.Z5.Grade.SUBMISSION_GRADING,r.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING,"group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting",r.Z5.Grade.GRADE_AND_FEEDBACK,r.Z5.Grade.CREATE_OFFLINE_ATTEMPT,"conversion-analysis","content-manage",r.Z5.Lti.LTI,"discussion","submission-list",r.Z5.Rubric.RUBRIC,"overall-grade",r.Z5.Grade.GRADE_ITEM_TOTAL_CALCULATION,"overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis",r.Z5.Grade.RECONCILE_GRADE,"grades-bulk-download",r.Z5.Grade.DOWNLOAD_TEST_RESULTS,r.Z5.Journal.JOURNAL_PARTICIPATION_DETAIL,r.vs.INSTRUCTOR_DETAILS,r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.eJ.ASSESSMENT_OPEN_ATTEMPT_LOG,r.Z5.Grade.PER_ASSESSMENT_GROUP_SETTING],panelClass:"full",pageTitle:"course.grades.instructorHeaderLabel",pageTitleHandler:b.config({listenOn:v.BY,provides:v.mV}),onChildStateEnter:(e,t)=>{let n=e.current.name;if(null==n?void 0:n.includes(".peek.course.grades.peek."))return;let i=n.match(/^base\.([a-z]+)\.peek\.course\./),r=i&&i[1]?`base.${i[1]}`:"base.recentActivity",s=`${r}.peek.course.grades.peek.view-individual-grades`;return{stateName:`${s}.peek.${t}`,args:{...e.params,gradebookView:S.dT.List,listViewType:y.VE.id,studentTabId:o.$O.Grades}}},resolve:{preRegisterCourseGradeRoutes:[h.HV,t=>{for(let n of["courses","organizations","recentActivity","messages","admin"].map(e=>`base.${e}`).reduce((e,t)=>[...e,t,`${t}.peek.course.grades`,`${t}.peek.course.grades.peek.view-individual-grades`],[])){let i=t.get(n);e.registerPeekStates(i)}}]}}).peekState(r.Z5.Grade.SUBMISSION_DEEP_LINK,{url:"/submission-deep-link?deepLinkAttemptId&peerIndex",panelClass:"full",require:[()=>n.e(62615).then(n.bind(n,762615)),()=>n.e(75929).then(n.bind(n,275929))],peekStates:["assessment-submission-feedback"],peekViewName:"submission-deep-link"}).peekState(r.Z5.Grade.SUBMISSION_DEEP_LINK_FEEDBACK_TAB,{url:"/inline-feedback?mode&deepLinkAttemptId",pageTitle:"course.content.assessment.feedback.title",panelClass:"full",params:{mode:"inline"},resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/feedback-authoring/feedback-authoring")]},views:{[`${r.Z5.Grade.SUBMISSION_DEEP_LINK}@`]:{require:()=>Promise.all([n.e(98290),n.e(21749),n.e(65242),n.e(2938),n.e(77891),n.e(34446),n.e(21013),n.e(1349)]).then(n.bind(n,401349))}},peekStates:[r.Z5.Grade.PER_ASSESSMENT_SETTINGS,r.Z5.Lti.LTI]}).peekState(r.Z5.Grade.ATTEMPT_RECEIPT_SEARCH,{url:"/attempt-receipt-search",resolve:{[g.gc]:t.resolve,translations:[p.serviceName,e=>e.loadBundle("features/course/grades/attempt-receipt-search")]},peekStates:[r.Z5.Grade.SUBMISSION_GRADING,r.Z5.Grade.GROUP_SUBMISSION_GRADING,r.Z5.Assessment.ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING],allowChildPeekStates:!0,panelClass:"peek",require:()=>Promise.all([n.e(91263),n.e(80336)]).then(n.bind(n,406821)),pageTitle:"course.grades.attempt-receipt-search.pageTitle",peekViewName:"attempt-receipt-search-peek"}),e.peekState(r.Z5.Grade.GRADEBOOK_GRID_ADVANCED_FILTERS,{panelClass:"peek",url:"/filters",require:()=>n.e(33773).then(n.bind(n,633773)),pageTitle:"course.grades.gradebookGrid.advancedFilters",peekViewName:"gradebook-grid-advanced-filters-peek"}),e.peekState(r.Z5.Grade.GRADING_SCHEMA,{resolve:{translations:[p.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]},url:"/grading-schema",require:()=>n.e(98628).then(n.bind(n,198628)),pageTitle:"course.grades.grading-schema.title",panelClass:"full"})}])},108762:function(e,t,n){"use strict";var i=n(276635),r=n(464027),s=n(567361),o=n(860995),a=n(289319),l=n(742854),c=n(699868),d=n(676954),u=n(555840),p=n(808361),m=n(986709),h=n(259197),g=n(83991),f=n(563060);class b{}b.currentColumn=[p.HV,o.gc,"currentContent",(e,t,n)=>{if(n){let i=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(n.getAssociatedGradingColumn(i)).$asPromise().then(e=>null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then(e=>e.$asPromise()):e.$asPromise())}let i=e.nextParams.columnId;if(i&&i!==u.Rp.CREATE_COLUMN_ID)return t.gradebook.columns.$find(i,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],b.assignmentContent=[o.gc,p.HV,a.HV,(e,t,n)=>{let i=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(i){let t=e.contents.$find(i,{expand:"alignedGoals,assignedGroups,isGroupContent,permissions"});return n.setCurrentContent(t),t.$asPromise()}}],b.assessmentContent=[o.gc,"$q",d.serviceName,s.HV,p.HV,l.HV,c.HV,a.HV,(e,t,n,s,o,a,l,c)=>{if(o.nextParams.contentId!==u.courseContent.$G)return s.getContentInContentTree(s.findRootNode(e,u.courseContent.e6.Root),e.id,o.nextParams.contentId).then(e=>(c.setCurrentContent(e.content),e.content.$asPromise()));let d=t.defer();return a.loadSchemas(e).then(t=>{s.getOrMakeContentInContentTree(s.findRootNode(e,u.courseContent.e6.Root),e.id,void 0,o.nextParams.parentId,o.nextParams.positionBefore,o.nextParams.positionAfter).then(s=>{let a=s.content;c.setCurrentContent(a);let u=t.find(e=>e.scaleType===m.aQo.Score),p=t.find(e=>e.scaleType===m.aQo.Complete),f=o.nextParams.gradebookCategoryId,b=null;l.getOrLoadCategoriesForCourse(e.id).then(e=>{b=i.find(e,e=>e.id===f)}).then(()=>{let t;a.courseId=e.id,a.contentHandler=(0,h.rQK)(o.nextParams.assessmentType),a.body={};let i="course.grades.gradebook-item.title.default."+(t=b?b.isUserDefined?"custom":b.title:h.GQk.SurveyLink.isEqualTo(a.contentHandler)?"survey":"test"),s=b&&b.isUserDefined?{today:new Date,title:b.title}:{today:new Date};a.title=n.translateSync({locale:e&&e.locale,key:i,params:s,noWrap:!0}),a.isSurvey()?a.setupAssessmentContentDetail(null==p?void 0:p.id,b):(a.setupAssessmentContentDetail(null==u?void 0:u.id,b),a.getAssociatedGradingColumn().scorable=!0),a.setVisibility(m.hbA.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=g.cQ.GRADE_DEFAULT_POINTS,(t===m.bu3.Test||"true"===o.nextParams.autoPostGrades)&&(a.getAssociatedGradingColumn().autoPostGrades=!0),a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then(()=>{d.reject(),o.go(o.next.name,r.extend(o.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))})})})}),d.promise}],b.currentContent=[o.gc,"$injector",p.HV,"translations",(e,t,n)=>-1===n.next.name.indexOf(f.RK.GRADEBOOK_ITEM_ASSESSMENT)&&-1===n.next.name.indexOf("gradebook-item.scorm-submissions")?t.invoke(b.assignmentContent,null,{currentCourse:e}):t.invoke(b.assessmentContent,null,{currentCourse:e})],b.nullContent=[()=>null],t.Z=b},233404:function(e,t,n){"use strict";n.d(t,{CQ:function(){return x},CS:function(){return D},Ve:function(){return T},sC:function(){return R},y8:function(){return P}});var i=n(464027),r=n(302032),s=n(264107),o=n(12838),a=n(711976),l=n(742854),c=n(699868),d=n(385847),u=n(676954),p=n(480489),m=n(808361),h=n(401138),g=n(748303),f=n(411832),b=n(45680),v=n(362767),y=n(649955),S=n(363411),C=n(259197),E=n(563060),I=n(487741),w=n(986709),A=n(198022);function k(e,t){return function(n,i){t(n,i,e)}}let T="ultra.features.course.grades.gradesSettings.controller",P="update-telemetry-settings",D="bb-update-grade-settings-overall-grade",x="refresh-after-update-settings";class R{loadCanViewTelemetrySettingsUI(){this.canViewTelemetrySettingsUI=this.hasContentDeleteAccess&&this.hasContentModifyAccess&&this.hasContentCreateAccess}loadOverallGradeColumn(e){e.loadColumns(this.courseId,!0).then(e=>{let t=e.find(e=>e.externalGrade);t&&!this.overallGradeColumnId?(this.hasOverallGradeColumn=!0,this.overallGradeColumnId=t.id):this.hasOverallGradeColumn=!1})}loadTelemetrySettings(e){e.preferences.getPreference(R.INITIAL_FAILING_PREF_ARGS).then(e=>{this.studentFailingThreshold=this.toNumericSetting(e)}),e.preferences.getPreference(R.INITIAL_ABSENT_PREF_ARGS).then(e=>{e.key?this.studentAbsentThreshold=this.toNumericSetting(e):this.studentAbsentThreshold=R.STUDENT_ABSENT_DEFAULT}),e.preferences.getPreference(R.INITIAL_MISSED_DUE_DATE_PREF_ARGS).then(e=>{this.studentMissedDueDateThreshold=this.toNumericSetting(e)}),e.preferences.getPreference(R.INITIAL_ENABLE_PREF_ARGS).then(e=>{this.studentAlertsEnabled=e.value})}toNumericSetting(e){let t=Number(e.value);return!e.value||Number.isNaN(t)?void 0:t}set postOption(e){this.gradebookSettings.promptUserToPostWhenDone="true"===e}get postOption(){return this.gradebookSettings&&this.gradebookSettings.promptUserToPostWhenDone?"true":"false"}switchView(e,t){this.isShowSettingPage=e,t&&(this.currentViewSchema=t,this.originCurrentViewSchema=i.copy(this.currentViewSchema))}toggleSchemaTitleEditable(){if(!this.course.isComplete()&&(!this.isSchemaTitleEditable||this.currentViewSchema.title&&this.currentViewSchema.title.length>0)){if(this.isSchemaTitleEditable)this.currentViewSchema.ui.displayTitle=this.currentViewSchema.title;else{var e,t,n,i;this.currentViewSchema.localizableTitle?this.currentViewSchema.title=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:null!==(t=null===(e=this.originCurrentViewSchema.ui)||void 0===e?void 0:e.displayTitleKey)&&void 0!==t?t:""}):this.currentViewSchema.title=null!==(i=null===(n=this.originCurrentViewSchema.ui)||void 0===n?void 0:n.displayTitle)&&void 0!==i?i:""}this.isSchemaTitleEditable=!this.isSchemaTitleEditable}}adjustLowerBound(e,t){if(t<this.currentViewSchema.symbols.length-1){let n=this.currentViewSchema.symbols[t+1];n.upperBound=e.lowerBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2}e.absoluteTranslation=(e.lowerBound+e.upperBound)/2}isValidSymbolStr(e){let t=0;for(let n=0;n<this.currentViewSchema.symbols.length;n++)this.currentViewSchema.symbols[n].symbol===e.symbol&&t++;return 1===t}addSymbol(e,t){if(t<this.currentViewSchema.symbols.length-1){let n=this.currentViewSchema.symbols[t+1],i=(n.lowerBound+n.upperBound)/2;this.currentViewSchema.symbols.splice(t+1,0,{id:(0,A.v4)(),schemaId:e.schemaId,lowerBound:i,upperBound:n.upperBound,absoluteTranslation:(i+n.upperBound)/2,symbol:void 0}),n.upperBound=i,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2,this.currentViewSchema.symbols[t+2]=n,this.timeout(()=>{this.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"add",index:t+1})},this.$scope)}else throw Error("Can not add a symbol to the last symbol in the array.")}deleteSymbol(e,t){if(t!==this.currentViewSchema.symbols.length-1&&this.currentViewSchema.symbols.length>2){let n=this.currentViewSchema.symbols[t+1];n.upperBound=e.upperBound,n.absoluteTranslation=(n.lowerBound+n.upperBound)/2,this.currentViewSchema.symbols.splice(t,1),this.timeout(()=>{this.$scope.$broadcast("bb-grades-schema-symbol-change",{action:"delete",index:t})},this.$scope)}else throw Error("Can not delete the two last symbols in the array.")}validate(){var e,t;return null!==(t=null===(e=this.$scope.gradeSchemasPanelForm)||void 0===e?void 0:e.$valid)&&void 0!==t&&t}cancel(){var e,t,n;i.copy(this.originCurrentViewSchema.symbols,this.currentViewSchema.symbols),this.currentViewSchema.title=this.originCurrentViewSchema.title,this.currentViewSchema.localizableTitle?this.currentViewSchema.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:null!==(n=null===(t=this.originCurrentViewSchema.ui)||void 0===t?void 0:t.displayTitleKey)&&void 0!==n?n:""}):this.currentViewSchema.ui.displayTitle=this.originCurrentViewSchema.ui.displayTitle,null===(e=this.$scope.gradeSchemasPanelForm)||void 0===e||e.$setPristine()}save(){this.currentViewSchema.$patch().$then(e=>{var t;this.$rootScope.$broadcast("bb-grades-schema-save",e),this.originCurrentViewSchema=i.copy(this.currentViewSchema),this.originCurrentViewSchema.title=this.currentViewSchema.title,null===(t=this.$scope.gradeSchemasPanelForm)||void 0===t||t.$setPristine()})}saveTelemetrySettings(){var e,t,n;if(!this.course||!this.canViewTelemetrySettingsUI)return this.$q.when(!0);let i=[];if(this.isStudentFailingThresholdValid){let t={key:R.STUDENT_FAILING_PREFERENCE_KEY,value:null!==(e=this.studentFailingThreshold)&&void 0!==e?e:NaN,visibleToStudents:!0};i.push(this.course.preferences.setPreference(t))}if(this.isStudentAbsentThresholdValid){let e={key:R.STUDENT_ABSENT_PREFERENCE_KEY,value:null!==(t=this.studentAbsentThreshold)&&void 0!==t?t:NaN,visibleToStudents:!0};i.push(this.course.preferences.setPreference(e))}if(this.isStudentMissedDueDateThresholdValid){let e={key:R.STUDENT_MISSED_DUE_DATE_PREFERENCE_KEY,value:null!==(n=this.studentMissedDueDateThreshold)&&void 0!==n?n:NaN,visibleToStudents:!0};i.push(this.course.preferences.setPreference(e))}let r={key:R.STUDENT_ALERTS_ENABLED,value:this.studentAlertsEnabled,visibleToStudents:!0};return i.push(this.course.preferences.setPreference(r)),this.$q.all(i)}getCourseColor(){return this.$scope.course.courseColorClass}addNewCategory(){this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.isInputBluredByCancelAdd=!1,this.showAddNewCategory=!0,this.timeout(()=>{i.element("#add-new-category-input").on("keydown",e=>{e.keyCode!==d.Mf||e.shiftKey||(this.isInputBluredByCancelAdd=!0)});let e=i.element("#cancel-add-category-button");e.on("mousedown",()=>{this.isInputBluredByCancelAdd=!0}),e.on("keydown",e=>{e.keyCode===d.Mf&&e.shiftKey?this.isInputBluredByCancelAdd=!1:e.keyCode===d.Mf&&(this.isInputBluredByCancelAdd=!1,this.validateAndAddCategory())})},this.$scope,0,!1)}cancelAddNewCategory(){this.newCategoryName="",this.showAddNewCategory=!1,this.clearValidationForAddCategory()}editCategory(e){this.showAddNewCategory&&this.cancelAddNewCategory(),this.currentEditedCategory&&this.cancelEditCategory(this.currentEditedCategory),this.switchEditMode(e,!0),e.isUserDefined&&this.timeout(()=>{i.element("#cancel-update-category-button-"+e.id).on("mousedown",()=>{this.isInputBlurredByCancelButton=!0})},this.$scope)}cancelEditCategory(e){this.switchEditMode(e,!1),this.clearValidationForUpdateCategory(e)}switchEditMode(e,t){this.timeout(()=>{this.isInputBlurredByCancelButton=!t,this.currentEditedCategory=t?e:null,this.newCategoryName=t?e.localizableTitle.languageKey:"",e.ui.isEditMode=t},this.$scope),t&&this.timeout(()=>{this.addEventHandlerForEditCategory(e)},this.$scope)}validateCategory(e,t){let n=this.validationManager,i=n.execute("isEmpty",this.newCategoryName),r=!i&&n.execute("isCategoryDuplicate",this.newCategoryName,t),s=t?t.ui.form[e+t.id]:this.$scope.addCategoryForm[e];return s&&(i||r)&&(s.$setValidity("required",!i),s.$setValidity("nameDuplicate",!r),s.$setDirty()),!i&&!r}createCategory(){this.isInputBluredByCancelAdd||this.course.gradebook.categories.$create({title:this.newCategoryName}).$then(e=>{let t=this.categories.length;if(t>0){this.categoryService.reorderCategories(this.categories,t-1),this.cancelAddNewCategory();let n=this.$scope.addCategoryForm["add-new-category-input"];n&&n.$setPristine(),this.categoryService.updateCategoriesForCourse(this.course.id,e),e.permissions={delete:!0,edit:!0},this.timeout(()=>{this.addEventHandlerForEditCategory(e)},this.$scope)}})}addEventHandlerForEditCategory(e){i.element("#update-category-input-"+e.id).on("keydown",e=>{e.keyCode!==d.Mf||e.shiftKey||(this.isInputBlurredByCancelButton=!0)});let t=i.element("#cancel-update-category-button-"+e.id);t.on("mousedown",e=>{this.isInputBlurredByCancelButton=!0}),t.on("keydown",t=>{t.keyCode===d.Mf&&t.shiftKey?this.isInputBlurredByCancelButton=!1:t.keyCode===d.Mf&&(this.isInputBlurredByCancelButton=!1,this.validateAndUpdateCategory(e))})}deleteCategory(e){let t=this.categories[e];this.categories[e].$destroy().$allow(["400"]).$asPromise().then(e=>{e&&e.$response&&e.$response.data&&400===e.$response.data.status?this.$modal.open({template:I,scope:this.$scope,resolve:{translations:[u.serviceName,e=>e.loadBundle("features/course/grades/course-grades")]}}):this.categoryService.deleteCategoriesForCourse(this.course.id,t)})}updateCategory(e){this.isInputBlurredByCancelButton||(e.localizableTitle.languageKey=this.newCategoryName,e.title=e.localizableTitle.languageKey,e.$save(["title"]).$then(()=>{this.switchEditMode(e,!1),this.categoryService.updateCategoriesForCourse(this.course.id,e),this.$rootScope.$broadcast("bb-grades-category-update",e)}))}getCategoryIcon(e){return this.categoryService.getCategoryIcon(e)}validateAndAddCategory(){this.validateCategory("add-new-category-input")&&this.createCategory()}validateAndUpdateCategory(e){this.validateCategory("update-category-input-",e)&&this.updateCategory(e)}getCategoryMaxLength(){return 64}getCategoryMaxLengthDiff(){let e=this.$scope.addCategoryForm["add-new-category-input"].$error;return e&&e.maxlength?e.maxlength.diff:0}getCategoryMaxLengthDiffUpdate(e){let t=e.ui.form["update-category-input-"+e.id].$error;return t&&t.maxlength?t.maxlength.diff:0}showOptionsForCategory(e){return e.title!==w.bu3.Attendance&&(!e.permissions||e.permissions.delete||e.permissions.edit)}getCategoryOverflowMenu(e){let t=[];return e.permissions&&e.permissions.edit&&t.push({icon:"draw",onClick:()=>{this.editCategory(e)},labelKey:"global.edit"}),e.permissions&&e.permissions.delete&&t.push({icon:"trash",onClick:()=>{this.deleteCategory(this.categories.indexOf(e))},confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.$q.when(h.Hz("x-bb-category-delete"))},labelKey:"global.delete"}),t}clearValidationForAddCategory(){let e=this.$scope.addCategoryForm["add-new-category-input"];e&&(e.$setValidity("required",!0),e.$setValidity("nameDuplicate",!0),e.$setPristine())}clearValidationForUpdateCategory(e){let t=e.ui.form["update-category-input-"+e.id];t&&(t.$setValidity("required",!0),t.$setValidity("nameDuplicate",!0),t.$setPristine())}getCodeOverflowMenu(e){let t=[];return e.model.permissions&&e.model.permissions.update&&t.push({icon:"draw",onClick:this.updateNotation.bind(this,e),labelKey:"global.edit"}),e.model.permissions&&e.model.permissions.delete&&t.push({icon:"trash",onClick:this.deleteNotation.bind(this,e),confirmationOptions:{lazyLoadTitleKeyAndInstructionsKey:()=>this.$q.when(h.Hz("x-bb-grade-notation"))},labelKey:"global.delete"}),t}get isNotationEditing(){return this.notations.some(e=>e.isEditing)}get activeNotation(){return this.notations.filter(e=>e.isEditing)[0]}showOptionsForNotation(e){let t=e.model.permissions;return!t||t.delete||t.update}createNotation(e){this.isNotationEditing||(e.stopPropagation(),this.buildNewNotation())}updateNotation(e){e.model.permissions.update&&!this.isNotationEditing&&(e.code=e.model.code,e.description=e.model.description,this.timeout(()=>{e.isEditing=!0},this.$scope))}leaveEditMode(e,t){this.isNotationEditing&&("cancel"===t?this.cancelEdit(e):(this.validateNotation(e),this.confirmEdit(e)),this.$scope.$broadcast("focus",this.focusNotationEventName))}confirmEdit(e){let t=this.isCodeValidate,n=!1;if((e.model.code!==e.code||e.model.description!==e.description)&&(n=!0),t)e.isEditing=!1,e.model.code=e.code,e.model.description=e.description,e.model.id?n&&e.model.$save().$then(e=>{this.$scope.$emit("grade-notation-update",this.course.id),this.$rootScope.$broadcast("bb-reload-grid-view")}):this.course.gradebook.performancecodes.$create(e.model).$then(t=>{e.model=t,this.$scope.$emit("grade-notation-update",this.course.id),this.$rootScope.$broadcast("bb-reload-grid-view")});else{let t=e.form["title-"+e.id],n=e.form["detail-"+e.id];t.$setTouched(),n.$setTouched()}}cancelEdit(e){e.isEditing=!1,(""===e.model.code||""===e.model.description)&&this.deleteNotation(e)}validateNotation(e){let t=e.form["title-"+e.id],n=e.form["detail-"+e.id],i=this.validationManager,r=i.execute("isEmpty",e.code),s=i.execute("isNotationNumberOnly",e.code),o=i.execute("isEmpty",e.description),a=i.execute("isNotationExist",e),l=i.execute("isNotationSchemaDuplicate",e),c=e=>{t.$setValidity("required","isNotationEmpty"!==e),t.$setValidity("notationNumberOnly","isNotationNumberOnly"!==e),t.$setValidity("notationExist","isNotationExist"!==e),t.$setValidity("notationSchemaDuplicate","isNotationSchemaDuplicate"!==e),n.$setValidity("required","descriptionEmpty"!==e)};r?c("isNotationEmpty"):s?c("isNotationNumberOnly"):a?c("isNotationExist"):l?c("isNotationSchemaDuplicate"):o?c("descriptionEmpty"):c(),t.$setDirty(),n.$setDirty(),this.isCodeValidate=!(r||s||o||a||l)}deleteNotation(e){let t=this.notations.indexOf(e);e.model.$destroy().$allow(["400"]).$asPromise().then(e=>{this.$scope.$emit("grade-notation-update",this.course.id),this.notations.splice(t,1),this.$rootScope.$broadcast("bb-reload-grid-view")})}buildNewNotation(){let e={id:this.generateNotationId(),code:"",description:"",model:this.GradeNotationModel.$build({code:"",description:"",permissions:{delete:!0,update:!0}}),isEditing:!0};return this.notations.push(e),e}generateNotationId(){return"grade_notation_"+R.uid++}pastDueCheckboxEvent(){this.$scope.$broadcast(g.OI,this.isPastZeroAssigned)}automaticZeroConfirm(e){let t;this.isPastZeroAssigned?(t={countUnsubmittedWorkAsZero:!0},delete this.gradebookSettings.retainAutoZero):(a.Z.Retain===e.choice&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!0}),a.Z.Delete===e.choice&&(t={countUnsubmittedWorkAsZero:!1,retainAutoZero:!1})),this.updatePastDueZero(t)}automaticZeroCancel(){this.isPastZeroAssigned=!this.isPastZeroAssigned}updatePastDueZero(e){Object.assign(this.gradebookSettings,e),this.gradebookSettings.$patch().$then(()=>{this.$rootScope.$broadcast(x)})}constructor(e,t,n,r,a,l,c,d,u,p,m,h,g,f,b,v){this.$scope=e,this.$rootScope=t,this.$q=n,this.course=r,this.$modal=a,this.localizeService=l,this.timeout=c,this.GradeNotationModel=d,this.ultraState=u,this.schemaService=p,this.categoryService=m,this.gradebookPermissionService=h,this.entitlementService=g,this.context=f,this.grade=b,this.featureFlagService=v,this.isShowSettingPage=!0,this.isSchemaTitleEditable=!1,this.notations=[],this.isCodeValidate=!0,this.hasTelemetryData=!1,this.showAddNewCategory=!1,this.newCategoryName="",this.isInputBluredByCancelAdd=!1,this.isInputBlurredByCancelButton=!1,this.currentEditedCategory=null,this.focusNotationEventName="add-notation-button-focus",this.isStudentFailingThresholdValid=!1,this.isStudentAbsentThresholdValid=!1,this.isStudentMissedDueDateThresholdValid=!1,this.featureTelemetryStudentProgress=!1,this.isPastZeroAssigned=!0,this.goToTelemetryView=()=>{this.ultraState.goPeekState(E.vs.INSTRUCTOR_CLASS)},this.updateThresholdValueHandler=e=>{void 0!==e.studentFailingThreshold&&(this.studentFailingThreshold=e.studentFailingThreshold),void 0!==e.studentAbsentThreshold&&(this.studentAbsentThreshold=e.studentAbsentThreshold),void 0!==e.studentMissedDueDateThreshold&&(this.studentMissedDueDateThreshold=e.studentMissedDueDateThreshold),void 0!==e.studentAlertsEnabled&&(this.studentAlertsEnabled=e.studentAlertsEnabled),void 0!==e.studentFailingThresholdValid&&(this.isStudentFailingThresholdValid=e.studentFailingThresholdValid),void 0!==e.studentAbsentThresholdValid&&(this.isStudentAbsentThresholdValid=e.studentAbsentThresholdValid),void 0!==e.studentMissedDueDateThresholdValid&&(this.isStudentMissedDueDateThresholdValid=e.studentMissedDueDateThresholdValid)},v.createWaiter(C.x40.HowAmIDoingReport).then(e=>{this.featureTelemetryStudentProgress=e}),e.gradesSettings=this,this.courseId=this.ultraState.nextParams.courseId,this.hasGradebookModifyAccess=this.gradebookPermissionService.canModify(),this.hasContentDeleteAccess=this.entitlementService.isEntitled(o.eo.DeleteContent,this.courseId),this.hasContentModifyAccess=this.entitlementService.isEntitled(o.eo.ModifyContent,this.courseId),this.hasContentCreateAccess=this.entitlementService.isEntitled(o.eo.CreateContent,this.courseId),this.loadCanViewTelemetrySettingsUI(),r&&(p.loadSchemas(r).then(e=>{e.forEach(e=>{if(e.localizableTitle){var t,n;e.ui.displayTitle=this.localizeService.translateSync({locale:this.localizeService.getLocale(this.$scope),key:null!==(n=null===(t=e.ui)||void 0===t?void 0:t.displayTitleKey)&&void 0!==n?n:""})}}),this.schemas=e.filter(e=>e.scaleType===w.aQo.Tabular)}),r.gradebook.settings.$resolve().$then(e=>{this.gradebookSettings=e,this.isPastZeroAssigned=e.countUnsubmittedWorkAsZero,this.isPastZeroCompleted=this.course.isComplete()}),this.categoryService.getOrLoadCategoriesForCourse(r.id,!0).then(e=>{this.categories=e}),r.gradebook.performancecodes.$refresh().$then(e=>{e.forEach(e=>{let t={model:e,id:this.generateNotationId(),isEditing:!1,code:e.code,description:e.description};this.notations.push(t)}),this.notations.permissions=e.permissions}),this.loadOverallGradeColumn(b),this.loadTelemetrySettings(r),this.$scope.$on(P,(e,t)=>{if(this.courseId===t.courseId){var n;t.studentFailingThresholdValid&&(this.studentFailingThreshold=t.studentFailingThreshold),t.studentAbsentThresholdValid&&(this.studentAbsentThreshold=t.studentAbsentThreshold),t.studentMissedDueDateThresholdValid&&(this.studentMissedDueDateThreshold=t.studentMissedDueDateThreshold),this.studentAlertsEnabled=null!==(n=t.studentAlertsEnabled)&&void 0!==n?n:"false"}}),this.$scope.$on(D,(e,t,n)=>{this.hasOverallGradeColumn=n,this.overallGradeColumnId=t})),this.validationManager={isEmpty:e=>!e,isNotationNumberOnly:e=>!Number.isNaN(Number(e)),isNotationExist:e=>this.notations.some(t=>t!==e&&t.code===e.code),isNotationSchemaDuplicate:e=>this.schemas[0].symbols.some(t=>t.symbol===e.code),isCategoryDuplicate:(e,t)=>this.categories.some(n=>{if(n===t)return!1;let i=n.localizableTitle.languageKey;return n.isUserDefined||(i=i.substr(0,i.indexOf("."))),i.toLocaleLowerCase()===e.toLocaleLowerCase()}),execute:(e,...t)=>{let n=this.validationManager;return n[e]&&n[e].apply(n,[].slice.call(t,0))}},this.validationManager.execute(),this.entitlementService.hasCourseEntitlement(o.b0.CreateRubrics,this.courseId).then(t=>{e.hasRubricCreateAccess=t}),this.context.getSystemInfo().$asPromise().then(e=>{e.telemetryEnabled&&(this.hasTelemetryData=!0)}),e.$on("$stateChangeStart",(t,n,i,r,o)=>{if(r.name.endsWith(E.RK.GRADE_SETTING)&&!n.name.endsWith(E.RK.GRADE_SETTING)&&e.gradesSettings.saveTelemetrySettings(),r.name===n.name||e.gradeSchemasPanelForm&&(!e.gradeSchemasPanelForm||e.gradeSchemasPanelForm.$dirty)){if(n.name.indexOf("rubric.mode")>1&&s.e.Copy===s.J(i.mode))return!0;t.preventDefault()}else this.leaveEditMode(this.activeNotation,"confirm")}),e.$watch("gradeSchemasPanelForm.$dirty",()=>{this.isShowSettingPage||(e.gradeSchemasPanelForm&&e.gradeSchemasPanelForm.$dirty?(i.element(".bb-offcanvas-panel.peek .bb-close").hide(),i.element(".bb-offcanvas-panel.peek .panel-wrap").addClass("has-footer")):(i.element(".bb-offcanvas-panel.peek .bb-close").show(),i.element(".bb-offcanvas-panel.peek .panel-wrap").removeClass("has-footer")))})}}R.STUDENT_FAILING_PREFERENCE_KEY="telem.threshold.failing.grade",R.STUDENT_ABSENT_PREFERENCE_KEY="telem.threshold.days.absent",R.STUDENT_MISSED_DUE_DATE_PREFERENCE_KEY="telem.threshold.missed.due.dates",R.STUDENT_ALERTS_ENABLED="telem.student.alerts.enabled",R.STUDENT_ABSENT_DEFAULT=15,R.INITIAL_FAILING_PREF_ARGS={key:R.STUDENT_FAILING_PREFERENCE_KEY},R.INITIAL_ABSENT_PREF_ARGS={key:R.STUDENT_ABSENT_PREFERENCE_KEY},R.INITIAL_MISSED_DUE_DATE_PREF_ARGS={key:R.STUDENT_MISSED_DUE_DATE_PREFERENCE_KEY},R.INITIAL_ENABLE_PREF_ARGS={key:R.STUDENT_ALERTS_ENABLED,defaultValue:"true"},R.uid=0,R=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([k(0,(0,r.tB)("$scope")),k(1,(0,r.tB)("$rootScope")),k(2,(0,r.tB)("$q")),k(3,(0,r.tB)("currentCourse")),k(4,(0,r.tB)("$modal")),k(5,(0,r.tB)(u.serviceName)),k(6,(0,r.tB)(p.H)),k(7,(0,r.tB)("GradeNotationModel")),k(8,(0,r.tB)(m.HV)),k(9,(0,r.tB)(l.HV)),k(10,(0,r.tB)(c.HV)),k(11,(0,r.tB)(b.HV)),k(12,(0,r.tB)(f.HV)),k(13,(0,r.tB)(v.HV)),k(14,(0,r.tB)(y.HV)),k(15,(0,r.tB)(S.HV))],R)},344154:function(e,t,n){"use strict";n.d(t,{UM:function(){return C},Ve:function(){return S},o3:function(){return E}});var i=n(464027),r=n(676954),s=n(808361),o=n(478459),a=n(14454),l=n(480489),c=n(351876),d=n(65783),u=n(703453),p=n(649955),m=n(302032),h=n(472690),g=n(253429),f=n(842461),b=n(657995),v=n(625506);function y(e,t){return function(n,i){t(n,i,e)}}let S="ultra.features.course.grades.gradesUploadSettings.controller",C="refresh-after-upload";class E{parseUploadGradebook(e){this.course.gradebook.parseUploadedGradebook(e).then(t=>{var n,i;if(400===t.$response.status)return this.showErrorModal(h),!1;this.timeoutService(()=>{c.pn(this.ultraState.current.name,"peek.content-collection-picker")&&this.closePanel()},this.$scope,0),this.hasDroppedClass=!0,this.invalidUserNames=t.invalidUserNames,this.invalidUserNamesCount=null!==(i=null===(n=this.invalidUserNames)||void 0===n?void 0:n.split(",").filter(e=>e.trim()).length)&&void 0!==i?i:0,this.fileName=e.name,this.changedList=t.changedList,this.selectAll=!0,this.checkAll(!0)})}checkAll(e){this.columnList=[],this.errorColumnList=[],i.forEach(this.changedList,t=>{if(!t.columnTitle)return!1;t.isError?(t.message&&(t.message.languageKey=t.message.languageKey.replace(/\./g,"_"),t.message.params&&this.getColumnErrorMessage(t.message),t.message.translatedLanguageKey=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:t.message.languageKey,params:{data:t.message.detailErrorMessageKey},noWrap:!0,noEscape:!0})),this.errorColumnList.push(t)):(t.checked=e,t.clearGradeOption=t.needOverrideAndAttemptsChoices?"OVERRIDE":"DO_NOTHING",this.updateColumnList(t,t.checked))})}updateColumnList(e,t){t?this.columnList.push(e):this.columnList.splice(this.columnList.indexOf(e),1)}validate(){return this.columnList&&this.columnList.length>0}cancelClicked(){this.closePanel()}chooseDestination(){this.ultraState.goPeekState("content-collection-picker",{pickerType:"File",multi:"false"})}closePanel(){this.ultraState.leavePeekState(this.ultraState.current.name)}deleteFile(){this.hasDroppedClass=!1,this.columnList=[],this.changedList=[],this.errorColumnList=[],this.selectAll=!1}showErrorModal(e){this.modalService.open({scope:this.modalScope,template:e})}confirmToClose(){this.confirmedToClose=!0,this.ultraState.leavePeekState(this.ultraState.current.name)}registerStateChangeListener(){this.stateChangeListener=this.$scope.$on("$stateChangeStart",(e,t,n,i,r)=>{0>t.name.indexOf("grade-upload-setting")&&this.hasDroppedClass&&!this.afterImported&&!this.confirmedToClose&&(e.preventDefault(),this.$scope.$broadcast("show-confirmation","grades-upload-setting"))})}importGradebook(e){if(this.invalidUserNames&&!e)return this.$scope.$broadcast("show-confirmation","grades-upload-continue-with-errors"),!1;let t={changedList:this.columnList};this.course.gradebook.importGradebook(t).then(e=>{if(this.afterImported=!0,"bb-rest-course-is-closed"===e.$response.data.code)return this.showErrorModal(g),!1;e.errorItem?(this.modalScope.failedItems=e.errorItem,this.modalScope.failedItemsCount=e.errorItem&&e.errorItem.split(",").filter(e=>e.trim()).length,this.showErrorModal(b),this.ultraState.leavePeekState(this.ultraState.current.name)):(this.$rootScope.$broadcast(C,e.savedItemsIds),this.ultraState.leavePeekState(this.ultraState.current.name),this.toast.show({messageKey:"course.grades.grades-upload-settings.complete",icon:"icon-check",toastStatus:"success"}))})}getColumnErrorMessage(e){e.params[0].rawValue?e.detailErrorMessageKey=e.params[0].rawValue:e.params.forEach(t=>{e.languageKey===t.localizableMessage.languageKey.replace(/\./g,"_")&&(e.detailErrorMessageKey=t.localizableMessage.params?t.localizableMessage.params[0].rawValue:"")})}constructor(e,t,n,i,r,s,o,a,l,d,p){this.$scope=e,this.$rootScope=t,this.postMessageDispatcher=n,this.timeoutService=i,this.course=r,this.ultraState=s,this.toast=o,this.modalService=a,this.contentCollectionAvailability=l,this.bbLocalize=d,this.grade=p,this.confirmedToClose=!1,this.fileName="",this.hasDroppedClass=!1,this.selectAll=!1,this.showErrorDetail=!1,this.afterImported=!1,this.showContentCollection=!1,this.uploadErrorFileTypeTemplate=f,this.invalidUserNames="",this.invalidUserNamesCount=0,this.failedItems="",this.failedItemsCount=0,e.gradesUploadSettings=this,this.showContentCollection=this.contentCollectionAvailability.toolEnabledSetting.isAvailable,this.modalScope=this.$rootScope.$new(),e.$on(u.Ei,(e,t,n,i)=>{if(i===u.mb.Uploaded){this.source="LOCAL";let e={source:this.source,name:n.fileName,location:n.fileLocation};this.parseUploadGradebook(e),v(".upload-gradebook-panel .help-link").focus()}}),this.postMessageDispatcher.registerEventHandler("classic-picker-submit",e=>{var t;let n=e.items[0];if(!/(\.xls|\.csv)$/i.exec(null!==(t=n.linkTitle)&&void 0!==t?t:""))return this.showErrorModal(f),!1;this.source="CONTENT_COLLECTION";let i=(null==n?void 0:n.url)||"",r=i.substr(i.lastIndexOf("/")),s={source:this.source,name:n.linkTitle||"",location:r};this.parseUploadGradebook(s)},this.$scope),this.postMessageDispatcher.registerEventHandler("classic-picker-cancel",(e,t)=>{this.timeoutService(()=>{c.pn(this.ultraState.current.name,"peek.content-collection-picker")&&this.closePanel(),window!==t&&(null==t||t.close())},this.$scope,0)},this.$scope),this.uploadAction=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.grades.grades-upload-settings.upload"}),this.completedModalTitleKey=`${this.course.isOrganization?"course":"organization"}.grades.grades-upload-settings.courseComplete.title`,this.registerStateChangeListener()}}E=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([y(0,(0,m.tB)("$scope")),y(1,(0,m.tB)("$rootScope")),y(2,(0,m.tB)(a.HV)),y(3,(0,m.tB)(l.H)),y(4,(0,m.tB)("currentCourse")),y(5,(0,m.tB)(s.HV)),y(6,(0,m.tB)(o.HV)),y(7,(0,m.tB)(d.HV)),y(8,(0,m.tB)("contentCollectionAvailability")),y(9,(0,m.tB)(r.serviceName)),y(10,(0,m.tB)(p.HV))],E)},264107:function(e,t,n){"use strict";var i,r;function s(e){if(e)return Object.values(i).find(t=>t.toLowerCase()===e.toLowerCase())}n.d(t,{J:function(){return s},e:function(){return i}}),(r=i||(i={})).None="none",r.Create="create",r.GenerateCache="generate-cache",r.Edit="edit",r.Copy="copy"},594868:function(e,t,n){"use strict";n.d(t,{El:function(){return l},e1:function(){return a}});var i=n(464027),r=n(245779),s=n(676954),o=n(808361);let a="ultra.course.rubric.rubric-goal-alignment",l="rubric-goal-alignment",c=["course","goal-alignment","goal"];class d extends r.Z{resolveGoalAlignableContent(){return["$q","currentCourse","currentRubric",s.serviceName,o.HV,(e,t,n,i,r)=>e.when(i.loadBundle(`features/${c.join("/")}`)).then(()=>t.rubrics.$find(n.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>{e.rows.forEach(e=>{e.id&&r.nextParams&&r.nextParams.rowId&&e.id===r.nextParams.rowId&&(this.rubricRow=e)})})).then(()=>this.rubricRow?this.setupGoalAlignableContent(this.rubricRow,i):e.when([]))]}getPeekStateName(){return l}getOverrideSubTitle(){return["currentRubric",o.HV,(e,t)=>{let n="";return e.rows.forEach(e=>{e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(n=e.header)}),n}]}setupGoalAlignableContent(e,t){return[{getContentTitleForGoalAlignment:()=>t.translateSync({locale:null,key:`${c.join(".")}.goalsAlignedWithRubricCriteria`}),getContentIdForGoalAlignment(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:(null==e?void 0:e.alignedGoals)||[]}]}constructor(...e){super(...e),this.url="/goalAlignment/:rowId",this.panelClass="peek rubric-goal-peek"}}d.$inject=["$injector","$q"],i.module(a,[o.e1,s.moduleName]).config([o.e2,e=>{let t=new d;e.peekState(t.getPeekStateName(),t)}])},646662:function(e,t,n){"use strict";n.d(t,{e:function(){return h}});var i=n(464027),r=n(676954),s=n(860995),o=n(289319),a=n(129609),l=n(264107),c=n(968362),d=n(594868),u=n(808361),p=n(610761),m=n(563060);let h="ultra.course.rubrics.router";i.module(h,[r.moduleName,u.e1,p.e1,d.e1,s.e1,o.e1,a.e1]).config([u.e2,s.e2,a.e2,o.e2,(e,t,i,o)=>{e.peekState(m.Z5.Rubric.RUBRIC,{abstract:!0,url:"/rubric",resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])],[s.gc]:t.resolve,mode:()=>l.e.None}}).peekState(m.Z5.Rubric.RUBRIC_MODE,{url:"?rubricId&mode&cachedRubricId",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[d.El],peekViewName:"rubric-grid-peek@",require:()=>Promise.all([n.e(41655),n.e(91866),n.e(34346),n.e(60131)]).then(n.bind(n,560131)),resolve:{currentRubric:[s.gc,c.HV,u.HV,(e,t,n)=>{switch(n.nextParams&&n.nextParams.mode.toLowerCase()){case l.e.Create:return t.generateDefaultRubric(e);case l.e.GenerateCache:var i;return t.buildCachedGeneratedRubric(e,null!==(i=n.nextParams.cachedRubricId)&&void 0!==i?i:"");case l.e.Edit:return n.nextParams.rubricId?e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case l.e.Copy:return e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(e=>t.createRubricCopy(e));default:return null}}],hasEvaluations:["currentColumn",u.HV,(e,t)=>(t.nextParams&&t.nextParams.mode.toLowerCase())===l.e.Edit&&(e?e.hasEvaluations():null)],mode:[u.HV,e=>{switch(e.nextParams&&e.nextParams.mode.toLowerCase()){case l.e.Create:return l.e.Create;case l.e.GenerateCache:return l.e.GenerateCache;case l.e.Edit:return l.e.Edit;case l.e.Copy:return l.e.Copy;default:return l.e.None}}]}}).peekState(m.Z5.Rubric.RUBRIC_EVALUATION,{url:"/rubric-evaluation?userId&columnId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:()=>n.e(87833).then(n.bind(n,587833)),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])],[a.gc]:i.resolve,offCanvasArgs:["offCanvasArgs",p.HV,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}}).peekState(m.Z5.Rubric.RUBRIC_VIEW,{url:"/rubric-view?columnId",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:()=>n.e(46595).then(n.bind(n,46595)),resolve:{translations:["$q",r.serviceName,(e,t)=>e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])],offCanvasArgs:["offCanvasArgs",p.HV,(e,t)=>(e.overlay=!t.isLargeBreakpoint(),e)]}}).peekState(m.Z5.Rubric.RUBRIC_GENERATE,{url:"/rubric-generate?columnId",panelClass:"full",pageTitle:"course.rubricGenerate.title",require:()=>Promise.all([n.e(41655),n.e(91866),n.e(34346),n.e(79055)]).then(n.bind(n,979055)),resolve:{translations:[r.serviceName,e=>e.loadBundle("components/directives/rubric/rubric-generate")]}})}])},518806:function(e,t,n){"use strict";n.d(t,{Qr:function(){return h},Ve:function(){return p},lU:function(){return m}}),n(54647);var i=n(808361),r=n(473011),s=n(302032),o=n(563060),a=n(986709),l=n(12838),c=n(889450),d=n(625506);function u(e,t){return function(n,i){t(n,i,e)}}let p="ultra.course.self.enroll.controller";class m{getIframeUrl(){var e;return r.uI(null!==(e=this.legacyUrl)&&void 0!==e?e:this.course&&this.course.homePageUrl)}handleClassicRedirect(e,t){let n=r.hi(e.href);if("/webapps/login/"===e.pathname){if(t(),n.new_loc){let t=r.eJ("/ultra","classicRedirect",{legacyUrl:n.new_loc,isUltra:this.course.isUltra()});n.new_loc=t;let i=r.uI(e.pathname+"?"+d.param(n));this.replaceUrl(i)}else this.replaceUrl(r.uI(e.pathname+"?action=relogin"))}else e.pathname.indexOf("/webapps/blackboard/execute/viewCatalog")>=0&&(t(),this.ultraState.transitionTo("base.course-catalog"))}static isCourseAvailableForSelfEnrollment(e){return e.enrollmentType===a.qMM.SelfEnrollment&&c.Z.isWithinDateRange(new Date,{end:e.enrollmentEndDate?new Date(e.enrollmentEndDate):null,start:e.enrollmentStartDate?new Date(e.enrollmentStartDate):null},!0)}static handleSelfEnrollmentPageRedirect(e,t,n){var i;let r=(null===(i=e.$response)||void 0===i?void 0:i.status)!==a.oji.NotFound,s=this.isCourseAvailableForSelfEnrollment(n),o=t.areAllEntitled([l.dF.ViewCourseEnrollments,l.dF.ViewMaterialSettings]);return!r&&s&&!o}replaceUrl(e){this.$window.location.assign(e)}constructor(e,t,n,i){this.$scope=e,this.$window=t,this.ultraState=i,e.ultraCourseSelfEnroll=this,this.course=n,this.legacyUrl=r.iI(i.params.legacyUrl),e.$on("$stateChangeStart",(e,t,i,r)=>{r.name&&r.name.endsWith("course.classic.outline.ultra-course-self-enroll")&&t.name&&t.name.endsWith("course.classic.outline")&&this.course.isUltra()&&this.ultraState.goPeekState(o.BQ.COURSE_OUTLINE,{courseId:n.id}),this.ultraState.leavePeekState(this.ultraState.current.name)})}}m=function(e,t,n,i){var r,s=arguments.length,o=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(s<3?r(o):s>3?r(t,n,o):r(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}([u(0,(0,s.tB)("$scope")),u(1,(0,s.tB)("$window")),u(2,(0,s.tB)("currentCourse")),u(3,(0,s.tB)(i.HV))],m);class h extends m{}},728042:function(e,t,n){"use strict";n.d(t,{Z:function(){return o},w:function(){return a}});var i=n(464027),r=n(276635),s=n(625506);class o{static OnRootScope(e,t,n){return o.unbindOnDestroy(e,e.$root.$on(t,n))}static OnScope(e,t,n){return o.unbindOnDestroy(e,e.$on(t,n))}static unbindOnDestroy(e,t){return e.$on("$destroy",t),t}static OnWindow(e,t,n){let i=s(window);i.on(e,t);let a=(0,r.once)(()=>i.off(e,t));return o.unbindOnDestroy(n,a),a}}function a(e){return t=>{if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");(e.module?e.module:i.module(e.moduleName,e.requireModules||[])).component(e.componentName,i.extend(e,{controller:t}))}}},505568:function(e,t,n){"use strict";n.d(t,{f:function(){return s},z:function(){return r}});var i=n(24032);function r(e,t){return t&&e===t.columnName?t.sortType===i.E.ASCENDING?t.sortType=i.E.DESCENDING:t.sortType===i.E.DESCENDING?t.sortType=i.E.NONE:t.sortType=i.E.ASCENDING:t={columnName:e,sortType:i.E.ASCENDING},t}function s(e,t){return(null==t?void 0:t.columnName)===e?t.sortType:i.E.NONE}},375334:function(e,t,n){"use strict";var i,r;n.d(t,{F:function(){return i}}),(r=i||(i={})).NoChanges="noChanges",r.NotSaved="notSaved",r.Saved="saved",r.Saving="saving",r.Cancelling="cancelling",r.Deleting="deleting"},516633:function(e,t,n){"use strict";n.d(t,{Ah:function(){return a},Bv:function(){return s},TF:function(){return o},s3:function(){return r}});let i="anonymousId";function r(){return i}function s(e,t){return{id:i,givenName:t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0}),familyName:"",userName:void 0}}function o(e){return(null==e?void 0:e.id)===i}function a(e){var t;let n=null==e?void 0:e.givenName,i=null==e?void 0:e.familyName;return e&&(i||n)?{avatarUrl:null===(t=e.avatar)||void 0===t?void 0:t.permanentUrl,givenName:n,familyName:i,otherName:e.otherName,preferredDisplayName:e.preferredDisplayName,pronouns:e.pronouns,pronunciation:e.pronunciation,pronunciationAudio:e.pronunciationAudio}:null}},45367:function(e,t,n){"use strict";let i;n.d(t,{$U:function(){return b},MR:function(){return d},Ov:function(){return c},Ru:function(){return r},YJ:function(){return l},_H:function(){return f},bc:function(){return g},le:function(){return p},nS:function(){return h},w5:function(){return C},wN:function(){return v}}),n(914602);var r,s,o=n(625506),a=n(945209);let l=39.9375,c=40,d=63.9375,u=e=>e*parseFloat(o("html").css("font-size"));(s=r||(r={})).Small="small",s.Medium="medium",s.Large="large",s.Xlarge="xlarge",s.Xxlarge="xxlarge";let p=function(){return i||(i={small:{start:0,end:u(l)},medium:{start:u(l),end:u(d)},large:{start:u(d),end:u(89.9375)},xlarge:{start:u(89.9375),end:u(119.9375)},xxlarge:{start:u(119.9375),end:999999999}}),i},m=null;o(window).resize(()=>{m=null});let h=function(){return null==m&&(m=o(window).width()),m};function g(){let e=p(),t=h();return t>=e.small.start&&t<e.small.end?"small":t>=e.medium.start&&t<e.medium.end?"medium":t>=e.large.start&&t<e.large.end?"large":t>=e.xlarge.start&&t<e.xlarge.end?"xlarge":"xxlarge"}function f(){return"small"===g()}function b(){return"medium"===g()}function v(){return"large"===g()||"xlarge"===g()||"xxlarge"===g()}function y(e){return e.replace("@media","").trim()}let S={smallUp:window.matchMedia(y(a.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(y(a.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(y(a.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(y(a.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(y(a.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(y(a.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(y(a.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(y(a.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(y(a.BbMediaQueries.xXLargeUp))},C={smallUp:S.smallUp,smallOnly:S.smallOnly,mediumUp:S.mediumUp,mediumOnly:S.mediumOnly,largeUp:S.largeUp,largeOnly:S.largeOnly,xlargeUp:S.xlargeUp,xlargeOnly:S.xlargeOnly,xxlargeUp:S.xxlargeUp,"small-up":S.smallUp,"small-only":S.smallOnly,"medium-up":S.mediumUp,"medium-only":S.mediumOnly,"large-up":S.largeUp,"large-only":S.largeOnly,"xlarge-up":S.xlargeUp,"xlarge-only":S.xlargeOnly,"xxlarge-up":S.xxlargeUp}},645085:function(e,t,n){"use strict";n.d(t,{b1:function(){return a},bb:function(){return s},fm:function(){return o}});let i="course-color-",r=e=>(void 0===e&&(e=0),e%10+1),s=e=>e.course&&e.course.isClassic()?a():i+r(e.courseCardColorIndex),o=(e,t)=>{let n=`${r(t)}`;return e&&(n="classic"),i+n},a=()=>i+"classic"},341177:function(e,t,n){"use strict";var i,r;n.d(t,{D:function(){return i}}),(r=i||(i={})).Open="OPEN",r.Complete="COMPLETE",r.Private="PRIVATE",r.PrivateDuration="PRIVATE_DURATION",r.PrivateDurationClassic="PRIVATE_DURATION_CLASSIC",r.OpenTermClassic="OPEN_TERM_CLASSIC",r.PrivateTermClassic="PRIVATE_CLASSIC",r.TermOpen="OPEN_TERM",r.TermComplete="COMPLETE_TERM",r.TermPrivate="PRIVATE_TERM",r.OpenClassic="OPEN_CLASSIC"},714762:function(e,t,n){"use strict";function i(e,t){s(e,t,"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}function r(e,t){s(e,t,"webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend")}function s(e,t,n){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});let i=function(r){let s;r.data||(r.data={});try{s=t(r)}finally{void 0===s&&e.off(n,i)}};e.on(n,i)}n.d(t,{c:function(){return i},q:function(){return r}})},280903:function(e,t,n){"use strict";n.d(t,{V:function(){return r},h:function(){return s}});var i=n(276635);function r(e){return e&&`${e/16}rem`||"0"}class s{selector(e){let t=new s(this);return t.curSelector=e,t}rule(e,t){return this.subRule(null,e,t),this}build(){return i.map(this.pool,(e,t)=>{let n=[];return e.forEach(e=>n.push(e)),`${n.join(",")}{${t}}`}).join("\n")}subRule(e,t,n){let r=i.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(r,t,n);else{let e=`${t}:${n}`;this.pool[e]=this.pool[e]||new Set,this.pool[e].add(r)}}constructor(e){this.parent=e,this.curSelector=null,null==e?this.pool={}:this.pool=null}}},889450:function(e,t,n){"use strict";let i;var r=n(623048),s=n(619034),o=n(276635);class a{static isValidDate(e){return(0,o.isDate)(e)&&!Number.isNaN(e.getTime())}static isWithinDateRange(e,t,n=!0){let i=!0,r=!0;return t.start&&(i=n?t.start<=e:t.start<e),t.end&&(r=n?t.end>=e:t.end>e),i&&r}static testWithinDateRange(e,t,n=!0){let i=e=>{let t=new Date(e.getTime());return t.setSeconds(0,0),t},r={when:e&&i(e),range:{start:t&&t.start&&i(t.start),end:t&&t.end&&i(t.end)}},o=!r.when||!r.range||a.isWithinDateRange(r.when,{end:r.range.end,start:r.range.start},n),l=!0;if(!o){let e=!0;r.range.start&&a.isSameDay(r.range.start,r.when)&&(e=n?s(r.when).isSameOrAfter(r.range.start,"minute"):s(r.when).isAfter(r.range.start,"minute"));let t=!0;r.range.end&&a.isSameDay(r.range.end,r.when)&&(t=n?s(r.when).isSameOrBefore(r.range.end,"minute"):s(r.when).isBefore(r.range.end,"minute")),l=e&&t}return{isValidDate:!l||o,isValidTime:l}}static isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}static getCurrentTimeZoneId(){return i||(i=r.determine().name()),i}static parseStringToDate(e){return(0,o.isDate)(e)?e:null==e||""===e?null:new Date(e)}static convertToLocalDate(e){let t=a.parseStringToDate(e);return null!==t&&t.setMinutes(t.getMinutes()+t.getTimezoneOffset()),t}static parseDateToISOString(e){return null==e||Number.isNaN(Number(e.getDate()))?"":e.toISOString()}static compareDates(e,t,n=!0){return e&&t?[e,t].sort((e,t)=>e.getTime()-t.getTime())[n?0:1]:e||t}static breakdownSeconds(e){let t=e/60,n=t/60;return{days:Math.floor(n/24),hours:Math.floor(n%24),minutes:Math.floor(t%60),seconds:Math.floor(e%60)}}}t.Z=a},302032:function(e,t,n){"use strict";n.d(t,{K4:function(){return r},aM:function(){return s},bv:function(){return a},tB:function(){return o}});var i=n(276635);let r=function(e){return function(e,...t){let n=Symbol(e.name);return function(i,r,s){let o=s.value;s.value=function(...i){return this[n]=this[n]||e.apply(null,[o].concat(t||[])),this[n].apply(this,i)}}}(i.debounce,e)},s=function(...e){return function(t,n,r){let s=r.value,o=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")");r.value=function(...t){let n=this,r=n.$scope||n.scope;if(!r)throw Error("NO_SCOPE_FOUND");return(0,i.isEmpty)(e)||(n[a]=n[a]||(0,i.once)(()=>{r.$watchGroup(e,()=>{n[o]=null})}),n[a]()),n[o]=n[o]||(0,i.once)(function(...e){return s.apply(n,e)}),n[o].apply(n,t)}}},o=function(e){if(!e)throw Error("Empty name is not accepted");return function(t,n,i){if("function"!=typeof t)throw Error("@Inject only supports constructor arguments");t.$inject=t.$inject||[],t.$inject[i]=e}},a=function(){return function(e,t,n){let i=n.value;n.value=function(...e){let t=i.apply(this,e),n=this.$injector;if(!n)throw Error("$injector NotFound, the decorator requires $injector to be injected into class.");n.invoke(["$rootScope","$q",(e,n)=>{n.when(t).then(()=>e.$applyAsync())}])}}}},232085:function(e,t){"use strict";t.Z=class{static detect(){let e={},t=window.navigator.userAgent.toLowerCase(),n=function(e){return -1!==t.indexOf(e)};return e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&n("iphone")},e.ipod=function(){return n("ipod")},e.ipad=function(){return n("ipad")},e.android=function(){return!e.windows()&&n("android")},e.androidPhone=function(){return e.android()&&n("mobile")},e.androidTablet=function(){return e.android()&&!n("mobile")},e.blackberry=function(){return n("blackberry")||n("bb10")||n("rim")},e.blackberryPhone=function(){return e.blackberry()&&!n("tablet")},e.blackberryTablet=function(){return e.blackberry()&&n("tablet")},e.windows=function(){return n("windows")},e.windowsPhone=function(){return e.windows()&&n("phone")},e.windowsTablet=function(){return e.windows()&&n("touch")&&!e.windowsPhone()},e.fxos=function(){return(n("(mobile;")||n("(tablet;"))&&n("; rv:")},e.fxosPhone=function(){return e.fxos()&&n("mobile")},e.fxosTablet=function(){return e.fxos()&&n("tablet")},e.meego=function(){return n("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e}}},981796:function(e,t,n){"use strict";let i;n.d(t,{$Q:function(){return o},YX:function(){return b},_y:function(){return p},ed:function(){return v},fG:function(){return f},hO:function(){return g},mA:function(){return h},mq:function(){return S},nj:function(){return a},wj:function(){return m}});var r,s,o,a,l=n(625506),c=n(324686),d=n(609582);let u="has-applied-locale-text-direction";function p(e){let t=l(e),n=0;for(;t.length;){if(t.is(".bb-close"))n++;else if(t.is(".bb-offcanvas-panel, #main-content-inner")){if(n<=0)return t[0];n--}t=t.parent()}return document.body}function m(){let e=l(".reveal-modal-bg, .wrs_modal_overlay");return e&&e.length}function h(e){let t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function g(e){let t=e.view,n=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?n.height():e.height,e.width=null==e.width?n.width():e.width;let i=t.offset(),r=n.offset(),s=t.scrollTop(),o=t.scrollLeft(),a=r.top-i.top-e.padding.top,l=r.left-i.left-e.padding.left,c=r.top+e.height+e.padding.bottom-i.top-e.viewHeight,d=r.left+e.width+e.padding.right-i.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(s+a):c>0&&t.scrollTop(s+c):a>0?t.scrollTop(s+a):c<0&&t.scrollTop(s+c),e.width<=e.viewWidth?l<0?t.scrollLeft(o+l):d>0&&t.scrollLeft(o+d):l>0?t.scrollLeft(o+l):d<0&&t.scrollLeft(o+d)}function f(e){e.attr("aria-hidden","true"),c.B(),e.find(":tabbable").each(function(){let e=l(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")})}function b(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each(function(){let e=l(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))})}function v(){if(i)return i;let e=document.createElement("div");e.id="rtl-browser-detector",document.body.appendChild(e);try{e.innerHTML=`
      <div dir="rtl" style="width: 1px; height: 1px; overflow: hidden; position: fixed; left: 0; top: 0">
        <div style="width: 2px; height: 1px; white-space: nowrap">
          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>
          <span style="width: 1px; height: 1px; display: inline-block">&nbsp;</span>
        </div>
      </div>
    `;let t=e.children[0];t.children[0].children[1].scrollIntoView(),i=t.scrollLeft>=0?0:1}catch(e){console.error("Error retrieving scroll direction",e),i=1}finally{document.body.removeChild(e)}return i}(r=o||(o={})).LeftToRight="ltr",r.RightToLeft="rtl",(s=a||(a={}))[s.Positive=0]="Positive",s[s.Negative=1]="Negative";class y{static getInstance(){return y.instance||(y.instance=new y),y.instance}getCSSLoadedPromise(){return this._rtlCSSLoadedPromise}initialize(e){(0,d.setRTL)("rtl"===e);let t=document.getElementsByTagName("html")[0],n=[];if(t.hasAttribute(u))this._rtlCSSLoadedResolve();else{if(t.setAttribute("dir",e),t.setAttribute(u,""),"rtl"===e){let e=Array.from(document.getElementsByClassName("initial-css-link"));for(let t=0;t<e.length;t++){let i=l(e[t]),r=i.attr("href");i.attr("href","");let s=l(i).clone();s.attr("href",r.replace(".css",".rtl.css")),i.removeClass("initial-css-link"),s.appendTo("head"),n.push(new Promise(e=>{s[0].onload=()=>e()}))}Promise.all(n).then(()=>{this._rtlCSSLoadedResolve()})}else this._rtlCSSLoadedResolve();let i=new CustomEvent("initializePageDirection",{detail:{isRtl:"rtl"===e}});document.dispatchEvent(i)}}constructor(){this._rtlCSSLoadedPromise=new Promise(e=>{this._rtlCSSLoadedResolve=e})}}let S=y.getInstance()},815643:function(e,t){"use strict";class n extends Error{constructor(e){let t="string"==typeof e?e:"";e&&e.message&&(t=e.message),super(t),this.name="Exception",this.message=t,this.stack=Error().stack;let i=Error;e&&e.stack?this.stack=e.stack:i.captureStackTrace&&i.captureStackTrace(this,n)}}t.Z=n},78029:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(815643);class r extends i.Z{constructor(e){super(e),this.name="InvalidArgumentsError"}}},193905:function(e,t,n){"use strict";var i=n(625506),r=n(507660),s=n.n(r);class o extends s(){static text(e){return i("<div></div>").html(e).text()}}Object.setPrototypeOf(o,s()),t.Z=o},262197:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(276635);class r{$onEvent(e,t){return this.events[e]=this.events[e]||[],this.events[e].push(t),i.once(()=>{i.remove(this.events[e],e=>e===t)})}$emitEvent(e,...t){let n={type:e};(this.events[e]||[]).forEach(e=>{e.call(this,n,...t)})}constructor(){this.events=Object.create(null)}}},495794:function(e,t,n){"use strict";n.d(t,{Bv:function(){return s},Zl:function(){return a},gW:function(){return o}});var i=n(625506),r=n(324686);function s(e,t){r.B();let n=e?e.find(":tabbable"):i(":tabbable"),s=t||i(document.activeElement),o=0;if(1===s.length){let e=n.index(s);e+1<n.length&&(o=e+1)}n.eq(o).focus()}function o(e,t){r.B();let n=e?e.find(":tabbable"):i(":tabbable"),s=t||i(document.activeElement),o=n.length-1;if(1===s.length){let e=n.index(s);e>0&&(o=e-1)}n.eq(o).focus()}function a(e,t,n){r.B(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),n&&e.closest(n).removeClass("ng-hide"),t?t(e):e.focus()}},721597:function(e,t,n){"use strict";n.d(t,{k:function(){return s}});var i=n(276635),r=n(464027);function s(e,t,n,s){let o={};return e.$watchCollection(()=>t,(t,a)=>{let l=Object.keys(t).filter(e=>!Object.prototype.hasOwnProperty.call(o,e)&&t[e]&&Object.prototype.hasOwnProperty.call(t[e],"$viewValue")&&(!s||!(s.indexOf(e)>-1)));r.forEach(l,r=>{o[r]=e.$watch(()=>t[r].$viewValue,(e,s)=>{!t[r].$dirty&&(null==s||Number.isNaN(Number(s)))||i.isEqual(e,s)||n(e,s)})});let c=Object.keys(a).filter(e=>!Object.prototype.hasOwnProperty.call(t,e)&&a[e]&&Object.prototype.hasOwnProperty.call(a[e],"$viewValue"));r.forEach(c,e=>{o[e](),delete o[e]})}),()=>{r.forEach(o,e=>{e()})}}},941124:function(e,t,n){"use strict";function i(e,t,n){"function"==typeof aptrinsic&&t.getRoles().then(t=>((function(e,t,n){var i,r,s;let o=null!==(i=t.locale)&&void 0!==i?i:n.getAppLocale(),a={id:`${e.siteId}_${t.uuid}`,insRoles:t.insRoles,systemRole:t.systemRole,systemRoles:t.systemRoles,locale:o},l={id:e.siteId,institutionName:e.institutionName,institutionType:e.institutionType,country:e.country,region:e.region,acceptSurveys:null!==(r=e.acceptSurveys)&&void 0!==r&&r,productUpdates:null!==(s=e.productUpdates)&&void 0!==s&&s};aptrinsic("identify",a,l)})(e.getSystemInfo(),t,n),t))}function r(e){"function"==typeof aptrinsic&&aptrinsic("set","globalContext",e)}function s(){"function"==typeof aptrinsic&&aptrinsic("remove","globalContext",["courseRole"])}n.d(t,{pl:function(){return s},sI:function(){return r},tp:function(){return i}})},506971:function(e,t,n){"use strict";n.d(t,{Fl:function(){return u},KZ:function(){return p},Lw:function(){return c},NB:function(){return a},OF:function(){return r},T2:function(){return l},Vr:function(){return i},WQ:function(){return h},ap:function(){return s},j0:function(){return d},zM:function(){return o},zm:function(){return g}});let i=1,r="#c575d2",s="#1874a4",o="#333333",a="#666666",l="#e5e5e5",c="#cdcdcd",d="#ffffff",u="#f0f0f0",p="Open Sans",m="12px",h=`600 ${m} ${p}`,g=`700 ${m} ${p}`},640359:function(e,t,n){"use strict";function i(e){if(!e)return 0;let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t>>>0}n.d(t,{u:function(){return i}})},385847:function(e,t,n){"use strict";n.d(t,{HP:function(){return L},JB:function(){return w},K5:function(){return l},Ku:function(){return g},L_:function(){return v},Mf:function(){return y},OC:function(){return r},RL:function(){return u},Sd:function(){return d},Tw:function(){return O},UP:function(){return S},VM:function(){return h},WV:function(){return o},Wl:function(){return N},X6:function(){return D},YG:function(){return k},ZH:function(){return i},aI:function(){return f},aO:function(){return x},dS:function(){return m},gE:function(){return I},hY:function(){return c},i_:function(){return G},pX:function(){return b},qJ:function(){return T},qc:function(){return R},rH:function(){return p},ry:function(){return E},sS:function(){return P},t1:function(){return A},tH:function(){return $},uR:function(){return a},xE:function(){return C},yY:function(){return s}});let i=8,r=188,s=46,o=40,a=35,l=13,c=27,d=36,u=37,p=110,m=108,h=34,g=33,f=190,b=39,v=32,y=9,S=38,C=48,E=49,I=50,w=51,A=52,k=53,T=54,P=55,D=56,x=57,R=96,L=105;function N(e){let t=e.keyCode;return t===S||t===o||t===u||t===b}function $(e){return e.keyCode===l||e.keyCode===m}function O(e){return e.keyCode===y&&!e.shiftKey}function G(e){return e.keyCode===y&&e.shiftKey}},454945:function(e,t,n){"use strict";n.d(t,{j:function(){return function e(t,n){if(n instanceof t)return n.$pk;if(!n.$scope||"object"!=typeof n.$scope)throw Error("model_utility.findModelPkInScope could not find $scope object on "+n);return e(t,n.$scope)}}})},756124:function(e,t,n){"use strict";function i(e,t){let n=e.toString(),i=n.indexOf(".");return i>0&&n.length-i-1>t?parseFloat(n.slice(0,i+t+1)):e}n.d(t,{m:function(){return i}})},845882:function(e,t,n){"use strict";n.d(t,{Pr:function(){return v},Sx:function(){return u},Wp:function(){return S},Xi:function(){return c},YD:function(){return m},_y:function(){return l},a$:function(){return C},jD:function(){return f},lu:function(){return h},nH:function(){return g},o_:function(){return y},tx:function(){return d},ur:function(){return b},xR:function(){return E},z5:function(){return p}});var i=n(276635),r=n(473011),s=n(658895);let o=["xplor-connector"];function a(e){return r.uI(s.default.partnerCloudBasePath+e)}function l(e){let t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html";return a("/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+new Date().getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self")}function c(e){let t="/content"+(e.displayInIframe?"/ultra":"")+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(t+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(t+="&position="+encodeURIComponent(e.position)),e.mode&&(t+="&mode="+encodeURIComponent(e.mode)),a(t)}function d(e){let t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function u(e){let t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn";return a("/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+new Date().getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t))}function p(e){return a("/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId))}function m(e){return a("/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl")}function h(e){return a("/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function g(e){return a("/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function f(e){return a("/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function b(e){return a("/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function v(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function y(e,t){if(!e)return"";let n=t?e.iconUrl:e.associatedIconUrl;return n?r.gj(n):""}function S(e){let t;return e?(e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""):""}function C(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&i.includes(o,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function E(e){let t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach(e=>{e.childProviders&&Array.prototype.push.apply(t,e.childProviders)}),i.keyBy(t,"providerId")}},458967:function(e,t,n){"use strict";function i(){return"object"==typeof pendo}async function r(e,t,n){if(i())try{let[i,r]=await Promise.all([t.getRoles(),e.getSystemInfo()]);!function(e,t,n){var i;let r=null!==(i=t.locale)&&void 0!==i?i:n.getAppLocale(),s={id:`${e.siteId}_${t.uuid}`,systemRole:t.systemRole,insRoles:t.insRoles,systemRoles:t.systemRoles,locale:r},o={id:e.siteId,institutionName:e.institutionName,institutionType:e.institutionType,country:e.country,region:e.region};pendo.initialize({visitor:s,account:o,excludeAllText:!0})}(r,i,n)}catch(e){console.error("Error retrieving user roles:",e)}}function s(e){i()&&pendo.updateOptions({visitor:{courseRole:e.courseRole}})}function o(){i()&&pendo.updateOptions({visitor:{courseRole:""}})}n.d(t,{Aq:function(){return s},E4:function(){return r},xH:function(){return o}})},789423:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});let i=e=>new Promise((t,n)=>{e.then(e=>t(e)).catch(e=>n(e))})},610624:function(e,t,n){"use strict";n.d(t,{V:function(){return s},d:function(){return r}});let i=0;function r(){return"id_"+ ++i}function s(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},984654:function(e,t,n){"use strict";n.d(t,{G5:function(){return y}});var i=n(847969),r=n(872491),s=n(563060),o=n(825986),a=n(658895),l=n(202784),c=n(174897),d=n(667408),u=n(928316),p=n(44432),m=n(676954),h=n(860995);class g extends l.Component{static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){console.error("ErrorBoundary caught exception",e),"undefined"!=typeof NREUM&&NREUM.noticeError(e),this.props.errorModalService.showDefaultErrorModal()}render(){return this.state.hasError?l.createElement("div"):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}var f=n(852127);class b{$onChanges(e){let t=this.props,n=Object.fromEntries(Object.entries(e).map(([e,t])=>[e,t.currentValue])),i={...this.props,...n};if(this.isFirstRender){this.props=i,this.render(),this.isFirstRender=!1;return}this.didPropsChange(n,t)&&(this.props=i,this.render())}$onDestroy(){this.componentWillUnmount()}didPropsChange(e,t){return Object.entries(e).some(([e,n])=>n!==t[e])}componentWillUnmount(){}render(){}constructor(){this.isFirstRender=!0,this.props={}}}let v=e=>{let t=e=>{var t,n,u,m,h;let{children:f,config:b,env:v}=e,y=f;return b.renderLocalized&&(y=l.createElement(c.g,{locale:null===(t=v.localize)||void 0===t?void 0:t.getLocale(v.$scope),babelfishInstance:null===(n=v.localize)||void 0===n?void 0:n.intl,babelfishFormatInstance:null===(u=v.localize)||void 0===u?void 0:u.frmt,isRtl:null===(m=v.localize)||void 0===m?void 0:m.isRTL(),..."object"==typeof b.renderLocalized?b.renderLocalized:{},mockLocalize:a.default.unitTesting?(0,d.G)():void 0},y)),b.withProvider&&v.store&&(y=l.createElement(p.zt,{store:v.store},y)),b.withThemeProvider&&(y=l.createElement(i.AnalyticsJssThemeProvider,{theme:"light",isRtl:null===(h=v.localize)||void 0===h?void 0:h.isRTL(),cssReset:"none",zIndex:{modal:1350}},y)),b.withBaseStateNameProvider&&(y=l.createElement(s.f8,null,y)),b.withCurrentCourse&&v.currentCourseService&&(y=l.createElement(r.kQ.Provider,{value:v.currentCourseService.courseId},y)),b.withTransitScope&&v.$scope&&(y=l.createElement(o.ir,{value:v.$scope},y)),!1!==b.withErrorModalBoundary&&v.errorModalService&&(y=l.createElement(g,{errorModalService:v.errorModalService},y)),y};return t.displayName=e,t};function y(e){var t,n,i,r,s,o;let a={...e,attributes:null!==(t=e.attributes)&&void 0!==t?t:[],bindingNames:null!==(i=e.bindingNames)&&void 0!==i?i:Object.keys(null!==(n=e.Class.propTypes)&&void 0!==n?n:{}),injectNames:null!==(r=e.injectNames)&&void 0!==r?r:[],withErrorModalBoundary:null===(s=e.withErrorModalBoundary)||void 0===s||s,withThemeProvider:null===(o=e.withThemeProvider)||void 0===o||o},c=[],d=!!a.renderLocalized||a.withThemeProvider;return a.withErrorModalBoundary&&c.push(f.HV),d&&c.push(m.serviceName),(d||a.withTransitScope)&&c.push("$scope"),a.withProvider&&c.push("$ngRedux"),a.withCurrentCourse&&c.push(h.HV),{bindings:Object.fromEntries([...a.bindingNames.map(e=>[e,"<"]),...a.attributes.map(e=>[e,"@"])]),controller:function(e,t){var n;let i=v(e.Class.name);return(n=class extends b{render(){(0,u.render)(l.createElement(i,{config:e,env:{store:this.injectedModules.$ngRedux,errorModalService:this.injectedModules[f.HV],localize:this.injectedModules[m.serviceName],$scope:this.injectedModules.$scope,currentCourseService:this.injectedModules[h.HV]}},l.createElement(e.Class,{...this.injectedProps,...this.props})),this.$element[0])}componentWillUnmount(){(0,u.unmountComponentAtNode)(this.$element[0])}constructor(n,...i){var r;super(),this.$element=n,this.injectedProps={},this.injectedModules={},t.forEach((e,t)=>{this.injectedModules[e]=i[t]}),(null!==(r=e.injectNames)&&void 0!==r?r:[]).forEach(e=>{this.injectedProps[e]=this.injectedModules[e]})}}).$inject=["$element",...t],n}(a,Array.from(new Set([...c,...a.injectNames])))}}},967340:function(e,t,n){"use strict";n.d(t,{a:function(){return i}});let i=/<!--[^\r\n]*?-->|<[^\r\n]*?>/g},685514:function(e,t,n){"use strict";let i;n.d(t,{I:function(){return s}});var r=n(625506);function s(){if(null==i){let e=r('<div style="width:100px; height:100px; overflow:hidden; position:absolute; top:-200px; left:-200px;"><div class="inner" style="height:200px;"></div>'),t=e.find(".inner");r("body").append(e);let n=t.innerWidth();e.css("overflow","auto");let s=t.innerWidth();r(e).remove(),i=n-s}return i}},878218:function(e,t,n){"use strict";n.d(t,{H:function(){return s},L:function(){return function e(t){return Array.isArray(t)?t.map(t=>e(t)):(0,i.isPlainObject)(t)?(0,i.mapValues)(t,t=>e(t)):(0,r.YUt)(t)}}});var i=n(276635),r=n(259197);function s(e){let t=new Set;return JSON.parse(JSON.stringify(e,(e,n)=>"object"==typeof n&&t.has(n)?void 0:("object"!=typeof n||t.add(n),n)))}},3636:function(e,t){"use strict";class n{static getServerTime(){return new Date(new Date().getTime()+n.clientTimeDifferenceMS)}static getServerTimeAsEpochTime(){return this.getServerTime().getTime()/1e3}static setClientOffset(e){n.clientTimeDifferenceMS=e}}n.clientTimeDifferenceMS=0,t.Z=n},351876:function(e,t,n){"use strict";function i(e,t,n){return e=e.trim(),n=n||"...",e.length>t&&(e=e.slice(0,t)+n),e}function r(e,t,n){return n=n||"",e?e.replace(t,n):""}function s(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function o(e,t){return 0===(e||"").indexOf(t)}n.d(t,{DR:function(){return u},EY:function(){return r},Ne:function(){return i},Ny:function(){return o},_X:function(){return c},aV:function(){return l},bj:function(){return d},pn:function(){return s}});let a=document.createElement("textarea");function l(e){return a.innerHTML=e,a.value}function c(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function d(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function u(e){return null!=e.match(/[\-\s]/)}},324686:function(e,t,n){"use strict";n.d(t,{B:function(){return r}});var i=n(625506);function r(){return i.extend(i.expr[":"],{tabbable(e){let t=i.attr(e,"tabindex"),n=null!=t;return(!n||t>=0)&&function(e,t){let n,r,s,o,a;let l=e.nodeName.toLowerCase();return"area"===l?(r=(n=e.parentNode).name,!!e.href&&!!r&&"map"===n.nodeName.toLowerCase()&&(s=i("img[usemap='#"+r+"']")).length>0&&s.is(":visible")):(/^(input|select|textarea|button|object)$/.test(l)?(o=!e.disabled)&&(a=i(e).closest("fieldset")[0])&&(o=!a.disabled):o="a"===l&&e.href||t,o&&i(e).is(":visible"))}(e,n)}})}},473011:function(e,t,n){"use strict";n.d(t,{AH:function(){return i.AH},G1:function(){return i.G1},Ou:function(){return i.Ou},RR:function(){return i.RR},SV:function(){return i.SV},Sv:function(){return i.Sv},Yo:function(){return i.Yo},ZN:function(){return a},_Y:function(){return i._Y},eJ:function(){return o},eY:function(){return i.eY},fL:function(){return i.fL},gj:function(){return i.gj},hi:function(){return i.hi},iI:function(){return s},ih:function(){return i.ih},mg:function(){return i.mg},re:function(){return i.re},uI:function(){return i.uI},xx:function(){return i._G}});var i=n(817426),r=n(625506);function s(e){let t="";return e&&(t=decodeURIComponent(e).trim()),t.length>0&&"/"===t[0]&&t||null}function o(e,t,n){return encodeURIComponent(e+"/"+t+"?"+r.param(n))}function a(e){return(0,i.uI)("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent((0,i.uI)(e)))}},1674:function(){}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={id:e,loaded:!1,exports:{}};return l[e].call(n.exports,n,n.exports,d),n.loaded=!0,n.exports}d.m=l,d.amdD=function(){throw Error("define cannot be used indirect")},d.amdO={},e=[],d.O=function(t,n,i,r){if(n){r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[n,i,r];return}for(var o=1/0,s=0;s<e.length;s++){for(var n=e[s][0],i=e[s][1],r=e[s][2],a=!0,l=0;l<n.length;l++)o>=r&&Object.keys(d.O).every(function(e){return d.O[e](n[l])})?n.splice(l--,1):(a=!1,r<o&&(o=r));if(a){e.splice(s--,1);var c=i();void 0!==c&&(t=c)}}return t},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},d.t=function(e,i){if(1&i&&(e=this(e)),8&i||"object"==typeof e&&e&&(4&i&&e.__esModule||16&i&&"function"==typeof e.then))return e;var r=Object.create(null);d.r(r);var s={};t=t||[null,n({}),n([]),n(n)];for(var o=2&i&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach(function(t){s[t]=function(){return e[t]}});return s.default=function(){return e},d.d(r,s),r},d.d=function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.f={},d.e=function(e){return Promise.all(Object.keys(d.f).reduce(function(t,n){return d.f[n](e,t),t},[]))},d.u=function(e){return""+(({659:"cldrdata-ms",2576:"cldrdata-de-DE",6363:"cldrdata-zh-Hant",6387:"cldrdata-ja-JP",9962:"cldrdata-th-TH",11819:"locale-en-gb",12669:"cldrdata-sv-SE",12803:"locale-ms-my",14526:"locale-nn-no",14788:"locale-pt-pt",15153:"cldrdata-cy",16323:"cldrdata-cs",18448:"cldrdata-ru",19246:"locale-ar-sa",19361:"locale-ko-kr",19877:"cldrdata-ar-SA",21684:"cldrdata-he-IL",22258:"institution-page",22551:"cldrdata-tr",23125:"cldrdata-pt-BR",23941:"locale-az-az",24441:"cldrdata-zh",24625:"datepicker-locales",25656:"cldrdata-nn-NO",26157:"cldrdata-en-GB",26921:"locale-it-it",27457:"cldrdata-zh-Hans-CN",27986:"cldrdata-en-US",28405:"cldrdata-pl-PL",30252:"locale-th-th",31411:"cldrdata-ja",32096:"cldrdata-pl",32713:"locale-nb-no",33174:"cldrdata-da-DK",36032:"cldrdata-cy-GB",36550:"cldrdata-he",37072:"cldrdata-tr-TR",38746:"cldrdata-zh-Hans",40412:"locale-pt-br",41770:"locale-zh-cn",41874:"locale-en",42953:"courses",45374:"locale-uk-ua",45475:"cldrdata-nl",46179:"locale-nl-nl",46711:"cldrdata-cs-CZ",47329:"cldrdata-pt",47363:"cldrdata-ko-KR",47996:"locale-es-es",48850:"cldrdata-it",49486:"cldrdata-pt-PT",51940:"cldrdata-ru-RU",53423:"cldrdata-fr-CA",54870:"cldrdata-nn",55399:"cldrdata-zh-Hant-TW",56291:"cldrdata-da",58110:"locale-cs-cz",58270:"locale-en-us-k12",59250:"cldrdata-ar-AE",63020:"cldrdata-fr",68785:"locale-en-us-pro",68916:"locale-ru-ru",70370:"cldrdata-sv",70533:"cldrdata-es",71023:"cldrdata-it-IT",73065:"locale-fr-fr",74662:"locale-da-dk",75221:"cldrdata-es-ES",75238:"locale-en-au",76922:"locale-cy-gb",77075:"cldrdata-nl-NL",78682:"locale-ja-jp",83099:"cldrdata-nb",83442:"cldrdata-ar",83554:"cldrdata-ko",83761:"cldrdata-fr-FR",86083:"cldrdata-th",86202:"locale-de-de",86212:"locale-fr-ca",87714:"locale-he-il",89800:"cldrdata-de",92823:"cldrdata-en-AU",92921:"locale-zh-tw",94459:"app_develop",95054:"locale-sv-se",97399:"locale-pl-pl",99315:"locale-tr-tr",99686:"cldrdata-en",99852:"cldrdata-nb-NO"})[e]||e)+"-"+d.h()+".js"},d.miniCssF=function(e){return""+e+"-"+d.h()+".css"},d.h=function(){return"ff0c76f5f2500d8f"},d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},r="@learn-ultra-apps/ultra:",d.l=function(e,t,n,s){if(i[e]){i[e].push(t);return}if(void 0!==n)for(var o,a,l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var u=l[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+n){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,d.nc&&o.setAttribute("nonce",d.nc),o.setAttribute("data-webpack",r+n),o.src=e),i[e]=[t];var p=function(t,n){o.onerror=o.onload=null,clearTimeout(m);var r=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(function(e){return e(n)}),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),a&&document.head.appendChild(o)},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){d.g.importScripts&&(e=d.g.location+"");var e,t=d.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&!e;)e=n[i--].src}if(!e)throw Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),d.p=e}(),function(){if("undefined"!=typeof document){var e=function(e,t,n,i,r){var s=document.createElement("link");return s.rel="stylesheet",s.type="text/css",s.onerror=s.onload=function(n){if(s.onerror=s.onload=null,"load"===n.type)i();else{var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,l=Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=o,l.request=a,s.parentNode.removeChild(s),r(l)}},s.href=t,n?n.parentNode.insertBefore(s,n.nextSibling):document.head.appendChild(s),s},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var r=n[i],s=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(s===e||s===t))return r}for(var o=document.getElementsByTagName("style"),i=0;i<o.length;i++){var r=o[i],s=r.getAttribute("data-href");if(s===e||s===t)return r}},n={32143:0};d.f.miniCss=function(i,r){let s=function(){n[i]?r.push(n[i]):0!==n[i]&&({494:1,839:1,2383:1,2641:1,2938:1,3780:1,3814:1,3890:1,4302:1,4974:1,5076:1,7118:1,8242:1,11735:1,11788:1,11790:1,13171:1,13826:1,13980:1,13984:1,14889:1,15025:1,15471:1,15554:1,15653:1,16509:1,16641:1,16915:1,18196:1,19338:1,19579:1,19661:1,20101:1,20210:1,20669:1,20703:1,20728:1,21013:1,21039:1,22065:1,22258:1,22275:1,22657:1,23035:1,23177:1,23832:1,23966:1,26537:1,27220:1,27492:1,27571:1,27673:1,27941:1,28173:1,29302:1,30172:1,30204:1,30531:1,30970:1,31538:1,31795:1,32274:1,33861:1,34346:1,34692:1,34925:1,34928:1,35064:1,35131:1,35969:1,36005:1,37220:1,37470:1,37692:1,37844:1,38269:1,38427:1,38553:1,39283:1,39535:1,39624:1,41054:1,41221:1,42953:1,46238:1,46295:1,46367:1,46835:1,47532:1,47648:1,47691:1,47693:1,48260:1,48390:1,48624:1,49434:1,50661:1,51148:1,51633:1,53435:1,53663:1,53754:1,54404:1,54526:1,54532:1,54769:1,55357:1,56842:1,57091:1,57240:1,57318:1,59225:1,59373:1,59977:1,59980:1,60099:1,60131:1,60180:1,60379:1,60734:1,60866:1,61496:1,61515:1,61550:1,62194:1,62211:1,62402:1,62758:1,63096:1,64119:1,64698:1,64811:1,67400:1,69561:1,71089:1,71103:1,71189:1,71790:1,73497:1,74476:1,74757:1,75243:1,76659:1,76839:1,77112:1,77246:1,79055:1,79069:1,79123:1,79179:1,79639:1,80336:1,80920:1,81446:1,82197:1,82414:1,82518:1,83417:1,83670:1,83727:1,83794:1,83889:1,84214:1,85651:1,85828:1,85942:1,85960:1,86504:1,86535:1,86980:1,87181:1,87251:1,87288:1,87383:1,88710:1,88948:1,89069:1,89833:1,89996:1,90414:1,90554:1,91077:1,91188:1,91450:1,92589:1,92777:1,93014:1,94413:1,94979:1,94996:1,96702:1,96902:1,96967:1,98377:1,98490:1,98731:1,99001:1,99226:1,99894:1})[i]&&r.push(n[i]=new Promise(function(n,r){var s=d.miniCssF(i);s="rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")?s.replace(".css",".rtl.css"):s;var o=d.p+s;if(t(s,o))return n();e(i,o,null,n,r)}).then(function(){n[i]=0},function(e){throw delete n[i],e}))};document.getElementsByTagName("html")[0].hasAttribute("has-applied-locale-text-direction")?s():document.addEventListener("initializePageDirection",s)}}}(),s={32143:0},d.f.j=function(e,t){var n=d.o(s,e)?s[e]:void 0;if(0!==n){if(n)t.push(n[2]);else if(/^(3(2274|4692|7844)|5(3663|4532|5357)|(239|608)66|16915|19661|27673|42953|62758|98377)$/.test(e))s[e]=0;else{var i=new Promise(function(t,i){n=s[e]=[t,i]});t.push(n[2]=i);var r=d.p+d.u(e),o=Error();d.l(r,function(t){if(d.o(s,e)&&(0!==(n=s[e])&&(s[e]=void 0),n)){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",o.name="ChunkLoadError",o.type=i,o.request=r,n[1](o)}},"chunk-"+e,e)}}},d.O.j=function(e){return 0===s[e]},o=function(e,t){var n,i,r=t[0],o=t[1],a=t[2],l=0;if(r.some(function(e){return 0!==s[e]})){for(n in o)d.o(o,n)&&(d.m[n]=o[n]);if(a)var c=a(d)}for(e&&e(t);l<r.length;l++)i=r[l],d.o(s,i)&&s[i]&&s[i][0](),s[i]=0;return d.O(c)},(a=self.webpackChunk_learn_ultra_apps_ultra=self.webpackChunk_learn_ultra_apps_ultra||[]).forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a));var u=d.O(void 0,[35483,95190,32114],function(){return d(957094)});d.O(u)}();